!function(){"use strict";function n(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function e(n,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}function t(n,t,i){return t&&e(n.prototype,t),i&&e(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n}(self.webpackChunkassc_crs=self.webpackChunkassc_crs||[]).push([[8671,6269],{88671:function(e,i,a){a.r(i),a.d(i,{DwLoadingHttpComponent:function(){return p},DwLoadingMaskService:function(){return y},DwLoadingModule:function(){return v}});var o,l=a(42746),s=a(55245),r=a(93029),d=a(16612),u=a(10952),c=a(30469),f=a(71049),g=a(47372),h=["*"],p=((o=function(){function e(){n(this,e)}return t(e,[{key:"ngOnInit",value:function(){}},{key:"ngOnDestroy",value:function(){}}]),e}()).\u0275fac=function(n){return new(n||o)},o.\u0275cmp=l.\u0275\u0275defineComponent({type:o,selectors:[["dw-loading-http"]],ngContentSelectors:h,decls:6,vars:4,consts:[[1,"ant-spin-nested-loading"],[1,"ant-spin","ant-spin-lg","ant-spin-spinning"],[1,"dw-f-loading-http-modal"],[3,"dwSpinning","dwSize","dwTip","dwDelay"]],template:function(n,e){1&n&&(l.\u0275\u0275projectionDef(),l.\u0275\u0275element(0,"div",0),l.\u0275\u0275elementStart(1,"div"),l.\u0275\u0275elementStart(2,"div",1),l.\u0275\u0275elementStart(3,"div",2),l.\u0275\u0275elementStart(4,"dw-spin",3),l.\u0275\u0275projection(5),l.\u0275\u0275elementEnd(),l.\u0275\u0275elementEnd(),l.\u0275\u0275elementEnd(),l.\u0275\u0275elementEnd()),2&n&&(l.\u0275\u0275advance(4),l.\u0275\u0275property("dwSpinning",e.loadingMask.spinning)("dwSize","large")("dwTip",e.loadingMask.tip)("dwDelay",e.loadingMask.delay))},directives:[r.DwSpinComponent],encapsulation:2}),o),v=function(){var e=t(function e(){n(this,e)});return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=l.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=l.\u0275\u0275defineInjector({imports:[[s.CommonModule,r.DwSpinModule]]}),e}(),y=function(){var e=function(){function e(t,i,a){n(this,e),this.overlay=t,this.dwLoadMaskHttp=i,this.dwLoadMaskDelay=a,this.loadingList=[],this.loadingSubject=new f.BehaviorSubject(null),this.loadingSubjectNext(),this.loadingMaskOnInit()}return t(e,[{key:"overlayRef",get:function(){if(!this._overlayRef){var n=this.overlay.position().global();this._overlayRef=this.overlay.create({hasBackdrop:!0,positionStrategy:n,panelClass:"dw-f-loading-http-panel",width:"100%",height:"100%"})}return this._overlayRef}},{key:"auto",value:function(n,e,t){var i=null,a=this.dwLoadMaskHttp,o=this.dwLoadMaskDelay;return null!==n&&(a=n),a&&(null!=e&&(o=e),i=this.show(o,t)),i}},{key:"show",value:function(n,e){var t=this,i=(new Date).getTime().toString()+"_"+Math.floor(1e4*Math.random()+1).toString(),a=this.newConfig();null!=n&&(a.delay=n),null!=e&&(a.tip=e),a.spinning=!(a.delay>0);var o=this.newLoadMaskItem();return o.id=i,o.config=a,this.loadingList.push(o),a.delay>0?setTimeout(function(){t.reflash(i)},a.delay):this.loadingSubjectNext(o),i}},{key:"reflash",value:function(n){var e=this.newLoadMaskItem(),t=this.loadingList.length;if(0===t)this.loadingSubjectNext(e);else{if(""!==n)for(var i=t-1;i>=0;i--){var a=this.loadingList[i];if(n===a.id){a.config.spinning=!0,a.config.delay=0;break}}for(var o=t-1;o>=0;o--)if(this.loadingList[o].config.spinning){var l=this.loadingList[o];e.id=l.id,e.config=l.config,this.loadingSubjectNext(e);break}}}},{key:"hide",value:function(n){if(n){var e=this.loadingList.length;if(e>0)for(var t=0;t<e;t++)if(n===this.loadingList[t].id){this.loadingList.splice(t,1),this.reflash("");break}}}},{key:"clear",value:function(){this.loadingList.length>0&&(this.loadingList=[],this.reflash(""))}},{key:"getLoadingMask",value:function(){return this.loadingSubject.asObservable().pipe((0,g.filter)(function(n){return null!==n}),(0,g.distinctUntilChanged)())}},{key:"newConfig",value:function(){return{spinning:!1,delay:0,tip:""}}},{key:"nullConfig",value:function(){return{spinning:null,delay:null,tip:null}}},{key:"newLoadMaskItem",value:function(){return{id:"",config:this.newConfig()}}},{key:"loadingSubjectNext",value:function(n){var e=this.newLoadMaskItem();n&&(e.id=n.id,e.config=Object.assign({},n.config)),this.loadingSubject.next(e)}},{key:"loadingMaskOnInit",value:function(){var n=this;this.loadingMask=this.newConfig(),this.getLoadingMask().subscribe(function(e){var t=Object.assign({},e.config);setTimeout(function(){if(n.loadingMask=t,n.loadingMask.spinning){if(!n.overlayRef||!n.overlayRef.hasAttached()){var e=new u.ComponentPortal(p);n._container=n.overlayRef.attach(e).instance}n._container.loadingMask=n.loadingMask}else n.overlayRef&&n.overlayRef.hasAttached()&&n.overlayRef.detach()})})}}]),e}();return e.\u0275fac=function(n){return new(n||e)(l.\u0275\u0275inject(d.Overlay),l.\u0275\u0275inject(c.DW_LOAD_MASK_HTTP),l.\u0275\u0275inject(c.DW_LOAD_MASK_DELAY))},e.\u0275prov=l.\u0275\u0275defineInjectable({factory:function(){return new e(l.\u0275\u0275inject(d.Overlay),l.\u0275\u0275inject(c.DW_LOAD_MASK_HTTP),l.\u0275\u0275inject(c.DW_LOAD_MASK_DELAY))},token:e,providedIn:"root"}),e}()}}])}();