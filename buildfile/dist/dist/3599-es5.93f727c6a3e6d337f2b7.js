!function(){"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function n(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}(self.webpackChunkassc_crs=self.webpackChunkassc_crs||[]).push([[3599,3748],{93599:function(t,i,r){r.r(i),r.d(i,{DwAnnouncementModalComponent:function(){return b},DwAnnouncementModalService:function(){return D},DwAnnouncementModule:function(){return I},DwAnnouncementRepository:function(){return E},DwAnnouncementService:function(){return A}});var o,a=r(31441),s=r(42746),u=r(59083),d=r(30469),c=r(96709),l=r(55245),f=r(83522),h=r(74591),v=r(93761),m=r(1020),g=r(71049),p=r(62481),w=r(96670),y=r(8852),b=((o=function(){function t(n,i){e(this,t),this._sanitizer=n,this.modalSubject=i,this.isIgnore=!1}return n(t,[{key:"description",get:function(){return this._description},set:function(e){this._description=this._sanitizer.bypassSecurityTrustHtml(e)}},{key:"close",value:function(){this.modalSubject.destroy(this.isIgnore)}},{key:"ngOnInit",value:function(){}}]),t}()).\u0275fac=function(e){return new(e||o)(s.\u0275\u0275directiveInject(u.DomSanitizer),s.\u0275\u0275directiveInject(a.DwModalRef))},o.\u0275cmp=s.\u0275\u0275defineComponent({type:o,selectors:[["dw-announcement-modal"]],inputs:{description:"description"},decls:10,vars:8,consts:[[3,"innerHtml"],[2,"padding-top","20px"],["dw-button","","dwType","primary",3,"click"],["dw-checkbox","",3,"ngModel","ngModelChange"]],template:function(e,t){1&e&&(s.\u0275\u0275elementStart(0,"div"),s.\u0275\u0275element(1,"div",0),s.\u0275\u0275elementStart(2,"div",1),s.\u0275\u0275elementStart(3,"button",2),s.\u0275\u0275listener("click",function(){return t.close()}),s.\u0275\u0275text(4),s.\u0275\u0275pipe(5,"translate"),s.\u0275\u0275elementEnd(),s.\u0275\u0275text(6," \xa0\xa0"),s.\u0275\u0275elementStart(7,"label",3),s.\u0275\u0275listener("ngModelChange",function(e){return t.isIgnore=e}),s.\u0275\u0275text(8),s.\u0275\u0275pipe(9,"translate"),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd()),2&e&&(s.\u0275\u0275advance(1),s.\u0275\u0275property("innerHtml",t.description,s.\u0275\u0275sanitizeHtml),s.\u0275\u0275advance(3),s.\u0275\u0275textInterpolate(s.\u0275\u0275pipeBind1(5,4,"dw-announcement-got-it")),s.\u0275\u0275advance(3),s.\u0275\u0275property("ngModel",t.isIgnore),s.\u0275\u0275advance(1),s.\u0275\u0275textInterpolate(s.\u0275\u0275pipeBind1(9,6,"dw-announcement-never-show-again")))},directives:[v.DwButtonComponent,w.uG,y.u,h.DwCheckboxComponent,m.NgControlStatus,m.NgModel],pipes:[f.TranslatePipe],styles:[""]}),o),k=[],I=function(){var t=n(function t(){e(this,t)});return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=s.\u0275\u0275defineInjector({providers:[].concat(k),imports:[[l.CommonModule,f.TranslateModule,h.DwCheckboxModule,a.DwModalModule,v.DwButtonModule,m.FormsModule]]}),t}(),E=function(){var t=function(){function t(n,i){e(this,t),this.dwAppId=n,this.http=i}return n(t,[{key:"getActiveAnnouncement",value:function(e){return this.http.get("restful/service/DWSysManagement/Announcement/ActiveAnnouncement",{params:{goodsCode:this.dwAppId,displayId:e}})}}]),t}();return t.\u0275fac=function(e){return new(e||t)(s.\u0275\u0275inject(d.DW_APP_ID),s.\u0275\u0275inject(c.DwOmHttpClient))},t.\u0275prov=s.\u0275\u0275defineInjectable({factory:function(){return new t(s.\u0275\u0275inject(d.DW_APP_ID),s.\u0275\u0275inject(c.DwOmHttpClient))},token:t,providedIn:I}),t}(),A=function(){var t=function(){function t(n,i,r){e(this,t),this.systemConfigService=n,this.localStorage=i,this.announcementRepository=r}return n(t,[{key:"getAnnouncement",value:function(e){var t=this;return g.Observable.create(function(n){t.systemConfigService.get("multiTenant").subscribe(function(i){!0===i?t.announcementRepository.getActiveAnnouncement(e).subscribe(function(e){if(e.data&&e.data.length){var i=e.data[0];t.getIgnoreList().filter(function(e){return e.id===i.id}).length?n.next(null):n.next(i)}else n.next(null)}):n.next(null)},function(e){n.next(null)})})}},{key:"getIgnoreList",value:function(){var e=[],t=this.localStorage.get("dwAnnouncementIgnore");return t&&(t=JSON.parse(t),Array.isArray(t)&&(e=t)),e}},{key:"setIgnore",value:function(e){var t=this.getIgnoreList(),n=t.findIndex(function(t){return t.displayId===e.displayId});-1!==n?t[n]=e:t.push(e),t=t.filter(function(e){return new Date(e.expires)>new Date}),this.localStorage.set("dwAnnouncementIgnore",JSON.stringify(t))}}]),t}();return t.\u0275fac=function(e){return new(e||t)(s.\u0275\u0275inject(d.DwSystemConfigService),s.\u0275\u0275inject(p.LocalStorage),s.\u0275\u0275inject(E))},t.\u0275prov=s.\u0275\u0275defineInjectable({factory:function(){return new t(s.\u0275\u0275inject(d.DwSystemConfigService),s.\u0275\u0275inject(p.LocalStorage),s.\u0275\u0275inject(E))},token:t,providedIn:I}),t}(),D=function(){var t=function(){function t(n,i){e(this,t),this.dwModalService=n,this.announcementService=i}return n(t,[{key:"displayAnnouncement",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"730";return g.Observable.create(function(i){t.announcementService.getAnnouncement(e).subscribe(function(r){r?(t._postModal=t.dwModalService.create({dwContent:b,dwWidth:n,dwFooter:null,dwClosable:!1,dwMaskClosable:!1,dwOnOk:function(e){},dwOnCancel:function(){},dwComponentParams:{description:r.description}}),t._postModal.afterClose.subscribe(function(n){n&&t.announcementService.setIgnore({displayId:e,id:r.id,expires:r.endDate}),i.next(!0)})):i.next(!0)})})}}]),t}();return t.\u0275fac=function(e){return new(e||t)(s.\u0275\u0275inject(a.DwModalService),s.\u0275\u0275inject(A))},t.\u0275prov=s.\u0275\u0275defineInjectable({factory:function(){return new t(s.\u0275\u0275inject(a.DwModalService),s.\u0275\u0275inject(A))},token:t,providedIn:I}),t}()},8852:function(t,i,r){r.d(i,{u:function(){return u},f:function(){return d}});var o,a=r(36535),s=r(42746),u=((o=function(){function t(n,i){e(this,t),this.elementRef=n,this.renderer=i,this.hidden=null,this.renderer.setAttribute(this.elementRef.nativeElement,"hidden","")}return n(t,[{key:"setHiddenAttribute",value:function(){this.hidden?this.renderer.setAttribute(this.elementRef.nativeElement,"hidden","string"==typeof this.hidden?this.hidden:""):this.renderer.removeAttribute(this.elementRef.nativeElement,"hidden")}},{key:"ngOnChanges",value:function(){this.setHiddenAttribute()}},{key:"ngAfterViewInit",value:function(){this.setHiddenAttribute()}}]),t}()).\u0275fac=function(e){return new(e||o)(s.\u0275\u0275directiveInject(s.ElementRef),s.\u0275\u0275directiveInject(s.Renderer2))},o.\u0275dir=s.\u0275\u0275defineDirective({type:o,selectors:[["","dw-button",""],["dw-button-group"],["","dw-icon",""],["","dw-menu-item",""],["","dw-submenu",""],["dw-select-top-control"],["dw-select-placeholder"],["dw-input-group"]],inputs:{hidden:"hidden"},features:[s.\u0275\u0275NgOnChangesFeature]}),o),d=function(){var t=n(function t(){e(this,t)});return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=s.\u0275\u0275defineInjector({imports:[[a.PlatformModule]]}),t}()},96670:function(t,i,r){r.d(i,{uG:function(){return f},ln:function(){return h}});var o,a=r(36535),s=r(42746),u=r(88065),d=function(){function t(n,i,r,o){var s=this;e(this,t),this.triggerElement=n,this.ngZone=i,this.insertExtraNode=r,this.platformId=o,this.waveTransitionDuration=400,this.styleForPseudo=null,this.extraNode=null,this.lastTime=0,this.onClick=function(e){!s.triggerElement||!s.triggerElement.getAttribute||s.triggerElement.getAttribute("disabled")||"INPUT"===e.target.tagName||s.triggerElement.className.indexOf("disabled")>=0||s.fadeOutWave()},this.platform=new a.Platform(this.platformId),this.clickHandler=this.onClick.bind(this),this.bindTriggerEvent()}return n(t,[{key:"waveAttributeName",get:function(){return this.insertExtraNode?"ant-click-animating":"ant-click-animating-without-extra-node"}},{key:"bindTriggerEvent",value:function(){var e=this;this.platform.isBrowser&&this.ngZone.runOutsideAngular(function(){e.removeTriggerEvent(),e.triggerElement&&e.triggerElement.addEventListener("click",e.clickHandler,!0)})}},{key:"removeTriggerEvent",value:function(){this.triggerElement&&this.triggerElement.removeEventListener("click",this.clickHandler,!0)}},{key:"removeStyleAndExtraNode",value:function(){this.styleForPseudo&&document.body.contains(this.styleForPseudo)&&(document.body.removeChild(this.styleForPseudo),this.styleForPseudo=null),this.insertExtraNode&&this.triggerElement.contains(this.extraNode)&&this.triggerElement.removeChild(this.extraNode)}},{key:"destroy",value:function(){this.removeTriggerEvent(),this.removeStyleAndExtraNode()}},{key:"fadeOutWave",value:function(){var e=this,t=this.triggerElement,n=this.getWaveColor(t);t.setAttribute(this.waveAttributeName,"true"),!(Date.now()<this.lastTime+this.waveTransitionDuration)&&(this.isValidColor(n)&&(this.styleForPseudo||(this.styleForPseudo=document.createElement("style")),this.styleForPseudo.innerHTML="\n      [ant-click-animating-without-extra-node='true']::after, .ant-click-animating-node {\n        --antd-wave-shadow-color: ".concat(n,";\n      }"),document.body.appendChild(this.styleForPseudo)),this.insertExtraNode&&(this.extraNode||(this.extraNode=document.createElement("div")),this.extraNode.className="ant-click-animating-node",t.appendChild(this.extraNode)),this.lastTime=Date.now(),this.runTimeoutOutsideZone(function(){t.removeAttribute(e.waveAttributeName),e.removeStyleAndExtraNode()},this.waveTransitionDuration))}},{key:"isValidColor",value:function(e){return!!e&&"#ffffff"!==e&&"rgb(255, 255, 255)"!==e&&this.isNotGrey(e)&&!/rgba\(\d*, \d*, \d*, 0\)/.test(e)&&"transparent"!==e}},{key:"isNotGrey",value:function(e){var t=e.match(/rgba?\((\d*), (\d*), (\d*)(, [\.\d]*)?\)/);return!(t&&t[1]&&t[2]&&t[3]&&t[1]===t[2]&&t[2]===t[3])}},{key:"getWaveColor",value:function(e){var t=getComputedStyle(e);return t.getPropertyValue("border-top-color")||t.getPropertyValue("border-color")||t.getPropertyValue("background-color")}},{key:"runTimeoutOutsideZone",value:function(e,t){this.ngZone.runOutsideAngular(function(){return setTimeout(e,t)})}}]),t}(),c={disabled:!1},l=new s.InjectionToken("dw-wave-global-options",{providedIn:"root",factory:function(){return c}}),f=((o=function(){function t(n,i,r,o,a){e(this,t),this.ngZone=n,this.elementRef=i,this.config=r,this.animationType=o,this.platformId=a,this.dwWaveExtraNode=!1,this.waveDisabled=!1,this.waveDisabled=this.isConfigDisabled()}return n(t,[{key:"disabled",get:function(){return this.waveDisabled}},{key:"rendererRef",get:function(){return this.waveRenderer}},{key:"isConfigDisabled",value:function(){var e=!1;return this.config&&"boolean"==typeof this.config.disabled&&(e=this.config.disabled),"NoopAnimations"===this.animationType&&(e=!0),e}},{key:"ngOnDestroy",value:function(){this.waveRenderer&&this.waveRenderer.destroy()}},{key:"ngOnInit",value:function(){this.renderWaveIfEnabled()}},{key:"renderWaveIfEnabled",value:function(){!this.waveDisabled&&this.elementRef.nativeElement&&(this.waveRenderer=new d(this.elementRef.nativeElement,this.ngZone,this.dwWaveExtraNode,this.platformId))}},{key:"disable",value:function(){this.waveDisabled=!0,this.waveRenderer&&(this.waveRenderer.removeTriggerEvent(),this.waveRenderer.removeStyleAndExtraNode())}},{key:"enable",value:function(){this.waveDisabled=this.isConfigDisabled()||!1,this.waveRenderer&&this.waveRenderer.bindTriggerEvent()}}]),t}()).\u0275fac=function(e){return new(e||o)(s.\u0275\u0275directiveInject(s.NgZone),s.\u0275\u0275directiveInject(s.ElementRef),s.\u0275\u0275directiveInject(l,8),s.\u0275\u0275directiveInject(u.ANIMATION_MODULE_TYPE,8),s.\u0275\u0275directiveInject(s.PLATFORM_ID))},o.\u0275dir=s.\u0275\u0275defineDirective({type:o,selectors:[["","dw-wave",""],["button","dw-button","",3,"dwType","link",3,"dwType","text"]],inputs:{dwWaveExtraNode:"dwWaveExtraNode"},exportAs:["dwWave"]}),o),h=function(){var t=n(function t(){e(this,t)});return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=s.\u0275\u0275defineInjector({imports:[[a.PlatformModule]]}),t}()}}])}();