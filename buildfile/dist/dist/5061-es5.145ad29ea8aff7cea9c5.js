!function(){"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(self.webpackChunkassc_crs=self.webpackChunkassc_crs||[]).push([[5061,6887],{75061:function(t,n,o){o.r(n),o.d(n,{DwImageViewerComponent:function(){return $e},DwImageViewerFileIconComponent:function(){return He},DwImageViewerFileService:function(){return Ne},DwImageViewerListItemComponent:function(){return Ze},DwImageViewerListService:function(){return We},DwImageViewerModalComponent:function(){return Ue},DwImageViewerModule:function(){return Ge},DwImageViewerService:function(){return Be}});var r=o(42746),a=o(71049),l=o(31441),c=o(83522),s=o(45538),d=o.n(s),w=o(32126),m=o(83237),u=o(59083),p=o(55245),f=o(85277),v=o(52683),g=o(57252),h=o(41430),y=o(93029);function S(e,t){1&e&&r.\u0275\u0275element(0,"i",12)}function x(e,t){if(1&e&&(r.\u0275\u0275elementStart(0,"div",9),r.\u0275\u0275template(1,S,1,0,"ng-template",null,10,r.\u0275\u0275templateRefExtractor),r.\u0275\u0275elementStart(3,"dw-spin",11),r.\u0275\u0275text(4),r.\u0275\u0275pipe(5,"translate"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd()),2&e){var i=r.\u0275\u0275reference(2);r.\u0275\u0275advance(3),r.\u0275\u0275property("dwIndicator",i),r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate(r.\u0275\u0275pipeBind1(5,2,"dw-reading"))}}function b(e,t){1&e&&r.\u0275\u0275element(0,"i",12)}function C(e,t){if(1&e&&(r.\u0275\u0275elementStart(0,"div",9),r.\u0275\u0275template(1,b,1,0,"ng-template",null,10,r.\u0275\u0275templateRefExtractor),r.\u0275\u0275elementStart(3,"dw-spin",11),r.\u0275\u0275text(4),r.\u0275\u0275pipe(5,"translate"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd()),2&e){var i=r.\u0275\u0275reference(2);r.\u0275\u0275advance(3),r.\u0275\u0275property("dwIndicator",i),r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate(r.\u0275\u0275pipeBind1(5,2,"dw-downloading"))}}function I(e,t){if(1&e&&(r.\u0275\u0275elementContainerStart(0),r.\u0275\u0275element(1,"dw-image-viewer-file-icon",13),r.\u0275\u0275elementContainerEnd()),2&e){var i=r.\u0275\u0275nextContext(2);r.\u0275\u0275advance(1),r.\u0275\u0275property("mimeType",i.viewerFileType)("ngStyle",i.dwItemFileiconStyle)}}function k(e,t){if(1&e&&(r.\u0275\u0275elementContainerStart(0,6),r.\u0275\u0275template(1,x,6,4,"div",7),r.\u0275\u0275template(2,C,6,4,"div",7),r.\u0275\u0275template(3,I,2,2,"ng-container",8),r.\u0275\u0275elementContainerEnd()),2&e){var i=r.\u0275\u0275nextContext();r.\u0275\u0275property("ngSwitch",i.handleStatus),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngSwitchCase","reading"),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngSwitchCase","downloading")}}function F(e,t){if(1&e&&r.\u0275\u0275element(0,"img",16),2&e){var i=r.\u0275\u0275nextContext(2);r.\u0275\u0275property("src",i.sanitizedSrc,r.\u0275\u0275sanitizeUrl),r.\u0275\u0275attribute("alt",i.viewerFile.name)}}function T(e,t){if(1&e&&(r.\u0275\u0275elementStart(0,"div",14),r.\u0275\u0275template(1,F,1,2,"img",15),r.\u0275\u0275elementEnd()),2&e){var i=r.\u0275\u0275nextContext(),n=r.\u0275\u0275reference(2);r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",i.isViewImageType&&(i.viewerFile.thumbUrl||i.viewerFile.url)&&"none"===i.handleStatus)("ngIfElse",n)}}var O=function(e){return{"dw-f-image-viewer-list-item-actions-disabled":e}};function A(e,t){if(1&e){var i=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"i",24),r.\u0275\u0275listener("click",function(e){r.\u0275\u0275restoreView(i);var t=r.\u0275\u0275nextContext(3);return t.handlePreview(t.viewerFile,e)}),r.\u0275\u0275elementEnd()}if(2&e){var n=r.\u0275\u0275nextContext(3);r.\u0275\u0275propertyInterpolate("title",n.icons.dwPreview.title),r.\u0275\u0275property("ngClass",r.\u0275\u0275pureFunction1(2,O,n.icons.dwPreview.disabled))}}function D(e,t){if(1&e){var i=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"i",25),r.\u0275\u0275listener("click",function(e){r.\u0275\u0275restoreView(i);var t=r.\u0275\u0275nextContext(3);return t.handleRemove(t.viewerFile,e)}),r.\u0275\u0275elementEnd()}if(2&e){var n=r.\u0275\u0275nextContext(3);r.\u0275\u0275propertyInterpolate("title",n.icons.dwRemove.title),r.\u0275\u0275property("ngClass",r.\u0275\u0275pureFunction1(2,O,n.icons.dwRemove.disabled))}}function V(e,t){if(1&e){var i=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"i",26),r.\u0275\u0275listener("click",function(e){r.\u0275\u0275restoreView(i);var t=r.\u0275\u0275nextContext(3);return t.handleDownload(t.viewerFile,e)}),r.\u0275\u0275elementEnd()}if(2&e){var n=r.\u0275\u0275nextContext(3);r.\u0275\u0275propertyInterpolate("title",n.icons.dwDownload.title),r.\u0275\u0275property("ngClass",r.\u0275\u0275pureFunction1(2,O,n.icons.dwDownload.disabled))}}function P(e,t){if(1&e&&r.\u0275\u0275element(0,"i",27),2&e){r.\u0275\u0275nextContext();var i=r.\u0275\u0275reference(7),n=r.\u0275\u0275nextContext(2);r.\u0275\u0275property("ngClass",r.\u0275\u0275pureFunction1(2,O,n.otherActionCfg.disabled))("dwPopoverContent",i)}}function E(e,t){if(1&e){var i=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"a",31),r.\u0275\u0275listener("click",function(e){r.\u0275\u0275restoreView(i);var t=r.\u0275\u0275nextContext(4);return t.handleDownload(t.viewerFile,e)}),r.\u0275\u0275text(1),r.\u0275\u0275elementEnd()}if(2&e){var n=r.\u0275\u0275nextContext(4);r.\u0275\u0275attribute("disabled",!!n.icons.dwDownload.disabled||null),r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate1(" ",n.icons.dwDownload.title," ")}}function z(e,t){if(1&e){var i=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"a",31),r.\u0275\u0275listener("click",function(e){r.\u0275\u0275restoreView(i);var t=r.\u0275\u0275nextContext().$implicit,n=r.\u0275\u0275nextContext(5);return n.handleOtherAction(n.viewerFile,t.key,e)}),r.\u0275\u0275text(1),r.\u0275\u0275elementEnd()}if(2&e){var n=r.\u0275\u0275nextContext().$implicit,o=r.\u0275\u0275nextContext().$implicit;r.\u0275\u0275attribute("disabled",!!o[n.key].disabled||null),r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate1(" ",o[n.key].title?o[n.key].title:n.key," ")}}function R(e,t){if(1&e&&(r.\u0275\u0275elementContainerStart(0),r.\u0275\u0275elementStart(1,"div"),r.\u0275\u0275template(2,z,2,2,"a",29),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementContainerEnd()),2&e){var i=t.$implicit,n=r.\u0275\u0275nextContext().$implicit;r.\u0275\u0275advance(2),r.\u0275\u0275property("ngIf",n[i.key].show)}}function M(e,t){if(1&e&&(r.\u0275\u0275elementContainerStart(0),r.\u0275\u0275template(1,R,3,1,"ng-container",30),r.\u0275\u0275pipe(2,"keyvalue"),r.\u0275\u0275elementContainerEnd()),2&e){var i=t.$implicit;r.\u0275\u0275advance(1),r.\u0275\u0275property("ngForOf",r.\u0275\u0275pipeBind1(2,1,i))}}function j(e,t){if(1&e&&(r.\u0275\u0275elementStart(0,"div",28),r.\u0275\u0275elementStart(1,"div"),r.\u0275\u0275template(2,E,2,2,"a",29),r.\u0275\u0275elementEnd(),r.\u0275\u0275template(3,M,3,3,"ng-container",30),r.\u0275\u0275elementEnd()),2&e){var i=r.\u0275\u0275nextContext(3);r.\u0275\u0275advance(2),r.\u0275\u0275property("ngIf",i.icons.dwDownload.show&&"done"===i.viewerFile.status&&i.dwDownloadToOtherCfg),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngForOf",i.icons.otherAction)}}function _(e,t){if(1&e&&(r.\u0275\u0275elementStart(0,"span",18),r.\u0275\u0275template(1,A,1,4,"i",19),r.\u0275\u0275template(2,D,1,4,"i",20),r.\u0275\u0275template(3,V,1,4,"i",21),r.\u0275\u0275elementStart(4,"i"),r.\u0275\u0275template(5,P,1,4,"i",22),r.\u0275\u0275template(6,j,4,2,"ng-template",null,23,r.\u0275\u0275templateRefExtractor),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd()),2&e){var i=r.\u0275\u0275nextContext(2);r.\u0275\u0275property("ngStyle",i.dwItemActionsStyle),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",i.icons.dwPreview.show&&"done"===i.viewerFile.status),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",i.icons.dwRemove.show),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",i.icons.dwDownload.show&&"done"===i.viewerFile.status&&!i.dwDownloadToOtherCfg),r.\u0275\u0275advance(2),r.\u0275\u0275property("ngIf",i.otherActionCfg.show&&"done"===i.viewerFile.status)}}function L(e,t){if(1&e&&r.\u0275\u0275template(0,_,8,5,"span",17),2&e){var i=r.\u0275\u0275nextContext();r.\u0275\u0275property("ngIf",i.isShowItemAction&&"none"===i.handleStatus)}}function U(e,t){if(1&e&&r.\u0275\u0275element(0,"dw-progress",39),2&e){var i=r.\u0275\u0275nextContext(3);r.\u0275\u0275property("dwPercent",i.viewerFile.percent)("dwShowInfo",!1)("dwStrokeWidth",2)}}function N(e,t){if(1&e&&(r.\u0275\u0275elementContainerStart(0),r.\u0275\u0275elementStart(1,"div",35),r.\u0275\u0275elementStart(2,"div",36),r.\u0275\u0275text(3),r.\u0275\u0275pipe(4,"translate"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(5,"div",37),r.\u0275\u0275template(6,U,1,3,"dw-progress",38),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementContainerEnd()),2&e){var i=r.\u0275\u0275nextContext(2);r.\u0275\u0275advance(3),r.\u0275\u0275textInterpolate2(" ",r.\u0275\u0275pipeBind1(4,3,"dw-uploading")," ",i.viewerFile.percent?i.viewerFile.percent+"%":""," "),r.\u0275\u0275advance(3),r.\u0275\u0275property("ngIf",i.viewerFile.percent&&100!==i.viewerFile.percent)}}function B(e,t){}function W(e,t){if(1&e&&(r.\u0275\u0275elementContainerStart(0),r.\u0275\u0275template(1,B,0,0,"ng-template",40),r.\u0275\u0275elementContainerEnd()),2&e){r.\u0275\u0275nextContext(2);var i=r.\u0275\u0275reference(6);r.\u0275\u0275advance(1),r.\u0275\u0275property("ngTemplateOutlet",i)}}var Z=function(e){return{"actions-mask":e}};function H(e,t){if(1&e&&(r.\u0275\u0275elementStart(0,"div",32),r.\u0275\u0275elementStart(1,"div",33),r.\u0275\u0275template(2,N,7,5,"ng-container",34),r.\u0275\u0275template(3,W,2,1,"ng-container",5),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd()),2&e){var i=r.\u0275\u0275nextContext(),n=r.\u0275\u0275reference(4);r.\u0275\u0275classMapInterpolate1("dw-f-image-viewer-list-item-image-info dw-f-image-viewer-list-item-image-info-",i.viewerFile.status,""),r.\u0275\u0275property("ngStyle",i.dwItemImageStyle)("dwTooltipTitle","error"===i.viewerFile.status?i.viewerFile.message:null),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngClass",r.\u0275\u0275pureFunction1(9,Z,i.isShowItemAction&&!i.icons.dwCheck.show)),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf","uploading"===i.viewerFile.status)("ngIfElse",n),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",!i.icons.dwCheck.show)}}function $(e,t){1&e&&r.\u0275\u0275elementContainer(0)}var G=function(e){return{$implicit:e}};function Q(e,t){if(1&e&&(r.\u0275\u0275elementContainerStart(0),r.\u0275\u0275template(1,$,1,0,"ng-container",43),r.\u0275\u0275elementContainerEnd()),2&e){var i=r.\u0275\u0275nextContext(2);r.\u0275\u0275advance(1),r.\u0275\u0275property("ngTemplateOutlet",i.dwTitleTpl)("ngTemplateOutletContext",r.\u0275\u0275pureFunction1(2,G,i.viewerFile))}}function J(e,t){if(1&e&&r.\u0275\u0275text(0),2&e){var i=r.\u0275\u0275nextContext(2);r.\u0275\u0275textInterpolate1(" ",i.viewerFile.title?i.viewerFile.title:i.viewerFile.name," ")}}function q(e,t){if(1&e&&(r.\u0275\u0275elementStart(0,"div",41),r.\u0275\u0275template(1,Q,2,4,"ng-container",34),r.\u0275\u0275template(2,J,1,1,"ng-template",null,42,r.\u0275\u0275templateRefExtractor),r.\u0275\u0275elementEnd()),2&e){var i=r.\u0275\u0275reference(3),n=r.\u0275\u0275nextContext();r.\u0275\u0275property("ngStyle",n.dwItemTitleStyle),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",n.dwTitleTpl)("ngIfElse",i)}}function K(e,t){}function Y(e,t){1&e&&r.\u0275\u0275element(0,"img",48)}function X(e,t){1&e&&r.\u0275\u0275element(0,"img",49)}function ee(e,t){1&e&&r.\u0275\u0275element(0,"img",49)}function te(e,t){if(1&e){var i=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementContainerStart(0),r.\u0275\u0275elementStart(1,"div",44),r.\u0275\u0275listener("click",function(e){r.\u0275\u0275restoreView(i);var t=r.\u0275\u0275nextContext(2);return t.handleCheck(t.viewerFile,e)}),r.\u0275\u0275template(2,Y,1,0,"img",45),r.\u0275\u0275template(3,X,1,0,"img",46),r.\u0275\u0275template(4,ee,1,0,"img",47),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementContainerEnd()}if(2&e){var n=r.\u0275\u0275nextContext(2);r.\u0275\u0275advance(1),r.\u0275\u0275property("ngSwitch",n.viewerFile.check),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngSwitchCase",!0),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngSwitchCase",!1)}}function ie(e,t){}function ne(e,t){1&e&&r.\u0275\u0275elementContainer(0)}function oe(e,t){if(1&e&&(r.\u0275\u0275elementContainerStart(0),r.\u0275\u0275template(1,ne,1,0,"ng-container",43),r.\u0275\u0275elementContainerEnd()),2&e){var i=r.\u0275\u0275nextContext(2);r.\u0275\u0275advance(1),r.\u0275\u0275property("ngTemplateOutlet",i.dwDesignTpl)("ngTemplateOutletContext",r.\u0275\u0275pureFunction1(2,G,i.viewerFile))}}function re(e,t){if(1&e&&(r.\u0275\u0275elementContainerStart(0),r.\u0275\u0275template(1,K,0,0,"ng-template",40),r.\u0275\u0275template(2,te,5,3,"ng-container",5),r.\u0275\u0275template(3,ie,0,0,"ng-template",40),r.\u0275\u0275template(4,oe,2,4,"ng-container",5),r.\u0275\u0275elementContainerEnd()),2&e){var i=r.\u0275\u0275nextContext(),n=r.\u0275\u0275reference(8),o=r.\u0275\u0275reference(10);r.\u0275\u0275advance(1),r.\u0275\u0275property("ngTemplateOutlet",n),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",i.icons.dwCheck.show),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngTemplateOutlet",o),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",i.dwDesignTpl)}}var ae=function(e){return{color:e}};function le(e,t){if(1&e&&r.\u0275\u0275element(0,"i",4),2&e){var i=r.\u0275\u0275nextContext();r.\u0275\u0275property("dwType",i.fileIcon)("ngStyle",r.\u0275\u0275pureFunction1(2,ae,i.fileIconColor?i.fileIconColor:"#A1A3B4"))}}function ce(e,t){if(1&e&&r.\u0275\u0275element(0,"i",4),2&e){var i=r.\u0275\u0275nextContext();r.\u0275\u0275property("dwType",i.fileIcon)("ngStyle",r.\u0275\u0275pureFunction1(2,ae,i.fileIconColor?i.fileIconColor:"#000000"))}}function se(e,t){if(1&e&&r.\u0275\u0275element(0,"i",4),2&e){var i=r.\u0275\u0275nextContext();r.\u0275\u0275property("dwType",i.fileIcon)("ngStyle",r.\u0275\u0275pureFunction1(2,ae,i.fileIconColor?i.fileIconColor:"#3200AA"))}}function de(e,t){if(1&e&&r.\u0275\u0275element(0,"i",4),2&e){var i=r.\u0275\u0275nextContext();r.\u0275\u0275property("dwType",i.fileIcon)("ngStyle",r.\u0275\u0275pureFunction1(2,ae,i.fileIconColor?i.fileIconColor:"#D80000"))}}function we(e,t){if(1&e&&r.\u0275\u0275element(0,"i",4),2&e){var i=r.\u0275\u0275nextContext();r.\u0275\u0275property("dwType",i.fileIcon)("ngStyle",r.\u0275\u0275pureFunction1(2,ae,i.fileIconColor?i.fileIconColor:"#1C69D5"))}}function me(e,t){if(1&e&&r.\u0275\u0275element(0,"i",4),2&e){var i=r.\u0275\u0275nextContext();r.\u0275\u0275property("dwType",i.fileIcon)("ngStyle",r.\u0275\u0275pureFunction1(2,ae,i.fileIconColor?i.fileIconColor:"#157B40"))}}function ue(e,t){if(1&e&&r.\u0275\u0275element(0,"i",4),2&e){var i=r.\u0275\u0275nextContext();r.\u0275\u0275property("dwType",i.fileIcon)("ngStyle",r.\u0275\u0275pureFunction1(2,ae,i.fileIconColor?i.fileIconColor:"#DF3A11"))}}function pe(e,t){if(1&e&&r.\u0275\u0275element(0,"i",4),2&e){var i=r.\u0275\u0275nextContext();r.\u0275\u0275property("dwType",i.fileIcon)("ngStyle",r.\u0275\u0275pureFunction1(2,ae,i.fileIconColor?i.fileIconColor:"#A1A3B4"))}}function fe(e,t){if(1&e&&r.\u0275\u0275element(0,"i",4),2&e){var i=r.\u0275\u0275nextContext();r.\u0275\u0275property("dwType",i.fileIcon)("ngStyle",r.\u0275\u0275pureFunction1(2,ae,i.fileIconColor?i.fileIconColor:"#00A8FF"))}}function ve(e,t){if(1&e&&r.\u0275\u0275element(0,"i",5),2&e){var i=r.\u0275\u0275nextContext();r.\u0275\u0275property("ngStyle",r.\u0275\u0275pureFunction1(1,ae,i.fileIconColor?i.fileIconColor:"#A1A3B4"))}}var ge=["viewContainer"],he=function(e){return{disabled:e}};function ye(e,t){if(1&e){var i=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"a",12),r.\u0275\u0275listener("click",function(){r.\u0275\u0275restoreView(i);var e=r.\u0275\u0275nextContext(2);return!e.viewerAction.dwPrevious.disabled&&e.previous()}),r.\u0275\u0275element(1,"i",13),r.\u0275\u0275elementEnd()}if(2&e){var n=r.\u0275\u0275nextContext(2);r.\u0275\u0275propertyInterpolate("title",n.viewerAction.dwPrevious.title),r.\u0275\u0275property("ngClass",r.\u0275\u0275pureFunction1(2,he,n.viewerAction.dwPrevious.disabled))}}function Se(e,t){if(1&e){var i=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"a",12),r.\u0275\u0275listener("click",function(){r.\u0275\u0275restoreView(i);var e=r.\u0275\u0275nextContext(2);return!e.viewerAction.dwNext.disabled&&e.next()}),r.\u0275\u0275element(1,"i",14),r.\u0275\u0275elementEnd()}if(2&e){var n=r.\u0275\u0275nextContext(2);r.\u0275\u0275propertyInterpolate("title",n.viewerAction.dwNext.title),r.\u0275\u0275property("ngClass",r.\u0275\u0275pureFunction1(2,he,n.viewerAction.dwNext.disabled))}}function xe(e,t){if(1&e){var i=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"a",12),r.\u0275\u0275listener("click",function(){r.\u0275\u0275restoreView(i);var e=r.\u0275\u0275nextContext(2);return!e.dwEyeConfig.disabled&&e.eye()}),r.\u0275\u0275element(1,"i",15),r.\u0275\u0275elementEnd()}if(2&e){var n=r.\u0275\u0275nextContext(2);r.\u0275\u0275propertyInterpolate("title",n.dwEyeConfig.title),r.\u0275\u0275property("ngClass",r.\u0275\u0275pureFunction1(2,he,n.dwEyeConfig.disabled))}}function be(e,t){if(1&e){var i=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"a",12),r.\u0275\u0275listener("click",function(){r.\u0275\u0275restoreView(i);var e=r.\u0275\u0275nextContext(2);return!e.viewerAction.dwZoomIn.disabled&&e.zoomIn()}),r.\u0275\u0275element(1,"i",16),r.\u0275\u0275elementEnd()}if(2&e){var n=r.\u0275\u0275nextContext(2);r.\u0275\u0275propertyInterpolate("title",n.viewerAction.dwZoomIn.title),r.\u0275\u0275property("ngClass",r.\u0275\u0275pureFunction1(2,he,n.viewerAction.dwZoomIn.disabled))}}function Ce(e,t){if(1&e){var i=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"a",12),r.\u0275\u0275listener("click",function(){r.\u0275\u0275restoreView(i);var e=r.\u0275\u0275nextContext(2);return!e.viewerAction.dwZoomOut.disabled&&e.zoomOut()}),r.\u0275\u0275element(1,"i",17),r.\u0275\u0275elementEnd()}if(2&e){var n=r.\u0275\u0275nextContext(2);r.\u0275\u0275propertyInterpolate("title",n.viewerAction.dwZoomOut.title),r.\u0275\u0275property("ngClass",r.\u0275\u0275pureFunction1(2,he,n.viewerAction.dwZoomOut.disabled))}}function Ie(e,t){if(1&e){var i=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"a",12),r.\u0275\u0275listener("click",function(){r.\u0275\u0275restoreView(i);var e=r.\u0275\u0275nextContext(2);return!e.viewerAction.dwRotateRight.disabled&&e.rotateRight()}),r.\u0275\u0275element(1,"i",18),r.\u0275\u0275elementEnd()}if(2&e){var n=r.\u0275\u0275nextContext(2);r.\u0275\u0275propertyInterpolate("title",n.viewerAction.dwRotateRight.title),r.\u0275\u0275property("ngClass",r.\u0275\u0275pureFunction1(2,he,n.viewerAction.dwRotateRight.disabled))}}function ke(e,t){if(1&e){var i=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"a",12),r.\u0275\u0275listener("click",function(){r.\u0275\u0275restoreView(i);var e=r.\u0275\u0275nextContext(2);return!e.viewerAction.dwRotateLeft.disabled&&e.rotateLeft()}),r.\u0275\u0275element(1,"i",19),r.\u0275\u0275elementEnd()}if(2&e){var n=r.\u0275\u0275nextContext(2);r.\u0275\u0275propertyInterpolate("title",n.viewerAction.dwRotateLeft.title),r.\u0275\u0275property("ngClass",r.\u0275\u0275pureFunction1(2,he,n.viewerAction.dwRotateLeft.disabled))}}function Fe(e,t){if(1&e){var i=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"a",12),r.\u0275\u0275listener("click",function(){r.\u0275\u0275restoreView(i);var e=r.\u0275\u0275nextContext(2);return!e.viewerAction.dwResetZoom.disabled&&e.resetZoom()}),r.\u0275\u0275element(1,"i",20),r.\u0275\u0275elementEnd()}if(2&e){var n=r.\u0275\u0275nextContext(2);r.\u0275\u0275propertyInterpolate("title",n.viewerAction.dwResetZoom.title),r.\u0275\u0275property("ngClass",r.\u0275\u0275pureFunction1(2,he,n.viewerAction.dwResetZoom.disabled))}}function Te(e,t){if(1&e){var i=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"a",21),r.\u0275\u0275listener("click",function(){r.\u0275\u0275restoreView(i);var e=r.\u0275\u0275nextContext(2);return!e.viewerAction.dwOriginalSize.disabled&&e.originalSize()}),r.\u0275\u0275element(1,"div",22),r.\u0275\u0275elementEnd()}if(2&e){var n=r.\u0275\u0275nextContext(2);r.\u0275\u0275propertyInterpolate("title",n.viewerAction.dwOriginalSize.title),r.\u0275\u0275property("ngClass",r.\u0275\u0275pureFunction1(2,he,n.viewerAction.dwOriginalSize.disabled))}}function Oe(e,t){if(1&e){var i=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"a",12),r.\u0275\u0275listener("click",function(){r.\u0275\u0275restoreView(i);var e=r.\u0275\u0275nextContext(2);return!e.viewerAction.dwFullScreen.disabled&&e.fullScreen()}),r.\u0275\u0275element(1,"i",23),r.\u0275\u0275elementEnd()}if(2&e){var n=r.\u0275\u0275nextContext(2);r.\u0275\u0275propertyInterpolate("title",n.viewerAction.dwFullScreen.title),r.\u0275\u0275property("ngClass",r.\u0275\u0275pureFunction1(2,he,n.viewerAction.dwFullScreen.disabled))}}function Ae(e,t){1&e&&(r.\u0275\u0275elementStart(0,"a",24),r.\u0275\u0275pipe(1,"translate"),r.\u0275\u0275element(2,"i",25),r.\u0275\u0275elementEnd()),2&e&&r.\u0275\u0275propertyInterpolate("title",r.\u0275\u0275pipeBind1(1,1,"dw-sys-menu-edit"))}function De(e,t){1&e&&r.\u0275\u0275element(0,"i",28)}function Ve(e,t){1&e&&r.\u0275\u0275element(0,"i",29)}function Pe(e,t){if(1&e){var i=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"a",12),r.\u0275\u0275listener("click",function(){r.\u0275\u0275restoreView(i);var e=r.\u0275\u0275nextContext(2);return!e.viewerAction.dwDownload.disabled&&!e.isDownLoad&&e.download()}),r.\u0275\u0275template(1,De,1,0,"i",26),r.\u0275\u0275template(2,Ve,1,0,"i",27),r.\u0275\u0275elementEnd()}if(2&e){var n=r.\u0275\u0275nextContext(2);r.\u0275\u0275propertyInterpolate("title",n.viewerAction.dwDownload.title),r.\u0275\u0275property("ngClass",r.\u0275\u0275pureFunction1(4,he,n.viewerAction.dwDownload.disabled||n.isDownLoad)),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",!n.isDownLoad),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",n.isDownLoad)}}function Ee(e,t){if(1&e&&(r.\u0275\u0275elementStart(0,"div",8),r.\u0275\u0275template(1,ye,2,4,"a",9),r.\u0275\u0275template(2,Se,2,4,"a",9),r.\u0275\u0275template(3,xe,2,4,"a",9),r.\u0275\u0275template(4,be,2,4,"a",9),r.\u0275\u0275template(5,Ce,2,4,"a",9),r.\u0275\u0275template(6,Ie,2,4,"a",9),r.\u0275\u0275template(7,ke,2,4,"a",9),r.\u0275\u0275template(8,Fe,2,4,"a",9),r.\u0275\u0275template(9,Te,2,4,"a",10),r.\u0275\u0275template(10,Oe,2,4,"a",9),r.\u0275\u0275template(11,Ae,3,3,"a",11),r.\u0275\u0275template(12,Pe,3,6,"a",9),r.\u0275\u0275elementEnd()),2&e){var i=r.\u0275\u0275nextContext();r.\u0275\u0275property("ngStyle",i.toolbarStyle),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",i.viewerAction.dwPrevious.show),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",i.viewerAction.dwNext.show),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",i.dwEyeConfig.show),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",i.viewerAction.dwZoomIn.show),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",i.viewerAction.dwZoomOut.show),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",i.viewerAction.dwRotateRight.show),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",i.viewerAction.dwRotateLeft.show),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",i.viewerAction.dwResetZoom.show),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",i.viewerAction.dwOriginalSize.show),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",i.viewerAction.dwFullScreen.show),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",!1),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",i.viewerAction.dwDownload.show)}}function ze(e,t){1&e&&r.\u0275\u0275element(0,"i",33)}function Re(e,t){1&e&&r.\u0275\u0275element(0,"i",34)}function Me(e,t){if(1&e&&(r.\u0275\u0275elementStart(0,"div",30),r.\u0275\u0275template(1,ze,1,0,"i",31),r.\u0275\u0275template(2,Re,1,0,"i",32),r.\u0275\u0275elementEnd()),2&e){var i=r.\u0275\u0275nextContext();r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf","error"!==i.fileSrcLoadingStatus),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf","error"===i.fileSrcLoadingStatus)}}function je(e,t){if(1&e&&(r.\u0275\u0275elementStart(0,"div",35),r.\u0275\u0275element(1,"dw-image-viewer-file-icon",36),r.\u0275\u0275elementEnd()),2&e){var i=r.\u0275\u0275nextContext();r.\u0275\u0275advance(1),r.\u0275\u0275property("mimeType",i.type)("fileIconColor",i.fileIconColor?i.fileIconColor:null)}}function _e(e,t){if(1&e&&(r.\u0275\u0275elementStart(0,"div",37),r.\u0275\u0275elementStart(1,"video",38),r.\u0275\u0275text(2," Your browser does not support HTML video. "),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd()),2&e){var i=r.\u0275\u0275nextContext();r.\u0275\u0275advance(1),r.\u0275\u0275property("src",i.fileSrcDataUrl,r.\u0275\u0275sanitizeUrl)}}var Le,Ue=((Le=function(){function t(){e(this,t)}return i(t,[{key:"ngOnInit",value:function(){}}]),t}()).\u0275fac=function(e){return new(e||Le)},Le.\u0275cmp=r.\u0275\u0275defineComponent({type:Le,selectors:[["dw-image-viewer-modal"]],inputs:{uid:"uid",fileSrc:"fileSrc",name:"name",type:"type",title:"title",viewerAction:"viewerAction",containerStyle:"containerStyle",toolbarStyle:"toolbarStyle",titleStyle:"titleStyle",onPrevious:"onPrevious",onNext:"onNext",thumbnailList:"thumbnailList"},decls:2,vars:12,consts:[[1,"viewer-modal-container"],[3,"uid","fileSrc","thumbnailList","name","type","title","viewerAction","containerStyle","toolbarStyle","titleStyle","onPrevious","onNext"]],template:function(e,t){1&e&&(r.\u0275\u0275elementStart(0,"div",0),r.\u0275\u0275element(1,"dw-image-viewer",1),r.\u0275\u0275elementEnd()),2&e&&(r.\u0275\u0275advance(1),r.\u0275\u0275property("uid",t.uid)("fileSrc",t.fileSrc)("thumbnailList",t.thumbnailList)("name",t.name)("type",t.type)("title",t.title)("viewerAction",t.viewerAction)("containerStyle",t.containerStyle)("toolbarStyle",t.toolbarStyle)("titleStyle",t.titleStyle)("onPrevious",t.onPrevious)("onNext",t.onNext))},directives:function(){return[$e]},styles:[".viewer-modal-container{width:100%;padding-top:15px;min-height:200px}\n"],encapsulation:2}),Le),Ne=function(){var t=function(){function t(){var i;e(this,t),this.saveData=(i=document.createElement("a"),document.body.appendChild(i),i.style="display: none",function(e,t){var n=window.URL.createObjectURL(e);i.href=n,i.download=t,i.click(),window.URL.revokeObjectURL(n)})}return i(t,[{key:"urlToBlob",value:function(e){return a.Observable.create(function(t){fetch(e).then(function(e){if(e.ok)return e.blob();t.error(e.statusText)}).then(function(e){t.next(e),t.complete()}).catch(function(e){console.error(e),t.error(e)})})}},{key:"getTypeByProperty",value:function(e,t,i,n){var o=this;return a.Observable.create(function(r){var a={mimeType:null,blobFile:null};e instanceof File&&(t=e.type),t||(i&&(t=o.filenameToMimeType(i)),t||n&&(t=o.filenameToMimeType(n))),t?(a.mimeType=t,r.next(a)):o.urlToBlob(n).subscribe(function(e){a.mimeType=e.type,a.blobFile=e,r.next(a),r.complete()},function(e){r.next(a),r.complete()})})}},{key:"downLoad",value:function(e,t){var i=this,n={success:!1,message:""},o="downLoad_"+(new Date).getTime().toString(),r=null;return t&&(r=t),a.Observable.create(function(t){e instanceof Blob?(e=e,r||(e.name?r=e.name:i.mimeToExtension(e.type)&&(r=o+"."+i.mimeToExtension(e.type))),i.saveData(e,r),n.success=!0,t.next(n),t.complete()):i.urlToBlob(e).subscribe(function(e){r||i.mimeToExtension(e.type)&&(r=o+"."+i.mimeToExtension(e.type)),i.saveData(e,r),n.success=!0,t.next(n),t.complete()},function(e){n.success=!1,n.message=e,t.next(n),t.complete()})})}},{key:"isViewImageType",value:function(e){return!(!e||-1===e.indexOf("image/"))&&"image/tiff"!==e}},{key:"filenameToMimeType",value:function(e){var t=null;if(-1!==e.indexOf(";base64,")){var i=e.split(";base64,");i.length>1&&(t=i[0].replace("data:",""))}else if(-1!==e.indexOf(".")){var n=e.split(".");n.length>1&&(t=this.extensionToMime(n[n.length-1]))}return t}},{key:"editImageName",value:function(e,t){var i=e.split(".").pop().toLocaleLowerCase();return i!==(t=t.toLocaleLowerCase())&&("jpg"!==i&&"jpeg"!==i||"jpg"!==t&&"jpeg"!==t)?e+="."+t:e}},{key:"openBlank",value:function(e){var t=document.createElement("a");document.body.appendChild(t),t.style="display: none",t.href=e,t.target="_blank",t.click(),window.URL.revokeObjectURL(e)}},{key:"mimeToIcon",value:function(e){var t=this.getMimeTypeList(),i="file";return t[e]&&t[e].hasOwnProperty("icon")&&(i=t[e].icon),i}},{key:"extensionToMime",value:function(e){e=e.toLocaleLowerCase();var t=null,i=this.getMimeTypeList();return Object.keys(i).forEach(function(n){i[n].hasOwnProperty("extension")&&i[n].extension.forEach(function(i){i===e&&(t=n)})}),t}},{key:"mimeToExtension",value:function(e){var t=this.getMimeTypeList(),i=null;return t[e]&&t[e].hasOwnProperty("extension")&&(i=t[e].extension[0]),i}},{key:"getMimeTypeList",value:function(){return{"image/jpeg":{extension:["jpg","jpeg"],icon:"file-image"},"image/png":{extension:["png"],icon:"file-image"},"image/gif":{extension:["gif"],icon:"file-image"},"image/tiff":{extension:["tif","tiff"],icon:"file-image"},"image/x-icon":{extension:["ico","cur"],icon:"file-image"},"image/vnd.microsoft.icon":{extension:["ico"],icon:"file-image"},"image/bmp":{extension:["bmp"],icon:"file-image"},"image/svg+xml":{extension:["svg"],icon:"file-image"},"image/webp":{extension:["webp"],icon:"file-image"},"video/mp4":{extension:["mp4"],icon:"video-camera"},"video/mpeg":{extension:["mpeg"],icon:"video-camera"},"video/webm":{extension:["webm"],icon:"video-camera"},"video/ogg":{extension:["ogg","ogv"],icon:"video-camera"},"video/avi":{extension:["avi"],icon:"video-camera"},"video/mp2t":{extension:["ts"],icon:"video-camera"},"video/3gpp":{extension:["3gp"],icon:"video-camera"},"video/3gpp2":{extension:["3gp2"],icon:"video-camera"},"video/x-ms-wmv":{extension:["wmv"],icon:"video-camera"},"audio/mpeg":{extension:["mp3"],icon:"customer-service"},"audio/ogg":{extension:["oga"],icon:"customer-service"},"application/pdf":{extension:["pdf"],icon:"file-pdf"},"application/vnd.openxmlformats-officedocument.wordprocessingml.document":{extension:["docx"],icon:"file-word"},"application/msword":{extension:["doc"],icon:"file-word"},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":{extension:["xlsx"],icon:"file-excel"},"application/vnd.ms-excel":{extension:["xls","xlt"],icon:"file-excel"},"application/vnd.ms-excel.sheet.macroEnabled.12":{extension:["xlsm"],icon:"file-excel"},"application/vnd.openxmlformats-officedocument.spreadsheetml.template":{extension:["xltx"],icon:"file-excel"},"application/vnd.ms-excel.template.macroEnabled.12":{extension:["xltm"],icon:"file-excel"},"application/vnd.openxmlformats-officedocument.presentationml.presentation":{extension:["pptx"],icon:"file-ppt"},"application/vnd.ms-powerpoint":{extension:["ppt"],icon:"file-ppt"},"application/zip":{extension:["zip"],icon:"file-zip"},"application/x-zip-compressed":{extension:["zip"],icon:"file-zip"},"application/x-7z-compressed":{extension:["7z"],icon:"file-zip"},"application/gzip":{extension:["gz"],icon:"file-zip"},"application/x-tar":{extension:["tar"],icon:""},"application/json":{extension:["json"],icon:""},"application/ld+json":{extension:["jsonld"],icon:""},"application/java-archive":{extension:["jar"],icon:""},"text/css":{extension:["css"],icon:"file-text"},"text/csv":{extension:["csv"],icon:"file-text"},"text/html":{extension:["html","htm"],icon:"file-text"},"text/calendar":{extension:["ics"],icon:"file-text"},"text/javascript":{extension:["js"],icon:"file-text"},"text/plain":{extension:["txt"],icon:"file-text"},"text/xml":{extension:["xml"],icon:"file-text"}}}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac}),t}(),Be=function(){var t=function(){function t(i,n,o,r){e(this,t),this.zone=i,this.rendererFactory=n,this.translateService=o,this.dwImageViewerFileService=r,this.zoomPercent=100,this.ROTACAO_PADRAO_GRAUS=90,this.validImageExtension="jpg|jpeg|png|gif|bmp|webp|svg|ico",this.renderer=this.rendererFactory.createRenderer(null,null)}return i(t,[{key:"inicializarImageViewer",value:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{maxZoom:800};return a.Observable.create(function(n){t.zone.runOutsideAngular(function(){i.snapView=!1,t.viewer=new(d())(e.nativeElement,i),t.imageContainer=e,t.initIntervalId=setInterval(function(){window.getComputedStyle(t.imageContainer.nativeElement).width&&(clearInterval(t.initIntervalId),n.next(!0))},100)})})}},{key:"showImage",value:function(e){var t=this;this.zone.runOutsideAngular(function(){!t.isImage(e)||(t.initImageSetting(),t.viewer.load(e),t.imageDimIntervalId=setInterval(function(){t.viewer._state.imageDim&&t.viewer._state.imageDim.w&&t.viewer._elements.image&&t.viewer._elements.image.naturalWidth&&(t.fitWidth=t.viewer._state.imageDim.w,t.fitHeight=t.viewer._state.imageDim.h,t.originWidth=t.viewer._elements.image.naturalWidth,t.originHeight=t.viewer._elements.image.naturalHeight,clearInterval(t.imageDimIntervalId))},50))})}},{key:"isImage",value:function(e){return RegExp("^(data:image/(?!tiff)|(https|http|www.))|.(".concat(this.validImageExtension,")$"),"gi").test(e)}},{key:"initImageSetting",value:function(){this.nowScale=1,this.rotacaoImagemAtual=0,this.isImagemVertical=!1}},{key:"zoomIn",value:function(){var e=this;this.zone.runOutsideAngular(function(){e.zoomPercent+=10,e.viewer.zoom(e.zoomPercent)})}},{key:"zoomOut",value:function(){var e=this;this.zone.runOutsideAngular(function(){100!==e.zoomPercent&&(e.zoomPercent-=10,e.zoomPercent<0&&(e.zoomPercent=0),e.viewer.zoom(e.zoomPercent))})}},{key:"fullScreen",value:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{snapView:!1};!this.isImage(e)||this.zone.runOutsideAngular(function(){var n=t.resetZoom();setTimeout(function(){t.viewerFullscreen=new(d().FullScreenViewer)(i),t.initImageSetting(),t.viewerFullscreen.show(e),t.atualizarRotacao(!1)},n)})}},{key:"originalSize",value:function(){var e=this;this.zone.runOutsideAngular(function(){var t=e.originWidth/e.fitWidth;1!==e.nowScale&&(t/=e.nowScale),e.viewer.zoom(100*t)})}},{key:"resetZoom",value:function(){var e=this,t=800;return this.zone.runOutsideAngular(function(){e.zoomPercent=100,e.viewer.zoom(e.zoomPercent),e.viewer._state.zoomValue===e.zoomPercent&&(t=0)}),t}},{key:"rotateRight",value:function(){var e=this;this.zone.runOutsideAngular(function(){var t=e.resetZoom();setTimeout(function(){e.rotacaoImagemAtual+=e.ROTACAO_PADRAO_GRAUS,e.isImagemVertical=!e.isImagemVertical,e.setRotateStyle()},t)})}},{key:"rotateLeft",value:function(){var e=this;this.zone.runOutsideAngular(function(){var t=e.resetZoom();setTimeout(function(){e.rotacaoImagemAtual-=e.ROTACAO_PADRAO_GRAUS,e.isImagemVertical=!e.isImagemVertical,e.setRotateStyle()},t)})}},{key:"setRotateStyle",value:function(){var e=this;this.zone.runOutsideAngular(function(){var t=1,i=e.imageContainer.nativeElement,n=0,o=e.fitWidth>=e.fitHeight;Math.abs(e.rotacaoImagemAtual)/90%2==1&&(o?(n=e.fitWidth-i.clientHeight)>0?t=(e.fitWidth-n)/e.fitWidth:n<0&&(t=(e.fitWidth+Math.abs(n))/e.fitWidth):((n=e.fitHeight-i.clientWidth)>0?t=(e.fitHeight-n)/e.fitHeight:n<0&&(t=(e.fitHeight+Math.abs(n))/e.fitHeight),e.fitWidth*t>i.clientHeight&&(n=e.fitWidth-i.clientHeight,t=(e.fitWidth-n)/e.fitWidth))),e.nowScale=t,e.carregarImagem("rotate(".concat(e.rotacaoImagemAtual,"deg)"),"scale(".concat(t,")"),!0)})}},{key:"atualizarRotacao",value:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.zone.runOutsideAngular(function(){var i="";e.isImagemVertical&&e.isImagemSobrepondoNaVertical()&&(i="scale(".concat(e.getScale(),")")),e.carregarImagem("rotate(".concat(e.rotacaoImagemAtual,"deg)"),i,t)})}},{key:"getScale",value:function(){var e=this.imageContainer.nativeElement,t=e.getElementsByClassName("iv-small-image").item(0),i=t.clientWidth-e.clientHeight;return i>=250&&i<300?(t.clientWidth-e.clientHeight)/e.clientHeight-.1:i>=300&&i<400?(t.clientWidth-e.clientHeight)/e.clientHeight-.15:i>=400?(t.clientWidth-e.clientHeight)/e.clientHeight-.32:.6}},{key:"isImagemSobrepondoNaVertical",value:function(){var e=this.imageContainer.nativeElement,t=e.getElementsByClassName("iv-small-image").item(0);return e.clientHeight<t.clientWidth+5}},{key:"carregarImagem",value:function(e,t){var i=this,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this.zone.runOutsideAngular(function(){n&&(i.adicionarAnimacao("iv-snap-image"),i.adicionarAnimacao("iv-small-image")),i.adicionarRotacao("iv-snap-image",e,t),i.adicionarRotacao("iv-small-image",e,t),setTimeout(function(){n&&(i.retirarAnimacao("iv-snap-image"),i.retirarAnimacao("iv-small-image"))},501)})}},{key:"adicionarRotacao",value:function(e,t,i){var n=this;this.zone.runOutsideAngular(function(){n.setStyleClass(e,"transform","".concat(t," ").concat(i))})}},{key:"retirarAnimacao",value:function(e){var t=this;this.zone.runOutsideAngular(function(){t.setStyleClass(e,"transition","auto")})}},{key:"adicionarAnimacao",value:function(e){var t=this;this.zone.runOutsideAngular(function(){t.setStyleClass(e,"transition","0.5s linear")})}},{key:"setStyleClass",value:function(e,t,i){var n=this;this.zone.runOutsideAngular(function(){for(var o=n.imageContainer.nativeElement.getElementsByClassName(e),r=0;r<o.length;r++)n.renderer.setStyle(o.item(r),t,i)})}},{key:"destroy",value:function(){this.viewer.destroy()}},{key:"hideViewer",value:function(){var e=this;this.zone.runOutsideAngular(function(){e.setStyleClass("iv-wrap","display","none")})}},{key:"showViewer",value:function(){var e=this;this.zone.runOutsideAngular(function(){e.setStyleClass("iv-wrap","display","block")})}},{key:"viewerActionDefault",value:function(){return{dwPrevious:{show:!0,title:this.translateService.instant("dw-image-viewer-previous"),disabled:!1},dwNext:{show:!0,title:this.translateService.instant("dw-image-viewer-next"),disabled:!1},dwFullScreen:{show:!0,title:this.translateService.instant("dw-image-viewer-full-screen"),disabled:!1},dwZoomIn:{show:!0,title:this.translateService.instant("dw-image-viewer-zoom-in"),disabled:!1},dwZoomOut:{show:!0,title:this.translateService.instant("dw-image-viewer-zoom-out"),disabled:!1},dwResetZoom:{show:!0,title:this.translateService.instant("dw-image-viewer-reset-zoom"),disabled:!1},dwOriginalSize:{show:!0,title:this.translateService.instant("dw-image-viewer-originSize"),disabled:!1},dwRotateRight:{show:!0,title:this.translateService.instant("dw-image-viewer-rotate-right"),disabled:!1},dwRotateLeft:{show:!0,title:this.translateService.instant("dw-image-viewer-rotate-left"),disabled:!1},dwDownload:{show:!0,title:this.translateService.instant("dw-image-viewer-download"),disabled:!1}}}}]),t}();return t.\u0275fac=function(e){return new(e||t)(r.\u0275\u0275inject(r.NgZone),r.\u0275\u0275inject(r.RendererFactory2),r.\u0275\u0275inject(c.TranslateService),r.\u0275\u0275inject(Ne))},t.\u0275prov=r.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac}),t}(),We=function(){var t=function(){function t(i,n,o,r){e(this,t),this.dwImageViewerService=i,this.dwModalService=n,this.translateService=o,this.dwUploadFileMangementService=r}return i(t,[{key:"actionDefault",value:function(){return{dwPreview:{show:!0,title:this.translateService.instant("dw-image-viewer-preview"),disabled:!1},dwRemove:{show:!0,title:this.translateService.instant("dw-delete"),disabled:!1},dwDownload:{show:!0,title:this.translateService.instant("dw-image-viewer-download"),disabled:!1},dwCheck:{show:!1,title:this.translateService.instant("dw-image-viewer-check"),disabled:!1},otherAction:[]}}},{key:"resetViewerAction",value:function(e,t,i){var n=null;if(e){n=JSON.parse(JSON.stringify(e));for(var o=t.length,r=0;r<o;r++)if(t[r].uid===i){0===r&&(n.dwPrevious.disabled=!0),r===o-1&&(n.dwNext.disabled=!0);break}}else n=this.dwImageViewerService.viewerActionDefault();return n}},{key:"previous",value:function(e,t,i){var n=this;return new a.Observable(function(o){for(var r={uid:null,fileSrc:null,name:null,type:null,title:null,viewerAction:null,thumbnailList:e},a=e.length,l=0;l<a;l++)if(e[l].uid===t){var c=l;l>0&&(c=l-1),r.uid=e[c].uid,e[c].url?r.fileSrc=e[c].url:e[c].originFileObj&&e[c].originFileObj instanceof File?r.fileSrc=e[c].originFileObj:e[c].dmcFileId&&(r.fileSrc=n.dwUploadFileMangementService.getDataUrlAndBlobByFileId(e[c].dmcFileId,e[c].bucketName?e[c].bucketName:null)),r.name=e[c].name,r.type=e[c].type,r.title=e[c].title,r.viewerAction=n.resetViewerAction(i,e,r.uid);break}o.next(r),o.complete()})}},{key:"next",value:function(e,t,i){var n=this;return new a.Observable(function(o){for(var r={uid:null,fileSrc:null,name:null,type:null,title:null,viewerAction:null,thumbnailList:e},a=e.length,l=0;l<a;l++)if(e[l].uid===t){var c=l;l+1<=a-1&&(c=l+1),r.uid=e[c].uid,e[c].url?r.fileSrc=e[c].url:e[c].originFileObj&&e[c].originFileObj instanceof File?r.fileSrc=e[c].originFileObj:e[c].dmcFileId&&(r.fileSrc=n.dwUploadFileMangementService.getDataUrlAndBlobByFileId(e[c].dmcFileId,e[c].bucketName?e[c].bucketName:null)),r.name=e[c].name,r.type=e[c].type,r.title=e[c].title,r.viewerAction=n.resetViewerAction(i,e,r.uid);break}o.next(r),o.complete()})}},{key:"previewModal",value:function(e,t,i,n,o){var r=this,l=this.resetViewerAction(i,t,e.uid);return n||(l.dwPrevious.show=!1),o||(l.dwNext.show=!1),e.type&&"application/pdf"===e.type.toLowerCase()&&(/^([Hh])([Tt]){2}([Pp])([Ss]){0,1}:/.test(e.url)||/\.[Pp][Dd][Ff]$/.test(e.url))?new a.Observable(function(t){window.open(e.url,"_blank"),t.next("ok"),t.complete()}):new a.Observable(function(i){var a=null;e.url?a=e.url:e.originFileObj&&e.originFileObj instanceof File?a=e.originFileObj:e.dmcFileId&&(a=r.dwUploadFileMangementService.getDataUrlAndBlobByFileId(e.dmcFileId,e.bucketName?e.bucketName:null)),r.dwModalService.create({dwContent:Ue,dwWidth:"650px",dwStyle:{top:"20px"},dwFooter:null,dwClosable:!0,dwMaskClosable:!1,dwOnOk:function(){i.next("ok"),i.complete()},dwOnCancel:function(){i.next("cancel"),i.complete()},dwComponentParams:{uid:e.uid,fileSrc:a,name:e.name,type:e.type,title:e.title,viewerAction:l,thumbnailList:t,onPrevious:n,onNext:o}})})}},{key:"listRemove",value:function(e,t){for(var i={isRemove:!1,removeItem:null},n=e.length,o=0;o<n;o++)if(e[o].hasOwnProperty("uid")&&e[o].uid===t){i.isRemove=!0,i.removeItem=Object.assign({},e[o]),e.splice(o,1);break}return i}}]),t}();return t.\u0275fac=function(e){return new(e||t)(r.\u0275\u0275inject(Be),r.\u0275\u0275inject(l.DwModalService),r.\u0275\u0275inject(c.TranslateService),r.\u0275\u0275inject(w.DwUploadFileMangementService))},t.\u0275prov=r.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac}),t}(),Ze=function(){var t=function(){function t(i,n,o,r,a,l){e(this,t),this.dwImageViewerListService=i,this.dwImageViewerFileService=n,this.translateService=o,this.dwMessageService=r,this.dwUploadFileMangementService=a,this.sanitizer=l,this.dwDownloadToOtherCfg=!1,this.dwViewerListType="picture-card",this.viewerFileType="",this.icons=this.dwImageViewerListService.actionDefault(),this.dwItemImageStyle={},this.dwItemTitleStyle={},this.dwItemActionsStyle={},this.dwItemFileiconStyle={},this.handleStatus="none",this.otherActionCfg=this.otherActionCfgInit(),this.isShowItemAction=!1,this.isViewImageType=!1}return i(t,[{key:"dwListType",set:function(e){this.dwViewerListType=e}},{key:"dwFile",set:function(e){var t=this,i=!1;if(this.viewerFile?(e.type!==this.viewerFile.type||e.name!==this.viewerFile.name||e.url!==this.viewerFile.url)&&(i=!0):i=!0,this.viewerFile=e,i){var n=this.viewerFile.url;n||(n=this.viewerFile.thumbUrl),this.sanitizedSrc=this.viewerFile.thumbUrl?this.viewerFile.thumbUrl:this.viewerFile.url,this.getThumbUrlOrUrl$().subscribe(function(e){t.getSanitizedSrc(),t.dwImageViewerFileService.getTypeByProperty(t.viewerFile.originFileObj,t.viewerFile.type,t.viewerFile.name,n).subscribe(function(e){t.viewerFileType=e.mimeType,t.isViewImageType=t.dwImageViewerFileService.isViewImageType(t.viewerFileType)})})}}},{key:"getThumbUrlOrUrl$",value:function(){return!this.viewerFile.thumbUrl&&this.viewerFile.dmcShrinkId?this.getThumbDataUrl():this.viewerFile.url||!this.viewerFile.dmcFileId||this.viewerFile.thumbUrl||this.viewerFile.dmcShrinkId||(!this.viewerFile.type||-1===this.viewerFile.type.search("image"))&&this.viewerFile.type?new a.Observable(function(e){e.next(!0)}):this.getOriginDataUrl()}},{key:"getSanitizedSrc",value:function(){this.sanitizedSrc=this.sanitizer.bypassSecurityTrustResourceUrl(this.viewerFile.thumbUrl?this.viewerFile.thumbUrl:this.viewerFile.url)}},{key:"getThumbDataUrl",value:function(){var e=this;return new a.Observable(function(t){e.handleStatus="reading",e.dwUploadFileMangementService.getDataUrlAndBlobByFileId(e.viewerFile.dmcShrinkId,e.viewerFile.bucketName?e.viewerFile.bucketName:null).subscribe(function(i){e.viewerFile.thumbUrl=i.dataUrl,e.viewerFile.type||(e.viewerFile.type=i.blob.type,e.viewerFileType=e.viewerFile.type),e.handleStatus="none",t.next(!0)},function(t){e.handleStatus="none",e.viewerFile.status="error"})})}},{key:"getOriginDataUrl",value:function(){var e=this;return new a.Observable(function(t){e.handleStatus="reading",e.dwUploadFileMangementService.getDataUrlAndBlobByFileId(e.viewerFile.dmcFileId,e.viewerFile.bucketName?e.viewerFile.bucketName:null).subscribe(function(i){e.viewerFile.url=i.dataUrl,e.viewerFile.type||(e.viewerFile.type=i.blob.type,e.viewerFileType=e.viewerFile.type),e.handleStatus="none",t.next(!0)},function(t){e.handleStatus="none",e.viewerFile.status="error"})})}},{key:"dwItemAction",set:function(e){var t=this;e&&Object.keys(e).forEach(function(i){t.icons[i]=Array.isArray(t.icons[i])?Object.assign([],e[i]):Object.assign({},e[i])}),this.actionsChange()}},{key:"dwItemImageWidth",set:function(e){var t=0,i=!1;if(e.hasOwnProperty("width")&&(t=e.width),t>0){e.hasOwnProperty("autoReSize")&&(i=e.autoReSize),this.dwItemImageStyle.width=t+"px",i&&(this.dwItemImageStyle.height=t+"px",this.dwItemTitleStyle.width=t+"px");var n=(t-32)/3-8;n>=14&&(this.dwItemActionsStyle["font-size"]=Math.floor(n)+"px");var o=t-54;o>0&&(this.dwItemFileiconStyle["font-size"]=o+"px")}}},{key:"ngOnInit",value:function(){this.onPreview||(this.icons.dwPreview.show=!1),this.onRemove||(this.icons.dwRemove.show=!1),this.onCheck||(this.icons.dwCheck.show=!1),this.actionsChange()}},{key:"handlePreview",value:function(e,t){t.preventDefault(),this.onPreview&&this.onPreview(e).subscribe()}},{key:"handleRemove",value:function(e,t){t.preventDefault(),this.onRemove&&this.onRemove(e).subscribe()}},{key:"handleDownload",value:function(e,t){var i=this;t.preventDefault(),this.onDownload?this.onDownload(e).subscribe():(this.handleStatus="downloading",this._getFileSrc(e).subscribe(function(t){t&&i.dwImageViewerFileService.downLoad(t,e.name).subscribe(function(e){if(i.handleStatus="none",!e.success){var t=i.translateService.instant("dw-downLoad-err");i.dwMessageService.create("loading",t)}})}))}},{key:"_getFileSrc",value:function(e){var t=this;return new a.Observable(function(i){if(e.hasOwnProperty("originFileObj"))e.originFileObj instanceof File&&i.next(e.originFileObj);else if(e.hasOwnProperty("url")&&e.url)i.next(e.url);else if(!e.url&&e.dmcFileId){var n=null;e.bucketName&&(n=e.bucketName),t.dwUploadFileMangementService.getDataUrlAndBlobByFileId(e.dmcFileId,n).subscribe(function(e){t.viewerFile.url=e.dataUrl,t.viewerFile.type=e.blob.type,i.next(e.blob)})}else i.next("")})}},{key:"handleCheck",value:function(e,t){t.preventDefault(),this.onCheck&&this.onCheck(e).subscribe()}},{key:"handleOtherAction",value:function(e,t,i){i.preventDefault(),this.onOtherAction&&this.onOtherAction(e,t).subscribe()}},{key:"checkShowItemAction",value:function(e){var t=null,i=!1;return e.hasOwnProperty("show")&&(t=e.show),t&&(i=!0),i}},{key:"otherActionCfgInit",value:function(){return{show:!1,title:"",disabled:!1,open:!1}}},{key:"actionsChange",value:function(){var e=this,t=!1,i=this.otherActionCfgInit(),n={},o=0;this.icons&&Object.keys(this.icons).forEach(function(r){"otherAction"===r?e.icons[r].forEach(function(n){Object.keys(n).forEach(function(o){e.checkShowItemAction(n[o])&&(t=!0,i.show=!0)})}):e.checkShowItemAction(e.icons[r])&&(t=!0,"dwCheck"!==r&&r.startsWith("dw")&&(o+=1,n[r]=Object.assign({},e.icons[r])))}),this.isShowItemAction=t,this.otherActionCfg.show=i.show,this.dwDownloadToOtherCfg=!!this.otherActionCfg.show&&o>=3}}]),t}();return t.\u0275fac=function(e){return new(e||t)(r.\u0275\u0275directiveInject(We),r.\u0275\u0275directiveInject(Ne),r.\u0275\u0275directiveInject(c.TranslateService),r.\u0275\u0275directiveInject(m.DwMessageService),r.\u0275\u0275directiveInject(w.DwUploadFileMangementService),r.\u0275\u0275directiveInject(u.DomSanitizer))},t.\u0275cmp=r.\u0275\u0275defineComponent({type:t,selectors:[["dw-image-viewer-list-item"]],inputs:{dwListType:"dwListType",dwFile:"dwFile",dwItemAction:"dwItemAction",dwItemImageWidth:"dwItemImageWidth",dwTitleTpl:"dwTitleTpl",dwDesignTpl:"dwDesignTpl",onPreview:"onPreview",onRemove:"onRemove",onDownload:"onDownload",onCheck:"onCheck",onOtherAction:"onOtherAction"},decls:12,vars:5,consts:[["noThumbTpl",""],["thumbTpl",""],["itemActions",""],["imageInfo",""],["itemTitle",""],[4,"ngIf"],[3,"ngSwitch"],["class","dw-f-image-viewer-list-item-loading",4,"ngSwitchCase"],[4,"ngSwitchDefault"],[1,"dw-f-image-viewer-list-item-loading"],["indicatorTemplate",""],[3,"dwIndicator"],["dw-icon","","dwType","loading"],[1,"dw-f-image-viewer-list-item-fileicon",3,"mimeType","ngStyle"],[1,"dw-f-image-viewer-list-item-thumbnail"],[3,"src",4,"ngIf","ngIfElse"],[3,"src"],["class","dw-f-image-viewer-list-item-actions",3,"ngStyle",4,"ngIf"],[1,"dw-f-image-viewer-list-item-actions",3,"ngStyle"],["dw-icon","","dwType","eye-o","class","action-icon",3,"title","ngClass","click",4,"ngIf"],["dw-icon","","dwType","delete","class","action-icon",3,"title","ngClass","click",4,"ngIf"],["dw-icon","","dwType","download","class","action-icon",3,"title","ngClass","click",4,"ngIf"],["dw-icon","","dwType","setting","class","action-icon","dw-popover","","dwPopoverPlacement","bottomRight",3,"ngClass","dwPopoverContent",4,"ngIf"],["otherActionTpl",""],["dw-icon","","dwType","eye-o",1,"action-icon",3,"title","ngClass","click"],["dw-icon","","dwType","delete",1,"action-icon",3,"title","ngClass","click"],["dw-icon","","dwType","download",1,"action-icon",3,"title","ngClass","click"],["dw-icon","","dwType","setting","dw-popover","","dwPopoverPlacement","bottomRight",1,"action-icon",3,"ngClass","dwPopoverContent"],[1,"dw-f-image-viewer-list-item-other-dialog"],[3,"click",4,"ngIf"],[4,"ngFor","ngForOf"],[3,"click"],["dw-tooltip","",3,"ngStyle","dwTooltipTitle"],[1,"dw-f-image-viewer-list-item-image-info-contain",3,"ngClass"],[4,"ngIf","ngIfElse"],[1,"dw-f-image-viewer-list-item-progress"],[1,"dw-f-image-viewer-list-item-uploading-text"],[1,"dw-f-image-viewer-list-item-progress-bar"],[3,"dwPercent","dwShowInfo","dwStrokeWidth",4,"ngIf"],[3,"dwPercent","dwShowInfo","dwStrokeWidth"],[3,"ngTemplateOutlet"],[1,"dw-f-image-viewer-list-item-title",3,"ngStyle"],["titleDefaultTpl",""],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"dw-f-image-viewer-list-item-checkBox",3,"ngSwitch","click"],["src","./assets/dw-framework/img/icon/checked.svg",4,"ngSwitchCase"],["src","./assets/dw-framework/img/icon/unchecked.svg",4,"ngSwitchCase"],["src","./assets/dw-framework/img/icon/unchecked.svg",4,"ngSwitchDefault"],["src","./assets/dw-framework/img/icon/checked.svg"],["src","./assets/dw-framework/img/icon/unchecked.svg"]],template:function(e,t){1&e&&(r.\u0275\u0275elementStart(0,"div"),r.\u0275\u0275template(1,k,4,3,"ng-template",null,0,r.\u0275\u0275templateRefExtractor),r.\u0275\u0275template(3,T,2,2,"ng-template",null,1,r.\u0275\u0275templateRefExtractor),r.\u0275\u0275template(5,L,1,1,"ng-template",null,2,r.\u0275\u0275templateRefExtractor),r.\u0275\u0275template(7,H,4,11,"ng-template",null,3,r.\u0275\u0275templateRefExtractor),r.\u0275\u0275template(9,q,4,3,"ng-template",null,4,r.\u0275\u0275templateRefExtractor),r.\u0275\u0275template(11,re,5,4,"ng-container",5),r.\u0275\u0275elementEnd()),2&e&&(r.\u0275\u0275classMapInterpolate2("dw-f-image-viewer-list-item dw-f-image-viewer-list-item-type-",t.dwViewerListType," dw-f-image-viewer-list-item-",t.viewerFile.status,""),r.\u0275\u0275advance(11),r.\u0275\u0275property("ngIf","picture-card"===t.dwViewerListType))},directives:function(){return[p.NgIf,p.NgSwitch,p.NgSwitchCase,p.NgSwitchDefault,y.DwSpinComponent,f.DwIconDirective,He,p.NgStyle,p.NgClass,v.DwPopoverDirective,p.NgForOf,h.DwTooltipDirective,g.DwProgressComponent,p.NgTemplateOutlet]},pipes:function(){return[c.TranslatePipe,p.KeyValuePipe]},styles:['.dw-f-image-viewer-list-item{position:relative;float:left;margin:8px}.dw-f-image-viewer-list-item-image-info{position:relative;float:none;float:initial;width:104px;height:104px;padding:8px;border:1px solid #d9d9d9;border-radius:2px;font-size:14px}.dw-f-image-viewer-list-item-image-info-contain{position:relative;height:100%;overflow:hidden}.dw-f-image-viewer-list-item-image-info-error{border-color:#ff4d4f}.dw-f-image-viewer-list-item-title{width:104px;height:45px;position:relative;float:left;overflow:hidden}.dw-f-image-viewer-list-item-progress{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:100%}.dw-f-image-viewer-list-item-loading{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:100%}.dw-f-image-viewer-list-item-uploading-text{color:#00000073;text-align:center}.dw-f-image-viewer-list-item-thumbnail{top:8px;left:8px;text-align:center;opacity:.8;position:static;display:block;width:100%;height:100%;-o-object-fit:cover;object-fit:cover}.dw-f-image-viewer-list-item-thumbnail>img{position:static;display:block;width:100%;height:100%;-o-object-fit:cover;object-fit:cover}.dw-f-image-viewer-list-item .actions-mask:before{position:absolute;display:block;z-index:1;width:100%;height:100%;background-color:#00000080;opacity:0;transition:all .3s;content:" "}.dw-f-image-viewer-list-item .actions-mask:hover:before{opacity:1}.dw-f-image-viewer-list-item .actions-mask:hover .dw-f-image-viewer-list-item-actions{opacity:1}.dw-f-image-viewer-list-item-fileicon{display:flex;align-items:center;justify-content:center;height:100%;font-size:50px}.dw-f-image-viewer-list-item-fileicon .file-icon-container i{line-height:normal;line-height:initial}.dw-f-image-viewer-list-item-actions{font-size:16px;position:absolute;top:50%;left:50%;z-index:10;white-space:nowrap;transform:translate(-50%,-50%);opacity:0;transition:all .3s}.dw-f-image-viewer-list-item-actions-disabled{opacity:.5;pointer-events:none}.dw-f-image-viewer-list-item-actions .action-icon{z-index:10;margin:0 4px;color:#ffffffd9;cursor:pointer;transition:all .3s}.dw-f-image-viewer-list-item-checkBox{position:absolute;float:right;top:0px;right:0px;z-index:1;cursor:pointer}.dw-f-image-viewer-list-item-check:hover{opacity:1}.dw-f-image-viewer-list-item-other-dialog{max-width:200px;max-height:150px;overflow:auto}\n'],encapsulation:2}),t}(),He=function(){var t=function(){function t(i){e(this,t),this.dwImageViewerFileService=i,this.fileIcon=null}return i(t,[{key:"mimeType",set:function(e){this.fileIcon=e?0===e.indexOf("image/")?"file-image":0===e.indexOf("video/")?"video-camera":0===e.indexOf("audio/")?"customer-service":0===e.indexOf("text/")?"file-text":this.dwImageViewerFileService.mimeToIcon(e):this.dwImageViewerFileService.mimeToIcon(e)}},{key:"ngOnInit",value:function(){}}]),t}();return t.\u0275fac=function(e){return new(e||t)(r.\u0275\u0275directiveInject(Ne))},t.\u0275cmp=r.\u0275\u0275defineComponent({type:t,selectors:[["dw-image-viewer-file-icon"]],inputs:{mimeType:"mimeType",fileIconColor:"fileIconColor"},decls:12,vars:10,consts:[[1,"file-icon-container"],[3,"ngSwitch"],["dw-icon","","dwTheme","fill",3,"dwType","ngStyle",4,"ngSwitchCase"],["dw-icon","","dwType","file","dwTheme","fill",3,"ngStyle",4,"ngSwitchDefault"],["dw-icon","","dwTheme","fill",3,"dwType","ngStyle"],["dw-icon","","dwType","file","dwTheme","fill",3,"ngStyle"]],template:function(e,t){1&e&&(r.\u0275\u0275elementStart(0,"div",0),r.\u0275\u0275elementContainerStart(1,1),r.\u0275\u0275template(2,le,1,4,"i",2),r.\u0275\u0275template(3,ce,1,4,"i",2),r.\u0275\u0275template(4,se,1,4,"i",2),r.\u0275\u0275template(5,de,1,4,"i",2),r.\u0275\u0275template(6,we,1,4,"i",2),r.\u0275\u0275template(7,me,1,4,"i",2),r.\u0275\u0275template(8,ue,1,4,"i",2),r.\u0275\u0275template(9,pe,1,4,"i",2),r.\u0275\u0275template(10,fe,1,4,"i",2),r.\u0275\u0275template(11,ve,1,3,"i",3),r.\u0275\u0275elementContainerEnd(),r.\u0275\u0275elementEnd()),2&e&&(r.\u0275\u0275advance(1),r.\u0275\u0275property("ngSwitch",t.fileIcon),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngSwitchCase","file-image"),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngSwitchCase","video-camera"),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngSwitchCase","customer-service"),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngSwitchCase","file-pdf"),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngSwitchCase","file-word"),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngSwitchCase","file-excel"),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngSwitchCase","file-ppt"),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngSwitchCase","file-zip"),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngSwitchCase","file-text"))},directives:[p.NgSwitch,p.NgSwitchCase,p.NgSwitchDefault,f.DwIconDirective,p.NgStyle],styles:[""],encapsulation:2}),t}(),$e=function(){var t=function(){function t(i,n,o,r,a){e(this,t),this.imageViewerService=i,this.imageViewerFileService=n,this.translateService=o,this.dwMessageService=r,this.cd=a,this.fileSrc="",this.isImage=!0,this.isVideo=!1,this.fileSrcLoadingStatus="",this._originViewerAction=this.imageViewerService.viewerActionDefault(),this._viewerAction=this.imageViewerService.viewerActionDefault(),this.dwContainerStyle={"background-color":"#222222",height:"450px"},this.dwEyeConfig={show:!1,disabled:!0,title:this.translateService.instant("dw-image-viewer-preview")},this.fileIconColor="#ffffff",this.isDownLoad=!1,this.fileSrcDataUrl="",this.imageRegx=new RegExp(this.imageViewerService.validImageExtension,"i")}return i(t,[{key:"type",get:function(){return this._type},set:function(e){this._type=e}},{key:"viewerAction",get:function(){return this._viewerAction},set:function(e){var t=this;Object.keys(e).forEach(function(i){t._viewerAction[i]=Object.assign(t._viewerAction[i],e[i])})}},{key:"containerStyle",set:function(e){var t=this;e&&Object.keys(e).forEach(function(i){t.dwContainerStyle[i]=e[i]})}},{key:"ngOnInit",value:function(){}},{key:"ngAfterViewInit",value:function(){var e=this;!this.fileSrc||(Object.keys(this.viewerAction).forEach(function(t){e._originViewerAction[t]=Object.assign({},e.viewerAction[t])}),this.imageViewerService.inicializarImageViewer(this.viewContainer).subscribe(function(t){e.showImage()}))}},{key:"showImage",value:function(){var e=this;if(this.imageViewerService.hideViewer(),this.fileSrc){var t=null,i=null;this._getFileSrc().subscribe(function(n){e.fileSrc=n,e.fileSrc instanceof File?t=e.fileSrc:i=e.fileSrc,e.imageViewerFileService.getTypeByProperty(t,e.type,e.name,i).subscribe(function(t){e.type=t.mimeType,e.isVideo="video/mp4"===e.type||"video/webm"===e.type||"video/ogg"===e.type,e.isImage=e.imageViewerFileService.isViewImageType(e.type),e.fileSrc instanceof File?e.blobtoDataURL(e.fileSrc,function(t){e.fileSrcDataUrl=t,e.cd.detectChanges(),e.isImage?(e.imageViewerService.showViewer(),e.imageViewerService.showImage(e.fileSrcDataUrl)):e._handleNotImageFile()}):(e.fileSrcDataUrl=e.fileSrc,e.cd.detectChanges(),e.isImage?(e.imageViewerService.showViewer(),e.imageViewerService.showImage(e.fileSrcDataUrl)):e._handleNotImageFile())})})}}},{key:"_getFileSrc",value:function(){var e=this;return new a.Observable(function(t){e.fileSrc instanceof a.Observable?e.fileSrc.subscribe(function(i){e.type=i.blob.type,t.next(i.dataUrl);for(var n=0;n<e.thumbnailList.length;n++)if(e.thumbnailList[n].uid===e.uid){e.thumbnailList[n].url=i.dataUrl,e.thumbnailList[n].type||(e.thumbnailList[n].type=i.blob.type);break}},function(t){e.fileSrcLoadingStatus="error",e.cd.detectChanges()}):t.next(e.fileSrc)})}},{key:"_handleNotImageFile",value:function(){if(this.imageViewerService.hideViewer(),this.viewerAction.dwFullScreen.disabled=!0,this.viewerAction.dwZoomIn.disabled=!0,this.viewerAction.dwZoomOut.disabled=!0,this.viewerAction.dwResetZoom.disabled=!0,this.viewerAction.dwOriginalSize.disabled=!0,this.viewerAction.dwRotateRight.disabled=!0,this.viewerAction.dwRotateLeft.disabled=!0,this.type&&"application/pdf"===this.type.toLowerCase()&&(/^([Hh])([Tt]){2}([Pp])([Ss]){0,1}:/.test(this.fileSrc)||/\.[Pp][Dd][Ff]$/.test(this.fileSrc)))return this.dwEyeConfig.disabled=!1,void(this.dwEyeConfig.show=!0);this.isVideo="video/mp4"===this.type||"video/webm"===this.type||"video/ogg"===this.type}},{key:"blobtoDataURL",value:function(e,t){var i=new FileReader;i.onload=function(e){t(e.target.result)},i.readAsDataURL(e)}},{key:"download",value:function(){var e=this;this.isDownLoad=!0;var t;t=this.fileSrc instanceof File?this.fileSrc:this.fileSrcDataUrl,this.imageViewerFileService.downLoad(t,this.name).subscribe(function(t){if(e.isDownLoad=!1,!t.success){var i=e.translateService.instant("dw-downLoad-err");e.dwMessageService.create("loading",i)}})}},{key:"fullScreen",value:function(){this.imageViewerService.fullScreen(this.fileSrcDataUrl)}},{key:"originalSize",value:function(){this.imageViewerService.originalSize()}},{key:"resetZoom",value:function(){this.imageViewerService.resetZoom()}},{key:"zoomIn",value:function(){this.imageViewerService.zoomIn()}},{key:"zoomOut",value:function(){this.imageViewerService.zoomOut()}},{key:"rotateRight",value:function(){this.imageViewerService.rotateRight()}},{key:"rotateLeft",value:function(){this.imageViewerService.rotateLeft()}},{key:"reSetInfo",value:function(e){var t=this;this.fileSrcDataUrl="",this.viewerAction=this._originViewerAction,this.isImage=!0,this.type=null,this.fileSrc=null,this.uid=null,this.name=null,this.isVideo=!1,this.title=null,Object.keys(e).forEach(function(i){t[i]=e[i]})}},{key:"next",value:function(){var e=this;this.onNext(this.uid).subscribe(function(t){t.fileSrc&&(e.reSetInfo(t),e.showImage())})}},{key:"previous",value:function(){var e=this;this.onPrevious(this.uid).subscribe(function(t){t.fileSrc&&(e.reSetInfo(t),e.showImage())})}},{key:"eye",value:function(){window.open(this.fileSrc,"_blank")}}]),t}();return t.\u0275fac=function(e){return new(e||t)(r.\u0275\u0275directiveInject(Be),r.\u0275\u0275directiveInject(Ne),r.\u0275\u0275directiveInject(c.TranslateService),r.\u0275\u0275directiveInject(m.DwMessageService),r.\u0275\u0275directiveInject(r.ChangeDetectorRef))},t.\u0275cmp=r.\u0275\u0275defineComponent({type:t,selectors:[["dw-image-viewer"]],viewQuery:function(e,t){var i;(1&e&&r.\u0275\u0275viewQuery(ge,7),2&e)&&(r.\u0275\u0275queryRefresh(i=r.\u0275\u0275loadQuery())&&(t.viewContainer=i.first))},inputs:{fileSrc:"fileSrc",fileIconColor:"fileIconColor",type:"type",viewerAction:"viewerAction",containerStyle:"containerStyle",uid:"uid",name:"name",title:"title",thumbnailList:"thumbnailList",toolbarStyle:"toolbarStyle",titleStyle:"titleStyle",onPrevious:"onPrevious",onNext:"onNext"},features:[r.\u0275\u0275ProvidersFeature([Be])],decls:10,vars:7,consts:[[1,"view-package"],["class","view-tooltip",3,"ngStyle",4,"ngIf"],[1,"description",3,"ngStyle"],[1,"view-container",3,"ngStyle"],["viewContainer",""],["class","loading",4,"ngIf"],["class","other-file",4,"ngIf"],["class","video-type",4,"ngIf"],[1,"view-tooltip",3,"ngStyle"],[3,"ngClass","title","click",4,"ngIf"],["style","padding-top:-5px",3,"ngClass","title","click",4,"ngIf"],[3,"title",4,"ngIf"],[3,"ngClass","title","click"],["dw-icon","","dwType","left","dwTheme","outline"],["dw-icon","","dwType","right","dwTheme","outline"],["dw-icon","","dwType","eye-o","dwTheme","outline"],["dw-icon","","dwType","zoom-in","dwTheme","outline"],["dw-icon","","dwType","zoom-out","dwTheme","outline"],["dw-icon","","dwType","redo","dwTheme","outline"],["dw-icon","","dwType","undo","dwTheme","outline"],["dw-icon","","dwType","column-width","dwTheme","outline"],[2,"padding-top","-5px",3,"ngClass","title","click"],[1,"icon-div"],["dw-icon","","dwType","fullscreen","dwTheme","outline"],[3,"title"],["dw-icon","","dwType","edit","dwTheme","fill"],["dw-icon","","dwType","download","dwTheme","outline",4,"ngIf"],["dw-icon","","dwType","loading","dwTheme","outline",4,"ngIf"],["dw-icon","","dwType","download","dwTheme","outline"],["dw-icon","","dwType","loading","dwTheme","outline"],[1,"loading"],["dw-icon","","dwType","loading",4,"ngIf"],["dw-icon","","dwType","warning","dwTheme","outline",4,"ngIf"],["dw-icon","","dwType","loading"],["dw-icon","","dwType","warning","dwTheme","outline"],[1,"other-file"],[3,"mimeType","fileIconColor"],[1,"video-type"],["controls","",3,"src"]],template:function(e,t){1&e&&(r.\u0275\u0275elementStart(0,"div",0),r.\u0275\u0275template(1,Ee,13,13,"div",1),r.\u0275\u0275elementStart(2,"div",2),r.\u0275\u0275elementStart(3,"div"),r.\u0275\u0275text(4),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(5,"div",3,4),r.\u0275\u0275template(7,Me,3,2,"div",5),r.\u0275\u0275template(8,je,2,2,"div",6),r.\u0275\u0275template(9,_e,3,1,"div",7),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd()),2&e&&(r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",t.fileSrcDataUrl),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngStyle",t.titleStyle),r.\u0275\u0275advance(2),r.\u0275\u0275textInterpolate(t.title?t.title:t.name?t.name:t.fileSrcDataUrl),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngStyle",t.dwContainerStyle),r.\u0275\u0275advance(2),r.\u0275\u0275property("ngIf",!t.fileSrcDataUrl),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",!t.isImage&&!t.isVideo),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",t.isVideo&&t.type))},directives:[p.NgIf,p.NgStyle,p.NgClass,f.DwIconDirective,He],pipes:[c.TranslatePipe],styles:[".view-package[_ngcontent-%COMP%]{height:100%;width:100%;display:flex;flex-flow:column}.view-package[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{order:1}.view-package[_ngcontent-%COMP%]   .view-tooltip[_ngcontent-%COMP%]{order:3}.view-package[_ngcontent-%COMP%]   .view-container[_ngcontent-%COMP%]{order:2}.view-container[_ngcontent-%COMP%]{position:relative;top:0;left:0;right:0;bottom:50px;width:100%;height:100%;min-height:200px;background-color:#000}.view-container[_ngcontent-%COMP%]   .other-file[_ngcontent-%COMP%]{text-align:center;top:33%;position:relative}.view-container[_ngcontent-%COMP%]   .video-type[_ngcontent-%COMP%]{text-align:center;width:100%;height:100%}.view-container[_ngcontent-%COMP%]   .video-type[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{width:100%;height:100%}.view-container[_ngcontent-%COMP%]   .loading[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:100%;text-align:center}.view-container[_ngcontent-%COMP%]   .loading[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:30px;color:#ccc}[_nghost-%COMP%]     .file-icon-container i{font-size:100px}.view-tooltip[_ngcontent-%COMP%]{text-align:center;background-color:#000;padding:5px}.view-tooltip[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{padding-left:20px;color:#fff}.view-tooltip[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:24px}.view-tooltip[_ngcontent-%COMP%]   a.disabled[_ngcontent-%COMP%]{color:#444;cursor:auto}.view-tooltip[_ngcontent-%COMP%]   .icon-div[_ngcontent-%COMP%]{width:25px;height:25px;background-size:cover;display:inline-block;bottom:-5px;position:relative}.description[_ngcontent-%COMP%]{text-align:center;background-color:#000;padding:10px}.description[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{font-size:14px;font-weight:300;color:#fff;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.arrow[_ngcontent-%COMP%]{font-size:50px;width:100%;position:absolute;top:50%;z-index:1000}.arrow[_ngcontent-%COMP%]   .prev[_ngcontent-%COMP%]{cursor:pointer;left:20px;position:absolute;height:32px;margin-top:-66px}.arrow[_ngcontent-%COMP%]   .next[_ngcontent-%COMP%]{cursor:pointer;right:20px;position:absolute;height:32px;margin-top:-66px}"]}),t}(),Ge=function(){var t=i(function t(){e(this,t)});return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=r.\u0275\u0275defineInjector({providers:[Be,Ne,We],imports:[[p.CommonModule,c.TranslateModule,f.DwIconModule,v.DwPopoverModule,g.DwProgressModule,h.DwToolTipModule,y.DwSpinModule]]}),t}()}}])}();