!function(){"use strict";function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),Object.defineProperty(n,"prototype",{writable:!1}),n}function t(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(self.webpackChunkassc_crs=self.webpackChunkassc_crs||[]).push([[6654,3723],{26654:function(e,r,i){i.r(r),i.d(r,{DwFinereportConfigService:function(){return d},DwFinereportCoreModule:function(){return w},DwFinereportLangLoaderService:function(){return S},DwFinereportRepository:function(){return j},DwIframeFinereportInfoService:function(){return y},DwIframeFinereportService:function(){return m}});var c,o=i(42746),a=i(71049),u=i(47372),f=i(51156),s=i(30469),v=i(55245),p=i(83522),l=i(32245),g=i(32276),h=i(66800),w=((c=n(function e(){t(this,e)})).\u0275fac=function(e){return new(e||c)},c.\u0275mod=o.\u0275\u0275defineNgModule({type:c}),c.\u0275inj=o.\u0275\u0275defineInjector({imports:[[v.CommonModule]]}),c),d=function(){var e=function(){function e(n){var r=this;t(this,e),this.configService=n,this.configService.get("frUrl").subscribe(function(e){return r.frUrl=e})}return n(e,[{key:"frEnable",value:function(){var e=!1;return this.frUrl&&""!==this.frUrl&&"@FINEREPORT_URL@"!==this.frUrl&&(e=!0),e}}]),e}();return e.\u0275fac=function(n){return new(n||e)(o.\u0275\u0275inject(s.DwSystemConfigService))},e.\u0275prov=o.\u0275\u0275defineInjectable({factory:function(){return new e(o.\u0275\u0275inject(s.DwSystemConfigService))},token:e,providedIn:w}),e}(),j=function(){var e=function(){function e(n,r){t(this,e),this.http=n,this.dwFinereportConfigService=r}return n(e,[{key:"getReport",value:function(e){return this.dwFinereportConfigService.frEnable()?this.http.get("restful/service/DWSys/report",{params:{code:e}}):(0,a.of)({success:!0,data:null})}},{key:"language",value:function(e){return this.dwFinereportConfigService.frEnable()?this.http.get("restful/service/DWSys/report/list/language",{params:{language:e}}).pipe((0,u.map)(function(e){var n={};return e.data.forEach(function(e){""!==e.name&&(n[e.code]=e.name)}),n})):(0,a.of)({})}}]),e}();return e.\u0275fac=function(n){return new(n||e)(o.\u0275\u0275inject(f.DwDapHttpClient),o.\u0275\u0275inject(d))},e.\u0275prov=o.\u0275\u0275defineInjectable({factory:function(){return new e(o.\u0275\u0275inject(f.DwDapHttpClient),o.\u0275\u0275inject(d))},token:e,providedIn:w}),e}(),S=function(){var e=function(){function e(n,r){t(this,e),this.injector=n,this.translateService=r}return n(e,[{key:"init",value:function(){var e=this,n=this.injector.get(l.DwLanguageService).currentLanguage;this.getTranslation(n).subscribe(function(t){e.translateService.setTranslation(n,t,!0)},function(e){console.log(e)})}},{key:"getTranslation",value:function(e){return this.injector.get(g.DwAuthService).isLoggedIn?this.injector.get(j).language(e).pipe((0,u.map)(function(e){return{prog:e}})):(0,a.of)({})}}]),e}();return e.\u0275fac=function(n){return new(n||e)(o.\u0275\u0275inject(o.Injector),o.\u0275\u0275inject(p.TranslateService))},e.\u0275prov=o.\u0275\u0275defineInjectable({factory:function(){return new e(o.\u0275\u0275inject(o.INJECTOR),o.\u0275\u0275inject(p.TranslateService))},token:e,providedIn:w}),e}(),m=function(){var e=function(){function e(){t(this,e)}return n(e,[{key:"getIframeFinereportData",value:function(e,n,t){return this.itemRxjsBehavior=new a.BehaviorSubject(null),this.itemRxjsBehavior.next(t),this.itemRxjsBehavior.asObservable().pipe((0,u.filter)(function(e){return null!==e}),(0,u.distinctUntilChanged)())}}]),e}();return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=o.\u0275\u0275defineInjectable({factory:function(){return new e},token:e,providedIn:w}),e}(),y=function(){var e=function(){function e(n,r,i,c,o,a,u){var f=this;t(this,e),this.sysReportRepository=n,this.dwLanguageService=r,this.dwIframeFinereportService=i,this.dwAppId=c,this.usingTab=o,this.configService=a,this.userService=u,this.configService.get("frUrl").subscribe(function(e){return f.frUrl=e})}return n(e,[{key:"finereportInfo",value:function(e,n){var t=this,r={};Object.keys(n).forEach(function(e){"dwMenuId"!==e&&(r[e]=n[e])});var i={url:"",type:"fineReport"},c=this.dwLanguageService.currentLanguage;return this.sysReportRepository.getReport(e).pipe((0,u.map)(function(e){var n={},i=e.data;if(Object.keys(r).forEach(function(e){n[e]=r[e]}),i){var o=i.fixparam?i.fixparam:[];n.viewlet=(i.from?i.from:"")+"/"+t.dwAppId+"/"+c+"/"+(i.name?i.name:""),i.code,o.forEach(function(e){n[e.name]=e.value})}return n.token=t.userService.getUser("token"),n}),(0,u.switchMap)(function(r){i.url=t.frUrl+"/digiwin/kanban/view/form";var o=0;return Object.keys(r).forEach(function(e){var n="&";0===o&&(n="?");var t=r[e].toString();t=t.replace("{{lang_code}}",c),i.url=i.url+n+e+"="+t,o+=1}),t.dwIframeFinereportService.getIframeFinereportData(e,n,i)}),(0,u.first)())}}]),e}();return e.\u0275fac=function(n){return new(n||e)(o.\u0275\u0275inject(j),o.\u0275\u0275inject(l.DwLanguageService),o.\u0275\u0275inject(m),o.\u0275\u0275inject(s.DW_APP_ID),o.\u0275\u0275inject(s.DW_USING_TAB),o.\u0275\u0275inject(s.DwSystemConfigService),o.\u0275\u0275inject(h.DwUserService))},e.\u0275prov=o.\u0275\u0275defineInjectable({factory:function(){return new e(o.\u0275\u0275inject(j),o.\u0275\u0275inject(l.DwLanguageService),o.\u0275\u0275inject(m),o.\u0275\u0275inject(s.DW_APP_ID),o.\u0275\u0275inject(s.DW_USING_TAB),o.\u0275\u0275inject(s.DwSystemConfigService),o.\u0275\u0275inject(h.DwUserService))},token:e,providedIn:w}),e}()}}])}();