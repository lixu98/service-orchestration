"use strict";(self.webpackChunkassc_crs=self.webpackChunkassc_crs||[]).push([[6540],{83925:function(e,t,n){n.r(t),n.d(t,{DwOrganizeTreeModalComponent:function(){return y},DwOrganizeTreeModalModule:function(){return b},DwOrganizeTreeModalService:function(){return T}});var i=n(42746),r=n(71049),s=n(83522),o=n(31441),d=n(40164),a=n(44558),l=n(55245),c=n(1020),h=n(29872),u=n(67280),g=n(85277),f=n(93761),m=n(96670),w=n(8852);const p=["treeCom"];function C(e,t){1&e&&(i.\u0275\u0275elementStart(0,"button",10),i.\u0275\u0275element(1,"i",11),i.\u0275\u0275elementEnd())}function v(e,t){if(1&e){const e=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"div",5),i.\u0275\u0275elementStart(1,"div",6),i.\u0275\u0275elementStart(2,"dw-input-group",7),i.\u0275\u0275elementStart(3,"input",8),i.\u0275\u0275listener("ngModelChange",function(t){return i.\u0275\u0275restoreView(e),i.\u0275\u0275nextContext().searchValue=t}),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(4,C,2,0,"ng-template",null,9,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()}if(2&e){const e=i.\u0275\u0275reference(5),t=i.\u0275\u0275nextContext();i.\u0275\u0275property("dwGutter",24),i.\u0275\u0275advance(1),i.\u0275\u0275property("dwSpan",24),i.\u0275\u0275advance(1),i.\u0275\u0275property("dwAddOnAfter",e),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngModel",t.searchValue)}}let y=(()=>{class e{constructor(e){this.dwOrganizeTreeService=e,this.subscription=new r.Subscription,this.defaultCheckedKeys=[],this.defaultSelectedKeys=[],this.defaultExpandedKeys=[],this.nodes=null,this._config=null}ngOnInit(){this._config={dataType:this.treeConfig.dataType,keyType:this.treeConfig.keyType,selectType:this.treeConfig.selectType,expandAll:this.treeConfig.expandAll,sortType:this.treeConfig.sortType},this.subscription.add(this.dwOrganizeTreeService.getOrganizeTree(this._config).subscribe(e=>{this.nodes=JSON.parse(JSON.stringify(e));const t=this.dwOrganizeTreeService.getKeys(this.selected);this.setDefaultValue(t),this.setExpandTreeNodes(),this.loaded()}))}ngOnDestroy(){this.subscription.unsubscribe()}expandChange(e){0===e.node.getChildren().length&&(e.node.isLeaf=!0),e.node.getChildren()}getSelectedValue(){const e=[];return this.treeConfig.checkable?this.treeCom.getCheckedNodeList().forEach(t=>{e.push(this.dwOrganizeTreeService.getNodeOriginValue(t.origin))}):this.treeCom.getSelectedNodeList().forEach(t=>{e.push(this.dwOrganizeTreeService.getNodeOriginValue(t.origin))}),e}reloadCache(){const e=this.dwOrganizeTreeService.getKeys(this.getSelectedValue());this.subscription.add(this.dwOrganizeTreeService.reloadCache(this._config).subscribe(t=>{this.nodes=JSON.parse(JSON.stringify(t)),this.setDefaultValue(e),this.setExpandTreeNodes(),this.loaded()}))}setDefaultValue(e){this.treeConfig.checkable?this.defaultCheckedKeys=e:this.defaultSelectedKeys=e}setExpandTreeNodes(){!this.treeConfig.expandAll&&null!==this.treeConfig.expandLevel&&this.treeConfig.expandLevel>=0&&setTimeout(()=>{this.dwOrganizeTreeService.setExpandTreeNodes(this.treeCom.getTreeNodes(),this.treeConfig.expandLevel)})}loaded(){setTimeout(()=>{this.treeConfig.loaded(this.treeCom.getTreeNodes())})}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(a.DwOrganizeTreeService))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["app-organize-tree-modal"]],viewQuery:function(e,t){if(1&e&&i.\u0275\u0275viewQuery(p,7),2&e){let e;i.\u0275\u0275queryRefresh(e=i.\u0275\u0275loadQuery())&&(t.treeCom=e.first)}},inputs:{treeConfig:"treeConfig",selected:"selected"},decls:6,vars:10,consts:[["dw-row","",3,"dwGutter",4,"ngIf"],["dwShowIcon","",1,"dw-organize-tree",3,"dwData","dwCheckable","dwMultiple","dwExpandAll","dwAsyncData","dwCheckedKeys","dwExpandedKeys","dwSelectedKeys","dwSearchValue","dwDataChange","dwExpandChange"],["treeCom",""],["dw-button","","dwType","primary",3,"click"],["translate",""],["dw-row","",3,"dwGutter"],["dw-col","",3,"dwSpan"],["dwSearch","",3,"dwAddOnAfter"],["type","text","dw-input","","placeholder","Search",3,"ngModel","ngModelChange"],["suffixSearch",""],["dw-button","","dwType","primary","dwSearch",""],["dw-icon","","dwType","search","dwTheme","outline"]],template:function(e,t){1&e&&(i.\u0275\u0275template(0,v,6,4,"div",0),i.\u0275\u0275elementStart(1,"dw-tree",1,2),i.\u0275\u0275listener("dwDataChange",function(e){return t.nodes=e})("dwExpandChange",function(e){return t.expandChange(e)}),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(3,"button",3),i.\u0275\u0275listener("click",function(){return t.reloadCache()}),i.\u0275\u0275elementStart(4,"span",4),i.\u0275\u0275text(5,"dw-organize-tree-modal-reload"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()),2&e&&(i.\u0275\u0275property("ngIf",t.treeConfig.enableSearch),i.\u0275\u0275advance(1),i.\u0275\u0275property("dwData",t.nodes)("dwCheckable",t.treeConfig.checkable)("dwMultiple",t.treeConfig.multiple)("dwExpandAll",t.treeConfig.expandAll)("dwAsyncData",!0)("dwCheckedKeys",t.defaultCheckedKeys)("dwExpandedKeys",t.defaultExpandedKeys)("dwSelectedKeys",t.defaultSelectedKeys)("dwSearchValue",t.searchValue))},directives:[l.NgIf,d.DwTreeComponent,f.DwButtonComponent,m.uG,w.u,s.TranslateDirective,h.DwRowDirective,h.DwColDirective,u.DwInputGroupComponent,u.DwInputDirective,c.DefaultValueAccessor,c.NgControlStatus,c.NgModel,g.DwIconDirective],styles:[""]}),e})(),T=(()=>{class e{constructor(e,t,n){this.dwModalService=e,this.translateService=t,this.openOrgTreeModalDefault=n}getDefaultConfig(){return{modalTitle:"dw-organize-tree-title",modalWidth:"80%",modalOkText:"dw-determine",modalCancelText:"dw-cancel",modalOnOk:()=>{},modalOnCancel:()=>{},modalAfterClose:()=>{},modalAfterOpen:()=>{},treeCheckable:!0,treeMultiple:!1,treeEnableSearch:!0,treeExpandAll:!0,treeExpandLevel:null,treeDataType:"full",treeKeyType:"id",treeSelectType:"full",treeSortType:"user",treeLoaded:e=>{}}}setEvents(){this.modalConfig.dwOnOk=e=>{const t=e.getSelectedValue();this.modalSubject.next(t),this.modalSubject.complete(),this.modalConfig.customOnOk()},this.modalConfig.dwOnCancel=e=>{this.modalSubject.complete(),this.modalConfig.customOnCancel()}}createModal(e){let t;const n=Object.assign({dwTitle:this.modalConfig.dwTitle,dwContent:y,dwFooter:[{label:this.modalConfig.dwCancelText,shape:"default",onClick(){t.triggerCancel()}},{label:this.modalConfig.dwOkText,type:"primary",onClick(){t.triggerOk()}}],dwComponentParams:{treeConfig:this.treeConfig,selected:e}},this.modalConfig);return t=this.dwModalService.create(n),t}setModalConfig(e){this.modalConfig=Object.assign({},{dwTitle:e.modalTitle,dwWidth:e.modalWidth,dwOkText:e.modalOkText,dwCancelText:e.modalCancelText,customOnOk:e.modalOnOk,customOnCancel:e.modalOnCancel,customAfterClose:e.modalAfterClose,customAfterOpen:e.modalAfterOpen})}setTreeConfig(e){this.treeConfig=Object.assign({},{checkable:e.treeCheckable,multiple:e.treeMultiple,enableSearch:e.treeEnableSearch,expandAll:e.treeExpandAll,expandLevel:e.treeExpandLevel,dataType:e.treeDataType,keyType:e.treeKeyType,selectType:e.treeSelectType,loaded:e.treeLoaded,sortType:e.treeSortType})}setConfig(e){const t=this.getDefaultConfig(),n=Object.assign(Object.assign(Object.assign({},t),this.openOrgTreeModalDefault),e);this.setModalConfig(n),this.setTreeConfig(n)}translateConfig(){this.modalConfig.dwTitle=this.translateService.instant(this.modalConfig.dwTitle),this.modalConfig.dwOkText=this.translateService.instant(this.modalConfig.dwOkText),this.modalConfig.dwCancelText=this.translateService.instant(this.modalConfig.dwCancelText)}open(e,t={}){this.modalSubject=new r.Subject,this.setConfig(t),this.translateConfig(),this.setEvents();const n=this.createModal(e);return n.afterClose.subscribe(()=>{this.modalConfig.customAfterClose()}),n.afterOpen.subscribe(()=>{this.modalConfig.customAfterOpen()}),this.modalSubject.asObservable()}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(o.DwModalService),i.\u0275\u0275inject(s.TranslateService),i.\u0275\u0275inject(a.DW_ORGTREE_MODAL_DEFAULT))},e.\u0275prov=i.\u0275\u0275defineInjectable({factory:function(){return new e(i.\u0275\u0275inject(o.DwModalService),i.\u0275\u0275inject(s.TranslateService),i.\u0275\u0275inject(a.DW_ORGTREE_MODAL_DEFAULT))},token:e,providedIn:"root"}),e})(),b=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[l.CommonModule,c.FormsModule,d.DwTreeModule,h.DwGridModule,u.DwInputModule,g.DwIconModule,f.DwButtonModule,s.TranslateModule]]}),e})()},8852:function(e,t,n){n.d(t,{u:function(){return s},f:function(){return o}});var i=n(36535),r=n(42746);let s=(()=>{class e{constructor(e,t){this.elementRef=e,this.renderer=t,this.hidden=null,this.renderer.setAttribute(this.elementRef.nativeElement,"hidden","")}setHiddenAttribute(){this.hidden?this.renderer.setAttribute(this.elementRef.nativeElement,"hidden","string"==typeof this.hidden?this.hidden:""):this.renderer.removeAttribute(this.elementRef.nativeElement,"hidden")}ngOnChanges(){this.setHiddenAttribute()}ngAfterViewInit(){this.setHiddenAttribute()}}return e.\u0275fac=function(t){return new(t||e)(r.\u0275\u0275directiveInject(r.ElementRef),r.\u0275\u0275directiveInject(r.Renderer2))},e.\u0275dir=r.\u0275\u0275defineDirective({type:e,selectors:[["","dw-button",""],["dw-button-group"],["","dw-icon",""],["","dw-menu-item",""],["","dw-submenu",""],["dw-select-top-control"],["dw-select-placeholder"],["dw-input-group"]],inputs:{hidden:"hidden"},features:[r.\u0275\u0275NgOnChangesFeature]}),e})(),o=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=r.\u0275\u0275defineInjector({imports:[[i.PlatformModule]]}),e})()},96670:function(e,t,n){n.d(t,{uG:function(){return l},ln:function(){return c}});var i=n(36535),r=n(42746),s=n(88065);class o{constructor(e,t,n,r){this.triggerElement=e,this.ngZone=t,this.insertExtraNode=n,this.platformId=r,this.waveTransitionDuration=400,this.styleForPseudo=null,this.extraNode=null,this.lastTime=0,this.onClick=e=>{!this.triggerElement||!this.triggerElement.getAttribute||this.triggerElement.getAttribute("disabled")||"INPUT"===e.target.tagName||this.triggerElement.className.indexOf("disabled")>=0||this.fadeOutWave()},this.platform=new i.Platform(this.platformId),this.clickHandler=this.onClick.bind(this),this.bindTriggerEvent()}get waveAttributeName(){return this.insertExtraNode?"ant-click-animating":"ant-click-animating-without-extra-node"}bindTriggerEvent(){this.platform.isBrowser&&this.ngZone.runOutsideAngular(()=>{this.removeTriggerEvent(),this.triggerElement&&this.triggerElement.addEventListener("click",this.clickHandler,!0)})}removeTriggerEvent(){this.triggerElement&&this.triggerElement.removeEventListener("click",this.clickHandler,!0)}removeStyleAndExtraNode(){this.styleForPseudo&&document.body.contains(this.styleForPseudo)&&(document.body.removeChild(this.styleForPseudo),this.styleForPseudo=null),this.insertExtraNode&&this.triggerElement.contains(this.extraNode)&&this.triggerElement.removeChild(this.extraNode)}destroy(){this.removeTriggerEvent(),this.removeStyleAndExtraNode()}fadeOutWave(){const e=this.triggerElement,t=this.getWaveColor(e);e.setAttribute(this.waveAttributeName,"true"),!(Date.now()<this.lastTime+this.waveTransitionDuration)&&(this.isValidColor(t)&&(this.styleForPseudo||(this.styleForPseudo=document.createElement("style")),this.styleForPseudo.innerHTML=`\n      [ant-click-animating-without-extra-node='true']::after, .ant-click-animating-node {\n        --antd-wave-shadow-color: ${t};\n      }`,document.body.appendChild(this.styleForPseudo)),this.insertExtraNode&&(this.extraNode||(this.extraNode=document.createElement("div")),this.extraNode.className="ant-click-animating-node",e.appendChild(this.extraNode)),this.lastTime=Date.now(),this.runTimeoutOutsideZone(()=>{e.removeAttribute(this.waveAttributeName),this.removeStyleAndExtraNode()},this.waveTransitionDuration))}isValidColor(e){return!!e&&"#ffffff"!==e&&"rgb(255, 255, 255)"!==e&&this.isNotGrey(e)&&!/rgba\(\d*, \d*, \d*, 0\)/.test(e)&&"transparent"!==e}isNotGrey(e){const t=e.match(/rgba?\((\d*), (\d*), (\d*)(, [\.\d]*)?\)/);return!(t&&t[1]&&t[2]&&t[3]&&t[1]===t[2]&&t[2]===t[3])}getWaveColor(e){const t=getComputedStyle(e);return t.getPropertyValue("border-top-color")||t.getPropertyValue("border-color")||t.getPropertyValue("background-color")}runTimeoutOutsideZone(e,t){this.ngZone.runOutsideAngular(()=>setTimeout(e,t))}}const d={disabled:!1},a=new r.InjectionToken("dw-wave-global-options",{providedIn:"root",factory:function(){return d}});let l=(()=>{class e{constructor(e,t,n,i,r){this.ngZone=e,this.elementRef=t,this.config=n,this.animationType=i,this.platformId=r,this.dwWaveExtraNode=!1,this.waveDisabled=!1,this.waveDisabled=this.isConfigDisabled()}get disabled(){return this.waveDisabled}get rendererRef(){return this.waveRenderer}isConfigDisabled(){let e=!1;return this.config&&"boolean"==typeof this.config.disabled&&(e=this.config.disabled),"NoopAnimations"===this.animationType&&(e=!0),e}ngOnDestroy(){this.waveRenderer&&this.waveRenderer.destroy()}ngOnInit(){this.renderWaveIfEnabled()}renderWaveIfEnabled(){!this.waveDisabled&&this.elementRef.nativeElement&&(this.waveRenderer=new o(this.elementRef.nativeElement,this.ngZone,this.dwWaveExtraNode,this.platformId))}disable(){this.waveDisabled=!0,this.waveRenderer&&(this.waveRenderer.removeTriggerEvent(),this.waveRenderer.removeStyleAndExtraNode())}enable(){this.waveDisabled=this.isConfigDisabled()||!1,this.waveRenderer&&this.waveRenderer.bindTriggerEvent()}}return e.\u0275fac=function(t){return new(t||e)(r.\u0275\u0275directiveInject(r.NgZone),r.\u0275\u0275directiveInject(r.ElementRef),r.\u0275\u0275directiveInject(a,8),r.\u0275\u0275directiveInject(s.ANIMATION_MODULE_TYPE,8),r.\u0275\u0275directiveInject(r.PLATFORM_ID))},e.\u0275dir=r.\u0275\u0275defineDirective({type:e,selectors:[["","dw-wave",""],["button","dw-button","",3,"dwType","link",3,"dwType","text"]],inputs:{dwWaveExtraNode:"dwWaveExtraNode"},exportAs:["dwWave"]}),e})(),c=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=r.\u0275\u0275defineInjector({imports:[[i.PlatformModule]]}),e})()}}]);