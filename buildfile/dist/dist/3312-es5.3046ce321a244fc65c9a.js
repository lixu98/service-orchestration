!function(){"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function n(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}(self.webpackChunkassc_crs=self.webpackChunkassc_crs||[]).push([[3312],{98471:function(e,i,s){s.r(i),s.d(i,{DwDivMaskComponent:function(){return g},DwDivMaskModule:function(){return p},DwLoadMaskOptionsService:function(){return h},DwLoadMaskService:function(){return k}});var o,r=s(42746),a=s(87974),c=s(47372),u=s(55245),l=s(30469),f=s(24540),v=s(52575),d=["maskDiv"],g=((o=function(){function e(n,i,s,o){t(this,e),this.router=n,this.elem=i,this._usingTab=s,this.doc=o,this._maskTriggers=[]}return n(e,[{key:"targetDiv",get:function(){return this._targetDiv},set:function(t){this._targetDiv=t}},{key:"maskTriggers",get:function(){return this._maskTriggers},set:function(t){this._maskTriggers=t}},{key:"showMask",get:function(){return this._showMask},set:function(t){var e=this;this._showMask=t,this.menuFlod=this.doc.querySelector(".anticon-menu-fold"),this.menuUnFlod=this.doc.querySelector(".anticon-menu-unfold"),this.tabWrap=this.doc.querySelector(".ant-tabs-nav-wrap"),t?setTimeout(function(){var t=e.maskDiv.nativeElement,n=e.targetDiv;t.style.width=n.offsetWidth+"px",t.style.height=n.offsetHeight+"px",t.style.top=n.getBoundingClientRect().top+n.scrollTop+"px",t.style.left=n.getBoundingClientRect().left+n.scrollLeft+"px",window.addEventListener("scroll",e.onScrollFn,!0),e.tabWrap&&e.tabWrap.addEventListener("click",e.onDocClickFn,!0),e._maskTriggers.forEach(function(t){t.addEventListener("click",e.onDocClickFn,!0)})},0):(window.removeEventListener("scroll",this.onScrollFn,!0),this.tabWrap&&this.tabWrap.removeEventListener("click",this.onDocClickFn,!0),this._maskTriggers.forEach(function(t){t.removeEventListener("click",e.onDocClickFn,!0)}))}},{key:"onResize",value:function(t){this._resizing||this.adjustMask(600)}},{key:"onScroll",value:function(){if(this.showMask){var t=this.maskDiv.nativeElement,e=this.targetDiv;t.style.top=e.getBoundingClientRect().top+e.scrollTop+"px",t.style.left=e.getBoundingClientRect().left+e.scrollLeft+"px"}}},{key:"onDocClick",value:function(){this.showMask&&(this.maskDiv.nativeElement.style.height="0px",this.adjustMask(500))}},{key:"adjustMask",value:function(t){var e=this;this._resizing=!0,setTimeout(function(){var t=e.maskDiv.nativeElement,n=e.targetDiv;n&&e.showMask&&(t.style.top=n.getBoundingClientRect().top+n.scrollTop+"px",t.style.left=n.getBoundingClientRect().left+n.scrollLeft+"px",t.style.width=n.offsetWidth+"px",t.style.height=n.offsetHeight+"px",e._resizing=!1)},t)}},{key:"ngAfterViewInit",value:function(){}},{key:"ngOnDestroy",value:function(){console.log("destory"),this.routeSub.unsubscribe()}},{key:"ngOnInit",value:function(){var t=this;this.onScrollFn=this.onScroll.bind(this),this.onDocClickFn=this.onDocClick.bind(this),this.routeSub=this.router.events.subscribe(function(e){e instanceof a.NavigationStart&&(console.log("NavigationStart"),window.removeEventListener("scroll",t.onScrollFn,!0),t.tabWrap&&t.tabWrap.removeEventListener("click",t.onDocClickFn,!0),t._maskTriggers.forEach(function(e){e.removeEventListener("click",t.onDocClickFn,!0)}),t.routeSub&&t.routeSub.unsubscribe())}),this._usingTab&&(this.routeSub2=this.router.events.pipe((0,c.filter)(function(t){return t instanceof a.NavigationEnd}),(0,c.distinct)(function(t){return t})).subscribe(function(e){t.showMask=t.showMask,t.routeSub2&&t.routeSub2.unsubscribe()}))}}]),e}()).\u0275fac=function(t){return new(t||o)(r.\u0275\u0275directiveInject(a.Router),r.\u0275\u0275directiveInject(r.ElementRef),r.\u0275\u0275directiveInject(l.DW_USING_TAB),r.\u0275\u0275directiveInject(u.DOCUMENT))},o.\u0275cmp=r.\u0275\u0275defineComponent({type:o,selectors:[["dw-div-mask"]],viewQuery:function(t,e){var n;1&t&&r.\u0275\u0275viewQuery(d,7),2&t&&r.\u0275\u0275queryRefresh(n=r.\u0275\u0275loadQuery())&&(e.maskDiv=n.first)},hostBindings:function(t,e){1&t&&r.\u0275\u0275listener("resize",function(t){return e.onResize(t)},!1,r.\u0275\u0275resolveWindow)},inputs:{targetDiv:"targetDiv",maskTriggers:"maskTriggers",showMask:"showMask",customStyle:"customStyle"},decls:2,vars:3,consts:[[1,"dwDivMask",3,"ngStyle"],["maskDiv",""]],template:function(t,e){1&t&&r.\u0275\u0275element(0,"div",0,1),2&t&&(r.\u0275\u0275styleProp("display",e.showMask?"block":"none"),r.\u0275\u0275property("ngStyle",e.customStyle))},directives:[u.NgStyle],styles:[""]}),o),h=function(){var e=function(){function e(n){t(this,e),this.dwLoadingMaskService=n}return n(e,[{key:"setLoadMaskCfg",value:function(t,e,n,i){var s=Object.assign({},t),o=this.getUiOptions(s),r=this.dwLoadingMaskService.nullConfig();return o?o.hasOwnProperty("loadMaskCfg")||(s.uiOptions.loadMaskCfg=r):s.uiOptions={loadMaskCfg:r},null!=e&&(s.uiOptions.loadMaskCfg.spinning=e),null!=n&&(s.uiOptions.loadMaskCfg.delay=n),null!=i&&(s.uiOptions.loadMaskCfg.tip=i),s}},{key:"getUiOptions",value:function(t){var e=null;return t&&t.hasOwnProperty("uiOptions")&&(e=t.uiOptions),e}},{key:"getLoadingMaskCfg",value:function(t){var e=this.dwLoadingMaskService.nullConfig();if(t&&t.hasOwnProperty("loadMaskCfg")){var n=t.loadMaskCfg;n.hasOwnProperty("spinning")&&(e.spinning=n.spinning),n.hasOwnProperty("delay")&&(e.delay=n.delay),n.hasOwnProperty("tip")&&(e.tip=n.tip)}return e}}]),e}();return e.\u0275fac=function(t){return new(t||e)(r.\u0275\u0275inject(f.DwLoadingMaskService))},e.\u0275prov=r.\u0275\u0275defineInjectable({factory:function(){return new e(r.\u0275\u0275inject(f.DwLoadingMaskService))},token:e,providedIn:"root"}),e}(),k=function(){var e=function(){function e(n,i){t(this,e),this.dwHttpClientOptionsService=n,this.dwLoadingMaskService=i}return n(e,[{key:"showMask",value:function(t){var e=this.dwHttpClientOptionsService.getUiOptions(t),n=this.dwHttpClientOptionsService.getLoadingMaskCfg(e);return this.dwLoadingMaskService.auto(n.spinning,n.delay,n.tip)}},{key:"hideMask",value:function(t){!t||this.dwLoadingMaskService.hide(t)}},{key:"clear",value:function(){this.dwLoadingMaskService.clear()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(r.\u0275\u0275inject(h),r.\u0275\u0275inject(f.DwLoadingMaskService))},e.\u0275prov=r.\u0275\u0275defineInjectable({factory:function(){return new e(r.\u0275\u0275inject(h),r.\u0275\u0275inject(f.DwLoadingMaskService))},token:e,providedIn:"root"}),e}(),p=function(){var e=n(function e(){t(this,e)});return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=r.\u0275\u0275defineInjector({providers:[k,{provide:v.DwHttpLoadMaskService,useExisting:k},h,{provide:v.DwHttpClientOptionsService,useExisting:h}],imports:[[u.CommonModule]]}),e}()}}])}();