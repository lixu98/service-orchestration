!function(){"use strict";function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function t(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(self.webpackChunkassc_crs=self.webpackChunkassc_crs||[]).push([[7921],{51270:function(e,r,i){i.r(r),i.d(r,{DwSsoButtonComponent:function(){return C},DwSsoLoginComponent:function(){return k},DwSsoLoginModule:function(){return M},"\u0275a":function(){return b},"\u0275b":function(){return P}});var o=i(42746),s=i(55245),a=i(83522),c=i(87974),u=i(71049),l=i(47372),d=i(31441),f=i(30469),v=i(32245),w=i(32276),h=i(68521),g=i(12146),p=i(44720),m=i(52161),S=i(85835);function y(e,t){1&e&&(o.\u0275\u0275elementStart(0,"p"),o.\u0275\u0275text(1),o.\u0275\u0275pipe(2,"translate"),o.\u0275\u0275elementEnd()),2&e&&(o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate1(" ",o.\u0275\u0275pipeBind1(2,1,"dw-login-signIn")," ...\n"))}var I,b=c.RouterModule.forChild([]),P=((I=t(function e(){n(this,e)})).\u0275fac=function(e){return new(e||I)},I.\u0275mod=o.\u0275\u0275defineNgModule({type:I}),I.\u0275inj=o.\u0275\u0275defineInjector({imports:[[b],c.RouterModule]}),I),k=function(){var e=function(){function e(t,r,i,o,s,a,c,l,d,f,v){n(this,e),this.router=t,this.activateRoute=r,this.languageService=i,this.authService=o,this.dwModalService=s,this.dwProgramExecuteService=a,this.issoLogins=c,this._usingTab=l,this.translateService=d,this.dwChangePasswordInfoService=f,this.dwUpdatePasswordModalService=v,this.showMessage=!0,this.subscription=new u.Subscription}return t(e,[{key:"ngOnInit",value:function(){var e=this;this.activateRoute.queryParamMap.subscribe(function(t){(0,u.from)(e.issoLogins).pipe((0,l.map)(function(e){var n=e.ssoLogin(t);return n instanceof u.Observable?n:(0,u.of)(n)}),(0,l.mergeAll)(),(0,l.reduce)(function(e,t){return e||t},!1)).subscribe(function(n){if(n){var r=t.get("dwProgramId"),i=t.get("routerLink")||"",o=t.get("dwLang")||"",s=e.filterParams(t);if(o&&e.languageService.setUp(o),r)e.showMessage=!1,e.dwProgramExecuteService.byId(r,s);else{var a=e._getUrlQueryParams(s);a&&(i=i+"?"+a),e.showMessage=!1,e.loginedForwardUrl(i)}}else e.authService.logout()},function(t){var n=!1;t.hasOwnProperty("error")&&t.error.hasOwnProperty("errorMessage")&&t.error.errorMessage&&(n=!0,e.dwModalService.error({dwContent:t.error.errorMessage}).afterClose.subscribe(function(t){e.authService.logout()})),n||e.authService.logout()})})}},{key:"ngAfterViewInit",value:function(){var e=this;this.subscription.add(this.dwChangePasswordInfoService.openChangePasswordModal$.subscribe(function(t){e.dwModalService.create({dwTitle:e.translateService.instant("dw-default-pw-change-title"),dwClosable:!1,dwMaskClosable:!1,dwFooter:null,dwOnOk:function(){e.dwUpdatePasswordModalService.open({modalOnCancel:function(){e.dwChangePasswordInfoService.notActiveChangedStatus()}}).subscribe(function(t){e.dwChangePasswordInfoService.activeChangedStatus()})},dwContent:m.DwChangeDefaultPasswordInfoComponent})}))}},{key:"ngOnDestroy",value:function(){this.subscription.unsubscribe()}},{key:"filterParams",value:function(e){var t,n={};return e.keys.forEach(function(r){switch(r){case"routerLink":case"userToken":case"dwLang":break;default:t=e.getAll(r),n[r]=t&&t.length>1?t:e.get(r)}}),(0,c.convertToParamMap)(n)}},{key:"loginedForwardUrl",value:function(e){null!==e&&""!==e&&"/"!==e?this.router.navigateByUrl(e):this.dwProgramExecuteService.goHome()}},{key:"_getUrlQueryParams",value:function(e){var t="",n=[];return e.keys.forEach(function(t){e.getAll(t).forEach(function(e){n.push({key:t,value:e})})}),0===n.length||(t=n.map(function(e){return encodeURIComponent(e.key)+"="+encodeURIComponent(e.value)}).join("&")),t}}]),e}();return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(c.Router),o.\u0275\u0275directiveInject(c.ActivatedRoute),o.\u0275\u0275directiveInject(v.DwLanguageService),o.\u0275\u0275directiveInject(w.DwAuthService),o.\u0275\u0275directiveInject(d.DwModalService),o.\u0275\u0275directiveInject(h.DwProgramExecuteService),o.\u0275\u0275directiveInject(f.DW_SSO_LOGIN),o.\u0275\u0275directiveInject(f.DW_USING_TAB),o.\u0275\u0275directiveInject(a.TranslateService),o.\u0275\u0275directiveInject(g.DwChangePasswordInfoService),o.\u0275\u0275directiveInject(p.DwUpdatePasswordModalService))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["app-sso-login"]],decls:1,vars:1,consts:[[4,"ngIf"]],template:function(e,t){1&e&&o.\u0275\u0275template(0,y,3,3,"p",0),2&e&&o.\u0275\u0275property("ngIf",t.showMessage)},directives:[s.NgIf],pipes:[a.TranslatePipe],styles:[""]}),e}(),C=function(){var e=function(){function e(t){n(this,e),this.ssoService=t}return t(e,[{key:"url",get:function(){return this._url},set:function(e){this._url=e}},{key:"text",get:function(){return this._text},set:function(e){this._text=e}},{key:"newWin",get:function(){return this._newWin},set:function(e){this._newWin="string"==typeof e?JSON.parse(e):e}},{key:"redirectUrl",value:function(){this.ssoService.redirectUrl(this.url,this.newWin,this.otherParams)}},{key:"ngOnInit",value:function(){}}]),e}();return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(S.DwSsoService))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["app-sso-button"]],inputs:{url:"url",text:"text",newWin:"newWin",otherParams:"otherParams"},decls:3,vars:1,consts:[[1,"sso-link"],[3,"click"]],template:function(e,t){1&e&&(o.\u0275\u0275elementStart(0,"div",0),o.\u0275\u0275elementStart(1,"a",1),o.\u0275\u0275listener("click",function(){return t.redirectUrl()}),o.\u0275\u0275text(2),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()),2&e&&(o.\u0275\u0275advance(2),o.\u0275\u0275textInterpolate(t.text))},styles:[""]}),e}(),M=function(){var e=t(function e(){n(this,e)});return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=o.\u0275\u0275defineInjector({imports:[[s.CommonModule,a.TranslateModule,P,m.DwChangeDefaultPasswordInfoModule]]}),e}()}}])}();