!function(){"use strict";function e(t,n){return(e=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(t,n)}function t(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var i,o=r(e);if(t){var u=r(this).constructor;i=Reflect.construct(o,arguments,u)}else i=o.apply(this,arguments);return n(this,i)}}function n(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function r(e){return(r=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(self.webpackChunkassc_crs=self.webpackChunkassc_crs||[]).push([[7661,5327],{87661:function(n,r,i){i.r(r),i.d(r,{DwTenantService:function(){return b},DwUserModule:function(){return v},DwUserService:function(){return y},DwUserStorage:function(){return p}});var s,c=i(62481),a=i(42746),f=i(55245),l=i(71049),h=i(47372),v=((s=o(function e(){u(this,e)})).\u0275fac=function(e){return new(e||s)},s.\u0275mod=a.\u0275\u0275defineNgModule({type:s}),s.\u0275inj=a.\u0275\u0275defineInjector({imports:[[f.CommonModule]]}),s),p=function(){var n,r=function(n){!function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),n&&e(t,n)}(i,n);var r=t(i);function i(){return u(this,i),r.apply(this,arguments)}return o(i)}(c.SessionStorage);return r.\u0275fac=function(e){return(n||(n=a.\u0275\u0275getInheritedFactory(r)))(e||r)},r.\u0275prov=a.\u0275\u0275defineInjectable({factory:function(){return new r},token:r,providedIn:v}),r}(),y=function(){var e=function(){function e(t){u(this,e),this.userStorage=t,this.userInfo={};var n=this.userStorage.get("DwUserInfo");n&&(this.userInfo=JSON.parse(n))}return o(e,[{key:"currTenantList$",get:function(){return console.error("\u8acb\u6ce8\u610f\uff1aDwTenantService.currTenantList$ \u53d6\u4ee3 DwUserService.currTenantList$"),null}},{key:"setUser",value:function(e){!e.id||(this.userInfo[e.id]=e.value,this.userStorage.set("DwUserInfo",JSON.stringify(this.userInfo)))}},{key:"getUser",value:function(e){if(e)return this.userInfo[e]}},{key:"getUserDetail",value:function(){return console.error("getUserInfo() \u53d6\u4ee3 getUserDetail()"),this.userInfo}},{key:"clearUser",value:function(){this.userStorage.remove("DwUserInfo"),this.userInfo={}}},{key:"read",value:function(e){var t=e||this.getUser("userId"),n={success:!0,description:"",userInfo:null},r={userId:t,userName:t};return n.userInfo=r,this.setUserInfo(r),l.Observable.create(function(e){e.next(n),e.complete()})}},{key:"setUserInfo",value:function(e){for(var t=0,n=Object.keys(e);t<n.length;t++){var r=n[t];this.setUser({id:r,value:e[r]})}}},{key:"getTenantList",value:function(){return console.error("\u8acb\u6ce8\u610f\uff1aDwTenantService.getTenants() \u53d6\u4ee3 DwUserService.getTenantList()"),new l.Observable(function(e){e.next([]),e.complete()})}},{key:"getUserInfo",value:function(e){return this.userInfo}},{key:"setTenantList",value:function(e){console.error("\u8acb\u6ce8\u610f\uff1aDwTenantService.setTenantList() \u53d6\u4ee3 DwUserService.setTenantList()")}}]),e}();return e.\u0275fac=function(t){return new(t||e)(a.\u0275\u0275inject(p))},e.\u0275prov=a.\u0275\u0275defineInjectable({factory:function(){return new e(a.\u0275\u0275inject(p))},token:e,providedIn:v}),e}(),b=function(){var e=function(){function e(t){u(this,e),this.userService=t,this.tokenValid="boolean"==typeof this.userService.getUser("isLoggedin")?this.userService.getUser("isLoggedin"):null,this.currTenantList=this.userService.getUser("currTenantList")?this.userService.getUser("currTenantList"):[],this.tenantInfoRefresh$=new l.Subject,this.tokenValidSubject=new l.BehaviorSubject(this.tokenValid),this.tenantSubject=new l.BehaviorSubject(this.currTenantList)}return o(e,[{key:"isTokenValid$",get:function(){return this.tokenValidSubject.asObservable().pipe((0,h.filter)(function(e){return null!==e}))}},{key:"currTenantList$",get:function(){return this.tenantSubject}},{key:"getTenants",value:function(){var e=this;return new l.Observable(function(t){e.setTenantList([]),t.next(!0),t.complete()})}},{key:"getTenantList",value:function(){return this.userService.getUser("currTenantList")}},{key:"setTenantList",value:function(e){this.userService.setUserInfo({currTenantList:e}),this.currTenantList=e,this.tenantSubject.next(e)}},{key:"setTokenValid",value:function(e){this.tokenValid=e,this.tokenValidSubject.next(this.tokenValid)}},{key:"tokenRefreshTenant",value:function(e){var t=this;return new l.Observable(function(e){t.setTokenValid(!0),t.tenantInfoRefresh$.next({}),e.next(!0),e.complete()})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(a.\u0275\u0275inject(y))},e.\u0275prov=a.\u0275\u0275defineInjectable({factory:function(){return new e(a.\u0275\u0275inject(y))},token:e,providedIn:v}),e}()}}])}();