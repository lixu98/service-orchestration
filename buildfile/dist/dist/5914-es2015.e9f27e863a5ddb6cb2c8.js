"use strict";(self.webpackChunkassc_crs=self.webpackChunkassc_crs||[]).push([[5914],{8852:function(e,t,n){n.d(t,{u:function(){return i},f:function(){return s}});var a=n(36535),r=n(42746);let i=(()=>{class e{constructor(e,t){this.elementRef=e,this.renderer=t,this.hidden=null,this.renderer.setAttribute(this.elementRef.nativeElement,"hidden","")}setHiddenAttribute(){this.hidden?this.renderer.setAttribute(this.elementRef.nativeElement,"hidden","string"==typeof this.hidden?this.hidden:""):this.renderer.removeAttribute(this.elementRef.nativeElement,"hidden")}ngOnChanges(){this.setHiddenAttribute()}ngAfterViewInit(){this.setHiddenAttribute()}}return e.\u0275fac=function(t){return new(t||e)(r.\u0275\u0275directiveInject(r.ElementRef),r.\u0275\u0275directiveInject(r.Renderer2))},e.\u0275dir=r.\u0275\u0275defineDirective({type:e,selectors:[["","dw-button",""],["dw-button-group"],["","dw-icon",""],["","dw-menu-item",""],["","dw-submenu",""],["dw-select-top-control"],["dw-select-placeholder"],["dw-input-group"]],inputs:{hidden:"hidden"},features:[r.\u0275\u0275NgOnChangesFeature]}),e})(),s=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=r.\u0275\u0275defineInjector({imports:[[a.PlatformModule]]}),e})()},96670:function(e,t,n){n.d(t,{uG:function(){return l},ln:function(){return c}});var a=n(36535),r=n(42746),i=n(88065);class s{constructor(e,t,n,r){this.triggerElement=e,this.ngZone=t,this.insertExtraNode=n,this.platformId=r,this.waveTransitionDuration=400,this.styleForPseudo=null,this.extraNode=null,this.lastTime=0,this.onClick=e=>{!this.triggerElement||!this.triggerElement.getAttribute||this.triggerElement.getAttribute("disabled")||"INPUT"===e.target.tagName||this.triggerElement.className.indexOf("disabled")>=0||this.fadeOutWave()},this.platform=new a.Platform(this.platformId),this.clickHandler=this.onClick.bind(this),this.bindTriggerEvent()}get waveAttributeName(){return this.insertExtraNode?"ant-click-animating":"ant-click-animating-without-extra-node"}bindTriggerEvent(){this.platform.isBrowser&&this.ngZone.runOutsideAngular(()=>{this.removeTriggerEvent(),this.triggerElement&&this.triggerElement.addEventListener("click",this.clickHandler,!0)})}removeTriggerEvent(){this.triggerElement&&this.triggerElement.removeEventListener("click",this.clickHandler,!0)}removeStyleAndExtraNode(){this.styleForPseudo&&document.body.contains(this.styleForPseudo)&&(document.body.removeChild(this.styleForPseudo),this.styleForPseudo=null),this.insertExtraNode&&this.triggerElement.contains(this.extraNode)&&this.triggerElement.removeChild(this.extraNode)}destroy(){this.removeTriggerEvent(),this.removeStyleAndExtraNode()}fadeOutWave(){const e=this.triggerElement,t=this.getWaveColor(e);e.setAttribute(this.waveAttributeName,"true"),!(Date.now()<this.lastTime+this.waveTransitionDuration)&&(this.isValidColor(t)&&(this.styleForPseudo||(this.styleForPseudo=document.createElement("style")),this.styleForPseudo.innerHTML=`\n      [ant-click-animating-without-extra-node='true']::after, .ant-click-animating-node {\n        --antd-wave-shadow-color: ${t};\n      }`,document.body.appendChild(this.styleForPseudo)),this.insertExtraNode&&(this.extraNode||(this.extraNode=document.createElement("div")),this.extraNode.className="ant-click-animating-node",e.appendChild(this.extraNode)),this.lastTime=Date.now(),this.runTimeoutOutsideZone(()=>{e.removeAttribute(this.waveAttributeName),this.removeStyleAndExtraNode()},this.waveTransitionDuration))}isValidColor(e){return!!e&&"#ffffff"!==e&&"rgb(255, 255, 255)"!==e&&this.isNotGrey(e)&&!/rgba\(\d*, \d*, \d*, 0\)/.test(e)&&"transparent"!==e}isNotGrey(e){const t=e.match(/rgba?\((\d*), (\d*), (\d*)(, [\.\d]*)?\)/);return!(t&&t[1]&&t[2]&&t[3]&&t[1]===t[2]&&t[2]===t[3])}getWaveColor(e){const t=getComputedStyle(e);return t.getPropertyValue("border-top-color")||t.getPropertyValue("border-color")||t.getPropertyValue("background-color")}runTimeoutOutsideZone(e,t){this.ngZone.runOutsideAngular(()=>setTimeout(e,t))}}const o={disabled:!1},d=new r.InjectionToken("dw-wave-global-options",{providedIn:"root",factory:function(){return o}});let l=(()=>{class e{constructor(e,t,n,a,r){this.ngZone=e,this.elementRef=t,this.config=n,this.animationType=a,this.platformId=r,this.dwWaveExtraNode=!1,this.waveDisabled=!1,this.waveDisabled=this.isConfigDisabled()}get disabled(){return this.waveDisabled}get rendererRef(){return this.waveRenderer}isConfigDisabled(){let e=!1;return this.config&&"boolean"==typeof this.config.disabled&&(e=this.config.disabled),"NoopAnimations"===this.animationType&&(e=!0),e}ngOnDestroy(){this.waveRenderer&&this.waveRenderer.destroy()}ngOnInit(){this.renderWaveIfEnabled()}renderWaveIfEnabled(){!this.waveDisabled&&this.elementRef.nativeElement&&(this.waveRenderer=new s(this.elementRef.nativeElement,this.ngZone,this.dwWaveExtraNode,this.platformId))}disable(){this.waveDisabled=!0,this.waveRenderer&&(this.waveRenderer.removeTriggerEvent(),this.waveRenderer.removeStyleAndExtraNode())}enable(){this.waveDisabled=this.isConfigDisabled()||!1,this.waveRenderer&&this.waveRenderer.bindTriggerEvent()}}return e.\u0275fac=function(t){return new(t||e)(r.\u0275\u0275directiveInject(r.NgZone),r.\u0275\u0275directiveInject(r.ElementRef),r.\u0275\u0275directiveInject(d,8),r.\u0275\u0275directiveInject(i.ANIMATION_MODULE_TYPE,8),r.\u0275\u0275directiveInject(r.PLATFORM_ID))},e.\u0275dir=r.\u0275\u0275defineDirective({type:e,selectors:[["","dw-wave",""],["button","dw-button","",3,"dwType","link",3,"dwType","text"]],inputs:{dwWaveExtraNode:"dwWaveExtraNode"},exportAs:["dwWave"]}),e})(),c=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=r.\u0275\u0275defineInjector({imports:[[a.PlatformModule]]}),e})()},55914:function(e,t,n){n.r(t),n.d(t,{EngineerAttendanceStatisticsModule:function(){return ee}});var a=n(55245),r=n(87974),i=n(32276),s=n(42746);let o=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.\u0275\u0275defineComponent({type:e,selectors:[["app-engineer-attendance-statistics"]],decls:1,vars:0,template:function(e,t){1&e&&s.\u0275\u0275element(0,"router-outlet")},directives:[r.RouterOutlet],styles:[""]}),e})();var d=n(83237),l=n(1020),c=n(51156);let m=(()=>{class e{constructor(e,t){this.dapHttp=e,this.datePipe=t}getList(e){const t=encodeURIComponent(JSON.stringify(e));return this.dapHttp.get(`restful/service/employee/Employee/EngineerAttendanceSummaryList?params=${t}`)}getListDetail(e){const t=encodeURIComponent(JSON.stringify(e));return this.dapHttp.get(`restful/service/employee/Employee/EngineerAttendanceDetailsList?params=${t}`)}getCurrentServiceSiteInfo(){return this.dapHttp.get("restful/service/serviceSite/ServiceSite/UserSite")}getDataGroupServiceSites(){return this.dapHttp.get("restful/service/autoSettings/DataGroup/DataGroupServiceSites")}}return e.\u0275fac=function(t){return new(t||e)(s.\u0275\u0275inject(c.DwDapHttpClient),s.\u0275\u0275inject(a.DatePipe))},e.\u0275prov=s.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var u=n(9682),h=n(47372);class p extends u.DwClientPagingDataSource{constructor(e,t){super(),this.dwHttp=e,this.url=t}getDataList(e,t){return this.dwHttp.get(this.url).pipe((0,h.map)(n=>(this._result={currentPage:e,datas:Object.assign([],n.data),pageCount:Math.ceil(n.data.length/t),pageSize:t,rowCount:n.data.length},this._result)))}}let g=(()=>{class e{constructor(e,t){this.dwHttp=e,this.selectModalService=t,this.config={modalTitle:"\u9009\u62e9\u670d\u52a1\u7ad9\u70b9",modalWidth:"50%",tableMultiSelect:!0,tableIdField:"service_site_code",tableNameField:"service_site_name",returnFields:["service_site_id","service_site_name"],tablePageSize:10,tableColDefs:[{title:"\u7ad9\u70b9\u7f16\u53f7",field:"service_site_code"},{title:"\u7ad9\u70b9\u540d\u79f0",field:"service_site_name"},{title:"\u7ad9\u70b9\u7c7b\u578b",field:"service_site_type",dataPipe:"i18nSelect",dataEnum:{1:"\u603b\u90e8",2:"\u7f51\u70b9",3:"\u7ecf\u9500\u5546"}}],dataSource:new p(this.dwHttp,"restful/service/autoSettings/DataGroup/DataGroupServiceSites")}}open(e){return this.selectModalService.open(this.config,e)}}return e.\u0275fac=function(t){return new(t||e)(s.\u0275\u0275inject(c.DwDapHttpClient),s.\u0275\u0275inject(u.DwSelectModalService))},e.\u0275prov=s.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var w=n(14025),v=n(17494),f=n(66800),S=n(99487),y=n(61937),b=n(80677),D=n(80419),x=n(29872),E=n(85773),I=n(41937),C=n(74591),_=n(93761),P=n(96670),T=n(8852),M=n(78169),N=n(62695),F=n(83522),O=n(37568),A=n(85277),k=n(67280);function R(e,t){if(1&e){const e=s.\u0275\u0275getCurrentView();s.\u0275\u0275elementStart(0,"em",49),s.\u0275\u0275listener("click",function(){return s.\u0275\u0275restoreView(e),s.\u0275\u0275nextContext(3).clear("service_site")}),s.\u0275\u0275elementEnd()}}function L(e,t){if(1&e){const e=s.\u0275\u0275getCurrentView();s.\u0275\u0275template(0,R,1,0,"em",46),s.\u0275\u0275elementStart(1,"button",47),s.\u0275\u0275listener("click",function(t){return s.\u0275\u0275restoreView(e),s.\u0275\u0275nextContext(2).openDataWin(t,"service_site")}),s.\u0275\u0275element(2,"em",48),s.\u0275\u0275elementEnd()}if(2&e){const e=s.\u0275\u0275nextContext(2);s.\u0275\u0275property("ngIf",e.searchForm.value.service_site_name),s.\u0275\u0275advance(1),s.\u0275\u0275propertyInterpolate("angularticsLabel",e.userInfo.tenantId+","+e.userInfo.userId),s.\u0275\u0275property("angularticsCategory","\u5de5\u7a0b\u5e08\u8003\u52e4\u7edf\u8ba1")}}function j(e,t){if(1&e&&(s.\u0275\u0275elementStart(0,"div",8),s.\u0275\u0275elementStart(1,"div",9),s.\u0275\u0275text(2,"\u670d\u52a1\u7ad9\u70b9"),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(3,"dw-form-item",42),s.\u0275\u0275elementStart(4,"dw-form-control"),s.\u0275\u0275elementStart(5,"dw-input-group",43),s.\u0275\u0275element(6,"input",44),s.\u0275\u0275elementEnd(),s.\u0275\u0275template(7,L,3,3,"ng-template",null,45,s.\u0275\u0275templateRefExtractor),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd()),2&e){const e=s.\u0275\u0275reference(8);s.\u0275\u0275advance(5),s.\u0275\u0275property("dwSuffix",e)}}function V(e,t){1&e&&s.\u0275\u0275element(0,"img",53)}function z(e,t){if(1&e&&(s.\u0275\u0275elementStart(0,"tr"),s.\u0275\u0275elementStart(1,"td",50),s.\u0275\u0275text(2),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(3,"td",50),s.\u0275\u0275text(4),s.\u0275\u0275template(5,V,1,0,"img",51),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(6,"td",52),s.\u0275\u0275text(7),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(8,"td",52),s.\u0275\u0275text(9),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd()),2&e){const e=t.$implicit;s.\u0275\u0275advance(1),s.\u0275\u0275classMap("V"===e.status?"gray":""),s.\u0275\u0275advance(1),s.\u0275\u0275textInterpolate1(" ",e.service_site_name," "),s.\u0275\u0275advance(1),s.\u0275\u0275classMap("V"===e.status?"gray":""),s.\u0275\u0275advance(1),s.\u0275\u0275textInterpolate1(" ",e.employee_name," "),s.\u0275\u0275advance(1),s.\u0275\u0275property("ngIf","V"===e.status),s.\u0275\u0275advance(1),s.\u0275\u0275classMap("V"===e.status?"gray":""),s.\u0275\u0275advance(1),s.\u0275\u0275textInterpolate1(" ",e.service_days," "),s.\u0275\u0275advance(1),s.\u0275\u0275classMap("V"===e.status?"gray":""),s.\u0275\u0275advance(1),s.\u0275\u0275textInterpolate1(" ",e.standby_days," ")}}function W(e,t){if(1&e&&(s.\u0275\u0275elementStart(0,"tr"),s.\u0275\u0275elementStart(1,"td",54),s.\u0275\u0275text(2),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(3,"td",54),s.\u0275\u0275text(4),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(5,"td",54),s.\u0275\u0275text(6),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(7,"td"),s.\u0275\u0275text(8),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(9,"td"),s.\u0275\u0275text(10),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(11,"td"),s.\u0275\u0275text(12),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(13,"td"),s.\u0275\u0275text(14),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd()),2&e){const e=s.\u0275\u0275nextContext().$implicit;s.\u0275\u0275advance(1),s.\u0275\u0275attribute("rowspan",e.detailInfo.length),s.\u0275\u0275advance(1),s.\u0275\u0275textInterpolate1(" ",e.engineerName," "),s.\u0275\u0275advance(1),s.\u0275\u0275attribute("rowspan",e.detailInfo.length),s.\u0275\u0275advance(1),s.\u0275\u0275textInterpolate1(" ",e.serviceSiteName," "),s.\u0275\u0275advance(2),s.\u0275\u0275textInterpolate1(" ",e.detailInfo[0].report_time," "),s.\u0275\u0275advance(2),s.\u0275\u0275textInterpolate1(" ",e.detailInfo[0].location," "),s.\u0275\u0275advance(2),s.\u0275\u0275textInterpolate1(" ",e.detailInfo[0].service_type_name," "),s.\u0275\u0275advance(2),s.\u0275\u0275textInterpolate1(" ",e.detailInfo[0].customer_name," "),s.\u0275\u0275advance(2),s.\u0275\u0275textInterpolate1(" ",e.detailInfo[0].remark," ")}}function H(e,t){if(1&e&&(s.\u0275\u0275elementStart(0,"tr"),s.\u0275\u0275elementStart(1,"td",54),s.\u0275\u0275text(2),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(3,"td"),s.\u0275\u0275text(4),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(5,"td"),s.\u0275\u0275text(6),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(7,"td"),s.\u0275\u0275text(8),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(9,"td"),s.\u0275\u0275text(10),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd()),2&e){const e=s.\u0275\u0275nextContext().$implicit;s.\u0275\u0275advance(2),s.\u0275\u0275textInterpolate1(" ",e.report_time," "),s.\u0275\u0275advance(2),s.\u0275\u0275textInterpolate1(" ",e.location," "),s.\u0275\u0275advance(2),s.\u0275\u0275textInterpolate1(" ",e.service_type_name," "),s.\u0275\u0275advance(2),s.\u0275\u0275textInterpolate1(" ",e.customer_name," "),s.\u0275\u0275advance(2),s.\u0275\u0275textInterpolate1(" ",e.remark," ")}}function G(e,t){if(1&e&&(s.\u0275\u0275elementContainerStart(0),s.\u0275\u0275template(1,H,11,5,"tr",55),s.\u0275\u0275elementContainerEnd()),2&e){const e=t.index;s.\u0275\u0275advance(1),s.\u0275\u0275property("ngIf",0!==e)}}function U(e,t){if(1&e&&(s.\u0275\u0275elementContainerStart(0),s.\u0275\u0275template(1,W,15,9,"tr",55),s.\u0275\u0275template(2,G,2,1,"ng-container",29),s.\u0275\u0275elementContainerEnd()),2&e){const e=t.$implicit,n=t.index;s.\u0275\u0275advance(1),s.\u0275\u0275property("ngIf",0!==n),s.\u0275\u0275advance(1),s.\u0275\u0275property("ngForOf",e.detailInfo)}}function $(e,t){if(1&e&&(s.\u0275\u0275elementContainerStart(0),s.\u0275\u0275elementStart(1,"tr"),s.\u0275\u0275elementStart(2,"td"),s.\u0275\u0275text(3),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(4,"td",54),s.\u0275\u0275text(5),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(6,"td",54),s.\u0275\u0275text(7),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(8,"td",54),s.\u0275\u0275text(9),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(10,"td"),s.\u0275\u0275text(11),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(12,"td"),s.\u0275\u0275text(13),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(14,"td"),s.\u0275\u0275text(15),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(16,"td"),s.\u0275\u0275text(17),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275template(18,U,3,2,"ng-container",29),s.\u0275\u0275elementContainerEnd()),2&e){const e=t.$implicit;s.\u0275\u0275advance(2),s.\u0275\u0275attribute("rowspan",e.count),s.\u0275\u0275advance(1),s.\u0275\u0275textInterpolate1(" ",e.date," "),s.\u0275\u0275advance(1),s.\u0275\u0275attribute("rowspan",e.detail[0].detailInfo.length),s.\u0275\u0275advance(1),s.\u0275\u0275textInterpolate1(" ",e.detail[0].engineerName," "),s.\u0275\u0275advance(1),s.\u0275\u0275attribute("rowspan",e.detail[0].detailInfo.length),s.\u0275\u0275advance(1),s.\u0275\u0275textInterpolate1(" ",e.detail[0].serviceSiteName," "),s.\u0275\u0275advance(2),s.\u0275\u0275textInterpolate1(" ",e.detail[0].detailInfo[0].report_time," "),s.\u0275\u0275advance(2),s.\u0275\u0275textInterpolate1(" ",e.detail[0].detailInfo[0].location," "),s.\u0275\u0275advance(2),s.\u0275\u0275textInterpolate1(" ",e.detail[0].detailInfo[0].service_type_name," "),s.\u0275\u0275advance(2),s.\u0275\u0275textInterpolate1(" ",e.detail[0].detailInfo[0].customer_name," "),s.\u0275\u0275advance(2),s.\u0275\u0275textInterpolate1(" ",e.detail[0].detailInfo[0].remark," "),s.\u0275\u0275advance(1),s.\u0275\u0275property("ngForOf",e.detail)}}function B(e,t){if(1&e&&s.\u0275\u0275text(0),2&e){const e=s.\u0275\u0275nextContext();s.\u0275\u0275textInterpolate1("\u5171 ",e.rowCount," \u6761")}}function J(e,t){if(1&e&&s.\u0275\u0275text(0),2&e){const e=s.\u0275\u0275nextContext();s.\u0275\u0275textInterpolate1("\u5171 ",e.detailRowCount," \u6761")}}const Z=function(){return{y:"calc(100vh - 171px - 248px)"}};let Y=(()=>{class e{constructor(e,t,n,a,r,i,s,o){this.analytics=e,this.userService=t,this.message=n,this.fb=a,this.engineerAttendanceStatisticsSrv=r,this.siteOpenerService=i,this.datePipe=s,this.http=o,this.search={pageNumber:1,pageSize:10},this.searchDetail={pageNumber:1,pageSize:10},this.rowCount=0,this.dataList=[],this.isDisabled=!1,this.isDownloading=!1,this.lastParams="",this.userInfo={tenantId:"",userId:""},this.queryType=0,this.detailDataList=[],this.detailRowCount=0,this.disabledDate=e=>(0,w.differenceInCalendarDays)(e,new Date)>0}ngOnInit(){this.userInfo=this.userService.getUserInfo(),this.getCurrentServiceSite(),this.orderBy={sortFiled:"service_site",sort:"ASC"},this.searchForm=this.fb.group({}),this.searchForm.addControl("date_range",new l.FormControl("")),this.searchForm.addControl("service_site_id",new l.FormControl("")),this.searchForm.addControl("service_site_name",new l.FormControl("")),this.searchForm.addControl("status",new l.FormControl(!0)),this.initDateRange(),this.loadData(),this.loadDataDetail()}onTabChange(e){console.log(e),this.queryType=e.index,this.search.pageNumber=1,this.searchDetail.pageNumber=1,this.loadData(),this.loadDataDetail()}initDateRange(){const e=new Date,t=e.getDate(),n=new Date(e.getFullYear(),e.getMonth(),1),a=new Date(e.getFullYear(),e.getMonth(),t);this.searchForm.get("date_range").setValue([n,a])}loadData(){const e=this.searchForm.value;if(""===e.date_range||!e.date_range.length||""===e.date_range[0])return e.date_range=["",""],void this.message.create("error","\u8bf7\u9009\u62e9\u65e5\u671f");e.date_range[0]=this.datePipe.transform(e.date_range[0],"yyyy-MM-dd"),e.date_range[1]=this.datePipe.transform(e.date_range[1],"yyyy-MM-dd");const t={serviceSites:this.searchForm.value.service_site_id||"",pageIndex:String(this.search.pageNumber),pageSize:String(this.search.pageSize),startDate:e.date_range[0],endDate:e.date_range[1],status:e.status?"Y":""};t.serviceSites?this.engineerAttendanceStatisticsSrv.getList(t).subscribe(e=>{this.dataList=e.data.engineer_attendance_summary||[],this.isDisabled="0"===e.data.invalidEmployeeFlag,"0"===e.data.invalidEmployeeFlag&&this.searchForm.get("status").setValue(!0),this.rowCount=e.data.row_count,this.onAfterSearch()},e=>{e.hasOwnProperty("error")&&e.error.hasOwnProperty("errorMessage")&&e.error.errorMessage&&this.message.error(e.error.errorMessage)}):this.engineerAttendanceStatisticsSrv.getDataGroupServiceSites().subscribe(e=>{const n=[];for(const t of e.data)n.push(t.service_site_id);t.serviceSites=n.join(","),this.engineerAttendanceStatisticsSrv.getList(t).subscribe(e=>{this.dataList=e.data.engineer_attendance_summary||[],this.isDisabled="0"===e.data.invalidEmployeeFlag,"0"===e.data.invalidEmployeeFlag&&this.searchForm.get("status").setValue(!0),this.rowCount=e.data.row_count,this.onAfterSearch()},e=>{e.hasOwnProperty("error")&&e.error.hasOwnProperty("errorMessage")&&e.error.errorMessage&&this.message.error(e.error.errorMessage)})},e=>{e.hasOwnProperty("error")&&e.error.hasOwnProperty("errorMessage")&&e.error.errorMessage&&this.message.error(e.error.errorMessage)})}loadDataDetail(){const e=this.searchForm.value;if(""===e.date_range||!e.date_range.length||""===e.date_range[0])return void(e.date_range=["",""]);e.date_range[0]=this.datePipe.transform(e.date_range[0],"yyyy-MM-dd"),e.date_range[1]=this.datePipe.transform(e.date_range[1],"yyyy-MM-dd");const t={serviceSites:this.searchForm.value.service_site_id||"",pageIndex:String(this.searchDetail.pageNumber),pageSize:String(this.searchDetail.pageSize),startDate:e.date_range[0],endDate:e.date_range[1],status:e.status?"Y":"",exportFlag:"0"};this.lastParams=JSON.parse(JSON.stringify(t)),this.engineerAttendanceStatisticsSrv.getListDetail(t).subscribe(e=>{this.detailDataList=e.engineer_attendance_detail||[],this.detailRowCount=e.row_count||0,console.log(this.detailDataList)},e=>{e.hasOwnProperty("error")&&e.error.hasOwnProperty("errorMessage")&&e.error.errorMessage&&this.message.error(e.error.errorMessage)})}exportDetail(){console.log("export"),this.isDownloading=!0,this.lastParams.exportFlag="1",this.http.post("restful/service/employee/Employee/EngineerAttendanceDetailsListExcelExport",{params:this.lastParams},{observe:"events",responseType:"blob",reportProgress:!0}).subscribe(e=>{if(e)switch(e.type){case S.HttpEventType.Response:const t=URL.createObjectURL(e.body),n=document.createElement("a");n.href=t,n.style="visibility:hidden";const a=e.headers.get("Content-disposition").split("filename=")[1];n.download=decodeURI(a),document.body.appendChild(n),n.click(),document.body.removeChild(n),setTimeout(()=>{this.isDownloading=!1},600)}},e=>{const t=new FileReader;t.onload=e=>{const t=JSON.parse(e.target.result);this.message.create("error",t.errorMessage)},t.readAsText(e.error),this.isDownloading=!1})}getCurrentServiceSite(){this.engineerAttendanceStatisticsSrv.getCurrentServiceSiteInfo().subscribe(e=>{this.currentServiceSiteType=e.service_site_type})}reset(){this.search.pageNumber=1,this.searchDetail.pageNumber=1,this.initDateRange(),this.searchForm.get("service_site_id").setValue(""),this.searchForm.get("service_site_name").setValue(""),this.searchForm.get("status").setValue(!0),this.loadData(),this.loadDataDetail()}onOpenRange(e){e&&this.analytics.eventTrack.next({action:"\u67e5\u8be2\u6761\u4ef6-\u70b9\u51fb\u9009\u62e9\u65e5\u671f",properties:{category:"\u5de5\u7a0b\u5e08\u8003\u52e4\u7edf\u8ba1",label:this.userInfo.tenantId+","+this.userInfo.userId,value:0}})}onPageSizeChange(){this.search.pageNumber=1,this.loadData()}onPageSizeChange2(){this.searchDetail.pageNumber=1,this.loadDataDetail()}onPageIndexChange(e){this.search.pageNumber=e,this.loadData()}onPageIndexChange2(e){this.searchDetail.pageNumber=e,this.loadDataDetail()}openDataWin(e,t){e.preventDefault(),this.siteOpenerService.open([]).subscribe(e=>{if(console.log(e),null==e||0===e.length)return;const n=t+"_name",a=t+"_id";this[n]="",this[a]="",this.searchForm.get(n).setValue(""),this.searchForm.get(a).setValue(""),e.forEach(e=>{this[n]+=e[n]+",",this[a]+=e[a]+","}),0!==this[n].length&&(this[n]=this[n].substr(0,this[n].length-1)),0!==this[a].length&&(this[a]=this[a].substr(0,this[a].length-1)),this.searchForm.get(n).setValue(this[n]),this.searchForm.get(a).setValue(this[a])})}clear(e){this.searchForm.get(`${e}_id`).setValue(""),this.searchForm.get(`${e}_name`).setValue("")}order(e){const t=e.key;switch(e.value){case"ascend":this.detailDataList=y.l.order(this.detailDataList,[t]);break;case"descend":this.detailDataList=y.l.order(this.detailDataList,[t,-1])}}onBeforeSearch(){}onAfterSearch(){this.rowCount>0&&0===this.dataList.length&&(this.search.pageNumber=1,this.loadData())}}return e.\u0275fac=function(t){return new(t||e)(s.\u0275\u0275directiveInject(v.DwAnalytics),s.\u0275\u0275directiveInject(f.DwUserService),s.\u0275\u0275directiveInject(d.DwMessageService),s.\u0275\u0275directiveInject(l.FormBuilder),s.\u0275\u0275directiveInject(m),s.\u0275\u0275directiveInject(g),s.\u0275\u0275directiveInject(a.DatePipe),s.\u0275\u0275directiveInject(c.DwDapHttpClient))},e.\u0275cmp=s.\u0275\u0275defineComponent({type:e,selectors:[["app-engineer-attendance-statistics-list"]],features:[s.\u0275\u0275ProvidersFeature([g])],decls:90,vars:46,consts:[[1,"dw-f-content-list","layoutClass","sales_layout"],[1,"issue_layout_head"],[1,"issue_layout_title"],[2,"margin-left","3px"],[1,"content-box",2,"margin-bottom","0"],[1,"sales_issue_form","sales_form","sales_shadow",3,"formGroup"],["dw-row","",1,"search-form-box",2,"margin-bottom","0"],["class","search-input",4,"ngIf"],[1,"search-input"],[1,"label"],[1,"form-input","date-picker"],["formControlName","date_range",2,"width","100%",3,"dwDisabledDate","dwOnOpenChange"],[1,"search-input","search-input-label"],[1,"form-input","form-input-label"],["dw-checkbox","","formControlName","status",3,"dwDisabled"],["dw-button","","angularticsAction","\u67e5\u8be2\u6761\u4ef6-\u70b9\u51fb\u67e5\u8be2\u6309\u94ae","dw-analyticsOn","click",3,"dwType","angularticsCategory","angularticsLabel","click"],["dw-button","","angularticsAction","\u67e5\u8be2\u6761\u4ef6-\u70b9\u51fb\u91cd\u7f6e\u6309\u94ae","dw-analyticsOn","click",3,"dwType","angularticsCategory","angularticsLabel","click"],[1,"dw-f-table","sales_table","engineer-attendance-list","tabsetBox"],[1,"my-tab",3,"dwTabPosition","dwSelectedIndex","dwType","dwAnimated","dwSelectChange"],[3,"dwTitle"],[2,"width","1000px"],["dwShowSizeChanger","",3,"dwData","dwTotal","dwFrontPagination","dwPageIndex","dwPageSize","dwShowTotal","dwScroll","dwPageIndexChange","dwPageSizeChange"],["dwTotalTable",""],[3,"dwSortOrderChange"],["dw-tr",""],["dw-th","","dwWidth","200px"],["translate",""],["dw-th","","dwWidth","158px"],["dw-th","","dwAlign","right","dwWidth","130px"],[4,"ngFor","ngForOf"],[1,"export"],["dw-button","","type","button","dwActionAuthorized","","angularticsAction","\u6d4f\u89c8\u9875\u64cd\u4f5c-\u70b9\u51fb\u5bfc\u51fa\u8003\u52e4\u660e\u7ec6","dw-analyticsOn","click",3,"dwType","dwActionId","dwDefaultAuthorized","angularticsCategory","angularticsLabel","dwLoading","dwClick"],["dw-icon","","dwType","upload"],["dwTotalTableDetail",""],["dw-th","","dwWidth","120px"],["dw-th","","dwWidth","150px"],["dw-th","","dwWidth","170px"],["dw-th","","dwWidth","250px"],["dw-th","","dwWidth","130px"],["dw-th","","dwWidth","230px"],["totalTemplate",""],["totalTemplateDetail",""],[1,"form-input"],["dwSearch","",3,"dwSuffix"],["type","text","dw-input","","readonly","","dwMode","multiple","formControlName","service_site_name","placeholder","",2,"width","100%"],["siteData",""],["dw-icon","","class","ant-input-clear-icon","dwTheme","fill","dwType","close-circle",3,"click",4,"ngIf"],["dw-button","","dwType","primary","dwSearch","","angularticsAction","\u67e5\u8be2\u6761\u4ef6-\u70b9\u51fb\u9009\u62e9\u670d\u52a1\u7ad9\u70b9","dw-analyticsOn","click","type","button",3,"angularticsCategory","angularticsLabel","click"],["dw-icon","","dwType","search"],["dw-icon","","dwTheme","fill","dwType","close-circle",1,"ant-input-clear-icon",3,"click"],["dwEllipsis",""],["class","invalid","src","../../../../../assets/img/icon_invalid.png","alt","\u5931\u6548",4,"ngIf"],["dwEllipsis","","dwAlign","right"],["src","../../../../../assets/img/icon_invalid.png","alt","\u5931\u6548",1,"invalid"],[2,"border-left","1px solid #f0f0f0"],[4,"ngIf"]],template:function(e,t){if(1&e&&(s.\u0275\u0275elementStart(0,"dw-content",0),s.\u0275\u0275elementStart(1,"div",1),s.\u0275\u0275elementStart(2,"h2",2),s.\u0275\u0275elementStart(3,"span",3),s.\u0275\u0275text(4,"\u5de5\u7a0b\u5e08\u8003\u52e4"),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275element(5,"dw-divider"),s.\u0275\u0275elementStart(6,"div",4),s.\u0275\u0275elementStart(7,"form",5),s.\u0275\u0275elementStart(8,"div",6),s.\u0275\u0275template(9,j,9,1,"div",7),s.\u0275\u0275elementStart(10,"div",8),s.\u0275\u0275elementStart(11,"div",9),s.\u0275\u0275text(12,"\u65e5\u671f"),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(13,"dw-form-item",10),s.\u0275\u0275elementStart(14,"dw-form-control"),s.\u0275\u0275elementStart(15,"dw-range-picker",11),s.\u0275\u0275listener("dwOnOpenChange",function(e){return t.onOpenRange(e)}),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(16,"div",12),s.\u0275\u0275elementStart(17,"dw-form-item",13),s.\u0275\u0275elementStart(18,"dw-form-control"),s.\u0275\u0275elementStart(19,"label",14),s.\u0275\u0275text(20,"\u4ec5\u663e\u793a\u751f\u6548\u5458\u5de5\u8003\u52e4"),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(21,"div",8),s.\u0275\u0275elementStart(22,"button",15),s.\u0275\u0275listener("click",function(){return t.search.pageNumber=1,t.searchDetail.pageNumber=1,t.loadData(),t.loadDataDetail()}),s.\u0275\u0275text(23),s.\u0275\u0275pipe(24,"translate"),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(25,"button",16),s.\u0275\u0275listener("click",function(){return t.reset()}),s.\u0275\u0275text(26),s.\u0275\u0275pipe(27,"translate"),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(28,"div",17),s.\u0275\u0275elementStart(29,"dw-tabset",18),s.\u0275\u0275listener("dwSelectChange",function(e){return t.onTabChange(e)}),s.\u0275\u0275elementStart(30,"dw-tab",19),s.\u0275\u0275elementStart(31,"div",20),s.\u0275\u0275elementStart(32,"dw-table",21,22),s.\u0275\u0275listener("dwPageIndexChange",function(e){return t.search.pageNumber=e})("dwPageIndexChange",function(e){return t.onPageIndexChange(e)})("dwPageSizeChange",function(e){return t.search.pageSize=e})("dwPageSizeChange",function(){return t.onPageSizeChange()}),s.\u0275\u0275elementStart(34,"thead",23),s.\u0275\u0275listener("dwSortOrderChange",function(e){return t.order(e)}),s.\u0275\u0275elementStart(35,"tr",24),s.\u0275\u0275elementStart(36,"th",25),s.\u0275\u0275elementStart(37,"span",26),s.\u0275\u0275text(38,"\u670d\u52a1\u7ad9\u70b9"),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(39,"th",27),s.\u0275\u0275elementStart(40,"span",26),s.\u0275\u0275text(41,"\u5de5\u7a0b\u5e08"),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(42,"th",28),s.\u0275\u0275elementStart(43,"span",26),s.\u0275\u0275text(44,"\u670d\u52a1\u5929\u6570"),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(45,"th",28),s.\u0275\u0275elementStart(46,"span",26),s.\u0275\u0275text(47,"\u5f85\u547d\u5929\u6570"),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(48,"tbody"),s.\u0275\u0275template(49,z,10,13,"tr",29),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(50,"dw-tab",19),s.\u0275\u0275elementStart(51,"div",30),s.\u0275\u0275elementStart(52,"button",31),s.\u0275\u0275listener("dwClick",function(){return t.exportDetail()}),s.\u0275\u0275element(53,"em",32),s.\u0275\u0275elementStart(54,"span",26),s.\u0275\u0275text(55,"\u5bfc\u51fa\u6570\u636e"),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(56,"dw-table",21,33),s.\u0275\u0275listener("dwPageIndexChange",function(e){return t.searchDetail.pageNumber=e})("dwPageIndexChange",function(e){return t.onPageIndexChange2(e)})("dwPageSizeChange",function(e){return t.searchDetail.pageSize=e})("dwPageSizeChange",function(){return t.onPageSizeChange2()}),s.\u0275\u0275elementStart(58,"thead",23),s.\u0275\u0275listener("dwSortOrderChange",function(e){return t.order(e)}),s.\u0275\u0275elementStart(59,"tr",24),s.\u0275\u0275elementStart(60,"th",34),s.\u0275\u0275elementStart(61,"span",26),s.\u0275\u0275text(62,"\u65e5\u671f"),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(63,"th",34),s.\u0275\u0275elementStart(64,"span",26),s.\u0275\u0275text(65,"\u5de5\u7a0b\u5e08"),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(66,"th",35),s.\u0275\u0275elementStart(67,"span",26),s.\u0275\u0275text(68,"\u670d\u52a1\u7ad9\u70b9"),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(69,"th",36),s.\u0275\u0275elementStart(70,"span",26),s.\u0275\u0275text(71,"\u6253\u5361\u65f6\u95f4"),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(72,"th",37),s.\u0275\u0275elementStart(73,"span",26),s.\u0275\u0275text(74,"\u6253\u5361\u5730\u70b9"),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(75,"th",38),s.\u0275\u0275elementStart(76,"span",26),s.\u0275\u0275text(77,"\u670d\u52a1\u7c7b\u578b"),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(78,"th",25),s.\u0275\u0275elementStart(79,"span",26),s.\u0275\u0275text(80,"\u5ba2\u6237\u540d\u79f0"),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(81,"th",39),s.\u0275\u0275elementStart(82,"span",26),s.\u0275\u0275text(83,"\u5907\u6ce8"),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(84,"tbody"),s.\u0275\u0275template(85,$,19,12,"ng-container",29),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275template(86,B,1,1,"ng-template",null,40,s.\u0275\u0275templateRefExtractor),s.\u0275\u0275template(88,J,1,1,"ng-template",null,41,s.\u0275\u0275templateRefExtractor)),2&e){const e=s.\u0275\u0275reference(33),n=s.\u0275\u0275reference(57),a=s.\u0275\u0275reference(87),r=s.\u0275\u0275reference(89);s.\u0275\u0275advance(7),s.\u0275\u0275property("formGroup",t.searchForm),s.\u0275\u0275advance(2),s.\u0275\u0275property("ngIf","1"===t.currentServiceSiteType),s.\u0275\u0275advance(6),s.\u0275\u0275property("dwDisabledDate",t.disabledDate),s.\u0275\u0275advance(4),s.\u0275\u0275property("dwDisabled",t.isDisabled),s.\u0275\u0275advance(3),s.\u0275\u0275propertyInterpolate("angularticsLabel",t.userInfo.tenantId+","+t.userInfo.userId),s.\u0275\u0275property("dwType","primary")("angularticsCategory","\u5de5\u7a0b\u5e08\u8003\u52e4\u7edf\u8ba1"),s.\u0275\u0275advance(1),s.\u0275\u0275textInterpolate1(" ",s.\u0275\u0275pipeBind1(24,40,"\u67e5\u8be2")," "),s.\u0275\u0275advance(2),s.\u0275\u0275propertyInterpolate("angularticsLabel",t.userInfo.tenantId+","+t.userInfo.userId),s.\u0275\u0275property("dwType","defult")("angularticsCategory","\u5de5\u7a0b\u5e08\u8003\u52e4\u7edf\u8ba1"),s.\u0275\u0275advance(1),s.\u0275\u0275textInterpolate1(" ",s.\u0275\u0275pipeBind1(27,42,"\u91cd\u7f6e")," "),s.\u0275\u0275advance(3),s.\u0275\u0275property("dwTabPosition","top")("dwSelectedIndex",t.queryType)("dwType","line")("dwAnimated",!1),s.\u0275\u0275advance(1),s.\u0275\u0275property("dwTitle","\u8003\u52e4\u7edf\u8ba1"),s.\u0275\u0275advance(2),s.\u0275\u0275property("dwData",t.dataList)("dwTotal",t.rowCount)("dwFrontPagination",!1)("dwPageIndex",t.search.pageNumber)("dwPageSize",t.search.pageSize)("dwShowTotal",a)("dwScroll",s.\u0275\u0275pureFunction0(44,Z)),s.\u0275\u0275advance(17),s.\u0275\u0275property("ngForOf",e.data),s.\u0275\u0275advance(1),s.\u0275\u0275property("dwTitle","\u8003\u52e4\u660e\u7ec6"),s.\u0275\u0275advance(2),s.\u0275\u0275propertyInterpolate("angularticsLabel",t.userInfo.tenantId+","+t.userInfo.userId),s.\u0275\u0275property("dwType","defult")("dwActionId","export")("dwDefaultAuthorized","disabled")("angularticsCategory","\u8003\u52e4\u660e\u7ec6")("dwLoading",t.isDownloading),s.\u0275\u0275advance(4),s.\u0275\u0275property("dwData",t.detailDataList)("dwTotal",t.detailRowCount)("dwFrontPagination",!1)("dwPageIndex",t.searchDetail.pageNumber)("dwPageSize",t.searchDetail.pageSize)("dwShowTotal",r)("dwScroll",s.\u0275\u0275pureFunction0(45,Z)),s.\u0275\u0275advance(29),s.\u0275\u0275property("ngForOf",n.data)}},directives:[b.DwContentComponent,D.DwDividerComponent,l.\u0275NgNoValidate,l.NgControlStatusGroup,l.FormGroupDirective,x.DwRowDirective,a.NgIf,E.DwFormItemComponent,x.DwColDirective,E.DwFormControlComponent,I.DwDatePickerComponent,I.DwRangePickerComponent,l.NgControlStatus,l.FormControlName,C.DwCheckboxComponent,_.DwButtonComponent,P.uG,T.u,v.DwAnalyticsOn,M.DwTabSetComponent,M.DwTabComponent,N.DwTableComponent,N.DwTheadComponent,N.DwTrDirective,N.DwTableCellDirective,N.DwThMeasureDirective,F.TranslateDirective,N.DwCellAlignDirective,N.DwTbodyComponent,a.NgForOf,O.DwActionAuthorizedDirective,A.DwIconDirective,k.DwInputGroupComponent,k.DwInputGroupWhitSuffixOrPrefixDirective,k.DwInputDirective,l.DefaultValueAccessor,N.DwCellEllipsisDirective],pipes:[F.TranslatePipe],styles:[".invalid[_ngcontent-%COMP%]{width:20px;height:20px}  .ant-table-pagination.ant-pagination{margin-bottom:0}.ant-checkbox-wrapper[_ngcontent-%COMP%]{display:inline-flex;align-items:center}.ant-checkbox-wrapper[_ngcontent-%COMP%]     .ant-checkbox{margin-bottom:4px}.search-input-label[_ngcontent-%COMP%]{margin-right:14px!important}.form-input-label[_ngcontent-%COMP%]{width:165px!important}.gray[_ngcontent-%COMP%]{opacity:.5}.tabsetBox[_ngcontent-%COMP%]{position:relative}.export[_ngcontent-%COMP%]{position:absolute;top:0px;right:0}"]}),e})();var q=n(51033);const K=[{path:"",pathMatch:"prefix",component:o,children:[{path:"",component:Y,canActivate:[i.DwAuthGuardService,q.L],data:{dwRouteData:{programId:"engineer-attendance-statistics",dwAuthId:"engineer-attendance-statistics"},reload:!0}}]}];let Q=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=s.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=s.\u0275\u0275defineInjector({imports:[[r.RouterModule.forChild(K)],r.RouterModule]}),e})();var X=n(23938);let ee=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=s.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=s.\u0275\u0275defineInjector({imports:[[a.CommonModule,X.m,Q,d.DwMessageModule,_.DwButtonModule,b.DwLayoutModule,I.DwDatePickerModule,D.DwDividerModule,E.DwFormModule,k.DwInputModule,N.DwTableModule,A.DwIconModule,x.DwGridModule,l.ReactiveFormsModule,F.TranslateModule,C.DwCheckboxModule,M.DwTabsModule,O.DwActionModule]]}),e})()},51033:function(e,t,n){n.d(t,{L:function(){return c}}),n(87974);var a=n(32276),r=n(51156),i=n(66800),s=n(83237),o=n(31441),d=n(71049),l=n(42746);let c=(()=>{class e{constructor(e,t,n,a,r){this.http=e,this.authService=t,this.userService=n,this.message=a,this.modalService=r,this.uerId=""}canLoad(e){return!0}canActivateChild(e,t){return!0}canActivate(e,t){return new d.Observable(e=>{this.uerId=this.userService.getUser("userId"),this.uerId?this.http.get(`restful/service/employee/Employee/ValidateIamUser?userId=${this.uerId}`).subscribe(t=>{t.success?(sessionStorage.setItem("employeeInfo",JSON.stringify(t.data?t.data.data:{})),e.next(!0)):(this.modalService.warning({dwTitle:"\u63d0\u793a",dwContent:t.data,dwWidth:"400px",dwOnOk:()=>{this.authService.logout(),window.location.reload()}}),e.next(!1))},t=>{console.log(t),t.hasOwnProperty("error")&&t.error.hasOwnProperty("errorMessage")&&t.error.errorMessage&&this.message.error(t.error.errorMessage),e.next(!1)}):e.next(!0)})}}return e.\u0275fac=function(t){return new(t||e)(l.\u0275\u0275inject(r.DwDapHttpClient),l.\u0275\u0275inject(a.DwAuthService),l.\u0275\u0275inject(i.DwUserService),l.\u0275\u0275inject(s.DwMessageService),l.\u0275\u0275inject(o.DwModalService))},e.\u0275prov=l.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},61937:function(e,t,n){n.d(t,{l:function(){return a}});class a{static order(e,...t){return e?[...e].sort((e,n)=>{let a=0,r=0;const i=t.length;for(let s=0;s<i;s++){const o=t[s][0],d=t[s][1]||1,l=Math.pow(2,i-s)*d;let c,m;o instanceof Function?(c=String(o(e)||""),m=String(o(n)||"")):(c=String(e[o]||""),m=String(n[o]||"")),1===c.localeCompare(m)?a+=l:-1===c.localeCompare(m)&&(r+=l)}return a-r}):[]}static crossPageCache(e,t,n,a){const r=e[a];if(r){const e=r[n];r.checked?t.includes(e)||t.push(e):t.includes(e)&&t.splice(t.indexOf(e),1)}}static crossPageCheck(e,t,n){for(const a of e)t.includes(a[n])?a.checked||(a.checked=!0):a.checked&&(a.checked=!1)}static parseJson(e){try{return JSON.parse(e)}catch(t){return null}}}}}]);