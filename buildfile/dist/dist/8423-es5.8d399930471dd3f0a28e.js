!function(){"use strict";function e(e){return function(e){if(Array.isArray(e))return c(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||d(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */t=function(){return e};var e={},n=Object.prototype,r=n.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",l=i.toStringTag||"@@toStringTag";function d(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{d({},"")}catch(k){d=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var i=t&&t.prototype instanceof m?t:m,a=Object.create(i.prototype),o=new b(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return I()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var l=_(o,n);if(l){if(l===u)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var d=s(e,t,n);if("normal"===d.type){if(r=n.done?"completed":"suspendedYield",d.arg===u)continue;return{value:d.arg,done:n.done}}"throw"===d.type&&(r="completed",n.method="throw",n.arg=d.arg)}}}(e,n,o),a}function s(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(k){return{type:"throw",arg:k}}}e.wrap=c;var u={};function m(){}function p(){}function f(){}var h={};d(h,a,function(){return this});var v=Object.getPrototypeOf,g=v&&v(v(C([])));g&&g!==n&&r.call(g,a)&&(h=g);var w=f.prototype=m.prototype=Object.create(h);function y(e){["next","throw","return"].forEach(function(t){d(e,t,function(e){return this._invoke(t,e)})})}function S(e,t){function n(i,a,o,l){var d=s(e[i],e,a);if("throw"!==d.type){var c=d.arg,u=c.value;return u&&"object"==typeof u&&r.call(u,"__await")?t.resolve(u.__await).then(function(e){n("next",e,o,l)},function(e){n("throw",e,o,l)}):t.resolve(u).then(function(e){c.value=e,o(c)},function(e){return n("throw",e,o,l)})}l(d.arg)}var i;this._invoke=function(e,r){function a(){return new t(function(t,i){n(e,r,t,i)})}return i=i?i.then(a,a):a()}}function _(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,_(e,t),"throw"===t.method))return u;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var r=s(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,u;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function b(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function C(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:I}}function I(){return{value:void 0,done:!0}}return p.prototype=f,d(w,"constructor",f),d(f,"constructor",p),p.displayName=d(f,l,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,d(e,l,"GeneratorFunction")),e.prototype=Object.create(w),e},e.awrap=function(e){return{__await:e}},y(S.prototype),d(S.prototype,o,function(){return this}),e.AsyncIterator=S,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new S(c(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then(function(e){return e.done?e.value:o.next()})},y(w),d(w,l,"Generator"),d(w,a,function(){return this}),d(w,"toString",function(){return"[object Generator]"}),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=C,b.prototype={constructor:b,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),d=r.call(a,"finallyLoc");if(l&&d){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!d)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,u):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;E(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:C(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),u}},e}function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&r(e,t)}function r(e,t){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function i(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=o(e);if(t){var i=o(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return a(this,n)}}function a(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=d(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){l=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(l)throw a}}}}function d(e,t){if(e){if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(self.webpackChunkassc_crs=self.webpackChunkassc_crs||[]).push([[8423],{8852:function(e,t,n){n.d(t,{u:function(){return o},f:function(){return l}});var r,i=n(36535),a=n(42746),o=((r=function(){function e(t,n){s(this,e),this.elementRef=t,this.renderer=n,this.hidden=null,this.renderer.setAttribute(this.elementRef.nativeElement,"hidden","")}return m(e,[{key:"setHiddenAttribute",value:function(){this.hidden?this.renderer.setAttribute(this.elementRef.nativeElement,"hidden","string"==typeof this.hidden?this.hidden:""):this.renderer.removeAttribute(this.elementRef.nativeElement,"hidden")}},{key:"ngOnChanges",value:function(){this.setHiddenAttribute()}},{key:"ngAfterViewInit",value:function(){this.setHiddenAttribute()}}]),e}()).\u0275fac=function(e){return new(e||r)(a.\u0275\u0275directiveInject(a.ElementRef),a.\u0275\u0275directiveInject(a.Renderer2))},r.\u0275dir=a.\u0275\u0275defineDirective({type:r,selectors:[["","dw-button",""],["dw-button-group"],["","dw-icon",""],["","dw-menu-item",""],["","dw-submenu",""],["dw-select-top-control"],["dw-select-placeholder"],["dw-input-group"]],inputs:{hidden:"hidden"},features:[a.\u0275\u0275NgOnChangesFeature]}),r),l=function(){var e=m(function e(){s(this,e)});return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=a.\u0275\u0275defineInjector({imports:[[i.PlatformModule]]}),e}()},96670:function(e,t,n){n.d(t,{uG:function(){return u},ln:function(){return p}});var r,i=n(36535),a=n(42746),o=n(88065),l=function(){function e(t,n,r,a){var o=this;s(this,e),this.triggerElement=t,this.ngZone=n,this.insertExtraNode=r,this.platformId=a,this.waveTransitionDuration=400,this.styleForPseudo=null,this.extraNode=null,this.lastTime=0,this.onClick=function(e){!o.triggerElement||!o.triggerElement.getAttribute||o.triggerElement.getAttribute("disabled")||"INPUT"===e.target.tagName||o.triggerElement.className.indexOf("disabled")>=0||o.fadeOutWave()},this.platform=new i.Platform(this.platformId),this.clickHandler=this.onClick.bind(this),this.bindTriggerEvent()}return m(e,[{key:"waveAttributeName",get:function(){return this.insertExtraNode?"ant-click-animating":"ant-click-animating-without-extra-node"}},{key:"bindTriggerEvent",value:function(){var e=this;this.platform.isBrowser&&this.ngZone.runOutsideAngular(function(){e.removeTriggerEvent(),e.triggerElement&&e.triggerElement.addEventListener("click",e.clickHandler,!0)})}},{key:"removeTriggerEvent",value:function(){this.triggerElement&&this.triggerElement.removeEventListener("click",this.clickHandler,!0)}},{key:"removeStyleAndExtraNode",value:function(){this.styleForPseudo&&document.body.contains(this.styleForPseudo)&&(document.body.removeChild(this.styleForPseudo),this.styleForPseudo=null),this.insertExtraNode&&this.triggerElement.contains(this.extraNode)&&this.triggerElement.removeChild(this.extraNode)}},{key:"destroy",value:function(){this.removeTriggerEvent(),this.removeStyleAndExtraNode()}},{key:"fadeOutWave",value:function(){var e=this,t=this.triggerElement,n=this.getWaveColor(t);t.setAttribute(this.waveAttributeName,"true"),!(Date.now()<this.lastTime+this.waveTransitionDuration)&&(this.isValidColor(n)&&(this.styleForPseudo||(this.styleForPseudo=document.createElement("style")),this.styleForPseudo.innerHTML="\n      [ant-click-animating-without-extra-node='true']::after, .ant-click-animating-node {\n        --antd-wave-shadow-color: ".concat(n,";\n      }"),document.body.appendChild(this.styleForPseudo)),this.insertExtraNode&&(this.extraNode||(this.extraNode=document.createElement("div")),this.extraNode.className="ant-click-animating-node",t.appendChild(this.extraNode)),this.lastTime=Date.now(),this.runTimeoutOutsideZone(function(){t.removeAttribute(e.waveAttributeName),e.removeStyleAndExtraNode()},this.waveTransitionDuration))}},{key:"isValidColor",value:function(e){return!!e&&"#ffffff"!==e&&"rgb(255, 255, 255)"!==e&&this.isNotGrey(e)&&!/rgba\(\d*, \d*, \d*, 0\)/.test(e)&&"transparent"!==e}},{key:"isNotGrey",value:function(e){var t=e.match(/rgba?\((\d*), (\d*), (\d*)(, [\.\d]*)?\)/);return!(t&&t[1]&&t[2]&&t[3]&&t[1]===t[2]&&t[2]===t[3])}},{key:"getWaveColor",value:function(e){var t=getComputedStyle(e);return t.getPropertyValue("border-top-color")||t.getPropertyValue("border-color")||t.getPropertyValue("background-color")}},{key:"runTimeoutOutsideZone",value:function(e,t){this.ngZone.runOutsideAngular(function(){return setTimeout(e,t)})}}]),e}(),d={disabled:!1},c=new a.InjectionToken("dw-wave-global-options",{providedIn:"root",factory:function(){return d}}),u=((r=function(){function e(t,n,r,i,a){s(this,e),this.ngZone=t,this.elementRef=n,this.config=r,this.animationType=i,this.platformId=a,this.dwWaveExtraNode=!1,this.waveDisabled=!1,this.waveDisabled=this.isConfigDisabled()}return m(e,[{key:"disabled",get:function(){return this.waveDisabled}},{key:"rendererRef",get:function(){return this.waveRenderer}},{key:"isConfigDisabled",value:function(){var e=!1;return this.config&&"boolean"==typeof this.config.disabled&&(e=this.config.disabled),"NoopAnimations"===this.animationType&&(e=!0),e}},{key:"ngOnDestroy",value:function(){this.waveRenderer&&this.waveRenderer.destroy()}},{key:"ngOnInit",value:function(){this.renderWaveIfEnabled()}},{key:"renderWaveIfEnabled",value:function(){!this.waveDisabled&&this.elementRef.nativeElement&&(this.waveRenderer=new l(this.elementRef.nativeElement,this.ngZone,this.dwWaveExtraNode,this.platformId))}},{key:"disable",value:function(){this.waveDisabled=!0,this.waveRenderer&&(this.waveRenderer.removeTriggerEvent(),this.waveRenderer.removeStyleAndExtraNode())}},{key:"enable",value:function(){this.waveDisabled=this.isConfigDisabled()||!1,this.waveRenderer&&this.waveRenderer.bindTriggerEvent()}}]),e}()).\u0275fac=function(e){return new(e||r)(a.\u0275\u0275directiveInject(a.NgZone),a.\u0275\u0275directiveInject(a.ElementRef),a.\u0275\u0275directiveInject(c,8),a.\u0275\u0275directiveInject(o.ANIMATION_MODULE_TYPE,8),a.\u0275\u0275directiveInject(a.PLATFORM_ID))},r.\u0275dir=a.\u0275\u0275defineDirective({type:r,selectors:[["","dw-wave",""],["button","dw-button","",3,"dwType","link",3,"dwType","text"]],inputs:{dwWaveExtraNode:"dwWaveExtraNode"},exportAs:["dwWave"]}),r),p=function(){var e=m(function e(){s(this,e)});return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=a.\u0275\u0275defineInjector({imports:[[i.PlatformModule]]}),e}()},53771:function(e,t,n){n.d(t,{v:function(){return d}});var r,i=n(51156),a=n(47372),o=n(65134),l=n(42746),d=((r=function(){function e(t,n){s(this,e),this.http=t,this.pctHttp=n}return m(e,[{key:"getCustomerList",value:function(e,t){return this.http.get("restful/service/customer/Customer/Customer?code=".concat(e,"&name=").concat(t)).pipe((0,a.map)(function(e){return e}))}},{key:"deleteCustomer",value:function(e){return this.http.delete("restful/service/customer/Customer/BathRemove",{body:{ids:e.join(",")}})}},{key:"getQuery",value:function(e){return this.http.get("restful/service/customer/Customer/CustomerSearch?param=".concat(e)).pipe((0,a.map)(function(e){return e}))}},{key:"getIntegratedEnableStatus",value:function(){return this.pctHttp.get("restful/service/integratedSettings/IntegratedSettings/IntegratedEnableStatus")}}]),e}()).\u0275fac=function(e){return new(e||r)(l.\u0275\u0275inject(i.DwDapHttpClient),l.\u0275\u0275inject(o.k))},r.\u0275prov=l.\u0275\u0275defineInjectable({token:r,factory:r.\u0275fac,providedIn:"root"}),r)},98423:function(e,t,r){r.r(t),r.d(t,{QuotationModule:function(){return mn}});var a,o=r(55245),d=r(23938),c=r(87974),u=r(32276),p=r(42746),f=((a=function(){function e(){s(this,e)}return m(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||a)},a.\u0275cmp=p.\u0275\u0275defineComponent({type:a,selectors:[["app-quotation"]],decls:1,vars:0,template:function(e,t){1&e&&p.\u0275\u0275element(0,"router-outlet")},directives:[c.RouterOutlet],styles:[""]}),a),h=r(83237),v=r(31441),g=r(1020),w=r(51156),y=r(65134),S=function(){var e=function(){function e(t,n,r){s(this,e),this.dapHttp=t,this.pctHttp=n,this.datePipe=r}return m(e,[{key:"getQuotationList",value:function(e){var t=encodeURIComponent(JSON.stringify(e));return this.dapHttp.get("restful/service/quotation/Quotation/QuotationListForBackendPaging?params=".concat(t))}},{key:"getQuotationDocNo",value:function(){return this.dapHttp.get("restful/service/quotation/Quotation/QuotationDocNo")}},{key:"approveQuotation",value:function(e){return this.dapHttp.get("restful/service/quotation/Quotation/ApproveQuotation?id="+e)}},{key:"deleteQuotation",value:function(e){return this.dapHttp.delete("restful/service/quotation/Quotation/Quotation",{body:{id:e[0]}})}},{key:"getQuotationDetail",value:function(e){return this.dapHttp.get("restful/service/quotation/Quotation/Quotation?id=".concat(e))}},{key:"getMaterialGroups",value:function(e){return this.dapHttp.get("restful/service/itemGroup/ItemGroup/".concat(e))}},{key:"getMaterialList",value:function(e){return this.dapHttp.get("restful/service/material/Material/".concat(e))}},{key:"create",value:function(e){return this.dapHttp.post("restful/service/quotation/Quotation/Create",{params:e})}},{key:"getTransactionType",value:function(){return this.dapHttp.get("restful/service/quoteType/QuoteType/QuoteTypeListOpen")}},{key:"getWarehouseList",value:function(){return this.pctHttp.get("restful/service/warehouse/Warehouse/UserWarehouse?selected_warehouse_ids=&zbSearchSelf=true")}},{key:"getQuotationInfo",value:function(e){return this.dapHttp.get("restful/service/quotation/Quotation/QuotationDetail?id=".concat(e))}},{key:"modify",value:function(e,t){var n=this.createDwDataSet(e,t,"U");return this.dapHttp.put("restful/service/quotation/Quotation/Modify",n)}},{key:"quote",value:function(e,t){var n=this.createDwDataSet(e,t,"U");return this.dapHttp.post("restful/service/quotation/QuickWearPart/QuickWearPartsQuotation",n)}},{key:"disapprove",value:function(e){return this.dapHttp.put("restful/service/quotation/Quotation/QuotationDisApprove",{quotationId:e})}},{key:"getServiceOrderListForQuotation",value:function(e){var t=encodeURIComponent(JSON.stringify(e));return this.dapHttp.get("restful/service/serviceOrder/ServiceOrder/ServiceOrderListForQuotation?params=".concat(t))}},{key:"getServiceOrderByIdForOpener",value:function(e){return this.dapHttp.get("restful/service/serviceOrder/ServiceOrder/ServiceOrderByIdForOpener?id=".concat(e))}},{key:"getQuotationStatus",value:function(e){return this.dapHttp.get("restful/service/quotation/QuickWearPart/QuotationStatus?quotationId=".concat(e))}},{key:"createDwDataSet",value:function(e,t,n){var r={};return Object.assign(r,e),r.$state=n,r.quotation_id=t,{dataSet:{quotation:r}}}}]),e}();return e.\u0275fac=function(t){return new(t||e)(p.\u0275\u0275inject(w.DwDapHttpClient),p.\u0275\u0275inject(y.k),p.\u0275\u0275inject(o.DatePipe))},e.\u0275prov=p.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(),_=r(9682),x=function(){var e=function(){function e(t,n){s(this,e),this.dwHttp=t,this.selectModalService=n,this.config={modalTitle:"\u9009\u62e9\u5ba2\u6237",modalWidth:"40%",tableMultiSelect:!0,tableIdField:"customer_id",tableNameField:"customer_name",returnFields:["customer_code","customer_name"],tablePageSize:10,tableColDefs:[{title:"\u5ba2\u6237\u7f16\u53f7",field:"customer_code"},{title:"\u5ba2\u6237\u540d\u79f0",field:"customer_name"}],tableCustomTag:function(e){return"("+e.customer_code+")"+e.customer_name},dataSource:new _.ApiServerPagingService(this.dwHttp,"restful/service/customer/Customer/List","customer",["customer_code","customer_name"])}}return m(e,[{key:"open",value:function(e){return this.selectModalService.open(this.config,e)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(p.\u0275\u0275inject(w.DwDapHttpClient),p.\u0275\u0275inject(_.DwSelectModalService))},e.\u0275prov=p.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e}(),E=r(53771),b=r(29872),C=r(62695),I=r(83522);function k(e,t){1&e&&(p.\u0275\u0275elementStart(0,"div",6),p.\u0275\u0275text(1,"\u586b\u5355\u4eba\u5458\uff1a"),p.\u0275\u0275elementEnd())}function D(e,t){1&e&&(p.\u0275\u0275elementStart(0,"div",6),p.\u0275\u0275text(1,"\u62a5\u4ef7\u4eba\u5458\uff1a"),p.\u0275\u0275elementEnd())}function O(e,t){if(1&e&&(p.\u0275\u0275elementStart(0,"div",3),p.\u0275\u0275elementStart(1,"div",6),p.\u0275\u0275text(2,"\u8054\u7cfb\u4eba\uff1a"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(3,"div",5),p.\u0275\u0275text(4),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd()),2&e){var n=p.\u0275\u0275nextContext();p.\u0275\u0275advance(4),p.\u0275\u0275textInterpolate(n.quotationInfo.contact)}}function P(e,t){if(1&e&&(p.\u0275\u0275elementStart(0,"div",3),p.\u0275\u0275elementStart(1,"div",6),p.\u0275\u0275text(2,"\u670d\u52a1\u5de5\u5355\uff1a"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(3,"div",5),p.\u0275\u0275text(4),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd()),2&e){var n=p.\u0275\u0275nextContext();p.\u0275\u0275advance(4),p.\u0275\u0275textInterpolate(n.quotationInfo.service_order_no)}}function M(e,t){if(1&e&&(p.\u0275\u0275elementStart(0,"div",3),p.\u0275\u0275elementStart(1,"div",6),p.\u0275\u0275text(2,"\u8054\u7cfb\u7535\u8bdd\uff1a"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(3,"div",5),p.\u0275\u0275text(4),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd()),2&e){var n=p.\u0275\u0275nextContext();p.\u0275\u0275advance(4),p.\u0275\u0275textInterpolate(n.quotationInfo.contact_number)}}function T(e,t){1&e&&(p.\u0275\u0275elementStart(0,"div",6),p.\u0275\u0275text(1,"\u5e8f\u5217\u53f7\uff1a"),p.\u0275\u0275elementEnd())}function V(e,t){1&e&&(p.\u0275\u0275elementStart(0,"div",6),p.\u0275\u0275text(1,"\u9879\u76ee\u53f7\uff1a"),p.\u0275\u0275elementEnd())}function A(e,t){1&e&&(p.\u0275\u0275elementStart(0,"div",5),p.\u0275\u0275text(1,"\u5df2\u6536\u6b3e"),p.\u0275\u0275elementEnd())}function F(e,t){1&e&&(p.\u0275\u0275elementStart(0,"div",5),p.\u0275\u0275text(1,"\u672a\u6536\u6b3e"),p.\u0275\u0275elementEnd())}function q(e,t){1&e&&(p.\u0275\u0275elementStart(0,"div",5),p.\u0275\u0275text(1,"\u5df2\u5f00\u7968"),p.\u0275\u0275elementEnd())}function N(e,t){1&e&&(p.\u0275\u0275elementStart(0,"div",5),p.\u0275\u0275text(1,"\u672a\u5f00\u7968"),p.\u0275\u0275elementEnd())}function L(e,t){if(1&e&&(p.\u0275\u0275elementStart(0,"div",1),p.\u0275\u0275element(1,"div",2),p.\u0275\u0275elementStart(2,"div",3),p.\u0275\u0275elementStart(3,"div",6),p.\u0275\u0275text(4,"ERP\u9500\u552e\u8ba2\u5355\u5355\u53f7\uff1a"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(5,"div",5),p.\u0275\u0275text(6),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(7,"div",3),p.\u0275\u0275elementStart(8,"div",6),p.\u0275\u0275text(9,"\u6536\u6b3e\u72b6\u6001\uff1a"),p.\u0275\u0275elementEnd(),p.\u0275\u0275template(10,A,2,0,"div",20),p.\u0275\u0275template(11,F,2,0,"div",20),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(12,"div",3),p.\u0275\u0275elementStart(13,"div",6),p.\u0275\u0275text(14,"\u5f00\u7968\u72b6\u6001\uff1a"),p.\u0275\u0275elementEnd(),p.\u0275\u0275template(15,q,2,0,"div",20),p.\u0275\u0275template(16,N,2,0,"div",20),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd()),2&e){var n=p.\u0275\u0275nextContext();p.\u0275\u0275advance(6),p.\u0275\u0275textInterpolate(n.quotationInfo.erp_so_no),p.\u0275\u0275advance(4),p.\u0275\u0275property("ngIf",n.quotationInfo.erp_collection_status),p.\u0275\u0275advance(1),p.\u0275\u0275property("ngIf",!n.quotationInfo.erp_collection_status),p.\u0275\u0275advance(4),p.\u0275\u0275property("ngIf",n.quotationInfo.erp_invoicing_status),p.\u0275\u0275advance(1),p.\u0275\u0275property("ngIf",!n.quotationInfo.erp_invoicing_status)}}function j(e,t){if(1&e&&(p.\u0275\u0275elementStart(0,"div",21),p.\u0275\u0275text(1," \u8d39\u7528\u5408\u8ba1\uff1a"),p.\u0275\u0275elementStart(2,"span"),p.\u0275\u0275text(3),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd()),2&e){var n=p.\u0275\u0275nextContext();p.\u0275\u0275advance(3),p.\u0275\u0275textInterpolate1("\uffe5",n.totalAmount,"")}}function R(e,t){if(1&e&&(p.\u0275\u0275elementStart(0,"tr"),p.\u0275\u0275elementStart(1,"td"),p.\u0275\u0275text(2),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(3,"td"),p.\u0275\u0275text(4),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(5,"td"),p.\u0275\u0275text(6),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(7,"td"),p.\u0275\u0275text(8),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(9,"td"),p.\u0275\u0275text(10),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(11,"td",22),p.\u0275\u0275text(12),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(13,"td",22),p.\u0275\u0275text(14),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(15,"td",22),p.\u0275\u0275text(16),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(17,"td"),p.\u0275\u0275text(18),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd()),2&e){var n=t.$implicit;p.\u0275\u0275advance(2),p.\u0275\u0275textInterpolate1(" ",n.item_code," "),p.\u0275\u0275advance(2),p.\u0275\u0275textInterpolate1(" ",n.item_name," "),p.\u0275\u0275advance(2),p.\u0275\u0275textInterpolate1(" ",n.item_spec," "),p.\u0275\u0275advance(2),p.\u0275\u0275textInterpolate1(" ",n.item_model," "),p.\u0275\u0275advance(2),p.\u0275\u0275textInterpolate1(" ",n.item_unit," "),p.\u0275\u0275advance(2),p.\u0275\u0275textInterpolate1(" ",n.price," "),p.\u0275\u0275advance(2),p.\u0275\u0275textInterpolate1(" ",n.quality," "),p.\u0275\u0275advance(2),p.\u0275\u0275textInterpolate1(" ",(n.price*n.quality).toFixed(2)," "),p.\u0275\u0275advance(2),p.\u0275\u0275textInterpolate1(" ",n.remark," ")}}function H(e,t){if(1&e&&(p.\u0275\u0275elementStart(0,"tr"),p.\u0275\u0275elementStart(1,"td"),p.\u0275\u0275text(2),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(3,"td"),p.\u0275\u0275text(4),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(5,"td",22),p.\u0275\u0275text(6),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(7,"td"),p.\u0275\u0275text(8),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd()),2&e){var n=t.$implicit;p.\u0275\u0275advance(2),p.\u0275\u0275textInterpolate1(" ",n.item_code," "),p.\u0275\u0275advance(2),p.\u0275\u0275textInterpolate1(" ",n.item_name," "),p.\u0275\u0275advance(2),p.\u0275\u0275textInterpolate1(" ",n.price," "),p.\u0275\u0275advance(2),p.\u0275\u0275textInterpolate1(" ",n.remark," ")}}function z(e,t){if(1&e&&(p.\u0275\u0275elementContainerStart(0),p.\u0275\u0275elementStart(1,"div",11),p.\u0275\u0275text(2," \u670d\u52a1\u8d39\uff1a\uff08 \u5408\u8ba1\uff1a"),p.\u0275\u0275elementStart(3,"span"),p.\u0275\u0275text(4),p.\u0275\u0275elementEnd(),p.\u0275\u0275text(5," \uff09 "),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(6,"dw-table",23,24),p.\u0275\u0275elementStart(8,"thead"),p.\u0275\u0275elementStart(9,"tr",14),p.\u0275\u0275elementStart(10,"th",25),p.\u0275\u0275elementStart(11,"span",16),p.\u0275\u0275text(12,"\u9879\u76ee\u7f16\u53f7"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(13,"th",26),p.\u0275\u0275elementStart(14,"span",16),p.\u0275\u0275text(15,"\u9879\u76ee\u540d\u79f0"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(16,"th",27),p.\u0275\u0275elementStart(17,"span",16),p.\u0275\u0275text(18,"\u4ef7\u683c"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(19,"th",28),p.\u0275\u0275elementStart(20,"span",16),p.\u0275\u0275text(21,"\u5907\u6ce8"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(22,"tbody"),p.\u0275\u0275template(23,H,9,4,"tr",18),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementContainerEnd()),2&e){var n=p.\u0275\u0275reference(7),r=p.\u0275\u0275nextContext();p.\u0275\u0275advance(4),p.\u0275\u0275textInterpolate1("\uffe5",r.itemAmountTotal,""),p.\u0275\u0275advance(2),p.\u0275\u0275property("dwData",r.serviceItems)("dwFrontPagination",!1)("dwShowPagination",!1),p.\u0275\u0275advance(17),p.\u0275\u0275property("ngForOf",n.data)}}var G=function(){return{x:"1100px"}},Q=function(){var e=function(){function e(t,n){s(this,e),this.quotationService=t,this.message=n,this.quotationInfo={type:"1",buy_quickwear_part:!1,employee_name:"",doc_date:"",quote_type:"",quote_type_name:"",service_order_no:"",customer_name:"",product_file_name:"",sn:"",specification:"",model:"",remark:"",warehouse_name:""},this.spareParts=[],this.serviceItems=[],this.partAmountTotal="0.00",this.itemAmountTotal="0.00",this.totalAmount="0.00",this.isIntegrated=!1}return m(e,[{key:"initData",value:function(e,t){var n=this;this.isIntegrated=t,this.quotationService.getQuotationInfo(e).subscribe(function(e){if(e.success){var t=e.data.quotation[0];t.type=t.type||t.file_type,n.quotationInfo=t,n.spareParts=t.child.quotation_details.filter(function(e){return"1"===e.expense_type}),n.serviceItems=t.child.quotation_details.filter(function(e){return"2"===e.expense_type}),n.partPriceChange(),n.itemPriceChange()}else n.message.create("error",e.message)},function(e){e.hasOwnProperty("error")&&e.error.hasOwnProperty("errorMessage")&&e.error.errorMessage&&n.message.error(e.error.errorMessage)})}},{key:"ngOnInit",value:function(){}},{key:"partPriceChange",value:function(){var e=this;this.partAmountTotal="0.00",this.spareParts.forEach(function(t){e.partAmountTotal=(parseFloat(e.partAmountTotal)+t.price*t.quality).toFixed(2)}),this.totalAmount=(parseFloat(this.partAmountTotal)+parseFloat(this.itemAmountTotal)).toFixed(2)}},{key:"itemPriceChange",value:function(){var e=this;this.itemAmountTotal="0.00",this.serviceItems.forEach(function(t){e.itemAmountTotal=(parseFloat(e.itemAmountTotal)+t.price).toFixed(2)}),this.totalAmount=(parseFloat(this.partAmountTotal)+parseFloat(this.itemAmountTotal)).toFixed(2)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(p.\u0275\u0275directiveInject(S),p.\u0275\u0275directiveInject(h.DwMessageService))},e.\u0275cmp=p.\u0275\u0275defineComponent({type:e,selectors:[["app-quotation-detail"]],decls:109,vars:30,consts:[[1,"sub-title"],["dw-row",""],[2,"width","20px"],["dw-col","","dwSpan","7",1,"flex-box"],["class","label",4,"ngIf"],[1,"info"],[1,"label"],["dw-col","","dwSpan","7","class","flex-box",4,"ngIf"],["dw-row","",4,"ngIf"],["dw-col","","dwSpan","21",1,"flex-box"],["class","total",4,"ngIf"],[1,"total-amount"],[3,"dwData","dwFrontPagination","dwShowPagination","dwScroll"],["dwTable2",""],["dw-tr",""],["dw-th",""],["translate",""],["dw-th","","dwAlign","right"],[4,"ngFor","ngForOf"],[4,"ngIf"],["class","info",4,"ngIf"],[1,"total"],["dwAlign","right"],[3,"dwData","dwFrontPagination","dwShowPagination"],["dwTable3",""],["dw-th","","width","144"],["dw-th","","width","160"],["dw-th","","width","136","dwAlign","right"],["dw-th","","width","264"]],template:function(e,t){if(1&e&&(p.\u0275\u0275elementStart(0,"div",0),p.\u0275\u0275text(1,"\u57fa\u672c\u4fe1\u606f"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(2,"div",1),p.\u0275\u0275element(3,"div",2),p.\u0275\u0275elementStart(4,"div",3),p.\u0275\u0275template(5,k,2,0,"div",4),p.\u0275\u0275template(6,D,2,0,"div",4),p.\u0275\u0275elementStart(7,"div",5),p.\u0275\u0275text(8),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(9,"div",3),p.\u0275\u0275elementStart(10,"div",6),p.\u0275\u0275text(11,"\u586b\u5355\u65e5\u671f\uff1a"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(12,"div",5),p.\u0275\u0275text(13),p.\u0275\u0275pipe(14,"date"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275template(15,O,5,1,"div",7),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(16,"div",1),p.\u0275\u0275element(17,"div",2),p.\u0275\u0275elementStart(18,"div",3),p.\u0275\u0275elementStart(19,"div",6),p.\u0275\u0275text(20,"\u62a5\u4ef7\u7c7b\u578b\uff1a"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(21,"div",5),p.\u0275\u0275text(22),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275template(23,P,5,1,"div",7),p.\u0275\u0275elementStart(24,"div",3),p.\u0275\u0275elementStart(25,"div",6),p.\u0275\u0275text(26,"\u4ed3\u5e93\uff1a"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(27,"div",5),p.\u0275\u0275text(28),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275template(29,M,5,1,"div",7),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(30,"div",1),p.\u0275\u0275element(31,"div",2),p.\u0275\u0275elementStart(32,"div",3),p.\u0275\u0275elementStart(33,"div",6),p.\u0275\u0275text(34,"\u5ba2\u6237\uff1a"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(35,"div",5),p.\u0275\u0275text(36),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(37,"div",3),p.\u0275\u0275elementStart(38,"div",6),p.\u0275\u0275text(39,"\u4ea7\u54c1\uff1a"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(40,"div",5),p.\u0275\u0275text(41),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(42,"div",3),p.\u0275\u0275template(43,T,2,0,"div",4),p.\u0275\u0275template(44,V,2,0,"div",4),p.\u0275\u0275elementStart(45,"div",5),p.\u0275\u0275text(46),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(47,"div",1),p.\u0275\u0275element(48,"div",2),p.\u0275\u0275elementStart(49,"div",3),p.\u0275\u0275elementStart(50,"div",6),p.\u0275\u0275text(51,"\u89c4\u683c\uff1a"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(52,"div",5),p.\u0275\u0275text(53),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(54,"div",3),p.\u0275\u0275elementStart(55,"div",6),p.\u0275\u0275text(56,"\u578b\u53f7\uff1a"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(57,"div",5),p.\u0275\u0275text(58),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275template(59,L,17,5,"div",8),p.\u0275\u0275elementStart(60,"div",1),p.\u0275\u0275element(61,"div",2),p.\u0275\u0275elementStart(62,"div",9),p.\u0275\u0275elementStart(63,"div",6),p.\u0275\u0275text(64,"\u5907\u6ce8\uff1a"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(65,"div",5),p.\u0275\u0275text(66),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(67,"div",0),p.\u0275\u0275text(68,"\u62a5\u4ef7\u660e\u7ec6"),p.\u0275\u0275elementEnd(),p.\u0275\u0275template(69,j,4,1,"div",10),p.\u0275\u0275elementStart(70,"div",11),p.\u0275\u0275text(71," \u6750\u6599\u8d39\uff1a\uff08 \u5408\u8ba1\uff1a"),p.\u0275\u0275elementStart(72,"span"),p.\u0275\u0275text(73),p.\u0275\u0275elementEnd(),p.\u0275\u0275text(74," \uff09\n"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(75,"dw-table",12,13),p.\u0275\u0275elementStart(77,"thead"),p.\u0275\u0275elementStart(78,"tr",14),p.\u0275\u0275elementStart(79,"th",15),p.\u0275\u0275elementStart(80,"span",16),p.\u0275\u0275text(81,"\u7f16\u53f7"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(82,"th",15),p.\u0275\u0275elementStart(83,"span",16),p.\u0275\u0275text(84,"\u540d\u79f0"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(85,"th",15),p.\u0275\u0275elementStart(86,"span",16),p.\u0275\u0275text(87,"\u89c4\u683c"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(88,"th",15),p.\u0275\u0275elementStart(89,"span",16),p.\u0275\u0275text(90,"\u578b\u53f7"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(91,"th",15),p.\u0275\u0275elementStart(92,"span",16),p.\u0275\u0275text(93,"\u5355\u4f4d"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(94,"th",17),p.\u0275\u0275elementStart(95,"span",16),p.\u0275\u0275text(96,"\u5355\u4ef7"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(97,"th",17),p.\u0275\u0275elementStart(98,"span",16),p.\u0275\u0275text(99,"\u6570\u91cf"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(100,"th",17),p.\u0275\u0275elementStart(101,"span",16),p.\u0275\u0275text(102,"\u91d1\u989d"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(103,"th",15),p.\u0275\u0275elementStart(104,"span",16),p.\u0275\u0275text(105,"\u5907\u6ce8"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(106,"tbody"),p.\u0275\u0275template(107,R,19,9,"tr",18),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275template(108,z,24,5,"ng-container",19)),2&e){var n=p.\u0275\u0275reference(76);p.\u0275\u0275advance(5),p.\u0275\u0275property("ngIf",!t.quotationInfo.buy_quickwear_part),p.\u0275\u0275advance(1),p.\u0275\u0275property("ngIf",t.quotationInfo.buy_quickwear_part),p.\u0275\u0275advance(2),p.\u0275\u0275textInterpolate(t.quotationInfo.employee_name),p.\u0275\u0275advance(5),p.\u0275\u0275textInterpolate(p.\u0275\u0275pipeBind2(14,26,t.quotationInfo.doc_date,"yyyy-MM-dd")),p.\u0275\u0275advance(2),p.\u0275\u0275property("ngIf",t.quotationInfo.buy_quickwear_part),p.\u0275\u0275advance(7),p.\u0275\u0275textInterpolate(t.quotationInfo.quote_type_name),p.\u0275\u0275advance(1),p.\u0275\u0275property("ngIf",!t.quotationInfo.buy_quickwear_part),p.\u0275\u0275advance(5),p.\u0275\u0275textInterpolate(t.quotationInfo.warehouse_name),p.\u0275\u0275advance(1),p.\u0275\u0275property("ngIf",t.quotationInfo.buy_quickwear_part),p.\u0275\u0275advance(7),p.\u0275\u0275textInterpolate(t.quotationInfo.customer_name),p.\u0275\u0275advance(5),p.\u0275\u0275textInterpolate(t.quotationInfo.product_file_name),p.\u0275\u0275advance(2),p.\u0275\u0275property("ngIf","1"===t.quotationInfo.type),p.\u0275\u0275advance(1),p.\u0275\u0275property("ngIf","2"===t.quotationInfo.type),p.\u0275\u0275advance(2),p.\u0275\u0275textInterpolate(t.quotationInfo.sn),p.\u0275\u0275advance(7),p.\u0275\u0275textInterpolate(t.quotationInfo.specification),p.\u0275\u0275advance(5),p.\u0275\u0275textInterpolate(t.quotationInfo.model),p.\u0275\u0275advance(1),p.\u0275\u0275property("ngIf",t.isIntegrated),p.\u0275\u0275advance(7),p.\u0275\u0275textInterpolate(t.quotationInfo.remark),p.\u0275\u0275advance(3),p.\u0275\u0275property("ngIf",!t.quotationInfo.buy_quickwear_part),p.\u0275\u0275advance(4),p.\u0275\u0275textInterpolate1("\uffe5",t.partAmountTotal,""),p.\u0275\u0275advance(2),p.\u0275\u0275property("dwData",t.spareParts)("dwFrontPagination",!1)("dwShowPagination",!1)("dwScroll",p.\u0275\u0275pureFunction0(29,G)),p.\u0275\u0275advance(32),p.\u0275\u0275property("ngForOf",n.data),p.\u0275\u0275advance(1),p.\u0275\u0275property("ngIf",!t.quotationInfo.buy_quickwear_part)}},directives:[b.DwRowDirective,b.DwColDirective,o.NgIf,C.DwTableComponent,C.DwTheadComponent,C.DwTrDirective,C.DwTableCellDirective,C.DwThMeasureDirective,I.TranslateDirective,C.DwCellAlignDirective,C.DwTbodyComponent,o.NgForOf],pipes:[o.DatePipe],styles:[".sub-title[_ngcontent-%COMP%]{margin-left:0;margin-bottom:24px}.sub-title[_ngcontent-%COMP%]:first-of-type{margin-top:0;margin-bottom:16px}.total-amount[_ngcontent-%COMP%]{height:49px;line-height:48px;color:#000000d9;font-weight:bold;font-size:16px;padding:0 24px;border:1px solid #f0f0f0;border-bottom:0;margin-top:16px}.total-amount[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#fe3a3a}.total[_ngcontent-%COMP%]{height:64px;line-height:64px;color:#000000d9;font-weight:bold;font-size:24px;padding:0 24px;background:#f2f2f2}.total[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#fe3a3a;font-size:28px}"]}),e}(),W=r(45890),B=r(97834),$=r(80677),U=r(80419),K=r(85773),Z=r(41937),J=r(67280),Y=r(8852),X=r(93761),ee=r(96670),te=r(37568),ne=r(17494),re=r(85277),ie=r(78169),ae=r(88059),oe=r(64840),le=r(89842),de=["child"];function ce(e,t){if(1&e){var n=p.\u0275\u0275getCurrentView();p.\u0275\u0275elementStart(0,"em",57),p.\u0275\u0275listener("click",function(){return p.\u0275\u0275restoreView(n),p.\u0275\u0275nextContext(2).clear("customer")}),p.\u0275\u0275elementEnd()}}function se(e,t){if(1&e){var n=p.\u0275\u0275getCurrentView();p.\u0275\u0275template(0,ce,1,0,"em",54),p.\u0275\u0275elementStart(1,"button",55),p.\u0275\u0275listener("click",function(e){return p.\u0275\u0275restoreView(n),p.\u0275\u0275nextContext().openDataWin(e,"customer")}),p.\u0275\u0275element(2,"em",56),p.\u0275\u0275elementEnd()}if(2&e){var r=p.\u0275\u0275nextContext();p.\u0275\u0275property("ngIf",r.searchForm.value.customer_name)}}function ue(e,t){if(1&e){var n=p.\u0275\u0275getCurrentView();p.\u0275\u0275elementStart(0,"em",57),p.\u0275\u0275listener("click",function(){return p.\u0275\u0275restoreView(n),p.\u0275\u0275nextContext(2).clear("service_order_doc_no")}),p.\u0275\u0275elementEnd()}}function me(e,t){if(1&e&&p.\u0275\u0275template(0,ue,1,0,"em",54),2&e){var n=p.\u0275\u0275nextContext();p.\u0275\u0275property("ngIf",n.searchForm.value.service_order_doc_no)}}function pe(e,t){1&e&&(p.\u0275\u0275elementStart(0,"span",24),p.\u0275\u0275text(1,"\u5e8f\u5217\u53f7"),p.\u0275\u0275elementEnd())}function fe(e,t){1&e&&(p.\u0275\u0275elementStart(0,"span",24),p.\u0275\u0275text(1,"\u9879\u76ee\u53f7"),p.\u0275\u0275elementEnd())}function he(e,t){1&e&&(p.\u0275\u0275elementStart(0,"span",24),p.\u0275\u0275text(1,"\u5e8f\u5217\u53f7/\u9879\u76ee\u53f7"),p.\u0275\u0275elementEnd())}function ve(e,t){1&e&&(p.\u0275\u0275elementStart(0,"th",34),p.\u0275\u0275elementStart(1,"span",24),p.\u0275\u0275text(2,"ERP\u9500\u552e\u8ba2\u5355\u5355\u53f7"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd())}function ge(e,t){1&e&&(p.\u0275\u0275elementStart(0,"th",58),p.\u0275\u0275elementStart(1,"span",24),p.\u0275\u0275text(2,"\u6536\u6b3e\u72b6\u6001"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd())}function we(e,t){1&e&&(p.\u0275\u0275elementStart(0,"th",58),p.\u0275\u0275elementStart(1,"span",24),p.\u0275\u0275text(2,"\u5f00\u7968\u72b6\u6001"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd())}function ye(e,t){if(1&e&&(p.\u0275\u0275elementStart(0,"td"),p.\u0275\u0275text(1),p.\u0275\u0275elementEnd()),2&e){var n=p.\u0275\u0275nextContext().$implicit;p.\u0275\u0275advance(1),p.\u0275\u0275textInterpolate1(" ",n.erp_so_no," ")}}function Se(e,t){1&e&&(p.\u0275\u0275elementStart(0,"td"),p.\u0275\u0275text(1," \u5df2\u6536\u6b3e "),p.\u0275\u0275elementEnd())}function _e(e,t){1&e&&(p.\u0275\u0275elementStart(0,"td"),p.\u0275\u0275text(1," \u672a\u6536\u6b3e "),p.\u0275\u0275elementEnd())}function xe(e,t){1&e&&(p.\u0275\u0275elementStart(0,"td"),p.\u0275\u0275text(1," \u5df2\u5f00\u7968 "),p.\u0275\u0275elementEnd())}function Ee(e,t){1&e&&(p.\u0275\u0275elementStart(0,"td"),p.\u0275\u0275text(1," \u672a\u5f00\u7968 "),p.\u0275\u0275elementEnd())}function be(e,t){1&e&&(p.\u0275\u0275elementStart(0,"td",70),p.\u0275\u0275element(1,"span",71),p.\u0275\u0275text(2,"\u5f85\u5ba1\u6838 "),p.\u0275\u0275elementEnd())}function Ce(e,t){1&e&&(p.\u0275\u0275elementStart(0,"td",70),p.\u0275\u0275element(1,"span",72),p.\u0275\u0275text(2,"\u5df2\u5ba1\u6838 "),p.\u0275\u0275elementEnd())}function Ie(e,t){if(1&e){var n=p.\u0275\u0275getCurrentView();p.\u0275\u0275elementStart(0,"div",73),p.\u0275\u0275listener("click",function(){p.\u0275\u0275restoreView(n);var e=p.\u0275\u0275nextContext().$implicit;return p.\u0275\u0275nextContext().modify(e.quotation_id)}),p.\u0275\u0275element(1,"img",74),p.\u0275\u0275element(2,"img",75),p.\u0275\u0275elementEnd()}2&e&&p.\u0275\u0275property("dwActionId","modify")("dwDefaultAuthorized","disabled")}function ke(e,t){if(1&e){var n=p.\u0275\u0275getCurrentView();p.\u0275\u0275elementStart(0,"div",76),p.\u0275\u0275elementStart(1,"a",77),p.\u0275\u0275listener("dwOnConfirm",function(){p.\u0275\u0275restoreView(n);var e=p.\u0275\u0275nextContext().$implicit;return p.\u0275\u0275nextContext().delete(e.quotation_id)}),p.\u0275\u0275pipe(2,"translate"),p.\u0275\u0275pipe(3,"translate"),p.\u0275\u0275pipe(4,"translate"),p.\u0275\u0275elementStart(5,"a",78),p.\u0275\u0275element(6,"img",79),p.\u0275\u0275element(7,"img",80),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd()}2&e&&(p.\u0275\u0275property("dwActionId","delete")("dwDefaultAuthorized","disabled"),p.\u0275\u0275advance(1),p.\u0275\u0275property("dwPopconfirmTitle",p.\u0275\u0275pipeBind1(2,6,"\u662f\u5426\u5220\u9664"))("dwOkText",p.\u0275\u0275pipeBind1(3,8,"dw-determine"))("dwCancelText",p.\u0275\u0275pipeBind1(4,10,"dw-cancel"))("dwPopconfirmPlacement","topRight"))}function De(e,t){if(1&e){var n=p.\u0275\u0275getCurrentView();p.\u0275\u0275elementStart(0,"div",81),p.\u0275\u0275listener("click",function(){p.\u0275\u0275restoreView(n);var e=p.\u0275\u0275nextContext().$implicit;return p.\u0275\u0275nextContext().approve(e.quotation_id)}),p.\u0275\u0275element(1,"img",82),p.\u0275\u0275element(2,"img",83),p.\u0275\u0275elementEnd()}2&e&&p.\u0275\u0275property("dwActionId","approve")("dwDefaultAuthorized","disabled")}function Oe(e,t){if(1&e){var n=p.\u0275\u0275getCurrentView();p.\u0275\u0275elementStart(0,"div",84),p.\u0275\u0275listener("click",function(){p.\u0275\u0275restoreView(n);var e=p.\u0275\u0275nextContext().$implicit;return p.\u0275\u0275nextContext().disapprove(e.quotation_id)}),p.\u0275\u0275element(1,"img",85),p.\u0275\u0275element(2,"img",86),p.\u0275\u0275elementEnd()}2&e&&p.\u0275\u0275property("dwActionId","disapprove")("dwDefaultAuthorized","disabled")}function Pe(e,t){if(1&e){var n=p.\u0275\u0275getCurrentView();p.\u0275\u0275elementStart(0,"tr"),p.\u0275\u0275elementStart(1,"td"),p.\u0275\u0275text(2),p.\u0275\u0275pipe(3,"date"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(4,"td",59),p.\u0275\u0275elementStart(5,"a",60),p.\u0275\u0275listener("click",function(){var e=p.\u0275\u0275restoreView(n).$implicit;return p.\u0275\u0275nextContext().detail(e)}),p.\u0275\u0275text(6),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(7,"td",59),p.\u0275\u0275text(8),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(9,"td",59),p.\u0275\u0275text(10),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(11,"td",59),p.\u0275\u0275text(12),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(13,"td",59),p.\u0275\u0275text(14),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(15,"td",61),p.\u0275\u0275text(16),p.\u0275\u0275elementEnd(),p.\u0275\u0275template(17,ye,2,1,"td",62),p.\u0275\u0275template(18,Se,2,0,"td",62),p.\u0275\u0275template(19,_e,2,0,"td",62),p.\u0275\u0275template(20,xe,2,0,"td",62),p.\u0275\u0275template(21,Ee,2,0,"td",62),p.\u0275\u0275template(22,be,3,0,"td",63),p.\u0275\u0275template(23,Ce,3,0,"td",63),p.\u0275\u0275elementStart(24,"td",64),p.\u0275\u0275elementStart(25,"div",65),p.\u0275\u0275template(26,Ie,3,2,"div",66),p.\u0275\u0275template(27,ke,8,12,"div",67),p.\u0275\u0275template(28,De,3,2,"div",68),p.\u0275\u0275template(29,Oe,3,2,"div",69),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd()}if(2&e){var r=t.$implicit,i=p.\u0275\u0275nextContext();p.\u0275\u0275advance(2),p.\u0275\u0275textInterpolate1(" ",p.\u0275\u0275pipeBind2(3,18,r.doc_date,"yyyy-MM-dd")," "),p.\u0275\u0275advance(4),p.\u0275\u0275textInterpolate(r.doc_no),p.\u0275\u0275advance(2),p.\u0275\u0275textInterpolate1(" ",r.service_order_no," "),p.\u0275\u0275advance(2),p.\u0275\u0275textInterpolate1(" ",r.customer_name," "),p.\u0275\u0275advance(2),p.\u0275\u0275textInterpolate1(" ",r.product_file_name," "),p.\u0275\u0275advance(2),p.\u0275\u0275textInterpolate1(" ",r.sn," "),p.\u0275\u0275advance(2),p.\u0275\u0275textInterpolate1(" ",null!==r.amount?r.amount.toFixed(2):"0.00"," "),p.\u0275\u0275advance(1),p.\u0275\u0275property("ngIf",i.isIntegrated),p.\u0275\u0275advance(1),p.\u0275\u0275property("ngIf",r.erp_collection_status&&i.isIntegrated),p.\u0275\u0275advance(1),p.\u0275\u0275property("ngIf",!r.erp_collection_status&&i.isIntegrated),p.\u0275\u0275advance(1),p.\u0275\u0275property("ngIf",r.erp_invoicing_status&&i.isIntegrated),p.\u0275\u0275advance(1),p.\u0275\u0275property("ngIf",!r.erp_invoicing_status&&i.isIntegrated),p.\u0275\u0275advance(1),p.\u0275\u0275property("ngIf",!r.approve_status),p.\u0275\u0275advance(1),p.\u0275\u0275property("ngIf",r.approve_status),p.\u0275\u0275advance(3),p.\u0275\u0275property("ngIf",!r.approve_status),p.\u0275\u0275advance(1),p.\u0275\u0275property("ngIf",!r.approve_status),p.\u0275\u0275advance(1),p.\u0275\u0275property("ngIf",!r.approve_status),p.\u0275\u0275advance(1),p.\u0275\u0275property("ngIf",r.approve_status)}}function Me(e,t){if(1&e){var n=p.\u0275\u0275getCurrentView();p.\u0275\u0275elementStart(0,"dw-tag",87),p.\u0275\u0275listener("dwCheckedChange",function(e){return p.\u0275\u0275restoreView(n).$implicit.checked=e})("dwCheckedChange",function(e){var t=p.\u0275\u0275restoreView(n).$implicit;return p.\u0275\u0275nextContext().handleChange(e,t)}),p.\u0275\u0275text(1),p.\u0275\u0275elementEnd()}if(2&e){var r=t.$implicit;p.\u0275\u0275property("dwChecked",r.checked),p.\u0275\u0275advance(1),p.\u0275\u0275textInterpolate1(" ",r.text," ")}}function Te(e,t){1&e&&(p.\u0275\u0275elementStart(0,"span",24),p.\u0275\u0275text(1,"\u5e8f\u5217\u53f7"),p.\u0275\u0275elementEnd())}function Ve(e,t){1&e&&(p.\u0275\u0275elementStart(0,"span",24),p.\u0275\u0275text(1,"\u9879\u76ee\u53f7"),p.\u0275\u0275elementEnd())}function Ae(e,t){1&e&&(p.\u0275\u0275elementStart(0,"span",24),p.\u0275\u0275text(1,"\u5e8f\u5217\u53f7/\u9879\u76ee\u53f7"),p.\u0275\u0275elementEnd())}function Fe(e,t){1&e&&(p.\u0275\u0275elementStart(0,"th",34),p.\u0275\u0275elementStart(1,"span",24),p.\u0275\u0275text(2,"ERP\u9500\u552e\u8ba2\u5355\u5355\u53f7"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd())}function qe(e,t){1&e&&(p.\u0275\u0275elementStart(0,"th",58),p.\u0275\u0275elementStart(1,"span",24),p.\u0275\u0275text(2,"\u6536\u6b3e\u72b6\u6001"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd())}function Ne(e,t){1&e&&(p.\u0275\u0275elementStart(0,"th",58),p.\u0275\u0275elementStart(1,"span",24),p.\u0275\u0275text(2,"\u5f00\u7968\u72b6\u6001"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd())}function Le(e,t){1&e&&(p.\u0275\u0275elementStart(0,"th",88),p.\u0275\u0275elementStart(1,"span",24),p.\u0275\u0275text(2,"\u72b6\u6001"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd())}function je(e,t){1&e&&(p.\u0275\u0275elementStart(0,"th",41),p.\u0275\u0275elementStart(1,"span",24),p.\u0275\u0275text(2,"\u64cd\u4f5c"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd())}function Re(e,t){if(1&e&&(p.\u0275\u0275elementStart(0,"td"),p.\u0275\u0275text(1),p.\u0275\u0275elementEnd()),2&e){var n=p.\u0275\u0275nextContext().$implicit;p.\u0275\u0275advance(1),p.\u0275\u0275textInterpolate1(" ",n.erp_so_no," ")}}function He(e,t){1&e&&(p.\u0275\u0275elementStart(0,"td"),p.\u0275\u0275text(1," \u5df2\u6536\u6b3e "),p.\u0275\u0275elementEnd())}function ze(e,t){1&e&&(p.\u0275\u0275elementStart(0,"td"),p.\u0275\u0275text(1," \u672a\u6536\u6b3e "),p.\u0275\u0275elementEnd())}function Ge(e,t){1&e&&(p.\u0275\u0275elementStart(0,"td"),p.\u0275\u0275text(1," \u5df2\u5f00\u7968 "),p.\u0275\u0275elementEnd())}function Qe(e,t){1&e&&(p.\u0275\u0275elementStart(0,"td"),p.\u0275\u0275text(1," \u672a\u5f00\u7968 "),p.\u0275\u0275elementEnd())}function We(e,t){1&e&&(p.\u0275\u0275elementContainerStart(0),p.\u0275\u0275element(1,"span",90),p.\u0275\u0275text(2,"\u5f85\u62a5\u4ef7 "),p.\u0275\u0275elementContainerEnd())}function Be(e,t){1&e&&(p.\u0275\u0275elementContainerStart(0),p.\u0275\u0275element(1,"span",71),p.\u0275\u0275text(2,"\u5f85\u5ba2\u6237\u786e\u8ba4 "),p.\u0275\u0275elementContainerEnd())}function $e(e,t){1&e&&(p.\u0275\u0275elementContainerStart(0),p.\u0275\u0275element(1,"span",72),p.\u0275\u0275text(2,"\u5f85\u53d1\u8d27 "),p.\u0275\u0275elementContainerEnd())}function Ue(e,t){1&e&&(p.\u0275\u0275elementContainerStart(0),p.\u0275\u0275element(1,"span",72),p.\u0275\u0275text(2,"\u90e8\u5206\u53d1\u8d27 "),p.\u0275\u0275elementContainerEnd())}function Ke(e,t){1&e&&(p.\u0275\u0275elementContainerStart(0),p.\u0275\u0275element(1,"span",91),p.\u0275\u0275text(2,"\u5168\u90e8\u53d1\u8d27 "),p.\u0275\u0275elementContainerEnd())}function Ze(e,t){if(1&e&&(p.\u0275\u0275elementStart(0,"td"),p.\u0275\u0275template(1,We,3,0,"ng-container",62),p.\u0275\u0275template(2,Be,3,0,"ng-container",62),p.\u0275\u0275template(3,$e,3,0,"ng-container",62),p.\u0275\u0275template(4,Ue,3,0,"ng-container",62),p.\u0275\u0275template(5,Ke,3,0,"ng-container",62),p.\u0275\u0275elementEnd()),2&e){var n=p.\u0275\u0275nextContext().$implicit;p.\u0275\u0275advance(1),p.\u0275\u0275property("ngIf","1"===n.status),p.\u0275\u0275advance(1),p.\u0275\u0275property("ngIf","2"===n.status),p.\u0275\u0275advance(1),p.\u0275\u0275property("ngIf","3"===n.status),p.\u0275\u0275advance(1),p.\u0275\u0275property("ngIf","5"===n.status),p.\u0275\u0275advance(1),p.\u0275\u0275property("ngIf","4"===n.status)}}function Je(e,t){if(1&e){var n=p.\u0275\u0275getCurrentView();p.\u0275\u0275elementStart(0,"div",95),p.\u0275\u0275listener("click",function(){p.\u0275\u0275restoreView(n);var e=p.\u0275\u0275nextContext(2).$implicit;return p.\u0275\u0275nextContext().quote(e)}),p.\u0275\u0275text(1),p.\u0275\u0275elementEnd()}if(2&e){var r=p.\u0275\u0275nextContext(2).$implicit;p.\u0275\u0275property("dwActionId","quote")("dwDefaultAuthorized","disabled"),p.\u0275\u0275advance(1),p.\u0275\u0275textInterpolate1(" ","1"===r.status?"\u62a5\u4ef7":"\u91cd\u65b0\u62a5\u4ef7"," ")}}function Ye(e,t){if(1&e){var n=p.\u0275\u0275getCurrentView();p.\u0275\u0275elementStart(0,"div",96),p.\u0275\u0275elementStart(1,"a",77),p.\u0275\u0275listener("dwOnConfirm",function(){p.\u0275\u0275restoreView(n);var e=p.\u0275\u0275nextContext(2).$implicit;return p.\u0275\u0275nextContext().delete(e.quotation_id)}),p.\u0275\u0275pipe(2,"translate"),p.\u0275\u0275pipe(3,"translate"),p.\u0275\u0275pipe(4,"translate"),p.\u0275\u0275elementStart(5,"a",97),p.\u0275\u0275text(6," \u5220\u9664 "),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd()}2&e&&(p.\u0275\u0275property("dwActionId","delete")("dwDefaultAuthorized","disabled"),p.\u0275\u0275advance(1),p.\u0275\u0275property("dwPopconfirmTitle",p.\u0275\u0275pipeBind1(2,6,"\u662f\u5426\u5220\u9664"))("dwOkText",p.\u0275\u0275pipeBind1(3,8,"dw-determine"))("dwCancelText",p.\u0275\u0275pipeBind1(4,10,"dw-cancel"))("dwPopconfirmPlacement","topRight"))}function Xe(e,t){if(1&e){var n=p.\u0275\u0275getCurrentView();p.\u0275\u0275elementStart(0,"div",95),p.\u0275\u0275listener("click",function(){p.\u0275\u0275restoreView(n);var e=p.\u0275\u0275nextContext(2).$implicit;return p.\u0275\u0275nextContext().disapprove(e.quotation_id)}),p.\u0275\u0275text(1," \u64a4\u5ba1 "),p.\u0275\u0275elementEnd()}2&e&&p.\u0275\u0275property("dwActionId","disapprove")("dwDefaultAuthorized","disabled")}function et(e,t){if(1&e&&(p.\u0275\u0275elementStart(0,"td",64),p.\u0275\u0275elementStart(1,"div",92),p.\u0275\u0275template(2,Je,2,3,"div",93),p.\u0275\u0275template(3,Ye,7,12,"div",94),p.\u0275\u0275template(4,Xe,2,2,"div",93),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd()),2&e){var n=p.\u0275\u0275nextContext().$implicit;p.\u0275\u0275advance(2),p.\u0275\u0275property("ngIf","1"===n.status||"2"===n.status),p.\u0275\u0275advance(1),p.\u0275\u0275property("ngIf","1"===n.status||"2"===n.status),p.\u0275\u0275advance(1),p.\u0275\u0275property("ngIf","3"===n.status)}}function tt(e,t){if(1&e){var n=p.\u0275\u0275getCurrentView();p.\u0275\u0275elementStart(0,"tr"),p.\u0275\u0275elementStart(1,"td"),p.\u0275\u0275text(2),p.\u0275\u0275pipe(3,"date"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(4,"td",59),p.\u0275\u0275elementStart(5,"a",60),p.\u0275\u0275listener("click",function(){var e=p.\u0275\u0275restoreView(n).$implicit;return p.\u0275\u0275nextContext().detail(e)}),p.\u0275\u0275text(6),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(7,"td",59),p.\u0275\u0275text(8),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(9,"td",59),p.\u0275\u0275text(10),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(11,"td",59),p.\u0275\u0275text(12),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(13,"td",61),p.\u0275\u0275text(14),p.\u0275\u0275elementEnd(),p.\u0275\u0275template(15,Re,2,1,"td",62),p.\u0275\u0275template(16,He,2,0,"td",62),p.\u0275\u0275template(17,ze,2,0,"td",62),p.\u0275\u0275template(18,Ge,2,0,"td",62),p.\u0275\u0275template(19,Qe,2,0,"td",62),p.\u0275\u0275template(20,Ze,6,5,"td",62),p.\u0275\u0275template(21,et,5,3,"td",89),p.\u0275\u0275elementEnd()}if(2&e){var r=t.$implicit,i=p.\u0275\u0275nextContext();p.\u0275\u0275advance(2),p.\u0275\u0275textInterpolate1(" ",p.\u0275\u0275pipeBind2(3,13,r.doc_date,"yyyy-MM-dd")," "),p.\u0275\u0275advance(4),p.\u0275\u0275textInterpolate(r.doc_no),p.\u0275\u0275advance(2),p.\u0275\u0275textInterpolate1(" ",r.customer_name," "),p.\u0275\u0275advance(2),p.\u0275\u0275textInterpolate1(" ",r.product_file_name," "),p.\u0275\u0275advance(2),p.\u0275\u0275textInterpolate1(" ",r.sn," "),p.\u0275\u0275advance(2),p.\u0275\u0275textInterpolate1(" ","1"!==r.status?r.amount.toFixed(2):"--"," "),p.\u0275\u0275advance(1),p.\u0275\u0275property("ngIf",i.isIntegrated&&"4"===i.state&&"0"===i.erp_collection_status),p.\u0275\u0275advance(1),p.\u0275\u0275property("ngIf",r.erp_collection_status&&i.isIntegrated&&"4"===i.state&&"0"===i.erp_collection_status),p.\u0275\u0275advance(1),p.\u0275\u0275property("ngIf",!r.erp_collection_status&&i.isIntegrated&&"4"===i.state&&"0"===i.erp_collection_status),p.\u0275\u0275advance(1),p.\u0275\u0275property("ngIf",r.erp_invoicing_status&&i.isIntegrated&&"4"===i.state&&"0"===i.erp_collection_status),p.\u0275\u0275advance(1),p.\u0275\u0275property("ngIf",!r.erp_invoicing_status&&i.isIntegrated&&"4"===i.state&&"0"===i.erp_collection_status),p.\u0275\u0275advance(1),p.\u0275\u0275property("ngIf",!("4"===i.state&&"1"===i.erp_collection_status)),p.\u0275\u0275advance(1),p.\u0275\u0275property("ngIf","4"!==i.state)}}function nt(e,t){1&e&&p.\u0275\u0275element(0,"app-quotation-detail",null,98)}function rt(e,t){if(1&e&&p.\u0275\u0275text(0),2&e){var n=p.\u0275\u0275nextContext();p.\u0275\u0275textInterpolate1("\u5171 ",n.rowCount," \u6761")}}var it=function(){return{x:"1300px",y:"calc(100vh - 171px - 140px)"}},at=function(){return{x:"100%",y:"calc(100vh - 171px - 140px)"}},ot=function(){return{overflow:"auto"}},lt=function(){var e=function(){function e(t,n,r,i,a,o,l,d,c,u){var m=this;if(s(this,e),this.commonHttpService=t,this.message=n,this.fb=r,this.quotationService=i,this.customerOpenerService=a,this.router=o,this._route=l,this.modalService=d,this.datePipe=c,this.customerSrv=u,this.DW_IN_MFA=B.ns,this.search={pageNumber:1,pageSize:10},this.quotation_id="",this.quotation_doc_no="",this.rowCount=0,this.dataList=[],this.isCollapsed=!1,this.detailTitle="",this.isIntegrated=!1,this.fileType="0",this.queryType=0,this.fiterTags=[{text:"\u5168\u90e8",checked:!1,value:"0",erp_collection_status:""},{text:"\u5f85\u62a5\u4ef7",checked:!0,value:"1",erp_collection_status:""},{text:"\u5f85\u5ba2\u6237\u786e\u8ba4",checked:!1,value:"2",erp_collection_status:""},{text:"\u5f85\u53d1\u8d27",checked:!1,value:"3",erp_collection_status:""},{text:"\u5df2\u53d1\u8d27",checked:!1,value:"4",erp_collection_status:""},{text:"\u5f85\u6536\u6b3e",checked:!1,value:"4",erp_collection_status:"0"},{text:"\u5df2\u5b8c\u6210",checked:!1,value:"4",erp_collection_status:"1"}],this.state="1",this.erp_collection_status="",e.useKeeper&&e.keeper)return e.keeper;this._route.paramMap.subscribe(function(e){var t=e.get("id")||"";t&&(m.quotation_id=t.split("@")[0],m.quotation_doc_no=t.split("@")[1])})}return m(e,[{key:"ngAfterViewInit",value:function(){console.log(this.child)}},{key:"ngOnDestroy",value:function(){this.subscription&&this.subscription.unsubscribe()}},{key:"ngOnInit",value:function(){var t=this;this.subscription=this.router.events.subscribe(function(n){if(n instanceof c.NavigationStart){var r=t.router.parseUrl(t.router.url).root.children[c.PRIMARY_OUTLET].segments,i=t.router.parseUrl(n.url).root.children[c.PRIMARY_OUTLET].segments,a=r[r.length-1].path,o=i[i.length-1].path,l=a.indexOf("@")>=0&&"quote"===o,d="quote"===a&&o.indexOf("@")>=0;l||d?(e.useKeeper=!0,e.keeper=t):(e.useKeeper=!1,e.keeper=t)}}),this.customerSrv.getIntegratedEnableStatus().subscribe(function(e){t.isIntegrated=e.data},function(e){e.hasOwnProperty("error")&&e.error.hasOwnProperty("errorMessage")&&e.error.errorMessage&&t.message.error(e.error.errorMessage)}),this.orderBy={sortFiled:"doc_no",sort:"ASC"},this.searchForm=this.fb.group({}),this.searchForm.addControl("date_range",new g.FormControl("")),this.searchForm.addControl("customer_code",new g.FormControl("")),this.searchForm.addControl("customer_name",new g.FormControl("")),this.searchForm.addControl("service_order_doc_no",new g.FormControl("")),e.useKeeper&&e.keeper&&(this.quotation_id="",this.quotation_doc_no="",this.queryType=1),this.loadData(),this.quotation_id&&(this.detail({quotation_id:this.quotation_id,approve_status:!0,doc_no:this.quotation_doc_no}),setTimeout(function(){t.child.initData(t.quotation_id,!1)},800)),this.commonHttpService.get("restful/service/serviceOrder/ServiceOrder/IsShowTypeOption").subscribe(function(e){t.fileType=e.data},function(e){e.hasOwnProperty("error")&&e.error.hasOwnProperty("errorMessage")&&e.error.errorMessage&&t.message.error(e.error.errorMessage)})}},{key:"reset",value:function(){this.searchForm=this.fb.group({}),this.searchForm.addControl("date_range",new g.FormControl("")),this.searchForm.addControl("customer_code",new g.FormControl("")),this.searchForm.addControl("customer_name",new g.FormControl("")),this.searchForm.addControl("service_order_doc_no",new g.FormControl("")),this.loadData()}},{key:"loadData",value:function(){var e=this,t=this.searchForm.value;""!==t.date_range&&t.date_range.length&&""!==t.date_range[0]?(t.date_range[0]=this.datePipe.transform(t.date_range[0],"yyyy-MM-dd"),t.date_range[1]=this.datePipe.transform(t.date_range[1],"yyyy-MM-dd")):t.date_range=["",""];var n={serviceOrderDocNo:this.searchForm.value.service_order_doc_no,customerCodes:this.searchForm.value.customer_code,pageNumber:String(this.search.pageNumber),pageSize:String(this.search.pageSize),orderBy:this.orderBy,dateRange:{startDate:t.date_range[0],endDate:t.date_range[1]},queryType:this.queryType+"",status:this.state,erp_collection_status:this.erp_collection_status};this.quotationService.getQuotationList(n).subscribe(function(t){e.dataList=t.data.quotation||[],e.rowCount=t.data.rowCount,e.onAfterSearch()},function(t){t.hasOwnProperty("error")&&t.error.hasOwnProperty("errorMessage")&&t.error.errorMessage&&e.message.error(t.error.errorMessage)})}},{key:"onTabChange",value:function(e){this.queryType=e.index,this.search.pageNumber=1,this.loadData()}},{key:"handleChange",value:function(e,t){if(e){var n,r=l(this.fiterTags);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.text!==t.text&&(i.checked=!1)}}catch(a){r.e(a)}finally{r.f()}this.state=t.value,this.erp_collection_status=t.erp_collection_status,this.search.pageNumber=1,this.loadData()}}},{key:"onPageSizeChange",value:function(){this.search.pageNumber=1,this.loadData()}},{key:"onPageIndexChange",value:function(e){this.search.pageNumber=e,this.loadData()}},{key:"openDataWin",value:function(e,t){var n=this;e.preventDefault(),this.customerOpenerService.open([]).subscribe(function(e){if(console.log(e),null!=e&&0!==e.length){var r=t+"_name",i=t+"_code";n[r]="",n[i]="",n.searchForm.get(r).setValue(""),n.searchForm.get(i).setValue(""),e.forEach(function(e){n[r]+=e[r]+",",n[i]+=e[i]+","}),0!==n[r].length&&(n[r]=n[r].substr(0,n[r].length-1)),0!==n[i].length&&(n[i]=n[i].substr(0,n[i].length-1)),n.searchForm.get(r).setValue(n[r]),n.searchForm.get(i).setValue(n[i])}})}},{key:"clear",value:function(e){"service_order_doc_no"===e?this.searchForm.get("service_order_doc_no").setValue(""):(this.searchForm.get("".concat(e,"_code")).setValue(""),this.searchForm.get("".concat(e,"_name")).setValue(""))}},{key:"detail",value:function(e){var t=this;this.isCollapsed=!0,this.detailTitle=e.buy_quickwear_part?'<div class="detail-title">\n                            \u6613\u635f\u4ef6\u9500\u552e\u62a5\u4ef7\u5355\n                            <p>'.concat(e.doc_no,'</p>\n                            <span class="').concat("1"===e.status?"bg_orange":"2"===e.status?"bg_red2":"3"===e.status||"5"===e.status?"bg_blue":"bg_blue2",'">\n                              ').concat("1"===e.status?"\u5f85\u62a5\u4ef7":"2"===e.status?"\u5f85\u5ba2\u6237\u786e\u8ba4":"3"===e.status?"\u5f85\u53d1\u8d27":"5"===e.status?"\u90e8\u5206\u53d1\u8d27":"\u5168\u90e8\u53d1\u8d27","\n                            </span>\n                          </div>"):e.approve_status?'<div class="detail-title">\n                          \u670d\u52a1\u62a5\u4ef7\u5355\n                          <p>'.concat(e.doc_no,'</p>\n                          <span class="bg_blue3">\u5df2\u5ba1\u6838</span>\n                        </div>'):'<div class="detail-title">\n                          \u670d\u52a1\u62a5\u4ef7\u5355\n                          <p>'.concat(e.doc_no,'</p>\n                          <span class="bg_red">\u5f85\u5ba1\u6838</span>\n                        </div>'),setTimeout(function(){t.child.initData(e.quotation_id,t.isIntegrated)})}},{key:"create",value:function(){this.router.navigate([(this.DW_IN_MFA?"/assc_crs":"")+"/crs/quotation/quotation-create"],{relativeTo:this._route})}},{key:"modify",value:function(e){this.router.navigate([(this.DW_IN_MFA?"/assc_crs":"")+"/crs/quotation/quotation-modify",e],{relativeTo:this._route})}},{key:"quote",value:function(e){var t=this,n={relativeTo:this._route,queryParams:{id:e.quotation_id}};this.quotationService.getQuotationStatus(e.quotation_id).subscribe(function(r){r.data===e.status?t.router.navigate([(t.DW_IN_MFA?"/assc_crs":"")+"/crs/quotation/quote"],n):(t.message.create("error","\u5f53\u524d\u8ba2\u5355\u72b6\u6001\u5df2\u53d1\u751f\u53d8\u5316"),t.search.pageNumber=1,t.loadData())},function(e){e.hasOwnProperty("error")&&e.error.hasOwnProperty("errorMessage")&&e.error.errorMessage&&t.message.error(e.error.errorMessage)})}},{key:"approve",value:function(e){var t=this;this.quotationService.approveQuotation(e).subscribe(function(e){e.success?(t.message.create("success","\u5ba1\u6838\u6210\u529f\uff01"),t.loadData()):t.message.create("error",e.message)},function(e){e.hasOwnProperty("error")&&e.error.hasOwnProperty("errorMessage")&&e.error.errorMessage&&t.message.error(e.error.errorMessage)})}},{key:"disapprove",value:function(e){var t=this;this.quotationService.disapprove(e).subscribe(function(e){t.message.create("success","\u64a4\u9500\u5ba1\u6838\u6210\u529f"),t.loadData()},function(e){t.modalService.error({dwTitle:e.error.errorMessage,dwWidth:"600px",dwOkText:"\u786e\u5b9a"})})}},{key:"delete",value:function(e){this.deleteMul([e])}},{key:"deleteMul",value:function(e){var t=this;console.log(e),e.length>0&&this.quotationService.deleteQuotation(e).subscribe(function(e){!0===e.success?null!==e.data&&!1===e.data.success?t.message.create("error",e.data.message):(t.message.create("success","\u64cd\u4f5c\u6210\u529f\uff01"),t.loadData()):t.message.create("error","\u64cd\u4f5c\u5931\u8d25\uff01")},function(e){e.hasOwnProperty("error")&&e.error.hasOwnProperty("errorMessage")&&e.error.errorMessage&&t.message.error(e.error.errorMessage)})}},{key:"order",value:function(e){var t=e.key;switch(e.value){case"ascend":this.orderBy={sortFiled:t,sort:"ASC"},this.search.pageNumber=1,this.loadData();break;case"descend":this.orderBy={sortFiled:t,sort:"DESC"},this.search.pageNumber=1,this.loadData()}}},{key:"onBeforeSearch",value:function(){}},{key:"onAfterSearch",value:function(){this.rowCount>0&&0===this.dataList.length&&(this.search.pageNumber=1,this.loadData())}}]),e}();return e.\u0275fac=function(t){return new(t||e)(p.\u0275\u0275directiveInject(W.$),p.\u0275\u0275directiveInject(h.DwMessageService),p.\u0275\u0275directiveInject(g.FormBuilder),p.\u0275\u0275directiveInject(S),p.\u0275\u0275directiveInject(x),p.\u0275\u0275directiveInject(c.Router),p.\u0275\u0275directiveInject(c.ActivatedRoute),p.\u0275\u0275directiveInject(v.DwModalService),p.\u0275\u0275directiveInject(o.DatePipe),p.\u0275\u0275directiveInject(E.v))},e.\u0275cmp=p.\u0275\u0275defineComponent({type:e,selectors:[["app-quotation-list"]],viewQuery:function(e,t){var n;(1&e&&p.\u0275\u0275viewQuery(de,5),2&e)&&(p.\u0275\u0275queryRefresh(n=p.\u0275\u0275loadQuery())&&(t.child=n.first))},features:[p.\u0275\u0275ProvidersFeature([x])],decls:126,vars:61,consts:[[1,"dw-f-content-list","layoutClass","sales_layout"],[1,"issue_layout_head"],[1,"issue_layout_title"],[2,"margin-left","3px"],[1,"content-box"],[1,"sales_issue_form","sales_form","sales_shadow",2,"margin-bottom","10px",3,"formGroup"],["dw-row","",1,"search-form-box"],[1,"search-input"],[1,"label"],[1,"form-input","date-picker"],["formControlName","date_range",2,"width","100%"],[1,"form-input"],["dwSearch","",3,"dwSuffix"],["type","text","dw-input","","readonly","","dwMode","multiple","formControlName","customer_name","placeholder","",2,"width","100%"],["customerData",""],[3,"dwSuffix"],["type","text","dw-input","","formControlName","service_order_doc_no"],["ServiceDocNoData",""],["dw-button","","dwActionAuthorized","",3,"dwType","dwActionId","dwClick"],["dw-button","","dw-analyticsOn","click",3,"dwType","click"],["dw-row","","dwActionAuthorized","",1,"dw-f-btn-bar-action",3,"dwActionId","dwDefaultAuthorized"],["dw-col",""],["dw-button","","type","button","dwActionAuthorized","",3,"dwType","dwActionId","dwDefaultAuthorized","click"],["dw-icon","","dwType","plus"],["translate",""],[1,"dw-f-table","sales_table",2,"margin-top","-14px"],[1,"my-tab",3,"dwTabPosition","dwSelectedIndex","dwType","dwAnimated","dwSelectChange"],[3,"dwTitle"],["dwShowSizeChanger","",3,"dwData","dwTotal","dwFrontPagination","dwPageIndex","dwPageSize","dwShowTotal","dwScroll","dwPageIndexChange","dwPageSizeChange"],["dwTotalTable",""],[3,"dwSortOrderChange"],["dw-tr",""],["dw-th","","dwShowSort","","dwColumnKey","doc_date","dwWidth","114px"],["dw-th","","dwShowSort","","dwColumnKey","doc_no","dwWidth","140px"],["dw-th","","dwWidth","140px"],["dw-th",""],["translate","",4,"ngIf"],["dw-th","","dwAlign","right"],["dw-th","","dwWidth","140px",4,"ngIf"],["dw-th","","dwWidth","92px",4,"ngIf"],["dw-th","","dwAlign","center","dwWidth","80px"],["dw-th","","dwAlign","center","dwRight","","dwWidth","120px"],[4,"ngFor","ngForOf"],[1,"tag-wrap"],[1,"tag-label"],[1,"tags"],["dwMode","checkable","style","font-size: 15px;line-height: 28px;",3,"dwChecked","dwCheckedChange",4,"ngFor","ngForOf"],["dw-th","","dwShowSort","","dwColumnKey","doc_no","dwWidth","160px"],["dw-th","","dwAlign","right","dwWidth","140px"],["dw-th","","dwWidth","110px",4,"ngIf"],["dw-th","","dwAlign","center","dwRight","","dwWidth","120px",4,"ngIf"],[3,"dwVisible","dwWidth","dwBodyStyle","dwTitle","dwOnClose"],["dwDrawerContent",""],["totalTemplate",""],["dw-icon","","class","ant-input-clear-icon","dwTheme","fill","dwType","close-circle",3,"click",4,"ngIf"],["dw-button","","dwType","primary","dwSearch","","type","button",3,"click"],["dw-icon","","dwType","search"],["dw-icon","","dwTheme","fill","dwType","close-circle",1,"ant-input-clear-icon",3,"click"],["dw-th","","dwWidth","92px"],["dwEllipsis",""],[3,"click"],["dwAlign","right"],[4,"ngIf"],["dwAlign","center",4,"ngIf"],["dwRight",""],[1,"action-grid"],["dwActionAuthorized","","title","\u7f16\u8f91",3,"dwActionId","dwDefaultAuthorized","click",4,"ngIf"],["dwActionAuthorized","","title","\u5220\u9664",3,"dwActionId","dwDefaultAuthorized",4,"ngIf"],["dwActionAuthorized","","title","\u5ba1\u6838",3,"dwActionId","dwDefaultAuthorized","click",4,"ngIf"],["dwActionAuthorized","","title","\u64a4\u5ba1",3,"dwActionId","dwDefaultAuthorized","click",4,"ngIf"],["dwAlign","center"],[1,"status-dot","status2"],[1,"status-dot","status3"],["dwActionAuthorized","","title","\u7f16\u8f91",3,"dwActionId","dwDefaultAuthorized","click"],["src","../../../../../../assets/img/icon_edit.png","alt","\u7f16\u8f91",1,"action-icon"],["src","../../../../../../assets/img/icon_edit_hover.png","alt","\u7f16\u8f91",1,"action-icon"],["dwActionAuthorized","","title","\u5220\u9664",3,"dwActionId","dwDefaultAuthorized"],["dw-popconfirm","",3,"dwPopconfirmTitle","dwOkText","dwCancelText","dwPopconfirmPlacement","dwOnConfirm"],["dw-popconfirm","","translate",""],["src","../../../../../../assets/img/icon_delete.png","alt","\u5220\u9664",1,"action-icon"],["src","../../../../../../assets/img/icon_delete_hover.png","alt","\u5220\u9664",1,"action-icon"],["dwActionAuthorized","","title","\u5ba1\u6838",3,"dwActionId","dwDefaultAuthorized","click"],["src","../../../../../../assets/img/icon_check.png","alt","\u5ba1\u6838",1,"action-icon"],["src","../../../../../../assets/img/icon_check_hover.png","alt","\u5ba1\u6838",1,"action-icon"],["dwActionAuthorized","","title","\u64a4\u5ba1",3,"dwActionId","dwDefaultAuthorized","click"],["src","../../../../../../assets/img/icon_disapprove_nor.png","alt","\u64a4\u5ba1",1,"action-icon"],["src","../../../../../../assets/img/icon_disapprove_hover.png","alt","\u64a4\u5ba1",1,"action-icon"],["dwMode","checkable",2,"font-size","15px","line-height","28px",3,"dwChecked","dwCheckedChange"],["dw-th","","dwWidth","110px"],["dwRight","",4,"ngIf"],[1,"status-dot"],[1,"status-dot","status5"],[1,"action-box"],["dwActionAuthorized","",3,"dwActionId","dwDefaultAuthorized","click",4,"ngIf"],["dwActionAuthorized","",3,"dwActionId","dwDefaultAuthorized",4,"ngIf"],["dwActionAuthorized","",3,"dwActionId","dwDefaultAuthorized","click"],["dwActionAuthorized","",3,"dwActionId","dwDefaultAuthorized"],["dw-popconfirm","","translate","",2,"color","#0d9def"],["child",""]],template:function(e,t){if(1&e&&(p.\u0275\u0275elementStart(0,"dw-content",0),p.\u0275\u0275elementStart(1,"div",1),p.\u0275\u0275elementStart(2,"h2",2),p.\u0275\u0275elementStart(3,"span",3),p.\u0275\u0275text(4,"\u670d\u52a1\u62a5\u4ef7\u5355"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275element(5,"dw-divider"),p.\u0275\u0275elementStart(6,"div",4),p.\u0275\u0275elementStart(7,"form",5),p.\u0275\u0275elementStart(8,"div",6),p.\u0275\u0275elementStart(9,"div",7),p.\u0275\u0275elementStart(10,"div",8),p.\u0275\u0275text(11,"\u65e5\u671f"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(12,"dw-form-item",9),p.\u0275\u0275elementStart(13,"dw-form-control"),p.\u0275\u0275element(14,"dw-range-picker",10),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(15,"div",7),p.\u0275\u0275elementStart(16,"div",8),p.\u0275\u0275text(17,"\u5ba2\u6237"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(18,"dw-form-item",11),p.\u0275\u0275elementStart(19,"dw-form-control"),p.\u0275\u0275elementStart(20,"dw-input-group",12),p.\u0275\u0275element(21,"input",13),p.\u0275\u0275elementEnd(),p.\u0275\u0275template(22,se,3,1,"ng-template",null,14,p.\u0275\u0275templateRefExtractor),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(24,"div",7),p.\u0275\u0275elementStart(25,"div",8),p.\u0275\u0275text(26,"\u670d\u52a1\u5de5\u5355"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(27,"dw-form-item",11),p.\u0275\u0275elementStart(28,"dw-form-control"),p.\u0275\u0275elementStart(29,"dw-input-group",15),p.\u0275\u0275element(30,"input",16),p.\u0275\u0275elementEnd(),p.\u0275\u0275template(31,me,1,1,"ng-template",null,17,p.\u0275\u0275templateRefExtractor),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(33,"div",7),p.\u0275\u0275elementStart(34,"button",18),p.\u0275\u0275listener("dwClick",function(){return t.search.pageNumber=1,t.loadData()}),p.\u0275\u0275text(35),p.\u0275\u0275pipe(36,"translate"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(37,"button",19),p.\u0275\u0275listener("click",function(){return t.search.pageNumber=1,t.reset()}),p.\u0275\u0275text(38),p.\u0275\u0275pipe(39,"translate"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(40,"div",20),p.\u0275\u0275elementStart(41,"div",21),p.\u0275\u0275elementStart(42,"button",22),p.\u0275\u0275listener("click",function(){return t.create()}),p.\u0275\u0275element(43,"em",23),p.\u0275\u0275elementStart(44,"span",24),p.\u0275\u0275text(45,"\u65b0\u5efa"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(46,"div",25),p.\u0275\u0275elementStart(47,"dw-tabset",26),p.\u0275\u0275listener("dwSelectChange",function(e){return t.onTabChange(e)}),p.\u0275\u0275elementStart(48,"dw-tab",27),p.\u0275\u0275elementStart(49,"dw-table",28,29),p.\u0275\u0275listener("dwPageIndexChange",function(e){return t.search.pageNumber=e})("dwPageIndexChange",function(e){return t.onPageIndexChange(e)})("dwPageSizeChange",function(e){return t.search.pageSize=e})("dwPageSizeChange",function(){return t.onPageSizeChange()}),p.\u0275\u0275elementStart(51,"thead",30),p.\u0275\u0275listener("dwSortOrderChange",function(e){return t.order(e)}),p.\u0275\u0275elementStart(52,"tr",31),p.\u0275\u0275elementStart(53,"th",32),p.\u0275\u0275elementStart(54,"span",24),p.\u0275\u0275text(55,"\u586b\u5355\u65e5\u671f"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(56,"th",33),p.\u0275\u0275elementStart(57,"span",24),p.\u0275\u0275text(58,"\u670d\u52a1\u62a5\u4ef7\u5355\u53f7"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(59,"th",34),p.\u0275\u0275elementStart(60,"span",24),p.\u0275\u0275text(61,"\u670d\u52a1\u5355\u53f7"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(62,"th",35),p.\u0275\u0275elementStart(63,"span",24),p.\u0275\u0275text(64,"\u5ba2\u6237"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(65,"th",35),p.\u0275\u0275elementStart(66,"span",24),p.\u0275\u0275text(67,"\u4ea7\u54c1"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(68,"th",34),p.\u0275\u0275template(69,pe,2,0,"span",36),p.\u0275\u0275template(70,fe,2,0,"span",36),p.\u0275\u0275template(71,he,2,0,"span",36),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(72,"th",37),p.\u0275\u0275elementStart(73,"span",24),p.\u0275\u0275text(74,"\u91d1\u989d"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275template(75,ve,3,0,"th",38),p.\u0275\u0275template(76,ge,3,0,"th",39),p.\u0275\u0275template(77,we,3,0,"th",39),p.\u0275\u0275elementStart(78,"th",40),p.\u0275\u0275elementStart(79,"span",24),p.\u0275\u0275text(80,"\u72b6\u6001"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(81,"th",41),p.\u0275\u0275elementStart(82,"span",24),p.\u0275\u0275text(83,"\u64cd\u4f5c"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(84,"tbody"),p.\u0275\u0275template(85,Pe,30,21,"tr",42),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(86,"dw-tab",27),p.\u0275\u0275elementStart(87,"div",43),p.\u0275\u0275elementStart(88,"div",44),p.\u0275\u0275text(89,"\u72b6\u6001:"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(90,"div",45),p.\u0275\u0275template(91,Me,2,2,"dw-tag",46),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(92,"dw-table",28,29),p.\u0275\u0275listener("dwPageIndexChange",function(e){return t.search.pageNumber=e})("dwPageIndexChange",function(e){return t.onPageIndexChange(e)})("dwPageSizeChange",function(e){return t.search.pageSize=e})("dwPageSizeChange",function(){return t.onPageSizeChange()}),p.\u0275\u0275elementStart(94,"thead",30),p.\u0275\u0275listener("dwSortOrderChange",function(e){return t.order(e)}),p.\u0275\u0275elementStart(95,"tr",31),p.\u0275\u0275elementStart(96,"th",32),p.\u0275\u0275elementStart(97,"span",24),p.\u0275\u0275text(98,"\u586b\u5355\u65e5\u671f"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(99,"th",47),p.\u0275\u0275elementStart(100,"span",24),p.\u0275\u0275text(101,"\u5355\u53f7"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(102,"th",35),p.\u0275\u0275elementStart(103,"span",24),p.\u0275\u0275text(104,"\u5ba2\u6237"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(105,"th",35),p.\u0275\u0275elementStart(106,"span",24),p.\u0275\u0275text(107,"\u4ea7\u54c1"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(108,"th",34),p.\u0275\u0275template(109,Te,2,0,"span",36),p.\u0275\u0275template(110,Ve,2,0,"span",36),p.\u0275\u0275template(111,Ae,2,0,"span",36),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(112,"th",48),p.\u0275\u0275elementStart(113,"span",24),p.\u0275\u0275text(114,"\u91d1\u989d"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275template(115,Fe,3,0,"th",38),p.\u0275\u0275template(116,qe,3,0,"th",39),p.\u0275\u0275template(117,Ne,3,0,"th",39),p.\u0275\u0275template(118,Le,3,0,"th",49),p.\u0275\u0275template(119,je,3,0,"th",50),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(120,"tbody"),p.\u0275\u0275template(121,tt,22,16,"tr",42),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(122,"dw-drawer",51),p.\u0275\u0275listener("dwOnClose",function(){return t.isCollapsed=!1}),p.\u0275\u0275template(123,nt,2,0,"ng-template",52),p.\u0275\u0275elementEnd(),p.\u0275\u0275template(124,rt,1,1,"ng-template",null,53,p.\u0275\u0275templateRefExtractor)),2&e){var n=p.\u0275\u0275reference(23),r=p.\u0275\u0275reference(32),i=p.\u0275\u0275reference(50),a=p.\u0275\u0275reference(125);p.\u0275\u0275advance(7),p.\u0275\u0275property("formGroup",t.searchForm),p.\u0275\u0275advance(13),p.\u0275\u0275property("dwSuffix",n),p.\u0275\u0275advance(9),p.\u0275\u0275property("dwSuffix",r),p.\u0275\u0275advance(5),p.\u0275\u0275property("dwType","primary")("dwActionId","query"),p.\u0275\u0275advance(1),p.\u0275\u0275textInterpolate1("",p.\u0275\u0275pipeBind1(36,54,"\u67e5\u8be2")," "),p.\u0275\u0275advance(2),p.\u0275\u0275property("dwType","defult"),p.\u0275\u0275advance(1),p.\u0275\u0275textInterpolate1(" ",p.\u0275\u0275pipeBind1(39,56,"\u91cd\u7f6e")," "),p.\u0275\u0275advance(2),p.\u0275\u0275property("dwActionId","add")("dwDefaultAuthorized","disabled"),p.\u0275\u0275advance(2),p.\u0275\u0275property("dwType","primary")("dwActionId","add")("dwDefaultAuthorized","disabled"),p.\u0275\u0275advance(5),p.\u0275\u0275property("dwTabPosition","top")("dwSelectedIndex",t.queryType)("dwType","line")("dwAnimated",!1),p.\u0275\u0275advance(1),p.\u0275\u0275property("dwTitle","\u7ef4\u4fee\u670d\u52a1\u62a5\u4ef7"),p.\u0275\u0275advance(1),p.\u0275\u0275property("dwData",t.dataList)("dwTotal",t.rowCount)("dwFrontPagination",!1)("dwPageIndex",t.search.pageNumber)("dwPageSize",t.search.pageSize)("dwShowTotal",a)("dwScroll",p.\u0275\u0275pureFunction0(58,it)),p.\u0275\u0275advance(20),p.\u0275\u0275property("ngIf","1"===t.fileType),p.\u0275\u0275advance(1),p.\u0275\u0275property("ngIf","2"===t.fileType),p.\u0275\u0275advance(1),p.\u0275\u0275property("ngIf","0"===t.fileType),p.\u0275\u0275advance(4),p.\u0275\u0275property("ngIf",t.isIntegrated),p.\u0275\u0275advance(1),p.\u0275\u0275property("ngIf",t.isIntegrated),p.\u0275\u0275advance(1),p.\u0275\u0275property("ngIf",t.isIntegrated),p.\u0275\u0275advance(8),p.\u0275\u0275property("ngForOf",i.data),p.\u0275\u0275advance(1),p.\u0275\u0275property("dwTitle","\u6613\u635f\u4ef6\u9500\u552e\u62a5\u4ef7"),p.\u0275\u0275advance(5),p.\u0275\u0275property("ngForOf",t.fiterTags),p.\u0275\u0275advance(1),p.\u0275\u0275property("dwData",t.dataList)("dwTotal",t.rowCount)("dwFrontPagination",!1)("dwPageIndex",t.search.pageNumber)("dwPageSize",t.search.pageSize)("dwShowTotal",a)("dwScroll",p.\u0275\u0275pureFunction0(59,at)),p.\u0275\u0275advance(17),p.\u0275\u0275property("ngIf","1"===t.fileType),p.\u0275\u0275advance(1),p.\u0275\u0275property("ngIf","2"===t.fileType),p.\u0275\u0275advance(1),p.\u0275\u0275property("ngIf","0"===t.fileType),p.\u0275\u0275advance(4),p.\u0275\u0275property("ngIf",t.isIntegrated&&"4"===t.state&&"0"===t.erp_collection_status),p.\u0275\u0275advance(1),p.\u0275\u0275property("ngIf",t.isIntegrated&&"4"===t.state&&"0"===t.erp_collection_status),p.\u0275\u0275advance(1),p.\u0275\u0275property("ngIf",t.isIntegrated&&"4"===t.state&&"0"===t.erp_collection_status),p.\u0275\u0275advance(1),p.\u0275\u0275property("ngIf",!("4"===t.state&&"1"===t.erp_collection_status)),p.\u0275\u0275advance(1),p.\u0275\u0275property("ngIf","4"!==t.state),p.\u0275\u0275advance(2),p.\u0275\u0275property("ngForOf",i.data),p.\u0275\u0275advance(1),p.\u0275\u0275property("dwVisible",t.isCollapsed)("dwWidth","70%")("dwBodyStyle",p.\u0275\u0275pureFunction0(60,ot))("dwTitle",t.detailTitle)}},directives:[$.DwContentComponent,U.DwDividerComponent,g.\u0275NgNoValidate,g.NgControlStatusGroup,g.FormGroupDirective,b.DwRowDirective,K.DwFormItemComponent,b.DwColDirective,K.DwFormControlComponent,Z.DwDatePickerComponent,Z.DwRangePickerComponent,g.NgControlStatus,g.FormControlName,J.DwInputGroupComponent,Y.u,J.DwInputGroupWhitSuffixOrPrefixDirective,J.DwInputDirective,g.DefaultValueAccessor,X.DwButtonComponent,ee.uG,te.DwActionAuthorizedDirective,ne.DwAnalyticsOn,re.DwIconDirective,I.TranslateDirective,ie.DwTabSetComponent,ie.DwTabComponent,C.DwTableComponent,C.DwTheadComponent,C.DwTrDirective,C.DwTableCellDirective,C.DwThMeasureDirective,C.DwThAddOnComponent,o.NgIf,C.DwCellAlignDirective,C.DwCellFixedDirective,C.DwTbodyComponent,o.NgForOf,ae.DwDrawerComponent,ae.DwDrawerContentDirective,C.DwCellEllipsisDirective,oe.DwPopconfirmDirective,le.DwTagComponent,Q],pipes:[I.TranslatePipe,o.DatePipe],styles:[".tag-wrap[_ngcontent-%COMP%]{display:flex;align-items:center;height:32px;margin-bottom:16px}.tag-label[_ngcontent-%COMP%]{color:#000000d9;font-size:14px;font-weight:bold;margin-right:14px;white-space:nowrap}.tags[_ngcontent-%COMP%]{color:#000000d9;white-space:nowrap}.ant-tag[_ngcontent-%COMP%]{height:32px;line-height:32px;padding:0 16px}.ant-tag[_ngcontent-%COMP%]:last-child{margin-right:0}.ant-tag-checkable-checked[_ngcontent-%COMP%], .ant-tag[_ngcontent-%COMP%]:hover{background:#f2f2f2;border-radius:16px;color:#000000d9}.status-dot[_ngcontent-%COMP%]{display:inline-block;width:8px;height:8px;border-radius:4px;margin-right:8px;background:#f3a830}.status-dot.status2[_ngcontent-%COMP%]{background:#f07360}.status-dot.status3[_ngcontent-%COMP%]{background:#58cfdd}.status-dot.status4[_ngcontent-%COMP%]{background:#73ce7e}.status-dot.status5[_ngcontent-%COMP%]{background:#188AF9}.action-box[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.action-box[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{color:#0d9def;cursor:pointer;margin:0 5px}"]}),e}(),dt=r(47372),ct=function(e){n(r,e);var t=i(r);function r(e,n){var i;return s(this,r),(i=t.call(this)).dwDapHttp=e,i.url=n,i}return m(r,[{key:"getDataList",value:function(e,t){var n=this;return this.dwDapHttp.get(this.url).pipe((0,dt.map)(function(r){return n._result={currentPage:e,datas:Object.assign([],r.data.service_order),pageCount:Math.ceil(r.data.service_order.length/t),pageSize:t,rowCount:r.data.service_order.length},n._result}))}}]),r}(_.DwClientPagingDataSource),st=function(){var e=function(){function e(t,n){s(this,e),this.dwHttp=t,this.selectModalService=n,this.config={modalTitle:"\u9009\u62e9\u670d\u52a1\u5de5\u5355",modalWidth:"80%",tableMultiSelect:!1,tableIdField:"service_order_id",tableNameField:"doc_no",tablePageSize:10,tableColDefs:[{title:"\u670d\u52a1\u5355\u53f7",field:"doc_no"},{title:"\u65e5\u671f",field:"doc_date",dataPipe:"date:yyyy-MM-dd",width:"100px"},{title:"\u5ba2\u6237\u540d\u79f0",field:"customer_name"},{title:"\u8bbe\u5907\u540d\u79f0",field:"product_file_name"},{title:"\u8bbe\u5907\u578b\u53f7",field:"model"},{title:"\u5e8f\u5217\u53f7",field:"sn"},{title:"\u89c4\u683c",field:"specification"}],dataSource:new ct(this.dwHttp,"restful/service/serviceOrder/ServiceOrder/ServiceOrderListForQuotation")}}return m(e,[{key:"open",value:function(e){var t=this;return this.selectModalService.open(this.config,e).pipe((0,dt.switchMap)(function(e){return t.dwHttp.get("restful/service/serviceOrder/ServiceOrder/ServiceOrderByIdForOpener?id=".concat(e[0]))}))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(p.\u0275\u0275inject(w.DwDapHttpClient),p.\u0275\u0275inject(_.DwSelectModalService))},e.\u0275prov=p.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e}(),ut=r(13437),mt=r(35626),pt=r(91970);function ft(e,t){1&e&&(p.\u0275\u0275elementStart(0,"div"),p.\u0275\u0275text(1,"\u221a"),p.\u0275\u0275elementEnd())}function ht(e,t){1&e&&(p.\u0275\u0275elementStart(0,"div"),p.\u0275\u0275text(1,"\u221a"),p.\u0275\u0275elementEnd())}function vt(e,t){1&e&&(p.\u0275\u0275elementStart(0,"div"),p.\u0275\u0275text(1,"\u221a"),p.\u0275\u0275elementEnd())}var gt=function(){var e=function(){function e(t,n){s(this,e),this.commonHttpService=t,this.message=n,this.visibleChanged=new p.EventEmitter,this.default_id="",this.custom_view_id="",this.custom_config=null}return m(e,[{key:"ngOnInit",value:function(){console.log("ngOnInit")}},{key:"init",value:function(e,t){var n=this;this.poiX=e,this.poiY=t,this.commonHttpService.get("restful/service/autoSettings/CustomView/CustomView?viewId=".concat(this.view_id)).subscribe(function(e){if(n.custom_config=e.data.custom_view_id?e.data.config:null,n.custom_view_id=e.data.custom_view_id||"",e.data.config&&e.data.config.viewConfig&&e.data.config.viewConfig.length){var t=e.data.config.viewConfig.filter(function(e){return e.optionId===n.optionId});n.default_id=t.length?t[0].deafult:""}else n.default_id=""},function(e){e.hasOwnProperty("error")&&e.error.hasOwnProperty("errorMessage")&&e.error.errorMessage&&n.message.error(e.error.errorMessage)})}},{key:"chooseDefault",value:function(e,t){var n=this;e.stopPropagation();var r=this.default_id===t?"":t;if(this.custom_config){var i=null,a=JSON.parse(JSON.stringify(this.custom_config));a.viewConfig.forEach(function(e,t){e.optionId===n.optionId&&(i=t)}),null!==i?a.viewConfig[i].deafult=r:a.viewConfig.push({optionId:this.optionId,deafult:r});var o={custom_view_id:this.custom_view_id,config:a};this.commonHttpService.put("restful/service/autoSettings/CustomView/CustomView",{param:o}).subscribe(function(e){n.default_id=r,n.custom_config=o.config,n.visibleChanged.emit({value:r,visible:!0})})}else{var l={view_id:this.view_id,config:{viewConfig:[{optionId:this.optionId,deafult:r}]}};this.commonHttpService.post("restful/service/autoSettings/CustomView/CustomView",{param:l}).subscribe(function(e){n.default_id=r,n.custom_config=l.config,n.visibleChanged.emit({value:r,visible:!0})})}}},{key:"close",value:function(){this.visibleChanged.emit({value:"",visible:!1})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(p.\u0275\u0275directiveInject(W.$),p.\u0275\u0275directiveInject(h.DwMessageService))},e.\u0275cmp=p.\u0275\u0275defineComponent({type:e,selectors:[["app-custom-part"]],inputs:{visible:"visible",view_id:"view_id",optionId:"optionId"},outputs:{visibleChanged:"visibleChanged"},decls:11,vars:9,consts:[[1,"custom_part",3,"click"],[1,"options"],[1,"one_option",3,"click"],[4,"ngIf"]],template:function(e,t){1&e&&(p.\u0275\u0275elementStart(0,"div",0),p.\u0275\u0275listener("click",function(){return t.close()}),p.\u0275\u0275elementStart(1,"div",1),p.\u0275\u0275elementStart(2,"div",2),p.\u0275\u0275listener("click",function(e){return t.chooseDefault(e,"0")}),p.\u0275\u0275template(3,ft,2,0,"div",3),p.\u0275\u0275text(4," \u5e38\u7528\u914d\u4ef6 "),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(5,"div",2),p.\u0275\u0275listener("click",function(e){return t.chooseDefault(e,"1")}),p.\u0275\u0275template(6,ht,2,0,"div",3),p.\u0275\u0275text(7," \u914d\u4ef6\u4fe1\u606f "),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(8,"div",2),p.\u0275\u0275listener("click",function(e){return t.chooseDefault(e,"2")}),p.\u0275\u0275template(9,vt,2,0,"div",3),p.\u0275\u0275text(10," \u6613\u635f\u4ef6\u6e05\u5355 "),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd()),2&e&&(p.\u0275\u0275styleProp("top",t.visible?0:-999999999999999,"px"),p.\u0275\u0275advance(1),p.\u0275\u0275styleProp("left",t.poiX,"px")("top",t.poiY,"px"),p.\u0275\u0275advance(2),p.\u0275\u0275property("ngIf","0"===t.default_id),p.\u0275\u0275advance(3),p.\u0275\u0275property("ngIf","1"===t.default_id),p.\u0275\u0275advance(3),p.\u0275\u0275property("ngIf","2"===t.default_id))},directives:[o.NgIf],styles:[".custom_part[_ngcontent-%COMP%]{width:100vw;height:100vh;position:fixed;left:0;top:0;z-index:1001}.custom_part[_ngcontent-%COMP%]   .options[_ngcontent-%COMP%]{position:absolute;background:#fff;border-radius:2px;box-shadow:0 3px 6px -4px #0000001f,0 6px 16px #00000014,0 9px 28px 8px #0000000d}.custom_part[_ngcontent-%COMP%]   .options[_ngcontent-%COMP%]   .one_option[_ngcontent-%COMP%]{padding:5px 12px 5px 28px;color:#000000a6;font-size:14px;line-height:22px;white-space:nowrap;cursor:pointer;position:relative}.custom_part[_ngcontent-%COMP%]   .options[_ngcontent-%COMP%]   .one_option[_ngcontent-%COMP%]:hover{background:#f5f5f5}.custom_part[_ngcontent-%COMP%]   .options[_ngcontent-%COMP%]   .one_option[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:28px;height:100%;font-weight:bold;font-size:16px;display:flex;align-items:center;justify-content:center}"]}),e}(),wt=r(74591),yt=r(90697),St=["child"];function _t(e,t){1&e&&p.\u0275\u0275element(0,"dw-option",21)}function xt(e,t){if(1&e){var n=p.\u0275\u0275getCurrentView();p.\u0275\u0275elementStart(0,"div",22),p.\u0275\u0275listener("click",function(){return p.\u0275\u0275restoreView(n),p.\u0275\u0275nextContext(2).clearInput()}),p.\u0275\u0275element(1,"em",23),p.\u0275\u0275elementEnd()}}function Et(e,t){if(1&e){var n=p.\u0275\u0275getCurrentView();p.\u0275\u0275elementStart(0,"div",24),p.\u0275\u0275listener("click",function(){var e=p.\u0275\u0275restoreView(n).index;return p.\u0275\u0275nextContext(2).swichNav(e)}),p.\u0275\u0275text(1),p.\u0275\u0275elementEnd()}if(2&e){var r=t.$implicit,i=t.index,a=p.\u0275\u0275nextContext(2);p.\u0275\u0275classMap(a.currOrigTab==i?"swiper-tab-list tab-on":"swiper-tab-list"),p.\u0275\u0275advance(1),p.\u0275\u0275textInterpolate1(" ",r.itemGroupName," ")}}function bt(e,t){if(1&e&&p.\u0275\u0275element(0,"app-big-img",37),2&e){var n=p.\u0275\u0275nextContext().$implicit;p.\u0275\u0275property("item",n)}}function Ct(e,t){if(1&e&&(p.\u0275\u0275elementStart(0,"tr"),p.\u0275\u0275elementStart(1,"td",34),p.\u0275\u0275element(2,"label",35),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(3,"td"),p.\u0275\u0275text(4),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(5,"td"),p.\u0275\u0275text(6),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(7,"td"),p.\u0275\u0275text(8),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(9,"td"),p.\u0275\u0275text(10),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(11,"td"),p.\u0275\u0275template(12,bt,1,1,"app-big-img",36),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd()),2&e){var n=t.$implicit;p.\u0275\u0275advance(1),p.\u0275\u0275property("dwAlign","center"),p.\u0275\u0275advance(1),p.\u0275\u0275property("dwValue",n.material_id),p.\u0275\u0275advance(2),p.\u0275\u0275textInterpolate1(" ",n.material_code," "),p.\u0275\u0275advance(2),p.\u0275\u0275textInterpolate1(" ",n.material_name," "),p.\u0275\u0275advance(2),p.\u0275\u0275textInterpolate1(" ",n.specification," "),p.\u0275\u0275advance(2),p.\u0275\u0275textInterpolate1(" ",n.model," "),p.\u0275\u0275advance(2),p.\u0275\u0275property("ngIf",n.url)}}function It(e,t){if(1&e){var n=p.\u0275\u0275getCurrentView();p.\u0275\u0275elementStart(0,"div"),p.\u0275\u0275elementStart(1,"dw-table",25,26),p.\u0275\u0275listener("dwPageIndexChange",function(e){var t=p.\u0275\u0275restoreView(n).index;return p.\u0275\u0275nextContext(2).materialGroups[t].pageIndex=e})("dwPageSizeChange",function(e){var t=p.\u0275\u0275restoreView(n).index;return p.\u0275\u0275nextContext(2).materialGroups[t].pageSize=e})("dwPageIndexChange",function(e){return p.\u0275\u0275restoreView(n),p.\u0275\u0275nextContext(2).pageIndexChange(e)}),p.\u0275\u0275elementStart(3,"thead"),p.\u0275\u0275elementStart(4,"tr",27),p.\u0275\u0275elementStart(5,"th",28),p.\u0275\u0275element(6,"span",29),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(7,"th",30),p.\u0275\u0275elementStart(8,"span",29),p.\u0275\u0275text(9,"\u914d\u4ef6\u7f16\u53f7"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(10,"th",31),p.\u0275\u0275elementStart(11,"span",29),p.\u0275\u0275text(12,"\u914d\u4ef6\u540d\u79f0"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(13,"th",31),p.\u0275\u0275elementStart(14,"span",29),p.\u0275\u0275text(15,"\u89c4\u683c"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(16,"th",31),p.\u0275\u0275elementStart(17,"span",29),p.\u0275\u0275text(18,"\u578b\u53f7"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(19,"th",32),p.\u0275\u0275elementStart(20,"span",29),p.\u0275\u0275text(21,"\u56fe\u7247"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(22,"tbody"),p.\u0275\u0275template(23,Ct,13,7,"tr",33),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd()}if(2&e){var r=t.index,i=p.\u0275\u0275reference(2),a=p.\u0275\u0275nextContext(2);p.\u0275\u0275classMap(a.currOrigTab==r?"scroll-box":"scroll-box hide"),p.\u0275\u0275advance(1),p.\u0275\u0275property("dwData",a.materialGroups[r].list)("dwFrontPagination",!1)("dwTotal",a.materialGroups[r].itemCount)("dwPageIndex",a.materialGroups[r].pageIndex)("dwPageSize",a.materialGroups[r].pageSize),p.\u0275\u0275advance(22),p.\u0275\u0275property("ngForOf",i.data)}}function kt(e,t){if(1&e){var n=p.\u0275\u0275getCurrentView();p.\u0275\u0275elementStart(0,"div",4),p.\u0275\u0275elementStart(1,"div",5),p.\u0275\u0275elementStart(2,"div",6),p.\u0275\u0275listener("contextmenu",function(e){return p.\u0275\u0275restoreView(n),p.\u0275\u0275nextContext().rightClick(e)}),p.\u0275\u0275elementStart(3,"dw-select",7),p.\u0275\u0275listener("ngModelChange",function(e){return p.\u0275\u0275restoreView(n),p.\u0275\u0275nextContext().typeIdx=e})("ngModelChange",function(e){return p.\u0275\u0275restoreView(n),p.\u0275\u0275nextContext().bindPickerChange(e)}),p.\u0275\u0275template(4,_t,1,0,"dw-option",8),p.\u0275\u0275element(5,"dw-option",9),p.\u0275\u0275element(6,"dw-option",10),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(7,"div",11),p.\u0275\u0275elementStart(8,"div",12),p.\u0275\u0275listener("click",function(){return p.\u0275\u0275restoreView(n),p.\u0275\u0275nextContext().getMaterialGroups()}),p.\u0275\u0275element(9,"em",13),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(10,"input",14),p.\u0275\u0275listener("ngModelChange",function(e){return p.\u0275\u0275restoreView(n),p.\u0275\u0275nextContext().searchValue=e})("keydown",function(e){return p.\u0275\u0275restoreView(n),p.\u0275\u0275nextContext().onKeydown(e)}),p.\u0275\u0275elementEnd(),p.\u0275\u0275template(11,xt,2,0,"div",15),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(12,"div",16),p.\u0275\u0275elementStart(13,"div",17),p.\u0275\u0275template(14,Et,2,3,"div",18),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(15,"dw-checkbox-wrapper",19),p.\u0275\u0275listener("dwOnChange",function(e){return p.\u0275\u0275restoreView(n),p.\u0275\u0275nextContext().checkboxChange(e)}),p.\u0275\u0275template(16,It,24,8,"div",20),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd()}if(2&e){var r=p.\u0275\u0275nextContext();p.\u0275\u0275advance(3),p.\u0275\u0275property("ngModel",r.typeIdx),p.\u0275\u0275advance(1),p.\u0275\u0275property("ngIf","1"===r.type),p.\u0275\u0275advance(6),p.\u0275\u0275property("ngModel",r.searchValue),p.\u0275\u0275advance(1),p.\u0275\u0275property("ngIf",r.searchValue),p.\u0275\u0275advance(3),p.\u0275\u0275property("ngForOf",r.materialGroups),p.\u0275\u0275advance(2),p.\u0275\u0275property("ngForOf",r.materialGroups)}}var Dt=function(){return{height:"450px",overflow:"auto","padding-bottom":"8px"}},Ot=function(){var e=function(){function e(t,n,r){s(this,e),this.commonHttpService=t,this.message=n,this.serviceOrderDetailSrv=r,this.partVisibleChanged=new p.EventEmitter,this.type="1",this.product_file_id="",this.typeIdx="0",this.searchValue="",this.currOrigTab=0,this.origParts=[],this.materialGroups=[],this.chosenPartIds=[],this.showCustomPart=!1}return m(e,[{key:"initData",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"1";!e||(this.product_file_id=e,this.type=n,this.typeIdx="1"===n?"0":"1",this.searchValue="",this.chosenPartIds=[],this.commonHttpService.get("restful/service/autoSettings/CustomView/CustomView?viewId=".concat(this.view_id)).subscribe(function(e){if(e.data.config&&e.data.config.viewConfig&&e.data.config.viewConfig.length){var n=e.data.config.viewConfig.filter(function(e){return e.optionId===t.optionId});n.length&&n[0].deafult&&(t.typeIdx="2"===t.type&&"0"===n[0].deafult?"1":n[0].deafult)}t.getMaterialGroups()},function(e){e.hasOwnProperty("error")&&e.error.hasOwnProperty("errorMessage")&&e.error.errorMessage&&t.message.error(e.error.errorMessage),t.getMaterialGroups()}))}},{key:"getMaterialGroups",value:function(){var e=this,t="ItemGroupByProductIdForQuotation?productId=".concat(this.product_file_id,"&searchValue=").concat(this.searchValue),n="getQuotationMaterialGroups";"1"===this.typeIdx&&(t="AllMaterialGroups?searchValue=".concat(this.searchValue),n="getMaterialGroups"),"2"===this.typeIdx&&(t="QuickwearPartAllMaterialGroups?productFileId=".concat(this.product_file_id,"&searchValue=").concat(this.searchValue),n="getQuickwearPartAllMaterialGroups"),this.serviceOrderDetailSrv[n](t).subscribe(function(t){e.origParts=[],e.materialGroups="0"===e.typeIdx?t.data:t;for(var n=0;n<e.materialGroups.length;n++)e.materialGroups[n].list=[],e.materialGroups[n].pageSize=10,e.materialGroups[n].pageIndex=1,e.materialGroups[n].allPages=Math.ceil(e.materialGroups[n].itemCount/e.materialGroups[n].pageSize);e.currOrigTab=0,e.materialGroups.length&&e.getOrigParts()})}},{key:"pageIndexChange",value:function(e){this.materialGroups[this.currOrigTab].pageIndex=e,this.getOrigParts()}},{key:"getOrigParts",value:function(){var e=this,t="material/Material/MaterialsByProductIdForQuotation?productId=".concat(this.product_file_id,"&itemGroupId=").concat(this.materialGroups[this.currOrigTab].itemGroupId,"&searchValue=").concat(this.searchValue,"&pageIndex=").concat(this.materialGroups[this.currOrigTab].pageIndex,"&pageSize=").concat(this.materialGroups[this.currOrigTab].pageSize);"1"===this.typeIdx&&(t="material/Material/MaterialListByPageForQuotation?searchValue=".concat(this.searchValue,"&itemGroupId=").concat(this.materialGroups[this.currOrigTab].itemGroupId,"&pageIndex=").concat(this.materialGroups[this.currOrigTab].pageIndex,"&pageSize=").concat(this.materialGroups[this.currOrigTab].pageSize)),"2"===this.typeIdx&&(t="productFile/QuickwearPart/MaterialForOpenner?productFileId=".concat(this.product_file_id,"&searchValue=").concat(this.searchValue,"&itemGroupId=").concat(this.materialGroups[this.currOrigTab].itemGroupId,"&pageIndex=").concat(this.materialGroups[this.currOrigTab].pageIndex,"&pageSize=").concat(this.materialGroups[this.currOrigTab].pageSize)),this.serviceOrderDetailSrv.getQuotationMaterialList(t).subscribe(function(t){e.materialGroups[e.currOrigTab].list=t.data.quotation})}},{key:"checkboxChange",value:function(e){this.chosenPartIds=e}},{key:"clearInput",value:function(){this.searchValue="",this.getMaterialGroups()}},{key:"bindPickerChange",value:function(e){this.getMaterialGroups()}},{key:"swichNav",value:function(e){this.currOrigTab!==e&&(this.currOrigTab=e,this.materialGroups[this.currOrigTab].list.length||this.getOrigParts())}},{key:"close",value:function(){this.partVisibleChanged.emit(null)}},{key:"chooseOk",value:function(){var e=this,t=[];this.materialGroups.forEach(function(n){n.list.forEach(function(n){e.chosenPartIds.indexOf(n.material_id)>=0&&t.push(n)})}),this.partVisibleChanged.emit(t)}},{key:"onKeydown",value:function(e){13===e.keyCode&&this.getMaterialGroups()}},{key:"ngOnInit",value:function(){}},{key:"rightClick",value:function(e){e.preventDefault(),e.stopPropagation(),console.log(e),this.showCustomPart=!0,this.child.init(e.x,e.y)}},{key:"customPartVisibleChanged",value:function(e){this.showCustomPart=e.visible,""!==e.value&&this.typeIdx!==e.value&&(this.typeIdx="2"===this.type&&"0"===e.value?"1":e.value,this.getMaterialGroups())}}]),e}();return e.\u0275fac=function(t){return new(t||e)(p.\u0275\u0275directiveInject(W.$),p.\u0275\u0275directiveInject(h.DwMessageService),p.\u0275\u0275directiveInject(pt.v))},e.\u0275cmp=p.\u0275\u0275defineComponent({type:e,selectors:[["app-part-opener"]],viewQuery:function(e,t){var n;(1&e&&p.\u0275\u0275viewQuery(St,5),2&e)&&(p.\u0275\u0275queryRefresh(n=p.\u0275\u0275loadQuery())&&(t.child=n.first))},inputs:{visible:"visible",view_id:"view_id",optionId:"optionId"},outputs:{partVisibleChanged:"partVisibleChanged"},decls:4,vars:8,consts:[["dwTitle","\u9009\u62e9\u914d\u4ef6",3,"dwBodyStyle","dwMaskClosable","dwWidth","dwVisible","dwVisibleChange","dwOnCancel","dwOnOk"],["dwModalContent",""],[3,"visible","view_id","optionId","visibleChanged"],["child",""],[1,"wrapper"],[1,"top-box"],[1,"select-box",3,"contextmenu"],[2,"width","100%",3,"ngModel","ngModelChange"],["dwValue","0","dwLabel","\u5e38\u7528\u914d\u4ef6",4,"ngIf"],["dwValue","1","dwLabel","\u914d\u4ef6\u4fe1\u606f"],["dwValue","2","dwLabel","\u6613\u635f\u4ef6\u6e05\u5355"],[1,"search-box"],[1,"search",3,"click"],["dw-icon","","dwType","search","dwTheme","outline"],["dw-input","","type","text","placeholder","\u641c\u7d22",3,"ngModel","ngModelChange","keydown"],["class","close",3,"click",4,"ngIf"],[1,"choose-wrap"],[1,"swiper-tab"],[3,"class","click",4,"ngFor","ngForOf"],[1,"radio-group",3,"dwOnChange"],[3,"class",4,"ngFor","ngForOf"],["dwValue","0","dwLabel","\u5e38\u7528\u914d\u4ef6"],[1,"close",3,"click"],["dw-icon","","dwTheme","fill","dwType","close-circle",1,"ant-input-clear-icon"],[3,"click"],[3,"dwData","dwFrontPagination","dwTotal","dwPageIndex","dwPageSize","dwPageIndexChange","dwPageSizeChange"],["dwTable",""],["dw-tr",""],["dw-th","","dwWidth","40px"],["translate",""],["dw-th","","dwWidth","116px"],["dw-th","","dwWidth","120px"],["dw-th","","dwWidth","88px"],[4,"ngFor","ngForOf"],["width","40",3,"dwAlign"],["dw-checkbox","",3,"dwValue"],[3,"item",4,"ngIf"],[3,"item"]],template:function(e,t){1&e&&(p.\u0275\u0275elementStart(0,"dw-modal",0),p.\u0275\u0275listener("dwVisibleChange",function(e){return t.visible=e})("dwOnCancel",function(){return t.close()})("dwOnOk",function(){return t.chooseOk()}),p.\u0275\u0275template(1,kt,17,6,"ng-template",1),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(2,"app-custom-part",2,3),p.\u0275\u0275listener("visibleChanged",function(e){return t.customPartVisibleChanged(e)}),p.\u0275\u0275elementEnd()),2&e&&(p.\u0275\u0275property("dwBodyStyle",p.\u0275\u0275pureFunction0(7,Dt))("dwMaskClosable",!0)("dwWidth",800)("dwVisible",t.visible),p.\u0275\u0275advance(2),p.\u0275\u0275property("visible",t.showCustomPart)("view_id",t.view_id)("optionId",t.optionId))},directives:[v.DwModalComponent,v.DwModalContentDirective,gt,mt.DwSelectComponent,g.NgControlStatus,g.NgModel,o.NgIf,mt.DwOptionComponent,re.DwIconDirective,Y.u,J.DwInputDirective,g.DefaultValueAccessor,o.NgForOf,wt.DwCheckboxWrapperComponent,C.DwTableComponent,C.DwTheadComponent,C.DwTrDirective,C.DwTableCellDirective,C.DwThMeasureDirective,I.TranslateDirective,C.DwTbodyComponent,C.DwCellAlignDirective,wt.DwCheckboxComponent,yt.a],styles:[".top-box[_ngcontent-%COMP%]{width:100%;height:32px;display:flex;margin-bottom:24px}.select-box[_ngcontent-%COMP%]{width:120px;height:100%;margin-right:24px}.search-box[_ngcontent-%COMP%]{flex:1;height:100%;position:relative}.search-box[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]{width:30px;height:100%;display:flex;align-items:center;justify-content:center;position:absolute;top:0;left:0;z-index:2}.search-box[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]   em[_ngcontent-%COMP%]{font-size:16px;color:#999}.search-box[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{position:absolute;top:0;right:8px;font-size:20px}.search-box[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]   .ant-input-clear-icon[_ngcontent-%COMP%]:last-child{font-size:16px}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;height:32px;background:#fff;border-radius:4px;padding:0 30px}.choose-wrap[_ngcontent-%COMP%]{height:354px;flex:1;display:flex}.swiper-tab[_ngcontent-%COMP%]{width:120px;height:100%;overflow-y:auto;margin-right:24px}.swiper-tab[_ngcontent-%COMP%]   .swiper-tab-list[_ngcontent-%COMP%]{width:100%;min-height:40px;line-height:40px;text-align:center;color:#000000a6;font-size:14px;background:#e8e8e8;cursor:pointer}.swiper-tab[_ngcontent-%COMP%]   .swiper-tab-list.tab-on[_ngcontent-%COMP%]{color:#fff;background:#00a3ff}.radio-group[_ngcontent-%COMP%]{flex:1;height:100%;position:relative;overflow:auto}.scroll-box[_ngcontent-%COMP%]{height:100%}.scroll-box.hide[_ngcontent-%COMP%]{display:none}.warranty[_ngcontent-%COMP%]{display:inline-block;width:60px;height:24px;line-height:22px;text-align:center;color:#00af26;font-size:12px;border:1px solid #84d997;border-radius:12px}.warranty.red[_ngcontent-%COMP%]{color:#fe3a3a;border-color:#fe4949}.ant-radio-wrapper[_ngcontent-%COMP%]{margin-right:0}"]}),e}(),Pt=r(61937),Mt=r(82542);function Tt(e,t){if(1&e){var n=p.\u0275\u0275getCurrentView();p.\u0275\u0275elementStart(0,"div",29),p.\u0275\u0275listener("click",function(){return p.\u0275\u0275restoreView(n),p.\u0275\u0275nextContext(2).clearInput()}),p.\u0275\u0275element(1,"em",30),p.\u0275\u0275elementEnd()}}function Vt(e,t){1&e&&(p.\u0275\u0275elementStart(0,"th",31),p.\u0275\u0275elementStart(1,"span",18),p.\u0275\u0275text(2,"\u7c7b\u578b"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd())}function At(e,t){1&e&&(p.\u0275\u0275elementStart(0,"span",18),p.\u0275\u0275text(1,"\u5e8f\u5217\u53f7"),p.\u0275\u0275elementEnd())}function Ft(e,t){1&e&&(p.\u0275\u0275elementStart(0,"span",18),p.\u0275\u0275text(1,"\u9879\u76ee\u53f7"),p.\u0275\u0275elementEnd())}function qt(e,t){1&e&&(p.\u0275\u0275elementStart(0,"span",18),p.\u0275\u0275text(1,"\u5e8f\u5217\u53f7/\u9879\u76ee\u53f7"),p.\u0275\u0275elementEnd())}function Nt(e,t){if(1&e&&(p.\u0275\u0275elementStart(0,"td"),p.\u0275\u0275text(1),p.\u0275\u0275elementEnd()),2&e){var n=p.\u0275\u0275nextContext().$implicit;p.\u0275\u0275advance(1),p.\u0275\u0275textInterpolate1(" ","1"===n.type?"\u5355\u673a":"\u4ea7\u7ebf/\u9879\u76ee"," ")}}function Lt(e,t){if(1&e&&(p.\u0275\u0275elementStart(0,"tr"),p.\u0275\u0275elementStart(1,"td",32),p.\u0275\u0275element(2,"label",33),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(3,"td"),p.\u0275\u0275text(4),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(5,"td"),p.\u0275\u0275text(6),p.\u0275\u0275pipe(7,"date"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(8,"td"),p.\u0275\u0275text(9),p.\u0275\u0275elementEnd(),p.\u0275\u0275template(10,Nt,2,1,"td",34),p.\u0275\u0275elementStart(11,"td"),p.\u0275\u0275text(12),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(13,"td"),p.\u0275\u0275text(14),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(15,"td"),p.\u0275\u0275text(16),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(17,"td"),p.\u0275\u0275text(18),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd()),2&e){var n=t.$implicit,r=p.\u0275\u0275nextContext(2);p.\u0275\u0275advance(1),p.\u0275\u0275property("dwAlign","center"),p.\u0275\u0275advance(1),p.\u0275\u0275propertyInterpolate("dwValue",n.service_order_id),p.\u0275\u0275advance(2),p.\u0275\u0275textInterpolate1(" ",n.doc_no," "),p.\u0275\u0275advance(2),p.\u0275\u0275textInterpolate1(" ",p.\u0275\u0275pipeBind2(7,10,n.doc_date,"yyyy-MM-dd")," "),p.\u0275\u0275advance(3),p.\u0275\u0275textInterpolate1(" ",n.customer_name," "),p.\u0275\u0275advance(1),p.\u0275\u0275property("ngIf","0"===r.fileType),p.\u0275\u0275advance(2),p.\u0275\u0275textInterpolate1(" ",n.product_file_name," "),p.\u0275\u0275advance(2),p.\u0275\u0275textInterpolate1(" ",n.model," "),p.\u0275\u0275advance(2),p.\u0275\u0275textInterpolate1(" ",n.sn," "),p.\u0275\u0275advance(2),p.\u0275\u0275textInterpolate1(" ",n.specification," ")}}function jt(e,t){if(1&e){var n=p.\u0275\u0275getCurrentView();p.\u0275\u0275elementStart(0,"div",2),p.\u0275\u0275elementStart(1,"div",3),p.\u0275\u0275elementStart(2,"div",4),p.\u0275\u0275elementStart(3,"div",5),p.\u0275\u0275listener("click",function(){return p.\u0275\u0275restoreView(n),p.\u0275\u0275nextContext().getServiceOrderList()}),p.\u0275\u0275element(4,"em",6),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(5,"input",7),p.\u0275\u0275listener("ngModelChange",function(e){return p.\u0275\u0275restoreView(n),p.\u0275\u0275nextContext().searchValue=e})("keydown",function(e){return p.\u0275\u0275restoreView(n),p.\u0275\u0275nextContext().onKeydown(e)}),p.\u0275\u0275elementEnd(),p.\u0275\u0275template(6,Tt,2,0,"div",8),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(7,"div",9),p.\u0275\u0275elementStart(8,"label",10),p.\u0275\u0275listener("ngModelChange",function(e){return p.\u0275\u0275restoreView(n),p.\u0275\u0275nextContext().onlyNotComplete=e})("ngModelChange",function(e){return p.\u0275\u0275restoreView(n),p.\u0275\u0275nextContext().checkboxChange(e)}),p.\u0275\u0275text(9," \u4ec5\u663e\u793a\u672a\u5b8c\u6210\u7684\u5de5\u5355 "),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(10,"div",11),p.\u0275\u0275elementStart(11,"dw-radio-group",12),p.\u0275\u0275listener("ngModelChange",function(e){return p.\u0275\u0275restoreView(n),p.\u0275\u0275nextContext().service_order_id=e}),p.\u0275\u0275elementStart(12,"div"),p.\u0275\u0275elementStart(13,"dw-table",13,14),p.\u0275\u0275elementStart(15,"thead",15),p.\u0275\u0275listener("dwSortOrderChange",function(e){return p.\u0275\u0275restoreView(n),p.\u0275\u0275nextContext().order(e)}),p.\u0275\u0275elementStart(16,"tr",16),p.\u0275\u0275elementStart(17,"th",17),p.\u0275\u0275element(18,"span",18),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(19,"th",19),p.\u0275\u0275elementStart(20,"span",18),p.\u0275\u0275text(21,"\u670d\u52a1\u5355\u53f7"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(22,"th",20),p.\u0275\u0275elementStart(23,"span",18),p.\u0275\u0275text(24,"\u65e5\u671f"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(25,"th",21),p.\u0275\u0275elementStart(26,"span",18),p.\u0275\u0275text(27,"\u5ba2\u6237\u540d\u79f0"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275template(28,Vt,3,0,"th",22),p.\u0275\u0275elementStart(29,"th",23),p.\u0275\u0275elementStart(30,"span",18),p.\u0275\u0275text(31,"\u8bbe\u5907\u540d\u79f0"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(32,"th",24),p.\u0275\u0275elementStart(33,"span",18),p.\u0275\u0275text(34,"\u8bbe\u5907\u578b\u53f7"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(35,"th",25),p.\u0275\u0275template(36,At,2,0,"span",26),p.\u0275\u0275template(37,Ft,2,0,"span",26),p.\u0275\u0275template(38,qt,2,0,"span",26),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(39,"th",27),p.\u0275\u0275elementStart(40,"span",18),p.\u0275\u0275text(41,"\u89c4\u683c"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(42,"tbody"),p.\u0275\u0275template(43,Lt,19,13,"tr",28),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd()}if(2&e){var r=p.\u0275\u0275reference(14),i=p.\u0275\u0275nextContext();p.\u0275\u0275advance(5),p.\u0275\u0275property("ngModel",i.searchValue),p.\u0275\u0275advance(1),p.\u0275\u0275property("ngIf",i.searchValue),p.\u0275\u0275advance(2),p.\u0275\u0275property("ngModel",i.onlyNotComplete),p.\u0275\u0275advance(3),p.\u0275\u0275property("ngModel",i.service_order_id),p.\u0275\u0275advance(2),p.\u0275\u0275property("dwData",i.serviceOrderList),p.\u0275\u0275advance(15),p.\u0275\u0275property("ngIf","0"===i.fileType),p.\u0275\u0275advance(8),p.\u0275\u0275property("ngIf","1"===i.fileType),p.\u0275\u0275advance(1),p.\u0275\u0275property("ngIf","2"===i.fileType),p.\u0275\u0275advance(1),p.\u0275\u0275property("ngIf","0"===i.fileType),p.\u0275\u0275advance(5),p.\u0275\u0275property("ngForOf",r.data)}}var Rt=function(){return{"padding-bottom":"8px"}},Ht=function(){var e=function(){function e(t,n,r){s(this,e),this.commonHttpService=t,this.message=n,this.quotationService=r,this.orderVisibleChanged=new p.EventEmitter,this.service_order_id=0,this.searchValue="",this.onlyNotComplete=!0,this.serviceOrderList=[],this.fileType="0"}return m(e,[{key:"initData",value:function(){this.service_order_id=0,this.searchValue="",this.getServiceOrderList()}},{key:"getServiceOrderList",value:function(){var e=this;this.quotationService.getServiceOrderListForQuotation({searchText:this.searchValue,onlyShowUnfinished:this.onlyNotComplete}).subscribe(function(t){e.serviceOrderList=t.data.service_order})}},{key:"checkboxChange",value:function(e){this.service_order_id=0,this.getServiceOrderList()}},{key:"clearInput",value:function(){this.searchValue="",this.service_order_id=0,this.getServiceOrderList()}},{key:"close",value:function(){this.orderVisibleChanged.emit(null)}},{key:"chooseOk",value:function(){this.orderVisibleChanged.emit(this.service_order_id)}},{key:"onKeydown",value:function(e){13===e.keyCode&&(this.service_order_id=0,this.getServiceOrderList())}},{key:"ngOnInit",value:function(){var e=this;this.commonHttpService.get("restful/service/serviceOrder/ServiceOrder/IsShowTypeOption").subscribe(function(t){e.fileType=t.data},function(t){t.hasOwnProperty("error")&&t.error.hasOwnProperty("errorMessage")&&t.error.errorMessage&&e.message.error(t.error.errorMessage)})}},{key:"order",value:function(e){var t=e.key;switch(e.value){case"ascend":this.serviceOrderList=Pt.l.order(this.serviceOrderList,[t]);break;case"descend":this.serviceOrderList=Pt.l.order(this.serviceOrderList,[t,-1])}}}]),e}();return e.\u0275fac=function(t){return new(t||e)(p.\u0275\u0275directiveInject(W.$),p.\u0275\u0275directiveInject(h.DwMessageService),p.\u0275\u0275directiveInject(S))},e.\u0275cmp=p.\u0275\u0275defineComponent({type:e,selectors:[["app-service-order-opener"]],inputs:{visible:"visible"},outputs:{orderVisibleChanged:"orderVisibleChanged"},decls:2,vars:5,consts:[["dwTitle","\u9009\u62e9\u670d\u52a1\u5de5\u5355",3,"dwBodyStyle","dwMaskClosable","dwWidth","dwVisible","dwVisibleChange","dwOnCancel","dwOnOk"],["dwModalContent",""],[1,"wrapper"],[1,"top-box"],[1,"search-box"],[1,"search",3,"click"],["dw-icon","","dwType","search","dwTheme","outline"],["dw-input","","type","text","placeholder","\u641c\u7d22",3,"ngModel","ngModelChange","keydown"],["class","close",3,"click",4,"ngIf"],[1,"checkbox-wrap"],["dw-checkbox","",2,"white-space","nowrap",3,"ngModel","ngModelChange"],[1,"choose-wrap"],[1,"radio-group",3,"ngModel","ngModelChange"],[3,"dwData"],["dwTable",""],[3,"dwSortOrderChange"],["dw-tr",""],["dw-th","","dwWidth","38px"],["translate",""],["dw-th","","dwWidth","144px","dwShowSort","","dwColumnKey","doc_no"],["dw-th","","dwWidth","98px","dwShowSort","","dwColumnKey","doc_date"],["dw-th","","dwWidth","118px","dwShowSort","","dwColumnKey","customer_name"],["dw-th","","dwWidth","80px","dwShowSort","","dwColumnKey","type",4,"ngIf"],["dw-th","","dwWidth","128px","dwShowSort","","dwColumnKey","product_file_name"],["dw-th","","dwWidth","112px","dwShowSort","","dwColumnKey","model"],["dw-th","","dwWidth","180px","dwShowSort","","dwColumnKey","sn"],["translate","",4,"ngIf"],["dw-th","","dwWidth","134px","dwShowSort","","dwColumnKey","specification"],[4,"ngFor","ngForOf"],[1,"close",3,"click"],["dw-icon","","dwTheme","fill","dwType","close-circle",1,"ant-input-clear-icon"],["dw-th","","dwWidth","80px","dwShowSort","","dwColumnKey","type"],[3,"dwAlign"],["dw-radio","",3,"dwValue"],[4,"ngIf"]],template:function(e,t){1&e&&(p.\u0275\u0275elementStart(0,"dw-modal",0),p.\u0275\u0275listener("dwVisibleChange",function(e){return t.visible=e})("dwOnCancel",function(){return t.close()})("dwOnOk",function(){return t.chooseOk()}),p.\u0275\u0275template(1,jt,44,10,"ng-template",1),p.\u0275\u0275elementEnd()),2&e&&p.\u0275\u0275property("dwBodyStyle",p.\u0275\u0275pureFunction0(4,Rt))("dwMaskClosable",!0)("dwWidth",1100)("dwVisible",t.visible)},directives:[v.DwModalComponent,v.DwModalContentDirective,re.DwIconDirective,Y.u,J.DwInputDirective,g.DefaultValueAccessor,g.NgControlStatus,g.NgModel,o.NgIf,wt.DwCheckboxComponent,Mt.DwRadioGroupComponent,C.DwTableComponent,C.DwTheadComponent,C.DwTrDirective,C.DwTableCellDirective,C.DwThMeasureDirective,I.TranslateDirective,C.DwThAddOnComponent,C.DwTbodyComponent,o.NgForOf,C.DwCellAlignDirective,Mt.DwRadioComponent],pipes:[o.DatePipe],styles:[".top-box[_ngcontent-%COMP%]{width:100%;height:32px;display:flex;margin-bottom:24px}.checkbox-wrap[_ngcontent-%COMP%]{display:flex;align-items:center;margin-left:16px}.search-box[_ngcontent-%COMP%]{flex:1;height:100%;position:relative}.search-box[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]{width:30px;height:100%;display:flex;align-items:center;justify-content:center;position:absolute;top:0;left:0;z-index:2}.search-box[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]   em[_ngcontent-%COMP%]{font-size:16px;color:#999}.search-box[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{position:absolute;top:0;right:8px;font-size:20px}.search-box[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]   .ant-input-clear-icon[_ngcontent-%COMP%]:last-child{font-size:16px}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;height:32px;background:#fff;border-radius:4px;padding:0 30px}.choose-wrap[_ngcontent-%COMP%]{flex:1;display:flex}.radio-group[_ngcontent-%COMP%]{flex:1;height:100%;position:relative;overflow:auto}.ant-radio-wrapper[_ngcontent-%COMP%]{margin-right:0}"]}),e}(),zt=r(119);function Gt(e,t){1&e&&(p.\u0275\u0275elementStart(0,"span",39),p.\u0275\u0275text(1,"\u65b0\u5efa\u670d\u52a1\u62a5\u4ef7\u5355"),p.\u0275\u0275elementEnd())}function Qt(e,t){1&e&&(p.\u0275\u0275elementStart(0,"span",39),p.\u0275\u0275text(1,"\u4fee\u6539\u670d\u52a1\u62a5\u4ef7\u5355"),p.\u0275\u0275elementEnd())}function Wt(e,t){if(1&e&&p.\u0275\u0275element(0,"dw-option",40),2&e){var n=t.$implicit;p.\u0275\u0275property("dwLabel",n.quote_type_name)("dwValue",n.quote_type_id)}}function Bt(e,t){if(1&e){var n=p.\u0275\u0275getCurrentView();p.\u0275\u0275elementStart(0,"em",44),p.\u0275\u0275listener("click",function(){return p.\u0275\u0275restoreView(n),p.\u0275\u0275nextContext(2).clear()}),p.\u0275\u0275elementEnd()}}function $t(e,t){if(1&e){var n=p.\u0275\u0275getCurrentView();p.\u0275\u0275template(0,Bt,1,0,"em",41),p.\u0275\u0275elementStart(1,"button",42),p.\u0275\u0275listener("click",function(){p.\u0275\u0275restoreView(n);var e=p.\u0275\u0275nextContext(),t=p.\u0275\u0275reference(103);return e.openServiceOrder(),t.initData()}),p.\u0275\u0275element(2,"em",43),p.\u0275\u0275elementEnd()}if(2&e){var r=p.\u0275\u0275nextContext();p.\u0275\u0275property("ngIf",r.form.controls.product_file_id.value)}}function Ut(e,t){if(1&e&&p.\u0275\u0275element(0,"dw-option",40),2&e){var n=t.$implicit;p.\u0275\u0275property("dwLabel",n.warehouse_name)("dwValue",n.warehouse_id)}}function Kt(e,t){1&e&&(p.\u0275\u0275elementStart(0,"div",12),p.\u0275\u0275text(1,"\u5e8f\u5217\u53f7"),p.\u0275\u0275elementEnd())}function Zt(e,t){1&e&&(p.\u0275\u0275elementStart(0,"div",12),p.\u0275\u0275text(1,"\u9879\u76ee\u53f7"),p.\u0275\u0275elementEnd())}function Jt(e,t){if(1&e){var n=p.\u0275\u0275getCurrentView();p.\u0275\u0275elementStart(0,"tr"),p.\u0275\u0275elementStart(1,"td"),p.\u0275\u0275text(2),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(3,"td"),p.\u0275\u0275text(4),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(5,"td"),p.\u0275\u0275text(6),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(7,"td"),p.\u0275\u0275text(8),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(9,"td"),p.\u0275\u0275text(10),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(11,"td"),p.\u0275\u0275elementStart(12,"dw-input-number",55),p.\u0275\u0275listener("ngModelChange",function(e){return p.\u0275\u0275restoreView(n).$implicit.price=e})("ngModelChange",function(){return p.\u0275\u0275restoreView(n),p.\u0275\u0275nextContext(2).partPriceChange()}),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(13,"td"),p.\u0275\u0275elementStart(14,"dw-input-number",55),p.\u0275\u0275listener("ngModelChange",function(e){return p.\u0275\u0275restoreView(n).$implicit.quality=e})("ngModelChange",function(){return p.\u0275\u0275restoreView(n),p.\u0275\u0275nextContext(2).partPriceChange()}),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(15,"td",56),p.\u0275\u0275text(16),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(17,"td"),p.\u0275\u0275elementStart(18,"input",57),p.\u0275\u0275listener("ngModelChange",function(e){return p.\u0275\u0275restoreView(n).$implicit.remark=e}),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(19,"td",58),p.\u0275\u0275elementStart(20,"div",59),p.\u0275\u0275elementStart(21,"div",60),p.\u0275\u0275listener("click",function(){var e=p.\u0275\u0275restoreView(n).index;return p.\u0275\u0275nextContext(2).deleteGrid("part",e)}),p.\u0275\u0275element(22,"img",61),p.\u0275\u0275element(23,"img",62),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd()}if(2&e){var r=t.$implicit;p.\u0275\u0275advance(2),p.\u0275\u0275textInterpolate1(" ",r.material_code," "),p.\u0275\u0275advance(2),p.\u0275\u0275textInterpolate1(" ",r.material_name," "),p.\u0275\u0275advance(2),p.\u0275\u0275textInterpolate1(" ",r.specification," "),p.\u0275\u0275advance(2),p.\u0275\u0275textInterpolate1(" ",r.model," "),p.\u0275\u0275advance(2),p.\u0275\u0275textInterpolate1(" ",r.unit," "),p.\u0275\u0275advance(2),p.\u0275\u0275property("ngModel",r.price)("dwMin",0)("dwPrecision",2),p.\u0275\u0275advance(2),p.\u0275\u0275property("ngModel",r.quality)("dwMin",0)("dwPrecision",2),p.\u0275\u0275advance(2),p.\u0275\u0275textInterpolate1(" ",(r.price*r.quality).toFixed(2)," "),p.\u0275\u0275advance(2),p.\u0275\u0275property("ngModel",r.remark)}}var Yt=function(){return{x:"1100px"}};function Xt(e,t){if(1&e){var n=p.\u0275\u0275getCurrentView();p.\u0275\u0275elementStart(0,"div",33),p.\u0275\u0275elementStart(1,"div",12),p.\u0275\u0275text(2,"\u9009\u62e9\u914d\u4ef6"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(3,"div",13),p.\u0275\u0275elementStart(4,"div",45),p.\u0275\u0275listener("click",function(){p.\u0275\u0275restoreView(n);var e=p.\u0275\u0275nextContext();return p.\u0275\u0275reference(101).initData(e.form.controls.product_file_id.value,e.form.controls.type.value),e.openSpareParts()}),p.\u0275\u0275element(5,"em",46),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(6,"dw-table",47,48),p.\u0275\u0275elementStart(8,"thead"),p.\u0275\u0275elementStart(9,"tr",49),p.\u0275\u0275elementStart(10,"th",50),p.\u0275\u0275elementStart(11,"span",6),p.\u0275\u0275text(12,"\u7f16\u53f7"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(13,"th",50),p.\u0275\u0275elementStart(14,"span",6),p.\u0275\u0275text(15,"\u540d\u79f0"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(16,"th",50),p.\u0275\u0275elementStart(17,"span",6),p.\u0275\u0275text(18,"\u89c4\u683c"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(19,"th",50),p.\u0275\u0275elementStart(20,"span",6),p.\u0275\u0275text(21,"\u578b\u53f7"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(22,"th",50),p.\u0275\u0275elementStart(23,"span",6),p.\u0275\u0275text(24,"\u5355\u4f4d"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(25,"th",50),p.\u0275\u0275elementStart(26,"span",6),p.\u0275\u0275text(27,"\u5355\u4ef7"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(28,"th",50),p.\u0275\u0275elementStart(29,"span",6),p.\u0275\u0275text(30,"\u6570\u91cf"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(31,"th",51),p.\u0275\u0275elementStart(32,"span",6),p.\u0275\u0275text(33,"\u91d1\u989d"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(34,"th",50),p.\u0275\u0275elementStart(35,"span",6),p.\u0275\u0275text(36,"\u5907\u6ce8"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(37,"th",52),p.\u0275\u0275elementStart(38,"span",6),p.\u0275\u0275text(39,"\u64cd\u4f5c"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(40,"tbody"),p.\u0275\u0275template(41,Jt,24,13,"tr",53),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(42,"div",54),p.\u0275\u0275text(43," \u5408\u8ba1\uff1a"),p.\u0275\u0275elementStart(44,"span"),p.\u0275\u0275text(45),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd()}if(2&e){var r=p.\u0275\u0275reference(7),i=p.\u0275\u0275nextContext();p.\u0275\u0275advance(6),p.\u0275\u0275property("dwData",i.spareParts)("dwFrontPagination",!1)("dwShowPagination",!1)("dwScroll",p.\u0275\u0275pureFunction0(6,Yt)),p.\u0275\u0275advance(35),p.\u0275\u0275property("ngForOf",r.data),p.\u0275\u0275advance(4),p.\u0275\u0275textInterpolate1("\uffe5",i.partAmountTotal,"")}}function en(e,t){if(1&e){var n=p.\u0275\u0275getCurrentView();p.\u0275\u0275elementStart(0,"tr"),p.\u0275\u0275elementStart(1,"td"),p.\u0275\u0275text(2),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(3,"td"),p.\u0275\u0275text(4),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(5,"td"),p.\u0275\u0275elementStart(6,"dw-input-number",70),p.\u0275\u0275listener("ngModelChange",function(e){return p.\u0275\u0275restoreView(n).$implicit.price=e})("ngModelChange",function(){return p.\u0275\u0275restoreView(n),p.\u0275\u0275nextContext(2).itemPriceChange()}),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(7,"td"),p.\u0275\u0275elementStart(8,"input",57),p.\u0275\u0275listener("ngModelChange",function(e){return p.\u0275\u0275restoreView(n).$implicit.remark=e}),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(9,"td"),p.\u0275\u0275elementStart(10,"div",59),p.\u0275\u0275elementStart(11,"div",60),p.\u0275\u0275listener("click",function(){var e=p.\u0275\u0275restoreView(n).index;return p.\u0275\u0275nextContext(2).deleteGrid("serviceItem",e)}),p.\u0275\u0275element(12,"img",61),p.\u0275\u0275element(13,"img",62),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd()}if(2&e){var r=t.$implicit;p.\u0275\u0275advance(2),p.\u0275\u0275textInterpolate1(" ",r.service_item_code," "),p.\u0275\u0275advance(2),p.\u0275\u0275textInterpolate1(" ",r.service_item_name," "),p.\u0275\u0275advance(2),p.\u0275\u0275property("ngModel",r.price)("dwMin",0)("dwStep",1)("dwPrecision",2),p.\u0275\u0275advance(2),p.\u0275\u0275property("ngModel",r.remark)}}function tn(e,t){if(1&e){var n=p.\u0275\u0275getCurrentView();p.\u0275\u0275elementStart(0,"div",33),p.\u0275\u0275elementStart(1,"div",12),p.\u0275\u0275text(2,"\u9009\u62e9\u670d\u52a1\u9879\u76ee"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(3,"div",13),p.\u0275\u0275elementStart(4,"div",45),p.\u0275\u0275listener("click",function(){return p.\u0275\u0275restoreView(n),p.\u0275\u0275nextContext().openServiceItem()}),p.\u0275\u0275element(5,"em",46),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(6,"dw-table",63,64),p.\u0275\u0275elementStart(8,"thead"),p.\u0275\u0275elementStart(9,"tr",49),p.\u0275\u0275elementStart(10,"th",65),p.\u0275\u0275elementStart(11,"span",6),p.\u0275\u0275text(12,"\u9879\u76ee\u7f16\u53f7"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(13,"th",66),p.\u0275\u0275elementStart(14,"span",6),p.\u0275\u0275text(15,"\u9879\u76ee\u540d\u79f0"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(16,"th",67),p.\u0275\u0275elementStart(17,"span",6),p.\u0275\u0275text(18,"\u4ef7\u683c"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(19,"th",68),p.\u0275\u0275elementStart(20,"span",6),p.\u0275\u0275text(21,"\u5907\u6ce8"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(22,"th",69),p.\u0275\u0275elementStart(23,"span",6),p.\u0275\u0275text(24,"\u64cd\u4f5c"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(25,"tbody"),p.\u0275\u0275template(26,en,14,7,"tr",53),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(27,"div",54),p.\u0275\u0275text(28," \u5408\u8ba1\uff1a"),p.\u0275\u0275elementStart(29,"span"),p.\u0275\u0275text(30),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd()}if(2&e){var r=p.\u0275\u0275reference(7),i=p.\u0275\u0275nextContext();p.\u0275\u0275advance(6),p.\u0275\u0275property("dwData",i.serviceItems)("dwFrontPagination",!1)("dwShowPagination",!1),p.\u0275\u0275advance(16),p.\u0275\u0275property("dwAlign","center"),p.\u0275\u0275advance(4),p.\u0275\u0275property("ngForOf",r.data),p.\u0275\u0275advance(4),p.\u0275\u0275textInterpolate1("\uffe5",i.itemAmountTotal,"")}}var nn=function(){var e=function(){function e(t,n,r,i,a,o,l){var d=this;s(this,e),this.fb=t,this.router=n,this.activeRoute=r,this.quotationService=i,this.serviceOrderService=a,this.serviceItemSelectService=o,this.message=l,this.DW_IN_MFA=B.ns,this.id="",this.quote_type_list=[],this.warehouse_list=[],this.isSparePartVisible=!1,this.isServiceOrderVisible=!1,this.spareParts=[],this.serviceItems=[],this.serviceItemVisible=!0,this.sparepartChangeVisible=!0,this.partAmountTotal="0.00",this.itemAmountTotal="0.00",this.totalAmount="0.00",this.activeRoute.paramMap.subscribe(function(e){d.id=e.get("id")||""}),this.form=this.fb.group({doc_no:[{value:"",disabled:!0}],doc_date:[{value:"",disabled:!0}],quote_type:["",g.Validators.required],employee_id:[{value:"",disabled:!0}],employee_name:[{value:"",disabled:!0}],service_order_id:["",g.Validators.required],service_order_no:["",g.Validators.required],type:["1"],customer_code:[{value:"",disabled:!0}],customer_name:[{value:"",disabled:!0}],product_file_id:[{value:"",disabled:!0}],product_file_code:[{value:"",disabled:!0}],product_file_name:[{value:"",disabled:!0}],sn:[{value:"",disabled:!0}],specification:[{value:"",disabled:!0}],model:[{value:"",disabled:!0}],remark:[""],approve_date:[""],approve_employee_id:[0],approve_status:[0],erp_so_no:[""],erp_collection_status:[0],erp_invoicing_status:[0],warehouse_id:0})}return m(e,[{key:"ngOnInit",value:function(){this.id||this.getQuotationDocNo(),this.getTransactionType(),this.getWarehouseList()}},{key:"getTransactionType",value:function(){var e=this;this.quotationService.getTransactionType().subscribe(function(t){t.success?(e.quote_type_list=t.data.quote_type,e.id&&e.getQuotationInfo()):e.message.create("error",t.message)},function(t){t.hasOwnProperty("error")&&t.error.hasOwnProperty("errorMessage")&&t.error.errorMessage&&e.message.error(t.error.errorMessage)})}},{key:"getWarehouseList",value:function(){var e=this;this.warehouse_list.push({warehouse_id:0,warehouse_name:""}),this.quotationService.getWarehouseList().subscribe(function(t){t.success?t.data.warehouse.forEach(function(t){e.warehouse_list.push({warehouse_id:t.warehouse_id,warehouse_name:t.warehouse_name})}):e.message.create("error",t.message)},function(t){t.hasOwnProperty("error")&&t.error.hasOwnProperty("errorMessage")&&t.error.errorMessage&&e.message.error(t.error.errorMessage)})}},{key:"getQuotationDocNo",value:function(){var e=this;this.quotationService.getQuotationDocNo().subscribe(function(t){t.success?(e.form.get("doc_no").setValue(t.data.doc_no),e.form.get("doc_date").setValue(t.data.doc_date),e.form.get("employee_id").setValue(t.data.employee_id),e.form.get("employee_name").setValue(t.data.employee_name)):e.message.create("error",t.message)},function(t){t.hasOwnProperty("error")&&t.error.hasOwnProperty("errorMessage")&&t.error.errorMessage&&e.message.error(t.error.errorMessage)})}},{key:"getQuotationInfo",value:function(){var e=this;this.quotationService.getQuotationInfo(this.id).subscribe(function(t){if(t.success){var n=t.data.quotation[0];e.form.get("doc_no").setValue(n.doc_no),e.form.get("doc_date").setValue(n.doc_date),e.form.get("quote_type").setValue(n.quote_type),e.form.get("employee_id").setValue(n.employee_id),e.form.get("employee_name").setValue(n.employee_name),e.form.get("service_order_id").setValue(n.service_order_id),e.form.get("service_order_no").setValue(n.service_order_no),e.form.get("type").setValue(n.type||"1"),e.form.get("customer_code").setValue(n.customer_code),e.form.get("customer_name").setValue(n.customer_name),e.form.get("product_file_id").setValue(n.product_file_id),e.form.get("product_file_code").setValue(n.product_file_code),e.form.get("product_file_name").setValue(n.product_file_name),e.form.get("sn").setValue(n.sn),e.form.get("specification").setValue(n.specification),e.form.get("model").setValue(n.model),e.form.get("remark").setValue(n.remark),e.form.get("approve_date").setValue(n.approve_date),e.form.get("approve_employee_id").setValue(n.approve_employee_id),e.form.get("approve_status").setValue(n.approve_status),e.form.get("erp_so_no").setValue(n.erp_so_no),e.form.get("erp_collection_status").setValue(n.erp_collection_status),e.form.get("erp_invoicing_status").setValue(n.erp_invoicing_status),e.form.get("warehouse_id").setValue(n.warehouse_id);var r=[],i=[];n.child.quotation_details.forEach(function(e){"1"===e.expense_type?r.push({price:e.price,material_code:e.item_code,material_id:e.item_id,material_name:e.item_name,model:e.item_model,specification:e.item_spec,unit:e.item_unit,quality:e.quality,remark:e.remark}):i.push({service_item_code:e.item_code,service_item_id:e.item_id,service_item_name:e.item_name,price:e.price,remark:e.remark})}),e.spareParts=r,e.serviceItems=i,e.partPriceChange(),e.itemPriceChange()}else e.message.create("error",t.message)},function(t){t.hasOwnProperty("error")&&t.error.hasOwnProperty("errorMessage")&&t.error.errorMessage&&e.message.error(t.error.errorMessage)})}},{key:"openServiceOrder",value:function(){this.isServiceOrderVisible=!0}},{key:"orderChangeVisible",value:function(e){var t=this;e&&this.quotationService.getServiceOrderByIdForOpener(e).subscribe(function(e){if(null!==e){var n=e.data.service_order[0];t.form.get("service_order_id").setValue(n.service_order_id),t.form.get("service_order_no").setValue(n.doc_no),t.form.get("type").setValue(n.type||"1"),t.form.get("customer_code").setValue(n.customer_code),t.form.get("customer_name").setValue(n.customer_name),t.form.get("product_file_id").setValue(n.product_file_id),t.form.get("product_file_code").setValue(n.product_file_code),t.form.get("product_file_name").setValue(n.product_file_name),t.form.get("sn").setValue(n.sn),t.form.get("specification").setValue(n.specification),t.form.get("model").setValue(n.model),t.serviceItemVisible=n.service_item,t.sparepartChangeVisible=n.sparepart_change}},function(e){e.hasOwnProperty("error")&&e.error.hasOwnProperty("errorMessage")&&e.error.errorMessage&&t.message.error(e.error.errorMessage)}),this.isServiceOrderVisible=!1}},{key:"clear",value:function(){this.form.get("service_order_id").setValue(0),this.form.get("service_order_no").setValue(""),this.form.get("type").setValue("1"),this.form.get("customer_code").setValue(""),this.form.get("customer_name").setValue(""),this.form.get("product_file_id").setValue(""),this.form.get("product_file_code").setValue(""),this.form.get("product_file_name").setValue(""),this.form.get("sn").setValue(""),this.form.get("specification").setValue(""),this.form.get("model").setValue("")}},{key:"openSpareParts",value:function(){this.form.controls.product_file_id.value?this.isSparePartVisible=!0:this.message.create("error","\u8bf7\u5148\u9009\u62e9\u670d\u52a1\u5de5\u5355")}},{key:"partChangeVisible",value:function(e){if(e&&e.length){var t=[],n=[];this.spareParts.length&&this.spareParts.forEach(function(e){t.push(e),n.push(e.material_id)}),e.forEach(function(e){n.indexOf(e.material_id)<0&&(e.price=e.customer_settlement_price,e.quality=1,e.remark="",t.push(e))}),this.spareParts=t,this.partPriceChange()}this.isSparePartVisible=!1}},{key:"openServiceItem",value:function(){var e=this;this.form.controls.product_file_id.value?(this.serviceItemSelectService.setConfig([],!0),this.serviceItemSelectService.open([]).subscribe(function(t){var n=t.data;console.log(n.service_item);var r=[],i=[];e.serviceItems.length&&e.serviceItems.forEach(function(e){r.push(e.service_item_id),i.push(e)}),n.service_item.forEach(function(e){r.indexOf(e.service_item_id)<0&&(e.price=e.customer_settlement_price,e.remark="",i.push(e))}),e.serviceItems=i,e.itemPriceChange()})):this.message.create("error","\u8bf7\u5148\u9009\u62e9\u670d\u52a1\u5de5\u5355")}},{key:"partPriceChange",value:function(){var e=this;this.partAmountTotal="0.00",this.spareParts.forEach(function(t){e.partAmountTotal=(parseFloat(e.partAmountTotal)+t.price*t.quality).toFixed(2)}),this.totalAmount=(parseFloat(this.partAmountTotal)+parseFloat(this.itemAmountTotal)).toFixed(2)}},{key:"itemPriceChange",value:function(){var e=this;this.itemAmountTotal="0.00",this.serviceItems.forEach(function(t){e.itemAmountTotal=(parseFloat(e.itemAmountTotal)+t.price).toFixed(2)}),this.totalAmount=(parseFloat(this.partAmountTotal)+parseFloat(this.itemAmountTotal)).toFixed(2)}},{key:"deleteGrid",value:function(e,t){if("part"===e){var n=[];this.spareParts.forEach(function(e){n.push(e)}),n.splice(t,1),this.spareParts=n,this.partPriceChange()}else{var r=[];this.serviceItems.forEach(function(e){r.push(e)}),r.splice(t,1),this.serviceItems=r,this.itemPriceChange()}}},{key:"handleOk",value:function(){if(this.spareParts.length||this.serviceItems.length){var e=!0,t=!0;if(this.spareParts.forEach(function(n){(!n.price&&0!==n.price||n.price<0)&&(e=!1),n.quality<=0&&(t=!1)}),this.serviceItems.forEach(function(t){(!t.price&&0!==t.price||t.price<0)&&(e=!1)}),t)if(e){var n=[];this.spareParts.forEach(function(e){n.push({expense_type:"1",item_id:e.material_id,item_code:e.material_code,item_name:e.material_name,item_spec:e.specification,item_model:e.model,item_unit:e.unit,price:e.price,quality:e.quality,amount:e.price*e.quality,remark:e.remark})}),this.serviceItems.forEach(function(e){n.push({expense_type:"2",item_id:e.service_item_id,item_code:e.service_item_code,item_name:e.service_item_name,item_spec:"",item_model:"",item_unit:"",price:e.price,quality:1,amount:e.price,remark:e.remark})});var r={quotation_details:n,doc_no:this.form.controls.doc_no.value,doc_date:this.form.controls.doc_date.value,quote_type:this.form.controls.quote_type.value,employee_id:this.form.controls.employee_id.value,employee_name:this.form.controls.employee_name.value,service_order_id:this.form.controls.service_order_id.value,service_order_no:this.form.controls.service_order_no.value,customer_code:this.form.controls.customer_code.value,customer_name:this.form.controls.customer_name.value,product_file_id:this.form.controls.product_file_id.value,product_file_code:this.form.controls.product_file_code.value,product_file_name:this.form.controls.product_file_name.value,sn:this.form.controls.sn.value,specification:this.form.controls.specification.value,model:this.form.controls.model.value,remark:this.form.controls.remark.value,approve_date:this.form.controls.approve_date.value,approve_employee_id:this.form.controls.approve_employee_id.value,approve_status:this.form.controls.approve_status.value,erp_so_no:this.form.controls.erp_so_no.value,erp_collection_status:this.form.controls.erp_collection_status.value,erp_invoicing_status:this.form.controls.erp_invoicing_status.value,warehouse_id:this.form.controls.warehouse_id.value};this.id?this.modify(r):this.create(r)}else this.message.create("error","\u914d\u4ef6\u5355\u4ef7\u6216\u670d\u52a1\u9879\u76ee\u4ef7\u683c\u4e0d\u53ef\u4e3a\u7a7a");else this.message.create("error","\u914d\u4ef6\u6570\u91cf\u9700\u5927\u4e8e0")}else this.message.create("error","\u8bf7\u81f3\u5c11\u9009\u62e9\u4e00\u4e2a\u914d\u4ef6\u6216\u4e00\u4e2a\u670d\u52a1\u9879\u76ee")}},{key:"create",value:function(e){var t=this;this.quotationService.create(e).subscribe(function(e){e.success?(t.message.create("success","\u4fdd\u5b58\u6210\u529f\uff01"),t.returnQuotationList()):t.message.create("error",e.message)},function(e){e.hasOwnProperty("error")&&e.error.hasOwnProperty("errorMessage")&&e.error.errorMessage&&t.message.error(e.error.errorMessage)})}},{key:"modify",value:function(e){var t=this;this.quotationService.modify(e,this.id).subscribe(function(e){e.success?(t.message.create("success","\u4fdd\u5b58\u6210\u529f\uff01"),t.returnQuotationList()):t.message.create("error",e.message)},function(e){e.hasOwnProperty("error")&&e.error.hasOwnProperty("errorMessage")&&e.error.errorMessage&&t.message.error(e.error.errorMessage)})}},{key:"handleCancel",value:function(){this.returnQuotationList()}},{key:"returnQuotationList",value:function(){this.router.navigate([(this.DW_IN_MFA?"/assc_crs":"")+"/crs/quotation/quotation-list/@"],{relativeTo:this.activeRoute})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(p.\u0275\u0275directiveInject(g.FormBuilder),p.\u0275\u0275directiveInject(c.Router),p.\u0275\u0275directiveInject(c.ActivatedRoute),p.\u0275\u0275directiveInject(S),p.\u0275\u0275directiveInject(st),p.\u0275\u0275directiveInject(ut.y),p.\u0275\u0275directiveInject(h.DwMessageService))},e.\u0275cmp=p.\u0275\u0275defineComponent({type:e,selectors:[["app-quotation-modify"]],features:[p.\u0275\u0275ProvidersFeature([ut.y,st])],decls:104,vars:18,consts:[[1,"dw-f-content-list","layoutClass","sales_layout"],[1,"issue_layout_head"],[1,"issue_layout_title"],["style","margin-left: 3px;",4,"ngIf"],[2,"float","right"],["dw-button","","type","submit",3,"dwType","disabled","click"],["translate",""],["dw-button","","type","button",3,"dwType","click"],[1,"content-box"],["dw-form","",3,"formGroup"],["dw-row",""],[1,"box","half"],[1,"label"],[1,"cont-table",2,"width","calc(100% - 114px)"],["dw-input","","formControlName","doc_no"],["formControlName","doc_date"],[2,"margin-right","4px","color","#ff4d4f","vertical-align","-3px"],["formControlName","quote_type","required","",2,"width","100%"],[3,"dwLabel","dwValue",4,"ngFor","ngForOf"],["dw-input","","formControlName","employee_name"],["dwSearch","",3,"dwSuffix"],["type","text","dw-input","","readonly","","required","","formControlName","service_order_no",2,"width","100%"],["orderData",""],["formControlName","warehouse_id",2,"width","100%"],["dw-input","","formControlName","customer_name"],["dw-input","","formControlName","product_file_name"],["class","label",4,"ngIf"],["dw-input","","formControlName","sn"],["dw-input","","formControlName","specification"],["dw-input","","formControlName","model"],[1,"box","big-half"],["dw-input","","maxlength","200","formControlName","remark",2,"height","32px"],["class","box",4,"ngIf"],[1,"box"],[1,"total"],[3,"visible","view_id","optionId","partVisibleChanged"],["child2",""],[3,"visible","orderVisibleChanged"],["child3",""],[2,"margin-left","3px"],[3,"dwLabel","dwValue"],["dw-icon","","class","ant-input-clear-icon","dwTheme","fill","dwType","close-circle",3,"click",4,"ngIf"],["dw-button","","dwType","primary","dwSearch","","type","button",3,"click"],["dw-icon","","dwType","search"],["dw-icon","","dwTheme","fill","dwType","close-circle",1,"ant-input-clear-icon",3,"click"],[1,"plus-icon",3,"click"],["dw-icon","","dwType","plus","dwTheme","outline"],[3,"dwData","dwFrontPagination","dwShowPagination","dwScroll"],["dwTable2",""],["dw-tr",""],["dw-th",""],["dw-th","","dwAlign","right"],["dw-th","","dwAlign","center","dwRight","0px","width","80"],[4,"ngFor","ngForOf"],[1,"total-amount"],[3,"ngModel","dwMin","dwPrecision","ngModelChange"],["dwAlign","right"],["dw-input","","type","text",3,"ngModel","ngModelChange"],["dwRight","0px"],[1,"action-grid"],["title","\u5220\u9664",3,"click"],["src","../../../../../../assets/img/icon_delete.png","alt","\u5220\u9664",1,"action-icon"],["src","../../../../../../assets/img/icon_delete_hover.png","alt","\u5220\u9664",1,"action-icon"],[3,"dwData","dwFrontPagination","dwShowPagination"],["dwTable3",""],["dw-th","","width","144"],["dw-th","","width","160"],["dw-th","","width","136"],["dw-th","","width","264"],["dw-th","","width","136","width","80",3,"dwAlign"],[3,"ngModel","dwMin","dwStep","dwPrecision","ngModelChange"]],template:function(e,t){if(1&e&&(p.\u0275\u0275elementStart(0,"dw-content",0),p.\u0275\u0275elementStart(1,"div",1),p.\u0275\u0275elementStart(2,"h2",2),p.\u0275\u0275template(3,Gt,2,0,"span",3),p.\u0275\u0275template(4,Qt,2,0,"span",3),p.\u0275\u0275elementStart(5,"div",4),p.\u0275\u0275elementStart(6,"button",5),p.\u0275\u0275listener("click",function(){return t.handleOk()}),p.\u0275\u0275elementStart(7,"span",6),p.\u0275\u0275text(8,"\u4fdd\u5b58"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(9,"button",7),p.\u0275\u0275listener("click",function(){return t.handleCancel()}),p.\u0275\u0275elementStart(10,"span",6),p.\u0275\u0275text(11,"\u53d6\u6d88"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275element(12,"dw-divider"),p.\u0275\u0275elementStart(13,"div",8),p.\u0275\u0275elementStart(14,"form",9),p.\u0275\u0275elementStart(15,"div",10),p.\u0275\u0275elementStart(16,"div",11),p.\u0275\u0275elementStart(17,"div",12),p.\u0275\u0275text(18,"\u5355\u53f7"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(19,"div",13),p.\u0275\u0275element(20,"input",14),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(21,"div",11),p.\u0275\u0275elementStart(22,"div",12),p.\u0275\u0275text(23,"\u586b\u5355\u65e5\u671f"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(24,"div",13),p.\u0275\u0275element(25,"dw-date-picker",15),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(26,"div",10),p.\u0275\u0275elementStart(27,"div",11),p.\u0275\u0275elementStart(28,"div",12),p.\u0275\u0275elementStart(29,"span",16),p.\u0275\u0275text(30,"*"),p.\u0275\u0275elementEnd(),p.\u0275\u0275text(31," \u62a5\u4ef7\u7c7b\u578b "),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(32,"div",13),p.\u0275\u0275elementStart(33,"dw-select",17),p.\u0275\u0275template(34,Wt,1,2,"dw-option",18),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(35,"div",11),p.\u0275\u0275elementStart(36,"div",12),p.\u0275\u0275text(37,"\u586b\u5355\u4eba\u5458"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(38,"div",13),p.\u0275\u0275element(39,"input",19),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(40,"div",10),p.\u0275\u0275elementStart(41,"div",11),p.\u0275\u0275elementStart(42,"div",12),p.\u0275\u0275elementStart(43,"span",16),p.\u0275\u0275text(44,"*"),p.\u0275\u0275elementEnd(),p.\u0275\u0275text(45," \u670d\u52a1\u5de5\u5355 "),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(46,"div",13),p.\u0275\u0275elementStart(47,"dw-input-group",20),p.\u0275\u0275element(48,"input",21),p.\u0275\u0275elementEnd(),p.\u0275\u0275template(49,$t,3,1,"ng-template",null,22,p.\u0275\u0275templateRefExtractor),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(51,"div",11),p.\u0275\u0275elementStart(52,"div",12),p.\u0275\u0275text(53,"\u4ed3\u5e93"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(54,"div",13),p.\u0275\u0275elementStart(55,"dw-select",23),p.\u0275\u0275template(56,Ut,1,2,"dw-option",18),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(57,"div",10),p.\u0275\u0275elementStart(58,"div",11),p.\u0275\u0275elementStart(59,"div",12),p.\u0275\u0275text(60,"\u5ba2\u6237"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(61,"div",13),p.\u0275\u0275element(62,"input",24),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(63,"div",11),p.\u0275\u0275elementStart(64,"div",12),p.\u0275\u0275text(65,"\u4ea7\u54c1"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(66,"div",13),p.\u0275\u0275element(67,"input",25),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(68,"div",10),p.\u0275\u0275elementStart(69,"div",11),p.\u0275\u0275template(70,Kt,2,0,"div",26),p.\u0275\u0275template(71,Zt,2,0,"div",26),p.\u0275\u0275elementStart(72,"div",13),p.\u0275\u0275element(73,"input",27),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(74,"div",11),p.\u0275\u0275elementStart(75,"div",12),p.\u0275\u0275text(76,"\u89c4\u683c"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(77,"div",13),p.\u0275\u0275element(78,"input",28),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(79,"div",10),p.\u0275\u0275elementStart(80,"div",11),p.\u0275\u0275elementStart(81,"div",12),p.\u0275\u0275text(82,"\u578b\u53f7"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(83,"div",13),p.\u0275\u0275element(84,"input",29),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(85,"div",10),p.\u0275\u0275elementStart(86,"div",30),p.\u0275\u0275elementStart(87,"div",12),p.\u0275\u0275text(88,"\u5907\u6ce8"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(89,"div",13),p.\u0275\u0275element(90,"textarea",31),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275template(91,Xt,46,7,"div",32),p.\u0275\u0275template(92,tn,31,6,"div",32),p.\u0275\u0275elementStart(93,"div",33),p.\u0275\u0275element(94,"div",12),p.\u0275\u0275elementStart(95,"div",13),p.\u0275\u0275elementStart(96,"div",34),p.\u0275\u0275text(97," \u8d39\u7528\u5408\u8ba1\uff1a"),p.\u0275\u0275elementStart(98,"span"),p.\u0275\u0275text(99),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(100,"app-part-opener",35,36),p.\u0275\u0275listener("partVisibleChanged",function(e){return t.partChangeVisible(e)}),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(102,"app-service-order-opener",37,38),p.\u0275\u0275listener("orderVisibleChanged",function(e){return t.orderChangeVisible(e)}),p.\u0275\u0275elementEnd()),2&e){var n=p.\u0275\u0275reference(50);p.\u0275\u0275advance(3),p.\u0275\u0275property("ngIf",!t.id),p.\u0275\u0275advance(1),p.\u0275\u0275property("ngIf",!!t.id),p.\u0275\u0275advance(2),p.\u0275\u0275property("dwType","primary")("disabled",!t.form.valid),p.\u0275\u0275advance(3),p.\u0275\u0275property("dwType","default"),p.\u0275\u0275advance(5),p.\u0275\u0275property("formGroup",t.form),p.\u0275\u0275advance(20),p.\u0275\u0275property("ngForOf",t.quote_type_list),p.\u0275\u0275advance(13),p.\u0275\u0275property("dwSuffix",n),p.\u0275\u0275advance(9),p.\u0275\u0275property("ngForOf",t.warehouse_list),p.\u0275\u0275advance(14),p.\u0275\u0275property("ngIf","1"===t.form.value.type),p.\u0275\u0275advance(1),p.\u0275\u0275property("ngIf","2"===t.form.value.type),p.\u0275\u0275advance(20),p.\u0275\u0275property("ngIf",t.sparepartChangeVisible),p.\u0275\u0275advance(1),p.\u0275\u0275property("ngIf",t.serviceItemVisible),p.\u0275\u0275advance(7),p.\u0275\u0275textInterpolate1("\uffe5",t.totalAmount,""),p.\u0275\u0275advance(1),p.\u0275\u0275property("visible",t.isSparePartVisible)("view_id","quotation_modify")("optionId","part_opener"),p.\u0275\u0275advance(2),p.\u0275\u0275property("visible",t.isServiceOrderVisible)}},directives:[$.DwContentComponent,o.NgIf,X.DwButtonComponent,ee.uG,Y.u,I.TranslateDirective,U.DwDividerComponent,g.\u0275NgNoValidate,g.NgControlStatusGroup,K.DwFormDirective,g.FormGroupDirective,b.DwRowDirective,J.DwInputDirective,g.DefaultValueAccessor,g.NgControlStatus,g.FormControlName,Z.DwDatePickerComponent,mt.DwSelectComponent,g.RequiredValidator,o.NgForOf,J.DwInputGroupComponent,J.DwInputGroupWhitSuffixOrPrefixDirective,g.MaxLengthValidator,Ot,Ht,mt.DwOptionComponent,re.DwIconDirective,C.DwTableComponent,C.DwTheadComponent,C.DwTrDirective,C.DwTableCellDirective,C.DwThMeasureDirective,C.DwCellAlignDirective,C.DwCellFixedDirective,C.DwTbodyComponent,zt.DwInputNumberComponent,g.NgModel],styles:[".plus-icon[_ngcontent-%COMP%]{width:48px;height:32px;border:1px solid #d0d0d0;border-radius:4px;background:#f5f5f5;display:flex;align-items:center;justify-content:center;margin-bottom:16px;color:#999;font-size:20px;cursor:pointer}.plus-icon.in-grid[_ngcontent-%COMP%]{display:inline-block;margin:0;text-align:center}.box[_ngcontent-%COMP%]{width:100%;display:flex;margin-bottom:20px}.box.half[_ngcontent-%COMP%]{width:40%;margin-bottom:12px}.box.big-half[_ngcontent-%COMP%]{width:80%}.box[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{width:104px;height:32px;line-height:32px;font-size:14px;text-align:right;white-space:nowrap}.total-amount[_ngcontent-%COMP%]{height:49px;line-height:48px;text-align:right;color:#000000d9;font-weight:bold;font-size:16px;padding:0 24px;border:1px solid #f0f0f0;border-top:0}.total-amount[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#fe3a3a}.total[_ngcontent-%COMP%]{height:64px;line-height:64px;text-align:right;color:#000000d9;font-weight:bold;font-size:24px;padding:0 24px;background:#f2f2f2}.total[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#fe3a3a;font-size:28px}"]}),e}(),rn=r(51033);function an(e,t){if(1&e&&p.\u0275\u0275element(0,"dw-option",41),2&e){var n=t.$implicit;p.\u0275\u0275property("dwLabel",n.warehouse_name)("dwValue",n.warehouse_id)}}function on(e,t){1&e&&(p.\u0275\u0275elementStart(0,"div",12),p.\u0275\u0275text(1,"\u5e8f\u5217\u53f7"),p.\u0275\u0275elementEnd())}function ln(e,t){1&e&&(p.\u0275\u0275elementStart(0,"div",12),p.\u0275\u0275text(1,"\u9879\u76ee\u53f7"),p.\u0275\u0275elementEnd())}function dn(e,t){if(1&e){var n=p.\u0275\u0275getCurrentView();p.\u0275\u0275elementStart(0,"tr"),p.\u0275\u0275elementStart(1,"td"),p.\u0275\u0275text(2),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(3,"td"),p.\u0275\u0275text(4),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(5,"td"),p.\u0275\u0275text(6),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(7,"td"),p.\u0275\u0275text(8),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(9,"td"),p.\u0275\u0275text(10),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(11,"td",42),p.\u0275\u0275text(12),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(13,"td"),p.\u0275\u0275elementStart(14,"dw-input-number",43),p.\u0275\u0275listener("ngModelChange",function(e){return p.\u0275\u0275restoreView(n).$implicit.price=e})("ngModelChange",function(){return p.\u0275\u0275restoreView(n),p.\u0275\u0275nextContext().partPriceChange()}),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(15,"td",42),p.\u0275\u0275text(16),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(17,"td"),p.\u0275\u0275elementStart(18,"input",44),p.\u0275\u0275listener("ngModelChange",function(e){return p.\u0275\u0275restoreView(n).$implicit.remark=e}),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd()}if(2&e){var r=t.$implicit;p.\u0275\u0275advance(2),p.\u0275\u0275textInterpolate1(" ",r.material_code," "),p.\u0275\u0275advance(2),p.\u0275\u0275textInterpolate1(" ",r.material_name," "),p.\u0275\u0275advance(2),p.\u0275\u0275textInterpolate1(" ",r.specification," "),p.\u0275\u0275advance(2),p.\u0275\u0275textInterpolate1(" ",r.model," "),p.\u0275\u0275advance(2),p.\u0275\u0275textInterpolate1(" ",r.unit," "),p.\u0275\u0275advance(2),p.\u0275\u0275textInterpolate1(" ",r.quality," "),p.\u0275\u0275advance(2),p.\u0275\u0275property("ngModel",r.price)("dwMin",0)("dwPrecision",2),p.\u0275\u0275advance(2),p.\u0275\u0275textInterpolate1(" ",(r.price*r.quality).toFixed(2)," "),p.\u0275\u0275advance(2),p.\u0275\u0275property("ngModel",r.remark)}}var cn=function(){return{x:"900px"}},sn=[{path:"",pathMatch:"prefix",component:f,data:{dwRouteData:{programId:"quotation"}},children:[{path:"quotation-list/:id",component:lt,canActivate:[u.DwAuthGuardService,rn.L],data:{dwRouteData:{dwAuthId:"quotation"},reload:!0}},{path:"quotation-create",component:nn,canActivate:[u.DwAuthGuardService,rn.L],data:{dwRouteData:{dwAuthId:"quotation"},reload:!0}},{path:"quotation-modify/:id",component:nn,canActivate:[u.DwAuthGuardService,rn.L],data:{dwRouteData:{dwAuthId:"quotation"},reload:!0}},{path:"quote",component:function(){var e=function(){function e(t,n,r,i,a){var o=this;s(this,e),this.fb=t,this.router=n,this.activeRoute=r,this.quotationService=i,this.message=a,this.DW_IN_MFA=B.ns,this.id="",this.warehouse_list=[],this.spareParts=[],this.partAmountTotal="0.00",this.activeRoute.queryParamMap.subscribe(function(e){o.id=e.get("id")}),this.form=this.fb.group({doc_no:[{value:"",disabled:!0}],doc_date:[{value:"",disabled:!0}],quote_type_name:[{value:"",disabled:!0}],employee_id:[{value:"",disabled:!0}],employee_name:[{value:"",disabled:!0}],customer_code:[{value:"",disabled:!0}],customer_name:[{value:"",disabled:!0}],type:["1"],product_file_id:[{value:"",disabled:!0}],product_file_code:[{value:"",disabled:!0}],product_file_name:[{value:"",disabled:!0}],sn:[{value:"",disabled:!0}],specification:[{value:"",disabled:!0}],model:[{value:"",disabled:!0}],remark:[""],warehouse_id:0})}return m(e,[{key:"ngOnInit",value:function(){this.getQuotationInfo(),this.getWarehouseList()}},{key:"getWarehouseList",value:function(){var e=this;this.warehouse_list.push({warehouse_id:0,warehouse_name:""}),this.quotationService.getWarehouseList().subscribe(function(t){t.success?t.data.warehouse.forEach(function(t){e.warehouse_list.push({warehouse_id:t.warehouse_id,warehouse_name:t.warehouse_name})}):e.message.create("error",t.message)},function(t){t.hasOwnProperty("error")&&t.error.hasOwnProperty("errorMessage")&&t.error.errorMessage&&e.message.error(t.error.errorMessage)})}},{key:"getQuotationInfo",value:function(){var e=this;this.quotationService.getQuotationInfo(this.id).subscribe(function(t){if(t.success){var n=t.data.quotation[0];e.form.get("doc_no").setValue(n.doc_no),e.form.get("doc_date").setValue(n.doc_date),e.form.get("quote_type_name").setValue(n.quote_type_name),e.form.get("employee_id").setValue(n.employee_id),e.form.get("employee_name").setValue(n.employee_name),e.form.get("customer_code").setValue(n.customer_code),e.form.get("customer_name").setValue(n.customer_name),e.form.get("type").setValue(n.file_type||"1"),e.form.get("product_file_id").setValue(n.product_file_id),e.form.get("product_file_code").setValue(n.product_file_code),e.form.get("product_file_name").setValue(n.product_file_name),e.form.get("sn").setValue(n.sn),e.form.get("specification").setValue(n.specification),e.form.get("model").setValue(n.model),e.form.get("remark").setValue(n.remark),e.form.get("warehouse_id").setValue(n.warehouse_id);var r=[];n.child.quotation_details.forEach(function(e){"1"===e.expense_type&&r.push({quotation_details_id:e.quotation_details_id,price:e.price,material_code:e.item_code,material_id:e.item_id,material_name:e.item_name,model:e.item_model,specification:e.item_spec,unit:e.item_unit,quality:e.quality,remark:e.remark})}),e.spareParts=r,e.partPriceChange()}else e.message.create("error",t.message)},function(t){t.hasOwnProperty("error")&&t.error.hasOwnProperty("errorMessage")&&t.error.errorMessage&&e.message.error(t.error.errorMessage)})}},{key:"partPriceChange",value:function(){var e=this;this.partAmountTotal="0.00",this.spareParts.forEach(function(t){e.partAmountTotal=(parseFloat(e.partAmountTotal)+t.price*t.quality).toFixed(2)})}},{key:"handleOk",value:function(){var e=!0;if(this.spareParts.forEach(function(t){(!t.price&&0!==t.price||t.price<0)&&(e=!1)}),e){var t=[];this.spareParts.forEach(function(e){t.push({quotation_details_id:e.quotation_details_id+"",item_id:e.material_id,item_code:e.material_code,item_name:e.material_name,item_spec:e.specification,item_model:e.model,item_unit:e.unit,price:e.price,quality:e.quality,amount:e.price*e.quality,remark:e.remark})}),this.quote({quotation_details:t,remark:this.form.controls.remark.value,warehouse_id:this.form.controls.warehouse_id.value})}else this.message.create("error","\u914d\u4ef6\u5355\u4ef7\u4e0d\u53ef\u4e3a\u7a7a")}},{key:"quote",value:function(e){var t=this;this.quotationService.quote(e,this.id).subscribe(function(e){t.message.create("success","\u62a5\u4ef7\u6210\u529f\uff01"),t.returnQuotationList()},function(e){e.hasOwnProperty("error")&&e.error.hasOwnProperty("errorMessage")&&e.error.errorMessage&&t.message.error(e.error.errorMessage)})}},{key:"handleCancel",value:function(){this.returnQuotationList()}},{key:"returnQuotationList",value:function(){this.router.navigate([(this.DW_IN_MFA?"/assc_crs":"")+"/crs/quotation/quotation-list/@"],{relativeTo:this.activeRoute})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(p.\u0275\u0275directiveInject(g.FormBuilder),p.\u0275\u0275directiveInject(c.Router),p.\u0275\u0275directiveInject(c.ActivatedRoute),p.\u0275\u0275directiveInject(S),p.\u0275\u0275directiveInject(h.DwMessageService))},e.\u0275cmp=p.\u0275\u0275defineComponent({type:e,selectors:[["app-quote"]],decls:119,vars:13,consts:[[1,"dw-f-content-list","layoutClass","sales_layout"],[1,"issue_layout_head"],[1,"issue_layout_title"],[2,"margin-left","3px"],[2,"float","right"],["dw-button","","type","submit",3,"dwType","click"],["translate",""],["dw-button","","type","button",3,"dwType","click"],[1,"content-box"],["dw-form","",3,"formGroup"],["dw-row",""],[1,"box","half"],[1,"label"],[1,"cont-table",2,"width","calc(100% - 114px)"],["dw-input","","formControlName","doc_no"],["formControlName","doc_date"],[2,"margin-right","4px","color","#ff4d4f","vertical-align","-3px"],["dw-input","","formControlName","quote_type_name"],["dw-input","","formControlName","employee_name"],["dw-input","","formControlName","customer_name"],["formControlName","warehouse_id",2,"width","100%"],[3,"dwLabel","dwValue",4,"ngFor","ngForOf"],["class","label",4,"ngIf"],["dw-input","","formControlName","sn"],["dw-input","","formControlName","product_file_name"],["dw-input","","formControlName","model"],["dw-input","","formControlName","specification"],[1,"box","big-half"],["dw-input","","maxlength","200","formControlName","remark",2,"height","32px"],[1,"box"],[3,"dwData","dwFrontPagination","dwShowPagination","dwScroll"],["dwTable2",""],["dw-tr",""],["dw-th",""],["dw-th","","width","80"],["dw-th","","width","80","dwAlign","right"],["dw-th","","width","100"],["dw-th","","dwAlign","right"],["dw-th","","width","180"],[4,"ngFor","ngForOf"],[1,"total-amount"],[3,"dwLabel","dwValue"],["dwAlign","right"],[3,"ngModel","dwMin","dwPrecision","ngModelChange"],["dw-input","","type","text",3,"ngModel","ngModelChange"]],template:function(e,t){if(1&e&&(p.\u0275\u0275elementStart(0,"dw-content",0),p.\u0275\u0275elementStart(1,"div",1),p.\u0275\u0275elementStart(2,"h2",2),p.\u0275\u0275elementStart(3,"span",3),p.\u0275\u0275text(4,"\u6613\u635f\u4ef6\u9500\u552e\u62a5\u4ef7"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(5,"div",4),p.\u0275\u0275elementStart(6,"button",5),p.\u0275\u0275listener("click",function(){return t.handleOk()}),p.\u0275\u0275elementStart(7,"span",6),p.\u0275\u0275text(8,"\u62a5\u4ef7"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(9,"button",7),p.\u0275\u0275listener("click",function(){return t.handleCancel()}),p.\u0275\u0275elementStart(10,"span",6),p.\u0275\u0275text(11,"\u53d6\u6d88"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275element(12,"dw-divider"),p.\u0275\u0275elementStart(13,"div",8),p.\u0275\u0275elementStart(14,"form",9),p.\u0275\u0275elementStart(15,"div",10),p.\u0275\u0275elementStart(16,"div",11),p.\u0275\u0275elementStart(17,"div",12),p.\u0275\u0275text(18,"\u5355\u53f7"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(19,"div",13),p.\u0275\u0275element(20,"input",14),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(21,"div",11),p.\u0275\u0275elementStart(22,"div",12),p.\u0275\u0275text(23,"\u586b\u5355\u65e5\u671f"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(24,"div",13),p.\u0275\u0275element(25,"dw-date-picker",15),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(26,"div",10),p.\u0275\u0275elementStart(27,"div",11),p.\u0275\u0275elementStart(28,"div",12),p.\u0275\u0275elementStart(29,"span",16),p.\u0275\u0275text(30,"*"),p.\u0275\u0275elementEnd(),p.\u0275\u0275text(31," \u62a5\u4ef7\u7c7b\u578b "),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(32,"div",13),p.\u0275\u0275element(33,"input",17),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(34,"div",11),p.\u0275\u0275elementStart(35,"div",12),p.\u0275\u0275text(36,"\u586b\u5355\u4eba\u5458"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(37,"div",13),p.\u0275\u0275element(38,"input",18),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(39,"div",10),p.\u0275\u0275elementStart(40,"div",11),p.\u0275\u0275elementStart(41,"div",12),p.\u0275\u0275text(42,"\u5ba2\u6237"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(43,"div",13),p.\u0275\u0275element(44,"input",19),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(45,"div",11),p.\u0275\u0275elementStart(46,"div",12),p.\u0275\u0275text(47,"\u4ed3\u5e93"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(48,"div",13),p.\u0275\u0275elementStart(49,"dw-select",20),p.\u0275\u0275template(50,an,1,2,"dw-option",21),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(51,"div",10),p.\u0275\u0275elementStart(52,"div",11),p.\u0275\u0275template(53,on,2,0,"div",22),p.\u0275\u0275template(54,ln,2,0,"div",22),p.\u0275\u0275elementStart(55,"div",13),p.\u0275\u0275element(56,"input",23),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(57,"div",11),p.\u0275\u0275elementStart(58,"div",12),p.\u0275\u0275text(59,"\u4ea7\u54c1"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(60,"div",13),p.\u0275\u0275element(61,"input",24),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(62,"div",10),p.\u0275\u0275elementStart(63,"div",11),p.\u0275\u0275elementStart(64,"div",12),p.\u0275\u0275text(65,"\u578b\u53f7"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(66,"div",13),p.\u0275\u0275element(67,"input",25),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(68,"div",11),p.\u0275\u0275elementStart(69,"div",12),p.\u0275\u0275text(70,"\u89c4\u683c"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(71,"div",13),p.\u0275\u0275element(72,"input",26),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(73,"div",10),p.\u0275\u0275elementStart(74,"div",27),p.\u0275\u0275elementStart(75,"div",12),p.\u0275\u0275text(76,"\u5907\u6ce8"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(77,"div",13),p.\u0275\u0275element(78,"textarea",28),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(79,"div",29),p.\u0275\u0275element(80,"div",12),p.\u0275\u0275elementStart(81,"div",13),p.\u0275\u0275elementStart(82,"dw-table",30,31),p.\u0275\u0275elementStart(84,"thead"),p.\u0275\u0275elementStart(85,"tr",32),p.\u0275\u0275elementStart(86,"th",33),p.\u0275\u0275elementStart(87,"span",6),p.\u0275\u0275text(88,"\u7f16\u53f7"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(89,"th",33),p.\u0275\u0275elementStart(90,"span",6),p.\u0275\u0275text(91,"\u540d\u79f0"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(92,"th",33),p.\u0275\u0275elementStart(93,"span",6),p.\u0275\u0275text(94,"\u89c4\u683c"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(95,"th",33),p.\u0275\u0275elementStart(96,"span",6),p.\u0275\u0275text(97,"\u578b\u53f7"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(98,"th",34),p.\u0275\u0275elementStart(99,"span",6),p.\u0275\u0275text(100,"\u5355\u4f4d"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(101,"th",35),p.\u0275\u0275elementStart(102,"span",6),p.\u0275\u0275text(103,"\u6570\u91cf"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(104,"th",36),p.\u0275\u0275elementStart(105,"span",6),p.\u0275\u0275text(106,"\u5355\u4ef7"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(107,"th",37),p.\u0275\u0275elementStart(108,"span",6),p.\u0275\u0275text(109,"\u91d1\u989d"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(110,"th",38),p.\u0275\u0275elementStart(111,"span",6),p.\u0275\u0275text(112,"\u5907\u6ce8"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(113,"tbody"),p.\u0275\u0275template(114,dn,19,11,"tr",39),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(115,"div",40),p.\u0275\u0275text(116," \u5408\u8ba1\uff1a"),p.\u0275\u0275elementStart(117,"span"),p.\u0275\u0275text(118),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd()),2&e){var n=p.\u0275\u0275reference(83);p.\u0275\u0275advance(6),p.\u0275\u0275property("dwType","primary"),p.\u0275\u0275advance(3),p.\u0275\u0275property("dwType","default"),p.\u0275\u0275advance(5),p.\u0275\u0275property("formGroup",t.form),p.\u0275\u0275advance(36),p.\u0275\u0275property("ngForOf",t.warehouse_list),p.\u0275\u0275advance(3),p.\u0275\u0275property("ngIf","1"===t.form.value.type),p.\u0275\u0275advance(1),p.\u0275\u0275property("ngIf","2"===t.form.value.type),p.\u0275\u0275advance(28),p.\u0275\u0275property("dwData",t.spareParts)("dwFrontPagination",!1)("dwShowPagination",!1)("dwScroll",p.\u0275\u0275pureFunction0(12,cn)),p.\u0275\u0275advance(32),p.\u0275\u0275property("ngForOf",n.data),p.\u0275\u0275advance(4),p.\u0275\u0275textInterpolate1("\uffe5",t.partAmountTotal,"")}},directives:[$.DwContentComponent,X.DwButtonComponent,ee.uG,Y.u,I.TranslateDirective,U.DwDividerComponent,g.\u0275NgNoValidate,g.NgControlStatusGroup,K.DwFormDirective,g.FormGroupDirective,b.DwRowDirective,J.DwInputDirective,g.DefaultValueAccessor,g.NgControlStatus,g.FormControlName,Z.DwDatePickerComponent,mt.DwSelectComponent,o.NgForOf,o.NgIf,g.MaxLengthValidator,C.DwTableComponent,C.DwTheadComponent,C.DwTrDirective,C.DwTableCellDirective,C.DwThMeasureDirective,C.DwCellAlignDirective,C.DwTbodyComponent,mt.DwOptionComponent,zt.DwInputNumberComponent,g.NgModel],styles:[".box[_ngcontent-%COMP%]{width:100%;display:flex;margin-bottom:20px}.box.half[_ngcontent-%COMP%]{width:40%;margin-bottom:12px}.box.big-half[_ngcontent-%COMP%]{width:80%}.box[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{width:104px;height:32px;line-height:32px;font-size:14px;text-align:right;white-space:nowrap}.total-amount[_ngcontent-%COMP%]{height:49px;line-height:48px;text-align:right;color:#000000d9;font-weight:bold;font-size:16px;padding:0 24px;border:1px solid #f0f0f0;border-top:0}.total-amount[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#fe3a3a}"]}),e}(),canActivate:[u.DwAuthGuardService,rn.L],data:{dwRouteData:{dwAuthId:"quotation"},reload:!0}}]}],un=function(){var e=m(function e(){s(this,e)});return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=p.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=p.\u0275\u0275defineInjector({imports:[[c.RouterModule.forChild(sn)],c.RouterModule]}),e}(),mn=function(){var e=m(function e(){s(this,e)});return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=p.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=p.\u0275\u0275defineInjector({imports:[[o.CommonModule,d.m,un,h.DwMessageModule,v.DwModalModule,wt.DwCheckboxModule,mt.DwSelectModule,Mt.DwRadioModule,C.DwTableModule,re.DwIconModule,J.DwInputModule,I.TranslateModule,b.DwGridModule,X.DwButtonModule,$.DwLayoutModule,Z.DwDatePickerModule,U.DwDividerModule,ae.DwDrawerModule,K.DwFormModule,oe.DwPopconfirmModule,ie.DwTabsModule,le.DwTagModule,te.DwActionModule,g.ReactiveFormsModule,zt.DwInputNumberModule]]}),e}()},13437:function(e,t,r){r.d(t,{y:function(){return p}});var a,o=r(47372),l=r(9682),d=function(e){n(r,e);var t=i(r);function r(e,n){var i;return s(this,r),(i=t.call(this)).dwDapHttp=e,i.url=n,i}return m(r,[{key:"getDataList",value:function(e,t){var n=this;return this.dwDapHttp.get(this.url).pipe((0,o.map)(function(r){return n._result={currentPage:e,datas:Object.assign([],r),pageCount:Math.ceil(r.length/t),pageSize:t,rowCount:r.length},n._result}))}}]),r}(l.DwClientPagingDataSource),c=r(51156),u=r(42746),p=((a=function(){function e(t,n){s(this,e),this.dwHttp=t,this.selectModalService=n}return m(e,[{key:"setConfig",value:function(e,t){this.config={modalTitle:"\u9009\u62e9\u670d\u52a1\u9879\u76ee",modalWidth:"50%",tableMultiSelect:t,tableIdField:"service_item_id",tableNameField:"service_item_name",tablePageSize:10,tableColDefs:[{title:"\u9879\u76ee\u7f16\u53f7",field:"service_item_code",width:""},{title:"\u9879\u76ee\u540d\u79f0",field:"service_item_name",width:""},{title:"\u4ef7\u683c",field:"customer_settlement_price",width:""}],tableCustomTag:function(e){return"("+e.service_item_code+")"+e.service_item_name},dataSource:new d(this.dwHttp,"restful/service/serviceItem/ServiceItem/ServiceItem?name=&code=")}}},{key:"open",value:function(e){var t=this;return this.selectModalService.open(this.config,e).pipe((0,o.switchMap)(function(e){return t.dwHttp.get("restful/service/serviceItem/ServiceItem/ServiceItemByIds?ids=".concat(e))}))}}]),e}()).\u0275fac=function(e){return new(e||a)(u.\u0275\u0275inject(c.DwDapHttpClient),u.\u0275\u0275inject(l.DwSelectModalService))},a.\u0275prov=u.\u0275\u0275defineInjectable({token:a,factory:a.\u0275fac}),a)},91970:function(e,t,n){n.d(t,{v:function(){return c}});var r,i=n(51156),a=n(66800),o=n(47372),l=n(99487),d=n(42746),c=((r=function(){function e(t,n){s(this,e),this.dapHttp=t,this.userService=n}return m(e,[{key:"emptyServiceOrder",value:function(){return{doc_date:new Date,is_under_warranty:!1,description:"",appointment_date:new Date,picture_id:"",contact:"",contact_phone:"",address:"",delivery_date:new Date,service_type_name:"",breakdown_name:"",service_urgency_name:""}}},{key:"emptyServiceOrderCurrentLink",value:function(){return{state:"",employee_name:"",file_id:"",employee_show:"",state_show:"",button_show:""}}},{key:"getServiceOrderBaseInfo",value:function(e){return this.dapHttp.get("restful/service/serviceOrder/ServiceOrder/ServiceOrderBaseInfo?id=".concat(e))}},{key:"getServiceOrderLink",value:function(e){return this.dapHttp.get("restful/service/serviceOrder/ServiceOrder/ServiceOrderLink?id=".concat(e))}},{key:"getServiceOrderProgress",value:function(e){return this.dapHttp.get("restful/service/serviceOrder/ServiceOrder/ServiceOrderProgress?id=".concat(e)).pipe((0,o.map)(function(e){return e}))}},{key:"getServiceDocInfo",value:function(e){return this.dapHttp.get("restful/service/serviceOrder/ServiceOrder/ServiceDocInfo?id=".concat(e)).pipe((0,o.map)(function(e){return e}))}},{key:"getServiceDocCalcDetail",value:function(e){return this.dapHttp.get("restful/service/serviceOrder/ServiceOrder/ServiceDocCalcDetail?id=".concat(e)).pipe((0,o.map)(function(e){return e}))}},{key:"getServiceOrderProcessrecordListCount",value:function(e){return this.dapHttp.get("restful/service/serviceDoc/ServiceDoc/ServiceOrderProcessrecordListCount?serviceOrderId=".concat(e))}},{key:"getServiceOrderProcessrecordList",value:function(e){return this.dapHttp.get("restful/service/serviceDoc/ServiceDoc/ServiceOrderProcessrecordList?serviceOrderId=".concat(e)).pipe((0,o.map)(function(e){return e}))}},{key:"getServiceOrderReview",value:function(e){return this.dapHttp.get("restful/service/serviceOrder/ServiceOrder/ServiceOrderReview?service_order_id=".concat(e))}},{key:"getUserId",value:function(){return this.dapHttp.get("restful/service/employee/Employee/CurrentEmployee")}},{key:"getBreakdownOpener",value:function(){return this.dapHttp.get("restful/service/breakdown/Breakdown/BreakdownOpener?name=")}},{key:"getMaterialGroups",value:function(e){return this.dapHttp.get("restful/service/serviceDoc/ServiceReport/".concat(e))}},{key:"getMaterialList",value:function(e){return this.dapHttp.get("restful/service/serviceDoc/ServiceReport/".concat(e))}},{key:"getNewMaterialListByOrder",value:function(e){return this.dapHttp.get("restful/service/serviceDoc/ServiceReport/PartsDeliveryDetails?serviceOrderId=".concat(e))}},{key:"getNewMaterialListBySite",value:function(e){return this.dapHttp.get("restful/service/serviceDoc/ServiceReport/EngineerMaterials?serviceOrderId=".concat(e))}},{key:"getSummaryInfo",value:function(e){return this.dapHttp.get("restful/service/serviceDoc/ServiceDoc/ServiceDocSummary?serviceDocId=".concat(e))}},{key:"getQuotationServiceItems",value:function(e){return this.dapHttp.get("restful/service/serviceDoc/ServiceDoc/QuotationServiceItems?serviceOrderId=".concat(e))}},{key:"getQuotationMaterialGroups",value:function(e){return this.dapHttp.get("restful/service/itemGroup/ItemGroup/".concat(e))}},{key:"getQuotationMaterialList",value:function(e){return this.dapHttp.get("restful/service/".concat(e))}},{key:"getQuotationNewMaterialListByOrder",value:function(e){return this.dapHttp.get("restful/service/material/Material/PartsDeliveryDetails?serviceOrderId=".concat(e))}},{key:"getQuickwearPartAllMaterialGroups",value:function(e){return this.dapHttp.get("restful/service/productFile/QuickwearPart/".concat(e))}},{key:"uploadImg",value:function(e){return this.dapHttp.post("restful/service/serviceDoc/File/UploadImage",e)}},{key:"getFileById",value:function(e){return this.dapHttp.get("restful/service/employee/Employee/File?file_id=".concat(e)).pipe((0,o.map)(function(e){return e}))}},{key:"createReport",value:function(e){return this.dapHttp.post("restful/service/serviceDoc/ServiceReport/ServiceReport",{params:e})}},{key:"getServiceReportInfo",value:function(e){return this.dapHttp.get("restful/service/serviceDoc/serviceReport/ServiceDocInfo?serviceDocId=".concat(e))}},{key:"modifyReport",value:function(e){return this.dapHttp.post("restful/service/serviceDoc/ServiceReport/ServiceReportModify",{params:e})}},{key:"exportPDF",value:function(e){return this.dapHttp.get("restful/service/serviceDoc/ServiceReport/ServiceReportPdf",{params:e=e||{},headers:this.getHeader(),observe:"events",responseType:"blob",reportProgress:!0})}},{key:"getHeader",value:function(){return new l.HttpHeaders({token:this.userService.getUser("token")})}},{key:"serviceDocPartChanges",value:function(e){return this.dapHttp.post("restful/service/serviceDoc/ServiceReport/ServiceDocPartChanges",{params:e})}},{key:"getAutoSettings",value:function(){return this.dapHttp.get("restful/service/autoSettings/AutoSettings/AutoSettings")}},{key:"getServiceTypes",value:function(){return this.dapHttp.get("restful/service/serviceType/serviceType/ServiceType?code=&name=").pipe((0,o.map)(function(e){return e}))}},{key:"checkNotCompletePartsApply",value:function(e){return this.dapHttp.get("restful/service/serviceDoc/ServiceDoc/NotCompletePartsApplyCount?serviceDocId="+e).pipe((0,o.map)(function(e){return e}))}},{key:"serviceOrderRecordShowAlert",value:function(e){return this.dapHttp.get("restful/service/serviceDoc/ServiceReport/ServiceOrderRecordShowAlert?productFileId="+e).pipe((0,o.map)(function(e){return e}))}},{key:"saveAmountInfo",value:function(e){return this.dapHttp.put("restful/service/serviceDoc/ServiceReport/ModifyServiceDocCalcDetail",e)}},{key:"getServiceOrderCustomerSettled",value:function(e){return this.dapHttp.get("restful/service/serviceDoc/ServiceReport/ServiceOrderCustomerSettled?serviceOrderId="+e)}},{key:"getReturnvisitItemList",value:function(){return this.dapHttp.get("restful/service/returnvisitItem/ReturnVisitItem/ReturnVisitItemList?isIncludeSystemData=true").pipe((0,o.map)(function(e){return e}))}},{key:"returnvisit",value:function(e){return this.dapHttp.put("restful/service/serviceOrder/ServiceOrder/ReturnVisitEvaluation",{params:e})}},{key:"saveAttachments",value:function(e){return this.dapHttp.post("restful/service/productFile/ProductFile/Attachments",e,{})}},{key:"download",value:function(e){return this.dapHttp.get("restful/service/productFile/ProductFile/downloadFile",{params:e=e||{},headers:this.getHeader(),observe:"events",responseType:"blob",reportProgress:!0})}},{key:"getCurrentEmployee",value:function(){return this.dapHttp.get("restful/service/employee/Employee/CurrentEmployee")}},{key:"getWorkrecord",value:function(e){return this.dapHttp.get("restful/service/serviceDoc/ServiceDoc/ServiceDocLog?serviceDocId=".concat(e)).pipe((0,o.map)(function(e){return e}))}}]),e}()).\u0275fac=function(e){return new(e||r)(d.\u0275\u0275inject(i.DwDapHttpClient),d.\u0275\u0275inject(a.DwUserService))},r.\u0275prov=d.\u0275\u0275defineInjectable({token:r,factory:r.\u0275fac,providedIn:"root"}),r)},90697:function(e,n,r){r.d(n,{a:function(){return w}});var i=r(64762),a=r(45890),o=r(83237),l=r(42746),d=r(67733),c=r(85277),u=r(31441),p=r(55245),f=function(){return{width:"100%"}};function h(e,t){if(1&e&&l.\u0275\u0275element(0,"img",6),2&e){var n=l.\u0275\u0275nextContext();l.\u0275\u0275property("src",n.previewImage,l.\u0275\u0275sanitizeUrl)("ngStyle",l.\u0275\u0275pureFunction0(2,f))}}var v,g=function(){return{showPreviewIcon:!0,showRemoveIcon:!1,showDownloadIcon:!1}},w=((v=function(){function e(n,r){var a=this;s(this,e),this.http=n,this.message=r,this.fileList=[],this.previewImage="",this.previewVisible=!1,this.handlePreview=function(e){return(0,i.mG)(a,void 0,void 0,t().mark(function n(){var r=this;return t().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.item.file_id?this.http.get("restful/service/material/Material/MaterialOriginUrl?fileId=".concat(this.item.file_id)).subscribe(function(t){r.previewImage=t||e.url,r.previewVisible=!0},function(e){e.hasOwnProperty("error")&&e.error.hasOwnProperty("errorMessage")&&e.error.errorMessage&&r.message.error(e.error.errorMessage)}):(this.previewImage=e.url,this.previewVisible=!0);case 1:case"end":return t.stop()}},n,this)}))}}return m(e,[{key:"ngOnInit",value:function(){this.fileList=this.item.url?[{uid:this.item.file_id||this.item.url,name:this.item.file_id||this.item.url,status:"done",url:this.item.url}]:[]}}]),e}()).\u0275fac=function(e){return new(e||v)(l.\u0275\u0275directiveInject(a.$),l.\u0275\u0275directiveInject(o.DwMessageService))},v.\u0275cmp=l.\u0275\u0275defineComponent({type:v,selectors:[["app-big-img"]],inputs:{item:"item"},decls:8,vars:8,consts:[[1,"small_img"],["dwListType","picture-card",3,"dwShowUploadList","dwFileList","dwShowButton","dwPreview","dwFileListChange"],["dw-icon","","dwType","plus"],[1,"ant-upload-text"],[3,"dwVisible","dwContent","dwFooter","dwOnCancel"],["modalContent",""],["alt","img",3,"src","ngStyle"]],template:function(e,t){if(1&e&&(l.\u0275\u0275elementStart(0,"div",0),l.\u0275\u0275elementStart(1,"dw-upload",1),l.\u0275\u0275listener("dwFileListChange",function(e){return t.fileList=e}),l.\u0275\u0275element(2,"em",2),l.\u0275\u0275elementStart(3,"div",3),l.\u0275\u0275text(4,"Upload"),l.\u0275\u0275elementEnd(),l.\u0275\u0275elementEnd(),l.\u0275\u0275elementStart(5,"dw-modal",4),l.\u0275\u0275listener("dwOnCancel",function(){return t.previewVisible=!1}),l.\u0275\u0275template(6,h,1,3,"ng-template",null,5,l.\u0275\u0275templateRefExtractor),l.\u0275\u0275elementEnd(),l.\u0275\u0275elementEnd()),2&e){var n=l.\u0275\u0275reference(7);l.\u0275\u0275advance(1),l.\u0275\u0275property("dwShowUploadList",l.\u0275\u0275pureFunction0(7,g))("dwFileList",t.fileList)("dwShowButton",!1)("dwPreview",t.handlePreview),l.\u0275\u0275advance(4),l.\u0275\u0275property("dwVisible",t.previewVisible)("dwContent",n)("dwFooter",null)}},directives:[d.DwUploadComponent,c.DwIconDirective,u.DwModalComponent,p.NgStyle],styles:[""]}),v)},45890:function(e,t,n){n.d(t,{$:function(){return l}});var r,i=n(51156),a=n(99487),o=n(42746),l=((r=function(){function e(t){s(this,e),this.dwDapHttpClient=t}return m(e,[{key:"get",value:function(e,t){var n=new a.HttpParams({fromObject:t});return this.dwDapHttpClient.get(e,{params:n})}},{key:"post",value:function(e,t){return this.dwDapHttpClient.post(e,t)}},{key:"put",value:function(e,t){return this.dwDapHttpClient.put(e,t)}},{key:"delete",value:function(e,t){return this.dwDapHttpClient.request("DELETE",e,{body:t})}}]),e}()).\u0275fac=function(e){return new(e||r)(o.\u0275\u0275inject(i.DwDapHttpClient))},r.\u0275prov=o.\u0275\u0275defineInjectable({token:r,factory:r.\u0275fac,providedIn:"root"}),r)},51033:function(e,t,n){n.d(t,{L:function(){return p}}),n(87974);var r,i=n(32276),a=n(51156),o=n(66800),l=n(83237),d=n(31441),c=n(71049),u=n(42746),p=((r=function(){function e(t,n,r,i,a){s(this,e),this.http=t,this.authService=n,this.userService=r,this.message=i,this.modalService=a,this.uerId=""}return m(e,[{key:"canLoad",value:function(e){return!0}},{key:"canActivateChild",value:function(e,t){return!0}},{key:"canActivate",value:function(e,t){var n=this;return new c.Observable(function(e){n.uerId=n.userService.getUser("userId"),n.uerId?n.http.get("restful/service/employee/Employee/ValidateIamUser?userId=".concat(n.uerId)).subscribe(function(t){t.success?(sessionStorage.setItem("employeeInfo",JSON.stringify(t.data?t.data.data:{})),e.next(!0)):(n.modalService.warning({dwTitle:"\u63d0\u793a",dwContent:t.data,dwWidth:"400px",dwOnOk:function(){n.authService.logout(),window.location.reload()}}),e.next(!1))},function(t){console.log(t),t.hasOwnProperty("error")&&t.error.hasOwnProperty("errorMessage")&&t.error.errorMessage&&n.message.error(t.error.errorMessage),e.next(!1)}):e.next(!0)})}}]),e}()).\u0275fac=function(e){return new(e||r)(u.\u0275\u0275inject(a.DwDapHttpClient),u.\u0275\u0275inject(i.DwAuthService),u.\u0275\u0275inject(o.DwUserService),u.\u0275\u0275inject(l.DwMessageService),u.\u0275\u0275inject(d.DwModalService))},r.\u0275prov=u.\u0275\u0275defineInjectable({token:r,factory:r.\u0275fac,providedIn:"root"}),r)},61937:function(t,n,r){r.d(n,{l:function(){return i}});var i=function(){function t(){s(this,t)}return m(t,null,[{key:"order",value:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return t?e(t).sort(function(e,t){for(var n=0,i=0,a=r.length,o=0;o<a;o++){var l=r[o][0],d=r[o][1]||1,c=Math.pow(2,a-o)*d,s=void 0,u=void 0;l instanceof Function?(s=String(l(e)||""),u=String(l(t)||"")):(s=String(e[l]||""),u=String(t[l]||"")),1===s.localeCompare(u)?n+=c:-1===s.localeCompare(u)&&(i+=c)}return n-i}):[]}},{key:"crossPageCache",value:function(e,t,n,r){var i=e[r];if(i){var a=i[n];i.checked?t.includes(a)||t.push(a):t.includes(a)&&t.splice(t.indexOf(a),1)}}},{key:"crossPageCheck",value:function(e,t,n){var r,i=l(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;t.includes(a[n])?a.checked||(a.checked=!0):a.checked&&(a.checked=!1)}}catch(o){i.e(o)}finally{i.f()}}},{key:"parseJson",value:function(e){try{return JSON.parse(e)}catch(t){return null}}}]),t}()},64762:function(e,t,n){n.d(t,{ZT:function(){return i},pi:function(){return a},_T:function(){return o},gn:function(){return l},fM:function(){return d},w6:function(){return c},mG:function(){return s},ev:function(){return u}});var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var a=function(){return(a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function o(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}function l(e,t,n,r){var i,a=arguments.length,o=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(o=(a<3?i(o):a>3?i(t,n,o):i(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o}function d(e,t){return function(n,r){t(n,r,e)}}function c(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function s(e,t,n,r){return new(n||(n=Promise))(function(i,a){function o(e){try{d(r.next(e))}catch(t){a(t)}}function l(e){try{d(r.throw(e))}catch(t){a(t)}}function d(e){e.done?i(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(o,l)}d((r=r.apply(e,t||[])).next())})}function u(e,t,n){if(n||2===arguments.length)for(var r,i=0,a=t.length;i<a;i++)(r||!(i in t))&&(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}}}])}();