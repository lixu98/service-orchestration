!function(){"use strict";function e(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,u=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(s){u=!0,i=s}finally{try{o||null==n.return||n.return()}finally{if(u)throw i}}return a}(e,n)||function(e,n){if(!e)return;if("string"==typeof e)return t(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return t(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(self.webpackChunkassc_crs=self.webpackChunkassc_crs||[]).push([[6639,7506],{36639:function(t,r,a){a.r(r),a.d(r,{DwBaseIframeComponent:function(){return w},DwBaseIframeModule:function(){return g},DwIframeGeneralComponent:function(){return I},DwIframeGeneralModule:function(){return C},DwIframeModule:function(){return M}});var o=a(55245),u=a(42746),s=a(71049),c=a(87974),f=a(47372),m=a(30469),l=a(83174),h=a(27038),p=["dwIframe"],v=function(e){return["iframe-ww",e]};function d(e,t){if(1&e&&(u.\u0275\u0275elementContainerStart(0),u.\u0275\u0275elementStart(1,"div",1),u.\u0275\u0275elementStart(2,"div",2),u.\u0275\u0275element(3,"iframe",3,4),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementEnd(),u.\u0275\u0275element(5,"div",5),u.\u0275\u0275elementContainerEnd()),2&e){var n=u.\u0275\u0275nextContext();u.\u0275\u0275advance(1),u.\u0275\u0275attribute("iframetype",null==n.item?null:n.item.type),u.\u0275\u0275advance(2),u.\u0275\u0275property("ngClass",u.\u0275\u0275pureFunction1(5,v,"dw-f-iframe-"+(null==n.item?null:n.item.type))),u.\u0275\u0275attribute("sandbox",null==n.item?null:n.item.attr),u.\u0275\u0275advance(2),u.\u0275\u0275styleProp("display",!0===n.showMask?"block":"none")}}function b(e,t){if(1&e&&u.\u0275\u0275element(0,"dw-base-iframe",1),2&e){var n=u.\u0275\u0275nextContext();u.\u0275\u0275property("item",n.item)("itemObserve",n.itemRxjsBehavior)}}var y,w=((y=function(){function e(t){n(this,e),this._elementRef=t}return i(e,[{key:"ngOnInit",value:function(){}},{key:"ngAfterViewInit",value:function(){var e=this;this.iframes.changes.subscribe(function(t){t.length&&e.item&&(t.first.nativeElement.src=e.item.url)}),this.itemObserve?this.itemObserve.subscribe(function(t){t&&(e.item=t,e.iframe.nativeElement.src=e.item.url)},function(e){}):this.iframe&&(this.iframe.nativeElement.src=this.item.url)}}]),e}()).\u0275fac=function(e){return new(e||y)(u.\u0275\u0275directiveInject(u.ElementRef))},y.\u0275cmp=u.\u0275\u0275defineComponent({type:y,selectors:[["dw-base-iframe"]],viewQuery:function(e,t){var n;1&e&&(u.\u0275\u0275viewQuery(p,5),u.\u0275\u0275viewQuery(p,5)),2&e&&(u.\u0275\u0275queryRefresh(n=u.\u0275\u0275loadQuery())&&(t.iframe=n.first),u.\u0275\u0275queryRefresh(n=u.\u0275\u0275loadQuery())&&(t.iframes=n))},inputs:{item:"item",itemObserve:"itemObserve",showMask:"showMask"},decls:1,vars:1,consts:[[4,"ngIf"],[1,"ww-iframe-overflow"],[1,"ww-iframe-block"],["frameborder","0",3,"ngClass"],["dwIframe",""],[1,"drag-handler","iframe-mask"]],template:function(e,t){1&e&&u.\u0275\u0275template(0,d,6,7,"ng-container",0),2&e&&u.\u0275\u0275property("ngIf",t.item)},directives:[o.NgIf,o.NgClass],styles:["[_nghost-%COMP%]{height:100%;width:100%}.ww-iframe-block[_ngcontent-%COMP%]{position:relative;width:100%;height:100%}.iframe-ww[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%}.iframe-mask[_ngcontent-%COMP%]{display:none;background-color:#fff0;position:absolute;top:0;left:0;right:0;bottom:0}.ww-iframe-overflow[_ngcontent-%COMP%]{height:100%}"]}),y),g=function(){var e=i(function e(){n(this,e)});return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=u.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=u.\u0275\u0275defineInjector({imports:[[o.CommonModule]]}),e}(),I=function(){var t=function(){function t(e,r,i,a,o){n(this,t),this.router=e,this.activatedRoute=r,this.iframeGeneralInfoService=i,this.usingTab=a,this.item={url:"",type:"externalUrl"},this.postMessageHub=o.getHubInstance(),this.itemRxjsBehavior=new s.BehaviorSubject(null)}return i(t,[{key:"ngOnInit",value:function(){var t=this;if(!this.usingTab){var n=!1;this.initSubscription=this.activatedRoute.paramMap.pipe((0,f.switchMap)(function(e){return t.activatedRoute.queryParamMap},function(e,t){return{routeParam:e,queryParam:t}})).subscribe(function(e){n||(n=!0,t.setIframe(e.routeParam,e.queryParam.params)),t.initSubscription&&t.initSubscription.unsubscribe()}),this.changeSubscription=this.router.events.pipe((0,f.filter)(function(e){return e instanceof c.NavigationEnd}),(0,f.withLatestFrom)(this.activatedRoute.paramMap,this.activatedRoute.queryParamMap)).subscribe(function(n){var r=e(n,3),i=(r[0],r[1]),a=r[2];t.setIframe(i,a.params)})}}},{key:"ngOnDestroy",value:function(){this.initSubscription&&this.initSubscription.unsubscribe(),this.changeSubscription&&this.changeSubscription.unsubscribe()}},{key:"setIframe",value:function(e,t){var n=this,r=e.get("programId");this.iframeGeneralInfoService.generalInfo(r,t).subscribe(function(e){n.item=e,n.itemRxjsBehavior.next(n.item)},function(e){console.log(e)})}},{key:"ngAfterViewInit",value:function(){if(this.baseIframeComponent&&this.baseIframeComponent.iframe){var e=this.baseIframeComponent.iframe.nativeElement.contentWindow,t=new URL(this.baseIframeComponent.iframe.nativeElement.src);this.postMessageHub.addReceiver(e,"".concat(t.protocol,"//").concat(t.host))}}}]),t}();return t.\u0275fac=function(e){return new(e||t)(u.\u0275\u0275directiveInject(c.Router),u.\u0275\u0275directiveInject(c.ActivatedRoute),u.\u0275\u0275directiveInject(h.DwIframeGeneralInfoService),u.\u0275\u0275directiveInject(m.DW_USING_TAB),u.\u0275\u0275directiveInject(l.DwPostMessageFactoryService))},t.\u0275cmp=u.\u0275\u0275defineComponent({type:t,selectors:[["dw-iframe-general"]],viewQuery:function(e,t){var n;(1&e&&u.\u0275\u0275viewQuery(w,5),2&e)&&(u.\u0275\u0275queryRefresh(n=u.\u0275\u0275loadQuery())&&(t.baseIframeComponent=n.first))},decls:1,vars:1,consts:[[3,"item","itemObserve",4,"ngIf"],[3,"item","itemObserve"]],template:function(e,t){1&e&&u.\u0275\u0275template(0,b,1,2,"dw-base-iframe",0),2&e&&u.\u0275\u0275property("ngIf",!t.usingTab)},directives:[o.NgIf,w],styles:["[_nghost-%COMP%]{height:100%;width:100%}"]}),t}(),C=function(){var e=i(function e(){n(this,e)});return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=u.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=u.\u0275\u0275defineInjector({imports:[[o.CommonModule,g]]}),e}(),M=function(){var e=i(function e(){n(this,e)});return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=u.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=u.\u0275\u0275defineInjector({imports:[[o.CommonModule],g,C]}),e}()}}])}();