"use strict";(self.webpackChunkassc_crs=self.webpackChunkassc_crs||[]).push([[8671,6269],{88671:function(n,t,i){i.r(t),i.d(t,{DwLoadingHttpComponent:function(){return h},DwLoadingMaskService:function(){return u},DwLoadingModule:function(){return f}});var e=i(42746),s=i(55245),a=i(93029),o=i(16612),l=i(10952),d=i(30469),r=i(71049),c=i(47372);const g=["*"];let h=(()=>{class n{constructor(){}ngOnInit(){}ngOnDestroy(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["dw-loading-http"]],ngContentSelectors:g,decls:6,vars:4,consts:[[1,"ant-spin-nested-loading"],[1,"ant-spin","ant-spin-lg","ant-spin-spinning"],[1,"dw-f-loading-http-modal"],[3,"dwSpinning","dwSize","dwTip","dwDelay"]],template:function(n,t){1&n&&(e.\u0275\u0275projectionDef(),e.\u0275\u0275element(0,"div",0),e.\u0275\u0275elementStart(1,"div"),e.\u0275\u0275elementStart(2,"div",1),e.\u0275\u0275elementStart(3,"div",2),e.\u0275\u0275elementStart(4,"dw-spin",3),e.\u0275\u0275projection(5),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()),2&n&&(e.\u0275\u0275advance(4),e.\u0275\u0275property("dwSpinning",t.loadingMask.spinning)("dwSize","large")("dwTip",t.loadingMask.tip)("dwDelay",t.loadingMask.delay))},directives:[a.DwSpinComponent],encapsulation:2}),n})(),f=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=e.\u0275\u0275defineInjector({imports:[[s.CommonModule,a.DwSpinModule]]}),n})(),u=(()=>{class n{constructor(n,t,i){this.overlay=n,this.dwLoadMaskHttp=t,this.dwLoadMaskDelay=i,this.loadingList=[],this.loadingSubject=new r.BehaviorSubject(null),this.loadingSubjectNext(),this.loadingMaskOnInit()}get overlayRef(){if(!this._overlayRef){const n=this.overlay.position().global();this._overlayRef=this.overlay.create({hasBackdrop:!0,positionStrategy:n,panelClass:"dw-f-loading-http-panel",width:"100%",height:"100%"})}return this._overlayRef}auto(n,t,i){let e=null,s=this.dwLoadMaskHttp,a=this.dwLoadMaskDelay;return null!==n&&(s=n),s&&(null!=t&&(a=t),e=this.show(a,i)),e}show(n,t){const i=(new Date).getTime().toString()+"_"+Math.floor(1e4*Math.random()+1).toString(),e=this.newConfig();null!=n&&(e.delay=n),null!=t&&(e.tip=t),e.spinning=!(e.delay>0);const s=this.newLoadMaskItem();return s.id=i,s.config=e,this.loadingList.push(s),e.delay>0?setTimeout(()=>{this.reflash(i)},e.delay):this.loadingSubjectNext(s),i}reflash(n){const t=this.newLoadMaskItem(),i=this.loadingList.length;if(0===i)this.loadingSubjectNext(t);else{if(""!==n)for(let t=i-1;t>=0;t--){const i=this.loadingList[t];if(n===i.id){i.config.spinning=!0,i.config.delay=0;break}}for(let n=i-1;n>=0;n--)if(this.loadingList[n].config.spinning){const i=this.loadingList[n];t.id=i.id,t.config=i.config,this.loadingSubjectNext(t);break}}}hide(n){if(n){const t=this.loadingList.length;if(t>0)for(let i=0;i<t;i++)if(n===this.loadingList[i].id){this.loadingList.splice(i,1),this.reflash("");break}}}clear(){this.loadingList.length>0&&(this.loadingList=[],this.reflash(""))}getLoadingMask(){return this.loadingSubject.asObservable().pipe((0,c.filter)(n=>null!==n),(0,c.distinctUntilChanged)())}newConfig(){return{spinning:!1,delay:0,tip:""}}nullConfig(){return{spinning:null,delay:null,tip:null}}newLoadMaskItem(){return{id:"",config:this.newConfig()}}loadingSubjectNext(n){const t=this.newLoadMaskItem();n&&(t.id=n.id,t.config=Object.assign({},n.config)),this.loadingSubject.next(t)}loadingMaskOnInit(){this.loadingMask=this.newConfig(),this.getLoadingMask().subscribe(n=>{const t=Object.assign({},n.config);setTimeout(()=>{if(this.loadingMask=t,this.loadingMask.spinning){if(!this.overlayRef||!this.overlayRef.hasAttached()){const n=new l.ComponentPortal(h);this._container=this.overlayRef.attach(n).instance}this._container.loadingMask=this.loadingMask}else this.overlayRef&&this.overlayRef.hasAttached()&&this.overlayRef.detach()})})}}return n.\u0275fac=function(t){return new(t||n)(e.\u0275\u0275inject(o.Overlay),e.\u0275\u0275inject(d.DW_LOAD_MASK_HTTP),e.\u0275\u0275inject(d.DW_LOAD_MASK_DELAY))},n.\u0275prov=e.\u0275\u0275defineInjectable({factory:function(){return new n(e.\u0275\u0275inject(o.Overlay),e.\u0275\u0275inject(d.DW_LOAD_MASK_HTTP),e.\u0275\u0275inject(d.DW_LOAD_MASK_DELAY))},token:n,providedIn:"root"}),n})()}}]);