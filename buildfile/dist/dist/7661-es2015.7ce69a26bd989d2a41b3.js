"use strict";(self.webpackChunkassc_crs=self.webpackChunkassc_crs||[]).push([[7661,5327],{87661:function(e,t,n){n.r(t),n.d(t,{DwTenantService:function(){return l},DwUserModule:function(){return c},DwUserService:function(){return f},DwUserStorage:function(){return a}});var r=n(62481),s=n(42746),i=n(55245),o=n(71049),u=n(47372);let c=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=s.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=s.\u0275\u0275defineInjector({imports:[[i.CommonModule]]}),e})(),a=(()=>{class e extends r.SessionStorage{}return e.\u0275fac=function(){let t;return function(n){return(t||(t=s.\u0275\u0275getInheritedFactory(e)))(n||e)}}(),e.\u0275prov=s.\u0275\u0275defineInjectable({factory:function(){return new e},token:e,providedIn:c}),e})(),f=(()=>{class e{constructor(e){this.userStorage=e,this.userInfo={};const t=this.userStorage.get("DwUserInfo");t&&(this.userInfo=JSON.parse(t))}get currTenantList$(){return console.error("\u8acb\u6ce8\u610f\uff1aDwTenantService.currTenantList$ \u53d6\u4ee3 DwUserService.currTenantList$"),null}setUser(e){!e.id||(this.userInfo[e.id]=e.value,this.userStorage.set("DwUserInfo",JSON.stringify(this.userInfo)))}getUser(e){if(e)return this.userInfo[e]}getUserDetail(){return console.error("getUserInfo() \u53d6\u4ee3 getUserDetail()"),this.userInfo}clearUser(){this.userStorage.remove("DwUserInfo"),this.userInfo={}}read(e){const t=e||this.getUser("userId"),n={success:!0,description:"",userInfo:null},r={userId:t,userName:t};return n.userInfo=r,this.setUserInfo(r),o.Observable.create(e=>{e.next(n),e.complete()})}setUserInfo(e){for(const t of Object.keys(e))this.setUser({id:t,value:e[t]})}getTenantList(){return console.error("\u8acb\u6ce8\u610f\uff1aDwTenantService.getTenants() \u53d6\u4ee3 DwUserService.getTenantList()"),new o.Observable(e=>{e.next([]),e.complete()})}getUserInfo(e){return this.userInfo}setTenantList(e){console.error("\u8acb\u6ce8\u610f\uff1aDwTenantService.setTenantList() \u53d6\u4ee3 DwUserService.setTenantList()")}}return e.\u0275fac=function(t){return new(t||e)(s.\u0275\u0275inject(a))},e.\u0275prov=s.\u0275\u0275defineInjectable({factory:function(){return new e(s.\u0275\u0275inject(a))},token:e,providedIn:c}),e})(),l=(()=>{class e{constructor(e){this.userService=e,this.tokenValid="boolean"==typeof this.userService.getUser("isLoggedin")?this.userService.getUser("isLoggedin"):null,this.currTenantList=this.userService.getUser("currTenantList")?this.userService.getUser("currTenantList"):[],this.tenantInfoRefresh$=new o.Subject,this.tokenValidSubject=new o.BehaviorSubject(this.tokenValid),this.tenantSubject=new o.BehaviorSubject(this.currTenantList)}get isTokenValid$(){return this.tokenValidSubject.asObservable().pipe((0,u.filter)(e=>null!==e))}get currTenantList$(){return this.tenantSubject}getTenants(){return new o.Observable(e=>{this.setTenantList([]),e.next(!0),e.complete()})}getTenantList(){return this.userService.getUser("currTenantList")}setTenantList(e){this.userService.setUserInfo({currTenantList:e}),this.currTenantList=e,this.tenantSubject.next(e)}setTokenValid(e){this.tokenValid=e,this.tokenValidSubject.next(this.tokenValid)}tokenRefreshTenant(e){return new o.Observable(e=>{this.setTokenValid(!0),this.tenantInfoRefresh$.next({}),e.next(!0),e.complete()})}}return e.\u0275fac=function(t){return new(t||e)(s.\u0275\u0275inject(f))},e.\u0275prov=s.\u0275\u0275defineInjectable({factory:function(){return new e(s.\u0275\u0275inject(f))},token:e,providedIn:c}),e})()}}]);