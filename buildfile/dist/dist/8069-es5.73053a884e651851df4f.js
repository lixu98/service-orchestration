!function(){"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(self.webpackChunkassc_crs=self.webpackChunkassc_crs||[]).push([[8069,1166],{98069:function(t,r,o){o.r(r),o.d(r,{DwUpdatePasswordModalComponent:function(){return Q},DwUpdatePasswordModalModule:function(){return ee},DwUpdatePasswordModalService:function(){return X}});var i=o(42746),a=o(71049),s=o(31441),d=o(83522),l=o(1020),u=o(47372),c=o(30469),p=o(12146),w=o(66800),m=o(47483),f=o(32276),h=o(55245),v=o(85773),g=o(35626),y=o(93761),C=o(85277),E=o(67280),P=o(29872),b=o(96670),S=o(8852);function x(e,t){1&e&&(i.\u0275\u0275elementStart(0,"span",25),i.\u0275\u0275text(1,"dw-update-password-notice-mobilephone"),i.\u0275\u0275elementEnd())}function T(e,t){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275template(1,x,2,0,"span",24),i.\u0275\u0275elementContainerEnd()),2&e){var n=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",n.isOnlyMobilephone)}}function k(e,t){1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"span",25),i.\u0275\u0275text(2,"dw-update-password-error-mailNotExist"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd())}function I(e,t){1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"span",25),i.\u0275\u0275text(2,"dw-update-password-error-mobilephoneNotExist"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd())}function D(e,t){if(1&e&&i.\u0275\u0275element(0,"dw-option",26),2&e){var n=t.$implicit;i.\u0275\u0275property("dwLabel",n.label)("dwValue",n.value)}}function O(e,t){if(1&e){var n=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"dw-form-item",20),i.\u0275\u0275elementStart(1,"dw-form-control",6),i.\u0275\u0275template(2,T,2,1,"ng-container",21),i.\u0275\u0275template(3,k,3,0,"ng-container",21),i.\u0275\u0275template(4,I,3,0,"ng-container",21),i.\u0275\u0275elementStart(5,"dw-select",22),i.\u0275\u0275listener("ngModelChange",function(){return i.\u0275\u0275restoreView(n),i.\u0275\u0275nextContext().switVerification()}),i.\u0275\u0275template(6,D,1,2,"dw-option",23),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()}if(2&e){var r=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("dwSpan",24),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",r.isOnlyMobilephone),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",r.updatePwdForm.get("selectVerification").hasError("mailNotExist")),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",r.updatePwdForm.get("selectVerification").hasError("mobilephoneNotExist")),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngForOf",r.optionList)}}function F(e,t){1&e&&(i.\u0275\u0275elementStart(0,"span",7),i.\u0275\u0275text(1,"dw-update-password-getCode"),i.\u0275\u0275elementEnd())}var M=function(e){return{current:e}};function N(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"span",33),i.\u0275\u0275text(1,"dw-update-password-countDown"),i.\u0275\u0275elementEnd()),2&e){var n=i.\u0275\u0275nextContext(2);i.\u0275\u0275property("translateParams",i.\u0275\u0275pureFunction1(1,M,n.countDown))}}function A(e,t){1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"span",7),i.\u0275\u0275text(2,"required"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd())}function V(e,t){if(1&e&&i.\u0275\u0275template(0,A,3,0,"ng-container",21),2&e){var n=i.\u0275\u0275nextContext(2);i.\u0275\u0275property("ngIf",n.updatePwdForm.get("verificationCode").dirty&&n.updatePwdForm.get("verificationCode").errors&&n.updatePwdForm.get("verificationCode").hasError("required"))}}function R(e,t){if(1&e){var n=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"dw-form-item",27),i.\u0275\u0275elementStart(1,"dw-form-control",6),i.\u0275\u0275elementStart(2,"button",28),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(n),i.\u0275\u0275nextContext().getCode()}),i.\u0275\u0275template(3,F,2,0,"span",29),i.\u0275\u0275template(4,N,2,3,"span",30),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(5,"dw-form-control",8),i.\u0275\u0275element(6,"input",31),i.\u0275\u0275pipe(7,"translate"),i.\u0275\u0275template(8,V,1,1,"ng-template",null,32,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()}if(2&e){var r=i.\u0275\u0275reference(9),o=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("dwSpan",12),i.\u0275\u0275advance(1),i.\u0275\u0275property("dwType","primary")("disabled",o.checkGetCodeDisabled()),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",!o.iscountDown),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",o.iscountDown),i.\u0275\u0275advance(1),i.\u0275\u0275property("dwSpan",12)("dwErrorTip",r),i.\u0275\u0275advance(1),i.\u0275\u0275property("placeholder",i.\u0275\u0275pipeBind1(7,8,"dw-update-password-enterCode"))}}function j(e,t){1&e&&(i.\u0275\u0275elementStart(0,"span",7),i.\u0275\u0275text(1,"required"),i.\u0275\u0275elementEnd())}function U(e,t){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275template(1,j,2,0,"span",29),i.\u0275\u0275elementContainerEnd()),2&e){var n=i.\u0275\u0275nextContext(3);i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",n.updatePwdForm.get("oldPassword").hasError("required"))}}function L(e,t){if(1&e&&i.\u0275\u0275template(0,U,2,1,"ng-container",21),2&e){var n=i.\u0275\u0275nextContext(2);i.\u0275\u0275property("ngIf",n.updatePwdForm.get("oldPassword").dirty&&n.updatePwdForm.get("oldPassword").errors)}}function _(e,t){if(1&e){var n=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"dw-form-item",5),i.\u0275\u0275elementStart(1,"dw-form-label",6),i.\u0275\u0275elementStart(2,"span",7),i.\u0275\u0275text(3,"dw-update-password-oldPassword"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(4,"dw-form-control",8),i.\u0275\u0275element(5,"input",34),i.\u0275\u0275pipe(6,"translate"),i.\u0275\u0275elementStart(7,"i",35),i.\u0275\u0275listener("click",function(){i.\u0275\u0275restoreView(n);var e=i.\u0275\u0275nextContext();return e.showPassword=!e.showPassword}),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(8,L,1,1,"ng-template",null,36,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()}if(2&e){var r=i.\u0275\u0275reference(9),o=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("dwSpan",7),i.\u0275\u0275advance(3),i.\u0275\u0275property("dwSpan",17)("dwErrorTip",r),i.\u0275\u0275advance(1),i.\u0275\u0275property("type",o.showPassword?"text":"password")("placeholder",i.\u0275\u0275pipeBind1(6,6,"dw-update-password-enterOldPassword")),i.\u0275\u0275advance(2),i.\u0275\u0275property("dwType",o.showPassword?"eye-invisible":"eye")}}function q(e,t){if(1&e){var n=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"i",35),i.\u0275\u0275listener("click",function(){i.\u0275\u0275restoreView(n);var e=i.\u0275\u0275nextContext();return e.showPassword=!e.showPassword}),i.\u0275\u0275elementEnd()}if(2&e){var r=i.\u0275\u0275nextContext();i.\u0275\u0275property("dwType",r.showPassword?"eye-invisible":"eye")}}function B(e,t){1&e&&(i.\u0275\u0275elementStart(0,"span",7),i.\u0275\u0275text(1,"required"),i.\u0275\u0275elementEnd())}function W(e,t){1&e&&(i.\u0275\u0275elementStart(0,"span",7),i.\u0275\u0275text(1,"dw-update-password-passwordFormat"),i.\u0275\u0275elementEnd())}function G(e,t){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275template(1,B,2,0,"span",29),i.\u0275\u0275template(2,W,2,0,"span",29),i.\u0275\u0275elementContainerEnd()),2&e){var n=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",n.updatePwdForm.get("password").hasError("required")),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",n.updatePwdForm.get("password").hasError("userPasswordFormat"))}}function z(e,t){if(1&e&&i.\u0275\u0275template(0,G,3,2,"ng-container",21),2&e){var n=i.\u0275\u0275nextContext();i.\u0275\u0275property("ngIf",n.updatePwdForm.get("password").dirty&&n.updatePwdForm.get("password").errors)}}function H(e,t){1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"span",7),i.\u0275\u0275text(2,"required"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd())}function Z(e,t){1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"span",7),i.\u0275\u0275text(2,"dw-update-password-passwordMismatch"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd())}function $(e,t){1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"span",7),i.\u0275\u0275text(2,"dw-update-password-passwordFormat"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd())}function Y(e,t){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275template(1,H,3,0,"ng-container",21),i.\u0275\u0275template(2,Z,3,0,"ng-container",21),i.\u0275\u0275template(3,$,3,0,"ng-container",21),i.\u0275\u0275elementContainerEnd()),2&e){var n=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",n.updatePwdForm.get("repassword").hasError("required")),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",n.updatePwdForm.get("repassword").hasError("userPasswordEqual")),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",n.updatePwdForm.get("repassword").hasError("userPasswordFormat"))}}function J(e,t){if(1&e&&i.\u0275\u0275template(0,Y,4,3,"ng-container",21),2&e){var n=i.\u0275\u0275nextContext();i.\u0275\u0275property("ngIf",n.updatePwdForm.get("repassword").dirty&&n.updatePwdForm.get("repassword").errors)}}var K,Q=((K=function(){function t(n,r,o,i,s,d,l,u){var c=this;e(this,t),this.userService=n,this.fb=r,this.dwUpdatePasswordService=o,this.dwModalService=i,this.translateService=s,this.modalRef=d,this.configService=l,this.authService=u,this.subscription=new a.Subscription,this.showPassword=!1,this.countDownDuration=60,this.iscountDown=!1,this.isButtLoading=!1,this.optionList=[],this.isOnlyMobilephone=!1,this.userInfo=null,this.userTypeEnum=p.DwUserTypeEnum,this.configService.get("multiTenant").subscribe(function(e){return c.dwMultiTenant=e}),this.userType=this.userService.getUser("userType")}return n(t,[{key:"ngOnInit",value:function(){var e=this;this.getOptionList(),this.formData={selectVerification:this.optionList[0].value,verificationCode:"",oldPassword:"",password:"",repassword:""},this.updatePwdForm=this.fb.group({}),this.updatePwdForm.addControl("selectVerification",new l.FormControl(this.formData.selectVerification,[l.Validators.required,this.validSelectVerification()])),this.updatePwdForm.addControl("verificationCode",new l.FormControl(this.formData.verificationCode,[l.Validators.required])),this.updatePwdForm.addControl("oldPassword",new l.FormControl(this.formData.oldPassword,[l.Validators.required])),this.updatePwdForm.addControl("password",new l.FormControl(this.formData.password,[l.Validators.required,this.validPasswordFormat(),this.validPasswordEqual()])),this.updatePwdForm.addControl("repassword",new l.FormControl(this.formData.repassword,[l.Validators.required,this.validPasswordFormat(),this.validRePasswordEqual()])),this.subscription.add(this.dwUpdatePasswordService.getUserBasicInfo().subscribe(function(t){e.userInfo=t,e.dwMultiTenant&&e.userType!==p.DwUserTypeEnum.INTERNAL&&(e.updatePwdForm.get("selectVerification").markAsTouched({onlySelf:!0}),e.updatePwdForm.get("selectVerification").markAsDirty({onlySelf:!0}),e.updatePwdForm.get("selectVerification").updateValueAndValidity())},function(t){t.hasOwnProperty("error")&&t.error.hasOwnProperty("errorMessage")&&t.error.errorMessage&&e.dwModalService.error({dwContent:t.error.errorMessage})})),this.subscription.add(this.authService.isLoggedIn$.subscribe(function(t){!t&&e.modalRef&&e.modalRef.triggerCancel()}))}},{key:"ngOnDestroy",value:function(){this.subscription.unsubscribe()}},{key:"ngAfterViewInit",value:function(){(!this.dwMultiTenant||this.userType===p.DwUserTypeEnum.INTERNAL)&&(this.updatePwdForm.removeControl("selectVerification"),this.updatePwdForm.removeControl("verificationCode")),(this.dwMultiTenant&&this.userType===p.DwUserTypeEnum.GENERAL||!this.dwMultiTenant)&&this.updatePwdForm.removeControl("oldPassword")}},{key:"getOptionList",value:function(){var e=this,t=[{label:this.translateService.instant("dw-update-password-mailCode"),value:"email"},{label:this.translateService.instant("dw-update-password-mobileCode"),value:"mobilephone"}];"full"!==this.formConfig.verifyType?(t.forEach(function(t){e.formConfig.verifyType===t.value&&e.optionList.push(t)}),!(this.optionList.length>0)&&(this.optionList=t)):this.optionList=t}},{key:"checkGetCodeDisabled",value:function(){return!(!this.iscountDown&&!this.updatePwdForm.get("selectVerification").errors&&this.checkUserInfo())}},{key:"checkUserInfo",value:function(){return!(!this.userInfo||this.dwMultiTenant&&this.userType!==p.DwUserTypeEnum.INTERNAL&&(!this.userInfo.hasOwnProperty("email")&&!this.userInfo.hasOwnProperty("telephone")||!this.userInfo.email&&!this.userInfo.telephone))}},{key:"getCodeByType",value:function(){return"email"===this.updatePwdForm.get("selectVerification").value?this.dwUpdatePasswordService.getVerificationCode("email",this.userInfo.email):this.dwUpdatePasswordService.getVerificationCode("mobilephone",this.userInfo.telephone)}},{key:"getCode",value:function(){var e=this;this.iscountDown=!0;var t=1e3,n=t,r=this.countDownDuration*t;this.countDown=this.countDownDuration,this.getCodeByType().subscribe(function(o){var i=e.translateService.instant("dw-update-password-confirmCodeSMS");"email"===e.updatePwdForm.get("selectVerification").value&&(i=e.translateService.instant("dw-update-password-confirmCodeMailbox")),e.dwModalService.success({dwTitle:e.translateService.instant("dw-update-password-sentSuccessfully"),dwContent:i}),(0,a.timer)(0,n).pipe((0,u.takeUntil)((0,a.timer)(r+n)),(0,u.map)(function(e){return r-e*n}),(0,u.finalize)(function(){e.countDown=e.countDownDuration,e.iscountDown=!1})).subscribe(function(n){e.countDown=n/t})},function(t){if(console.log("error>>>>",t),e.countDown=e.countDownDuration,e.iscountDown=!1,!(t.hasOwnProperty("error")&&t.error.hasOwnProperty("message")&&t.error.message))throw t;e.dwModalService.error({dwTitle:e.translateService.instant("dw-http-error"),dwContent:t.error.message})})}},{key:"switVerification",value:function(){this.isOnlyMobilephone=!1,"mobilephone"===this.updatePwdForm.get("selectVerification").value&&(this.isOnlyMobilephone=!0)}},{key:"emitFormData",value:function(){var e=this;this.isButtLoading=!0,this.passwordUpdate().subscribe(function(t){e.dwModalService.success({dwTitle:e.translateService.instant("dw-update-password-sentSuccessfully"),dwContent:e.translateService.instant("dw-update-password-updatedSuccessfully"),dwOnOk:function(){e.modalRef.triggerOk()}})},function(t){console.log("error>>>>",t),e.isButtLoading=!1,t.hasOwnProperty("error")&&t.error.hasOwnProperty("errorMessage")&&t.error.errorMessage&&e.dwModalService.error({dwContent:t.error.errorMessage})})}},{key:"passwordUpdate",value:function(){return this.dwMultiTenant?this.userType===p.DwUserTypeEnum.INTERNAL?this.userUpdatePasswordWithOldPassword():this.userPasswordUpdate():this.userPasswordUpdateForce()}},{key:"userPasswordUpdate",value:function(){var e="email"===this.updatePwdForm.get("selectVerification").value?this.userInfo.email:this.userInfo.telephone;return this.dwUpdatePasswordService.userPasswordUpdate({account:e,password:this.updatePwdForm.get("password").value,verificationCode:this.updatePwdForm.get("verificationCode").value})}},{key:"userUpdatePasswordWithOldPassword",value:function(){return this.dwUpdatePasswordService.userUpdatePasswordWithOldPassword({id:this.userService.getUser("userId"),newPassword:this.updatePwdForm.get("password").value,oldPassword:this.updatePwdForm.get("oldPassword").value})}},{key:"userPasswordUpdateForce",value:function(){var e=m.SHA256(this.updatePwdForm.get("password").value),t=m.SHA256(e),n=m.enc.Base64.stringify(t);return this.dwUpdatePasswordService.userPasswordUpdateForce({id:this.userService.getUser("userId"),newPasswordHash:n})}},{key:"cancel",value:function(){this.modalRef.triggerCancel()}},{key:"validSelectVerification",value:function(){var e=this;return function(t){if(!t.value||!e.userInfo)return null;switch(t.value){case"email":if(!e.userInfo.hasOwnProperty("email")||!e.userInfo.email)return{mailNotExist:!0};break;case"mobilephone":if(!e.userInfo.hasOwnProperty("telephone")||!e.userInfo.telephone)return{mobilephoneNotExist:!0}}return null}}},{key:"validPasswordEqual",value:function(){var e=this;return function(t){return t.value&&e.updatePwdForm.get("repassword").updateValueAndValidity(),null}}},{key:"validRePasswordEqual",value:function(){var e=this;return function(t){return t.value&&t.value!==e.updatePwdForm.get("password").value?{userPasswordEqual:!0}:null}}},{key:"validPasswordFormat",value:function(){return function(e){return e.value?new RegExp("^[0-9]*$").test(e.value)||new RegExp("^[a-zA-Z]*$").test(e.value)?{userPasswordFormat:!0}:new RegExp("^[0-9a-zA-Z]*$").test(e.value)?null:{userPasswordFormat:!0}:null}}}]),t}()).\u0275fac=function(e){return new(e||K)(i.\u0275\u0275directiveInject(w.DwUserService),i.\u0275\u0275directiveInject(l.FormBuilder),i.\u0275\u0275directiveInject(p.DwUpdatePasswordService),i.\u0275\u0275directiveInject(s.DwModalService),i.\u0275\u0275directiveInject(d.TranslateService),i.\u0275\u0275directiveInject(s.DwModalRef),i.\u0275\u0275directiveInject(c.DwSystemConfigService),i.\u0275\u0275directiveInject(f.DwAuthService))},K.\u0275cmp=i.\u0275\u0275defineComponent({type:K,selectors:[["app-update-password-modal"]],inputs:{formConfig:"formConfig"},decls:36,vars:25,consts:[["dw-form","",1,"update-password-form",3,"formGroup"],[1,"inputBlock"],["dw-row","",4,"ngIf"],["dw-row","","class","verification-block","dwGutter","8",4,"ngIf"],["dw-row","","class","dw-f-newpassword",4,"ngIf"],["dw-row","",1,"dw-f-newpassword"],["dw-col","",3,"dwSpan"],["translate",""],["dw-col","",3,"dwSpan","dwErrorTip"],["dw-input","","formControlName","password",3,"type","placeholder"],["dw-icon","","dwTheme","outline",3,"dwType","click",4,"ngIf"],["passwordErrorTpl",""],["dw-row","",1,"dw-f-confnewpassword"],["dw-input","","formControlName","repassword",3,"type","placeholder"],["repasswordErrorTpl",""],["dw-row","",1,"dw-f-loginagain"],["translate","",1,"textBlock"],["dw-row","",1,"customize-footer"],["dw-button","",3,"dwType","disabled","dwLoading","click"],["dw-button","","type","button",3,"dwType","click"],["dw-row",""],[4,"ngIf"],["formControlName","selectVerification",3,"ngModelChange"],[3,"dwLabel","dwValue",4,"ngFor","ngForOf"],["class","dw-f-tip-red","translate","",4,"ngIf"],["translate","",1,"dw-f-tip-red"],[3,"dwLabel","dwValue"],["dw-row","","dwGutter","8",1,"verification-block"],["dw-button","",2,"width","100%",3,"dwType","disabled","click"],["translate","",4,"ngIf"],["translate","",3,"translateParams",4,"ngIf"],["dw-input","","formControlName","verificationCode",3,"placeholder"],["verificationCodeErrorTpl",""],["translate","",3,"translateParams"],["dw-input","","formControlName","oldPassword",3,"type","placeholder"],["dw-icon","","dwTheme","outline",3,"dwType","click"],["oldPasswordErrorTpl",""]],template:function(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"form",0),i.\u0275\u0275elementStart(1,"div",1),i.\u0275\u0275template(2,O,7,5,"dw-form-item",2),i.\u0275\u0275template(3,R,10,10,"dw-form-item",3),i.\u0275\u0275template(4,_,10,8,"dw-form-item",4),i.\u0275\u0275elementStart(5,"dw-form-item",5),i.\u0275\u0275elementStart(6,"dw-form-label",6),i.\u0275\u0275elementStart(7,"span",7),i.\u0275\u0275text(8,"dw-update-password-newPassword"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(9,"dw-form-control",8),i.\u0275\u0275element(10,"input",9),i.\u0275\u0275pipe(11,"translate"),i.\u0275\u0275template(12,q,1,1,"i",10),i.\u0275\u0275template(13,z,1,1,"ng-template",null,11,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(15,"dw-form-item",12),i.\u0275\u0275elementStart(16,"dw-form-label",6),i.\u0275\u0275elementStart(17,"span",7),i.\u0275\u0275text(18,"dw-update-password-confirmNewPassword"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(19,"dw-form-control",8),i.\u0275\u0275element(20,"input",13),i.\u0275\u0275pipe(21,"translate"),i.\u0275\u0275template(22,J,1,1,"ng-template",null,14,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(24,"dw-form-item",15),i.\u0275\u0275elementStart(25,"dw-form-label",6),i.\u0275\u0275elementStart(26,"p",16),i.\u0275\u0275text(27,"dw-update-password-logInAgain"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(28,"dw-form-item",17),i.\u0275\u0275elementStart(29,"dw-form-control",6),i.\u0275\u0275elementStart(30,"button",18),i.\u0275\u0275listener("click",function(){return t.emitFormData()}),i.\u0275\u0275elementStart(31,"span",7),i.\u0275\u0275text(32,"dw-determine"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(33,"button",19),i.\u0275\u0275listener("click",function(){return t.cancel()}),i.\u0275\u0275elementStart(34,"span",7),i.\u0275\u0275text(35,"dw-cancel"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()),2&e){var n=i.\u0275\u0275reference(14),r=i.\u0275\u0275reference(23);i.\u0275\u0275property("formGroup",t.updatePwdForm),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngIf",t.dwMultiTenant&&t.userType!==t.userTypeEnum.INTERNAL),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",t.dwMultiTenant&&t.userType!==t.userTypeEnum.INTERNAL),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",t.dwMultiTenant&&t.userType===t.userTypeEnum.INTERNAL),i.\u0275\u0275advance(2),i.\u0275\u0275property("dwSpan",7),i.\u0275\u0275advance(3),i.\u0275\u0275property("dwSpan",17)("dwErrorTip",n),i.\u0275\u0275advance(1),i.\u0275\u0275property("type",t.showPassword?"text":"password")("placeholder",i.\u0275\u0275pipeBind1(11,21,"dw-update-password-enterNewPassword")),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngIf",t.userType!==t.userTypeEnum.INTERNAL),i.\u0275\u0275advance(4),i.\u0275\u0275property("dwSpan",7),i.\u0275\u0275advance(3),i.\u0275\u0275property("dwSpan",17)("dwErrorTip",r),i.\u0275\u0275advance(1),i.\u0275\u0275property("type",t.showPassword?"text":"password")("placeholder",i.\u0275\u0275pipeBind1(21,23,"dw-update-password-enterNewPasswordAgain")),i.\u0275\u0275advance(5),i.\u0275\u0275property("dwSpan",24),i.\u0275\u0275advance(4),i.\u0275\u0275property("dwSpan",24),i.\u0275\u0275advance(1),i.\u0275\u0275property("dwType","primary")("disabled",!t.updatePwdForm.valid||!t.checkUserInfo())("dwLoading",t.isButtLoading),i.\u0275\u0275advance(3),i.\u0275\u0275property("dwType","default")}},directives:[l.\u0275NgNoValidate,l.NgControlStatusGroup,v.DwFormDirective,l.FormGroupDirective,h.NgIf,P.DwRowDirective,v.DwFormItemComponent,P.DwColDirective,v.DwFormLabelComponent,d.TranslateDirective,v.DwFormControlComponent,E.DwInputDirective,l.DefaultValueAccessor,l.NgControlStatus,l.FormControlName,y.DwButtonComponent,b.uG,S.u,g.DwSelectComponent,h.NgForOf,g.DwOptionComponent,C.DwIconDirective],pipes:[d.TranslatePipe],styles:["[_nghost-%COMP%]     .customize-footer{border-top:1px solid #e9e9e9;padding:10px 18px 0 10px;text-align:center;border-radius:0;margin-bottom:5px}dw-form-control[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{position:relative}dw-form-control[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:18px;padding:0 0 0 6px;line-height:32px;position:absolute;right:10px;top:4px;z-index:9;cursor:pointer}.tip-red[_ngcontent-%COMP%]   .ant-form-explain[_ngcontent-%COMP%]{color:#f5222d;transform:scale(.95)}.dw-f-tip-red[_ngcontent-%COMP%]{color:#f5222d}.textBlock[_ngcontent-%COMP%]{text-align:center;margin:1rem 0}.verification-block[_ngcontent-%COMP%]{padding-bottom:2rem;margin-bottom:2rem;border-bottom:1px dotted #d7d7d7}.verification-block[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{margin-top:1rem}.btn-verificationCode[_ngcontent-%COMP%]{font-size:.75rem;width:96%}i.anticon[_ngcontent-%COMP%]{font-size:18px;padding:0 0 0 6px;line-height:20px;position:absolute;right:10px;top:1px;z-index:9;cursor:pointer}i.anticon.error[_ngcontent-%COMP%]{color:#f5222d}i.anticon.success[_ngcontent-%COMP%]{color:#7cfc00}i.anticon.worning[_ngcontent-%COMP%]{color:#ff0}input.error[_ngcontent-%COMP%]{border-color:red}"]}),K),X=function(){var t=function(){function t(n,r){e(this,t),this.dwModalService=n,this.translateService=r}return n(t,[{key:"getDefaultConfig",value:function(){return{modalTitle:"dw-update-password-title",modalWidth:"40%",modalOkText:"dw-determine",modalCancelText:"dw-cancel",modalOnOk:function(){},modalOnCancel:function(){},modalAfterClose:function(){},modalAfterOpen:function(){},formVerifyType:"full"}}},{key:"setEvents",value:function(){var e=this;this.modalConfig.dwOnOk=function(t){e.modalSubject.next(!0),e.modalSubject.complete(),e.modalConfig.customOnOk()},this.modalConfig.dwOnCancel=function(t){e.modalSubject.complete(),e.modalConfig.customOnCancel()}}},{key:"translateConfig",value:function(){this.modalConfig.dwTitle=this.translateService.instant(this.modalConfig.dwTitle),this.modalConfig.dwOkText=this.translateService.instant(this.modalConfig.dwOkText),this.modalConfig.dwCancelText=this.translateService.instant(this.modalConfig.dwCancelText)}},{key:"createModal",value:function(){var e=Object.assign({dwTitle:this.modalConfig.dwTitle,dwContent:Q,dwFooter:null,dwComponentParams:{formConfig:this.formConfig}},this.modalConfig);return this.dwModalService.create(e)}},{key:"setModalConfig",value:function(e){this.modalConfig=Object.assign({},{dwTitle:e.modalTitle,dwWidth:e.modalWidth,dwOkText:e.modalOkText,dwCancelText:e.modalCancelText,customOnOk:e.modalOnOk,customOnCancel:e.modalOnCancel,customAfterClose:e.modalAfterClose,customAfterOpen:e.modalAfterOpen})}},{key:"setFormConfig",value:function(e){this.formConfig=Object.assign({},{verifyType:e.formVerifyType})}},{key:"setConfig",value:function(e){var t=this.getDefaultConfig(),n=Object.assign(Object.assign({},t),e);this.setModalConfig(n),this.setFormConfig(n)}},{key:"open",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.modalSubject=new a.Subject,this.setConfig(t),this.translateConfig(),this.setEvents();var n=this.createModal();return n.afterClose.subscribe(function(){e.modalConfig.customAfterClose()}),n.afterOpen.subscribe(function(){e.modalConfig.customAfterOpen()}),this.modalSubject.asObservable()}}]),t}();return t.\u0275fac=function(e){return new(e||t)(i.\u0275\u0275inject(s.DwModalService),i.\u0275\u0275inject(d.TranslateService))},t.\u0275prov=i.\u0275\u0275defineInjectable({factory:function(){return new t(i.\u0275\u0275inject(s.DwModalService),i.\u0275\u0275inject(d.TranslateService))},token:t,providedIn:"root"}),t}(),ee=function(){var t=n(function t(){e(this,t)});return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=i.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=i.\u0275\u0275defineInjector({imports:[[h.CommonModule,l.ReactiveFormsModule,v.DwFormModule,g.DwSelectModule,y.DwButtonModule,C.DwIconModule,E.DwInputModule,d.TranslateModule]]}),t}()},8852:function(t,r,o){o.d(r,{u:function(){return d},f:function(){return l}});var i,a=o(36535),s=o(42746),d=((i=function(){function t(n,r){e(this,t),this.elementRef=n,this.renderer=r,this.hidden=null,this.renderer.setAttribute(this.elementRef.nativeElement,"hidden","")}return n(t,[{key:"setHiddenAttribute",value:function(){this.hidden?this.renderer.setAttribute(this.elementRef.nativeElement,"hidden","string"==typeof this.hidden?this.hidden:""):this.renderer.removeAttribute(this.elementRef.nativeElement,"hidden")}},{key:"ngOnChanges",value:function(){this.setHiddenAttribute()}},{key:"ngAfterViewInit",value:function(){this.setHiddenAttribute()}}]),t}()).\u0275fac=function(e){return new(e||i)(s.\u0275\u0275directiveInject(s.ElementRef),s.\u0275\u0275directiveInject(s.Renderer2))},i.\u0275dir=s.\u0275\u0275defineDirective({type:i,selectors:[["","dw-button",""],["dw-button-group"],["","dw-icon",""],["","dw-menu-item",""],["","dw-submenu",""],["dw-select-top-control"],["dw-select-placeholder"],["dw-input-group"]],inputs:{hidden:"hidden"},features:[s.\u0275\u0275NgOnChangesFeature]}),i),l=function(){var t=n(function t(){e(this,t)});return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=s.\u0275\u0275defineInjector({imports:[[a.PlatformModule]]}),t}()},96670:function(t,r,o){o.d(r,{uG:function(){return p},ln:function(){return w}});var i,a=o(36535),s=o(42746),d=o(88065),l=function(){function t(n,r,o,i){var s=this;e(this,t),this.triggerElement=n,this.ngZone=r,this.insertExtraNode=o,this.platformId=i,this.waveTransitionDuration=400,this.styleForPseudo=null,this.extraNode=null,this.lastTime=0,this.onClick=function(e){!s.triggerElement||!s.triggerElement.getAttribute||s.triggerElement.getAttribute("disabled")||"INPUT"===e.target.tagName||s.triggerElement.className.indexOf("disabled")>=0||s.fadeOutWave()},this.platform=new a.Platform(this.platformId),this.clickHandler=this.onClick.bind(this),this.bindTriggerEvent()}return n(t,[{key:"waveAttributeName",get:function(){return this.insertExtraNode?"ant-click-animating":"ant-click-animating-without-extra-node"}},{key:"bindTriggerEvent",value:function(){var e=this;this.platform.isBrowser&&this.ngZone.runOutsideAngular(function(){e.removeTriggerEvent(),e.triggerElement&&e.triggerElement.addEventListener("click",e.clickHandler,!0)})}},{key:"removeTriggerEvent",value:function(){this.triggerElement&&this.triggerElement.removeEventListener("click",this.clickHandler,!0)}},{key:"removeStyleAndExtraNode",value:function(){this.styleForPseudo&&document.body.contains(this.styleForPseudo)&&(document.body.removeChild(this.styleForPseudo),this.styleForPseudo=null),this.insertExtraNode&&this.triggerElement.contains(this.extraNode)&&this.triggerElement.removeChild(this.extraNode)}},{key:"destroy",value:function(){this.removeTriggerEvent(),this.removeStyleAndExtraNode()}},{key:"fadeOutWave",value:function(){var e=this,t=this.triggerElement,n=this.getWaveColor(t);t.setAttribute(this.waveAttributeName,"true"),!(Date.now()<this.lastTime+this.waveTransitionDuration)&&(this.isValidColor(n)&&(this.styleForPseudo||(this.styleForPseudo=document.createElement("style")),this.styleForPseudo.innerHTML="\n      [ant-click-animating-without-extra-node='true']::after, .ant-click-animating-node {\n        --antd-wave-shadow-color: ".concat(n,";\n      }"),document.body.appendChild(this.styleForPseudo)),this.insertExtraNode&&(this.extraNode||(this.extraNode=document.createElement("div")),this.extraNode.className="ant-click-animating-node",t.appendChild(this.extraNode)),this.lastTime=Date.now(),this.runTimeoutOutsideZone(function(){t.removeAttribute(e.waveAttributeName),e.removeStyleAndExtraNode()},this.waveTransitionDuration))}},{key:"isValidColor",value:function(e){return!!e&&"#ffffff"!==e&&"rgb(255, 255, 255)"!==e&&this.isNotGrey(e)&&!/rgba\(\d*, \d*, \d*, 0\)/.test(e)&&"transparent"!==e}},{key:"isNotGrey",value:function(e){var t=e.match(/rgba?\((\d*), (\d*), (\d*)(, [\.\d]*)?\)/);return!(t&&t[1]&&t[2]&&t[3]&&t[1]===t[2]&&t[2]===t[3])}},{key:"getWaveColor",value:function(e){var t=getComputedStyle(e);return t.getPropertyValue("border-top-color")||t.getPropertyValue("border-color")||t.getPropertyValue("background-color")}},{key:"runTimeoutOutsideZone",value:function(e,t){this.ngZone.runOutsideAngular(function(){return setTimeout(e,t)})}}]),t}(),u={disabled:!1},c=new s.InjectionToken("dw-wave-global-options",{providedIn:"root",factory:function(){return u}}),p=((i=function(){function t(n,r,o,i,a){e(this,t),this.ngZone=n,this.elementRef=r,this.config=o,this.animationType=i,this.platformId=a,this.dwWaveExtraNode=!1,this.waveDisabled=!1,this.waveDisabled=this.isConfigDisabled()}return n(t,[{key:"disabled",get:function(){return this.waveDisabled}},{key:"rendererRef",get:function(){return this.waveRenderer}},{key:"isConfigDisabled",value:function(){var e=!1;return this.config&&"boolean"==typeof this.config.disabled&&(e=this.config.disabled),"NoopAnimations"===this.animationType&&(e=!0),e}},{key:"ngOnDestroy",value:function(){this.waveRenderer&&this.waveRenderer.destroy()}},{key:"ngOnInit",value:function(){this.renderWaveIfEnabled()}},{key:"renderWaveIfEnabled",value:function(){!this.waveDisabled&&this.elementRef.nativeElement&&(this.waveRenderer=new l(this.elementRef.nativeElement,this.ngZone,this.dwWaveExtraNode,this.platformId))}},{key:"disable",value:function(){this.waveDisabled=!0,this.waveRenderer&&(this.waveRenderer.removeTriggerEvent(),this.waveRenderer.removeStyleAndExtraNode())}},{key:"enable",value:function(){this.waveDisabled=this.isConfigDisabled()||!1,this.waveRenderer&&this.waveRenderer.bindTriggerEvent()}}]),t}()).\u0275fac=function(e){return new(e||i)(s.\u0275\u0275directiveInject(s.NgZone),s.\u0275\u0275directiveInject(s.ElementRef),s.\u0275\u0275directiveInject(c,8),s.\u0275\u0275directiveInject(d.ANIMATION_MODULE_TYPE,8),s.\u0275\u0275directiveInject(s.PLATFORM_ID))},i.\u0275dir=s.\u0275\u0275defineDirective({type:i,selectors:[["","dw-wave",""],["button","dw-button","",3,"dwType","link",3,"dwType","text"]],inputs:{dwWaveExtraNode:"dwWaveExtraNode"},exportAs:["dwWave"]}),i),w=function(){var t=n(function t(){e(this,t)});return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=s.\u0275\u0275defineInjector({imports:[[a.PlatformModule]]}),t}()}}])}();