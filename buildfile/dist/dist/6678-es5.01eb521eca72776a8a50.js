!function(){"use strict";function e(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function n(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function t(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function r(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(self.webpackChunkassc_crs=self.webpackChunkassc_crs||[]).push([[6678],{71087:function(n,o,i){i.r(o),i.d(o,{DwAccountInfoDataSourceService:function(){return w},DwAccountInfoService:function(){return m},DwAccountInfoUploadService:function(){return y},DwAccountModule:function(){return b},DwChangePasswordInfoService:function(){return O},DwDeclarationService:function(){return j},DwForgetService:function(){return S},DwLoginTypeEnum:function(){return h},DwUpdatePasswordService:function(){return k},DwUserTypeEnum:function(){return v},IDwForgetverificationType:function(){return g}});var a,u=i(42746),c=i(71049),l=i(47372),s=i(83522),f=i(30469),d=i(55245),p=i(66800),v=((a=v||(v={}))[a.GENERAL=0]="GENERAL",a[a.INTERNAL=1]="INTERNAL",v),h=function(){return(e=h||(h={}))[e.GENERAL=0]="GENERAL",e[e.INTERNAL=1]="INTERNAL",h;var e}(),b=function(){var e=t(function e(){r(this,e)});return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=u.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=u.\u0275\u0275defineInjector({imports:[[d.CommonModule]]}),e}(),m=function(){var n=function(){function n(e,t,o){var i=this;r(this,n),this.configService=e,this.translateService=t,this.userService=o,this.configService.get("multiTenant").subscribe(function(e){i.dwMultiTenant=e})}return t(n,[{key:"getDefaultConfig",value:function(){this.userType=this.userService.getUser("userType");var e=[{type:"label",name:"id",columns:2,label:"dw-account-info-form-id"},{type:"input",name:"name",columns:2,label:"dw-account-info-form-name",required:!0},{type:"input",name:"nickname",columns:2,label:"dw-account-info-form-nickname"},{type:"radio",name:"sex",columns:2,label:"dw-account-info-form-sex",option:[{label:"dw-account-info-form-sex-male",value:"male"},{label:"dw-account-info-form-sex-female",value:"female"},{label:"dw-account-info-form-sex-unknow",value:"unknow"}]},{type:"date",name:"birthday",columns:2,label:"dw-account-info-form-birthday"},{type:"phone",name:"telephone",columns:2,label:"dw-account-info-form-telephone",required:!0,validators:[],prefix:{type:"prefixSelect",name:"cellphonePrefix",label:"",required:!0,option:[{label:"+86",value:"+86"},{label:"+886",value:"+886"}]}},{type:"input",name:"email",validators:[],columns:1,label:"dw-account-info-form-email"},{type:"input",name:"address",columns:1,label:"dw-account-info-form-address"},{type:"checkbox",name:"readCheck",columns:1,required:!0,label:"dw-account-info-form-readCheck"}];if(this.dwMultiTenant){var n=e.findIndex(function(e){return"email"===e.name});n>=0&&Object.assign(e[n],{required:this.userType!==v.INTERNAL});var t=e.findIndex(function(e){return"telephone"===e.name});t>=0&&(Object.assign(e[t],{required:this.userType!==v.INTERNAL}),Object.assign(e[t].prefix,{required:this.userType!==v.INTERNAL}),this.userType===v.INTERNAL&&e[t].prefix.option.push({label:"",value:""}))}return e}},{key:"getGridConfig",value:function(e){var n={colSpan:12,labelSpan:8,inputSpan:16};return 1===e&&Object.assign(n,{colSpan:24,labelSpan:4,inputSpan:20}),n}},{key:"getFullConfig",value:function(e){var n=this;return e.forEach(function(e){n.setItemConfig(e),e.hasOwnProperty("prefix")&&n.setItemConfig(e.prefix)}),e}},{key:"setItemConfig",value:function(e){if(e.hasOwnProperty("validators")||Object.assign(e,{validators:[]}),e.hasOwnProperty("asyncValidators")||Object.assign(e,{asyncValidators:[]}),e.hasOwnProperty("required")||Object.assign(e,{required:!1}),e.hasOwnProperty("disabled")||Object.assign(e,{disabled:!1}),e.hasOwnProperty("selectShowSearch")||Object.assign(e,{selectShowSearch:!1}),e.hasOwnProperty("selectMode")||Object.assign(e,{selectMode:"default"}),!e.hasOwnProperty("placeHolder")&&e.label){var n=this.translateService.instant(e.label);Object.assign(e,{placeHolder:this.translateService.instant("dw-account-info-form-placeHolder-prefix",{label:n})})}e.hasOwnProperty("columns")||Object.assign(e,{columns:2}),e.hasOwnProperty("grid")||Object.assign(e,{grid:this.getGridConfig(e.columns)})}},{key:"verifyEmailExist",value:function(n){var t=this;return function(r){return(0,c.timer)(500).pipe((0,l.switchMap)(function(){return!n||n.hasOwnProperty("email")&&n.email===r.value?(0,c.of)(null):t.verifyExist("email",r.value).pipe((0,l.map)(function(e){return!0!==e.isRegister?null:{"dw-account-info-form-emailRepeat":!0}}),(0,l.catchError)(function(n){if(console.log("error-email>>>",n),n.hasOwnProperty("error")&&n.error.hasOwnProperty("errorMessage")&&n.error.errorMessage)return(0,c.of)(e({},n.error.errorMessage,!0))}))}))}}},{key:"userMobilephoneNumeric",value:function(){var e=new RegExp("^(\\d|[0-9]+)$");return function(n){return n.value?e.test(n.value)?null:{"dw-account-info-form-needsDigits":!0}:null}}},{key:"verifyMobilephone",value:function(n){var t=this;return function(r){return(0,c.timer)(500).pipe((0,l.switchMap)(function(){return!n||n.hasOwnProperty("telephone")&&n.telephone===r.value?(0,c.of)(null):t.verifyExist("telephone",r.value).pipe((0,l.map)(function(e){return!0!==e.isRegister?null:{"dw-account-info-form-phoneRepeat":!0}}),(0,l.catchError)(function(n){if(console.log("telephone-email>>>",n),n.hasOwnProperty("error")&&n.error.hasOwnProperty("errorMessage")&&n.error.errorMessage)return(0,c.of)(e({},n.error.errorMessage,!0))}))}))}}},{key:"verifyExist",value:function(e,n){var t={};switch(e){case"email":case"telephone":t.isRegister=!0}return(0,c.of)(t)}}]),n}();return n.\u0275fac=function(e){return new(e||n)(u.\u0275\u0275inject(f.DwSystemConfigService),u.\u0275\u0275inject(s.TranslateService),u.\u0275\u0275inject(p.DwUserService))},n.\u0275prov=u.\u0275\u0275defineInjectable({factory:function(){return new n(u.\u0275\u0275inject(f.DwSystemConfigService),u.\u0275\u0275inject(s.TranslateService),u.\u0275\u0275inject(p.DwUserService))},token:n,providedIn:b}),n}(),w=function(){var e=function(){function e(){r(this,e)}return t(e,[{key:"getUserBasicInfo",value:function(e){return new c.Observable(function(e){e.next({sid:39882414600768,createBy:0,createProvider:0,createOrg:0,createDate:"2019-04-08 08:00:00",modifyBy:39882414600768,modifyById:"cloud01",modifyProvider:0xb6869e920422c80,modifyDate:"2019-08-06 08:00:00",hash:"1736a33b1c129c49ffe7175f1596986989b963d4",disabled:!1,deleted:!1,id:"cloud01",name:"cloud01",telephone:"11111111001",email:"cloud01@digiwin.com1",headImageUrl:"",nickname:"cloud01",sex:"\u5973",birthday:"1977/01/23",cellphonePrefix:"+86",address:"\u53f0\u4e2d",activated:!0,enterprise:!1,defaultTenantSid:0,confirm:!1,visible:!0,readonly:!1,chargeSid:0}),e.complete()})}},{key:"updateUserBasicInfo",value:function(e){return new c.Observable(function(e){e.next(!0),e.complete()})}},{key:"refreshUserInfo",value:function(e){return new c.Observable(function(e){e.next(!0),e.complete()})}}]),e}();return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=u.\u0275\u0275defineInjectable({factory:function(){return new e},token:e,providedIn:b}),e}(),y=function(){var e=function(){function e(){r(this,e)}return t(e,[{key:"uploadAndShare",value:function(e,n,t){return new c.Observable(function(e){e.next({fileId:"1234567890"}),e.complete()})}},{key:"updateUserHeadimageUrl",value:function(e,n){return new c.Observable(function(e){e.next(!0),e.complete()})}}]),e}();return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=u.\u0275\u0275defineInjectable({factory:function(){return new e},token:e,providedIn:b}),e}(),g=function(){return(e=g||(g={})).EMAIL="email",e.MOBILEPHONE="mobilephone",g;var e}(),S=function(){var e=function(){function e(){r(this,e)}return t(e,[{key:"getVerificationCode",value:function(e,n){var t={};switch(e){case"mobilephone":t.result="success"}return(0,c.of)(t)}},{key:"updatePassword",value:function(e){return(0,c.of)(null)}},{key:"verifyExist",value:function(e,n){var t={};switch(e){case"email":case"telephone":t.isRegister=!0}return(0,c.of)(t)}}]),e}();return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=u.\u0275\u0275defineInjectable({factory:function(){return new e},token:e,providedIn:b}),e}(),k=function(){var e=function(){function e(){r(this,e)}return t(e,[{key:"getUserBasicInfo",value:function(e){return new c.Observable(function(e){e.next({email:"miller@abc.com",telephone:"11111111111"}),e.complete()})}},{key:"getVerificationCode",value:function(e,n){var t={};switch(e){case"email":case"mobilephone":t.result="success"}return(0,c.of)(t)}},{key:"userPasswordUpdate",value:function(e){return(0,c.of)(null)}},{key:"userPasswordUpdateForce",value:function(e){return(0,c.of)(null)}},{key:"userUpdatePasswordWithOldPassword",value:function(e){return(0,c.of)(null)}}]),e}();return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=u.\u0275\u0275defineInjectable({factory:function(){return new e},token:e,providedIn:b}),e}(),O=function(){var e=function(){function e(){r(this,e),this.changedStatusSubject=new c.BehaviorSubject(null),this.openModalSubject=new c.BehaviorSubject(null)}return t(e,[{key:"shouldChanedPassword",value:function(){return(0,c.of)(!0)}},{key:"changedStatus$",get:function(){return this.changedStatusSubject.asObservable().pipe((0,l.filter)(function(e){return null!==e}))}},{key:"openChangePasswordModal$",get:function(){return this.openModalSubject.asObservable().pipe((0,l.filter)(function(e){return null!==e}))}},{key:"activeChangedStatus",value:function(){}},{key:"notActiveChangedStatus",value:function(){}}]),e}();return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=u.\u0275\u0275defineInjectable({factory:function(){return new e},token:e,providedIn:b}),e}(),j=function(){var e=function(){function e(){r(this,e),this.agreeStatusSubject=new c.BehaviorSubject(null),this.openModalSubject=new c.BehaviorSubject(null)}return t(e,[{key:"shouldAgree",value:function(e){return(0,c.of)(!0)}},{key:"openAgreeModal$",get:function(){return this.openModalSubject.asObservable().pipe((0,l.filter)(function(e){return null!==e}))}},{key:"agreeStatus$",get:function(){return this.agreeStatusSubject.asObservable().pipe((0,l.filter)(function(e){return null!==e}))}},{key:"activeAgreeStatus",value:function(){}},{key:"notActiveAgreeStatus",value:function(){}}]),e}();return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=u.\u0275\u0275defineInjectable({factory:function(){return new e},token:e,providedIn:b}),e}()}}])}();