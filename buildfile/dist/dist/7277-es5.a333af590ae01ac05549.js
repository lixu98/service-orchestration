!function(){"use strict";function r(r){return function(r){if(Array.isArray(r))return n(r)}(r)||function(r){if("undefined"!=typeof Symbol&&null!=r[Symbol.iterator]||null!=r["@@iterator"])return Array.from(r)}(r)||function(r,e){if(!r)return;if("string"==typeof r)return n(r,e);var t=Object.prototype.toString.call(r).slice(8,-1);"Object"===t&&r.constructor&&(t=r.constructor.name);if("Map"===t||"Set"===t)return Array.from(r);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return n(r,e)}(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(r,n){(null==n||n>r.length)&&(n=r.length);for(var e=0,t=new Array(n);e<n;e++)t[e]=r[e];return t}function e(r,n){for(var e=0;e<n.length;e++){var t=n[e];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(r,t.key,t)}}function t(r,n,t){return n&&e(r.prototype,n),t&&e(r,t),Object.defineProperty(r,"prototype",{writable:!1}),r}function o(r,n){if(!(r instanceof n))throw new TypeError("Cannot call a class as a function")}(self.webpackChunkassc_crs=self.webpackChunkassc_crs||[]).push([[7277,4520],{57277:function(n,e,i){i.r(e),i.d(e,{DwOperationInfoListService:function(){return m},DwOperationInfoService:function(){return h},DwOperationModule:function(){return d},DwProgramInfoListJsonService:function(){return l},DwRouterInfoService:function(){return v}});var a,s=i(42746),u=i(71049),c=i(47372),f=i(30469),p=i(55245),g=i(66800),d=((a=t(function r(){o(this,r)})).\u0275fac=function(r){return new(r||a)},a.\u0275mod=s.\u0275\u0275defineNgModule({type:a}),a.\u0275inj=s.\u0275\u0275defineInjector({imports:[[p.CommonModule]]}),a),l=function(){var n=function(){function n(e,t,i){var a=this;if(o(this,n),this.dwProgramJson=e,this.dwProgramPageJson=t,this.dwProgramActionJson=i,this._programListJsonMap=null,this.programListJsonSubject=new u.BehaviorSubject(this._programListJsonMap),this._dwProgramDataFramework=JSON.parse(JSON.stringify(f.dwProgramDataFramework)),(0,s.isDevMode)()){var c=JSON.parse(JSON.stringify(f.dwProgramDataDev));this._dwProgramDataFramework=this._dwProgramDataFramework.concat(c)}var p=JSON.parse(JSON.stringify(this.dwProgramJson));Array.isArray(p)||(p=[]);var g=JSON.parse(JSON.stringify(this.dwProgramPageJson));Array.isArray(g)||(g=[]);var d=JSON.parse(JSON.stringify(this.dwProgramActionJson));Array.isArray(d)||(d=[]),p.forEach(function(r){for(var n=g.length,e=0;e<n;e++)if(g[e].programId===r.id){r.page=JSON.parse(JSON.stringify(g[e].page));break}for(var t=d.length,o=0;o<t;o++)if(d[o].programId===r.id){r.action=JSON.parse(JSON.stringify(d[o].action));break}});var l=p.length,m=JSON.parse(JSON.stringify(f.programInfoJson)),v=JSON.parse(JSON.stringify(f.programPageInfoJson)),h=v.length,y=JSON.parse(JSON.stringify(f.programActionInfoJson)),w=y.length;m.forEach(function(r){for(var n=0;n<l;n++)if(p[n].id===r.id){p[n]=JSON.parse(JSON.stringify(r));for(var e=0;e<h;e++)v[e].programId===r.id&&(p[n].page=JSON.parse(JSON.stringify(v[e].page)));for(var t=0;t<w;t++)y[t].programId===r.id&&(p[n].action=JSON.parse(JSON.stringify(y[t].action)));break}});var J=[].concat(r(this.dwProgramInfoFrameworkJson),r(p));this._programListJsonMap={},J.forEach(function(r){var n=r.id;r.hasOwnProperty("page")||(r.page=[]),r.hasOwnProperty("action")||(r.action=[]),delete r.id,a._programListJsonMap[n]=r});var S=Object.assign({},this._programListJsonMap);this.programListJsonSubject.next(S)}return t(n,[{key:"programListJsonMap$",get:function(){return this.programListJsonSubject.asObservable().pipe((0,c.filter)(function(r){return null!==r}),(0,c.distinctUntilChanged)())}},{key:"programListJsonMap",get:function(){var r=this,n={};return Object.keys(this._programListJsonMap).forEach(function(e){var t=Object.assign({},r._programListJsonMap[e]);n[e]=t}),n}},{key:"dwProgramInfoFrameworkJson",get:function(){return JSON.parse(JSON.stringify(this._dwProgramDataFramework))}}]),n}();return n.\u0275fac=function(r){return new(r||n)(s.\u0275\u0275inject(f.DW_PROGRAM_JSON),s.\u0275\u0275inject(f.DW_PROGRAM_PAGE),s.\u0275\u0275inject(f.DW_PROGRAM_ACTION))},n.\u0275prov=s.\u0275\u0275defineInjectable({factory:function(){return new n(s.\u0275\u0275inject(f.DW_PROGRAM_JSON),s.\u0275\u0275inject(f.DW_PROGRAM_PAGE),s.\u0275\u0275inject(f.DW_PROGRAM_ACTION))},token:n,providedIn:d}),n}(),m=function(){var r=function(){function r(n,e){var t=this;o(this,r),this.programInfoListJsonService=n,this.dwTenantService=e,this.operationSubject=new u.BehaviorSubject(null);var i,a=!1;this.dwTenantService.isTokenValid$.subscribe(function(r){r?a||(a=!0,i=t.programInfoListJsonService.programListJsonMap$.subscribe(function(r){t.operationSubject.next(r)},function(r){console.log(r),t.operationSubject.next({})})):(a=!1,t.operationSubject.next(null),i&&i.unsubscribe())})}return t(r,[{key:"operationListMap$",get:function(){return this.operationSubject.asObservable().pipe((0,c.filter)(function(r){return null!==r}),(0,c.distinctUntilChanged)())}}]),r}();return r.\u0275fac=function(n){return new(n||r)(s.\u0275\u0275inject(l),s.\u0275\u0275inject(g.DwTenantService))},r.\u0275prov=s.\u0275\u0275defineInjectable({factory:function(){return new r(s.\u0275\u0275inject(l),s.\u0275\u0275inject(g.DwTenantService))},token:r,providedIn:d}),r}(),v=function(){var r=function(){function r(){o(this,r)}return t(r,[{key:"routerProgramId",value:function(r){var n=null,e=r.firstChild,t=r.data.value;if(t.dwRouteData&&t.dwRouteData.hasOwnProperty("programId")&&(n=t.dwRouteData.programId),!n)if(e)n=this.routerProgramId(e);else{var o=r.params.value;o.programId&&(n=o.programId)}return n}},{key:"routeSnapshotProgramId",value:function(r){for(var n,e=null,t=r.pathFromRoot.reverse(),o=0;o<t.length;o++)if((n=t[o]).routeConfig&&n.routeConfig.data&&n.routeConfig.data.dwRouteData&&n.routeConfig.data.dwRouteData.programId){e=n.routeConfig.data.dwRouteData.programId;break}return e}}]),r}();return r.\u0275fac=function(n){return new(n||r)},r.\u0275prov=s.\u0275\u0275defineInjectable({factory:function(){return new r},token:r,providedIn:d}),r}(),h=function(){var r=function(){function r(n,e,t){o(this,r),this.dwOperationInfoListService=n,this.dwProgramInfoListJsonService=e,this.dwRouterInfoService=t}return t(r,[{key:"operationInfo$",value:function(r,n){var e=this,t=new u.BehaviorSubject(null),o={module:"",type:"",routerLink:"",page:[],action:[]},i=this.operationBaseByType(n,r);return i.type?(o=Object.assign({},i),t.next(o)):this.dwOperationInfoListService.operationListMap$.subscribe(function(n){if(null!==n&&n[r]&&(o=n[r]),"externalUrl"===o.type){var i=e.operationBaseByType(o.type,r);i.type&&(o.type=i.type,o.routerLink=i.routerLink)}t.next(o)},function(r){t.next(o)}),t.asObservable().pipe((0,c.filter)(function(r){return null!==r}),(0,c.distinctUntilChanged)())}},{key:"operationBaseByType",value:function(r,n){var e={module:"",type:"",routerLink:"",page:[],action:[]};if(r)for(var t=this.dwProgramInfoListJsonService.dwProgramInfoFrameworkJson.length,o=0;o<t;o++)if(this.dwProgramInfoListJsonService.dwProgramInfoFrameworkJson[o].type===r){(e=Object.assign({},this.dwProgramInfoListJsonService.dwProgramInfoFrameworkJson[o])).routerLink=e.routerLink+"/"+n;break}return e}},{key:"operationBaseByRouterLink",value:function(r,n){0!==r.indexOf("/")&&(r="/"+r);for(var e={module:"",type:"",routerLink:"",page:[],action:[]},t=this.dwProgramInfoListJsonService.dwProgramInfoFrameworkJson.length,o=0;o<t;o++)if(this.dwProgramInfoListJsonService.dwProgramInfoFrameworkJson[o].routerLink===r){(e=Object.assign({},this.dwProgramInfoListJsonService.dwProgramInfoFrameworkJson[o])).routerLink=e.routerLink+"/"+n;break}return e}},{key:"routerOperationInfo",value:function(r){var n="",e={id:n,module:"",type:"",routerLink:"",page:[],action:[]},t=r.params;if(t.hasOwnProperty("programId")){n=t.programId;for(var o=[],i=r;i;)i.url.length>0&&o.unshift(i.url[0].path),i=i.parent;if(o.length>0){var a=o.join("/"),s=this.operationBaseByRouterLink(a,n);e.id=n,e.module=s.module,e.type=s.type,e.routerLink=s.routerLink}return u.Observable.create(function(r){r.next(e),r.complete()})}return n=this.dwRouterInfoService.routeSnapshotProgramId(r),this.operationInfo$(n).pipe((0,c.map)(function(r){return e.id=n,e.module=r.module,e.type=r.type,e.routerLink=r.routerLink,e}))}},{key:"isParamEqual",value:function(r,n){var e=!1,t=r,o=n,i=Object.keys(t).length;if(i===Object.keys(o).length)if(0===i)e=!0;else{var a=i;Object.keys(t).forEach(function(r){var n=o[r];void 0!==n&&n===t[r]&&(a-=1)}),0===a&&(e=!0)}return e}}]),r}();return r.\u0275fac=function(n){return new(n||r)(s.\u0275\u0275inject(m),s.\u0275\u0275inject(l),s.\u0275\u0275inject(v))},r.\u0275prov=s.\u0275\u0275defineInjectable({factory:function(){return new r(s.\u0275\u0275inject(m),s.\u0275\u0275inject(l),s.\u0275\u0275inject(v))},token:r,providedIn:d}),r}()}}])}();