"use strict";(self.webpackChunkassc_crs=self.webpackChunkassc_crs||[]).push([[7229,6769,3206],{71452:function(e,t,n){n.d(t,{ee:function(){return mt},Y9:function(){return gt},My:function(){return pt},KP:function(){return ut},Uw:function(){return xt},at:function(){return ft},hb:function(){return dt},f1:function(){return It},xi:function(){return st},QF:function(){return ct},Ct:function(){return St},T:function(){return bt},b:function(){return Ct},BL:function(){return yt},$2:function(){return _t},FH:function(){return wt},R9:function(){return vt}});var i=n(42746),r=n(69252),a=n(16612),o=n(10952),l=n(71049),d=n(47372),s=n(62695),c=n(87442),m=n(83522),p=n(51156),u=n(30469),h=n(32698),g=n.n(h),f=n(43938),w=n(55245),v=n(1020),x=n(85277),C=n(35626),_=n(119),y=n(82542),S=n(41937),b=n(67280),I=n(37568),E=n(93353);function D(e,t){1&e&&i.\u0275\u0275elementContainer(0)}const O=function(e){return{$implicit:e}};function M(e,t){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275template(1,D,1,0,"ng-container",8),i.\u0275\u0275elementContainerEnd()),2&e){const e=i.\u0275\u0275nextContext(),t=i.\u0275\u0275reference(7);i.\u0275\u0275advance(1),i.\u0275\u0275property("ngTemplateOutlet",t)("ngTemplateOutletContext",i.\u0275\u0275pureFunction1(2,O,e.dwFilterInfo))}}function P(e,t){1&e&&i.\u0275\u0275elementContainer(0)}function k(e,t){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275template(1,P,1,0,"ng-container",8),i.\u0275\u0275elementContainerEnd()),2&e){const e=i.\u0275\u0275nextContext(),t=i.\u0275\u0275reference(13);i.\u0275\u0275advance(1),i.\u0275\u0275property("ngTemplateOutlet",t)("ngTemplateOutletContext",i.\u0275\u0275pureFunction1(2,O,e.dwFilterInfo))}}function F(e,t){1&e&&i.\u0275\u0275elementContainer(0)}function V(e,t){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275template(1,F,1,0,"ng-container",8),i.\u0275\u0275elementContainerEnd()),2&e){const e=i.\u0275\u0275nextContext(),t=i.\u0275\u0275reference(9);i.\u0275\u0275advance(1),i.\u0275\u0275property("ngTemplateOutlet",t)("ngTemplateOutletContext",i.\u0275\u0275pureFunction1(2,O,e.dwFilterInfo))}}function T(e,t){1&e&&i.\u0275\u0275elementContainer(0)}function L(e,t){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275template(1,T,1,0,"ng-container",8),i.\u0275\u0275elementContainerEnd()),2&e){const e=i.\u0275\u0275nextContext(),t=i.\u0275\u0275reference(11);i.\u0275\u0275advance(1),i.\u0275\u0275property("ngTemplateOutlet",t)("ngTemplateOutletContext",i.\u0275\u0275pureFunction1(2,O,e.dwFilterInfo))}}function R(e,t){if(1&e&&(i.\u0275\u0275element(0,"dw-option",14),i.\u0275\u0275pipe(1,"translate")),2&e){const e=t.$implicit;i.\u0275\u0275property("dwLabel",i.\u0275\u0275pipeBind1(1,2,e.label))("dwValue",e.value)}}function A(e,t){if(1&e){const e=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"dw-select",12),i.\u0275\u0275listener("ngModelChange",function(t){return i.\u0275\u0275restoreView(e),i.\u0275\u0275nextContext().$implicit.condition1.filter=t})("ngModelChange",function(){return i.\u0275\u0275restoreView(e),i.\u0275\u0275nextContext(2).modelChange()}),i.\u0275\u0275template(2,R,2,4,"dw-option",13),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd()}if(2&e){const e=i.\u0275\u0275nextContext().$implicit,t=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("ngModel",e.condition1.filter)("dwMode",t.dwFilterMultipleMode),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",t.dwFilterList)}}function N(e,t){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275element(1,"input",15),i.\u0275\u0275elementContainerEnd()),2&e){const e=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(1),i.\u0275\u0275property("value",e.strCondition)("disabled",!0)}}function $(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"div",9),i.\u0275\u0275elementStart(1,"div",10),i.\u0275\u0275template(2,A,3,3,"ng-container",11),i.\u0275\u0275template(3,N,2,2,"ng-container",11),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()),2&e){const e=t.$implicit,n=i.\u0275\u0275nextContext();i.\u0275\u0275advance(2),i.\u0275\u0275property("ngIf",n.canEditModel(e,n.dwFilterList)),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",!n.canEditModel(e,n.dwFilterList))}}function j(e,t){if(1&e){const e=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"dw-date-picker",16),i.\u0275\u0275listener("ngModelChange",function(t){return i.\u0275\u0275restoreView(e),i.\u0275\u0275nextContext().$implicit.condition1.filter=t})("ngModelChange",function(){return i.\u0275\u0275restoreView(e),i.\u0275\u0275nextContext(2).modelChange()}),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd()}if(2&e){const e=i.\u0275\u0275nextContext().$implicit;i.\u0275\u0275advance(1),i.\u0275\u0275property("ngModel",e.condition1.filter)}}function z(e,t){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275element(1,"input",15),i.\u0275\u0275elementContainerEnd()),2&e){const e=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(1),i.\u0275\u0275property("value",e.strCondition)("disabled",!0)}}function B(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"div",9),i.\u0275\u0275elementStart(1,"div",10),i.\u0275\u0275template(2,j,2,1,"ng-container",11),i.\u0275\u0275template(3,z,2,2,"ng-container",11),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()),2&e){const e=t.$implicit,n=i.\u0275\u0275nextContext();i.\u0275\u0275advance(2),i.\u0275\u0275property("ngIf",n.canEditModel(e)),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",!n.canEditModel(e))}}function q(e,t){if(1&e){const e=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"i",21),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(e),i.\u0275\u0275nextContext(4).clear()}),i.\u0275\u0275elementEnd()}}function W(e,t){if(1&e&&i.\u0275\u0275template(0,q,1,0,"i",20),2&e){const e=i.\u0275\u0275nextContext(2).$implicit;i.\u0275\u0275property("ngIf",e.condition1.filter)}}function G(e,t){if(1&e){const e=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"dw-input-group",17),i.\u0275\u0275elementStart(2,"input",18),i.\u0275\u0275listener("ngModelChange",function(t){return i.\u0275\u0275restoreView(e),i.\u0275\u0275nextContext().$implicit.condition1.filter=t})("ngModelChange",function(){return i.\u0275\u0275restoreView(e),i.\u0275\u0275nextContext(2).modelChange()}),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(3,W,1,1,"ng-template",null,19,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275elementContainerEnd()}if(2&e){const e=i.\u0275\u0275reference(4),t=i.\u0275\u0275nextContext().$implicit;i.\u0275\u0275advance(1),i.\u0275\u0275property("dwSuffix",e),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngModel",t.condition1.filter)}}function U(e,t){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275element(1,"input",15),i.\u0275\u0275elementContainerEnd()),2&e){const e=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(1),i.\u0275\u0275property("value",e.strCondition)("disabled",!0)}}function H(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"div",9),i.\u0275\u0275elementStart(1,"div",10),i.\u0275\u0275template(2,G,5,2,"ng-container",11),i.\u0275\u0275template(3,U,2,2,"ng-container",11),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()),2&e){const e=t.$implicit,n=i.\u0275\u0275nextContext();i.\u0275\u0275advance(2),i.\u0275\u0275property("ngIf",n.canEditModel(e)),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",!n.canEditModel(e))}}function X(e,t){if(1&e){const e=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"dw-input-number",16),i.\u0275\u0275listener("ngModelChange",function(t){return i.\u0275\u0275restoreView(e),i.\u0275\u0275nextContext().$implicit.condition1.filter=t})("ngModelChange",function(){return i.\u0275\u0275restoreView(e),i.\u0275\u0275nextContext(2).modelChange()}),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd()}if(2&e){const e=i.\u0275\u0275nextContext().$implicit;i.\u0275\u0275advance(1),i.\u0275\u0275property("ngModel",e.condition1.filter)}}function Q(e,t){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275element(1,"input",15),i.\u0275\u0275elementContainerEnd()),2&e){const e=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(1),i.\u0275\u0275property("value",e.strCondition)("disabled",!0)}}function K(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"div",9),i.\u0275\u0275elementStart(1,"div",10),i.\u0275\u0275template(2,X,2,1,"ng-container",11),i.\u0275\u0275template(3,Q,2,2,"ng-container",11),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()),2&e){const e=t.$implicit,n=i.\u0275\u0275nextContext();i.\u0275\u0275advance(2),i.\u0275\u0275property("ngIf",n.canEditModel(e)),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",!n.canEditModel(e))}}const J=["dwDropColumnsContent"],Z=["rightMenu"],Y=["emptyDataColumns"],ee=["dwDropColumns",""];function te(e,t){1&e&&(i.\u0275\u0275elementStart(0,"td",11),i.\u0275\u0275text(1),i.\u0275\u0275pipe(2,"translate"),i.\u0275\u0275elementEnd()),2&e&&(i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate(i.\u0275\u0275pipeBind1(2,1,"dw-table-config-no-column-displayed")))}const ne=function(e){return{checked:e}};function ie(e,t){if(1&e){const e=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"li",12),i.\u0275\u0275elementStart(1,"div",13),i.\u0275\u0275listener("click",function(t){const n=i.\u0275\u0275restoreView(e).$implicit;return i.\u0275\u0275nextContext().changeVisible(n,t)}),i.\u0275\u0275element(2,"span",14),i.\u0275\u0275text(3),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()}if(2&e){const e=t.$implicit;i.\u0275\u0275advance(2),i.\u0275\u0275property("ngClass",i.\u0275\u0275pureFunction1(2,ne,e.visible)),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",e.columnName," ")}}function re(e,t){1&e&&(i.\u0275\u0275elementStart(0,"div"),i.\u0275\u0275elementStart(1,"span",5),i.\u0275\u0275text(2,"dw-table-config-floatingFilter-open"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd())}function ae(e,t){1&e&&(i.\u0275\u0275elementStart(0,"div"),i.\u0275\u0275elementStart(1,"span",5),i.\u0275\u0275text(2,"dw-table-config-floatingFilter-close"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd())}function oe(e,t){if(1&e){const e=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"li",4),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(e),i.\u0275\u0275nextContext().changeFloatingFilter()}),i.\u0275\u0275template(1,re,3,0,"div",15),i.\u0275\u0275template(2,ae,3,0,"div",15),i.\u0275\u0275elementEnd()}if(2&e){const e=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",!0!==e.dwFloatingFilter),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",!0===e.dwFloatingFilter)}}const le=["*"],de=["dwReorderColumnsContent"],se=["dwReorderColumns",""];function ce(e,t){1&e&&i.\u0275\u0275elementContainer(0)}function me(e,t){1&e&&i.\u0275\u0275elementContainer(0)}const pe=function(e,t){return{$implicit:e,selectVisiable:t}};function ue(e,t){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275template(1,me,1,0,"ng-container",1),i.\u0275\u0275elementContainerEnd()),2&e){const e=i.\u0275\u0275nextContext(),t=e.$implicit,n=e.filterVisiable;i.\u0275\u0275nextContext();const r=i.\u0275\u0275reference(5);i.\u0275\u0275advance(1),i.\u0275\u0275property("ngTemplateOutlet",r)("ngTemplateOutletContext",i.\u0275\u0275pureFunction2(2,pe,t,n))}}function he(e,t){1&e&&i.\u0275\u0275elementContainer(0)}function ge(e,t){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275template(1,he,1,0,"ng-container",1),i.\u0275\u0275elementContainerEnd()),2&e){const e=i.\u0275\u0275nextContext().$implicit;i.\u0275\u0275nextContext();const t=i.\u0275\u0275reference(11);i.\u0275\u0275advance(1),i.\u0275\u0275property("ngTemplateOutlet",t)("ngTemplateOutletContext",i.\u0275\u0275pureFunction1(2,O,e))}}function fe(e,t){1&e&&i.\u0275\u0275elementContainer(0)}function we(e,t){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275template(1,fe,1,0,"ng-container",1),i.\u0275\u0275elementContainerEnd()),2&e){const e=i.\u0275\u0275nextContext().$implicit;i.\u0275\u0275nextContext();const t=i.\u0275\u0275reference(7);i.\u0275\u0275advance(1),i.\u0275\u0275property("ngTemplateOutlet",t)("ngTemplateOutletContext",i.\u0275\u0275pureFunction1(2,O,e))}}function ve(e,t){1&e&&i.\u0275\u0275elementContainer(0)}function xe(e,t){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275template(1,ve,1,0,"ng-container",1),i.\u0275\u0275elementContainerEnd()),2&e){const e=i.\u0275\u0275nextContext().$implicit;i.\u0275\u0275nextContext();const t=i.\u0275\u0275reference(9);i.\u0275\u0275advance(1),i.\u0275\u0275property("ngTemplateOutlet",t)("ngTemplateOutletContext",i.\u0275\u0275pureFunction1(2,O,e))}}function Ce(e,t){if(1&e){const e=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"a",7),i.\u0275\u0275listener("dwVisibleChange",function(t){return i.\u0275\u0275restoreView(e).filterVisiable.value=t}),i.\u0275\u0275element(1,"i",8),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(2,"dw-dropdown-menu",null,9),i.\u0275\u0275elementStart(4,"div",10),i.\u0275\u0275elementStart(5,"div",11),i.\u0275\u0275elementContainerStart(6,12),i.\u0275\u0275template(7,ue,2,5,"ng-container",13),i.\u0275\u0275template(8,ge,2,4,"ng-container",13),i.\u0275\u0275template(9,we,2,4,"ng-container",13),i.\u0275\u0275template(10,xe,2,4,"ng-container",14),i.\u0275\u0275elementContainerEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(11,"div",15),i.\u0275\u0275elementStart(12,"button",16),i.\u0275\u0275listener("click",function(){const t=i.\u0275\u0275restoreView(e);return t.filter(t.$implicit)}),i.\u0275\u0275elementStart(13,"span",17),i.\u0275\u0275text(14,"dw-table-config-search"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(15,"button",16),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(e),i.\u0275\u0275nextContext().close()}),i.\u0275\u0275elementStart(16,"span",17),i.\u0275\u0275text(17,"dw-table-config-close"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()}if(2&e){const e=t.filterVisiable,n=i.\u0275\u0275reference(3),r=i.\u0275\u0275nextContext();i.\u0275\u0275property("dwClickHide",!0)("dwDropdownMenu",n)("dwVisible",e.value),i.\u0275\u0275advance(1),i.\u0275\u0275property("dwType",r.dwFilterIcon?r.dwFilterIcon:"search")("dwTheme",r.dwIconTheme?r.dwIconTheme:"outline"),i.\u0275\u0275advance(5),i.\u0275\u0275property("ngSwitch",r.dwColumnFilter),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngSwitchCase","selectFilter"),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngSwitchCase","numberFilter"),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngSwitchCase","dateFilter")}}function _e(e,t){if(1&e&&(i.\u0275\u0275element(0,"dw-option",25),i.\u0275\u0275pipe(1,"translate")),2&e){const e=i.\u0275\u0275nextContext().$implicit;i.\u0275\u0275property("dwValue",e.value)("dwLabel",i.\u0275\u0275pipeBind1(1,2,"dw-table-config-"+e.value))}}function ye(e,t){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275template(1,_e,2,4,"dw-option",24),i.\u0275\u0275elementContainerEnd()),2&e){const e=t.$implicit;i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",e.supported.indexOf("select")>=0)}}function Se(e,t){if(1&e&&(i.\u0275\u0275element(0,"dw-option",28),i.\u0275\u0275pipe(1,"translate")),2&e){const e=t.$implicit;i.\u0275\u0275property("dwLabel",i.\u0275\u0275pipeBind1(1,2,e.label))("dwValue",e.value)}}function be(e,t){if(1&e){const e=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"dw-select",26),i.\u0275\u0275listener("ngModelChange",function(t){return i.\u0275\u0275restoreView(e),i.\u0275\u0275nextContext().$implicit.condition1.filter=t}),i.\u0275\u0275template(1,Se,2,4,"dw-option",27),i.\u0275\u0275elementEnd()}if(2&e){const e=i.\u0275\u0275nextContext().$implicit,t=i.\u0275\u0275nextContext();i.\u0275\u0275property("ngModel",e.condition1.filter)("dwMode",t.dwFilterMultipleMode),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",t.dwFilterList)}}function Ie(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"label",30),i.\u0275\u0275text(1),i.\u0275\u0275pipe(2,"translate"),i.\u0275\u0275elementEnd()),2&e){const e=t.$implicit;i.\u0275\u0275property("dwValue",e),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",i.\u0275\u0275pipeBind1(2,2,"dw-table-config-"+e)," ")}}function Ee(e,t){if(1&e&&(i.\u0275\u0275element(0,"dw-option",25),i.\u0275\u0275pipe(1,"translate")),2&e){const e=i.\u0275\u0275nextContext().$implicit;i.\u0275\u0275property("dwValue",e.value)("dwLabel",i.\u0275\u0275pipeBind1(1,2,"dw-table-config-"+e.value))}}function De(e,t){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275template(1,Ee,2,4,"dw-option",24),i.\u0275\u0275elementContainerEnd()),2&e){const e=t.$implicit;i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",e.supported.indexOf("select")>=0)}}function Oe(e,t){if(1&e&&(i.\u0275\u0275element(0,"dw-option",28),i.\u0275\u0275pipe(1,"translate")),2&e){const e=t.$implicit;i.\u0275\u0275property("dwLabel",i.\u0275\u0275pipeBind1(1,2,e.label))("dwValue",e.value)}}function Me(e,t){if(1&e){const e=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"dw-select",26),i.\u0275\u0275listener("ngModelChange",function(t){return i.\u0275\u0275restoreView(e),i.\u0275\u0275nextContext(2).$implicit.condition2.filter=t}),i.\u0275\u0275template(1,Oe,2,4,"dw-option",27),i.\u0275\u0275elementEnd()}if(2&e){const e=i.\u0275\u0275nextContext(2).$implicit,t=i.\u0275\u0275nextContext();i.\u0275\u0275property("ngModel",e.condition2.filter)("dwMode",t.dwFilterMultipleMode),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",t.dwFilterList)}}function Pe(e,t){if(1&e){const e=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"div",19),i.\u0275\u0275elementStart(2,"dw-radio-group",20),i.\u0275\u0275listener("ngModelChange",function(t){return i.\u0275\u0275restoreView(e),i.\u0275\u0275nextContext().$implicit.operator=t}),i.\u0275\u0275template(3,Ie,3,4,"label",29),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(4,"div",19),i.\u0275\u0275elementStart(5,"dw-select",20),i.\u0275\u0275listener("ngModelChange",function(t){return i.\u0275\u0275restoreView(e),i.\u0275\u0275nextContext().$implicit.condition2.options=t}),i.\u0275\u0275template(6,De,2,1,"ng-container",21),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(7,"div",19),i.\u0275\u0275template(8,Me,2,3,"dw-select",22),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd()}if(2&e){const e=i.\u0275\u0275nextContext(),t=e.$implicit,n=e.selectVisiable,r=i.\u0275\u0275nextContext();i.\u0275\u0275advance(2),i.\u0275\u0275property("ngModel",t.operator),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",r.dwFilterOperator),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngModel",t.condition2.options),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",r.dwFilterOptions),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngIf",n.value)}}function ke(e,t){if(1&e){const e=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"div",18),i.\u0275\u0275elementStart(1,"div",19),i.\u0275\u0275elementStart(2,"dw-select",20),i.\u0275\u0275listener("ngModelChange",function(t){return i.\u0275\u0275restoreView(e).$implicit.condition1.options=t}),i.\u0275\u0275template(3,ye,2,1,"ng-container",21),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(4,"div",19),i.\u0275\u0275template(5,be,2,3,"dw-select",22),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(6,Pe,9,5,"ng-container",23),i.\u0275\u0275elementEnd()}if(2&e){const e=t.$implicit,n=t.selectVisiable,r=i.\u0275\u0275nextContext();i.\u0275\u0275advance(2),i.\u0275\u0275property("ngModel",e.condition1.options),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",r.dwFilterOptions),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngIf",n.value),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",e.condition1.filter)}}function Fe(e,t){if(1&e&&(i.\u0275\u0275element(0,"dw-option",25),i.\u0275\u0275pipe(1,"translate")),2&e){const e=i.\u0275\u0275nextContext().$implicit;i.\u0275\u0275property("dwValue",e.value)("dwLabel",i.\u0275\u0275pipeBind1(1,2,"dw-table-config-"+e.value))}}function Ve(e,t){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275template(1,Fe,2,4,"dw-option",24),i.\u0275\u0275elementContainerEnd()),2&e){const e=t.$implicit;i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",e.supported.indexOf("date")>=0)}}function Te(e,t){if(1&e){const e=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"div",19),i.\u0275\u0275elementStart(2,"dw-date-picker",20),i.\u0275\u0275listener("ngModelChange",function(t){return i.\u0275\u0275restoreView(e),i.\u0275\u0275nextContext().$implicit.condition1.filterTo=t}),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd()}if(2&e){const e=i.\u0275\u0275nextContext().$implicit;i.\u0275\u0275advance(2),i.\u0275\u0275property("ngModel",e.condition1.filterTo)}}function Le(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"label",30),i.\u0275\u0275text(1),i.\u0275\u0275pipe(2,"translate"),i.\u0275\u0275elementEnd()),2&e){const e=t.$implicit;i.\u0275\u0275property("dwValue",e),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",i.\u0275\u0275pipeBind1(2,2,"dw-table-config-"+e)," ")}}function Re(e,t){if(1&e&&(i.\u0275\u0275element(0,"dw-option",25),i.\u0275\u0275pipe(1,"translate")),2&e){const e=i.\u0275\u0275nextContext().$implicit;i.\u0275\u0275property("dwValue",e.value)("dwLabel",i.\u0275\u0275pipeBind1(1,2,"dw-table-config-"+e.value))}}function Ae(e,t){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275template(1,Re,2,4,"dw-option",24),i.\u0275\u0275elementContainerEnd()),2&e){const e=t.$implicit;i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",e.supported.indexOf("date")>=0)}}function Ne(e,t){if(1&e){const e=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"div",19),i.\u0275\u0275elementStart(2,"dw-date-picker",20),i.\u0275\u0275listener("ngModelChange",function(t){return i.\u0275\u0275restoreView(e),i.\u0275\u0275nextContext(2).$implicit.condition2.filterTo=t}),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd()}if(2&e){const e=i.\u0275\u0275nextContext(2).$implicit;i.\u0275\u0275advance(2),i.\u0275\u0275property("ngModel",e.condition2.filterTo)}}function $e(e,t){if(1&e){const e=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"div",19),i.\u0275\u0275elementStart(2,"dw-radio-group",20),i.\u0275\u0275listener("ngModelChange",function(t){return i.\u0275\u0275restoreView(e),i.\u0275\u0275nextContext().$implicit.operator=t}),i.\u0275\u0275template(3,Le,3,4,"label",29),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(4,"div",19),i.\u0275\u0275elementStart(5,"dw-select",20),i.\u0275\u0275listener("ngModelChange",function(t){return i.\u0275\u0275restoreView(e),i.\u0275\u0275nextContext().$implicit.condition2.options=t}),i.\u0275\u0275template(6,Ae,2,1,"ng-container",21),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(7,"div",19),i.\u0275\u0275elementStart(8,"dw-date-picker",20),i.\u0275\u0275listener("ngModelChange",function(t){return i.\u0275\u0275restoreView(e),i.\u0275\u0275nextContext().$implicit.condition2.filter=t}),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(9,Ne,3,1,"ng-container",23),i.\u0275\u0275elementContainerEnd()}if(2&e){const e=i.\u0275\u0275nextContext().$implicit,t=i.\u0275\u0275nextContext();i.\u0275\u0275advance(2),i.\u0275\u0275property("ngModel",e.operator),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",t.dwFilterOperator),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngModel",e.condition2.options),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",t.dwFilterOptions),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngModel",e.condition2.filter),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf","inRange"===e.condition2.options)}}function je(e,t){if(1&e){const e=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"div",18),i.\u0275\u0275elementStart(1,"div",19),i.\u0275\u0275elementStart(2,"dw-select",20),i.\u0275\u0275listener("ngModelChange",function(t){return i.\u0275\u0275restoreView(e).$implicit.condition1.options=t}),i.\u0275\u0275template(3,Ve,2,1,"ng-container",21),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(4,"div",19),i.\u0275\u0275elementStart(5,"dw-date-picker",20),i.\u0275\u0275listener("ngModelChange",function(t){return i.\u0275\u0275restoreView(e).$implicit.condition1.filter=t}),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(6,Te,3,1,"ng-container",23),i.\u0275\u0275template(7,$e,10,6,"ng-container",23),i.\u0275\u0275elementEnd()}if(2&e){const e=t.$implicit,n=i.\u0275\u0275nextContext();i.\u0275\u0275advance(2),i.\u0275\u0275property("ngModel",e.condition1.options),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",n.dwFilterOptions),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngModel",e.condition1.filter),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf","inRange"===e.condition1.options),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf","inRange"!==e.condition1.options&&e.condition1.filter||"inRange"===e.condition1.options&&e.condition1.filter&&e.condition1.filterTo)}}function ze(e,t){if(1&e&&(i.\u0275\u0275element(0,"dw-option",25),i.\u0275\u0275pipe(1,"translate")),2&e){const e=i.\u0275\u0275nextContext().$implicit;i.\u0275\u0275property("dwValue",e.value)("dwLabel",i.\u0275\u0275pipeBind1(1,2,"dw-table-config-"+e.value))}}function Be(e,t){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275template(1,ze,2,4,"dw-option",24),i.\u0275\u0275elementContainerEnd()),2&e){const e=t.$implicit;i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",e.supported.indexOf("text")>=0)}}function qe(e,t){if(1&e){const e=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"i",35),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(e),i.\u0275\u0275nextContext(3).clear("condition1","filter")}),i.\u0275\u0275elementEnd()}}function We(e,t){if(1&e&&i.\u0275\u0275template(0,qe,1,0,"i",34),2&e){const e=i.\u0275\u0275nextContext().$implicit;i.\u0275\u0275property("ngIf",e.condition1.filter)}}function Ge(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"label",30),i.\u0275\u0275text(1),i.\u0275\u0275pipe(2,"translate"),i.\u0275\u0275elementEnd()),2&e){const e=t.$implicit;i.\u0275\u0275property("dwValue",e),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",i.\u0275\u0275pipeBind1(2,2,"dw-table-config-"+e)," ")}}function Ue(e,t){if(1&e&&(i.\u0275\u0275element(0,"dw-option",25),i.\u0275\u0275pipe(1,"translate")),2&e){const e=i.\u0275\u0275nextContext().$implicit;i.\u0275\u0275property("dwValue",e.value)("dwLabel",i.\u0275\u0275pipeBind1(1,2,"dw-table-config-"+e.value))}}function He(e,t){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275template(1,Ue,2,4,"dw-option",24),i.\u0275\u0275elementContainerEnd()),2&e){const e=t.$implicit;i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",e.supported.indexOf("text")>=0)}}function Xe(e,t){if(1&e){const e=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"i",35),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(e),i.\u0275\u0275nextContext(4).clear("condition2","filter")}),i.\u0275\u0275elementEnd()}}function Qe(e,t){if(1&e&&i.\u0275\u0275template(0,Xe,1,0,"i",34),2&e){const e=i.\u0275\u0275nextContext(2).$implicit;i.\u0275\u0275property("ngIf",e.condition2.filter)}}function Ke(e,t){if(1&e){const e=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"div",19),i.\u0275\u0275elementStart(2,"dw-radio-group",20),i.\u0275\u0275listener("ngModelChange",function(t){return i.\u0275\u0275restoreView(e),i.\u0275\u0275nextContext().$implicit.operator=t}),i.\u0275\u0275template(3,Ge,3,4,"label",29),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(4,"div",19),i.\u0275\u0275elementStart(5,"dw-select",20),i.\u0275\u0275listener("ngModelChange",function(t){return i.\u0275\u0275restoreView(e),i.\u0275\u0275nextContext().$implicit.condition2.options=t}),i.\u0275\u0275template(6,He,2,1,"ng-container",21),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(7,"div",19),i.\u0275\u0275elementStart(8,"dw-input-group",31),i.\u0275\u0275elementStart(9,"input",32),i.\u0275\u0275listener("ngModelChange",function(t){return i.\u0275\u0275restoreView(e),i.\u0275\u0275nextContext().$implicit.condition2.filter=t}),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(10,Qe,1,1,"ng-template",null,36,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd()}if(2&e){const e=i.\u0275\u0275reference(11),t=i.\u0275\u0275nextContext().$implicit,n=i.\u0275\u0275nextContext();i.\u0275\u0275advance(2),i.\u0275\u0275property("ngModel",t.operator),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",n.dwFilterOperator),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngModel",t.condition2.options),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",n.dwFilterOptions),i.\u0275\u0275advance(2),i.\u0275\u0275property("dwSuffix",e),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngModel",t.condition2.filter)}}function Je(e,t){if(1&e){const e=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"div",18),i.\u0275\u0275elementStart(1,"div",19),i.\u0275\u0275elementStart(2,"dw-select",20),i.\u0275\u0275listener("ngModelChange",function(t){return i.\u0275\u0275restoreView(e).$implicit.condition1.options=t}),i.\u0275\u0275template(3,Be,2,1,"ng-container",21),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(4,"div",19),i.\u0275\u0275elementStart(5,"dw-input-group",31),i.\u0275\u0275elementStart(6,"input",32),i.\u0275\u0275listener("ngModelChange",function(t){return i.\u0275\u0275restoreView(e).$implicit.condition1.filter=t}),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(7,We,1,1,"ng-template",null,33,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(9,Ke,12,6,"ng-container",23),i.\u0275\u0275elementEnd()}if(2&e){const e=t.$implicit,n=i.\u0275\u0275reference(8),r=i.\u0275\u0275nextContext();i.\u0275\u0275advance(2),i.\u0275\u0275property("ngModel",e.condition1.options),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",r.dwFilterOptions),i.\u0275\u0275advance(2),i.\u0275\u0275property("dwSuffix",n),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngModel",e.condition1.filter),i.\u0275\u0275advance(3),i.\u0275\u0275property("ngIf",e.condition1.filter)}}function Ze(e,t){if(1&e&&(i.\u0275\u0275element(0,"dw-option",25),i.\u0275\u0275pipe(1,"translate")),2&e){const e=i.\u0275\u0275nextContext().$implicit;i.\u0275\u0275property("dwValue",e.value)("dwLabel",i.\u0275\u0275pipeBind1(1,2,"dw-table-config-"+e.value))}}function Ye(e,t){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275template(1,Ze,2,4,"dw-option",24),i.\u0275\u0275elementContainerEnd()),2&e){const e=t.$implicit;i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",e.supported.indexOf("number")>=0)}}function et(e,t){if(1&e){const e=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"div",19),i.\u0275\u0275elementStart(2,"dw-input-number",20),i.\u0275\u0275listener("ngModelChange",function(t){return i.\u0275\u0275restoreView(e),i.\u0275\u0275nextContext().$implicit.condition1.filterTo=t}),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd()}if(2&e){const e=i.\u0275\u0275nextContext().$implicit;i.\u0275\u0275advance(2),i.\u0275\u0275property("ngModel",e.condition1.filterTo)}}function tt(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"label",30),i.\u0275\u0275text(1),i.\u0275\u0275pipe(2,"translate"),i.\u0275\u0275elementEnd()),2&e){const e=t.$implicit;i.\u0275\u0275property("dwValue",e),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",i.\u0275\u0275pipeBind1(2,2,"dw-table-config-"+e)," ")}}function nt(e,t){if(1&e&&(i.\u0275\u0275element(0,"dw-option",25),i.\u0275\u0275pipe(1,"translate")),2&e){const e=i.\u0275\u0275nextContext().$implicit;i.\u0275\u0275property("dwValue",e.value)("dwLabel",i.\u0275\u0275pipeBind1(1,2,"dw-table-config-"+e.value))}}function it(e,t){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275template(1,nt,2,4,"dw-option",24),i.\u0275\u0275elementContainerEnd()),2&e){const e=t.$implicit;i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",e.supported.indexOf("number")>=0)}}function rt(e,t){if(1&e){const e=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"div",19),i.\u0275\u0275elementStart(2,"dw-input-number",20),i.\u0275\u0275listener("ngModelChange",function(t){return i.\u0275\u0275restoreView(e),i.\u0275\u0275nextContext(2).$implicit.condition2.filterTo=t}),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd()}if(2&e){const e=i.\u0275\u0275nextContext(2).$implicit;i.\u0275\u0275advance(2),i.\u0275\u0275property("ngModel",e.condition2.filterTo)}}function at(e,t){if(1&e){const e=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"div",19),i.\u0275\u0275elementStart(2,"dw-radio-group",20),i.\u0275\u0275listener("ngModelChange",function(t){return i.\u0275\u0275restoreView(e),i.\u0275\u0275nextContext().$implicit.operator=t}),i.\u0275\u0275template(3,tt,3,4,"label",29),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(4,"div",19),i.\u0275\u0275elementStart(5,"dw-select",20),i.\u0275\u0275listener("ngModelChange",function(t){return i.\u0275\u0275restoreView(e),i.\u0275\u0275nextContext().$implicit.condition2.options=t}),i.\u0275\u0275template(6,it,2,1,"ng-container",21),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(7,"div",19),i.\u0275\u0275elementStart(8,"dw-input-number",20),i.\u0275\u0275listener("ngModelChange",function(t){return i.\u0275\u0275restoreView(e),i.\u0275\u0275nextContext().$implicit.condition2.filter=t}),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(9,rt,3,1,"ng-container",23),i.\u0275\u0275elementContainerEnd()}if(2&e){const e=i.\u0275\u0275nextContext().$implicit,t=i.\u0275\u0275nextContext();i.\u0275\u0275advance(2),i.\u0275\u0275property("ngModel",e.operator),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",t.dwFilterOperator),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngModel",e.condition2.options),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",t.dwFilterOptions),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngModel",e.condition2.filter),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf","inRange"===e.condition2.options)}}function ot(e,t){if(1&e){const e=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"div",18),i.\u0275\u0275elementStart(1,"div",19),i.\u0275\u0275elementStart(2,"dw-select",20),i.\u0275\u0275listener("ngModelChange",function(t){return i.\u0275\u0275restoreView(e).$implicit.condition1.options=t}),i.\u0275\u0275template(3,Ye,2,1,"ng-container",21),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(4,"div",19),i.\u0275\u0275elementStart(5,"dw-input-number",20),i.\u0275\u0275listener("ngModelChange",function(t){return i.\u0275\u0275restoreView(e).$implicit.condition1.filter=t}),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(6,et,3,1,"ng-container",23),i.\u0275\u0275template(7,at,10,6,"ng-container",23),i.\u0275\u0275elementEnd()}if(2&e){const e=t.$implicit,n=i.\u0275\u0275nextContext();i.\u0275\u0275advance(2),i.\u0275\u0275property("ngModel",e.condition1.options),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",n.dwFilterOptions),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngModel",e.condition1.filter),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf","inRange"===e.condition1.options),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf","inRange"!==e.condition1.options&&""!==e.condition1.filter&&null!==e.condition1.filter||"inRange"===e.condition1.options&&""!==e.condition1.filter&&null!==e.condition1.filter&&""!==e.condition1.filterTo&&null!==e.condition1.filterTo)}}const lt=function(e,t,n){return{$implicit:e,filter:t,filterVisiable:n}};let dt=(()=>{class e{constructor(){}saveTableConfig(e){return(0,l.of)(e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=i.\u0275\u0275defineInjectable({factory:function(){return new e},token:e,providedIn:"root"}),e})(),st=(()=>{class e{constructor(e){this.http=e}getTableConfig(e,t){const n={tableId:e};return t&&Object.assign(n,{userId:t}),this.http.get("restful/service/DWSys/CustomColumn",{params:n}).pipe((0,d.map)(e=>e.data))}saveTableConfig(e,t,n){const i={tableId:e,config:t};return n&&Object.assign(i,{userId:n}),this.http.post("restful/service/DWSys/CustomColumn",{param:i})}deleteTableConfig(e,t){const n={tableId:e};return t&&Object.assign(n,{userId:t}),this.http.delete("restful/service/DWSys/CustomColumn",{body:n})}saveTenantConfig(e,t){return this.http.post("restful/service/DWSys/CustomColumn/Default",{param:{tableId:e,config:t}})}deleteTenantConfig(e){return this.http.delete("restful/service/DWSys/CustomColumn/Default",{body:{tableId:e}})}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(p.DwDapHttpClient))},e.\u0275prov=i.\u0275\u0275defineInjectable({factory:function(){return new e(i.\u0275\u0275inject(p.DwDapHttpClient))},token:e,providedIn:"root"}),e})(),ct=(()=>{class e{constructor(e,t){this.dwTableConfigRepository=e,this.dwTableConfigExtraService=t,this.tableConfig=null,this.isGetConfig=!1,this.dwTableId=null,this.columnNameMap=new Map,this.dragSubject=new l.Subject,this.resizeSubject=new l.Subject,this.dragDisabledSubject=new l.Subject,this.columnConfigSubject=new l.BehaviorSubject(null),this.deleteConfigSubject=new l.Subject,this.configSubject=new l.Subject,this.visibleSubject=new l.Subject,this.filterSubject=new l.Subject,this.floatingFilterSubject=new l.Subject}get dragSubject$(){return this.dragSubject.asObservable().pipe((0,d.filter)(e=>null!==e))}get resizeSubject$(){return this.resizeSubject.asObservable().pipe((0,d.filter)(e=>null!==e))}get dragDisabledSubject$(){return this.dragDisabledSubject.asObservable().pipe((0,d.filter)(e=>null!==e))}get columnConfigSubject$(){return this.columnConfigSubject.asObservable().pipe((0,d.filter)(e=>null!==e))}get deleteConfigSubject$(){return this.deleteConfigSubject.asObservable().pipe((0,d.filter)(e=>null!==e))}get visibleSubject$(){return this.visibleSubject.asObservable().pipe((0,d.filter)(e=>null!==e))}get filterSubject$(){return this.filterSubject.asObservable().pipe((0,d.filter)(e=>null!==e))}get floatingFilterSubject$(){return this.floatingFilterSubject.asObservable().pipe((0,d.filter)(e=>null!==e))}dragInfo(e){this.dragSubject.next(e)}resize(e){this.resizeSubject.next(e)}dragDisabled(e){this.dragDisabledSubject.next(e)}columnInfo(e,t){this.columnConfigSubject.next({event:e,tableConfig:t})}deleteConfig(e){this.deleteConfigSubject.next(e)}visibleChange(e){this.visibleSubject.next(e)}filterChange(e){this.filterSubject.next(e)}floatingFilterChange(e){this.floatingFilterSubject.next(e)}setDwTableId(e){this.dwTableId=e}getDwTableId(){return this.dwTableId}setColumnConfig(e){this.tableConfig.hasOwnProperty("dwColumnConfig")||(this.tableConfig.dwColumnConfig=[]),this.tableConfig.dwColumnConfig=Object.assign([],e)}getTableConfig(e){return this.tableConfig?(0,l.of)(this.tableConfig):(this.isGetConfig||(this.isGetConfig=!0,this.getConfig(e).subscribe(e=>{this.isGetConfig=!1,this.configSubject.next(e)})),this.configSubject.asObservable())}getConfig(e){return this.dwTableConfigRepository.getTableConfig(this.dwTableId,e).pipe((0,d.map)(e=>{let t={};const n=Object.assign(e.default_config,e.user_config);return n.hasOwnProperty("config")&&n.config.hasOwnProperty("dwColumnConfig")&&n.config.dwColumnConfig.length>0&&(n.config.dwColumnConfig.sort((e,t)=>e.index-t.index),t=n.config),t}),(0,d.tap)(e=>{this.columnInfo("getConfig",e),this.tableConfig=Object.assign({},e)}))}saveTableConfig(e,t){return this.dwTableConfigExtraService.saveTableConfig(this.tableConfig).pipe((0,d.switchMap)(n=>(this.columnInfo(e,n),this.dwTableConfigRepository.saveTableConfig(this.dwTableId,n,t))))}saveTableConfigImmediately(e,t){this.saveTableConfig(e,t).subscribe()}deleteTableConfig(e){return this.tableConfig=null,this.dwTableConfigRepository.deleteTableConfig(this.dwTableId,e)}getTenantConfig(){return this.dwTableConfigRepository.getTableConfig(this.dwTableId).pipe((0,d.map)(e=>{let t={};return e.default_config.hasOwnProperty("config")&&(t=e.default_config.config),t}))}saveTenantConfig(e){return this.dwTableConfigRepository.saveTenantConfig(this.dwTableId,{dwColumnConfig:e})}deleteTenantConfig(){return this.dwTableConfigRepository.deleteTenantConfig(this.dwTableId)}getColumnWidth(e){if(!e||!this.tableConfig||!this.tableConfig.dwColumnConfig||0===this.tableConfig.dwColumnConfig.length)return null;const t=this.tableConfig.dwColumnConfig.findIndex(t=>t.dwColumnId===e);return-1===t?null:this.tableConfig.dwColumnConfig[t].width}setColumnWidth(e,t){if(!e||!this.tableConfig||!this.tableConfig.dwColumnConfig||0===this.tableConfig.dwColumnConfig.length)return;const n=this.tableConfig.dwColumnConfig.findIndex(t=>t.dwColumnId===e);-1!==n&&(this.tableConfig.dwColumnConfig[n].width=t,this.saveTableConfigImmediately("widthChange"))}setColumnSort(e,t){if(!e||!this.tableConfig||!this.tableConfig.dwColumnConfig||0===this.tableConfig.dwColumnConfig.length)return;const n=this.tableConfig.dwColumnConfig.findIndex(t=>t.dwColumnId===e);-1!==n&&(this.tableConfig.dwColumnConfig[n].sort=t,this.saveTableConfigImmediately("sortChange"))}getColumnSort(e){const t=void 0;if(!e||!this.tableConfig||!this.tableConfig.dwColumnConfig||0===this.tableConfig.dwColumnConfig.length)return t;const n=this.tableConfig.dwColumnConfig.findIndex(t=>t.dwColumnId===e);return-1===n?t:this.tableConfig.dwColumnConfig[n].sort}setColumnVisible(e,t){if(!e||!this.tableConfig||!this.tableConfig.dwColumnConfig||0===this.tableConfig.dwColumnConfig.length)return;const n=this.tableConfig.dwColumnConfig.findIndex(t=>t.dwColumnId===e);-1!==n&&(this.tableConfig.dwColumnConfig[n].visible=t)}getColumnVisible(e){let t=!0;if(!e||!this.tableConfig||!this.tableConfig.dwColumnConfig||0===this.tableConfig.dwColumnConfig.length)return t;const n=this.tableConfig.dwColumnConfig.findIndex(t=>t.dwColumnId===e);return-1===n||(t=this.tableConfig.dwColumnConfig[n].visible),t}getVisibleColumns(){if(!this.tableConfig||!this.tableConfig.dwColumnConfig||0===this.tableConfig.dwColumnConfig.length)return[];const e=[];return this.tableConfig.dwColumnConfig.forEach(t=>{t.visible&&e.push(t)}),e}setColumnName(e,t){this.columnNameMap.set(e,t)}getColumnName(e){return this.columnNameMap.get(e)}setColumnFilter(e,t){if(!e||!this.tableConfig||!this.tableConfig.dwColumnConfig||0===this.tableConfig.dwColumnConfig.length)return;const n=this.tableConfig.dwColumnConfig.findIndex(t=>t.dwColumnId===e);-1!==n&&(this.tableConfig.dwColumnConfig[n].filter=t,this.saveTableConfigImmediately("filterChange"))}getColumnFilter(e){let t=null;if(!e||!this.tableConfig||!this.tableConfig.dwColumnConfig||0===this.tableConfig.dwColumnConfig.length)return t;const n=this.tableConfig.dwColumnConfig.findIndex(t=>t.dwColumnId===e);return-1===n||(t=this.tableConfig.dwColumnConfig[n].filter),t}setFloatingFilter(e){!this.tableConfig||(this.tableConfig.dwFloatingFilter=e,this.saveTableConfigImmediately("floatingFilterChange"))}getFloatingFilter(){let e=!1;return!this.tableConfig||!this.tableConfig.hasOwnProperty("dwFloatingFilter")||(e=this.tableConfig.dwFloatingFilter),e}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(st),i.\u0275\u0275inject(dt))},e.\u0275prov=i.\u0275\u0275defineInjectable({factory:function(){return new e(i.\u0275\u0275inject(st),i.\u0275\u0275inject(dt))},token:e,providedIn:"root"}),e})(),mt=(()=>{class e{constructor(e,t,n){this.tableStyleService=e,this.dndService=t,this.elementRef=n,this.thPureArray=[],this.thColumnIdArray=[],this.thNoColumnIdArray=[],this.thOriColumnIdArray=[],this.dragableRef=[],this.elemDragRefMap=new Map,this.dropListRef=this.dndService.createDropList(this.elementRef),this.dropListRef.withOrientation("horizontal"),this.dropListRef.lockAxis="x"}setThNoColumnWidth(e,t){const n=this.thNoColumnIdArray.findIndex(t=>t.template===e);this.thNoColumnIdArray[n].width=t,setTimeout(()=>{this.setTableWidthConfig()})}setThColumnWidth(e,t,n,i,r,a){const o=this.thColumnIdArray.findIndex(t=>t.dwColumnId===e);this.thColumnIdArray[o].width=t,this.thColumnIdArray[o].dwDragDrop=n,this.thColumnIdArray[o].dwColumnFilter=i,this.thColumnIdArray[o].dwFilterList=r,this.thColumnIdArray[o].dwFilterMultiple=a,setTimeout(()=>{this.setTableWidthConfig()})}setThPureWidth(e,t){this.thPureArray.push({dwColumnId:e,width:t}),setTimeout(()=>{this.setTableWidthConfig()})}appendThIdView(e,t){const n={dwColumnId:e,template:t};this.thColumnIdArray.push(n),this.thOriColumnIdArray.push(n)}appendThNoIdView(e,t){this.thNoColumnIdArray.push({dwColumnId:e,template:t})}appendThElement(e){const t=this.dndService.createDrag(e);this.dragableRef.push(t),this.elemDragRefMap.set(e,t),this.dropListRef.withItems(this.dragableRef)}removeThElement(e){const t=this.elemDragRefMap.get(e),n=this.dragableRef.indexOf(t);this.dragableRef.splice(n,1),this.dropListRef.withItems(this.dragableRef),this.elemDragRefMap.delete(e)}setTableWidthConfig(){}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(s.DwTableStyleService),i.\u0275\u0275directiveInject(r.DragDrop),i.\u0275\u0275directiveInject(i.ElementRef))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["dw-drop-columns-base"]],decls:0,vars:0,template:function(e,t){},encapsulation:2}),e})(),pt=(()=>{class e{constructor(e,t){this.dwDateFormat=e,this.dwTimeFormat=t,this.dwFilterMultiple=!1,this.dwFilterMultipleMode="default",this.dwFilterInfo={condition1:{options:"equals",filter:null,filterTo:null},condition2:{options:"equals",filter:null,filterTo:null},operator:"AND",filterType:"textFilter"}}onInit(){this.dwColumnFilter||(this.dwColumnFilter="textFilter"),this.dwFilterInfo.filterType=this.dwColumnFilter,"textFilter"===this.dwColumnFilter&&(this.dwFilterInfo.condition1.options="contains",this.dwFilterInfo.condition2.options="contains"),null==this.dwFilterMultiple&&(this.dwFilterMultiple=!0),!0===this.dwFilterMultiple&&(this.dwFilterMultipleMode="multiple")}transStringToDate(e){const t=JSON.parse(JSON.stringify(e));return"dateFilter"!==this.dwColumnFilter||(e.condition1.filter&&"string"==typeof e.condition1.filter&&(t.condition1.filter=new Date(e.condition1.filter)),e.condition1.filterTo&&"string"==typeof e.condition1.filterTo&&(t.condition1.filterTo=new Date(e.condition1.filterTo)),e.condition2.filter&&"string"==typeof e.condition2.filter&&(t.condition2.filter=new Date(e.condition2.filter)),e.condition2.filterTo&&"string"==typeof e.condition2.filterTo&&(t.condition2.filterTo=new Date(e.condition2.filterTo))),t}transDateToString(e){const t=JSON.parse(JSON.stringify(e));if("dateFilter"!==this.dwColumnFilter)return t;const n=this.dwDateFormat.concat(" ",this.dwTimeFormat);return e.condition1.filter&&e.condition1.filter instanceof Date&&(t.condition1.filter=g()(e.condition1.filter,n)),e.condition1.filterTo&&e.condition1.filterTo instanceof Date&&(t.condition1.filterTo=g()(e.condition1.filterTo,n)),e.condition2.filter&&e.condition2.filter instanceof Date&&(t.condition2.filter=g()(e.condition2.filter,n)),e.condition2.filterTo&&e.condition2.filterTo instanceof Date&&(t.condition2.filterTo=g()(e.condition2.filterTo,n)),t}syncFilterToModel(e,t=!0){if(!e.tableConfig||!e.tableConfig.hasOwnProperty("dwColumnConfig")||0===e.tableConfig.dwColumnConfig.length)return;const n=JSON.parse(JSON.stringify(e.tableConfig)).dwColumnConfig.find(e=>e.dwColumnId===this.dwColumnId);if(!n||!n.filter)return;const i=this.transStringToDate(n.filter);this.dwFilterInfo.condition1.filter=i.condition1.filter,this.dwFilterInfo.condition1.filterTo=i.condition1.filterTo,this.dwFilterInfo.condition2.filter=i.condition2.filter,this.dwFilterInfo.condition2.filterTo=i.condition2.filterTo,!0===t&&(this.dwFilterInfo.condition1.options=i.condition1.options,this.dwFilterInfo.condition2.options=i.condition2.options),this.dwFilterInfo.operator=i.operator}checkEmpty(e){return null===e||""===e}resetEmptyArray(e){return e.condition1.filter&&Array.isArray(e.condition1.filter)&&0===e.condition1.filter.length&&(e.condition1.filter=null),e.condition1.filterTo&&Array.isArray(e.condition1.filterTo)&&0===e.condition1.filterTo.length&&(e.condition1.filterTo=null),e.condition2.filter&&Array.isArray(e.condition2.filter)&&0===e.condition2.filter.length&&(e.condition2.filter=null),e.condition2.filterTo&&Array.isArray(e.condition2.filterTo)&&0===e.condition2.filterTo.length&&(e.condition2.filterTo=null),e}validColumnFilter(e){"inRange"===e.condition1.options&&(this.checkEmpty(e.condition1.filter)||this.checkEmpty(e.condition1.filterTo))&&(e.condition1.filter=null,e.condition1.filterTo=null,e.condition2.filter=null,e.condition2.filterTo=null),this.checkEmpty(e.condition1.filter)&&(e.condition1.filter=null,e.condition1.filterTo=null,e.condition2.filter=null,e.condition2.filterTo=null),"inRange"!==e.condition1.options&&(e.condition1.filterTo=null),"inRange"===e.condition2.options&&(this.checkEmpty(e.condition2.filter)||this.checkEmpty(e.condition2.filterTo))&&(e.condition2.filter=null,e.condition2.filterTo=null),this.checkEmpty(e.condition2.filter)&&(e.condition2.filter=null,e.condition2.filterTo=null),"inRange"!==e.condition2.options&&(e.condition2.filterTo=null)}cloneObject(e){const t={};for(const n in e)t[n]=null!==e[n]&&"object"==typeof e[n]?Array.isArray(e[n])?e[n]:Object.keys(e[n]).length>0?this.cloneObject(e[n]):e[n]:e[n];return t}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(u.APP_DATE_FORMAT),i.\u0275\u0275directiveInject(u.APP_TIME_FORMAT))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["dw-filter-base"]],decls:0,vars:0,template:function(e,t){},encapsulation:2}),e})(),ut=(()=>{class e extends pt{constructor(e,t,n,i,r){super(i,r),this.elementRef=e,this.dwTableConfigService=t,this.translateService=n,this.dwDateFormat=i,this.dwTimeFormat=r,this.timer=null,this.subscription=new l.Subscription,this.strCondition=""}ngOnInit(){super.onInit(),this.subscription.add(this.dwTableConfigService.columnConfigSubject$.subscribe(e=>{this.syncFilterToModel(e,!1)}))}ngOnDestroy(){this.destroy()}destroy(){this.subscription.unsubscribe()}modelChange(){this.timer&&clearTimeout(this.timer),this.timer=setTimeout(()=>{this.emitFloatingFilterChange();const e=this.transDateToString(this.dwFilterInfo);this.resetEmptyArray(e),this.validColumnFilter(e),this.dwTableConfigService.setColumnFilter(this.dwColumnId,e),this.timer=null},500)}clear(){this.dwFilterInfo.condition1.filter=null,this.emitFloatingFilterChange(),this.dwTableConfigService.setColumnFilter(this.dwColumnId,this.dwFilterInfo)}emitFloatingFilterChange(){this.dwTableConfigService.floatingFilterChange({dwColumnId:this.dwColumnId,dwFilterInfo:this.dwFilterInfo})}canEditModel(e,t){const n=this.transDateToString(e),i=[],r=[];if(this.strCondition="",!this.checkEmpty(e.condition1.filter))if("selectFilter"===n.filterType){let r=[];r=Array.isArray(e.condition1.filter)&&Array.isArray(t)?this.getSelectLabel(n.condition1.filter,t):this.getSelectLabel([n.condition1.filter],t),i.push(r)}else i.push(n.condition1.filter);if(this.checkEmpty(e.condition1.filterTo)||i.push(n.condition1.filterTo),!this.checkEmpty(e.condition2.filter))if("selectFilter"===n.filterType){let i=[];i=Array.isArray(e.condition2.filter)&&Array.isArray(t)?this.getSelectLabel(n.condition2.filter,t):this.getSelectLabel([n.condition2.filter],t),r.push(i)}else r.push(n.condition2.filter);if(this.checkEmpty(e.condition2.filterTo)||r.push(n.condition2.filterTo),i.length<=1&&0===r.length)return!0;if(this.strCondition=i.join("-"),r.length>0){const e=this.translateService.instant("dw-table-config-"+n.operator);this.strCondition+=" "+e+" "+r.join("-")}return!1}getSelectLabel(e,t){const n=[];return!Array.isArray(t)||0===t.length||t.forEach(t=>{e.findIndex(e=>e===t.value)>=0&&n.push(this.translateService.instant(t.label))}),n}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(i.ElementRef),i.\u0275\u0275directiveInject(ct),i.\u0275\u0275directiveInject(m.TranslateService),i.\u0275\u0275directiveInject(u.APP_DATE_FORMAT),i.\u0275\u0275directiveInject(u.APP_TIME_FORMAT))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["dw-filter-input"]],features:[i.\u0275\u0275InheritDefinitionFeature],decls:14,vars:4,consts:[[1,"filter-input-block"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],["dwSelectTpl",""],["dwDateTpl",""],["dwTextTpl",""],["dwNumberTpl",""],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"dwFilterTemplate"],[1,""],[4,"ngIf"],["dwAllowClear","","dwShowSearch","",3,"ngModel","dwMode","ngModelChange"],[3,"dwLabel","dwValue",4,"ngFor","ngForOf"],[3,"dwLabel","dwValue"],["type","text","dw-input","",3,"value","disabled"],[3,"ngModel","ngModelChange"],[3,"dwSuffix"],["type","text","dw-input","",3,"ngModel","ngModelChange"],["dwInputClearTpl",""],["dw-icon","","class","ant-input-clear-icon","dwTheme","fill","dwType","close-circle",3,"click",4,"ngIf"],["dw-icon","","dwTheme","fill","dwType","close-circle",1,"ant-input-clear-icon",3,"click"]],template:function(e,t){1&e&&(i.\u0275\u0275elementStart(0,"div",0),i.\u0275\u0275elementContainerStart(1,1),i.\u0275\u0275template(2,M,2,4,"ng-container",2),i.\u0275\u0275template(3,k,2,4,"ng-container",2),i.\u0275\u0275template(4,V,2,4,"ng-container",2),i.\u0275\u0275template(5,L,2,4,"ng-container",3),i.\u0275\u0275elementContainerEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(6,$,4,2,"ng-template",null,4,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275template(8,B,4,2,"ng-template",null,5,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275template(10,H,4,2,"ng-template",null,6,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275template(12,K,4,2,"ng-template",null,7,i.\u0275\u0275templateRefExtractor)),2&e&&(i.\u0275\u0275advance(1),i.\u0275\u0275property("ngSwitch",t.dwColumnFilter),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngSwitchCase","selectFilter"),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngSwitchCase","numberFilter"),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngSwitchCase","dateFilter"))},directives:[w.NgSwitch,w.NgSwitchCase,w.NgSwitchDefault,w.NgTemplateOutlet,w.NgIf,C.DwSelectComponent,v.NgControlStatus,v.NgModel,w.NgForOf,C.DwOptionComponent,b.DwInputDirective,S.DwDatePickerComponent,b.DwInputGroupComponent,b.DwInputGroupWhitSuffixOrPrefixDirective,v.DefaultValueAccessor,x.DwIconDirective,_.DwInputNumberComponent],pipes:[m.TranslatePipe],styles:[".filter-input-block{display:block;max-width:70%;margin:0 auto}span.ant-input-suffix{width:14px;cursor:text}i.anticon.ant-input-clear-icon.anticon-close-circle{cursor:pointer}dw-input-group.ant-input-affix-wrapper{cursor:text}\n"],encapsulation:2}),e})();const ht=[new a.ConnectionPositionPair({originX:"start",originY:"top"},{overlayX:"start",overlayY:"top"}),new a.ConnectionPositionPair({originX:"start",originY:"top"},{overlayX:"start",overlayY:"bottom"}),new a.ConnectionPositionPair({originX:"start",originY:"top"},{overlayX:"end",overlayY:"bottom"}),new a.ConnectionPositionPair({originX:"start",originY:"top"},{overlayX:"end",overlayY:"top"})];let gt=(()=>{class e extends mt{constructor(e,t,n,i,r,a,o,d,s,c,m){super(t,n,i),this.dwTableConfigService=e,this.tableStyleService=t,this.dndService=n,this.elementRef=i,this.contextMenuService=r,this.translateService=a,this.overlay=o,this.renderer=d,this.vcRef=s,this.cfResolver=c,this.cdr=m,this.dwColumnConfig=[],this.dwColumnConfig$=new l.Subject,this.dwFloatingFilter=null,this.showFloatingFilter=!1,this.destroy$=new l.Subject,this.overlayRef=null,this.isVisibleChange=!1,this.floatingElement=null,this.floatingComponentRef=[]}ngOnInit(){this.dwTableConfigService.getDwTableId()?(this.dwTableConfigService.dragSubject$.pipe((0,d.takeUntil)(this.destroy$)).subscribe(e=>{if(!this.dwTableConfigService.getDwTableId())return;this.moveView(e.previousIndex,e.currentIndex);const t=this.getViewOrder();this.dwTableConfigService.setColumnConfig(t),this.dwTableConfigService.saveTableConfigImmediately("columnChange"),this.setTableWidthConfig()}),this.dwTableConfigService.resizeSubject$.pipe((0,d.takeUntil)(this.destroy$)).subscribe(e=>{!this.dwTableConfigService.getDwTableId()||this.setTableWidthConfig()}),this.dwTableConfigService.dragDisabledSubject$.pipe((0,d.takeUntil)(this.destroy$)).subscribe(e=>{this.dropListRef.disabled=e}),this.dropListRef.dropped.pipe((0,d.takeUntil)(this.destroy$)).subscribe(e=>{!this.dwTableConfigService.getDwTableId()||this.dwTableConfigService.dragInfo(e)}),this.elementRef.nativeElement.addEventListener("contextmenu",this.onContextmenu.bind(this))):console.warn(this.translateService.instant("dw-table-config-noTableId"))}ngAfterViewInit(){this.initView()}ngOnDestroy(){this.elementRef&&this.elementRef.nativeElement.removeEventListener("contextmenu",this.onContextmenu.bind(this)),this.destroy$.next(),this.destroy$.complete()}onContextmenu(e){this.isVisibleChange=!1,this.showFloatingFilter=this.visiableFloatingFilter(),this.dwFloatingFilter=this.dwTableConfigService.getFloatingFilter(),e instanceof MouseEvent&&e.preventDefault(),this.getRightMenu(),this.createRightMenu(e)}getRightMenu(){this.contextmenuSubscription=this.dwTableConfigService.getTableConfig().subscribe(e=>{!e&&!e.dwColumnConfig&&0===e.dwColumnConfig.length||(this.dwColumnConfig=JSON.parse(JSON.stringify(e.dwColumnConfig)),this.dwColumnConfig.forEach(e=>{e.columnName=this.dwTableConfigService.getColumnName(e.dwColumnId)}),this.dwColumnConfig$.next(this.dwColumnConfig),this.contextmenuSubscription&&this.contextmenuSubscription.unsubscribe())})}createRightMenu(e){const{x:t,y:n}=e,i=this.overlay.position().flexibleConnectedTo({x:t,y:n}).withPositions(ht).withFlexibleDimensions(!1).withTransformOriginOn(".ant-dropdown");this.overlayRef=this.overlay.create({positionStrategy:i,hasBackdrop:!0,disposeOnNavigation:!0,panelClass:"dw-drop-columns-cm-panel",scrollStrategy:this.overlay.scrollStrategies.close()}),this.overlayRef.attach(new o.TemplatePortal(this.rightMenu.templateRef,this.rightMenu.viewContainerRef)),this.overlayRef.backdropElement.addEventListener("contextmenu",this.onBackdropContextmenu.bind(this)),this.backdropSubscription=this.overlayRef.backdropClick().pipe().subscribe(()=>{this.closeOverlay()})}onBackdropContextmenu(e){e.preventDefault(),this.closeOverlay()}closeOverlay(){if(this.overlayRef.backdropElement&&this.overlayRef.backdropElement.removeEventListener("contextmenu",this.onContextmenu.bind(this)),this.backdropSubscription.unsubscribe(),this.overlayRef.detach(),this.overlayRef.dispose(),this.overlayRef=null,!this.isVisibleChange)return;const e=this.getViewOrder();this.dwTableConfigService.setColumnConfig(e),this.dwTableConfigService.saveTableConfigImmediately("visibleChange")}createView(){this.dwDropColumnsContent.length>0&&this.dwDropColumnsContent.clear();const e=this.thColumnIdArray.concat(this.thNoColumnIdArray),t=[];e.forEach((e,n)=>{const i=this.dwTableConfigService.getColumnVisible(e.dwColumnId);e.template&&(this.dwDropColumnsContent.createEmbeddedView(e.template),i||t.push(n))}),setTimeout(()=>{if(t.reverse().forEach(e=>{this.dwDropColumnsContent.remove(e)}),0===this.dwTableConfigService.getVisibleColumns().length)this.emptyDataColumnsViewRef=this.dwDropColumnsContent.createEmbeddedView(this.emptyDataColumns),this.cdr.markForCheck();else{const e=this.dwDropColumnsContent.indexOf(this.emptyDataColumnsViewRef);e>-1&&this.dwDropColumnsContent.remove(e)}})}moveView(e,t){if(0===this.dwDropColumnsContent.length)return;const n=[];this.thColumnIdArray.forEach((e,t)=>{void 0!==e.dwDragDrop&&this.dwTableConfigService.getColumnVisible(e.dwColumnId)&&n.push(e)}),(0,r.moveItemInArray)(n,e,t);const i=[...this.thColumnIdArray];for(let r=0;r<i.length;r++)void 0!==i[r].dwDragDrop&&this.dwTableConfigService.getColumnVisible(i[r].dwColumnId)&&n.length&&(i[r]=n.shift());this.thColumnIdArray=i,setTimeout(()=>{this.createView(),this.createFloatingFilter()})}initView(){!this.dwTableConfigService.getDwTableId()||(this.dropListRef&&this.dropListRef.withScrollableParents(Array.from(document.querySelectorAll(".ant-table-content"))),this.initViewSubscription=this.dwTableConfigService.getTableConfig().subscribe(e=>{e&&e.dwColumnConfig&&e.dwColumnConfig.length>0?e.dwColumnConfig.forEach((e,t)=>{const n=this.thColumnIdArray.findIndex(t=>t.dwColumnId===e.dwColumnId);-1!==n&&(!this.thColumnIdArray[t]||(0,r.moveItemInArray)(this.thColumnIdArray,n,t))}):this.thColumnIdArray=this.thOriColumnIdArray;const t=this.getViewOrder();this.dwTableConfigService.setColumnConfig(t),setTimeout(()=>{this.createView(),this.createFloatingFilter()}),this.initViewSubscription&&this.initViewSubscription.unsubscribe()}))}getViewOrder(){const e=[];return this.thColumnIdArray.forEach((t,n)=>{const i=this.dwTableConfigService.getColumnWidth(t.dwColumnId)||t.width,r=this.dwTableConfigService.getColumnSort(t.dwColumnId),a=this.dwTableConfigService.getColumnVisible(t.dwColumnId),o=this.dwTableConfigService.getColumnFilter(t.dwColumnId);e.push({dwColumnId:t.dwColumnId,width:i,index:n,sort:r,visible:a,filter:o})}),e}setTableWidthConfig(){const e=this.thPureArray.concat(this.thColumnIdArray,this.thNoColumnIdArray),t=[];e.filter(e=>this.dwTableConfigService.getColumnVisible(e.dwColumnId)).forEach((e,n)=>{if(this.dwTableConfigService.getColumnVisible(e.dwColumnId)){const n=this.dwTableConfigService.getColumnWidth(e.dwColumnId),i=Number.isInteger(n)?n+"px":e.width||"auto";t.push(i)}}),this.tableStyleService.setTableWidthConfig(t)}setViewColumnWidth(e,t,n){if(0===e.length||!t)return;const i=e.findIndex(e=>e.dwColumnId===t);return e[i].width=n,e}deleteConfig(){this.dwTableConfigService.deleteTableConfig().pipe((0,d.takeUntil)(this.destroy$)).subscribe(()=>{this.initView(),this.dwTableConfigService.deleteConfig(this.thOriColumnIdArray),this.closeOverlay()})}saveTenantConfig(){const e=this.getViewOrder();this.dwTableConfigService.saveTenantConfig(e).pipe((0,d.takeUntil)(this.destroy$)).subscribe(()=>{this.closeOverlay()})}deleteTenantConfig(){this.dwTableConfigService.deleteTenantConfig().pipe((0,d.takeUntil)(this.destroy$)).subscribe(()=>{this.initView(),this.dwTableConfigService.deleteConfig(this.thOriColumnIdArray),this.closeOverlay()})}changeVisible(e,t){t.preventDefault(),t.stopPropagation();let n=0;this.dwColumnConfig.forEach(e=>{e.visible&&n++}),(1!==n||!e.visible)&&(this.isVisibleChange=!0,e.visible=!e.visible,this.dwTableConfigService.setColumnVisible(e.dwColumnId,e.visible),this.initView(),this.dwTableConfigService.visibleChange(!0))}createFloatingFilter(){this.removeFloatingFilter(),!0===this.dwTableConfigService.getFloatingFilter()&&setTimeout(()=>{const e=this.thPureArray.concat(this.thColumnIdArray,this.thNoColumnIdArray);0!==e.filter(e=>void 0!==e.dwColumnFilter&&this.dwTableConfigService.getColumnVisible(e.dwColumnId)).length&&(this.floatingElement=document.createElement("tr"),this.elementRef.nativeElement.parentElement.appendChild(this.floatingElement),e.forEach(e=>{if(!0!==this.dwTableConfigService.getColumnVisible(e.dwColumnId))return;const t=document.createElement("th"),n=document.createElement("div");if(void 0===e.dwColumnFilter)this.renderer.appendChild(t,n);else{const n=this.cfResolver.resolveComponentFactory(ut),i=this.vcRef.createComponent(n);this.floatingComponentRef.push(i),this.renderer.appendChild(t,i.injector.get(ut).elementRef.nativeElement);const r=i.instance;r.dwColumnId=e.dwColumnId,r.dwColumnFilter=e.dwColumnFilter,r.dwFilterList=e.dwFilterList,r.dwFilterMultiple=e.dwFilterMultiple}this.renderer.setStyle(t,"background","#fafafa"),this.renderer.appendChild(this.floatingElement,t)}))})}removeFloatingFilter(){if(null!==this.floatingElement){this.elementRef.nativeElement.parentElement.removeChild(this.floatingElement),this.floatingElement=null;const e=this.floatingComponentRef.length;if(e>0)for(let t=e-1;t>=0;t-=1)this.floatingComponentRef[t].instance.destroy(),this.floatingComponentRef.splice(t,1)}}changeFloatingFilter(){this.dwFloatingFilter=!this.dwFloatingFilter,this.dwTableConfigService.setFloatingFilter(this.dwFloatingFilter),this.createFloatingFilter(),this.closeOverlay()}visiableFloatingFilter(){let e=!1;return this.thPureArray.concat(this.thColumnIdArray,this.thNoColumnIdArray).filter(e=>e.hasOwnProperty("dwColumnFilter")&&void 0!==e.dwColumnFilter).length>0&&(e=!0),e}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(ct),i.\u0275\u0275directiveInject(s.DwTableStyleService),i.\u0275\u0275directiveInject(r.DragDrop),i.\u0275\u0275directiveInject(i.ElementRef),i.\u0275\u0275directiveInject(c.DwContextMenuService),i.\u0275\u0275directiveInject(m.TranslateService),i.\u0275\u0275directiveInject(a.Overlay),i.\u0275\u0275directiveInject(i.Renderer2),i.\u0275\u0275directiveInject(i.ViewContainerRef),i.\u0275\u0275directiveInject(i.ComponentFactoryResolver),i.\u0275\u0275directiveInject(i.ChangeDetectorRef))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["tr","dwDropColumns",""]],viewQuery:function(e,t){if(1&e&&(i.\u0275\u0275viewQuery(J,7,i.ViewContainerRef),i.\u0275\u0275viewQuery(Z,7),i.\u0275\u0275viewQuery(Y,7)),2&e){let e;i.\u0275\u0275queryRefresh(e=i.\u0275\u0275loadQuery())&&(t.dwDropColumnsContent=e.first),i.\u0275\u0275queryRefresh(e=i.\u0275\u0275loadQuery())&&(t.rightMenu=e.first),i.\u0275\u0275queryRefresh(e=i.\u0275\u0275loadQuery())&&(t.emptyDataColumns=e.first)}},features:[i.\u0275\u0275ProvidersFeature([{provide:mt,useExisting:(0,i.forwardRef)(()=>e)}]),i.\u0275\u0275InheritDefinitionFeature],attrs:ee,ngContentSelectors:le,decls:23,vars:13,consts:[["dwDropColumnsContent",""],["emptyDataColumns",""],["rightMenu","dwDropdownMenu"],["dw-menu","",1,"dw-dc-context-menu"],["dw-menu-item","",3,"click"],["translate",""],["dw-submenu","","dwMenuClassName","dw-dc-sub-context-menu",3,"dwTitle"],[1,"dw-visible-submenu"],["dw-menu-item","",4,"ngFor","ngForOf"],["dw-menu-item","","dwActionAuthorized","",3,"dwAuthorizedId","dwActionId","dwDefaultAuthorized","dwClick"],["dw-menu-item","",3,"click",4,"ngIf"],[1,"no-column-displayed"],["dw-menu-item",""],[3,"click"],[1,"dw-visible-submenu-item",3,"ngClass"],[4,"ngIf"]],template:function(e,t){1&e&&(i.\u0275\u0275projectionDef(),i.\u0275\u0275projection(0),i.\u0275\u0275elementContainer(1,null,0),i.\u0275\u0275template(3,te,3,3,"ng-template",null,1,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275elementStart(5,"dw-dropdown-menu",null,2),i.\u0275\u0275elementStart(7,"ul",3),i.\u0275\u0275elementStart(8,"li",4),i.\u0275\u0275listener("click",function(){return t.deleteConfig()}),i.\u0275\u0275elementStart(9,"span",5),i.\u0275\u0275text(10,"dw-table-config-userConfig-delete"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(11,"li",6),i.\u0275\u0275pipe(12,"translate"),i.\u0275\u0275elementStart(13,"ul",7),i.\u0275\u0275template(14,ie,4,4,"li",8),i.\u0275\u0275pipe(15,"async"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(16,"li",9),i.\u0275\u0275listener("dwClick",function(){return t.saveTenantConfig()}),i.\u0275\u0275elementStart(17,"span",5),i.\u0275\u0275text(18,"dw-table-config-tenantConfig-save"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(19,"li",9),i.\u0275\u0275listener("dwClick",function(){return t.deleteTenantConfig()}),i.\u0275\u0275elementStart(20,"span",5),i.\u0275\u0275text(21,"dw-table-config-tenantConfig-delete"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(22,oe,3,2,"li",10),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()),2&e&&(i.\u0275\u0275advance(11),i.\u0275\u0275property("dwTitle",i.\u0275\u0275pipeBind1(12,9,"dw-table-config-visibleChange")),i.\u0275\u0275advance(3),i.\u0275\u0275property("ngForOf",i.\u0275\u0275pipeBind1(15,11,t.dwColumnConfig$)),i.\u0275\u0275advance(2),i.\u0275\u0275property("dwAuthorizedId","dw-table-config")("dwActionId","save")("dwDefaultAuthorized","hidden"),i.\u0275\u0275advance(3),i.\u0275\u0275property("dwAuthorizedId","dw-table-config")("dwActionId","save")("dwDefaultAuthorized","hidden"),i.\u0275\u0275advance(3),i.\u0275\u0275property("ngIf",!0===t.showFloatingFilter))},directives:[c.DwDropdownMenuComponent,E.DwMenuDirective,E.DwMenuItemDirective,m.TranslateDirective,E.DwSubMenuComponent,w.NgForOf,I.DwActionAuthorizedDirective,w.NgIf,s.DwTableCellDirective,w.NgClass],pipes:[m.TranslatePipe,w.AsyncPipe],styles:['.ant-table-thead>tr>th:not(:last-child):not(.ant-table-selection-column):not(.ant-table-row-expand-icon-cell):not([colspan]):before{display:none}.ant-table-thead>tr>th:last-child .dw-resize-handler{display:none}.dw-resize-handler{width:8px;top:0;bottom:0;right:0;-webkit-user-select:none;-moz-user-select:none;user-select:none;position:absolute;cursor:col-resize}dw-resizer.active .dw-resize-handler-inner-box{width:2px;z-index:9;background:#c7c7c7}.ant-table-cell-fix-right .dw-resize-handler-inner-box{right:1px}.dw-resize-handler-inner-box{position:absolute;width:1px;height:60%;margin-top:12px;background:#e8e8e8;top:0;right:0;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:col-resize;display:block}th.dw-drag-drop-box.ant-table-cell{color:#000000de;box-sizing:border-box;font-size:14px;flex-grow:1;flex-basis:0}th.dw-drag-drop-box.ant-table-cell:not([dwshowfilter]):not([dwshowsort]){cursor:move}.cdk-drag-placeholder{opacity:0}.cdk-drag-preview{box-sizing:border-box;border-radius:4px;box-shadow:0 5px 5px -3px #0003,0 8px 10px 1px #00000024,0 3px 14px 2px #0000001f}.cdk-drag-animating{transition:transform .25s cubic-bezier(0,0,.2,1)}.dw-drag-drop-box.cdk-drop-list-dragging .dw-drag-drop-box:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}.dw-visible-submenu{overflow:auto;max-height:55vh}.dw-visible-submenu-item{width:16px;display:inline-block}.dw-visible-submenu-item.checked:before{content:"\\2714"}td.no-column-displayed{line-height:35px;padding-left:10px}.dw-drag-drop-box.cdk-drag-preview{padding:12px 8px;background:#efefef}.dw-drag-drop-box.cdk-drag-preview .ant-table-column-title{text-align:left}.dw-drag-drop-box.cdk-drag-preview>span{display:block;text-align:left}th.dw-drag-drop-box.ant-table-column-has-sorters.ant-table-cell{cursor:move}th.dw-drag-drop-box .ant-table-filter-column .ant-table-column-sorter{cursor:pointer;z-index:1}\n'],encapsulation:2,changeDetection:0}),e})(),ft=(()=>{class e{constructor(e){this.dwTableConfigService=e,this.destroy$=new l.Subject,this.tdIdArray=[],this.tdOriIdArray=[],this.tdNoIdArray=[]}ngOnInit(){this.dwTableConfigService.dragSubject$.pipe((0,d.takeUntil)(this.destroy$)).subscribe(e=>{!this.dwTableConfigService.getDwTableId()||this.moveView()}),this.dwTableConfigService.deleteConfigSubject$.pipe((0,d.takeUntil)(this.destroy$)).subscribe(e=>{!this.dwTableConfigService.getDwTableId()||(this.orderView(e,this.tdOriIdArray),this.moveView())}),this.dwTableConfigService.visibleSubject$.pipe((0,d.takeUntil)(this.destroy$)).subscribe(e=>{!this.dwTableConfigService.getDwTableId()||this.moveView()})}ngAfterViewInit(){this.moveView()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}createView(){this.dwReorderColumnsContent.length>0&&this.dwReorderColumnsContent.clear(),this.tdIdArray.concat(this.tdNoIdArray).forEach((e,t)=>{const n=this.dwTableConfigService.getColumnVisible(e.dwColumnId);e.template&&!1!==n&&this.dwReorderColumnsContent.createEmbeddedView(e.template)})}appendTDIdView(e,t){const n={dwColumnId:e,template:t};this.tdIdArray.push(n),this.tdOriIdArray.push(n)}appendTDNoIdView(e,t){this.tdNoIdArray.push({dwColumnId:e,template:t})}moveView(){!this.dwTableConfigService.getDwTableId()||(this.moveViewSubscription=this.dwTableConfigService.getTableConfig().subscribe(e=>{e&&e.dwColumnConfig&&e.dwColumnConfig.length>0?this.orderView(e.dwColumnConfig,this.tdIdArray):this.tdIdArray=this.tdOriIdArray,setTimeout(()=>{this.createView()}),this.moveViewSubscription&&this.moveViewSubscription.unsubscribe()}))}orderView(e,t){const n=[];e.forEach((e,i)=>{-1!==t.findIndex(t=>t.dwColumnId===e.dwColumnId)&&n.push(e)}),n.forEach((e,n)=>{const i=t.findIndex(t=>t.dwColumnId===e.dwColumnId);-1!==i&&(!t[n]||(0,r.moveItemInArray)(t,i,n))})}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(ct))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["tr","dwReorderColumns",""]],viewQuery:function(e,t){if(1&e&&i.\u0275\u0275viewQuery(de,7,i.ViewContainerRef),2&e){let e;i.\u0275\u0275queryRefresh(e=i.\u0275\u0275loadQuery())&&(t.dwReorderColumnsContent=e.first)}},attrs:se,ngContentSelectors:le,decls:3,vars:0,consts:[["dwReorderColumnsContent",""]],template:function(e,t){1&e&&(i.\u0275\u0275projectionDef(),i.\u0275\u0275projection(0),i.\u0275\u0275elementContainer(1,null,0))},encapsulation:2}),e})();const wt=["AND","OR"],vt=[{value:"equals",supported:["text","number","date","select"]},{value:"contains",supported:["text"]},{value:"startsWith",supported:["text"]},{value:"lessThan",supported:["number","date"]},{value:"lessThanOrEqual",supported:["number"]},{value:"greaterThan",supported:["number","date"]},{value:"greaterThanOrEqual",supported:["number"]},{value:"inRange",supported:["number","date"]}];let xt=(()=>{class e extends pt{constructor(e,t,n,i){super(n,i),this.elementRef=e,this.dwTableConfigService=t,this.dwDateFormat=n,this.dwTimeFormat=i,this.destroy$=new l.Subject,this.menuVisiable={value:!1},this.onFilter=(e,t)=>{t&&t(e);let n=e;this.dwFilterTemplate||(n=this.transDateToString(e),this.resetEmptyArray(n),this.validColumnFilter(n)),this.dwTableConfigService.setColumnFilter(this.dwColumnId,n)},this.dwFilterOperator=wt,this.dwFilterOptions=vt}mouseDown(e){e.preventDefault(),e.stopPropagation()}mouseUp(e){e.preventDefault(),e.stopPropagation()}click(e){e.preventDefault(),e.stopPropagation()}contextmenu(e){e.preventDefault(),e.stopPropagation()}ngOnInit(){super.onInit(),this.dwTableConfigService.columnConfigSubject$.pipe((0,d.takeUntil)(this.destroy$)).subscribe(e=>{this.syncFilterToModel(e,!0),("getConfig"===e.event||!this.modalFilterInfo)&&(this.modalFilterInfo=this.cloneObject(this.dwFilterInfo))}),this.dwTableConfigService.floatingFilterSubject$.pipe((0,d.takeUntil)(this.destroy$)).subscribe(e=>{this.dwColumnId===e.dwColumnId&&(this.modalFilterInfo=this.cloneObject(e.dwFilterInfo))})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}clear(e,t){this.dwFilterInfo[e][t]=null,this.modalFilterInfo[e][t]=null}close(){this.menuVisiable.value=!1}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(i.ElementRef),i.\u0275\u0275directiveInject(ct),i.\u0275\u0275directiveInject(u.APP_DATE_FORMAT),i.\u0275\u0275directiveInject(u.APP_TIME_FORMAT))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["dw-filter-modal"]],hostBindings:function(e,t){1&e&&i.\u0275\u0275listener("mousedown",function(e){return t.mouseDown(e)})("mouseup",function(e){return t.mouseUp(e)})("click",function(e){return t.click(e)})("contextmenu",function(e){return t.contextmenu(e)})},features:[i.\u0275\u0275InheritDefinitionFeature],decls:12,vars:6,consts:[[1,"filter-modal-block"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["defaultDropdownTpl",""],["dwSelectTpl",""],["dwDateTpl",""],["dwTextTpl",""],["dwNumberTpl",""],["dw-dropdown","","dwTrigger","click",3,"dwClickHide","dwDropdownMenu","dwVisible","dwVisibleChange"],["dw-icon","",1,"filter-modal-icon",3,"dwType","dwTheme"],["dwDropdownTpl",""],[1,"filter-modal-dropdown"],[1,"filter-modal-dropdown-input"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[1,"filter-modal-dropdown-button"],["dw-button","","dwType","'primary'",3,"click"],["translate",""],[1,"dwFilterTemplate"],[1,""],[3,"ngModel","ngModelChange"],[4,"ngFor","ngForOf"],["dwAllowClear","","dwShowSearch","",3,"ngModel","dwMode","ngModelChange",4,"ngIf"],[4,"ngIf"],[3,"dwValue","dwLabel",4,"ngIf"],[3,"dwValue","dwLabel"],["dwAllowClear","","dwShowSearch","",3,"ngModel","dwMode","ngModelChange"],[3,"dwLabel","dwValue",4,"ngFor","ngForOf"],[3,"dwLabel","dwValue"],["dw-radio","",3,"dwValue",4,"ngFor","ngForOf"],["dw-radio","",3,"dwValue"],[3,"dwSuffix"],["type","text","dw-input","",3,"ngModel","ngModelChange"],["dwInputFilterClearTpl",""],["dw-icon","","class","ant-input-clear-icon","dwTheme","fill","dwType","close-circle",3,"click",4,"ngIf"],["dw-icon","","dwTheme","fill","dwType","close-circle",1,"ant-input-clear-icon",3,"click"],["dwInputFilterToClearTpl",""]],template:function(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"div",0),i.\u0275\u0275template(1,ce,1,0,"ng-container",1),i.\u0275\u0275template(2,Ce,18,9,"ng-template",null,2,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(4,ke,7,4,"ng-template",null,3,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275template(6,je,8,5,"ng-template",null,4,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275template(8,Je,10,5,"ng-template",null,5,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275template(10,ot,8,5,"ng-template",null,6,i.\u0275\u0275templateRefExtractor)),2&e){const e=i.\u0275\u0275reference(3);i.\u0275\u0275advance(1),i.\u0275\u0275property("ngTemplateOutlet",t.dwFilterTemplate?t.dwFilterTemplate:e)("ngTemplateOutletContext",i.\u0275\u0275pureFunction3(2,lt,t.modalFilterInfo,t.onFilter,t.menuVisiable))}},directives:[w.NgTemplateOutlet,c.DwDropDownADirective,c.DwDropDownDirective,x.DwIconDirective,c.DwDropdownMenuComponent,w.NgSwitch,w.NgSwitchCase,w.NgSwitchDefault,m.TranslateDirective,C.DwSelectComponent,v.NgControlStatus,v.NgModel,w.NgForOf,w.NgIf,C.DwOptionComponent,y.DwRadioGroupComponent,y.DwRadioComponent,S.DwDatePickerComponent,b.DwInputGroupComponent,b.DwInputGroupWhitSuffixOrPrefixDirective,b.DwInputDirective,v.DefaultValueAccessor,_.DwInputNumberComponent],pipes:[m.TranslatePipe],styles:[".filter-modal-block{display:inline-block}.filter-modal-dropdown{padding:10px;background-color:#e8e8e8;border:1px solid #ccc}.dwFilterTemplate dw-select,.dwFilterTemplate dw-input-number,.dwFilterTemplate input,.dwFilterTemplate dw-date-picker{width:100%}\n"],encapsulation:2}),e})(),Ct=(()=>{class e{constructor(e,t,n){this.templateRef=e,this.dwDropColumnsBaseComponent=t,this.dwReorderColumnsComponent=n}ngOnInit(){this.dwDropColumnsBaseComponent&&this.templateRef&&(this.dwColumnId?this.dwDropColumnsBaseComponent.appendThIdView(this.dwColumnId,this.templateRef):this.dwDropColumnsBaseComponent.appendThNoIdView(this.dwColumnId,this.templateRef)),this.dwReorderColumnsComponent&&this.templateRef&&(this.dwColumnId?this.dwReorderColumnsComponent.appendTDIdView(this.dwColumnId,this.templateRef):this.dwReorderColumnsComponent.appendTDNoIdView(this.dwColumnId,this.templateRef))}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(i.TemplateRef,8),i.\u0275\u0275directiveInject(mt,8),i.\u0275\u0275directiveInject(ft,8))},e.\u0275dir=i.\u0275\u0275defineDirective({type:e,selectors:[["","dwColumnId",""]],inputs:{dwColumnId:"dwColumnId"}}),e})(),_t=(()=>{class e{constructor(e,t,n){this.element=e,this.dwDropColumnsBaseComponent=t,this.dwThColumnIdDirective=n,this.allowDrag=!0}set dwLeft(e){this.allowDrag=!1}set dwRight(e){this.allowDrag=!1}ngOnInit(){!this.dwThColumnIdDirective||!this.dwThColumnIdDirective.dwColumnId||!1!==this.allowDrag&&this.dwThColumnIdDirective.templateRef&&(this.dwDropColumnsBaseComponent.appendThElement(this.element),this.element.nativeElement.classList.add("dw-drag-drop-box"))}ngOnDestroy(){this.dwDropColumnsBaseComponent.removeThElement(this.element)}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(i.ElementRef),i.\u0275\u0275directiveInject(mt,8),i.\u0275\u0275directiveInject(Ct,8))},e.\u0275dir=i.\u0275\u0275defineDirective({type:e,selectors:[["th","dwDragDrop",""]],inputs:{allowDrag:"allowDrag",dwLeft:"dwLeft",dwRight:"dwRight"}}),e})(),yt=(()=>{class e{constructor(e,t,n,i,r,a,o,d){this.dwThColumnIdDirective=e,this.dwTableConfigService=t,this.dwDropColumnsBaseComponent=n,this.element=i,this.resizableService=r,this.ngZone=a,this.thAddOnComponent=o,this.renderer=d,this.dwRight=void 0,this.dwLeft=void 0,this.destroy$=new l.Subject}ngOnInit(){!this.dwDropColumnsBaseComponent||(this.dwDragDrop=void 0===this.dwLeft&&void 0===this.dwRight?this.dwDragDrop:void 0,this.setColumnSort(),this.setColumnWidth(),this.createResizer(),this.setColumnFilter(),this.renderer.addClass(this.element.nativeElement,"dw-filter-box"))}ngAfterViewInit(){this.setColumnName()}setColumnSort(){if(!(this.thAddOnComponent&&this.dwThColumnIdDirective&&this.dwThColumnIdDirective.dwColumnId&&this.dwThColumnIdDirective.templateRef))return;const e=this.dwTableConfigService.getColumnSort(this.dwThColumnIdDirective.dwColumnId);this.thAddOnComponent.dwColumnKey=this.dwThColumnIdDirective.dwColumnId,void 0!==e&&(this.thAddOnComponent.dwSortOrder=e,this.thAddOnComponent.sortOrder=e),this.sortChangeSubscription=this.thAddOnComponent.dwSortOrderChange.subscribe(e=>{this.dwTableConfigService.getDwTableId()&&this.dwThColumnIdDirective.dwColumnId&&this.dwTableConfigService.setColumnSort(this.dwThColumnIdDirective.dwColumnId,e)})}setColumnWidth(){this.dwThColumnIdDirective&&this.dwThColumnIdDirective.templateRef?this.dwThColumnIdDirective.dwColumnId?this.dwDropColumnsBaseComponent.setThColumnWidth(this.dwThColumnIdDirective.dwColumnId,this.dwWidth,this.dwDragDrop,this.dwColumnFilter,this.dwFilterList,this.dwFilterMultiple):this.dwDropColumnsBaseComponent.setThNoColumnWidth(this.dwThColumnIdDirective.templateRef,this.dwWidth):this.dwDropColumnsBaseComponent.setThPureWidth(this.dwColumnId,this.dwWidth)}createResizer(){if(!this.dwThColumnIdDirective||!this.dwThColumnIdDirective.dwColumnId||!this.dwThColumnIdDirective.templateRef)return;this.elRect=this.element.nativeElement.getBoundingClientRect(),this.el=document.createElement("dw-resizer");const e=document.createElement("dw-resizer-inner");e.classList.add("dw-resize-handler-inner-box"),this.el.appendChild(e),this.el.classList.add("dw-resize-handler"),this.element.nativeElement.appendChild(this.el),this.el.addEventListener("mousedown",this.onMouseDown.bind(this)),this.el.addEventListener("mouseup",this.onMouseUp.bind(this)),this.el.addEventListener("click",this.onMouseUp.bind(this))}setColumnFilter(){!this.thAddOnComponent||!this.dwThColumnIdDirective||!this.dwThColumnIdDirective.dwColumnId||!this.dwThColumnIdDirective.templateRef||(this.thAddOnComponent.dwColumnKey=this.dwThColumnIdDirective.dwColumnId,this.filterChangeSubscription=this.thAddOnComponent.dwFilterChange.subscribe(e=>{}))}onMouseDown(e){e.preventDefault(),e.stopPropagation(),this.renderer.addClass(this.el,"active"),this.dwTableConfigService.dragDisabled(!0),this.origWidth=this.element.nativeElement.clientWidth,this.elRect=this.element.nativeElement.getBoundingClientRect(),this.resizableService.startResizing(e);let t=0;this.mouseUpSubscription=this.resizableService.documentMouseUp$.pipe((0,d.takeUntil)(this.destroy$)).subscribe(e=>{this.origWidth=this.origWidth+t,this.ngZone.run(()=>{this.dwTableConfigService.getDwTableId()&&this.dwThColumnIdDirective.dwColumnId&&(this.dwTableConfigService.setColumnWidth(this.dwThColumnIdDirective.dwColumnId,this.origWidth),this.dwTableConfigService.resize(!0)),this.el.style.right="0",this.renderer.removeClass(this.el,"active"),this.mouseUpSubscription.unsubscribe(),this.mouseMoveSubscription.unsubscribe(),this.dwTableConfigService.dragDisabled(!1)})}),this.mouseMoveSubscription=this.resizableService.documentMouseMove$.pipe((0,d.takeUntil)(this.destroy$)).subscribe(e=>{const n=e.clientX-this.elRect.left-this.elRect.width+this.el.clientWidth/2;t=Math.ceil(n),this.el.style.right=-n+"px"})}onMouseUp(e){e.preventDefault(),e.stopPropagation(),this.resizableService.documentMouseUp$.next(e)}setColumnName(){!this.dwThColumnIdDirective||!this.dwThColumnIdDirective.dwColumnId||!this.dwThColumnIdDirective.templateRef||this.dwTableConfigService.setColumnName(this.dwThColumnIdDirective.dwColumnId,this.element.nativeElement.innerText)}ngOnDestroy(){this.el&&(this.el.removeEventListener("mousedown",this.onMouseDown.bind(this)),this.el.removeEventListener("mouseup",this.onMouseUp.bind(this)),this.el.removeEventListener("click",this.onMouseUp.bind(this))),this.sortChangeSubscription&&this.sortChangeSubscription.unsubscribe(),this.filterChangeSubscription&&this.filterChangeSubscription.unsubscribe(),this.destroy$.next(),this.destroy$.complete()}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(Ct,8),i.\u0275\u0275directiveInject(ct),i.\u0275\u0275directiveInject(mt,8),i.\u0275\u0275directiveInject(i.ElementRef),i.\u0275\u0275directiveInject(f.DwResizableService,8),i.\u0275\u0275directiveInject(i.NgZone),i.\u0275\u0275directiveInject(s.DwThAddOnComponent,8),i.\u0275\u0275directiveInject(i.Renderer2))},e.\u0275dir=i.\u0275\u0275defineDirective({type:e,selectors:[["th"]],inputs:{dwRight:"dwRight",dwLeft:"dwLeft",dwDragDrop:"dwDragDrop",dwWidth:"dwWidth",dwColumnId:"dwColumnId",dwColumnFilter:"dwColumnFilter",dwFilterList:"dwFilterList",dwFilterMultiple:"dwFilterMultiple"},features:[i.\u0275\u0275ProvidersFeature([f.DwResizableService])]}),e})(),St=(()=>{class e{constructor(e){this.dwTableConfigService=e}ngOnInit(){!this.dwTableId||(this.dwTableConfigService.setDwTableId(this.dwTableId),this.dwTableConfigService.getTableConfig().subscribe())}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(ct))},e.\u0275dir=i.\u0275\u0275defineDirective({type:e,selectors:[["dw-table"]],inputs:{dwTableId:"dwTableId"},features:[i.\u0275\u0275ProvidersFeature([ct])]}),e})(),bt=(()=>{class e{constructor(e,t,n,i,r){this.dwThColumnIdDirective=e,this.element=t,this.vcRef=n,this.cfResolver=i,this.renderer=r}ngOnInit(){this.createFilterModal()}createFilterModal(){const e=this.cfResolver.resolveComponentFactory(xt),t=this.vcRef.createComponent(e);this.renderer.appendChild(this.element.nativeElement,t.injector.get(xt).elementRef.nativeElement);const n=t.instance;n.dwColumnId=this.dwThColumnIdDirective.dwColumnId,n.dwColumnFilter=this.dwColumnFilter,n.dwFilterTemplate=this.dwFilterTemplate,n.dwFilterIcon=this.dwFilterIcon,n.dwIconTheme=this.dwIconTheme,n.dwFilterList=this.dwFilterList,n.dwFilterMultiple=this.dwFilterMultiple}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(Ct,8),i.\u0275\u0275directiveInject(i.ElementRef),i.\u0275\u0275directiveInject(i.ViewContainerRef),i.\u0275\u0275directiveInject(i.ComponentFactoryResolver),i.\u0275\u0275directiveInject(i.Renderer2))},e.\u0275dir=i.\u0275\u0275defineDirective({type:e,selectors:[["th","dwColumnFilter",""]],inputs:{dwColumnFilter:"dwColumnFilter",dwFilterIcon:"dwFilterIcon",dwIconTheme:"dwIconTheme",dwFilterTemplate:"dwFilterTemplate",dwFilterList:"dwFilterList",dwFilterMultiple:"dwFilterMultiple"}}),e})(),It=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[w.CommonModule,m.TranslateModule,v.FormsModule,I.DwActionModule,x.DwIconModule,s.DwTableModule,f.DwResizableModule,c.DwDropDownModule,C.DwSelectModule,_.DwInputNumberModule,y.DwRadioModule,S.DwDatePickerModule,b.DwInputModule]]}),e})()},8852:function(e,t,n){n.d(t,{u:function(){return a},f:function(){return o}});var i=n(36535),r=n(42746);let a=(()=>{class e{constructor(e,t){this.elementRef=e,this.renderer=t,this.hidden=null,this.renderer.setAttribute(this.elementRef.nativeElement,"hidden","")}setHiddenAttribute(){this.hidden?this.renderer.setAttribute(this.elementRef.nativeElement,"hidden","string"==typeof this.hidden?this.hidden:""):this.renderer.removeAttribute(this.elementRef.nativeElement,"hidden")}ngOnChanges(){this.setHiddenAttribute()}ngAfterViewInit(){this.setHiddenAttribute()}}return e.\u0275fac=function(t){return new(t||e)(r.\u0275\u0275directiveInject(r.ElementRef),r.\u0275\u0275directiveInject(r.Renderer2))},e.\u0275dir=r.\u0275\u0275defineDirective({type:e,selectors:[["","dw-button",""],["dw-button-group"],["","dw-icon",""],["","dw-menu-item",""],["","dw-submenu",""],["dw-select-top-control"],["dw-select-placeholder"],["dw-input-group"]],inputs:{hidden:"hidden"},features:[r.\u0275\u0275NgOnChangesFeature]}),e})(),o=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=r.\u0275\u0275defineInjector({imports:[[i.PlatformModule]]}),e})()},96670:function(e,t,n){n.d(t,{uG:function(){return s},ln:function(){return c}});var i=n(36535),r=n(42746),a=n(88065);class o{constructor(e,t,n,r){this.triggerElement=e,this.ngZone=t,this.insertExtraNode=n,this.platformId=r,this.waveTransitionDuration=400,this.styleForPseudo=null,this.extraNode=null,this.lastTime=0,this.onClick=e=>{!this.triggerElement||!this.triggerElement.getAttribute||this.triggerElement.getAttribute("disabled")||"INPUT"===e.target.tagName||this.triggerElement.className.indexOf("disabled")>=0||this.fadeOutWave()},this.platform=new i.Platform(this.platformId),this.clickHandler=this.onClick.bind(this),this.bindTriggerEvent()}get waveAttributeName(){return this.insertExtraNode?"ant-click-animating":"ant-click-animating-without-extra-node"}bindTriggerEvent(){this.platform.isBrowser&&this.ngZone.runOutsideAngular(()=>{this.removeTriggerEvent(),this.triggerElement&&this.triggerElement.addEventListener("click",this.clickHandler,!0)})}removeTriggerEvent(){this.triggerElement&&this.triggerElement.removeEventListener("click",this.clickHandler,!0)}removeStyleAndExtraNode(){this.styleForPseudo&&document.body.contains(this.styleForPseudo)&&(document.body.removeChild(this.styleForPseudo),this.styleForPseudo=null),this.insertExtraNode&&this.triggerElement.contains(this.extraNode)&&this.triggerElement.removeChild(this.extraNode)}destroy(){this.removeTriggerEvent(),this.removeStyleAndExtraNode()}fadeOutWave(){const e=this.triggerElement,t=this.getWaveColor(e);e.setAttribute(this.waveAttributeName,"true"),!(Date.now()<this.lastTime+this.waveTransitionDuration)&&(this.isValidColor(t)&&(this.styleForPseudo||(this.styleForPseudo=document.createElement("style")),this.styleForPseudo.innerHTML=`\n      [ant-click-animating-without-extra-node='true']::after, .ant-click-animating-node {\n        --antd-wave-shadow-color: ${t};\n      }`,document.body.appendChild(this.styleForPseudo)),this.insertExtraNode&&(this.extraNode||(this.extraNode=document.createElement("div")),this.extraNode.className="ant-click-animating-node",e.appendChild(this.extraNode)),this.lastTime=Date.now(),this.runTimeoutOutsideZone(()=>{e.removeAttribute(this.waveAttributeName),this.removeStyleAndExtraNode()},this.waveTransitionDuration))}isValidColor(e){return!!e&&"#ffffff"!==e&&"rgb(255, 255, 255)"!==e&&this.isNotGrey(e)&&!/rgba\(\d*, \d*, \d*, 0\)/.test(e)&&"transparent"!==e}isNotGrey(e){const t=e.match(/rgba?\((\d*), (\d*), (\d*)(, [\.\d]*)?\)/);return!(t&&t[1]&&t[2]&&t[3]&&t[1]===t[2]&&t[2]===t[3])}getWaveColor(e){const t=getComputedStyle(e);return t.getPropertyValue("border-top-color")||t.getPropertyValue("border-color")||t.getPropertyValue("background-color")}runTimeoutOutsideZone(e,t){this.ngZone.runOutsideAngular(()=>setTimeout(e,t))}}const l={disabled:!1},d=new r.InjectionToken("dw-wave-global-options",{providedIn:"root",factory:function(){return l}});let s=(()=>{class e{constructor(e,t,n,i,r){this.ngZone=e,this.elementRef=t,this.config=n,this.animationType=i,this.platformId=r,this.dwWaveExtraNode=!1,this.waveDisabled=!1,this.waveDisabled=this.isConfigDisabled()}get disabled(){return this.waveDisabled}get rendererRef(){return this.waveRenderer}isConfigDisabled(){let e=!1;return this.config&&"boolean"==typeof this.config.disabled&&(e=this.config.disabled),"NoopAnimations"===this.animationType&&(e=!0),e}ngOnDestroy(){this.waveRenderer&&this.waveRenderer.destroy()}ngOnInit(){this.renderWaveIfEnabled()}renderWaveIfEnabled(){!this.waveDisabled&&this.elementRef.nativeElement&&(this.waveRenderer=new o(this.elementRef.nativeElement,this.ngZone,this.dwWaveExtraNode,this.platformId))}disable(){this.waveDisabled=!0,this.waveRenderer&&(this.waveRenderer.removeTriggerEvent(),this.waveRenderer.removeStyleAndExtraNode())}enable(){this.waveDisabled=this.isConfigDisabled()||!1,this.waveRenderer&&this.waveRenderer.bindTriggerEvent()}}return e.\u0275fac=function(t){return new(t||e)(r.\u0275\u0275directiveInject(r.NgZone),r.\u0275\u0275directiveInject(r.ElementRef),r.\u0275\u0275directiveInject(d,8),r.\u0275\u0275directiveInject(a.ANIMATION_MODULE_TYPE,8),r.\u0275\u0275directiveInject(r.PLATFORM_ID))},e.\u0275dir=r.\u0275\u0275defineDirective({type:e,selectors:[["","dw-wave",""],["button","dw-button","",3,"dwType","link",3,"dwType","text"]],inputs:{dwWaveExtraNode:"dwWaveExtraNode"},exportAs:["dwWave"]}),e})(),c=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=r.\u0275\u0275defineInjector({imports:[[i.PlatformModule]]}),e})()},16511:function(e,t,n){n.d(t,{R:function(){return i}});let i=(()=>{class e{}return e.product_file=[{fieldName:"\u7f16\u7801",fieldKey:"product_file_code",fieldType:"INPUT",isRequired:!0,isTurnOn:!0},{fieldName:"\u540d\u79f0",fieldKey:"product_file_name",fieldType:"INPUT",isRequired:!0,isTurnOn:!0},{fieldName:"\u4ea7\u54c1\u5206\u7c7b",fieldKey:"item_group",fieldType:"SELECT",isRequired:!0,isTurnOn:!0},{fieldName:"\u578b\u53f7",fieldKey:"model",fieldType:"INPUT",isRequired:!1,isTurnOn:!0},{fieldName:"\u89c4\u683c",fieldKey:"specification",fieldType:"INPUT",isRequired:!1,isTurnOn:!0},{fieldName:"\u5e8f\u5217\u53f7",fieldKey:"sn",fieldType:"INPUT",isRequired:!0,isTurnOn:!0},{fieldName:"\u5ba2\u6237",fieldKey:"customer",fieldType:"OPENER",isRequired:!0,isTurnOn:!0},{fieldName:"\u4f7f\u7528\u5730\u70b9",fieldKey:"location",fieldType:"INPUT",isRequired:!1,isTurnOn:!0},{fieldName:"\u670d\u52a1\u7ad9\u70b9",fieldKey:"service_site",fieldType:"OPENER",isRequired:!1,isTurnOn:!0},{fieldName:"\u670d\u52a1\u4eba\u5458",fieldKey:"employee",fieldType:"OPENER",isRequired:!1,isTurnOn:!0},{fieldName:"\u51fa\u5e93\u65e5\u671f",fieldKey:"delivery_date",fieldType:"DATEPICKER",isRequired:!0,isTurnOn:!0},{fieldName:"\u5b89\u88c5\u65e5\u671f",fieldKey:"installation_date_range",fieldType:"DATERANGEPICKER",isRequired:!0,isTurnOn:!0},{fieldName:"\u8c03\u8bd5\u4eba\u5458",fieldKey:"commissioning_person",fieldType:"INPUT",isRequired:!1,isTurnOn:!0},{fieldName:"\u9644\u4ef6",fieldKey:"attachment",fieldType:"ATTACHMENT",isRequired:!1,isTurnOn:!0},{fieldName:"\u7ef4\u62a4\u4fdd\u517b",fieldKey:"enable_maintain",fieldType:"CHECKBOX",isRequired:!1,isTurnOn:!0},{fieldName:"\u4ea7\u54c1\u6863\u6848\u7167\u7247",fieldKey:"file",fieldType:"PICTURE",isRequired:!1,isTurnOn:!0},{fieldName:"\u63cf\u8ff0",fieldKey:"product_description",fieldType:"TEXTAREA",isRequired:!1,isTurnOn:!0},{fieldName:"\u4fdd\u4fee\u622a\u6b62\u65e5\u671f",fieldKey:"expiry_date",fieldType:"DATEPICKER",isRequired:!0,isTurnOn:!0},{fieldName:"\u9a8c\u6536\u65e5\u671f",fieldKey:"acceptance_date",fieldType:"DATEPICKER",isRequired:!1,isTurnOn:!0},{fieldName:"\u9a8c\u6536\u4eba\u5458",fieldKey:"acceptance_person",fieldType:"INPUT",isRequired:!1,isTurnOn:!0},{fieldName:"\u7ef4\u4fee\u6b21\u6570",fieldKey:"maintenance_count",fieldType:"INPUT",isRequired:!1,isTurnOn:!0},{fieldName:"\u5907\u6ce8",fieldKey:"remark",fieldType:"INPUT",isRequired:!1,isTurnOn:!0}],e})()},53771:function(e,t,n){n.d(t,{v:function(){return l}});var i=n(51156),r=n(47372),a=n(65134),o=n(42746);let l=(()=>{class e{constructor(e,t){this.http=e,this.pctHttp=t}getCustomerList(e,t){return this.http.get(`restful/service/customer/Customer/Customer?code=${e}&name=${t}`).pipe((0,r.map)(e=>e))}deleteCustomer(e){return this.http.delete("restful/service/customer/Customer/BathRemove",{body:{ids:e.join(",")}})}getQuery(e){return this.http.get(`restful/service/customer/Customer/CustomerSearch?param=${e}`).pipe((0,r.map)(e=>e))}getIntegratedEnableStatus(){return this.pctHttp.get("restful/service/integratedSettings/IntegratedSettings/IntegratedEnableStatus")}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(i.DwDapHttpClient),o.\u0275\u0275inject(a.k))},e.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},48005:function(e,t,n){n.d(t,{w:function(){return kn}});var i=n(64762),r=n(42746),a=n(87974),o=n(53524),l=n(33795),d=n(18843),s=n(66800),c=n(99487),m=n(83237),p=n(16511),u=n(45890),h=n(9201),g=n(55245),f=n(1020),w=n(14025),v=n(31441),x=n(85773),C=n(29872),_=n(67280),y=n(8852),S=n(41937),b=n(93761),I=n(96670),E=n(85277);function D(e,t){1&e&&(r.\u0275\u0275elementStart(0,"div",7),r.\u0275\u0275text(1,"\u5e8f\u5217\u53f7:"),r.\u0275\u0275elementEnd())}function O(e,t){1&e&&(r.\u0275\u0275elementStart(0,"div",7),r.\u0275\u0275text(1,"\u9879\u76ee\u53f7:"),r.\u0275\u0275elementEnd())}function M(e,t){if(1&e){const e=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"em",22),r.\u0275\u0275listener("click",function(){return r.\u0275\u0275restoreView(e),r.\u0275\u0275nextContext(3).clear()}),r.\u0275\u0275elementEnd()}}function P(e,t){if(1&e){const e=r.\u0275\u0275getCurrentView();r.\u0275\u0275template(0,M,1,0,"em",19),r.\u0275\u0275elementStart(1,"button",20),r.\u0275\u0275listener("click",function(){return r.\u0275\u0275restoreView(e),r.\u0275\u0275nextContext(2).openCustomer()}),r.\u0275\u0275element(2,"em",21),r.\u0275\u0275elementEnd()}if(2&e){const e=r.\u0275\u0275nextContext(2);r.\u0275\u0275property("ngIf",e.form.value.new_customer_name)}}function k(e,t){if(1&e&&(r.\u0275\u0275elementStart(0,"form",2),r.\u0275\u0275elementStart(1,"div",3),r.\u0275\u0275elementStart(2,"div",4),r.\u0275\u0275element(3,"div",5),r.\u0275\u0275elementStart(4,"div",6),r.\u0275\u0275elementStart(5,"div",7),r.\u0275\u0275text(6,"\u54c1\u53f7:"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(7,"div",8),r.\u0275\u0275text(8),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(9,"div",6),r.\u0275\u0275elementStart(10,"div",7),r.\u0275\u0275text(11,"\u54c1\u540d:"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(12,"div",8),r.\u0275\u0275text(13),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(14,"div",6),r.\u0275\u0275elementStart(15,"div",7),r.\u0275\u0275text(16,"\u89c4\u683c:"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(17,"div",8),r.\u0275\u0275text(18),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(19,"div",4),r.\u0275\u0275element(20,"div",5),r.\u0275\u0275elementStart(21,"div",6),r.\u0275\u0275elementStart(22,"div",7),r.\u0275\u0275text(23,"\u578b\u53f7:"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(24,"div",8),r.\u0275\u0275text(25),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(26,"div",9),r.\u0275\u0275template(27,D,2,0,"div",10),r.\u0275\u0275template(28,O,2,0,"div",10),r.\u0275\u0275elementStart(29,"div",8),r.\u0275\u0275text(30),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(31,"dw-form-item"),r.\u0275\u0275elementStart(32,"dw-form-label",11),r.\u0275\u0275text(33,"\u539f\u5ba2\u6237"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(34,"dw-form-control",12),r.\u0275\u0275element(35,"input",13),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(36,"dw-form-item"),r.\u0275\u0275elementStart(37,"dw-form-label",11),r.\u0275\u0275text(38,"\u65b0\u5ba2\u6237"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(39,"dw-form-control",12),r.\u0275\u0275elementStart(40,"dw-input-group",14),r.\u0275\u0275element(41,"input",15),r.\u0275\u0275elementEnd(),r.\u0275\u0275template(42,P,3,1,"ng-template",null,16,r.\u0275\u0275templateRefExtractor),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(44,"dw-form-item"),r.\u0275\u0275elementStart(45,"dw-form-label",12),r.\u0275\u0275text(46,"\u8fc7\u6237\u65e5\u671f"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(47,"dw-form-control",12),r.\u0275\u0275element(48,"dw-date-picker",17),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(49,"dw-form-item"),r.\u0275\u0275elementStart(50,"dw-form-label",12),r.\u0275\u0275text(51,"\u5907\u6ce8"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(52,"dw-form-control",12),r.\u0275\u0275element(53,"textarea",18),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd()),2&e){const e=r.\u0275\u0275reference(43),t=r.\u0275\u0275nextContext();r.\u0275\u0275property("formGroup",t.form),r.\u0275\u0275advance(8),r.\u0275\u0275textInterpolate(t.productInfo.product_file_code),r.\u0275\u0275advance(5),r.\u0275\u0275textInterpolate(t.productInfo.product_file_name),r.\u0275\u0275advance(5),r.\u0275\u0275textInterpolate(t.productInfo.specification),r.\u0275\u0275advance(7),r.\u0275\u0275textInterpolate(t.productInfo.model),r.\u0275\u0275advance(2),r.\u0275\u0275property("ngIf","1"===t.file_type),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf","2"===t.file_type),r.\u0275\u0275advance(2),r.\u0275\u0275textInterpolate(t.productInfo.sn),r.\u0275\u0275advance(2),r.\u0275\u0275property("dwSm",4)("dwXs",24),r.\u0275\u0275advance(2),r.\u0275\u0275property("dwSm",16)("dwXs",24),r.\u0275\u0275advance(3),r.\u0275\u0275property("dwSm",4)("dwXs",24),r.\u0275\u0275advance(2),r.\u0275\u0275property("dwSm",16)("dwXs",24),r.\u0275\u0275advance(1),r.\u0275\u0275property("dwSuffix",e),r.\u0275\u0275advance(5),r.\u0275\u0275property("dwSm",4)("dwXs",24),r.\u0275\u0275advance(2),r.\u0275\u0275property("dwSm",16)("dwXs",24),r.\u0275\u0275advance(1),r.\u0275\u0275property("dwDisabledDate",t.disabledDate),r.\u0275\u0275advance(2),r.\u0275\u0275property("dwSm",4)("dwXs",24),r.\u0275\u0275advance(2),r.\u0275\u0275property("dwSm",16)("dwXs",24)}}const F=function(){return{height:"calc(100% - 55px)",overflow:"auto","padding-bottom":"24px","padding-top":"0"}};let V=(()=>{class e{constructor(e,t,n,i){this.fb=e,this.productFileService=t,this.newCustomerService=n,this.message=i,this.file_type="1",this.visibleChanged=new r.EventEmitter,this.productInfo={product_file_code:"2222222",product_file_name:"\u6ce8\u5851\u673a",specification:"SDSDFS32342",model:"DF333333",sn:"3333333333333333333333"},this.lastTransferDate="",this.disabledDate=e=>(0,w.differenceInCalendarDays)(e,new Date)>0||(0,w.differenceInCalendarDays)(e,new Date(this.lastTransferDate))<=0,this.form=this.fb.group({product_file_id:["",f.Validators.required],original_customer_id:[""],original_customer_code:[""],original_customer_name:["",f.Validators.required],new_customer_id:[""],new_customer_code:[""],new_customer_name:["",f.Validators.required],transfer_date:["",f.Validators.required],remark:[""]})}initData(e,t){this.file_type=t,this.form.get("product_file_id").setValue(e.toString()),this.form.get("new_customer_name").reset(),this.form.get("new_customer_id").setValue(0),this.form.get("new_customer_code").setValue(""),this.form.get("transfer_date").setValue(new Date),this.form.get("remark").setValue(""),this.getProductInfo()}ngOnInit(){}getProductInfo(){this.productFileService.getProductInfo(this.form.value.product_file_id).subscribe(e=>{e.success?(this.productInfo=e.data[0],this.form.get("original_customer_id").setValue(e.data[0].customer_id.toString()),this.form.get("original_customer_code").setValue(e.data[0].customer_code),this.form.get("original_customer_name").setValue(e.data[0].customer_name),this.lastTransferDate=e.data[0].transfer_date||""):this.message.create("error",e.message)})}openCustomer(){this.newCustomerService.setConfig(this.form.value.original_customer_id,!1),this.newCustomerService.open([]).subscribe(e=>{null==e||0===e.length||(this.form.get("new_customer_id").setValue(e[0].customer_id.toString()),this.form.get("new_customer_code").setValue(e[0].customer_code),this.form.get("new_customer_name").setValue(e[0].customer_name))})}clear(){this.form.get("new_customer_id").setValue(0),this.form.get("new_customer_code").setValue(""),this.form.get("new_customer_name").setValue("")}handleOk(){this.productFileService.transfer(this.form.value).subscribe(e=>{this.handleCancel(),this.message.create("success","\u8fc7\u6237\u6210\u529f\uff01")},e=>{e.hasOwnProperty("error")&&e.error.hasOwnProperty("errorMessage")&&e.error.errorMessage&&this.message.error(e.error.errorMessage)})}handleCancel(){this.visibleChanged.emit(!1)}}return e.\u0275fac=function(t){return new(t||e)(r.\u0275\u0275directiveInject(f.FormBuilder),r.\u0275\u0275directiveInject(l.U),r.\u0275\u0275directiveInject(h.N),r.\u0275\u0275directiveInject(m.DwMessageService))},e.\u0275cmp=r.\u0275\u0275defineComponent({type:e,selectors:[["app-product-transfer"]],inputs:{visible:"visible"},outputs:{visibleChanged:"visibleChanged"},features:[r.\u0275\u0275ProvidersFeature([h.N])],decls:2,vars:8,consts:[[3,"dwBodyStyle","dwMaskClosable","dwWidth","dwVisible","dwTitle","dwOkDisabled","dwOkText","dwVisibleChange","dwOnCancel","dwOnOk"],["dwModalContent",""],["dw-form","",3,"formGroup"],[1,"item-wrap"],["dw-row",""],["dw-col","","dwSpan","1"],["dw-col","","dwSpan","7",1,"flex-box"],[1,"label"],[1,"info"],["dw-col","","dwSpan","14",1,"flex-box"],["class","label",4,"ngIf"],["dwRequired","",3,"dwSm","dwXs"],[3,"dwSm","dwXs"],["dw-input","","readonly","","required","","placeholder","\u8bf7\u8f93\u5165\u539f\u5ba2\u6237","formControlName","original_customer_name","maxlength","40",1,"ant-input","ng-untouched","ng-pristine","ng-invalid"],["dwSearch","",3,"dwSuffix"],["dw-input","","type","text","readonly","","dw-input","","formControlName","new_customer_name"],["suffixCustomerData",""],["formControlName","transfer_date",3,"dwDisabledDate"],["formControlName","remark","dw-input","","maxlength","50","placeholder","50\u5b57\u4ee5\u5185"],["dw-icon","","class","ant-input-clear-icon","dwTheme","fill","dwType","close-circle",3,"click",4,"ngIf"],["dw-button","","dwType","primary","dwSearch","","type","button",3,"click"],["dw-icon","","dwType","search"],["dw-icon","","dwTheme","fill","dwType","close-circle",1,"ant-input-clear-icon",3,"click"]],template:function(e,t){1&e&&(r.\u0275\u0275elementStart(0,"dw-modal",0),r.\u0275\u0275listener("dwVisibleChange",function(e){return t.visible=e})("dwOnCancel",function(){return t.handleCancel()})("dwOnOk",function(){return t.handleOk()}),r.\u0275\u0275template(1,k,54,26,"ng-template",1),r.\u0275\u0275elementEnd()),2&e&&r.\u0275\u0275property("dwBodyStyle",r.\u0275\u0275pureFunction0(7,F))("dwMaskClosable",!0)("dwWidth",720)("dwVisible",t.visible)("dwTitle","\u8fc7\u6237")("dwOkDisabled",!t.form.valid)("dwOkText","\u4fdd\u5b58")},directives:[v.DwModalComponent,v.DwModalContentDirective,f.\u0275NgNoValidate,f.NgControlStatusGroup,x.DwFormDirective,f.FormGroupDirective,C.DwRowDirective,C.DwColDirective,g.NgIf,x.DwFormItemComponent,x.DwFormLabelComponent,x.DwFormControlComponent,_.DwInputDirective,f.DefaultValueAccessor,f.RequiredValidator,f.NgControlStatus,f.FormControlName,f.MaxLengthValidator,y.u,_.DwInputGroupComponent,_.DwInputGroupWhitSuffixOrPrefixDirective,S.DwDatePickerComponent,b.DwButtonComponent,I.uG,E.DwIconDirective],styles:[".item-wrap[_ngcontent-%COMP%]{border-bottom:1px solid #d9d9d9;padding:20px 0;margin-bottom:24px}"]}),e})();const T=function(){return{minRows:3,maxRows:3}};function L(e,t){if(1&e&&(r.\u0275\u0275elementStart(0,"form",2),r.\u0275\u0275elementStart(1,"dw-form-item"),r.\u0275\u0275elementStart(2,"dw-form-label",3),r.\u0275\u0275text(3,"\u56de\u6536\u539f\u56e0"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(4,"dw-form-control",4),r.\u0275\u0275element(5,"textarea",5),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd()),2&e){const e=r.\u0275\u0275nextContext();r.\u0275\u0275property("formGroup",e.form),r.\u0275\u0275advance(2),r.\u0275\u0275property("dwSm",5)("dwXs",24),r.\u0275\u0275advance(2),r.\u0275\u0275property("dwSm",18)("dwXs",24),r.\u0275\u0275advance(1),r.\u0275\u0275property("dwAutosize",r.\u0275\u0275pureFunction0(6,T))}}const R=function(){return{height:"calc(100% - 55px)",overflow:"auto","padding-bottom":"24px"}};let A=(()=>{class e{constructor(e,t,n,i){this.fb=e,this.productFileService=t,this.newCustomerService=n,this.message=i,this.visibleChanged=new r.EventEmitter,this.form=this.fb.group({product_file_id:["",f.Validators.required],recycled_reason:["",f.Validators.required]})}initData(e){this.form.get("product_file_id").setValue(e.toString()),this.form.get("recycled_reason").reset()}ngOnInit(){}handleOk(){this.productFileService.recycle(this.form.value).subscribe(e=>{this.visibleChanged.emit(!0),this.message.create("success","\u56de\u6536\u6210\u529f\uff01\u53ef\u81f3\u5df2\u56de\u6536\u8bbe\u5907\u4e2d\u8fdb\u884c\u67e5\u770b")},e=>{e.hasOwnProperty("error")&&e.error.hasOwnProperty("errorMessage")&&e.error.errorMessage&&this.message.error(e.error.errorMessage)})}handleCancel(){this.visibleChanged.emit(!1)}}return e.\u0275fac=function(t){return new(t||e)(r.\u0275\u0275directiveInject(f.FormBuilder),r.\u0275\u0275directiveInject(l.U),r.\u0275\u0275directiveInject(h.N),r.\u0275\u0275directiveInject(m.DwMessageService))},e.\u0275cmp=r.\u0275\u0275defineComponent({type:e,selectors:[["app-product-recycle"]],inputs:{visible:"visible"},outputs:{visibleChanged:"visibleChanged"},decls:2,vars:8,consts:[[3,"dwBodyStyle","dwMaskClosable","dwWidth","dwVisible","dwTitle","dwOkDisabled","dwOkText","dwVisibleChange","dwOnCancel","dwOnOk"],["dwModalContent",""],["dw-form","",3,"formGroup"],["dwRequired","",3,"dwSm","dwXs"],[3,"dwSm","dwXs"],["formControlName","recycled_reason","dw-input","","maxlength","255","placeholder","\u8bf7\u586b\u5199\u8bbe\u5907\u56e0\u4f55\u79cd\u539f\u56e0\u9000\u56de\u5de5\u5382\uff0c\u5982\uff1a\u8fc7\u5ea6\u8425\u9500\u3001\u6362\u8d27\u3001\u591a\u6b21\u7ef4\u4fee\u4e0d\u597d\uff0c\u5ba2\u6237\u4e0d\u4e88\u9a8c\u6536\u7b49",3,"dwAutosize"]],template:function(e,t){1&e&&(r.\u0275\u0275elementStart(0,"dw-modal",0),r.\u0275\u0275listener("dwVisibleChange",function(e){return t.visible=e})("dwOnCancel",function(){return t.handleCancel()})("dwOnOk",function(){return t.handleOk()}),r.\u0275\u0275template(1,L,6,7,"ng-template",1),r.\u0275\u0275elementEnd()),2&e&&r.\u0275\u0275property("dwBodyStyle",r.\u0275\u0275pureFunction0(7,R))("dwMaskClosable",!0)("dwWidth",420)("dwVisible",t.visible)("dwTitle","\u4ea7\u54c1\u56de\u6536")("dwOkDisabled",!t.form.valid)("dwOkText","\u4fdd\u5b58")},directives:[v.DwModalComponent,v.DwModalContentDirective,f.\u0275NgNoValidate,f.NgControlStatusGroup,x.DwFormDirective,f.FormGroupDirective,C.DwRowDirective,x.DwFormItemComponent,C.DwColDirective,x.DwFormLabelComponent,x.DwFormControlComponent,f.DefaultValueAccessor,_.DwInputDirective,_.DwAutosizeDirective,f.NgControlStatus,f.FormControlName,f.MaxLengthValidator],styles:[""]}),e})();var N=n(37568),$=n(17494),j=n(78169),z=n(67733),B=n(62695),q=n(71452),W=n(83522),G=n(41430);function U(e,t){if(1&e){const e=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"div",10),r.\u0275\u0275listener("click",function(){r.\u0275\u0275restoreView(e);const t=r.\u0275\u0275nextContext(2),n=r.\u0275\u0275reference(2);return t.isVisible=!0,n.initData(t.id,t.product_file[0].file_type)}),r.\u0275\u0275text(1," \u8fc7\u6237 "),r.\u0275\u0275elementEnd()}if(2&e){const e=r.\u0275\u0275nextContext(2);r.\u0275\u0275propertyInterpolate("angularticsLabel",e.userInfo.tenantId+","+e.userInfo.userId),r.\u0275\u0275property("dwActionId","transfer")("dwDefaultAuthorized","disabled")("angularticsCategory","\u4ea7\u54c1\u6863\u6848")}}function H(e,t){if(1&e){const e=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"div",11),r.\u0275\u0275listener("click",function(){r.\u0275\u0275restoreView(e);const t=r.\u0275\u0275nextContext(2),n=r.\u0275\u0275reference(4);return t.isRecycleVisible=!0,n.initData(t.id)}),r.\u0275\u0275text(1," \u56de\u6536 "),r.\u0275\u0275elementEnd()}if(2&e){const e=r.\u0275\u0275nextContext(2);r.\u0275\u0275propertyInterpolate("angularticsLabel",e.userInfo.tenantId+","+e.userInfo.userId),r.\u0275\u0275property("dwActionId","recycle")("dwDefaultAuthorized","disabled")("angularticsCategory","\u4ea7\u54c1\u6863\u6848")}}function X(e,t){if(1&e&&(r.\u0275\u0275elementStart(0,"div",5),r.\u0275\u0275element(1,"em",6),r.\u0275\u0275elementStart(2,"div",7),r.\u0275\u0275template(3,U,2,4,"div",8),r.\u0275\u0275template(4,H,2,4,"div",9),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd()),2&e){const e=r.\u0275\u0275nextContext();r.\u0275\u0275advance(3),r.\u0275\u0275property("ngIf","1"==e.userSite),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf","1"===e.product_file[0].service_status)}}function Q(e,t){if(1&e&&(r.\u0275\u0275elementStart(0,"div",17),r.\u0275\u0275elementStart(1,"div",18),r.\u0275\u0275text(2,"\u7f16\u7801\uff1a"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(3,"div",24),r.\u0275\u0275text(4),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd()),2&e){const e=r.\u0275\u0275nextContext(2);r.\u0275\u0275advance(4),r.\u0275\u0275textInterpolate(e.product_file[0].product_file_code)}}function K(e,t){if(1&e&&(r.\u0275\u0275elementStart(0,"div",17),r.\u0275\u0275elementStart(1,"div",18),r.\u0275\u0275text(2,"\u540d\u79f0\uff1a"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(3,"div",24),r.\u0275\u0275text(4),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd()),2&e){const e=r.\u0275\u0275nextContext(2);r.\u0275\u0275advance(4),r.\u0275\u0275textInterpolate(e.product_file[0].product_file_name)}}function J(e,t){1&e&&(r.\u0275\u0275elementStart(0,"span",32),r.\u0275\u0275text(1,"\u6b63\u5e38"),r.\u0275\u0275elementEnd())}function Z(e,t){1&e&&(r.\u0275\u0275elementStart(0,"span",33),r.\u0275\u0275text(1,"\u62a5\u4fee\u4e2d"),r.\u0275\u0275elementEnd())}function Y(e,t){1&e&&(r.\u0275\u0275elementStart(0,"span",34),r.\u0275\u0275text(1,"\u5df2\u56de\u6536"),r.\u0275\u0275elementEnd())}function ee(e,t){1&e&&r.\u0275\u0275element(0,"img",42)}function te(e,t){if(1&e&&r.\u0275\u0275element(0,"img",43),2&e){const e=r.\u0275\u0275nextContext(3);r.\u0275\u0275property("src",e.product_file[0].url,r.\u0275\u0275sanitizeUrl)}}function ne(e,t){if(1&e&&(r.\u0275\u0275elementStart(0,"div",35),r.\u0275\u0275elementStart(1,"div",36),r.\u0275\u0275template(2,ee,1,0,"img",37),r.\u0275\u0275template(3,te,1,1,"img",38),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(4,"div",39),r.\u0275\u0275elementStart(5,"div",40),r.\u0275\u0275elementStart(6,"div"),r.\u0275\u0275text(7),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(8,"div"),r.\u0275\u0275text(9),r.\u0275\u0275pipe(10,"date"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(11,"div",41),r.\u0275\u0275text(12),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd()),2&e){const e=r.\u0275\u0275nextContext(2);r.\u0275\u0275advance(2),r.\u0275\u0275property("ngIf",!e.product_file[0].recycler_file_id),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",e.product_file[0].recycler_file_id),r.\u0275\u0275advance(4),r.\u0275\u0275textInterpolate(e.product_file[0].recycler_name),r.\u0275\u0275advance(2),r.\u0275\u0275textInterpolate(r.\u0275\u0275pipeBind2(10,5,e.product_file[0].recycled_date,"yyyy-MM-dd HH:mm:ss")),r.\u0275\u0275advance(3),r.\u0275\u0275textInterpolate(e.product_file[0].recycled_reason)}}function ie(e,t){if(1&e&&(r.\u0275\u0275elementStart(0,"div",17),r.\u0275\u0275elementStart(1,"div",18),r.\u0275\u0275text(2,"\u4ea7\u54c1\u5206\u7c7b\uff1a"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(3,"div",24),r.\u0275\u0275text(4),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd()),2&e){const e=r.\u0275\u0275nextContext(2);r.\u0275\u0275advance(4),r.\u0275\u0275textInterpolate(e.product_file[0].item_group_name)}}function re(e,t){if(1&e&&(r.\u0275\u0275elementStart(0,"div",17),r.\u0275\u0275elementStart(1,"div",18),r.\u0275\u0275text(2,"\u578b\u53f7\uff1a"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(3,"div",24),r.\u0275\u0275text(4),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd()),2&e){const e=r.\u0275\u0275nextContext(2);r.\u0275\u0275advance(4),r.\u0275\u0275textInterpolate(e.product_file[0].model)}}function ae(e,t){if(1&e&&(r.\u0275\u0275elementStart(0,"div",17),r.\u0275\u0275elementStart(1,"div",18),r.\u0275\u0275text(2,"\u89c4\u683c\uff1a"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(3,"div",24),r.\u0275\u0275text(4),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd()),2&e){const e=r.\u0275\u0275nextContext(2);r.\u0275\u0275advance(4),r.\u0275\u0275textInterpolate(e.product_file[0].specification)}}function oe(e,t){1&e&&(r.\u0275\u0275elementStart(0,"div",18),r.\u0275\u0275text(1,"\u5e8f\u5217\u53f7\uff1a"),r.\u0275\u0275elementEnd())}function le(e,t){1&e&&(r.\u0275\u0275elementStart(0,"div",18),r.\u0275\u0275text(1,"\u9879\u76ee\u53f7\uff1a"),r.\u0275\u0275elementEnd())}function de(e,t){if(1&e&&(r.\u0275\u0275elementStart(0,"div",17),r.\u0275\u0275template(1,oe,2,0,"div",44),r.\u0275\u0275template(2,le,2,0,"div",44),r.\u0275\u0275elementStart(3,"div",24),r.\u0275\u0275text(4),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd()),2&e){const e=r.\u0275\u0275nextContext(2);r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf","1"===e.product_file[0].file_type),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf","2"===e.product_file[0].file_type),r.\u0275\u0275advance(2),r.\u0275\u0275textInterpolate(e.product_file[0].sn)}}function se(e,t){if(1&e&&(r.\u0275\u0275elementStart(0,"div",17),r.\u0275\u0275elementStart(1,"div",18),r.\u0275\u0275text(2,"\u5ba2\u6237\uff1a"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(3,"div",24),r.\u0275\u0275text(4),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd()),2&e){const e=r.\u0275\u0275nextContext(2);r.\u0275\u0275advance(4),r.\u0275\u0275textInterpolate(e.product_file[0].customer_name)}}function ce(e,t){if(1&e&&(r.\u0275\u0275elementStart(0,"div",17),r.\u0275\u0275elementStart(1,"div",18),r.\u0275\u0275text(2,"\u51fa\u5382\u5ba2\u6237\uff1a"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(3,"div",24),r.\u0275\u0275text(4),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd()),2&e){const e=r.\u0275\u0275nextContext(2);r.\u0275\u0275advance(4),r.\u0275\u0275textInterpolate(e.product_file[0].exfactory_customer_name)}}function me(e,t){if(1&e&&(r.\u0275\u0275elementStart(0,"div",17),r.\u0275\u0275elementStart(1,"div",18),r.\u0275\u0275text(2,"\u4f7f\u7528\u5730\u70b9\uff1a"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(3,"div",24),r.\u0275\u0275text(4),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd()),2&e){const e=r.\u0275\u0275nextContext(2);r.\u0275\u0275advance(4),r.\u0275\u0275textInterpolate(e.product_file[0].location)}}function pe(e,t){if(1&e&&(r.\u0275\u0275elementStart(0,"div",17),r.\u0275\u0275elementStart(1,"div",18),r.\u0275\u0275text(2,"\u670d\u52a1\u7ad9\u70b9\uff1a"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(3,"div",24),r.\u0275\u0275text(4),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd()),2&e){const e=r.\u0275\u0275nextContext(2);r.\u0275\u0275advance(4),r.\u0275\u0275textInterpolate(e.product_file[0].service_site_name)}}function ue(e,t){if(1&e&&(r.\u0275\u0275elementStart(0,"div",17),r.\u0275\u0275elementStart(1,"div",18),r.\u0275\u0275text(2,"\u670d\u52a1\u4eba\u5458\uff1a"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(3,"div",24),r.\u0275\u0275text(4),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd()),2&e){const e=r.\u0275\u0275nextContext(2);r.\u0275\u0275advance(4),r.\u0275\u0275textInterpolate(e.product_file[0].employee_name)}}function he(e,t){if(1&e&&(r.\u0275\u0275elementStart(0,"div",17),r.\u0275\u0275elementStart(1,"div",18),r.\u0275\u0275text(2,"\u51fa\u5e93\u65e5\u671f\uff1a"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(3,"div",24),r.\u0275\u0275text(4),r.\u0275\u0275pipe(5,"date"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd()),2&e){const e=r.\u0275\u0275nextContext(2);r.\u0275\u0275advance(4),r.\u0275\u0275textInterpolate(r.\u0275\u0275pipeBind2(5,1,e.product_file[0].delivery_date,"yyyy-MM-dd"))}}function ge(e,t){if(1&e&&(r.\u0275\u0275elementStart(0,"div"),r.\u0275\u0275text(1),r.\u0275\u0275pipe(2,"date"),r.\u0275\u0275pipe(3,"date"),r.\u0275\u0275elementEnd()),2&e){const e=r.\u0275\u0275nextContext(3);r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate2(" ",r.\u0275\u0275pipeBind2(2,2,e.product_file[0].installation_date,"yyyy-MM-dd"),"~",r.\u0275\u0275pipeBind2(3,5,e.product_file[0].installation_date_end,"yyyy-MM-dd")," ")}}function fe(e,t){if(1&e&&(r.\u0275\u0275elementStart(0,"div"),r.\u0275\u0275text(1),r.\u0275\u0275pipe(2,"date"),r.\u0275\u0275elementEnd()),2&e){const e=r.\u0275\u0275nextContext(3);r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate1(" ",r.\u0275\u0275pipeBind2(2,1,e.product_file[0].installation_date,"yyyy-MM-dd")," ")}}function we(e,t){if(1&e&&(r.\u0275\u0275elementStart(0,"div",17),r.\u0275\u0275elementStart(1,"div",18),r.\u0275\u0275text(2,"\u5b89\u88c5\u65e5\u671f\uff1a"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(3,"div",24),r.\u0275\u0275template(4,ge,4,8,"div",25),r.\u0275\u0275template(5,fe,3,4,"div",25),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd()),2&e){const e=r.\u0275\u0275nextContext(2);r.\u0275\u0275advance(4),r.\u0275\u0275property("ngIf",e.product_file[0].installation_date&&e.product_file[0].installation_date_end),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",!e.product_file[0].installation_date_end)}}function ve(e,t){if(1&e&&(r.\u0275\u0275elementStart(0,"div",17),r.\u0275\u0275elementStart(1,"div",18),r.\u0275\u0275text(2,"\u9a8c\u6536\u65e5\u671f\uff1a"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(3,"div",24),r.\u0275\u0275text(4),r.\u0275\u0275pipe(5,"date"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd()),2&e){const e=r.\u0275\u0275nextContext(2);r.\u0275\u0275advance(4),r.\u0275\u0275textInterpolate(r.\u0275\u0275pipeBind2(5,1,e.product_file[0].acceptance_date,"yyyy-MM-dd"))}}function xe(e,t){if(1&e&&(r.\u0275\u0275elementStart(0,"div",17),r.\u0275\u0275elementStart(1,"div",18),r.\u0275\u0275text(2,"\u4fdd\u4fee\u622a\u6b62\u65e5\u671f\uff1a"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(3,"div",24),r.\u0275\u0275text(4),r.\u0275\u0275pipe(5,"date"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd()),2&e){const e=r.\u0275\u0275nextContext(2);r.\u0275\u0275advance(4),r.\u0275\u0275textInterpolate(r.\u0275\u0275pipeBind2(5,1,e.product_file[0].expiry_date,"yyyy-MM-dd"))}}function Ce(e,t){if(1&e&&(r.\u0275\u0275elementStart(0,"div",17),r.\u0275\u0275elementStart(1,"div",18),r.\u0275\u0275text(2,"\u8c03\u8bd5\u4eba\u5458\uff1a"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(3,"div",24),r.\u0275\u0275text(4),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd()),2&e){const e=r.\u0275\u0275nextContext(2);r.\u0275\u0275advance(4),r.\u0275\u0275textInterpolate(e.product_file[0].commissioning_person)}}function _e(e,t){if(1&e&&(r.\u0275\u0275elementStart(0,"div",17),r.\u0275\u0275elementStart(1,"div",18),r.\u0275\u0275text(2,"\u9a8c\u6536\u4eba\u5458\uff1a"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(3,"div",24),r.\u0275\u0275text(4),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd()),2&e){const e=r.\u0275\u0275nextContext(2);r.\u0275\u0275advance(4),r.\u0275\u0275textInterpolate(e.product_file[0].acceptance_person)}}function ye(e,t){1&e&&(r.\u0275\u0275elementContainerStart(0),r.\u0275\u0275text(1," \u5f00\u542f "),r.\u0275\u0275elementContainerEnd())}function Se(e,t){1&e&&(r.\u0275\u0275elementContainerStart(0),r.\u0275\u0275text(1," \u5173\u95ed "),r.\u0275\u0275elementContainerEnd())}function be(e,t){if(1&e&&(r.\u0275\u0275elementStart(0,"div",17),r.\u0275\u0275elementStart(1,"div",18),r.\u0275\u0275text(2,"\u7ef4\u62a4\u5f00\u59cb\u65e5\u671f\uff1a"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(3,"div",24),r.\u0275\u0275text(4),r.\u0275\u0275pipe(5,"date"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd()),2&e){const e=r.\u0275\u0275nextContext(2);r.\u0275\u0275advance(4),r.\u0275\u0275textInterpolate(r.\u0275\u0275pipeBind2(5,1,e.product_file[0].maintain_begin_date,"yyyy-MM-dd"))}}function Ie(e,t){if(1&e&&(r.\u0275\u0275elementContainerStart(0),r.\u0275\u0275text(1),r.\u0275\u0275elementContainerEnd()),2&e){const e=r.\u0275\u0275nextContext(3);r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate1(" ",e.product_file[0].maintain_period," \u6708 ")}}function Ee(e,t){if(1&e&&(r.\u0275\u0275elementStart(0,"div",17),r.\u0275\u0275elementStart(1,"div",18),r.\u0275\u0275text(2,"\u7ef4\u62a4\u5468\u671f\uff1a"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(3,"div",24),r.\u0275\u0275template(4,Ie,2,1,"ng-container",25),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd()),2&e){const e=r.\u0275\u0275nextContext(2);r.\u0275\u0275advance(4),r.\u0275\u0275property("ngIf","1"===e.product_file[0].enable_maintain)}}function De(e,t){if(1&e&&(r.\u0275\u0275elementContainerStart(0),r.\u0275\u0275text(1),r.\u0275\u0275elementContainerEnd()),2&e){const e=r.\u0275\u0275nextContext(3);r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate1(" ",e.product_file[0].maintain_period," \u9700\u4fdd\u517b ")}}function Oe(e,t){if(1&e&&(r.\u0275\u0275elementStart(0,"div",17),r.\u0275\u0275elementStart(1,"div",18),r.\u0275\u0275text(2,"\u6bcf\u6284\u8868\u8fbe\uff1a"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(3,"div",24),r.\u0275\u0275template(4,De,2,1,"ng-container",25),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd()),2&e){const e=r.\u0275\u0275nextContext(2);r.\u0275\u0275advance(4),r.\u0275\u0275property("ngIf","1"===e.product_file[0].enable_maintain)}}function Me(e,t){if(1&e&&(r.\u0275\u0275elementStart(0,"div",24),r.\u0275\u0275text(1),r.\u0275\u0275pipe(2,"date"),r.\u0275\u0275elementEnd()),2&e){const e=r.\u0275\u0275nextContext(3);r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate1(" ",r.\u0275\u0275pipeBind2(2,1,e.product_file[0].recently_maintain_date,"yyyy-MM-dd")," ")}}function Pe(e,t){if(1&e&&(r.\u0275\u0275elementStart(0,"div",24),r.\u0275\u0275text(1),r.\u0275\u0275pipe(2,"date"),r.\u0275\u0275elementEnd()),2&e){const e=r.\u0275\u0275nextContext(3);r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate1(" ",r.\u0275\u0275pipeBind2(2,1,e.product_file[0].next_maintain_date,"yyyy-MM-dd")," ")}}function ke(e,t){if(1&e&&(r.\u0275\u0275elementStart(0,"div",17),r.\u0275\u0275elementStart(1,"div",18),r.\u0275\u0275text(2,"\u7ef4\u4fee\u6b21\u6570\uff1a"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(3,"div",24),r.\u0275\u0275text(4),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd()),2&e){const e=r.\u0275\u0275nextContext(3);r.\u0275\u0275advance(4),r.\u0275\u0275textInterpolate1(" ",e.product_file[0].maintenance_count," ")}}function Fe(e,t){if(1&e&&(r.\u0275\u0275elementContainerStart(0),r.\u0275\u0275elementStart(1,"div",17),r.\u0275\u0275elementStart(2,"div",18),r.\u0275\u0275text(3,"\u6700\u8fd1\u7ef4\u62a4\u65e5\u671f\uff1a"),r.\u0275\u0275elementEnd(),r.\u0275\u0275template(4,Me,3,4,"div",45),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(5,"div",17),r.\u0275\u0275elementStart(6,"div",18),r.\u0275\u0275text(7,"\u4e0b\u6b21\u7ef4\u62a4\u65e5\u671f\uff1a"),r.\u0275\u0275elementEnd(),r.\u0275\u0275template(8,Pe,3,4,"div",45),r.\u0275\u0275elementEnd(),r.\u0275\u0275template(9,ke,5,1,"div",16),r.\u0275\u0275elementContainerEnd()),2&e){const e=r.\u0275\u0275nextContext(2);r.\u0275\u0275advance(4),r.\u0275\u0275property("ngIf","1"===e.product_file[0].enable_maintain),r.\u0275\u0275advance(4),r.\u0275\u0275property("ngIf","1"===e.product_file[0].enable_maintain),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",e.formConfigList.indexOf("maintenance_count")>=0)}}function Ve(e,t){if(1&e&&(r.\u0275\u0275elementStart(0,"div",24),r.\u0275\u0275text(1),r.\u0275\u0275elementEnd()),2&e){const e=r.\u0275\u0275nextContext(3);r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate1(" ",e.product_file[0].recently_maintain_readingmeter," ")}}function Te(e,t){if(1&e&&(r.\u0275\u0275elementStart(0,"div",24),r.\u0275\u0275text(1),r.\u0275\u0275elementEnd()),2&e){const e=r.\u0275\u0275nextContext(3);r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate1(" ",e.product_file[0].next_maintain_readingmeter," ")}}function Le(e,t){if(1&e&&(r.\u0275\u0275elementStart(0,"div",17),r.\u0275\u0275elementStart(1,"div",18),r.\u0275\u0275text(2,"\u7ef4\u4fee\u6b21\u6570\uff1a"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(3,"div",24),r.\u0275\u0275text(4),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd()),2&e){const e=r.\u0275\u0275nextContext(3);r.\u0275\u0275advance(4),r.\u0275\u0275textInterpolate1(" ",e.product_file[0].maintenance_count," ")}}function Re(e,t){if(1&e&&(r.\u0275\u0275elementContainerStart(0),r.\u0275\u0275elementStart(1,"div",17),r.\u0275\u0275elementStart(2,"div",18),r.\u0275\u0275text(3,"\u6700\u8fd1\u4fdd\u517b\u6284\u8868\u6570\uff1a"),r.\u0275\u0275elementEnd(),r.\u0275\u0275template(4,Ve,2,1,"div",45),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(5,"div",17),r.\u0275\u0275elementStart(6,"div",18),r.\u0275\u0275text(7,"\u4e0b\u6b21\u4fdd\u517b\u6284\u8868\u6570\uff1a"),r.\u0275\u0275elementEnd(),r.\u0275\u0275template(8,Te,2,1,"div",45),r.\u0275\u0275elementEnd(),r.\u0275\u0275template(9,Le,5,1,"div",16),r.\u0275\u0275elementContainerEnd()),2&e){const e=r.\u0275\u0275nextContext(2);r.\u0275\u0275advance(4),r.\u0275\u0275property("ngIf","1"===e.product_file[0].enable_maintain),r.\u0275\u0275advance(4),r.\u0275\u0275property("ngIf","1"===e.product_file[0].enable_maintain),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",e.formConfigList.indexOf("maintenance_count")>=0)}}function Ae(e,t){if(1&e&&(r.\u0275\u0275elementStart(0,"div",46),r.\u0275\u0275elementStart(1,"div",18),r.\u0275\u0275text(2,"\u63cf\u8ff0\uff1a"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(3,"div",24),r.\u0275\u0275text(4),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd()),2&e){const e=r.\u0275\u0275nextContext(2);r.\u0275\u0275advance(4),r.\u0275\u0275textInterpolate(e.product_file[0].product_description)}}function Ne(e,t){if(1&e&&(r.\u0275\u0275elementStart(0,"div",46),r.\u0275\u0275elementStart(1,"div",18),r.\u0275\u0275text(2,"\u5907\u6ce8\uff1a"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(3,"div",24),r.\u0275\u0275text(4),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd()),2&e){const e=r.\u0275\u0275nextContext(2);r.\u0275\u0275advance(4),r.\u0275\u0275textInterpolate(e.product_file[0].remark)}}const $e=function(){return{width:"100%"}};function je(e,t){if(1&e&&r.\u0275\u0275element(0,"img",53),2&e){const e=r.\u0275\u0275nextContext(3);r.\u0275\u0275property("src",e.previewImage,r.\u0275\u0275sanitizeUrl)("ngStyle",r.\u0275\u0275pureFunction0(2,$e))}}function ze(e,t){if(1&e){const e=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"div",46),r.\u0275\u0275elementStart(1,"div",18),r.\u0275\u0275text(2,"\u4ea7\u54c1\u6863\u6848\u56fe\u7247\uff1a"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(3,"div",24),r.\u0275\u0275elementStart(4,"div",47),r.\u0275\u0275elementStart(5,"dw-upload",48),r.\u0275\u0275listener("dwFileListChange",function(t){return r.\u0275\u0275restoreView(e),r.\u0275\u0275nextContext(2).fileList=t}),r.\u0275\u0275element(6,"em",49),r.\u0275\u0275elementStart(7,"div",50),r.\u0275\u0275text(8,"Upload"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(9,"dw-modal",51),r.\u0275\u0275listener("dwOnCancel",function(){return r.\u0275\u0275restoreView(e),r.\u0275\u0275nextContext(2).previewVisible=!1}),r.\u0275\u0275template(10,je,1,3,"ng-template",null,52,r.\u0275\u0275templateRefExtractor),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd()}if(2&e){const e=r.\u0275\u0275reference(11),t=r.\u0275\u0275nextContext(2);r.\u0275\u0275advance(5),r.\u0275\u0275property("dwFileList",t.fileList)("dwShowButton",!1)("dwShowUploadList",t.showUploadList)("dwPreview",t.handlePreview),r.\u0275\u0275advance(4),r.\u0275\u0275property("dwVisible",t.previewVisible)("dwContent",e)("dwFooter",null)}}function Be(e,t){1&e&&r.\u0275\u0275element(0,"img",64)}function qe(e,t){1&e&&r.\u0275\u0275element(0,"img",65)}function We(e,t){1&e&&r.\u0275\u0275element(0,"img",66)}function Ge(e,t){1&e&&r.\u0275\u0275element(0,"img",67)}function Ue(e,t){1&e&&r.\u0275\u0275element(0,"img",68)}function He(e,t){if(1&e){const e=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"div",56),r.\u0275\u0275template(1,Be,1,0,"img",57),r.\u0275\u0275template(2,qe,1,0,"img",58),r.\u0275\u0275template(3,We,1,0,"img",59),r.\u0275\u0275template(4,Ge,1,0,"img",60),r.\u0275\u0275template(5,Ue,1,0,"img",61),r.\u0275\u0275elementStart(6,"div",40),r.\u0275\u0275text(7),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(8,"div",62),r.\u0275\u0275listener("click",function(){const t=r.\u0275\u0275restoreView(e).$implicit;return r.\u0275\u0275nextContext(3).downloadFile(t.uid)}),r.\u0275\u0275element(9,"em",63),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd()}if(2&e){const e=t.$implicit;r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",e.name.indexOf(".xls")>=0),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",e.name.indexOf(".doc")>=0),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",e.name.indexOf(".pdf")>=0),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",e.name.indexOf(".ppt")>=0),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",e.name.indexOf(".png")>=0||e.name.indexOf(".jpg")>=0),r.\u0275\u0275advance(2),r.\u0275\u0275textInterpolate(e.name)}}function Xe(e,t){if(1&e&&(r.\u0275\u0275elementStart(0,"div",46),r.\u0275\u0275elementStart(1,"div",18),r.\u0275\u0275text(2,"\u9644\u4ef6\uff1a"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(3,"div",24),r.\u0275\u0275elementStart(4,"div",54),r.\u0275\u0275template(5,He,10,6,"div",55),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd()),2&e){const e=r.\u0275\u0275nextContext(2);r.\u0275\u0275advance(5),r.\u0275\u0275property("ngForOf",e.attachmentsList)}}function Qe(e,t){1&e&&(r.\u0275\u0275elementStart(0,"th",79),r.\u0275\u0275elementStart(1,"span",80),r.\u0275\u0275text(2,"\u8bbe\u5907\u7f16\u53f7"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd())}function Ke(e,t){1&e&&(r.\u0275\u0275elementStart(0,"th",79),r.\u0275\u0275elementStart(1,"span",80),r.\u0275\u0275text(2,"\u8bbe\u5907\u540d\u79f0"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd())}function Je(e,t){1&e&&(r.\u0275\u0275elementStart(0,"th",81),r.\u0275\u0275elementStart(1,"span",80),r.\u0275\u0275text(2,"\u89c4\u683c"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd())}function Ze(e,t){1&e&&(r.\u0275\u0275elementStart(0,"th",81),r.\u0275\u0275elementStart(1,"span",80),r.\u0275\u0275text(2,"\u578b\u53f7"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd())}function Ye(e,t){1&e&&(r.\u0275\u0275elementStart(0,"th",81),r.\u0275\u0275elementStart(1,"span",80),r.\u0275\u0275text(2,"\u5206\u7c7b"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd())}function et(e,t){1&e&&(r.\u0275\u0275elementStart(0,"th",82),r.\u0275\u0275elementStart(1,"span",80),r.\u0275\u0275text(2,"\u5e8f\u5217\u53f7"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd())}function tt(e,t){1&e&&(r.\u0275\u0275elementStart(0,"th",83),r.\u0275\u0275elementStart(1,"span",80),r.\u0275\u0275text(2,"\u6570\u91cf"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd())}function nt(e,t){1&e&&(r.\u0275\u0275elementStart(0,"th",79),r.\u0275\u0275elementStart(1,"span",80),r.\u0275\u0275text(2,"\u5907\u6ce8"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd())}function it(e,t){if(1&e&&(r.\u0275\u0275elementStart(0,"td"),r.\u0275\u0275text(1),r.\u0275\u0275elementEnd()),2&e){const e=r.\u0275\u0275nextContext().$implicit;r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate1(" ",e.code," ")}}function rt(e,t){if(1&e&&(r.\u0275\u0275elementStart(0,"td"),r.\u0275\u0275text(1),r.\u0275\u0275elementEnd()),2&e){const e=r.\u0275\u0275nextContext().$implicit;r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate1(" ",e.name," ")}}function at(e,t){if(1&e&&(r.\u0275\u0275elementStart(0,"td"),r.\u0275\u0275text(1),r.\u0275\u0275elementEnd()),2&e){const e=r.\u0275\u0275nextContext().$implicit;r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate1(" ",e.specification," ")}}function ot(e,t){if(1&e&&(r.\u0275\u0275elementStart(0,"td"),r.\u0275\u0275text(1),r.\u0275\u0275elementEnd()),2&e){const e=r.\u0275\u0275nextContext().$implicit;r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate1(" ",e.model," ")}}function lt(e,t){if(1&e&&(r.\u0275\u0275elementStart(0,"td"),r.\u0275\u0275text(1),r.\u0275\u0275elementEnd()),2&e){const e=r.\u0275\u0275nextContext().$implicit;r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate1(" ",e.item_group_name," ")}}function dt(e,t){if(1&e&&(r.\u0275\u0275elementStart(0,"td"),r.\u0275\u0275text(1),r.\u0275\u0275elementEnd()),2&e){const e=r.\u0275\u0275nextContext().$implicit;r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate1(" ",e.sn," ")}}function st(e,t){if(1&e&&(r.\u0275\u0275elementStart(0,"td",87),r.\u0275\u0275text(1),r.\u0275\u0275elementEnd()),2&e){const e=r.\u0275\u0275nextContext().$implicit;r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate1(" ",e.quantity," ")}}function ct(e,t){if(1&e&&(r.\u0275\u0275elementStart(0,"td"),r.\u0275\u0275text(1),r.\u0275\u0275elementEnd()),2&e){const e=r.\u0275\u0275nextContext().$implicit;r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate1(" ",e.remark," ")}}function mt(e,t){1&e&&(r.\u0275\u0275elementContainerStart(0),r.\u0275\u0275elementStart(1,"tr",84),r.\u0275\u0275template(2,it,2,1,"td",85),r.\u0275\u0275template(3,rt,2,1,"td",85),r.\u0275\u0275template(4,at,2,1,"td",85),r.\u0275\u0275template(5,ot,2,1,"td",85),r.\u0275\u0275template(6,lt,2,1,"td",85),r.\u0275\u0275template(7,dt,2,1,"td",85),r.\u0275\u0275template(8,st,2,1,"td",86),r.\u0275\u0275template(9,ct,2,1,"td",85),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementContainerEnd()),2&e&&(r.\u0275\u0275advance(2),r.\u0275\u0275property("dwColumnId","code"),r.\u0275\u0275advance(1),r.\u0275\u0275property("dwColumnId","name"),r.\u0275\u0275advance(1),r.\u0275\u0275property("dwColumnId","specification"),r.\u0275\u0275advance(1),r.\u0275\u0275property("dwColumnId","model"),r.\u0275\u0275advance(1),r.\u0275\u0275property("dwColumnId","item_group_name"),r.\u0275\u0275advance(1),r.\u0275\u0275property("dwColumnId","sn"),r.\u0275\u0275advance(1),r.\u0275\u0275property("dwColumnId","quantity"),r.\u0275\u0275advance(1),r.\u0275\u0275property("dwColumnId","remark"))}const pt=function(){return{x:"1000px"}};function ut(e,t){if(1&e){const e=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"dw-tab",69),r.\u0275\u0275elementStart(1,"div",15),r.\u0275\u0275elementStart(2,"div",70),r.\u0275\u0275elementStart(3,"dw-form-item"),r.\u0275\u0275elementStart(4,"dw-form-control"),r.\u0275\u0275elementStart(5,"dw-table",71,72),r.\u0275\u0275listener("dwPageIndexChange",function(t){return r.\u0275\u0275restoreView(e),r.\u0275\u0275nextContext(2).search2.pageIndex=t})("dwPageSizeChange",function(t){return r.\u0275\u0275restoreView(e),r.\u0275\u0275nextContext(2).search2.pageSize=t})("dwPageSizeOptionsChange",function(t){return r.\u0275\u0275restoreView(e),r.\u0275\u0275nextContext(2).search2.pageSizeOptions=t}),r.\u0275\u0275elementStart(7,"thead"),r.\u0275\u0275elementStart(8,"tr",73),r.\u0275\u0275template(9,Qe,3,0,"th",74),r.\u0275\u0275template(10,Ke,3,0,"th",74),r.\u0275\u0275template(11,Je,3,0,"th",75),r.\u0275\u0275template(12,Ze,3,0,"th",75),r.\u0275\u0275template(13,Ye,3,0,"th",75),r.\u0275\u0275template(14,et,3,0,"th",76),r.\u0275\u0275template(15,tt,3,0,"th",77),r.\u0275\u0275template(16,nt,3,0,"th",74),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(17,"tbody"),r.\u0275\u0275template(18,mt,10,8,"ng-container",78),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd()}if(2&e){const e=r.\u0275\u0275reference(6),t=r.\u0275\u0275nextContext(2);r.\u0275\u0275advance(5),r.\u0275\u0275property("dwPageIndex",t.search2.pageIndex)("dwData",t.product_equipment_list)("dwPageSize",t.search2.pageSize)("dwPageSizeOptions",t.search2.pageSizeOptions)("dwScroll",r.\u0275\u0275pureFunction0(14,pt)),r.\u0275\u0275advance(4),r.\u0275\u0275property("dwColumnId","code"),r.\u0275\u0275advance(1),r.\u0275\u0275property("dwColumnId","name"),r.\u0275\u0275advance(1),r.\u0275\u0275property("dwColumnId","specification"),r.\u0275\u0275advance(1),r.\u0275\u0275property("dwColumnId","model"),r.\u0275\u0275advance(1),r.\u0275\u0275property("dwColumnId","item_group_name"),r.\u0275\u0275advance(1),r.\u0275\u0275property("dwColumnId","sn"),r.\u0275\u0275advance(1),r.\u0275\u0275property("dwColumnId","quantity"),r.\u0275\u0275advance(1),r.\u0275\u0275property("dwColumnId","remark"),r.\u0275\u0275advance(2),r.\u0275\u0275property("ngForOf",e.data)}}function ht(e,t){1&e&&(r.\u0275\u0275elementStart(0,"th",94),r.\u0275\u0275elementStart(1,"span",80),r.\u0275\u0275text(2,"\u8bbe\u5907"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd())}function gt(e,t){1&e&&(r.\u0275\u0275elementStart(0,"th",94),r.\u0275\u0275elementStart(1,"span",80),r.\u0275\u0275text(2,"\u8bbe\u5907\u5e8f\u5217\u53f7"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd())}function ft(e,t){1&e&&(r.\u0275\u0275elementStart(0,"th",95),r.\u0275\u0275elementStart(1,"span",80),r.\u0275\u0275text(2,"\u914d\u4ef6\u7f16\u53f7"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd())}function wt(e,t){1&e&&(r.\u0275\u0275elementStart(0,"th",81),r.\u0275\u0275elementStart(1,"span",80),r.\u0275\u0275text(2,"\u914d\u4ef6\u540d\u79f0"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd())}function vt(e,t){1&e&&(r.\u0275\u0275elementStart(0,"th",96),r.\u0275\u0275elementStart(1,"span",80),r.\u0275\u0275text(2,"\u89c4\u683c"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd())}function xt(e,t){1&e&&(r.\u0275\u0275elementStart(0,"th",81),r.\u0275\u0275elementStart(1,"span",80),r.\u0275\u0275text(2,"\u578b\u53f7"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd())}function Ct(e,t){1&e&&(r.\u0275\u0275elementStart(0,"th",82),r.\u0275\u0275elementStart(1,"span",80),r.\u0275\u0275text(2,"\u5e8f\u5217\u53f7"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd())}function _t(e,t){1&e&&(r.\u0275\u0275elementStart(0,"th",97),r.\u0275\u0275elementStart(1,"span",80),r.\u0275\u0275text(2,"\u5355\u4f4d"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd())}function yt(e,t){1&e&&(r.\u0275\u0275elementStart(0,"th",96),r.\u0275\u0275elementStart(1,"span",80),r.\u0275\u0275text(2,"\u5355\u4f4d\u6570\u91cf"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd())}function St(e,t){1&e&&(r.\u0275\u0275elementStart(0,"th",96),r.\u0275\u0275elementStart(1,"span",80),r.\u0275\u0275text(2,"\u7c7b\u578b"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd())}function bt(e,t){1&e&&(r.\u0275\u0275elementStart(0,"th",81),r.\u0275\u0275elementStart(1,"span",80),r.\u0275\u0275text(2,"\u4fdd\u4fee\u622a\u6b62\u65e5\u671f"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd())}function It(e,t){1&e&&(r.\u0275\u0275elementStart(0,"th",81),r.\u0275\u0275elementStart(1,"span",80),r.\u0275\u0275text(2,"\u5230\u671f\u66f4\u6362\u65e5\u671f"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd())}function Et(e,t){1&e&&(r.\u0275\u0275elementStart(0,"th",79),r.\u0275\u0275elementStart(1,"span",80),r.\u0275\u0275text(2,"\u5907\u6ce8"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd())}const Dt=function(e){return{display:e}};function Ot(e,t){if(1&e&&(r.\u0275\u0275elementStart(0,"td",99),r.\u0275\u0275text(1),r.\u0275\u0275elementEnd()),2&e){const e=r.\u0275\u0275nextContext().index,t=r.\u0275\u0275nextContext().$implicit;r.\u0275\u0275property("ngStyle",r.\u0275\u0275pureFunction1(3,Dt,0===e?"":"none")),r.\u0275\u0275attribute("rowspan",t.child.product_part.length),r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate1(" ",t.name," ")}}function Mt(e,t){if(1&e&&(r.\u0275\u0275elementStart(0,"td",99),r.\u0275\u0275text(1),r.\u0275\u0275elementEnd()),2&e){const e=r.\u0275\u0275nextContext().index,t=r.\u0275\u0275nextContext().$implicit;r.\u0275\u0275property("ngStyle",r.\u0275\u0275pureFunction1(3,Dt,0===e?"":"none")),r.\u0275\u0275attribute("rowspan",t.child.product_part.length),r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate1(" ",t.sn," ")}}function Pt(e,t){1&e&&(r.\u0275\u0275elementStart(0,"span",101),r.\u0275\u0275element(1,"em",102),r.\u0275\u0275elementEnd())}function kt(e,t){if(1&e&&(r.\u0275\u0275elementStart(0,"td"),r.\u0275\u0275template(1,Pt,2,0,"span",100),r.\u0275\u0275text(2),r.\u0275\u0275elementEnd()),2&e){const e=r.\u0275\u0275nextContext().$implicit;r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",e.quickwear_part),r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate1(" ",e.material_code," ")}}function Ft(e,t){if(1&e&&(r.\u0275\u0275elementStart(0,"td"),r.\u0275\u0275text(1),r.\u0275\u0275elementEnd()),2&e){const e=r.\u0275\u0275nextContext().$implicit;r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate1(" ",e.material_name," ")}}function Vt(e,t){if(1&e&&(r.\u0275\u0275elementStart(0,"td"),r.\u0275\u0275text(1),r.\u0275\u0275elementEnd()),2&e){const e=r.\u0275\u0275nextContext().$implicit;r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate1(" ",e.specification," ")}}function Tt(e,t){if(1&e&&(r.\u0275\u0275elementStart(0,"td"),r.\u0275\u0275text(1),r.\u0275\u0275elementEnd()),2&e){const e=r.\u0275\u0275nextContext().$implicit;r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate1(" ",e.model," ")}}function Lt(e,t){if(1&e&&(r.\u0275\u0275elementStart(0,"td"),r.\u0275\u0275text(1),r.\u0275\u0275elementEnd()),2&e){const e=r.\u0275\u0275nextContext().$implicit;r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate1(" ",e.sn," ")}}function Rt(e,t){if(1&e&&(r.\u0275\u0275elementStart(0,"td"),r.\u0275\u0275text(1),r.\u0275\u0275elementEnd()),2&e){const e=r.\u0275\u0275nextContext().$implicit;r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate1(" ",e.unit," ")}}function At(e,t){if(1&e&&(r.\u0275\u0275elementStart(0,"td",87),r.\u0275\u0275text(1),r.\u0275\u0275elementEnd()),2&e){const e=r.\u0275\u0275nextContext().$implicit;r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate1(" ",e.unit_qty," ")}}function Nt(e,t){if(1&e&&(r.\u0275\u0275elementStart(0,"td"),r.\u0275\u0275text(1),r.\u0275\u0275elementEnd()),2&e){const e=r.\u0275\u0275nextContext().$implicit;r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate1(" ",e.item_group_name," ")}}function $t(e,t){if(1&e&&(r.\u0275\u0275elementStart(0,"td"),r.\u0275\u0275text(1),r.\u0275\u0275pipe(2,"date"),r.\u0275\u0275elementEnd()),2&e){const e=r.\u0275\u0275nextContext().$implicit;r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate1(" ",r.\u0275\u0275pipeBind2(2,1,e.expiry_date,"yyyy-MM-dd")," ")}}function jt(e,t){if(1&e&&(r.\u0275\u0275elementStart(0,"td"),r.\u0275\u0275text(1),r.\u0275\u0275pipe(2,"date"),r.\u0275\u0275elementEnd()),2&e){const e=r.\u0275\u0275nextContext().$implicit;r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate1(" ",r.\u0275\u0275pipeBind2(2,1,e.replacement_date,"yyyy-MM-dd")," ")}}function zt(e,t){if(1&e&&(r.\u0275\u0275elementStart(0,"td"),r.\u0275\u0275text(1),r.\u0275\u0275elementEnd()),2&e){const e=r.\u0275\u0275nextContext().$implicit;r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate1(" ",e.remark," ")}}function Bt(e,t){1&e&&(r.\u0275\u0275elementContainerStart(0),r.\u0275\u0275elementStart(1,"tr",84),r.\u0275\u0275template(2,Ot,2,5,"td",98),r.\u0275\u0275template(3,Mt,2,5,"td",98),r.\u0275\u0275template(4,kt,3,2,"td",85),r.\u0275\u0275template(5,Ft,2,1,"td",85),r.\u0275\u0275template(6,Vt,2,1,"td",85),r.\u0275\u0275template(7,Tt,2,1,"td",85),r.\u0275\u0275template(8,Lt,2,1,"td",85),r.\u0275\u0275template(9,Rt,2,1,"td",85),r.\u0275\u0275template(10,At,2,1,"td",86),r.\u0275\u0275template(11,Nt,2,1,"td",85),r.\u0275\u0275template(12,$t,3,4,"td",85),r.\u0275\u0275template(13,jt,3,4,"td",85),r.\u0275\u0275template(14,zt,2,1,"td",85),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementContainerEnd()),2&e&&(r.\u0275\u0275advance(2),r.\u0275\u0275property("dwColumnId","equipment_name"),r.\u0275\u0275advance(1),r.\u0275\u0275property("dwColumnId","equipment_sn"),r.\u0275\u0275advance(1),r.\u0275\u0275property("dwColumnId","material_code"),r.\u0275\u0275advance(1),r.\u0275\u0275property("dwColumnId","material_name"),r.\u0275\u0275advance(1),r.\u0275\u0275property("dwColumnId","specification"),r.\u0275\u0275advance(1),r.\u0275\u0275property("dwColumnId","model"),r.\u0275\u0275advance(1),r.\u0275\u0275property("dwColumnId","sn"),r.\u0275\u0275advance(1),r.\u0275\u0275property("dwColumnId","unit"),r.\u0275\u0275advance(1),r.\u0275\u0275property("dwColumnId","unit_qty"),r.\u0275\u0275advance(1),r.\u0275\u0275property("dwColumnId","item_group_name"),r.\u0275\u0275advance(1),r.\u0275\u0275property("dwColumnId","expiry_date"),r.\u0275\u0275advance(1),r.\u0275\u0275property("dwColumnId","replacement_date"),r.\u0275\u0275advance(1),r.\u0275\u0275property("dwColumnId","remark"))}function qt(e,t){if(1&e&&(r.\u0275\u0275elementContainerStart(0),r.\u0275\u0275template(1,Bt,15,13,"ng-container",78),r.\u0275\u0275elementContainerEnd()),2&e){const e=t.$implicit;r.\u0275\u0275advance(1),r.\u0275\u0275property("ngForOf",e.child.product_part)}}const Wt=function(){return{x:"1200px"}};function Gt(e,t){if(1&e){const e=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"dw-tab",88),r.\u0275\u0275elementStart(1,"div",15),r.\u0275\u0275elementStart(2,"div",70),r.\u0275\u0275elementStart(3,"dw-form-item"),r.\u0275\u0275elementStart(4,"dw-form-control"),r.\u0275\u0275elementStart(5,"dw-table",89,72),r.\u0275\u0275listener("dwPageIndexChange",function(t){return r.\u0275\u0275restoreView(e),r.\u0275\u0275nextContext(2).search.pageIndex=t})("dwPageSizeChange",function(t){return r.\u0275\u0275restoreView(e),r.\u0275\u0275nextContext(2).search.pageSize=t})("dwPageSizeOptionsChange",function(t){return r.\u0275\u0275restoreView(e),r.\u0275\u0275nextContext(2).search.pageSizeOptions=t}),r.\u0275\u0275elementStart(7,"thead"),r.\u0275\u0275elementStart(8,"tr",73),r.\u0275\u0275template(9,ht,3,0,"th",90),r.\u0275\u0275template(10,gt,3,0,"th",90),r.\u0275\u0275template(11,ft,3,0,"th",91),r.\u0275\u0275template(12,wt,3,0,"th",75),r.\u0275\u0275template(13,vt,3,0,"th",92),r.\u0275\u0275template(14,xt,3,0,"th",75),r.\u0275\u0275template(15,Ct,3,0,"th",76),r.\u0275\u0275template(16,_t,3,0,"th",93),r.\u0275\u0275template(17,yt,3,0,"th",92),r.\u0275\u0275template(18,St,3,0,"th",92),r.\u0275\u0275template(19,bt,3,0,"th",75),r.\u0275\u0275template(20,It,3,0,"th",75),r.\u0275\u0275template(21,Et,3,0,"th",74),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(22,"tbody"),r.\u0275\u0275template(23,qt,2,1,"ng-container",78),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd()}if(2&e){const e=r.\u0275\u0275reference(6),t=r.\u0275\u0275nextContext(2);r.\u0275\u0275advance(5),r.\u0275\u0275property("dwPageIndex",t.search.pageIndex)("dwData",t.product_part)("dwPageSize",t.search.pageSize)("dwPageSizeOptions",t.search.pageSizeOptions)("dwScroll",r.\u0275\u0275pureFunction0(19,Wt)),r.\u0275\u0275advance(4),r.\u0275\u0275property("dwColumnId","equipment_name"),r.\u0275\u0275advance(1),r.\u0275\u0275property("dwColumnId","equipment_sn"),r.\u0275\u0275advance(1),r.\u0275\u0275property("dwColumnId","material_code"),r.\u0275\u0275advance(1),r.\u0275\u0275property("dwColumnId","material_name"),r.\u0275\u0275advance(1),r.\u0275\u0275property("dwColumnId","specification"),r.\u0275\u0275advance(1),r.\u0275\u0275property("dwColumnId","model"),r.\u0275\u0275advance(1),r.\u0275\u0275property("dwColumnId","sn"),r.\u0275\u0275advance(1),r.\u0275\u0275property("dwColumnId","unit"),r.\u0275\u0275advance(1),r.\u0275\u0275property("dwColumnId","unit_qty"),r.\u0275\u0275advance(1),r.\u0275\u0275property("dwColumnId","item_group_name"),r.\u0275\u0275advance(1),r.\u0275\u0275property("dwColumnId","expiry_date"),r.\u0275\u0275advance(1),r.\u0275\u0275property("dwColumnId","replacement_date"),r.\u0275\u0275advance(1),r.\u0275\u0275property("dwColumnId","remark"),r.\u0275\u0275advance(2),r.\u0275\u0275property("ngForOf",e.data)}}function Ut(e,t){1&e&&(r.\u0275\u0275elementStart(0,"th",79),r.\u0275\u0275elementStart(1,"span",80),r.\u0275\u0275text(2,"\u914d\u4ef6\u7f16\u53f7"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd())}function Ht(e,t){1&e&&(r.\u0275\u0275elementStart(0,"th",79),r.\u0275\u0275elementStart(1,"span",80),r.\u0275\u0275text(2,"\u914d\u4ef6\u540d\u79f0"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd())}function Xt(e,t){1&e&&(r.\u0275\u0275elementStart(0,"th",81),r.\u0275\u0275elementStart(1,"span",80),r.\u0275\u0275text(2,"\u89c4\u683c"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd())}function Qt(e,t){1&e&&(r.\u0275\u0275elementStart(0,"th",81),r.\u0275\u0275elementStart(1,"span",80),r.\u0275\u0275text(2,"\u578b\u53f7"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd())}function Kt(e,t){1&e&&(r.\u0275\u0275elementStart(0,"th",82),r.\u0275\u0275elementStart(1,"span",80),r.\u0275\u0275text(2,"\u5e8f\u5217\u53f7"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd())}function Jt(e,t){1&e&&(r.\u0275\u0275elementStart(0,"th",97),r.\u0275\u0275elementStart(1,"span",80),r.\u0275\u0275text(2,"\u5355\u4f4d"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd())}function Zt(e,t){1&e&&(r.\u0275\u0275elementStart(0,"th",105),r.\u0275\u0275elementStart(1,"span",80),r.\u0275\u0275text(2,"\u5355\u4f4d\u6570\u91cf"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd())}function Yt(e,t){1&e&&(r.\u0275\u0275elementStart(0,"th",81),r.\u0275\u0275elementStart(1,"span",80),r.\u0275\u0275text(2,"\u7c7b\u578b"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd())}function en(e,t){1&e&&(r.\u0275\u0275elementStart(0,"th",81),r.\u0275\u0275elementStart(1,"span",80),r.\u0275\u0275text(2,"\u4fdd\u4fee\u622a\u6b62\u65e5\u671f"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd())}function tn(e,t){1&e&&(r.\u0275\u0275elementStart(0,"th",81),r.\u0275\u0275elementStart(1,"span",80),r.\u0275\u0275text(2,"\u5230\u671f\u66f4\u6362\u65e5\u671f"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd())}function nn(e,t){1&e&&(r.\u0275\u0275elementStart(0,"th",79),r.\u0275\u0275elementStart(1,"span",80),r.\u0275\u0275text(2,"\u5907\u6ce8"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd())}function rn(e,t){1&e&&(r.\u0275\u0275elementStart(0,"span",101),r.\u0275\u0275element(1,"em",102),r.\u0275\u0275elementEnd())}function an(e,t){if(1&e&&(r.\u0275\u0275elementStart(0,"td"),r.\u0275\u0275template(1,rn,2,0,"span",100),r.\u0275\u0275text(2),r.\u0275\u0275elementEnd()),2&e){const e=r.\u0275\u0275nextContext().$implicit;r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",e.quickwear_part),r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate1(" ",e.material_code," ")}}function on(e,t){if(1&e&&(r.\u0275\u0275elementStart(0,"td"),r.\u0275\u0275text(1),r.\u0275\u0275elementEnd()),2&e){const e=r.\u0275\u0275nextContext().$implicit;r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate1(" ",e.material_name," ")}}function ln(e,t){if(1&e&&(r.\u0275\u0275elementStart(0,"td"),r.\u0275\u0275text(1),r.\u0275\u0275elementEnd()),2&e){const e=r.\u0275\u0275nextContext().$implicit;r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate1(" ",e.specification," ")}}function dn(e,t){if(1&e&&(r.\u0275\u0275elementStart(0,"td"),r.\u0275\u0275text(1),r.\u0275\u0275elementEnd()),2&e){const e=r.\u0275\u0275nextContext().$implicit;r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate1(" ",e.model," ")}}function sn(e,t){if(1&e&&(r.\u0275\u0275elementStart(0,"td"),r.\u0275\u0275text(1),r.\u0275\u0275elementEnd()),2&e){const e=r.\u0275\u0275nextContext().$implicit;r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate1(" ",e.sn," ")}}function cn(e,t){if(1&e&&(r.\u0275\u0275elementStart(0,"td",107),r.\u0275\u0275text(1),r.\u0275\u0275elementEnd()),2&e){const e=r.\u0275\u0275nextContext().$implicit;r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate1(" ",e.unit," ")}}function mn(e,t){if(1&e&&(r.\u0275\u0275elementStart(0,"td",87),r.\u0275\u0275text(1),r.\u0275\u0275elementEnd()),2&e){const e=r.\u0275\u0275nextContext().$implicit;r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate1(" ",e.unit_qty," ")}}function pn(e,t){if(1&e&&(r.\u0275\u0275elementStart(0,"td"),r.\u0275\u0275text(1),r.\u0275\u0275elementEnd()),2&e){const e=r.\u0275\u0275nextContext().$implicit;r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate1(" ",e.item_group_name," ")}}function un(e,t){if(1&e&&(r.\u0275\u0275elementStart(0,"td"),r.\u0275\u0275text(1),r.\u0275\u0275pipe(2,"date"),r.\u0275\u0275elementEnd()),2&e){const e=r.\u0275\u0275nextContext().$implicit;r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate1(" ",r.\u0275\u0275pipeBind2(2,1,e.expiry_date,"yyyy-MM-dd")," ")}}function hn(e,t){if(1&e&&(r.\u0275\u0275elementStart(0,"td"),r.\u0275\u0275text(1),r.\u0275\u0275pipe(2,"date"),r.\u0275\u0275elementEnd()),2&e){const e=r.\u0275\u0275nextContext().$implicit;r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate1(" ",r.\u0275\u0275pipeBind2(2,1,e.replacement_date,"yyyy-MM-dd")," ")}}function gn(e,t){if(1&e&&(r.\u0275\u0275elementStart(0,"td"),r.\u0275\u0275text(1),r.\u0275\u0275elementEnd()),2&e){const e=r.\u0275\u0275nextContext().$implicit;r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate1(" ",e.remark," ")}}function fn(e,t){1&e&&(r.\u0275\u0275elementContainerStart(0),r.\u0275\u0275elementStart(1,"tr",84),r.\u0275\u0275template(2,an,3,2,"td",85),r.\u0275\u0275template(3,on,2,1,"td",85),r.\u0275\u0275template(4,ln,2,1,"td",85),r.\u0275\u0275template(5,dn,2,1,"td",85),r.\u0275\u0275template(6,sn,2,1,"td",85),r.\u0275\u0275template(7,cn,2,1,"td",106),r.\u0275\u0275template(8,mn,2,1,"td",86),r.\u0275\u0275template(9,pn,2,1,"td",85),r.\u0275\u0275template(10,un,3,4,"td",85),r.\u0275\u0275template(11,hn,3,4,"td",85),r.\u0275\u0275template(12,gn,2,1,"td",85),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementContainerEnd()),2&e&&(r.\u0275\u0275advance(2),r.\u0275\u0275property("dwColumnId","material_code"),r.\u0275\u0275advance(1),r.\u0275\u0275property("dwColumnId","material_name"),r.\u0275\u0275advance(1),r.\u0275\u0275property("dwColumnId","specification"),r.\u0275\u0275advance(1),r.\u0275\u0275property("dwColumnId","model"),r.\u0275\u0275advance(1),r.\u0275\u0275property("dwColumnId","sn"),r.\u0275\u0275advance(1),r.\u0275\u0275property("dwColumnId","unit"),r.\u0275\u0275advance(1),r.\u0275\u0275property("dwColumnId","unit_qty"),r.\u0275\u0275advance(1),r.\u0275\u0275property("dwColumnId","item_group_name"),r.\u0275\u0275advance(1),r.\u0275\u0275property("dwColumnId","expiry_date"),r.\u0275\u0275advance(1),r.\u0275\u0275property("dwColumnId","replacement_date"),r.\u0275\u0275advance(1),r.\u0275\u0275property("dwColumnId","remark"))}const wn=function(){return{x:"1080px"}};function vn(e,t){if(1&e){const e=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"dw-tab",88),r.\u0275\u0275elementStart(1,"div",15),r.\u0275\u0275elementStart(2,"div",70),r.\u0275\u0275elementStart(3,"dw-form-item"),r.\u0275\u0275elementStart(4,"dw-form-control"),r.\u0275\u0275elementStart(5,"dw-table",103,72),r.\u0275\u0275listener("dwPageIndexChange",function(t){return r.\u0275\u0275restoreView(e),r.\u0275\u0275nextContext(2).search.pageIndex=t})("dwPageSizeChange",function(t){return r.\u0275\u0275restoreView(e),r.\u0275\u0275nextContext(2).search.pageSize=t})("dwPageSizeOptionsChange",function(t){return r.\u0275\u0275restoreView(e),r.\u0275\u0275nextContext(2).search.pageSizeOptions=t}),r.\u0275\u0275elementStart(7,"thead"),r.\u0275\u0275elementStart(8,"tr",73),r.\u0275\u0275template(9,Ut,3,0,"th",74),r.\u0275\u0275template(10,Ht,3,0,"th",74),r.\u0275\u0275template(11,Xt,3,0,"th",75),r.\u0275\u0275template(12,Qt,3,0,"th",75),r.\u0275\u0275template(13,Kt,3,0,"th",76),r.\u0275\u0275template(14,Jt,3,0,"th",93),r.\u0275\u0275template(15,Zt,3,0,"th",104),r.\u0275\u0275template(16,Yt,3,0,"th",75),r.\u0275\u0275template(17,en,3,0,"th",75),r.\u0275\u0275template(18,tn,3,0,"th",75),r.\u0275\u0275template(19,nn,3,0,"th",74),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(20,"tbody"),r.\u0275\u0275template(21,fn,13,11,"ng-container",78),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd()}if(2&e){const e=r.\u0275\u0275reference(6),t=r.\u0275\u0275nextContext(2);r.\u0275\u0275advance(5),r.\u0275\u0275property("dwPageIndex",t.search.pageIndex)("dwData",t.product_part)("dwPageSize",t.search.pageSize)("dwPageSizeOptions",t.search.pageSizeOptions)("dwScroll",r.\u0275\u0275pureFunction0(17,wn)),r.\u0275\u0275advance(4),r.\u0275\u0275property("dwColumnId","material_code"),r.\u0275\u0275advance(1),r.\u0275\u0275property("dwColumnId","material_name"),r.\u0275\u0275advance(1),r.\u0275\u0275property("dwColumnId","specification"),r.\u0275\u0275advance(1),r.\u0275\u0275property("dwColumnId","model"),r.\u0275\u0275advance(1),r.\u0275\u0275property("dwColumnId","sn"),r.\u0275\u0275advance(1),r.\u0275\u0275property("dwColumnId","unit"),r.\u0275\u0275advance(1),r.\u0275\u0275property("dwColumnId","unit_qty"),r.\u0275\u0275advance(1),r.\u0275\u0275property("dwColumnId","item_group_name"),r.\u0275\u0275advance(1),r.\u0275\u0275property("dwColumnId","expiry_date"),r.\u0275\u0275advance(1),r.\u0275\u0275property("dwColumnId","replacement_date"),r.\u0275\u0275advance(1),r.\u0275\u0275property("dwColumnId","remark"),r.\u0275\u0275advance(2),r.\u0275\u0275property("ngForOf",e.data)}}function xn(e,t){if(1&e&&(r.\u0275\u0275elementStart(0,"div",24),r.\u0275\u0275text(1),r.\u0275\u0275pipe(2,"date"),r.\u0275\u0275elementEnd()),2&e){const e=r.\u0275\u0275nextContext().$implicit;r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate(r.\u0275\u0275pipeBind2(2,1,e.field_value,"yyyy-MM-dd"))}}function Cn(e,t){if(1&e&&(r.\u0275\u0275elementStart(0,"div",24),r.\u0275\u0275text(1),r.\u0275\u0275elementEnd()),2&e){const e=r.\u0275\u0275nextContext().$implicit;r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate(e.field_value)}}function _n(e,t){if(1&e&&(r.\u0275\u0275elementStart(0,"div",111),r.\u0275\u0275elementStart(1,"div",18),r.\u0275\u0275text(2),r.\u0275\u0275elementEnd(),r.\u0275\u0275template(3,xn,3,4,"div",45),r.\u0275\u0275template(4,Cn,2,1,"div",45),r.\u0275\u0275elementEnd()),2&e){const e=t.$implicit;r.\u0275\u0275advance(2),r.\u0275\u0275textInterpolate1("",e.field_label,"\uff1a"),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf","DATEPICKER"===e.field_type),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf","DATEPICKER"!==e.field_type)}}function yn(e,t){if(1&e&&(r.\u0275\u0275elementStart(0,"div",24),r.\u0275\u0275text(1),r.\u0275\u0275pipe(2,"date"),r.\u0275\u0275elementEnd()),2&e){const e=r.\u0275\u0275nextContext().$implicit;r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate(r.\u0275\u0275pipeBind2(2,1,e.field_value,"yyyy-MM-dd"))}}function Sn(e,t){if(1&e&&(r.\u0275\u0275elementStart(0,"div",24),r.\u0275\u0275text(1),r.\u0275\u0275elementEnd()),2&e){const e=r.\u0275\u0275nextContext().$implicit;r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate(e.field_value)}}function bn(e,t){if(1&e&&(r.\u0275\u0275elementStart(0,"div",111),r.\u0275\u0275elementStart(1,"div",18),r.\u0275\u0275text(2),r.\u0275\u0275elementEnd(),r.\u0275\u0275template(3,yn,3,4,"div",45),r.\u0275\u0275template(4,Sn,2,1,"div",45),r.\u0275\u0275elementEnd()),2&e){const e=t.$implicit;r.\u0275\u0275advance(2),r.\u0275\u0275textInterpolate1("",e.field_label,"\uff1a"),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf","DATEPICKER"===e.field_type),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf","DATEPICKER"!==e.field_type)}}function In(e,t){if(1&e&&(r.\u0275\u0275elementStart(0,"dw-tab",108),r.\u0275\u0275elementStart(1,"div",109),r.\u0275\u0275template(2,_n,5,3,"div",110),r.\u0275\u0275template(3,bn,5,3,"div",110),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd()),2&e){const e=r.\u0275\u0275nextContext(2);r.\u0275\u0275advance(2),r.\u0275\u0275property("ngForOf",e.custFieldsLeft),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngForOf",e.custFieldsRight)}}function En(e,t){if(1&e&&(r.\u0275\u0275elementStart(0,"div",113),r.\u0275\u0275text(1," \u60a8\u53ef\u5c06\u6b64\u4e8c\u7ef4\u7801\u8d34\u5728\u8bbe\u5907\u673a\u8eab\u4e0a\uff0c\u7528\u6237\u53ef\u626b\u7801\u8fdb\u884c\u5feb\u6377\u62a5\u4fee\u3002 "),r.\u0275\u0275element(2,"img",114),r.\u0275\u0275elementEnd()),2&e){const e=r.\u0275\u0275nextContext(3);r.\u0275\u0275advance(2),r.\u0275\u0275property("src",e.product_file[0].qrCodeContext,r.\u0275\u0275sanitizeUrl)}}function Dn(e,t){1&e&&(r.\u0275\u0275elementStart(0,"div",113),r.\u0275\u0275text(1," \u8be5\u8bbe\u5907\u6682\u65e0\u4e8c\u7ef4\u7801 "),r.\u0275\u0275elementEnd())}function On(e,t){if(1&e&&(r.\u0275\u0275template(0,En,3,1,"div",112),r.\u0275\u0275template(1,Dn,2,0,"div",112)),2&e){const e=r.\u0275\u0275nextContext(2);r.\u0275\u0275property("ngIf",e.product_file[0].qrCodeContext),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",!e.product_file[0].qrCodeContext)}}const Mn=function(){return{height:"calc(100% - 55px)",overflow:"auto","padding-bottom":"24px"}};function Pn(e,t){if(1&e){const e=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"form",12),r.\u0275\u0275elementStart(1,"dw-tabset",13),r.\u0275\u0275elementStart(2,"dw-tab",14),r.\u0275\u0275elementStart(3,"div",15),r.\u0275\u0275template(4,Q,5,1,"div",16),r.\u0275\u0275template(5,K,5,1,"div",16),r.\u0275\u0275elementStart(6,"div",17),r.\u0275\u0275elementStart(7,"div",18),r.\u0275\u0275text(8,"\u552e\u540e\u72b6\u6001\uff1a"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(9,"div",19),r.\u0275\u0275template(10,J,2,0,"span",20),r.\u0275\u0275template(11,Z,2,0,"span",21),r.\u0275\u0275template(12,Y,2,0,"span",22),r.\u0275\u0275template(13,ne,13,8,"div",23),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd(),r.\u0275\u0275template(14,ie,5,1,"div",16),r.\u0275\u0275template(15,re,5,1,"div",16),r.\u0275\u0275template(16,ae,5,1,"div",16),r.\u0275\u0275template(17,de,5,3,"div",16),r.\u0275\u0275template(18,se,5,1,"div",16),r.\u0275\u0275template(19,ce,5,1,"div",16),r.\u0275\u0275template(20,me,5,1,"div",16),r.\u0275\u0275template(21,pe,5,1,"div",16),r.\u0275\u0275template(22,ue,5,1,"div",16),r.\u0275\u0275template(23,he,6,4,"div",16),r.\u0275\u0275template(24,we,6,2,"div",16),r.\u0275\u0275template(25,ve,6,4,"div",16),r.\u0275\u0275template(26,xe,6,4,"div",16),r.\u0275\u0275template(27,Ce,5,1,"div",16),r.\u0275\u0275template(28,_e,5,1,"div",16),r.\u0275\u0275elementStart(29,"div",17),r.\u0275\u0275elementStart(30,"div",18),r.\u0275\u0275text(31,"\u7ef4\u62a4\u4fdd\u517b\uff1a"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(32,"div",24),r.\u0275\u0275template(33,ye,2,0,"ng-container",25),r.\u0275\u0275template(34,Se,2,0,"ng-container",25),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd(),r.\u0275\u0275template(35,be,6,4,"div",16),r.\u0275\u0275template(36,Ee,5,1,"div",16),r.\u0275\u0275template(37,Oe,5,1,"div",16),r.\u0275\u0275template(38,Fe,10,3,"ng-container",25),r.\u0275\u0275template(39,Re,10,3,"ng-container",25),r.\u0275\u0275template(40,Ae,5,1,"div",26),r.\u0275\u0275template(41,Ne,5,1,"div",26),r.\u0275\u0275template(42,ze,12,7,"div",26),r.\u0275\u0275template(43,Xe,6,1,"div",26),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd(),r.\u0275\u0275template(44,ut,19,15,"dw-tab",27),r.\u0275\u0275template(45,Gt,24,20,"dw-tab",28),r.\u0275\u0275template(46,vn,22,18,"dw-tab",28),r.\u0275\u0275template(47,In,4,2,"dw-tab",29),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(48,"dw-modal",30),r.\u0275\u0275listener("dwVisibleChange",function(t){return r.\u0275\u0275restoreView(e),r.\u0275\u0275nextContext().isShowQrcode=t})("dwOnCancel",function(){return r.\u0275\u0275restoreView(e),r.\u0275\u0275nextContext().handleCancel()})("dwOnOk",function(){return r.\u0275\u0275restoreView(e),r.\u0275\u0275nextContext().handleOk()}),r.\u0275\u0275template(49,On,2,2,"ng-template",31),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd()}if(2&e){const e=r.\u0275\u0275nextContext();r.\u0275\u0275advance(1),r.\u0275\u0275property("dwTabPosition","top")("dwType","line")("dwAnimated",!1),r.\u0275\u0275advance(3),r.\u0275\u0275property("ngIf",e.formConfigList.indexOf("product_file_code")>=0),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",e.formConfigList.indexOf("product_file_name")>=0),r.\u0275\u0275advance(5),r.\u0275\u0275property("ngIf","1"===e.product_file[0].service_status),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf","2"===e.product_file[0].service_status),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf","3"===e.product_file[0].service_status),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf","3"===e.product_file[0].service_status&&e.product_file[0].recycler),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",e.formConfigList.indexOf("item_group")>=0),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",e.formConfigList.indexOf("model")>=0),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",e.formConfigList.indexOf("specification")>=0),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",e.formConfigList.indexOf("sn")>=0),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",e.formConfigList.indexOf("customer")>=0),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",e.formConfigList.indexOf("customer")>=0),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",e.formConfigList.indexOf("location")>=0),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",e.formConfigList.indexOf("service_site")>=0),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",e.formConfigList.indexOf("employee")>=0),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",e.formConfigList.indexOf("delivery_date")>=0),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",e.formConfigList.indexOf("installation_date")>=0),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",e.formConfigList.indexOf("acceptance_date")>=0),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",e.formConfigList.indexOf("expiry_date")>=0),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",e.formConfigList.indexOf("commissioning_person")>=0),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",e.formConfigList.indexOf("acceptance_person")>=0),r.\u0275\u0275advance(5),r.\u0275\u0275property("ngIf","1"===e.product_file[0].enable_maintain),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf","0"===e.product_file[0].enable_maintain),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf","1"===e.basis_of_maintain),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf","1"===e.basis_of_maintain),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf","2"===e.basis_of_maintain),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf","1"===e.basis_of_maintain),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf","2"===e.basis_of_maintain),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",e.formConfigList.indexOf("product_description")>=0),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",e.formConfigList.indexOf("remark")>=0),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",e.formConfigList.indexOf("file")>=0),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",e.formConfigList.indexOf("attachment")>=0),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf","2"===e.fileType),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf","2"===e.fileType),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf","1"===e.fileType),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",e.productFileHasCustomizeField),r.\u0275\u0275advance(1),r.\u0275\u0275property("dwBodyStyle",r.\u0275\u0275pureFunction0(44,Mn))("dwMaskClosable",!0)("dwWidth",500)("dwVisible",e.isShowQrcode)("dwOkDisabled",!e.product_file[0].qrCodeContext)}}let kn=(()=>{class e{constructor(e,t,n,a,o,l,d){this.activeRoute=e,this.dwRoutingMessageSrv=t,this.doc=n,this.userService=a,this.productFileSrv=o,this.commonHttpService=l,this.message=d,this.visibleChanged=new r.EventEmitter,this.formConfigList=[],this.product_file=[],this.product_part=[],this.product_equipment_list=[],this.custFields=[],this.custFieldsLeft=[],this.custFieldsRight=[],this.showUploadList={showPreviewIcon:!0,showRemoveIcon:!1,showDownloadIcon:!1},this.id="",this.fileType="",this.type="",this.search={pageIndex:1,pageSize:10,pageSizeOptions:[10,20,30]},this.search2={pageIndex:1,pageSize:10,pageSizeOptions:[10,20,30]},this.displayData=[],this.itemGroupList=[],this.isShowQrcode=!1,this.userSite="",this.attachmentsList=[],this.userInfo={tenantId:"",userId:""},this.productFileHasCustomizeField=!1,this.basis_of_maintain="1",this.isVisible=!1,this.isRecycleVisible=!1,this.product_picture="",this.fileList=[],this.previewImage="",this.previewVisible=!1,this.handlePreview=e=>(0,i.mG)(this,void 0,void 0,function*(){!e.url&&!e.preview&&(e.preview=yield this.getBase64(e.originFileObj)),this.previewImage=e.url||e.preview,this.previewVisible=!0})}ngOnInit(){this.userInfo=this.userService.getUserInfo()}initData(e,t){console.log(e),this.commonHttpService.get("restful/service/autoSettings/CustomView/CustomView?viewId=product_file").subscribe(e=>{let t=[];e.data.config&&e.data.config.formConfig&&e.data.config.formConfig.length?(t=e.data.config.formConfig,p.R.product_file.length!==e.data.config.formConfig.length&&(t=p.R.product_file,t.forEach(t=>{e.data.config.formConfig.forEach(e=>{e.fieldKey===t.fieldKey&&(t.isTurnOn=e.isTurnOn)})}))):t=p.R.product_file;let n=[];t.forEach(e=>{e.isTurnOn&&n.push(e.fieldKey)}),this.formConfigList=n},e=>{e.hasOwnProperty("error")&&e.error.hasOwnProperty("errorMessage")&&e.error.errorMessage&&this.message.error(e.error.errorMessage)}),this.search.pageIndex=1,this.search2.pageIndex=1,this.product_file=[],this.product_part=[],this.product_equipment_list=[],this.attachmentsList=[],this.custFields=[],this.custFieldsLeft=[],this.custFieldsRight=[],this.id=e,this.fileType=t,this.productFileSrv.getProductFileDetail(e,t).subscribe(e=>{const t=e.data;if(this.product_file=t.product_file,this.product_part=t.product_file[0].child.product_part||[],this.product_equipment_list=t.product_file[0].child.product_equipment_list||[],"2"===this.product_file[0].file_type){const e=[];this.product_equipment_list.forEach(t=>{t.child.product_part&&t.child.product_part.forEach(t=>{e.push(Object.assign({},t))})}),this.product_part=e.length?JSON.parse(JSON.stringify(this.product_equipment_list)):[]}this.product_picture=t.product_file[0].product_picture,t.product_file[0].product_picture?this.fileList=[{uid:this.product_picture,name:t.product_file[0].file_name,status:"done",url:t.product_file[0].file_context}]:(this.fileList=[],this.previewImage=""),t.product_file[0].child.attachments.forEach(e=>{this.attachmentsList.push(e)}),this.attachmentsList.forEach(e=>{e.name=e.attachment_name,e.uid=e.attachment_id,e.state=""});const n=t.$custFieldsConfig?t.$custFieldsConfig.product_file:[],i=t.product_file[0].cust_field?JSON.parse(t.product_file[0].cust_field):null;if(console.log(n),console.log(i),n.length){const e=[];n.forEach(t=>{if(e.push({field_type:t.field_type,field_label:t.field_label,field_value:null}),i)for(const n in i)t.field_id===n&&(e[e.length-1].field_value=i[n])});const t=Math.ceil(e.length/2),r=[];for(let n=0;n<t;n++)r.push(2*n+1===e.length?[e[2*n]]:[e[2*n],e[2*n+1]]);this.custFields=r,r.forEach(e=>{this.custFieldsLeft.push(e[0]),e.length>1&&this.custFieldsRight.push(e[1])})}this.productFileSrv.getItemGroupList("","","1").subscribe(e=>{this.itemGroupList=e||[];const t=this.itemGroupList.filter(e=>e.item_group_id===this.product_file[0].item_group_id);this.basis_of_maintain=t.length&&t[0].basis_of_maintain||"1"},e=>{e.hasOwnProperty("error")&&e.error.hasOwnProperty("errorMessage")&&e.error.errorMessage&&this.message.error(e.error.errorMessage)})},e=>{e.hasOwnProperty("error")&&e.error.hasOwnProperty("errorMessage")&&e.error.errorMessage&&this.message.error(e.error.errorMessage)}),this.productFileSrv.getUserSite().subscribe(e=>{this.userSite=e.data.data.service_site_type},e=>{e.hasOwnProperty("error")&&e.error.hasOwnProperty("errorMessage")&&e.error.errorMessage&&this.message.error(e.error.errorMessage)}),this.productFileSrv.getProductFileHasCustomizeField("product_file").subscribe(e=>{this.productFileHasCustomizeField="true"===e.data},e=>{e.hasOwnProperty("error")&&e.error.hasOwnProperty("errorMessage")&&e.error.errorMessage&&this.message.error(e.error.errorMessage)})}showQrcode(){this.isShowQrcode=!0}downloadImg(e,t="qrCode.png"){const n=document.createElement("a");n.download=t,n.href=e;const i=document.createEvent("MouseEvents");i.initEvent("click",!0,!0),n.dispatchEvent(i)}handleOk(){this.downloadImg(this.product_file[0].qrCodeContext,this.product_file[0].qrCodeName)}dataURLtoBlob(e){const t=e.split(","),n=t[0].match(/:(.*?);/)[1],i=atob(t[1]);let r=i.length;const a=new Uint8Array(r);for(;r--;)a[r]=i.charCodeAt(r);return new Blob([a],{type:n})}changeVisible(e){this.isVisible=e,this.initData(this.id,this.fileType)}changeRecycleVisible(e){this.isRecycleVisible=!1,e&&this.visibleChanged.emit(!0)}handleCancel(){this.isShowQrcode=!1}saving(){return!0}saved(e){}getBase64(e){return new Promise((t,n)=>{const i=new FileReader;i.readAsDataURL(e),i.onload=()=>t(i.result),i.onerror=e=>n(e)})}downloadFile(e){this.productFileSrv.download({attachment_id:e}).subscribe(e=>{if(e)switch(e.type){case c.HttpEventType.Response:const t=URL.createObjectURL(e.body),n=document.createElement("a");n.href=t,n.style="visibility:hidden";const i=e.headers.get("Content-disposition").split("filename=")[1];n.download=decodeURI(i),document.body.appendChild(n),n.click(),document.body.removeChild(n)}},e=>{e.hasOwnProperty("error")&&e.error.hasOwnProperty("errorMessage")&&e.error.errorMessage&&this.message.error(e.error.errorMessage)})}}return e.\u0275fac=function(t){return new(t||e)(r.\u0275\u0275directiveInject(a.ActivatedRoute),r.\u0275\u0275directiveInject(d.DwRoutingMessageService),r.\u0275\u0275directiveInject(o.DwDocument),r.\u0275\u0275directiveInject(s.DwUserService),r.\u0275\u0275directiveInject(l.U),r.\u0275\u0275directiveInject(u.$),r.\u0275\u0275directiveInject(m.DwMessageService))},e.\u0275cmp=r.\u0275\u0275defineComponent({type:e,selectors:[["app-product-file-detail"]],outputs:{visibleChanged:"visibleChanged"},features:[r.\u0275\u0275ProvidersFeature([o.DwDocument,h.N])],decls:6,vars:4,consts:[["class","sub_act",4,"ngIf"],[3,"visible","visibleChanged"],["child2",""],["child3",""],["dw-form","","style","margin-top: -12px;",4,"ngIf"],[1,"sub_act"],["dw-icon","","dwType","ellipsis","dwTheme","outline"],[1,"pub-btns"],["dwActionAuthorized","","angularticsAction","\u8be6\u60c5-\u70b9\u51fb\u8fc7\u6237","dw-analyticsOn","click",3,"dwActionId","dwDefaultAuthorized","angularticsCategory","angularticsLabel","click",4,"ngIf"],["dwActionAuthorized","","angularticsAction","\u8be6\u60c5-\u70b9\u51fb\u56de\u6536","dw-analyticsOn","click",3,"dwActionId","dwDefaultAuthorized","angularticsCategory","angularticsLabel","click",4,"ngIf"],["dwActionAuthorized","","angularticsAction","\u8be6\u60c5-\u70b9\u51fb\u8fc7\u6237","dw-analyticsOn","click",3,"dwActionId","dwDefaultAuthorized","angularticsCategory","angularticsLabel","click"],["dwActionAuthorized","","angularticsAction","\u8be6\u60c5-\u70b9\u51fb\u56de\u6536","dw-analyticsOn","click",3,"dwActionId","dwDefaultAuthorized","angularticsCategory","angularticsLabel","click"],["dw-form","",2,"margin-top","-12px"],[1,"my-tab",3,"dwTabPosition","dwType","dwAnimated"],["dwTitle","\u57fa\u672c\u4fe1\u606f"],["dw-row",""],["dw-col","","dwSpan","8","class","flex-box",4,"ngIf"],["dw-col","","dwSpan","8",1,"flex-box"],[1,"label"],[1,"info","status_info",2,"flex","none","width","64px","position","relative"],["class","state_tip",4,"ngIf"],["class","state_tip zise",4,"ngIf"],["class","state_tip gray",4,"ngIf"],["class","recycle_info",4,"ngIf"],[1,"info"],[4,"ngIf"],["dw-col","","dwSpan","24","class","flex-box",4,"ngIf"],["dwTitle","\u8bbe\u5907\u4fe1\u606f",4,"ngIf"],["dwTitle","\u914d\u4ef6\u4fe1\u606f",4,"ngIf"],["dwTitle","\u9644\u52a0\u4fe1\u606f",4,"ngIf"],["dwTitle","\u8bbe\u5907\u62a5\u4fee\u4e8c\u7ef4\u7801","dwOkText","\u4e0b\u8f7d\u4e8c\u7ef4\u7801",3,"dwBodyStyle","dwMaskClosable","dwWidth","dwVisible","dwOkDisabled","dwVisibleChange","dwOnCancel","dwOnOk"],["dwModalContent",""],[1,"state_tip"],[1,"state_tip","zise"],[1,"state_tip","gray"],[1,"recycle_info"],[1,"left"],["src","../../../../../../assets/img/user-head.png","alt","\u5934\u50cf",4,"ngIf"],["alt","\u5934\u50cf",3,"src",4,"ngIf"],[1,"right"],[1,"name"],[1,"reason"],["src","../../../../../../assets/img/user-head.png","alt","\u5934\u50cf"],["alt","\u5934\u50cf",3,"src"],["class","label",4,"ngIf"],["class","info",4,"ngIf"],["dw-col","","dwSpan","24",1,"flex-box"],[1,"clearfix"],["dwListType","picture-card",3,"dwFileList","dwShowButton","dwShowUploadList","dwPreview","dwFileListChange"],["dw-icon","","dwType","plus"],[1,"ant-upload-text"],[3,"dwVisible","dwContent","dwFooter","dwOnCancel"],["modalContent",""],["alt","\u4ea7\u54c1\u6863\u6848",3,"src","ngStyle"],[1,"files"],["class","file",4,"ngFor","ngForOf"],[1,"file"],["src","../../../../../../assets/img/icon_excel.png","alt","excel",4,"ngIf"],["src","../../../../../../assets/img/icon_word.png","alt","word",4,"ngIf"],["src","../../../../../../assets/img/icon_pdf.png","alt","pdf",4,"ngIf"],["src","../../../../../../assets/img/icon_ppt.png","alt","ppt",4,"ngIf"],["src","../../../../../../assets/img/icon_picture.png","alt","pic",4,"ngIf"],[1,"download",3,"click"],["dw-icon","","dwType","download","dwTheme","outline"],["src","../../../../../../assets/img/icon_excel.png","alt","excel"],["src","../../../../../../assets/img/icon_word.png","alt","word"],["src","../../../../../../assets/img/icon_pdf.png","alt","pdf"],["src","../../../../../../assets/img/icon_ppt.png","alt","ppt"],["src","../../../../../../assets/img/icon_picture.png","alt","pic"],["dwTitle","\u8bbe\u5907\u4fe1\u606f"],["dw-col","","dwSpan","24"],["dwTableId","crs-product-equipment-detail-list",3,"dwPageIndex","dwData","dwPageSize","dwPageSizeOptions","dwScroll","dwPageIndexChange","dwPageSizeChange","dwPageSizeOptionsChange"],["dwTable",""],["dw-tr","","dwDropColumns",""],["dw-th","","dwDragDrop","","dwWidth","140px",4,"dwColumnId"],["dw-th","","dwDragDrop","","dwWidth","110px",4,"dwColumnId"],["dw-th","","dwDragDrop","","dwWidth","120px",4,"dwColumnId"],["dw-th","","dwDragDrop","","dwWidth","96px","class","align-right",4,"dwColumnId"],[4,"ngFor","ngForOf"],["dw-th","","dwDragDrop","","dwWidth","140px"],["translate",""],["dw-th","","dwDragDrop","","dwWidth","110px"],["dw-th","","dwDragDrop","","dwWidth","120px"],["dw-th","","dwDragDrop","","dwWidth","96px",1,"align-right"],["dw-tbody-tr","","dwReorderColumns",""],[4,"dwColumnId"],["width","96","class","align-right",4,"dwColumnId"],["width","96",1,"align-right"],["dwTitle","\u914d\u4ef6\u4fe1\u606f"],["dwTableId","crs-equipment-part-detail-list",3,"dwPageIndex","dwData","dwPageSize","dwPageSizeOptions","dwScroll","dwPageIndexChange","dwPageSizeChange","dwPageSizeOptionsChange"],["dw-th","","dwWidth","140px",4,"dwColumnId"],["dw-th","","dwDragDrop","","dwWidth","140px","dwWidth","140px",4,"dwColumnId"],["dw-th","","dwDragDrop","","dwWidth","100px",4,"dwColumnId"],["dw-th","","dwDragDrop","","dwWidth","80px",4,"dwColumnId"],["dw-th","","dwWidth","140px"],["dw-th","","dwDragDrop","","dwWidth","140px","dwWidth","140px"],["dw-th","","dwDragDrop","","dwWidth","100px"],["dw-th","","dwDragDrop","","dwWidth","80px"],[3,"ngStyle",4,"dwColumnId"],[3,"ngStyle"],["dw-tooltip","","dwTooltipTitle","\u6613\u635f\u4ef6","class","quickPart",4,"ngIf"],["dw-tooltip","","dwTooltipTitle","\u6613\u635f\u4ef6",1,"quickPart"],[1,"point"],["dwTableId","crs-product-part-detail-list",3,"dwPageIndex","dwData","dwPageSize","dwPageSizeOptions","dwScroll","dwPageIndexChange","dwPageSizeChange","dwPageSizeOptionsChange"],["dw-th","","dwWidth","96px","class","align-right","dwDragDrop","",4,"dwColumnId"],["dw-th","","dwWidth","96px","dwDragDrop","",1,"align-right"],["width","72",4,"dwColumnId"],["width","72"],["dwTitle","\u9644\u52a0\u4fe1\u606f"],[1,"flex-list"],["dwSpan","11","class","flex-box",4,"ngFor","ngForOf"],["dwSpan","11",1,"flex-box"],["class","qr-wrap",4,"ngIf"],[1,"qr-wrap"],["alt","\u4e8c\u7ef4\u7801",3,"src"]],template:function(e,t){1&e&&(r.\u0275\u0275template(0,X,5,2,"div",0),r.\u0275\u0275elementStart(1,"app-product-transfer",1,2),r.\u0275\u0275listener("visibleChanged",function(){return t.changeVisible(!1)}),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(3,"app-product-recycle",1,3),r.\u0275\u0275listener("visibleChanged",function(e){return t.changeRecycleVisible(e)}),r.\u0275\u0275elementEnd(),r.\u0275\u0275template(5,Pn,50,45,"form",4)),2&e&&(r.\u0275\u0275property("ngIf",t.product_file[0]&&"3"!==t.product_file[0].service_status&&("1"==t.userSite||"1"===t.product_file[0].service_status)),r.\u0275\u0275advance(1),r.\u0275\u0275property("visible",t.isVisible),r.\u0275\u0275advance(2),r.\u0275\u0275property("visible",t.isRecycleVisible),r.\u0275\u0275advance(2),r.\u0275\u0275property("ngIf",t.product_file[0]))},directives:[g.NgIf,V,A,y.u,E.DwIconDirective,N.DwActionAuthorizedDirective,$.DwAnalyticsOn,f.\u0275NgNoValidate,f.NgControlStatusGroup,f.NgForm,x.DwFormDirective,j.DwTabSetComponent,j.DwTabComponent,C.DwRowDirective,C.DwColDirective,v.DwModalComponent,v.DwModalContentDirective,z.DwUploadComponent,g.NgStyle,g.NgForOf,x.DwFormItemComponent,x.DwFormControlComponent,B.DwTableComponent,q.Ct,B.DwTheadComponent,B.DwTrDirective,q.Y9,q.b,B.DwTbodyComponent,B.DwTableCellDirective,B.DwThMeasureDirective,q.BL,q.$2,W.TranslateDirective,q.at,G.DwTooltipDirective],pipes:[g.DatePipe],styles:[".sub-title[_ngcontent-%COMP%]{margin-left:0}.sub-title[_ngcontent-%COMP%]:first-of-type{margin-top:0;position:relative}.sub_act[_ngcontent-%COMP%]{position:fixed;top:56px;right:28px;width:28px;height:30px;line-height:30px;text-align:center;white-space:nowrap;font-weight:normal;z-index:999}.sub_act[_ngcontent-%COMP%]:hover{cursor:pointer}.sub_act[_ngcontent-%COMP%]:hover   em[_ngcontent-%COMP%]{color:#009bf2}.sub_act[_ngcontent-%COMP%]:hover   .pub-btns[_ngcontent-%COMP%]{display:flex}.pub-btns[_ngcontent-%COMP%]{width:68px;position:absolute;top:30px;right:-8px;z-index:1999;background:#fff;display:none;flex-direction:column}.pub-btns[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{text-align:left;padding-left:12px;border:1px solid #e9e9e9;border-top:0}.pub-btns[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child{border-top:1px solid #e9e9e9}.pub-btns[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:hover{background:#f1f1f1;cursor:pointer}.flex-box[_ngcontent-%COMP%]{display:flex;line-height:30px}.info[_ngcontent-%COMP%]{flex:1;word-break:break-all;word-wrap:break-word;padding-right:20px}.state_tip[_ngcontent-%COMP%]{display:block;width:64px;height:26px;line-height:26px;text-align:center;border-radius:15px;color:#fff;font-size:13px;margin-top:2px;background:#29cc8d}.state_tip.zise[_ngcontent-%COMP%]{background:#5c64d1}.state_tip.gray[_ngcontent-%COMP%]{background:#5c5c5c;cursor:pointer}.qr-wrap[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.qr-wrap[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:280px;margin:8px 0 -10px}.file[_ngcontent-%COMP%]{width:368px;height:34px;display:flex;align-items:center;padding:0 10px;margin-top:10px;margin-bottom:10px;border:1px solid #dadada;border-radius:3px}.file[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:26px;height:26px;margin-right:6px}.file[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{color:#333;font-size:14px;width:314px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.file[_ngcontent-%COMP%]   .download[_ngcontent-%COMP%]{width:22px;text-align:right;color:#999;font-size:14px;cursor:pointer}.file[_ngcontent-%COMP%]   .download[_ngcontent-%COMP%]:hover{color:#40a9ff}.file[_ngcontent-%COMP%]   .download[_ngcontent-%COMP%]   em[_ngcontent-%COMP%]{font-size:22px}.status_info[_ngcontent-%COMP%]:hover   .recycle_info[_ngcontent-%COMP%]{top:32px}.recycle_info[_ngcontent-%COMP%]{position:absolute;top:-9999px;right:-64px;width:300px;background:rgba(0,0,0,.75);padding:16px;display:flex;border-radius:2px;z-index:9}.recycle_info[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]{width:40px;height:40px;margin-right:12px;font-size:0}.recycle_info[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;border-radius:50%}.recycle_info[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{flex:1;line-height:20px}.recycle_info[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;color:#fff;font-size:12px;margin-bottom:8px}.recycle_info[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:first-of-type{font-size:14px;font-weight:bold}.recycle_info[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .reason[_ngcontent-%COMP%]{color:#fff;font-size:12px}.flex-list[_ngcontent-%COMP%]{display:flex;align-items:flex-start;flex-wrap:wrap;padding-right:24px;width:100%;overflow-x:hidden}.flex-list[_ngcontent-%COMP%]   .flex-box[_ngcontent-%COMP%]{width:50%;padding-right:20px}.quickPart[_ngcontent-%COMP%]   .point[_ngcontent-%COMP%]{display:inline-block;width:6px;height:6px;border-radius:3px;background-color:#ffbe68;margin-bottom:3px}"]}),e})()},6769:function(e,t,n){n.r(t),n.d(t,{ProductFileModule:function(){return jl}});var i=n(55245),r=n(87974),a=n(42746);let o=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=a.\u0275\u0275defineComponent({type:e,selectors:[["app-product-file"]],decls:1,vars:0,template:function(e,t){1&e&&a.\u0275\u0275element(0,"router-outlet")},directives:[r.RouterOutlet],styles:[""]}),e})();var l=n(1020),d=n(33795),s=n(83237),c=n(31441),m=n(61937),p=n(53771),u=n(17494),h=n(66800),g=n(9201),f=n(71049),w=n(45890),v=n(48005),x=n(97834),C=n(53460),_=n(62695),y=n(71452),S=n(74591),b=n(83522);function I(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"th",12),a.\u0275\u0275elementStart(1,"span",13),a.\u0275\u0275text(2),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd()),2&e){const e=t.$implicit;a.\u0275\u0275property("width",e.width)("dwColumnKey",e.field),a.\u0275\u0275advance(2),a.\u0275\u0275textInterpolate(e.title)}}function E(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"th",14),a.\u0275\u0275elementStart(1,"span",13),a.\u0275\u0275text(2),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd()),2&e){const e=a.\u0275\u0275nextContext(2);a.\u0275\u0275property("dwColumnKey","item_group"===e.modify_obj.modify_item_label||"service_site"===e.modify_obj.modify_item_label||"employee"===e.modify_obj.modify_item_label?e.modify_obj.modify_item_label+"_name":e.modify_obj.modify_item_label)("dwAlign","enable_maintain"===e.modify_obj.modify_item_label?"center":"left"),a.\u0275\u0275advance(2),a.\u0275\u0275textInterpolate(e.modify_obj.modify_item_name)}}function D(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"td"),a.\u0275\u0275text(1),a.\u0275\u0275elementEnd()),2&e){const e=t.$implicit,n=a.\u0275\u0275nextContext().$implicit;a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate1(" ",n[e.field]," ")}}function O(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"td"),a.\u0275\u0275text(1),a.\u0275\u0275elementEnd()),2&e){const e=a.\u0275\u0275nextContext(2).$implicit,t=a.\u0275\u0275nextContext(2);a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate1(" ",e[t.modify_obj.modify_item_label+"_name"]," ")}}function M(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"td"),a.\u0275\u0275text(1),a.\u0275\u0275pipe(2,"date"),a.\u0275\u0275elementEnd()),2&e){const e=a.\u0275\u0275nextContext(2).$implicit,t=a.\u0275\u0275nextContext(2);a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate1(" ",a.\u0275\u0275pipeBind2(2,1,e[t.modify_obj.modify_item_label],"yyyy-MM-dd")," ")}}function P(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"td",18),a.\u0275\u0275element(1,"label",19),a.\u0275\u0275elementEnd()),2&e){const e=a.\u0275\u0275nextContext(2).$implicit,t=a.\u0275\u0275nextContext(2);a.\u0275\u0275advance(1),a.\u0275\u0275property("dwChecked","1"===e[t.modify_obj.modify_item_label])}}function k(e,t){if(1&e&&(a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275template(1,O,2,1,"td",16),a.\u0275\u0275template(2,M,3,4,"td",16),a.\u0275\u0275template(3,P,2,1,"td",17),a.\u0275\u0275elementContainerEnd()),2&e){const e=a.\u0275\u0275nextContext(3);a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf","item_group"===e.modify_obj.modify_item_label||"service_site"===e.modify_obj.modify_item_label||"employee"===e.modify_obj.modify_item_label),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf","delivery_date"===e.modify_obj.modify_item_label||"expiry_date"===e.modify_obj.modify_item_label),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf","enable_maintain"===e.modify_obj.modify_item_label)}}function F(e,t){if(1&e){const e=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"tr"),a.\u0275\u0275elementStart(1,"td"),a.\u0275\u0275elementStart(2,"label",15),a.\u0275\u0275listener("ngModelChange",function(t){return a.\u0275\u0275restoreView(e).$implicit.checked=t})("ngModelChange",function(){return a.\u0275\u0275restoreView(e),a.\u0275\u0275nextContext(2).updateSingleChecked()}),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275template(3,D,2,1,"td",11),a.\u0275\u0275template(4,k,4,3,"ng-container",16),a.\u0275\u0275elementEnd()}if(2&e){const e=t.$implicit,n=a.\u0275\u0275nextContext(2);a.\u0275\u0275advance(2),a.\u0275\u0275property("ngModel",e.checked),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngForOf",n.configObj.tableColDefs),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf","preview"===n.dataType)}}function V(e,t){if(1&e){const e=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"dw-table",3,4),a.\u0275\u0275elementStart(2,"thead",5),a.\u0275\u0275listener("dwSortOrderChange",function(t){return a.\u0275\u0275restoreView(e),a.\u0275\u0275nextContext().order(t)}),a.\u0275\u0275elementStart(3,"tr",6),a.\u0275\u0275elementStart(4,"th",7),a.\u0275\u0275elementStart(5,"label",8),a.\u0275\u0275listener("ngModelChange",function(t){return a.\u0275\u0275restoreView(e),a.\u0275\u0275nextContext().allChecked=t})("ngModelChange",function(){return a.\u0275\u0275restoreView(e),a.\u0275\u0275nextContext().updateAllChecked()}),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275template(6,I,3,3,"th",9),a.\u0275\u0275template(7,E,3,3,"th",10),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(8,"tbody"),a.\u0275\u0275template(9,F,5,3,"tr",11),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd()}if(2&e){const e=a.\u0275\u0275reference(1),t=a.\u0275\u0275nextContext(),n=a.\u0275\u0275reference(3);a.\u0275\u0275property("dwData",t.dataList)("dwShowTotal",n),a.\u0275\u0275advance(5),a.\u0275\u0275property("ngModel",t.allChecked)("dwIndeterminate",t.indeterminate),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngForOf",t.configObj.tableColDefs),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf","preview"===t.dataType),a.\u0275\u0275advance(2),a.\u0275\u0275property("ngForOf",e.data)}}function T(e,t){if(1&e&&a.\u0275\u0275text(0),2&e){const e=a.\u0275\u0275nextContext();a.\u0275\u0275textInterpolate1("\u5171 ",e.dataList.length," \u6761")}}const L=function(){return{height:"calc(100% - 24px)",overflow:"auto"}};let R=(()=>{class e{constructor(e,t){this.http=e,this.message=t,this.dataList=[],this.allChecked=!1,this.indeterminate=!1,this.chosen_id="0",this.chosen_name="\u5168\u90e8",this.configObj={},this.modify_obj={},this.visibleChanged=new a.EventEmitter}ngOnInit(){}initData(e,t={},n,i={}){this.dataType=e,this.configObj=t,"preview"===e?(this.allChecked=!0,this.indeterminate=!1,this.modify_obj=i,this.http.post(t.dataSourceUrl,{params:t.paramData}).subscribe(e=>{this.dataList=e||[],this.updateAllChecked()},e=>{e.hasOwnProperty("error")&&e.error.hasOwnProperty("errorMessage")&&e.error.errorMessage&&this.message.error(e.error.errorMessage)})):(this.allChecked=!1,this.indeterminate=!1,this.http.get(t.dataSourceUrl).subscribe(t=>{if(this.dataList=t||[],null!=n)if(this.allChecked="0"===n,this.allChecked)this.updateAllChecked();else{const t=n.split(",");for(const n of this.dataList){const i=t.indexOf(n[`${e}_id`].toString());n.checked=i>=0}this.updateSingleChecked()}},e=>{e.hasOwnProperty("error")&&e.error.hasOwnProperty("errorMessage")&&e.error.errorMessage&&this.message.error(e.error.errorMessage)}))}updateAllChecked(){this.indeterminate=!1,this.dataList=this.dataList.map(this.allChecked?e=>Object.assign(Object.assign({},e),{checked:!0}):e=>Object.assign(Object.assign({},e),{checked:!1})),this.updateChosen()}updateSingleChecked(){this.dataList.every(e=>!e.checked)?(this.allChecked=!1,this.indeterminate=!1):this.dataList.every(e=>e.checked)?(this.allChecked=!0,this.indeterminate=!1):(this.allChecked=!1,this.indeterminate=!0),this.updateChosen()}updateChosen(){if(this.allChecked){const e=[];("service_type"===this.dataType||"employee"===this.dataType||"preview"===this.dataType)&&this.dataList.forEach(t=>{t.checked&&e.push(t[`${"preview"===this.dataType?"product_file":this.dataType}_id`])}),this.chosen_id=e.join(","),this.chosen_name="\u5168\u90e8"}else{const e=[],t=[];this.dataList.forEach(n=>{n.checked&&(e.push(n[`${"preview"===this.dataType?"product_file":this.dataType}_id`]),t.push(n[`${"preview"===this.dataType?"product_file":this.dataType}_name`]))}),this.chosen_id=e.join(","),this.chosen_name=t.join(",")}}handleCancel(){this.visibleChanged.emit(null)}handleOk(){this.dataList.filter(e=>e.checked).length?this.visibleChanged.emit(Object.assign({type:this.dataType,chosen_id:this.chosen_id,chosen_name:this.chosen_name},this.modify_obj)):this.message.create("error","\u8bf7\u81f3\u5c11\u9009\u62e9\u4e00\u9879")}order(e){const t=e.key;switch(e.value){case"ascend":this.dataList=m.l.order(this.dataList,[t]);break;case"descend":this.dataList=m.l.order(this.dataList,[t,-1])}}}return e.\u0275fac=function(t){return new(t||e)(a.\u0275\u0275directiveInject(C.DwDapHttpClient),a.\u0275\u0275directiveInject(s.DwMessageService))},e.\u0275cmp=a.\u0275\u0275defineComponent({type:e,selectors:[["app-multy-all-select-opener"]],inputs:{visible:"visible"},outputs:{visibleChanged:"visibleChanged"},decls:4,vars:7,consts:[[3,"dwBodyStyle","dwMaskClosable","dwWidth","dwVisible","dwTitle","dwOkText","dwVisibleChange","dwOnCancel","dwOnOk"],["dwModalContent",""],["totalTemplate",""],[3,"dwData","dwShowTotal"],["dwTable",""],[3,"dwSortOrderChange"],["dw-tr",""],["dw-th","","width","40"],["dw-checkbox","",2,"width","100%",3,"ngModel","dwIndeterminate","ngModelChange"],["dw-th","","dwShowSort","",3,"width","dwColumnKey",4,"ngFor","ngForOf"],["dw-th","","width","140","dwShowSort","",3,"dwColumnKey","dwAlign",4,"ngIf"],[4,"ngFor","ngForOf"],["dw-th","","dwShowSort","",3,"width","dwColumnKey"],["translate",""],["dw-th","","width","140","dwShowSort","",3,"dwColumnKey","dwAlign"],["dw-checkbox","",2,"width","100%",3,"ngModel","ngModelChange"],[4,"ngIf"],["dwAlign","center",4,"ngIf"],["dwAlign","center"],["dwDisabled","","dw-checkbox","",3,"dwChecked"]],template:function(e,t){1&e&&(a.\u0275\u0275elementStart(0,"dw-modal",0),a.\u0275\u0275listener("dwVisibleChange",function(e){return t.visible=e})("dwOnCancel",function(){return t.handleCancel()})("dwOnOk",function(){return t.handleOk()}),a.\u0275\u0275template(1,V,10,7,"ng-template",1),a.\u0275\u0275elementEnd(),a.\u0275\u0275template(2,T,1,1,"ng-template",null,2,a.\u0275\u0275templateRefExtractor)),2&e&&a.\u0275\u0275property("dwBodyStyle",a.\u0275\u0275pureFunction0(6,L))("dwMaskClosable",!1)("dwWidth","preview"===t.dataType?960:620)("dwVisible",t.visible)("dwTitle",t.configObj.modalTitle)("dwOkText","preview"===t.dataType?"\u7acb\u5373\u4fee\u6539":"\u786e\u5b9a")},directives:[c.DwModalComponent,c.DwModalContentDirective,_.DwTableComponent,y.Ct,_.DwTheadComponent,_.DwTrDirective,_.DwTableCellDirective,_.DwThMeasureDirective,y.BL,S.DwCheckboxComponent,l.NgControlStatus,l.NgModel,i.NgForOf,i.NgIf,_.DwTbodyComponent,_.DwThAddOnComponent,b.TranslateDirective,_.DwCellAlignDirective],pipes:[i.DatePipe],styles:[""]}),e})();var A=n(29872),N=n(85773),$=n(35626),j=n(93761),z=n(67280),B=n(85277),q=n(39288),W=n(41937),G=n(59970),U=n(47372);let H=(()=>{class e{constructor(e){this.commonHttpService=e,this.diffSubject=new f.Subject}get diffSubject$(){return this.diffSubject.asObservable().pipe((0,U.filter)(e=>null!==e))}getCustomView(){return this.commonHttpService.get("restful/service/autoSettings/CustomView/FormSetting?viewId=product_file")}isDiff(e){const t={};e.forEach((e,n)=>{t[e.dwColumnId]=n});let n=!1;return this.getCustomView().pipe((0,U.switchMap)(e=>{for(const i in e)if(t.hasOwnProperty(i)&&!e[i]){n=!0;break}for(const i in e)if(!t.hasOwnProperty(i)&&e[i]){n=!0;break}return(0,f.of)(n)}))}isDeleteConfigDiff(e){this.isDiff(e).subscribe(e=>{e&&this.diffSubject.next(!0)})}saveTableConfig(e){return new f.Observable(t=>{this.isDiff(e.dwColumnConfig).subscribe(n=>{n?(this.diffSubject.next(!0),t.error(e),t.complete()):(t.next(e),t.complete())})})}}return e.\u0275fac=function(t){return new(t||e)(a.\u0275\u0275inject(w.$))},e.\u0275prov=a.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e})();var X=n(99487),Q=n(80677),K=n(8852),J=n(96670),Z=n(37568),Y=n(51156);function ee(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"th",10),a.\u0275\u0275elementStart(1,"span",11),a.\u0275\u0275text(2),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd()),2&e){const e=t.$implicit;a.\u0275\u0275property("width",e.width)("dwColumnKey",e.field),a.\u0275\u0275advance(2),a.\u0275\u0275textInterpolate(e.title)}}function te(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"td"),a.\u0275\u0275text(1),a.\u0275\u0275elementEnd()),2&e){const e=t.$implicit,n=a.\u0275\u0275nextContext().$implicit;a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate1(" ",n[e.field]," ")}}function ne(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"td"),a.\u0275\u0275text(1),a.\u0275\u0275elementEnd()),2&e){const e=a.\u0275\u0275nextContext().$implicit,t=a.\u0275\u0275nextContext();a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate1(" ",e[t.modify_obj.modify_item_label+"_name"]," ")}}function ie(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"td"),a.\u0275\u0275text(1),a.\u0275\u0275pipe(2,"date"),a.\u0275\u0275elementEnd()),2&e){const e=a.\u0275\u0275nextContext().$implicit,t=a.\u0275\u0275nextContext();a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate1(" ",a.\u0275\u0275pipeBind2(2,1,e[t.modify_obj.modify_item_label],"yyyy-MM-dd")," ")}}function re(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"td",15),a.\u0275\u0275element(1,"label",16),a.\u0275\u0275elementEnd()),2&e){const e=a.\u0275\u0275nextContext().$implicit,t=a.\u0275\u0275nextContext();a.\u0275\u0275advance(1),a.\u0275\u0275property("dwChecked","1"===e[t.modify_obj.modify_item_label])}}function ae(e,t){if(1&e){const e=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"tr"),a.\u0275\u0275elementStart(1,"td"),a.\u0275\u0275elementStart(2,"label",12),a.\u0275\u0275listener("ngModelChange",function(t){return a.\u0275\u0275restoreView(e).$implicit.checked=t})("ngModelChange",function(){return a.\u0275\u0275restoreView(e),a.\u0275\u0275nextContext().updateSingleChecked()}),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275template(3,te,2,1,"td",8),a.\u0275\u0275elementContainerStart(4),a.\u0275\u0275template(5,ne,2,1,"td",13),a.\u0275\u0275template(6,ie,3,4,"td",13),a.\u0275\u0275template(7,re,2,1,"td",14),a.\u0275\u0275elementContainerEnd(),a.\u0275\u0275elementEnd()}if(2&e){const e=t.$implicit,n=a.\u0275\u0275nextContext();a.\u0275\u0275advance(2),a.\u0275\u0275property("ngModel",e.checked),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngForOf",n.tableColDefs),a.\u0275\u0275advance(2),a.\u0275\u0275property("ngIf","item_group"===n.modify_obj.modify_item_label||"service_site"===n.modify_obj.modify_item_label||"employee"===n.modify_obj.modify_item_label),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf","delivery_date"===n.modify_obj.modify_item_label||"expiry_date"===n.modify_obj.modify_item_label),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf","enable_maintain"===n.modify_obj.modify_item_label)}}function oe(e,t){if(1&e&&a.\u0275\u0275text(0),2&e){const e=a.\u0275\u0275nextContext();a.\u0275\u0275textInterpolate1("\u5171 ",e.dataList.length," \u6761")}}let le=(()=>{class e{constructor(e,t){this.http=e,this.message=t,this.dataList=[],this.allChecked=!1,this.indeterminate=!1,this.modify_obj={},this.tableColDefs=[{title:"\u7f16\u53f7",field:"product_file_code",width:"140"},{title:"\u540d\u79f0",field:"product_file_name",width:"140"},{title:"\u89c4\u683c",field:"specification",width:"150"},{title:"\u5e8f\u5217\u53f7",field:"sn",width:"140"},{title:"\u578b\u53f7",field:"model",width:"140"}]}ngOnInit(){}initData(e={},t={}){this.modify_obj=t,this.allChecked=!0,this.indeterminate=!1,this.http.post("restful/service/productFile/ProductFile/ProductFileListForBatchModify",{params:e}).subscribe(e=>{this.dataList=e||[],this.updateAllChecked()},e=>{e.hasOwnProperty("error")&&e.error.hasOwnProperty("errorMessage")&&e.error.errorMessage&&this.message.error(e.error.errorMessage)})}updateAllChecked(){this.indeterminate=!1,this.dataList=this.dataList.map(this.allChecked?e=>Object.assign(Object.assign({},e),{checked:!0}):e=>Object.assign(Object.assign({},e),{checked:!1})),this.updateChosen()}updateSingleChecked(){this.dataList.every(e=>!e.checked)?(this.allChecked=!1,this.indeterminate=!1):this.dataList.every(e=>e.checked)?(this.allChecked=!0,this.indeterminate=!1):(this.allChecked=!1,this.indeterminate=!0),this.updateChosen()}updateChosen(){if(this.allChecked){const e=[];this.dataList.forEach(t=>{t.checked&&e.push(t.product_file_id)})}else{const e=[],t=[];this.dataList.forEach(n=>{n.checked&&(e.push(n.product_file_id),t.push(n.product_file_name))})}}reset(){this.dataList=[],this.allChecked=!1,this.indeterminate=!1}order(e){const t=e.key;switch(e.value){case"ascend":this.dataList=m.l.order(this.dataList,[t]);break;case"descend":this.dataList=m.l.order(this.dataList,[t,-1])}}}return e.\u0275fac=function(t){return new(t||e)(a.\u0275\u0275directiveInject(Y.DwDapHttpClient),a.\u0275\u0275directiveInject(s.DwMessageService))},e.\u0275cmp=a.\u0275\u0275defineComponent({type:e,selectors:[["app-multy-all-select"]],decls:13,vars:9,consts:[[3,"dwData","dwShowTotal"],["dwTable",""],[3,"dwSortOrderChange"],["dw-tr",""],["dw-th","","width","40"],["dw-checkbox","",2,"width","100%",3,"ngModel","dwIndeterminate","ngModelChange"],["dw-th","","dwShowSort","",3,"width","dwColumnKey",4,"ngFor","ngForOf"],["dw-th","","width","140","dwShowSort","",3,"dwColumnKey","dwAlign"],[4,"ngFor","ngForOf"],["totalTemplate",""],["dw-th","","dwShowSort","",3,"width","dwColumnKey"],["translate",""],["dw-checkbox","",2,"width","100%",3,"ngModel","ngModelChange"],[4,"ngIf"],["dwAlign","center",4,"ngIf"],["dwAlign","center"],["dwDisabled","","dw-checkbox","",3,"dwChecked"]],template:function(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"dw-table",0,1),a.\u0275\u0275elementStart(2,"thead",2),a.\u0275\u0275listener("dwSortOrderChange",function(e){return t.order(e)}),a.\u0275\u0275elementStart(3,"tr",3),a.\u0275\u0275elementStart(4,"th",4),a.\u0275\u0275elementStart(5,"label",5),a.\u0275\u0275listener("ngModelChange",function(e){return t.allChecked=e})("ngModelChange",function(){return t.updateAllChecked()}),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275template(6,ee,3,3,"th",6),a.\u0275\u0275elementStart(7,"th",7),a.\u0275\u0275text(8),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(9,"tbody"),a.\u0275\u0275template(10,ae,8,5,"tr",8),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275template(11,oe,1,1,"ng-template",null,9,a.\u0275\u0275templateRefExtractor)),2&e){const e=a.\u0275\u0275reference(1),n=a.\u0275\u0275reference(12);a.\u0275\u0275property("dwData",t.dataList)("dwShowTotal",n),a.\u0275\u0275advance(5),a.\u0275\u0275property("ngModel",t.allChecked)("dwIndeterminate",t.indeterminate),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngForOf",t.tableColDefs),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnKey","item_group"===t.modify_obj.modify_item_label||"service_site"===t.modify_obj.modify_item_label||"employee"===t.modify_obj.modify_item_label?t.modify_obj.modify_item_label+"_name":t.modify_obj.modify_item_label)("dwAlign","enable_maintain"===t.modify_obj.modify_item_label?"center":"left"),a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate1(" ",t.modify_obj.modify_item_name," "),a.\u0275\u0275advance(2),a.\u0275\u0275property("ngForOf",e.data)}},directives:[_.DwTableComponent,y.Ct,_.DwTheadComponent,_.DwTrDirective,_.DwTableCellDirective,_.DwThMeasureDirective,y.BL,S.DwCheckboxComponent,l.NgControlStatus,l.NgModel,i.NgForOf,_.DwThAddOnComponent,_.DwCellAlignDirective,_.DwTbodyComponent,b.TranslateDirective,i.NgIf],pipes:[i.DatePipe],styles:[""]}),e})();const de=["child2"];function se(e,t){if(1&e){const e=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"button",30),a.\u0275\u0275listener("click",function(){a.\u0275\u0275restoreView(e);const t=a.\u0275\u0275nextContext(2);return a.\u0275\u0275reference(3).initData("item_group",t.getConfigValue("item_group",!0),t.form.value.item_group_id),t.openDataWin("item_group")}),a.\u0275\u0275element(1,"em",31),a.\u0275\u0275elementEnd()}}function ce(e,t){if(1&e){const e=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"button",30),a.\u0275\u0275listener("click",function(){a.\u0275\u0275restoreView(e);const t=a.\u0275\u0275nextContext(2);return a.\u0275\u0275reference(3).initData("customer",t.getConfigValue("customer",!1),t.form.value.customer_id),t.openDataWin("customer")}),a.\u0275\u0275element(1,"em",31),a.\u0275\u0275elementEnd()}}function me(e,t){if(1&e){const e=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"button",30),a.\u0275\u0275listener("click",function(){a.\u0275\u0275restoreView(e);const t=a.\u0275\u0275nextContext(2);return a.\u0275\u0275reference(3).initData("service_site",t.getConfigValue("service_site",!1),t.form.value.service_site_id),t.openDataWin("service_site")}),a.\u0275\u0275element(1,"em",31),a.\u0275\u0275elementEnd()}}function pe(e,t){if(1&e){const e=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"button",30),a.\u0275\u0275listener("click",function(){a.\u0275\u0275restoreView(e);const t=a.\u0275\u0275nextContext(2);return a.\u0275\u0275reference(3).initData("employee",t.getConfigValue("employee",!0),t.form.value.employee_id),t.openDataWin("employee")}),a.\u0275\u0275element(1,"em",31),a.\u0275\u0275elementEnd()}}function ue(e,t){1&e&&(a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275elementStart(1,"div",6),a.\u0275\u0275elementStart(2,"div",7),a.\u0275\u0275elementStart(3,"div",8),a.\u0275\u0275text(4,"\u51fa\u5e93\u65e5\u671f"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(5,"dw-form-item",9),a.\u0275\u0275elementStart(6,"dw-form-control"),a.\u0275\u0275elementStart(7,"div",32),a.\u0275\u0275element(8,"dw-date-picker",33),a.\u0275\u0275elementStart(9,"span",34),a.\u0275\u0275text(10,"-"),a.\u0275\u0275elementEnd(),a.\u0275\u0275element(11,"dw-date-picker",35),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(12,"div",7),a.\u0275\u0275elementStart(13,"div",8),a.\u0275\u0275text(14,"\u4fdd\u4fee\u622a\u6b62\u65e5\u671f"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(15,"dw-form-item",9),a.\u0275\u0275elementStart(16,"dw-form-control"),a.\u0275\u0275elementStart(17,"div",32),a.\u0275\u0275element(18,"dw-date-picker",36),a.\u0275\u0275elementStart(19,"span",34),a.\u0275\u0275text(20,"-"),a.\u0275\u0275elementEnd(),a.\u0275\u0275element(21,"dw-date-picker",37),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementContainerEnd())}function he(e,t){if(1&e){const e=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"button",30),a.\u0275\u0275listener("click",function(){a.\u0275\u0275restoreView(e);const t=a.\u0275\u0275reference(3),n=a.\u0275\u0275nextContext(3);return t.initData(n.getConfigValue(n.modify_item,!1))}),a.\u0275\u0275element(1,"em",31),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(2,"app-opener-frontend",39,40),a.\u0275\u0275listener("selectedChanged",function(t){return a.\u0275\u0275restoreView(e),a.\u0275\u0275nextContext(3).openSelect2(t)}),a.\u0275\u0275elementEnd()}}function ge(e,t){if(1&e){const e=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"dw-form-control"),a.\u0275\u0275elementStart(1,"dw-input-group",10),a.\u0275\u0275elementStart(2,"input",38),a.\u0275\u0275listener("ngModelChange",function(t){return a.\u0275\u0275restoreView(e),a.\u0275\u0275nextContext(2).modify_value.name=t}),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275template(3,he,4,0,"ng-template",null,12,a.\u0275\u0275templateRefExtractor),a.\u0275\u0275elementEnd()}if(2&e){const e=a.\u0275\u0275reference(4),t=a.\u0275\u0275nextContext(2);a.\u0275\u0275advance(1),a.\u0275\u0275property("dwSuffix",e),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngModel",t.modify_value.name)}}function fe(e,t){if(1&e){const e=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"dw-form-control"),a.\u0275\u0275elementStart(1,"div",32),a.\u0275\u0275elementStart(2,"dw-date-picker",41),a.\u0275\u0275listener("ngModelChange",function(t){return a.\u0275\u0275restoreView(e),a.\u0275\u0275nextContext(2).modify_value=t}),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd()}if(2&e){const e=a.\u0275\u0275nextContext(2);a.\u0275\u0275advance(2),a.\u0275\u0275property("ngModel",e.modify_value)}}function we(e,t){if(1&e){const e=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"dw-form-control"),a.\u0275\u0275elementStart(1,"div",32),a.\u0275\u0275elementStart(2,"label",42),a.\u0275\u0275listener("ngModelChange",function(t){return a.\u0275\u0275restoreView(e),a.\u0275\u0275nextContext(2).modify_value=t}),a.\u0275\u0275text(3),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd()}if(2&e){const e=a.\u0275\u0275nextContext(2);a.\u0275\u0275advance(2),a.\u0275\u0275property("ngModel",e.modify_value),a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate1(" ",e.modify_value?"\u5f00\u542f":"\u5173\u95ed"," ")}}function ve(e,t){if(1&e){const e=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"div",4),a.\u0275\u0275text(1,"\u67e5\u8be2\u6761\u4ef6"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(2,"form",5),a.\u0275\u0275elementStart(3,"div",6),a.\u0275\u0275elementStart(4,"div",7),a.\u0275\u0275elementStart(5,"div",8),a.\u0275\u0275text(6,"\u4ea7\u54c1\u5206\u7c7b"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(7,"dw-form-item",9),a.\u0275\u0275elementStart(8,"dw-form-control"),a.\u0275\u0275elementStart(9,"dw-input-group",10),a.\u0275\u0275element(10,"input",11),a.\u0275\u0275elementEnd(),a.\u0275\u0275template(11,se,2,0,"ng-template",null,12,a.\u0275\u0275templateRefExtractor),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(13,"div",7),a.\u0275\u0275elementStart(14,"div",8),a.\u0275\u0275text(15,"\u5ba2\u6237"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(16,"dw-form-item",9),a.\u0275\u0275elementStart(17,"dw-form-control"),a.\u0275\u0275elementStart(18,"dw-input-group",10),a.\u0275\u0275element(19,"input",13),a.\u0275\u0275elementEnd(),a.\u0275\u0275template(20,ce,2,0,"ng-template",null,14,a.\u0275\u0275templateRefExtractor),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(22,"div",15),a.\u0275\u0275elementStart(23,"button",16),a.\u0275\u0275listener("click",function(){return a.\u0275\u0275restoreView(e),a.\u0275\u0275nextContext().searchData()}),a.\u0275\u0275text(24),a.\u0275\u0275pipe(25,"translate"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(26,"button",16),a.\u0275\u0275listener("click",function(){return a.\u0275\u0275restoreView(e),a.\u0275\u0275nextContext().resetSearch()}),a.\u0275\u0275text(27),a.\u0275\u0275pipe(28,"translate"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(29,"div",17),a.\u0275\u0275listener("click",function(){return a.\u0275\u0275restoreView(e),a.\u0275\u0275nextContext().isShowSearchExpand()}),a.\u0275\u0275text(30),a.\u0275\u0275element(31,"em",18),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(32,"div",6),a.\u0275\u0275elementStart(33,"div",7),a.\u0275\u0275elementStart(34,"div",8),a.\u0275\u0275text(35,"\u670d\u52a1\u7ad9\u70b9"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(36,"dw-form-item",9),a.\u0275\u0275elementStart(37,"dw-form-control"),a.\u0275\u0275elementStart(38,"dw-input-group",10),a.\u0275\u0275element(39,"input",19),a.\u0275\u0275elementEnd(),a.\u0275\u0275template(40,me,2,0,"ng-template",null,20,a.\u0275\u0275templateRefExtractor),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(42,"div",7),a.\u0275\u0275elementStart(43,"div",8),a.\u0275\u0275text(44,"\u670d\u52a1\u4eba\u5458"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(45,"dw-form-item",9),a.\u0275\u0275elementStart(46,"dw-form-control"),a.\u0275\u0275elementStart(47,"dw-input-group",10),a.\u0275\u0275element(48,"input",21),a.\u0275\u0275elementEnd(),a.\u0275\u0275template(49,pe,2,0,"ng-template",null,22,a.\u0275\u0275templateRefExtractor),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275template(51,ue,22,0,"ng-container",23),a.\u0275\u0275elementEnd(),a.\u0275\u0275element(52,"hr",24),a.\u0275\u0275elementStart(53,"div",4),a.\u0275\u0275text(54,"\u4fee\u6539\u680f\u4f4d"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(55,"div",25),a.\u0275\u0275elementStart(56,"div",7),a.\u0275\u0275elementStart(57,"div",8),a.\u0275\u0275text(58,"\u4fee\u6539\u680f\u4f4d"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(59,"dw-form-item",9),a.\u0275\u0275elementStart(60,"dw-form-control"),a.\u0275\u0275elementStart(61,"dw-select",26),a.\u0275\u0275listener("ngModelChange",function(t){return a.\u0275\u0275restoreView(e),a.\u0275\u0275nextContext().modify_item=t})("ngModelChange",function(t){return a.\u0275\u0275restoreView(e),a.\u0275\u0275nextContext().bindPickerChange(t)}),a.\u0275\u0275element(62,"dw-option",27),a.\u0275\u0275element(63,"dw-option",27),a.\u0275\u0275element(64,"dw-option",27),a.\u0275\u0275element(65,"dw-option",27),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(66,"div",7),a.\u0275\u0275elementStart(67,"div",8),a.\u0275\u0275text(68,"\u8d4b\u503c"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(69,"dw-form-item",9),a.\u0275\u0275template(70,ge,5,2,"dw-form-control",23),a.\u0275\u0275template(71,fe,3,1,"dw-form-control",23),a.\u0275\u0275template(72,we,4,2,"dw-form-control",23),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(73,"div",28),a.\u0275\u0275element(74,"app-multy-all-select",null,29),a.\u0275\u0275elementEnd()}if(2&e){const e=a.\u0275\u0275reference(12),t=a.\u0275\u0275reference(21),n=a.\u0275\u0275reference(41),i=a.\u0275\u0275reference(50),r=a.\u0275\u0275nextContext();a.\u0275\u0275advance(2),a.\u0275\u0275property("formGroup",r.form),a.\u0275\u0275advance(7),a.\u0275\u0275property("dwSuffix",e),a.\u0275\u0275advance(9),a.\u0275\u0275property("dwSuffix",t),a.\u0275\u0275advance(5),a.\u0275\u0275property("dwType","primary"),a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate1(" ",a.\u0275\u0275pipeBind1(25,24,"\u67e5\u8be2")," "),a.\u0275\u0275advance(2),a.\u0275\u0275property("dwType","defult"),a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate1(" ",a.\u0275\u0275pipeBind1(28,26,"\u91cd\u7f6e")," "),a.\u0275\u0275advance(3),a.\u0275\u0275textInterpolate1(" ",r.showMore?"\u6536\u8d77":"\u5c55\u5f00"," "),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwType",r.showMore?"up":"down"),a.\u0275\u0275advance(7),a.\u0275\u0275property("dwSuffix",n),a.\u0275\u0275advance(9),a.\u0275\u0275property("dwSuffix",i),a.\u0275\u0275advance(4),a.\u0275\u0275property("ngIf",r.showMore),a.\u0275\u0275advance(10),a.\u0275\u0275property("ngModel",r.modify_item),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwLabel","\u4ea7\u54c1\u5206\u7c7b")("dwValue","item_group"),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwLabel","\u670d\u52a1\u7ad9\u70b9")("dwValue","service_site"),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwLabel","\u670d\u52a1\u4eba\u5458")("dwValue","employee"),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwLabel","\u7ef4\u62a4\u4fdd\u517b")("dwValue","enable_maintain"),a.\u0275\u0275advance(5),a.\u0275\u0275property("ngIf","item_group"===r.modify_item||"service_site"===r.modify_item||"employee"===r.modify_item),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf","delivery_date"===r.modify_item||"expiry_date"===r.modify_item),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf","enable_maintain"===r.modify_item)}}const xe=function(){return{height:"calc(100% - 24px)",overflow:"auto","padding-left":"16px"}};let Ce=(()=>{class e{constructor(e,t,n,i){this.fb=e,this.http=t,this.message=n,this.datePipe=i,this.visibleChanged=new a.EventEmitter,this.showMultyAllOpener=!1,this.showMore=!1,this.modify_item="item_group",this.modify_value="",this.modify_obj={item_group:"\u4ea7\u54c1\u5206\u7c7b",service_site:"\u670d\u52a1\u7ad9\u70b9",employee:"\u670d\u52a1\u4eba\u5458",delivery_date:"\u51fa\u5e93\u65e5\u671f",expiry_date:"\u4fdd\u4fee\u622a\u6b62\u65e5\u671f",enable_maintain:"\u7ef4\u62a4\u4fdd\u517b"},this.form=this.fb.group({item_group_id:[""],item_group_name:["\u5168\u90e8"],customer_id:[""],customer_name:["\u5168\u90e8"],service_site_id:[""],service_site_name:["\u5168\u90e8"],employee_id:[""],employee_name:["\u5168\u90e8"],delivery_date_start:[""],delivery_date_end:[""],expiry_date_start:[""],expiry_date_end:[""]})}ngOnInit(){}initData(){this.showMore=!1,this.resetData(),this.getOpenerIds()}getOpenerIds(){let e=[];const t=[{label:"service_site",url:"restful/service/productFile/ProductFile/ServiceSiteForBatchModify"},{label:"employee",url:`restful/service/productFile/ProductFile/ServiceEmployeeForBatchModify?serviceSiteId=${this.form.value.service_site_id}`}];for(let n of t)e.push(new Promise((e,t)=>{this.http.get(n.url).subscribe(t=>{const i=[];t.forEach(e=>{i.push(e[n.label+"_id"]+"")}),e(i.join(","))},t=>{t.hasOwnProperty("error")&&t.error.hasOwnProperty("errorMessage")&&t.error.errorMessage&&this.message.error(t.error.errorMessage),e("")})}));Promise.all(e).then(e=>{console.log("\u6240\u6709id",e),this.form.get("service_site_id").setValue(e[0]),this.form.get("employee_id").setValue(e[1]),this.child2.modify_obj={modify_item_label:this.modify_item,modify_item_name:this.modify_obj[this.modify_item],modify_item_value:this.modify_value}})}openDataWin(e){this.showMultyAllOpener=!0}getConfigValue(e,t){return"item_group"===e?{modalTitle:"\u8bf7\u9009\u62e9\u4ea7\u54c1\u5206\u7c7b",modalWidth:"50%",multiSelect:t,tableIdField:"item_group_id",tableNameField:"item_group_name",returnFields:["item_group_id","item_group_name"],tablePageSize:10,tableColDefs:[{title:"\u5206\u7c7b\u7f16\u53f7",field:"item_group_code",width:"220"},{title:"\u5206\u7c7b\u540d\u79f0",field:"item_group_name",width:"310"}],tableCustomTag:e=>"("+e.item_group_code+")"+e.item_group_name,dataSourceUrl:"restful/service/itemGroup/ItemGroup/ItemGroup?code=&name=&type=1",dwHttp:this.http}:"customer"===e?{modalTitle:"\u8bf7\u9009\u62e9\u5ba2\u6237",modalWidth:"50%",multiSelect:t,tableIdField:"customer_id",tableNameField:"customer_name",tablePageSize:10,returnFields:["customer_id","customer_name"],tableColDefs:[{title:"\u5ba2\u6237\u7f16\u53f7",field:"customer_code",width:"220"},{title:"\u5ba2\u6237\u540d\u79f0",field:"customer_name",width:"310"}],tableCustomTag:e=>"("+e.customer_code+")"+e.customer_name,dataSourceUrl:"restful/service/productFile/ProductFile/CustomerForBatchModify",dwHttp:this.http}:"service_site"===e?{modalTitle:"\u8bf7\u9009\u62e9\u670d\u52a1\u7ad9\u70b9",modalWidth:"50%",multiSelect:t,tableIdField:"service_site_id",tableNameField:"service_site_name",tablePageSize:10,returnFields:["service_site_id","service_site_name"],tableColDefs:[{title:"\u7f16\u53f7",field:"service_site_code",width:"220"},{title:"\u540d\u79f0",field:"service_site_name",width:"310"}],tableCustomTag:e=>"("+e.service_site_code+")"+e.service_site_name,dataSourceUrl:"restful/service/productFile/ProductFile/ServiceSiteForBatchModify",dwHttp:this.http}:{modalTitle:"\u8bf7\u9009\u62e9\u670d\u52a1\u4eba\u5458",modalWidth:"50%",multiSelect:t,tableIdField:"employee_id",tableNameField:"employee_name",tablePageSize:10,returnFields:["employee_id","employee_name"],tableColDefs:[{title:"\u4eba\u5458\u7f16\u53f7",field:"employee_code",width:"220"},{title:"\u4eba\u5458\u59d3\u540d",field:"employee_name",width:"310"}],tableCustomTag:e=>"("+e.employee_code+")"+e.employee_name,dataSourceUrl:`restful/service/productFile/ProductFile/ServiceEmployeeForBatchModify?serviceSiteId=${this.form.value.service_site_id}`,dwHttp:this.http}}openSelect(e){console.log(e),this.showMultyAllOpener=!1,e&&(this.form.get(`${e.type}_id`).setValue(e.chosen_id),this.form.get(`${e.type}_name`).setValue(e.chosen_name))}isShowSearchExpand(){this.showMore=!this.showMore}openSelect2(e){e&&(this.modify_value={id:e[0][`${this.modify_item}_id`]+"",code:e[0][`${this.modify_item}_code`],name:e[0][`${this.modify_item}_name`]})}bindPickerChange(e){this.modify_value="enable_maintain"!==e&&"",this.child2.modify_obj={modify_item_label:this.modify_item,modify_item_name:this.modify_obj[this.modify_item],modify_item_value:this.modify_value}}handleOk(){const e=this.form.value;if(e.delivery_date_start&&e.delivery_date_end&&new Date(e.delivery_date_start)>new Date(e.delivery_date_end))return void this.message.error("\u51fa\u5e93\u8d77\u59cb\u65e5\u671f\u4e0d\u53ef\u5927\u4e8e\u51fa\u5e93\u7ed3\u675f\u65e5\u671f");if(e.expiry_date_start&&e.expiry_date_end&&new Date(e.expiry_date_start)>new Date(e.expiry_date_end))return void this.message.error("\u4fdd\u4fee\u622a\u6b62\u8d77\u59cb\u65e5\u671f\u4e0d\u53ef\u5927\u4e8e\u4fdd\u4fee\u622a\u6b62\u7ed3\u675f\u65e5\u671f");if("enable_maintain"!==this.modify_item&&!this.modify_value)return void this.message.error("\u8d4b\u503c\u4e0d\u53ef\u4e3a\u7a7a");const t=this.child2.dataList.filter(e=>e.checked);if(!t.length)return void this.message.create("error","\u6ca1\u6709\u9700\u4fee\u6539\u7684\u6570\u636e\uff0c\u8bf7\u5148\u4f7f\u7528\u3010\u67e5\u8be2\u3011\u786e\u8ba4\u8981\u4fee\u6539\u7684\u6570\u636e\u8303\u56f4\uff0c\u518d\u8fdb\u884c\u4fee\u6539\uff01");const n=[];t.forEach(e=>{n.push(e.product_file_id+"")});const i={valueName:this.modify_value.name?this.modify_value.name:"",productFileIds:n,modifyColumn:"item_group"===this.modify_item||"service_site"===this.modify_item||"employee"===this.modify_item?this.modify_item+"_id":this.modify_item,modifyValue:this.modify_value.id?this.modify_value.id:this.modify_item.indexOf("_date")>=0?this.datePipe.transform(this.modify_value,"yyyy-MM-dd"):this.modify_value};i.modifyValue=!0===i.modifyValue?"1":!1===i.modifyValue?"0":i.modifyValue,this.visibleChanged.emit(i)}handleCancel(){this.visibleChanged.emit(null)}resetData(){this.form.reset({item_group_id:"",item_group_name:"\u5168\u90e8",customer_id:"",customer_name:"\u5168\u90e8",service_site_id:"",service_site_name:"\u5168\u90e8",employee_id:"",employee_name:"\u5168\u90e8",delivery_date_start:"",delivery_date_end:"",expiry_date_start:"",expiry_date_end:""}),this.modify_item="item_group",this.modify_value=""}searchData(){const e={itemGroups:this.form.value.item_group_id?this.form.value.item_group_id.split(","):[],customers:this.form.value.customer_id?this.form.value.customer_id.split(","):[],serviceSites:this.form.value.service_site_id?this.form.value.service_site_id.split(","):[],employees:this.form.value.employee_id?this.form.value.employee_id.split(","):[],deliveryDateStart:this.datePipe.transform(this.form.value.delivery_date_start,"yyyy-MM-dd")||"",deliveryDateEnd:this.datePipe.transform(this.form.value.delivery_date_end,"yyyy-MM-dd")||"",expiryDateStart:this.datePipe.transform(this.form.value.expiry_date_start,"yyyy-MM-dd")||"",expiryDateEnd:this.datePipe.transform(this.form.value.expiry_date_end,"yyyy-MM-dd")||""};this.child2.initData(e,{modify_item_label:this.modify_item,modify_item_name:this.modify_obj[this.modify_item],modify_item_value:this.modify_value})}resetSearch(){this.form.reset({item_group_id:"",item_group_name:"\u5168\u90e8",customer_id:"",customer_name:"\u5168\u90e8",service_site_id:"",service_site_name:"\u5168\u90e8",employee_id:"",employee_name:"\u5168\u90e8",delivery_date_start:"",delivery_date_end:"",expiry_date_start:"",expiry_date_end:""}),this.getOpenerIds(),this.child2.reset()}}return e.\u0275fac=function(t){return new(t||e)(a.\u0275\u0275directiveInject(l.FormBuilder),a.\u0275\u0275directiveInject(C.DwDapHttpClient),a.\u0275\u0275directiveInject(s.DwMessageService),a.\u0275\u0275directiveInject(i.DatePipe))},e.\u0275cmp=a.\u0275\u0275defineComponent({type:e,selectors:[["app-multy-modify-step1"]],viewQuery:function(e,t){if(1&e&&a.\u0275\u0275viewQuery(de,5),2&e){let e;a.\u0275\u0275queryRefresh(e=a.\u0275\u0275loadQuery())&&(t.child2=e.first)}},inputs:{visible:"visible"},outputs:{visibleChanged:"visibleChanged"},decls:4,vars:8,consts:[[3,"dwBodyStyle","dwMaskClosable","dwWidth","dwVisible","dwTitle","dwOkText","dwVisibleChange","dwOnCancel","dwOnOk"],["dwModalContent",""],[3,"visible","visibleChanged"],["child",""],[1,"sub-title",2,"margin-left","8px"],["dw-form","",2,"margin-left","-6px",3,"formGroup"],["dw-row","",1,"search-form-box"],[1,"search-input"],[1,"label"],[1,"form-input"],["dwSearch","",3,"dwSuffix"],["dw-input","","type","text","readonly","","dw-input","","formControlName","item_group_name"],["suffixcodeData",""],["dw-input","","type","text","readonly","","dw-input","","formControlName","customer_name"],["suffixcustomerData",""],[1,"search-input",2,"width","172px"],["dw-button","",3,"dwType","click"],[1,"isExpand",3,"click"],["dw-icon","","dwTheme","outline",3,"dwType"],["dw-input","","type","text","readonly","","dw-input","","formControlName","service_site_name"],["suffixsiteData",""],["dw-input","","type","text","readonly","","dw-input","","formControlName","employee_name"],["suffixemployeeData",""],[4,"ngIf"],["color","#e5e5e5"],["dw-row","",1,"search-form-box",2,"margin-left","-6px"],[2,"width","100%",3,"ngModel","ngModelChange"],[3,"dwLabel","dwValue"],[2,"margin-left","18px"],["child2",""],["dw-button","","dwType","primary","dwSearch","","type","button",3,"click"],["dw-icon","","dwType","search","dwTheme","outline"],[2,"display","flex","align-items","center"],["formControlName","delivery_date_start"],[2,"margin","0 8px"],["formControlName","delivery_date_end"],["formControlName","expiry_date_start"],["formControlName","expiry_date_end"],["dw-input","","type","text","readonly","","dw-input","",3,"ngModel","ngModelChange"],[3,"selectedChanged"],["selectOpener",""],[3,"ngModel","ngModelChange"],["dw-checkbox","",2,"color","rgba(0,0,0,0.85)","align-items","center",3,"ngModel","ngModelChange"]],template:function(e,t){1&e&&(a.\u0275\u0275elementStart(0,"dw-modal",0),a.\u0275\u0275listener("dwVisibleChange",function(e){return t.visible=e})("dwOnCancel",function(){return t.handleCancel()})("dwOnOk",function(){return t.handleOk()}),a.\u0275\u0275template(1,ve,76,28,"ng-template",1),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(2,"app-multy-all-select-opener",2,3),a.\u0275\u0275listener("visibleChanged",function(e){return t.openSelect(e)}),a.\u0275\u0275elementEnd()),2&e&&(a.\u0275\u0275property("dwBodyStyle",a.\u0275\u0275pureFunction0(7,xe))("dwMaskClosable",!1)("dwWidth",1e3)("dwVisible",t.visible)("dwTitle","\u6279\u91cf\u4fee\u6539\u4ea7\u54c1\u6863\u6848")("dwOkText","\u7acb\u5373\u4fee\u6539"),a.\u0275\u0275advance(2),a.\u0275\u0275property("visible",t.showMultyAllOpener))},directives:[c.DwModalComponent,c.DwModalContentDirective,R,l.\u0275NgNoValidate,l.NgControlStatusGroup,N.DwFormDirective,l.FormGroupDirective,A.DwRowDirective,N.DwFormItemComponent,A.DwColDirective,N.DwFormControlComponent,K.u,z.DwInputGroupComponent,z.DwInputGroupWhitSuffixOrPrefixDirective,z.DwInputDirective,l.DefaultValueAccessor,l.NgControlStatus,l.FormControlName,j.DwButtonComponent,J.uG,B.DwIconDirective,i.NgIf,$.DwSelectComponent,l.NgModel,$.DwOptionComponent,le,W.DwDatePickerComponent,q.R,S.DwCheckboxComponent],pipes:[b.TranslatePipe],styles:[".search-form-box[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]{width:calc((100% - 2 * 24px - 172px) / 2)}.search-form-box[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{width:82px;text-align:right}.search-form-box[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]   .form-input[_ngcontent-%COMP%]{flex:1}.sub-title[_ngcontent-%COMP%]{padding-left:8px}.isExpand[_ngcontent-%COMP%]{width:46px;white-space:nowrap;color:#1890ff;margin-left:16px;cursor:pointer}"]}),e})();var _e=n(88059),ye=n(82542),Se=n(64840);const be=["child"],Ie=["childStep2"],Ee=["childPreview"],De=["dwTableMulty"],Oe=["dwTable"];function Me(e,t){if(1&e){const e=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"button",50),a.\u0275\u0275listener("click",function(){return a.\u0275\u0275restoreView(e),a.\u0275\u0275nextContext().query()}),a.\u0275\u0275element(1,"em",51),a.\u0275\u0275elementEnd()}}function Pe(e,t){if(1&e){const e=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"em",54),a.\u0275\u0275listener("click",function(){return a.\u0275\u0275restoreView(e),a.\u0275\u0275nextContext(2).clear("customer")}),a.\u0275\u0275elementEnd()}}function ke(e,t){if(1&e){const e=a.\u0275\u0275getCurrentView();a.\u0275\u0275template(0,Pe,1,0,"em",52),a.\u0275\u0275elementStart(1,"button",53),a.\u0275\u0275listener("click",function(){return a.\u0275\u0275restoreView(e),a.\u0275\u0275nextContext().openCustomer()}),a.\u0275\u0275element(2,"em",51),a.\u0275\u0275elementEnd()}if(2&e){const e=a.\u0275\u0275nextContext();a.\u0275\u0275property("ngIf",e.searchForm.value.customer_name),a.\u0275\u0275advance(1),a.\u0275\u0275propertyInterpolate("angularticsLabel",e.userInfo.tenantId+","+e.userInfo.userId),a.\u0275\u0275property("angularticsCategory","\u4ea7\u54c1\u6863\u6848")}}function Fe(e,t){if(1&e){const e=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"div",11),a.\u0275\u0275elementStart(1,"div"),a.\u0275\u0275text(2,"\xa0\xa0\xa0\xa0\u7c7b\u578b\xa0\xa0\xa0\xa0"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(3,"dw-form-item",13),a.\u0275\u0275elementStart(4,"dw-form-control"),a.\u0275\u0275elementStart(5,"dw-radio-group",60),a.\u0275\u0275listener("ngModelChange",function(){return a.\u0275\u0275restoreView(e),a.\u0275\u0275nextContext(2).radioChange()}),a.\u0275\u0275elementStart(6,"label",61),a.\u0275\u0275text(7,"\u5168\u90e8"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(8,"label",61),a.\u0275\u0275text(9,"\u4ea7\u7ebf/\u9879\u76ee"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(10,"label",61),a.\u0275\u0275text(11,"\u5355\u673a"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd()}2&e&&(a.\u0275\u0275advance(6),a.\u0275\u0275property("dwValue",""),a.\u0275\u0275advance(2),a.\u0275\u0275property("dwValue","2"),a.\u0275\u0275advance(2),a.\u0275\u0275property("dwValue","1"))}function Ve(e,t){if(1&e){const e=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"div"),a.\u0275\u0275elementStart(1,"div",10),a.\u0275\u0275elementStart(2,"div",11),a.\u0275\u0275elementStart(3,"div",12),a.\u0275\u0275text(4,"\u552e\u540e\u72b6\u6001"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(5,"dw-form-item",13),a.\u0275\u0275elementStart(6,"dw-form-control"),a.\u0275\u0275elementStart(7,"dw-select",55),a.\u0275\u0275listener("ngModelChange",function(t){return a.\u0275\u0275restoreView(e),a.\u0275\u0275nextContext().onOpenRange3(t)}),a.\u0275\u0275element(8,"dw-option",56),a.\u0275\u0275element(9,"dw-option",56),a.\u0275\u0275element(10,"dw-option",56),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(11,"div",11),a.\u0275\u0275elementStart(12,"div",12),a.\u0275\u0275text(13,"\u4e0b\u6b21\u7ef4\u62a4\u65e5\u671f"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(14,"dw-form-item",13),a.\u0275\u0275elementStart(15,"dw-form-control"),a.\u0275\u0275elementStart(16,"dw-date-picker",57),a.\u0275\u0275listener("ngModelChange",function(){return a.\u0275\u0275restoreView(e),a.\u0275\u0275nextContext().onOpenRange2()}),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275template(17,Fe,12,3,"div",58),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(18,"div",10),a.\u0275\u0275elementStart(19,"div",11),a.\u0275\u0275elementStart(20,"div",12),a.\u0275\u0275text(21,"\u914d\u4ef6\u5e8f\u5217\u53f7"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(22,"dw-form-item",13),a.\u0275\u0275elementStart(23,"dw-form-control"),a.\u0275\u0275elementStart(24,"dw-input-group"),a.\u0275\u0275element(25,"input",59),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd()}if(2&e){const e=a.\u0275\u0275nextContext();a.\u0275\u0275advance(8),a.\u0275\u0275property("dwLabel","\u5168\u90e8")("dwValue",""),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwLabel","\u6b63\u5e38")("dwValue","1"),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwLabel","\u62a5\u4fee\u4e2d")("dwValue","2"),a.\u0275\u0275advance(7),a.\u0275\u0275property("ngIf","0"===e.fileType)}}function Te(e,t){1&e&&(a.\u0275\u0275elementStart(0,"th",68),a.\u0275\u0275elementStart(1,"span",30),a.\u0275\u0275text(2,"\u7f16\u7801"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd())}function Le(e,t){1&e&&(a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275template(1,Te,3,0,"th",67),a.\u0275\u0275elementContainerEnd()),2&e&&(a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","product_file_code"))}function Re(e,t){1&e&&(a.\u0275\u0275elementStart(0,"th",70),a.\u0275\u0275elementStart(1,"span",30),a.\u0275\u0275text(2,"\u540d\u79f0"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd())}function Ae(e,t){1&e&&(a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275template(1,Re,3,0,"th",69),a.\u0275\u0275elementContainerEnd()),2&e&&(a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","product_file_name"))}function Ne(e,t){1&e&&(a.\u0275\u0275elementStart(0,"th",72),a.\u0275\u0275elementStart(1,"span",30),a.\u0275\u0275text(2,"\u4ea7\u54c1\u5206\u7c7b"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd())}function $e(e,t){1&e&&(a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275template(1,Ne,3,0,"th",71),a.\u0275\u0275elementContainerEnd()),2&e&&(a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","item_group_name"))}function je(e,t){1&e&&(a.\u0275\u0275elementStart(0,"th",74),a.\u0275\u0275elementStart(1,"span",30),a.\u0275\u0275text(2,"\u7c7b\u578b"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd())}function ze(e,t){1&e&&(a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275template(1,je,3,0,"th",73),a.\u0275\u0275elementContainerEnd()),2&e&&(a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","file_type_name"))}function Be(e,t){1&e&&(a.\u0275\u0275elementStart(0,"span",30),a.\u0275\u0275text(1,"\u5e8f\u5217\u53f7"),a.\u0275\u0275elementEnd())}function qe(e,t){1&e&&(a.\u0275\u0275elementStart(0,"span",30),a.\u0275\u0275text(1,"\u9879\u76ee\u53f7"),a.\u0275\u0275elementEnd())}function We(e,t){1&e&&(a.\u0275\u0275elementStart(0,"span",30),a.\u0275\u0275text(1,"\u5e8f\u5217\u53f7/\u9879\u76ee\u53f7"),a.\u0275\u0275elementEnd())}function Ge(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"th",74),a.\u0275\u0275template(1,Be,2,0,"span",75),a.\u0275\u0275template(2,qe,2,0,"span",75),a.\u0275\u0275template(3,We,2,0,"span",75),a.\u0275\u0275elementEnd()),2&e){const e=a.\u0275\u0275nextContext(3);a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf","1"===e.fileType),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf","2"===e.fileType),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf","0"===e.fileType)}}function Ue(e,t){1&e&&(a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275template(1,Ge,4,3,"th",73),a.\u0275\u0275elementContainerEnd()),2&e&&(a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","sn"))}function He(e,t){1&e&&(a.\u0275\u0275elementStart(0,"th",77),a.\u0275\u0275elementStart(1,"span",30),a.\u0275\u0275text(2,"\u89c4\u683c"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd())}function Xe(e,t){1&e&&(a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275template(1,He,3,0,"th",76),a.\u0275\u0275elementContainerEnd()),2&e&&(a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","specification"))}function Qe(e,t){1&e&&(a.\u0275\u0275elementStart(0,"th",74),a.\u0275\u0275elementStart(1,"span",30),a.\u0275\u0275text(2,"\u578b\u53f7"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd())}function Ke(e,t){1&e&&(a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275template(1,Qe,3,0,"th",73),a.\u0275\u0275elementContainerEnd()),2&e&&(a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","model"))}function Je(e,t){1&e&&(a.\u0275\u0275elementStart(0,"th",79),a.\u0275\u0275elementStart(1,"span",30),a.\u0275\u0275text(2,"\u4f7f\u7528\u5730\u70b9"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd())}function Ze(e,t){1&e&&(a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275template(1,Je,3,0,"th",78),a.\u0275\u0275elementContainerEnd()),2&e&&(a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","location"))}function Ye(e,t){1&e&&(a.\u0275\u0275elementStart(0,"th",79),a.\u0275\u0275elementStart(1,"span",30),a.\u0275\u0275text(2,"\u670d\u52a1\u7ad9\u70b9"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd())}function et(e,t){1&e&&(a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275template(1,Ye,3,0,"th",78),a.\u0275\u0275elementContainerEnd()),2&e&&(a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","service_site_name"))}function tt(e,t){1&e&&(a.\u0275\u0275elementStart(0,"th",81),a.\u0275\u0275elementStart(1,"span",30),a.\u0275\u0275text(2,"\u670d\u52a1\u4eba\u5458"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd())}function nt(e,t){1&e&&(a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275template(1,tt,3,0,"th",80),a.\u0275\u0275elementContainerEnd()),2&e&&(a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","employee_name"))}function it(e,t){1&e&&(a.\u0275\u0275elementStart(0,"th",83),a.\u0275\u0275elementStart(1,"span",30),a.\u0275\u0275text(2,"\u5ba2\u6237"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd())}function rt(e,t){1&e&&(a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275template(1,it,3,0,"th",82),a.\u0275\u0275elementContainerEnd()),2&e&&(a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","customer_name"))}function at(e,t){1&e&&(a.\u0275\u0275elementStart(0,"th",85),a.\u0275\u0275elementStart(1,"span",30),a.\u0275\u0275text(2,"\u51fa\u5e93\u65e5\u671f"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd())}function ot(e,t){1&e&&(a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275template(1,at,3,0,"th",84),a.\u0275\u0275elementContainerEnd()),2&e&&(a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","delivery_date"))}function lt(e,t){1&e&&(a.\u0275\u0275elementStart(0,"th",87),a.\u0275\u0275elementStart(1,"span",30),a.\u0275\u0275text(2,"\u5b89\u88c5\u65e5\u671f"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd())}function dt(e,t){1&e&&(a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275template(1,lt,3,0,"th",86),a.\u0275\u0275elementContainerEnd()),2&e&&(a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","installation_date"))}function st(e,t){1&e&&(a.\u0275\u0275elementStart(0,"th",85),a.\u0275\u0275elementStart(1,"span",30),a.\u0275\u0275text(2,"\u9a8c\u6536\u65e5\u671f"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd())}function ct(e,t){1&e&&(a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275template(1,st,3,0,"th",84),a.\u0275\u0275elementContainerEnd()),2&e&&(a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","acceptance_date"))}function mt(e,t){1&e&&(a.\u0275\u0275elementStart(0,"th",85),a.\u0275\u0275elementStart(1,"span",30),a.\u0275\u0275text(2,"\u4fdd\u4fee\u622a\u81f3\u65e5\u671f"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd())}function pt(e,t){1&e&&(a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275template(1,mt,3,0,"th",84),a.\u0275\u0275elementContainerEnd()),2&e&&(a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","expiry_date"))}function ut(e,t){1&e&&(a.\u0275\u0275elementStart(0,"th",74),a.\u0275\u0275elementStart(1,"span",30),a.\u0275\u0275text(2,"\u63cf\u8ff0"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd())}function ht(e,t){1&e&&(a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275template(1,ut,3,0,"th",73),a.\u0275\u0275elementContainerEnd()),2&e&&(a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","product_description"))}function gt(e,t){1&e&&(a.\u0275\u0275elementStart(0,"th",89),a.\u0275\u0275elementStart(1,"span",30),a.\u0275\u0275text(2,"\u7ef4\u4fee\u6b21\u6570"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd()),2&e&&a.\u0275\u0275property("dwAlign","right")}function ft(e,t){1&e&&(a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275template(1,gt,3,1,"th",88),a.\u0275\u0275elementContainerEnd()),2&e&&(a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","maintenance_count"))}function wt(e,t){1&e&&(a.\u0275\u0275elementStart(0,"th",91),a.\u0275\u0275elementStart(1,"span",30),a.\u0275\u0275text(2,"\u552e\u540e\u72b6\u6001"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd()),2&e&&a.\u0275\u0275property("dwAlign","center")}function vt(e,t){1&e&&(a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275template(1,wt,3,1,"th",90),a.\u0275\u0275elementContainerEnd()),2&e&&(a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","service_status"))}function xt(e,t){1&e&&(a.\u0275\u0275elementStart(0,"th",91),a.\u0275\u0275elementStart(1,"span",30),a.\u0275\u0275text(2,"\u4ea7\u54c1\u5c65\u5386"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd()),2&e&&a.\u0275\u0275property("dwAlign","center")}function Ct(e,t){1&e&&(a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275template(1,xt,3,1,"th",90),a.\u0275\u0275elementContainerEnd()),2&e&&(a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","product_resume"))}function _t(e,t){1&e&&(a.\u0275\u0275elementStart(0,"th",91),a.\u0275\u0275elementStart(1,"span",30),a.\u0275\u0275text(2,"\u64cd\u4f5c"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd()),2&e&&a.\u0275\u0275property("dwAlign","center")}function yt(e,t){1&e&&(a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275template(1,_t,3,1,"th",90),a.\u0275\u0275elementContainerEnd()),2&e&&(a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","operation"))}function St(e,t){if(1&e){const e=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"td",94),a.\u0275\u0275elementStart(1,"a",95),a.\u0275\u0275listener("click",function(){a.\u0275\u0275restoreView(e);const t=a.\u0275\u0275nextContext(2).$implicit;return a.\u0275\u0275nextContext(2).detail(t)}),a.\u0275\u0275text(2),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd()}if(2&e){const e=a.\u0275\u0275nextContext(2).$implicit,t=a.\u0275\u0275nextContext(2);a.\u0275\u0275advance(1),a.\u0275\u0275propertyInterpolate("angularticsLabel",t.userInfo.tenantId+","+t.userInfo.userId),a.\u0275\u0275property("angularticsCategory","\u4ea7\u54c1\u6863\u6848"),a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate(e.product_file_code)}}function bt(e,t){1&e&&(a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275template(1,St,3,3,"td",93),a.\u0275\u0275elementContainerEnd()),2&e&&(a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","product_file_code"))}function It(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"td",97),a.\u0275\u0275text(1),a.\u0275\u0275elementEnd()),2&e){const e=a.\u0275\u0275nextContext(2).$implicit;a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate1(" ",e.product_file_name," ")}}function Et(e,t){1&e&&(a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275template(1,It,2,1,"td",96),a.\u0275\u0275elementContainerEnd()),2&e&&(a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","product_file_name"))}function Dt(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"td",99),a.\u0275\u0275text(1),a.\u0275\u0275elementEnd()),2&e){const e=a.\u0275\u0275nextContext(2).$implicit;a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate1(" ",e.item_group_name," ")}}function Ot(e,t){1&e&&(a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275template(1,Dt,2,1,"td",98),a.\u0275\u0275elementContainerEnd()),2&e&&(a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","item_group_name"))}function Mt(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"td",101),a.\u0275\u0275text(1),a.\u0275\u0275elementEnd()),2&e){const e=a.\u0275\u0275nextContext(2).$implicit;a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate1(" ","1"===e.file_type?"\u5355\u673a":"\u4ea7\u7ebf/\u9879\u76ee"," ")}}function Pt(e,t){1&e&&(a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275template(1,Mt,2,1,"td",100),a.\u0275\u0275elementContainerEnd()),2&e&&(a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","file_type_name"))}function kt(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"td",99),a.\u0275\u0275text(1),a.\u0275\u0275elementEnd()),2&e){const e=a.\u0275\u0275nextContext(2).$implicit;a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate1(" ",e.sn," ")}}function Ft(e,t){1&e&&(a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275template(1,kt,2,1,"td",98),a.\u0275\u0275elementContainerEnd()),2&e&&(a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","sn"))}function Vt(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"td",97),a.\u0275\u0275text(1),a.\u0275\u0275elementEnd()),2&e){const e=a.\u0275\u0275nextContext(2).$implicit;a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate1(" ",e.specification," ")}}function Tt(e,t){1&e&&(a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275template(1,Vt,2,1,"td",96),a.\u0275\u0275elementContainerEnd()),2&e&&(a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","specification"))}function Lt(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"td",99),a.\u0275\u0275text(1),a.\u0275\u0275elementEnd()),2&e){const e=a.\u0275\u0275nextContext(2).$implicit;a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate1(" ",e.model," ")}}function Rt(e,t){1&e&&(a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275template(1,Lt,2,1,"td",98),a.\u0275\u0275elementContainerEnd()),2&e&&(a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","model"))}function At(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"td",103),a.\u0275\u0275text(1),a.\u0275\u0275elementEnd()),2&e){const e=a.\u0275\u0275nextContext(2).$implicit;a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate1(" ",e.location," ")}}function Nt(e,t){1&e&&(a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275template(1,At,2,1,"td",102),a.\u0275\u0275elementContainerEnd()),2&e&&(a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","location"))}function $t(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"td",103),a.\u0275\u0275text(1),a.\u0275\u0275elementEnd()),2&e){const e=a.\u0275\u0275nextContext(2).$implicit;a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate1(" ",e.service_site_name," ")}}function jt(e,t){1&e&&(a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275template(1,$t,2,1,"td",102),a.\u0275\u0275elementContainerEnd()),2&e&&(a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","service_site_name"))}function zt(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"td",105),a.\u0275\u0275text(1),a.\u0275\u0275elementEnd()),2&e){const e=a.\u0275\u0275nextContext(2).$implicit;a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate1(" ",e.employee_name," ")}}function Bt(e,t){1&e&&(a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275template(1,zt,2,1,"td",104),a.\u0275\u0275elementContainerEnd()),2&e&&(a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","employee_name"))}function qt(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"td",107),a.\u0275\u0275text(1),a.\u0275\u0275elementEnd()),2&e){const e=a.\u0275\u0275nextContext(2).$implicit;a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate1(" ",e.customer_name," ")}}function Wt(e,t){1&e&&(a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275template(1,qt,2,1,"td",106),a.\u0275\u0275elementContainerEnd()),2&e&&(a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","customer_name"))}function Gt(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"td",109),a.\u0275\u0275text(1),a.\u0275\u0275pipe(2,"date"),a.\u0275\u0275elementEnd()),2&e){const e=a.\u0275\u0275nextContext(2).$implicit;a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate1(" ",a.\u0275\u0275pipeBind2(2,1,e.delivery_date,"yyyy/MM/dd")," ")}}function Ut(e,t){1&e&&(a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275template(1,Gt,3,4,"td",108),a.\u0275\u0275elementContainerEnd()),2&e&&(a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","delivery_date"))}function Ht(e,t){if(1&e&&(a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275text(1),a.\u0275\u0275pipe(2,"date"),a.\u0275\u0275pipe(3,"date"),a.\u0275\u0275elementContainerEnd()),2&e){const e=a.\u0275\u0275nextContext(3).$implicit;a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate2(" ",a.\u0275\u0275pipeBind2(2,2,e.installation_date,"yyyy/MM/dd"),"~",a.\u0275\u0275pipeBind2(3,5,e.installation_date_end,"yyyy/MM/dd")," ")}}function Xt(e,t){if(1&e&&(a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275text(1),a.\u0275\u0275pipe(2,"date"),a.\u0275\u0275elementContainerEnd()),2&e){const e=a.\u0275\u0275nextContext(3).$implicit;a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate1(" ",a.\u0275\u0275pipeBind2(2,1,e.installation_date,"yyyy/MM/dd")," ")}}function Qt(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"td",111),a.\u0275\u0275template(1,Ht,4,8,"ng-container",24),a.\u0275\u0275template(2,Xt,3,4,"ng-container",24),a.\u0275\u0275elementEnd()),2&e){const e=a.\u0275\u0275nextContext(2).$implicit;a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",e.installation_date&&e.installation_date_end),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",!e.installation_date_end)}}function Kt(e,t){1&e&&(a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275template(1,Qt,3,2,"td",110),a.\u0275\u0275elementContainerEnd()),2&e&&(a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","installation_date"))}function Jt(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"td",109),a.\u0275\u0275text(1),a.\u0275\u0275pipe(2,"date"),a.\u0275\u0275elementEnd()),2&e){const e=a.\u0275\u0275nextContext(2).$implicit;a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate1(" ",a.\u0275\u0275pipeBind2(2,1,e.acceptance_date,"yyyy/MM/dd")," ")}}function Zt(e,t){1&e&&(a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275template(1,Jt,3,4,"td",108),a.\u0275\u0275elementContainerEnd()),2&e&&(a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","acceptance_date"))}function Yt(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"td",109),a.\u0275\u0275text(1),a.\u0275\u0275pipe(2,"date"),a.\u0275\u0275elementEnd()),2&e){const e=a.\u0275\u0275nextContext(2).$implicit;a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate1(" ",a.\u0275\u0275pipeBind2(2,1,e.expiry_date,"yyyy/MM/dd")," ")}}function en(e,t){1&e&&(a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275template(1,Yt,3,4,"td",108),a.\u0275\u0275elementContainerEnd()),2&e&&(a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","expiry_date"))}function tn(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"td",99),a.\u0275\u0275text(1),a.\u0275\u0275elementEnd()),2&e){const e=a.\u0275\u0275nextContext(2).$implicit;a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate1(" ",e.product_description," ")}}function nn(e,t){1&e&&(a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275template(1,tn,2,1,"td",98),a.\u0275\u0275elementContainerEnd()),2&e&&(a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","product_description"))}function rn(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"td",113),a.\u0275\u0275text(1),a.\u0275\u0275elementEnd()),2&e){const e=a.\u0275\u0275nextContext(2).$implicit;a.\u0275\u0275property("dwAlign","right"),a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate1(" ",e.maintenance_count," ")}}function an(e,t){1&e&&(a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275template(1,rn,2,2,"td",112),a.\u0275\u0275elementContainerEnd()),2&e&&(a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","maintenance_count"))}function on(e,t){1&e&&(a.\u0275\u0275elementStart(0,"span",117),a.\u0275\u0275text(1,"\u6b63\u5e38"),a.\u0275\u0275elementEnd())}function ln(e,t){1&e&&(a.\u0275\u0275elementStart(0,"span",118),a.\u0275\u0275text(1,"\u62a5\u4fee\u4e2d"),a.\u0275\u0275elementEnd())}function dn(e,t){1&e&&(a.\u0275\u0275elementStart(0,"span",119),a.\u0275\u0275text(1,"\u5df2\u56de\u6536"),a.\u0275\u0275elementEnd())}function sn(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"td",91),a.\u0275\u0275template(1,on,2,0,"span",114),a.\u0275\u0275template(2,ln,2,0,"span",115),a.\u0275\u0275template(3,dn,2,0,"span",116),a.\u0275\u0275elementEnd()),2&e){const e=a.\u0275\u0275nextContext(2).$implicit;a.\u0275\u0275property("dwAlign","center"),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf","1"===e.service_status),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf","2"===e.service_status),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf","3"===e.service_status)}}function cn(e,t){1&e&&(a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275template(1,sn,4,4,"td",90),a.\u0275\u0275elementContainerEnd()),2&e&&(a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","service_status"))}function mn(e,t){if(1&e){const e=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"td",121),a.\u0275\u0275elementStart(1,"a",122),a.\u0275\u0275listener("dwClick",function(){a.\u0275\u0275restoreView(e);const t=a.\u0275\u0275nextContext(2).$implicit;return a.\u0275\u0275nextContext(2).goProductResume(t)}),a.\u0275\u0275text(2," \u67e5\u770b "),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd()}if(2&e){const e=a.\u0275\u0275nextContext(4);a.\u0275\u0275property("dwAlign","center"),a.\u0275\u0275advance(1),a.\u0275\u0275propertyInterpolate("angularticsLabel",e.userInfo.tenantId+","+e.userInfo.userId),a.\u0275\u0275property("dwActionId","resume")("dwDefaultAuthorized","disabled")("angularticsCategory","\u4ea7\u54c1\u6863\u6848")}}function pn(e,t){1&e&&(a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275template(1,mn,3,5,"td",120),a.\u0275\u0275elementContainerEnd()),2&e&&(a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","product_resume"))}function un(e,t){if(1&e){const e=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"div",128),a.\u0275\u0275elementStart(1,"a",129),a.\u0275\u0275listener("dwOnConfirm",function(){a.\u0275\u0275restoreView(e);const t=a.\u0275\u0275nextContext(3).$implicit;return a.\u0275\u0275nextContext(2).delete(t.product_file_id)}),a.\u0275\u0275pipe(2,"translate"),a.\u0275\u0275pipe(3,"translate"),a.\u0275\u0275pipe(4,"translate"),a.\u0275\u0275elementStart(5,"a",130),a.\u0275\u0275element(6,"img",131),a.\u0275\u0275element(7,"img",132),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd()}2&e&&(a.\u0275\u0275property("dwActionId","delete")("dwDefaultAuthorized","disabled"),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwPopconfirmTitle",a.\u0275\u0275pipeBind1(2,6,"\u662f\u5426\u5220\u9664"))("dwOkText",a.\u0275\u0275pipeBind1(3,8,"dw-determine"))("dwCancelText",a.\u0275\u0275pipeBind1(4,10,"dw-cancel"))("dwPopconfirmPlacement","topRight"))}function hn(e,t){if(1&e){const e=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"td",91),a.\u0275\u0275elementStart(1,"div",123),a.\u0275\u0275elementStart(2,"div",124),a.\u0275\u0275listener("click",function(){a.\u0275\u0275restoreView(e);const t=a.\u0275\u0275nextContext(2).$implicit;return a.\u0275\u0275nextContext(2).modify(t)}),a.\u0275\u0275element(3,"img",125),a.\u0275\u0275element(4,"img",126),a.\u0275\u0275elementEnd(),a.\u0275\u0275template(5,un,8,12,"div",127),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd()}if(2&e){const e=a.\u0275\u0275nextContext(2).$implicit,t=a.\u0275\u0275nextContext(2);a.\u0275\u0275property("dwAlign","center"),a.\u0275\u0275advance(2),a.\u0275\u0275propertyInterpolate("angularticsLabel",t.userInfo.tenantId+","+t.userInfo.userId),a.\u0275\u0275property("dwActionId","modify")("dwDefaultAuthorized","disabled")("angularticsCategory","\u4ea7\u54c1\u6863\u6848"),a.\u0275\u0275advance(3),a.\u0275\u0275property("ngIf","1"===e.source)}}function gn(e,t){1&e&&(a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275template(1,hn,6,6,"td",90),a.\u0275\u0275elementContainerEnd()),2&e&&(a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","operation"))}function fn(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"tr",92),a.\u0275\u0275template(1,bt,2,1,"ng-container",24),a.\u0275\u0275template(2,Et,2,1,"ng-container",24),a.\u0275\u0275template(3,Ot,2,1,"ng-container",24),a.\u0275\u0275template(4,Pt,2,1,"ng-container",24),a.\u0275\u0275template(5,Ft,2,1,"ng-container",24),a.\u0275\u0275template(6,Tt,2,1,"ng-container",24),a.\u0275\u0275template(7,Rt,2,1,"ng-container",24),a.\u0275\u0275template(8,Nt,2,1,"ng-container",24),a.\u0275\u0275template(9,jt,2,1,"ng-container",24),a.\u0275\u0275template(10,Bt,2,1,"ng-container",24),a.\u0275\u0275template(11,Wt,2,1,"ng-container",24),a.\u0275\u0275template(12,Ut,2,1,"ng-container",24),a.\u0275\u0275template(13,Kt,2,1,"ng-container",24),a.\u0275\u0275template(14,Zt,2,1,"ng-container",24),a.\u0275\u0275template(15,en,2,1,"ng-container",24),a.\u0275\u0275template(16,nn,2,1,"ng-container",24),a.\u0275\u0275template(17,an,2,1,"ng-container",24),a.\u0275\u0275template(18,cn,2,1,"ng-container",24),a.\u0275\u0275template(19,pn,2,1,"ng-container",24),a.\u0275\u0275template(20,gn,2,1,"ng-container",24),a.\u0275\u0275elementEnd()),2&e){const e=a.\u0275\u0275nextContext(2);a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",e.showFile),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",e.showFile),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",e.showFile),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf","0"===e.fileType),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",e.showFile),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",e.showFile&&e.specification_enable),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",e.showFile&&e.model_enable),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",e.showFile&&e.location_enable),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",e.showFile&&e.service_site_name_enable),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",e.showFile&&e.employee_name_enable),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",e.showFile),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",e.showFile),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",e.showFile),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",e.showFile&&e.acceptance_date_enable),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",e.showFile),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",e.showFile&&e.product_description_enable),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",e.showFile&&e.maintenance_count_enable),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",e.showFile),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",e.showFile),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",e.showFile)}}const wn=function(){return{x:"2000px",y:"calc(100vh - 171px - 130px)"}};function vn(e,t){if(1&e){const e=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275elementStart(1,"dw-table",62,63),a.\u0275\u0275listener("dwPageIndexChange",function(t){return a.\u0275\u0275restoreView(e),a.\u0275\u0275nextContext().search.pageIndex=t})("dwPageSizeChange",function(t){return a.\u0275\u0275restoreView(e),a.\u0275\u0275nextContext().search.pageSize=t})("dwCurrentPageDataChange",function(t){return a.\u0275\u0275restoreView(e),a.\u0275\u0275nextContext().currentPageDataChange(t)}),a.\u0275\u0275elementStart(3,"thead",64),a.\u0275\u0275listener("dwSortOrderChange",function(t){return a.\u0275\u0275restoreView(e),a.\u0275\u0275nextContext().order(t)}),a.\u0275\u0275elementStart(4,"tr",65),a.\u0275\u0275template(5,Le,2,1,"ng-container",24),a.\u0275\u0275template(6,Ae,2,1,"ng-container",24),a.\u0275\u0275template(7,$e,2,1,"ng-container",24),a.\u0275\u0275template(8,ze,2,1,"ng-container",24),a.\u0275\u0275template(9,Ue,2,1,"ng-container",24),a.\u0275\u0275template(10,Xe,2,1,"ng-container",24),a.\u0275\u0275template(11,Ke,2,1,"ng-container",24),a.\u0275\u0275template(12,Ze,2,1,"ng-container",24),a.\u0275\u0275template(13,et,2,1,"ng-container",24),a.\u0275\u0275template(14,nt,2,1,"ng-container",24),a.\u0275\u0275template(15,rt,2,1,"ng-container",24),a.\u0275\u0275template(16,ot,2,1,"ng-container",24),a.\u0275\u0275template(17,dt,2,1,"ng-container",24),a.\u0275\u0275template(18,ct,2,1,"ng-container",24),a.\u0275\u0275template(19,pt,2,1,"ng-container",24),a.\u0275\u0275template(20,ht,2,1,"ng-container",24),a.\u0275\u0275template(21,ft,2,1,"ng-container",24),a.\u0275\u0275template(22,vt,2,1,"ng-container",24),a.\u0275\u0275template(23,Ct,2,1,"ng-container",24),a.\u0275\u0275template(24,yt,2,1,"ng-container",24),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(25,"tbody"),a.\u0275\u0275template(26,fn,21,20,"tr",66),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementContainerEnd()}if(2&e){const e=a.\u0275\u0275reference(2),t=a.\u0275\u0275nextContext(),n=a.\u0275\u0275reference(80);a.\u0275\u0275advance(1),a.\u0275\u0275property("dwData",t.dataList)("dwPageIndex",t.search.pageIndex)("dwPageSize",t.search.pageSize)("dwScroll",a.\u0275\u0275pureFunction0(26,wn))("dwShowTotal",n),a.\u0275\u0275advance(4),a.\u0275\u0275property("ngIf",t.showFile),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",t.showFile),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",t.showFile),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf","0"===t.fileType),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",t.showFile),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",t.showFile&&t.specification_enable),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",t.showFile&&t.model_enable),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",t.showFile&&t.location_enable),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",t.showFile&&t.service_site_name_enable),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",t.showFile&&t.employee_name_enable),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",t.showFile),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",t.showFile),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",t.showFile),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",t.showFile&&t.acceptance_date_enable),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",t.showFile),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",t.showFile&&t.product_description_enable),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",t.showFile&&t.maintenance_count_enable),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",t.showFile),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",t.showFile),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",t.showFile),a.\u0275\u0275advance(2),a.\u0275\u0275property("ngForOf",e.data)}}function xn(e,t){if(1&e){const e=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"app-product-file-detail",133,134),a.\u0275\u0275listener("visibleChanged",function(t){return a.\u0275\u0275restoreView(e),a.\u0275\u0275nextContext().changeRecycleVisible(t)}),a.\u0275\u0275elementEnd()}}function Cn(e,t){if(1&e){const e=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"div",135),a.\u0275\u0275text(1," \u4ea7\u54c1\u6863\u6848 "),a.\u0275\u0275elementStart(2,"img",136),a.\u0275\u0275listener("click",function(){return a.\u0275\u0275restoreView(e),a.\u0275\u0275nextContext().child.showQrcode()}),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd()}}function _n(e,t){if(1&e&&a.\u0275\u0275text(0),2&e){const e=a.\u0275\u0275nextContext();a.\u0275\u0275textInterpolate1("\u5171 ",e.dataList.length," \u6761")}}function yn(e,t){if(1&e&&a.\u0275\u0275text(0),2&e){const e=a.\u0275\u0275nextContext();a.\u0275\u0275textInterpolate1("\u5171 ",e.multyFailList.length," \u6761")}}function Sn(e,t){1&e&&(a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275elementStart(1,"th",140),a.\u0275\u0275elementStart(2,"span",30),a.\u0275\u0275text(3,"\u670d\u52a1\u4eba\u5458"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(4,"th",140),a.\u0275\u0275elementStart(5,"span",30),a.\u0275\u0275text(6,"\u670d\u52a1\u7ad9\u70b9"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementContainerEnd())}function bn(e,t){1&e&&(a.\u0275\u0275elementStart(0,"th",140),a.\u0275\u0275elementStart(1,"span",30),a.\u0275\u0275text(2,"\u670d\u52a1\u7ad9\u70b9"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd())}function In(e,t){1&e&&(a.\u0275\u0275elementStart(0,"th",140),a.\u0275\u0275elementStart(1,"span",30),a.\u0275\u0275text(2,"\u4fdd\u4fee\u622a\u6b62\u65e5\u671f"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd())}function En(e,t){1&e&&(a.\u0275\u0275elementStart(0,"th",140),a.\u0275\u0275elementStart(1,"span",30),a.\u0275\u0275text(2,"\u51fa\u5e93\u65e5\u671f"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd())}function Dn(e,t){if(1&e&&(a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275elementStart(1,"td"),a.\u0275\u0275text(2),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(3,"td"),a.\u0275\u0275text(4),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementContainerEnd()),2&e){const e=a.\u0275\u0275nextContext().$implicit;a.\u0275\u0275advance(2),a.\u0275\u0275textInterpolate1(" ",e.employeeInfo," "),a.\u0275\u0275advance(2),a.\u0275\u0275textInterpolate1(" ",e.serviceSiteInfo," ")}}function On(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"td"),a.\u0275\u0275text(1),a.\u0275\u0275elementEnd()),2&e){const e=a.\u0275\u0275nextContext().$implicit;a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate1(" ",e.serviceSiteInfo," ")}}function Mn(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"td"),a.\u0275\u0275text(1),a.\u0275\u0275pipe(2,"date"),a.\u0275\u0275elementEnd()),2&e){const e=a.\u0275\u0275nextContext().$implicit;a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate1(" ",a.\u0275\u0275pipeBind2(2,1,e.expiryDate,"yyyy/MM/dd")," ")}}function Pn(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"td"),a.\u0275\u0275text(1),a.\u0275\u0275pipe(2,"date"),a.\u0275\u0275elementEnd()),2&e){const e=a.\u0275\u0275nextContext().$implicit;a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate1(" ",a.\u0275\u0275pipeBind2(2,1,e.deliveryDate,"yyyy/MM/dd")," ")}}function kn(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"tr"),a.\u0275\u0275elementStart(1,"td"),a.\u0275\u0275text(2),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(3,"td"),a.\u0275\u0275text(4),a.\u0275\u0275elementEnd(),a.\u0275\u0275template(5,Dn,5,2,"ng-container",24),a.\u0275\u0275template(6,On,2,1,"td",24),a.\u0275\u0275template(7,Mn,3,4,"td",24),a.\u0275\u0275template(8,Pn,3,4,"td",24),a.\u0275\u0275elementEnd()),2&e){const e=t.$implicit,n=a.\u0275\u0275nextContext(2);a.\u0275\u0275advance(2),a.\u0275\u0275textInterpolate1(" ",e.productFile," "),a.\u0275\u0275advance(2),a.\u0275\u0275textInterpolate1(" ",e.sn," "),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf","service_site"===n.modifyColumn),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf","employee"===n.modifyColumn),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf","delivery_date"===n.modifyColumn),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf","expiry_date"===n.modifyColumn)}}function Fn(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"dw-table",137,138),a.\u0275\u0275elementStart(2,"thead"),a.\u0275\u0275elementStart(3,"tr",139),a.\u0275\u0275elementStart(4,"th",140),a.\u0275\u0275elementStart(5,"span",30),a.\u0275\u0275text(6,"\u4ea7\u54c1"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(7,"th",140),a.\u0275\u0275elementStart(8,"span",30),a.\u0275\u0275text(9,"\u5e8f\u5217\u53f7"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275template(10,Sn,7,0,"ng-container",24),a.\u0275\u0275template(11,bn,3,0,"th",141),a.\u0275\u0275template(12,In,3,0,"th",141),a.\u0275\u0275template(13,En,3,0,"th",141),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(14,"tbody"),a.\u0275\u0275template(15,kn,9,6,"tr",142),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd()),2&e){const e=a.\u0275\u0275reference(1),t=a.\u0275\u0275nextContext(),n=a.\u0275\u0275reference(82);a.\u0275\u0275property("dwData",t.multyFailList)("dwShowTotal",n),a.\u0275\u0275advance(10),a.\u0275\u0275property("ngIf","service_site"===t.modifyColumn),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf","employee"===t.modifyColumn),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf","delivery_date"===t.modifyColumn),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf","expiry_date"===t.modifyColumn),a.\u0275\u0275advance(2),a.\u0275\u0275property("ngForOf",e.data)}}const Vn=function(){return{overflow:"auto"}};let Tn=(()=>{class e{constructor(t,n,i,r,a,o,l,d,s,c,m,p,u){if(this.tableConfigDiffService=t,this.commonHttpService=n,this.router=i,this._route=r,this.productFileSrv=a,this.customerSrv=o,this.message=l,this.modalService=d,this.analytics=s,this.userService=c,this.newCustomerService=m,this.fb=p,this.datePipe=u,this.DW_IN_MFA=x.ns,this.search={pageIndex:1,pageSize:10},this.dataList=[],this.displayData=[],this.indeterminate=!1,this.isCollapsed=!1,this.param="",this.isIntegrated=!1,this.fileType="0",this._showFile=!1,this.configDiffSubscription=new f.Subscription,this.showStep1=!1,this.multyFailList=[],this.modifyColumn="",this.service_site_name_enable=!0,this.maintenance_count_enable=!0,this.specification_enable=!0,this.model_enable=!0,this.location_enable=!0,this.employee_name_enable=!0,this.product_description_enable=!0,this.acceptance_date_enable=!0,this.lastParam="",this.dataSource="1",this.isSearchExpand=!1,this.isDownloading=!1,this.userInfo={tenantId:"",userId:""},e.useKeeper&&e.keeper)return e.keeper}get showFile(){return this._showFile}set showFile(e){this._showFile=e,e&&setTimeout(()=>{this.deleteConfigSubscription&&this.deleteConfigSubscription.unsubscribe(),this.deleteConfigSubscription=this._table.dwTableConfigService.deleteConfigSubject$.subscribe(e=>{this.tableConfigDiffService.isDeleteConfigDiff(e)})},0)}set table(e){e&&(this._table=e)}ngOnInit(){this.configDiffSubscription.add(this.tableConfigDiffService.diffSubject$.subscribe(e=>{e&&this.modalService.warning({dwContent:"\u8868\u5355\u8bbe\u5b9a\u53d1\u751f\u53d8\u52a8,\u5c06\u91cd\u65b0\u6574\u7406",dwOnOk:()=>{this.loadData()}})})),this.subscription=this.router.events.subscribe(t=>{if(t instanceof r.NavigationStart){const n=this.router.parseUrl(this.router.url).root.children[r.PRIMARY_OUTLET].segments,i=this.router.parseUrl(t.url).root.children[r.PRIMARY_OUTLET].segments,a=n[n.length-1].path,o=i[i.length-1].path,l="product-resume"===a&&"product-file"===o;"product-file"===a&&"product-resume"===o||l?(e.useKeeper=!0,e.keeper=this):(e.useKeeper=!1,e.keeper=this)}}),this.userInfo=this.userService.getUserInfo(),this.commonHttpService.get("restful/service/serviceOrder/ServiceOrder/IsShowTypeOption").subscribe(e=>{this.fileType=e.data},e=>{e.hasOwnProperty("error")&&e.error.hasOwnProperty("errorMessage")&&e.error.errorMessage&&this.message.error(e.error.errorMessage)}),(!e.useKeeper||!e.keeper)&&this.init()}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe(),this.deleteConfigSubscription&&this.deleteConfigSubscription.unsubscribe(),this.configDiffSubscription&&this.configDiffSubscription.unsubscribe()}init(){this.searchForm=this.fb.group({}),this.searchForm.addControl("date_range",new l.FormControl("")),this.searchForm.addControl("customer_id",new l.FormControl("")),this.searchForm.addControl("customer_name",new l.FormControl("")),this.searchForm.addControl("next_maintain_date",new l.FormControl("")),this.searchForm.addControl("serviceStatus",new l.FormControl("")),this.searchForm.addControl("checkExpiryDate",new l.FormControl(!1)),this.searchForm.addControl("file_type",new l.FormControl("")),this.searchForm.addControl("SN",new l.FormControl("")),this.param="",this.loadData()}reset(){this.init()}isShowSearchExpand(){this.isSearchExpand=!this.isSearchExpand}loadData(){this.showFile=!1,this.search={pageIndex:1,pageSize:10},this.lastValue=this.searchForm.value,this.lastParam=this.param,this.dataSource="1",this.productFileSrv.getProductFileList(this.searchForm.value,this.param,this.dataSource).subscribe(e=>{this.dataList=e||[],this.dataList.filter(e=>"1"===e.file_type),this.commonHttpService.get("restful/service/autoSettings/CustomView/FormSetting?viewId=product_file").subscribe(e=>{this.service_site_name_enable=e.service_site_name,this.maintenance_count_enable=e.maintenance_count,this.specification_enable=e.specification,this.model_enable=e.model,this.location_enable=e.location,this.employee_name_enable=e.employee_name,this.product_description_enable=e.product_description,this.acceptance_date_enable=e.acceptance_date,this.showFile=!0})})}changeRecycleVisible(e){this.isCollapsed=!1,e&&this.loadData()}showMultyModify(){this.showStep1=!0}changeStep1Visible(e){if(console.log(e),e){const t=e.modifyColumn.split("_id")[0],n="service_site"===t?"\u670d\u52a1\u7ad9\u70b9":"employee"===t?"\u670d\u52a1\u4eba\u5458":"enable_maintain"===t?"\u7ef4\u62a4\u4fdd\u517b":"\u4ea7\u54c1\u5206\u7c7b",i=e.valueName?e.valueName:"0"===e.modifyValue?"\u5173\u95ed":"\u5f00\u542f";this.modifyColumn=t;const r={modifyColumn:e.modifyColumn,modifyValue:e.modifyValue,productFileIds:e.productFileIds};this.modalService.warning({dwTitle:"\u6279\u91cf\u4fee\u6539\u786e\u8ba4",dwContent:`<div>\u672c\u6b21\u5c06\u6279\u91cf\u4fee\u6539<b style="color:#0D9DEF">${e.productFileIds.length}</b>\u6761\u4ea7\u54c1\u6863\u6848\u5185\u5bb9\uff1a</div>\n                    <b>\u3010${n}\u3011 \u8c03\u6574\u4e3a\uff1a${i}</b>\n                    <div>\u66f4\u65b0\u540e\u5c06\u65e0\u6cd5\u64a4\u56de\uff0c\u786e\u5b9a\u4fee\u6539\u5417?</div>`,dwOkText:"\u786e\u8ba4",dwOkType:"primary",dwOnOk:()=>{this.commonHttpService.put("restful/service/productFile/ProductFile/BatchModifiyProductFile",r).subscribe(e=>{console.log(e),this.multyModifySucc(e)},e=>{e.hasOwnProperty("error")&&e.error.hasOwnProperty("errorMessage")&&e.error.errorMessage&&this.message.error(e.error.errorMessage)})},dwCancelText:"\u53d6\u6d88",dwOnCancel:()=>{}})}else this.showStep1=!1}multyModifySucc(e){e.errorList.length?(this.multyFailList=e.errorList,this.modalService.create({dwTitle:e.errorMessage,dwWidth:"800px",dwContent:this.dwTableMulty,dwFooter:null})):(this.message.create("success","\u6279\u91cf\u4fee\u6539\u6210\u529f"),this.loadData(),this.showStep1=!1)}resetForm(){this.searchForm.reset({bianma:"",mingcheng:"",date_range:"",customer_id:"",customer_name:"",serviceStatus:"",checkExpiryDate:!1,file_type:""}),this.loadData()}clear(e){"customer"===e&&(this.searchForm.get(e+"_id").setValue(""),this.searchForm.get(e+"_name").setValue(""))}goProductResume(e){this.router.navigateByUrl(`${this.DW_IN_MFA?"/assc_crs":""}/bases/product-file/product-resume?id=${e.product_file_id}&fromPage=1`)}goRecycledList(){this.router.navigateByUrl((this.DW_IN_MFA?"/assc_crs":"")+"/bases/product-file/recycled-list")}goCreateOrModify(e,t){this.router.navigateByUrl(e?`${this.DW_IN_MFA?"/assc_crs":""}/bases/product-file/product-file-modify/${e}?file_type=${t}`:`${this.DW_IN_MFA?"/assc_crs":""}/bases/product-file/product-file-create?file_type=${t}`)}create(e){this.type="create",this.goCreateOrModify("",e)}detail(e){this.isCollapsed=!0,setTimeout(()=>{this.child.initData(e.product_file_id,e.file_type)})}modify(e){this.type="modify",this.goCreateOrModify(e.product_file_id,e.file_type)}delete(e){this.deleteMul([e])}deleteMul(e){console.log(e),e.length>0&&this.productFileSrv.deleteProductFile(e).subscribe(e=>{!0===e.success?null!==e.data&&null!==e.data.data&&!1===e.data.data.success?this.message.create("error",e.data.data.message):(this.message.create("success","\u64cd\u4f5c\u6210\u529f\uff01"),this.loadData()):this.message.create("error","\u64cd\u4f5c\u5931\u8d25\uff01")})}popConfirm(e){console.log(e),this.searchForm.get(e.fieldName).setValue(e.con),this.loadData()}currentPageDataChange(e){this.displayData=e}query(){this.search={pageIndex:1,pageSize:10},this.lastValue=this.searchForm.value,this.lastParam=this.param,this.dataSource="2",this.productFileSrv.getProductFileList(this.searchForm.value,this.param,this.dataSource).subscribe(e=>{this.dataList=e||[]})}order(e){const t=e.key,n=e.value;if("maintenance_count"===t)switch(n){case"ascend":const e=[...this.dataList].sort((e,t)=>e.maintenance_count<t.maintenance_count?1:-1);this.dataList=e;break;case"descend":const t=[...this.dataList].sort((e,t)=>e.maintenance_count>=t.maintenance_count?1:-1);this.dataList=t}else switch(n){case"ascend":this.dataList=m.l.order(this.dataList,[t]);break;case"descend":this.dataList=m.l.order(this.dataList,[t,-1])}}openCustomer(){this.newCustomerService.setConfig("",!0),this.newCustomerService.open([]).subscribe(e=>{if(null==e||0===e.length)return;let t="",n="";e.forEach(e=>{t+=e.customer_id+",",n+=e.customer_name+","}),0!==t.length&&(t=t.substr(0,t.length-1)),0!==n.length&&(n=n.substr(0,n.length-1)),this.searchForm.get("customer_id").setValue(t),this.searchForm.get("customer_name").setValue(n)})}onOpenRange(e){console.log(e),e&&this.analytics.eventTrack.next({action:"\u67e5\u8be2\u6761\u4ef6-\u70b9\u51fb\u9009\u62e9\u51fa\u5e93\u65e5\u671f",properties:{category:"\u4ea7\u54c1\u6863\u6848",label:this.userInfo.tenantId+","+this.userInfo.userId,value:0}})}onOpenRange2(){console.log("\u70b9\u51fb\u9009\u62e9\u4e0b\u6b21\u7ef4\u62a4\u65e5\u671f"),this.analytics.eventTrack.next({action:"\u67e5\u8be2\u6761\u4ef6-\u70b9\u51fb\u9009\u62e9\u4e0b\u6b21\u7ef4\u62a4\u65e5\u671f",properties:{category:"\u4ea7\u54c1\u6863\u6848",label:this.userInfo.tenantId+","+this.userInfo.userId,value:0}})}onOpenRange3(e){console.log(e),this.analytics.eventTrack.next({action:"\u67e5\u8be2\u6761\u4ef6-\u70b9\u51fb\u9009\u62e9\u552e\u540e\u72b6\u6001-"+(1===e?"\u6b63\u5e38":2===e?"\u62a5\u4fee\u4e2d":"\u5168\u90e8"),properties:{category:"\u4ea7\u54c1\u6863\u6848",label:this.userInfo.tenantId+","+this.userInfo.userId,value:0}})}onOpenRange4(e){this.analytics.eventTrack.next({action:`\u67e5\u8be2\u6761\u4ef6-\u70b9\u51fb${e?"":"\u53d6\u6d88"}\u52fe\u900930\u5929\u540e\u8fc7\u4fdd`,properties:{category:"\u4ea7\u54c1\u6863\u6848",label:this.userInfo.tenantId+","+this.userInfo.userId,value:0}})}radioChange(){this.analytics.eventTrack.next({action:"\u67e5\u8be2\u6761\u4ef6-\u70b9\u51fb\u7c7b\u578b-"+(""===this.searchForm.value.file_type?"\u5168\u90e8":"1"===this.searchForm.value.file_type?"\u5355\u673a":"\u4ea7\u7ebf/\u9879\u76ee"),properties:{category:"\u4ea7\u54c1\u6863\u6848",label:this.userInfo.tenantId+","+this.userInfo.userId,value:0}})}export(){this.isDownloading=!0,this.productFileSrv.export(this.lastValue,this.lastParam,this.dataSource).subscribe(e=>{if(e)switch(e.type){case X.HttpEventType.Response:const t=URL.createObjectURL(e.body),n=document.createElement("a");n.href=t,n.style="visibility:hidden";const i=e.headers.get("Content-disposition").split("filename=")[1];n.download=decodeURI(i),document.body.appendChild(n),n.click(),document.body.removeChild(n),setTimeout(()=>{this.isDownloading=!1},1700)}},e=>{const t=new FileReader;t.onload=e=>{const t=JSON.parse(e.target.result);this.message.create("error",t.errorMessage)},t.readAsText(e.error),this.isDownloading=!1})}}return e.\u0275fac=function(t){return new(t||e)(a.\u0275\u0275directiveInject(H),a.\u0275\u0275directiveInject(w.$),a.\u0275\u0275directiveInject(r.Router),a.\u0275\u0275directiveInject(r.ActivatedRoute),a.\u0275\u0275directiveInject(d.U),a.\u0275\u0275directiveInject(p.v),a.\u0275\u0275directiveInject(s.DwMessageService),a.\u0275\u0275directiveInject(c.DwModalService),a.\u0275\u0275directiveInject(u.DwAnalytics),a.\u0275\u0275directiveInject(h.DwUserService),a.\u0275\u0275directiveInject(g.N),a.\u0275\u0275directiveInject(l.FormBuilder),a.\u0275\u0275directiveInject(i.DatePipe))},e.\u0275cmp=a.\u0275\u0275defineComponent({type:e,selectors:[["app-product-file-list"]],viewQuery:function(e,t){if(1&e&&(a.\u0275\u0275viewQuery(be,5),a.\u0275\u0275viewQuery(Ie,5),a.\u0275\u0275viewQuery(Ee,5),a.\u0275\u0275viewQuery(De,7),a.\u0275\u0275viewQuery(Oe,5,G.DwTableDirective)),2&e){let e;a.\u0275\u0275queryRefresh(e=a.\u0275\u0275loadQuery())&&(t.child=e.first),a.\u0275\u0275queryRefresh(e=a.\u0275\u0275loadQuery())&&(t.childStep2=e.first),a.\u0275\u0275queryRefresh(e=a.\u0275\u0275loadQuery())&&(t.childPreview=e.first),a.\u0275\u0275queryRefresh(e=a.\u0275\u0275loadQuery())&&(t.dwTableMulty=e.first),a.\u0275\u0275queryRefresh(e=a.\u0275\u0275loadQuery())&&(t.table=e.first)}},features:[a.\u0275\u0275ProvidersFeature([g.N])],decls:85,vars:46,consts:[[1,"dw-f-content-list","layoutClass","sales_layout"],[1,"issue_layout_head"],[1,"issue_layout_title"],[1,"search-box"],["dwSearch","",3,"dwAddOnAfter"],["dw-input","","placeholder","\u54c1\u53f7\u3001\u54c1\u540d\u7b49",3,"ngModel","ngModelChange"],["suffixIconButton",""],["color","#e5e5e5"],[1,"dw-f-table","content-box"],[1,"sales_issue_form","sales_form","sales_shadow",2,"margin-left","-22px",3,"formGroup"],["dw-row","",1,"search-form-box"],[1,"search-input"],[1,"label"],[1,"form-input"],["formControlName","date_range",2,"width","100%",3,"dwOnOpenChange"],["dwSearch","",3,"dwSuffix"],["type","text","dw-input","","readonly","","dwMode","multiple","formControlName","customer_name",2,"width","100%"],["customerData",""],[2,"display","flex","align-items","center","justify-content","space-between"],["dw-checkbox","","formControlName","checkExpiryDate",3,"ngModelChange"],["dw-button","","dwActionAuthorized","","angularticsAction","\u67e5\u8be2\u6761\u4ef6-\u70b9\u51fb\u67e5\u8be2\u6309\u94ae","dw-analyticsOn","click",3,"dwType","dwActionId","angularticsCategory","angularticsLabel","dwClick"],["dw-button","","angularticsAction","\u67e5\u8be2\u6761\u4ef6-\u70b9\u51fb\u91cd\u7f6e\u6309\u94ae","dw-analyticsOn","click",3,"dwType","angularticsCategory","angularticsLabel","click"],[1,"isExpand",3,"click"],["dw-icon","","dwTheme","outline",3,"dwType"],[4,"ngIf"],["dw-row","","dwActionAuthorized","",1,"dw-f-btn-bar-action",3,"dwActionId","dwDefaultAuthorized"],["dw-col","",2,"display","flex"],[1,"sub_act"],["dw-button","","type","button","dwActionAuthorized","",3,"dwType","dwActionId","dwDefaultAuthorized"],["dw-icon","","dwType","plus"],["translate",""],[1,"pub-btns"],[1,"blank"],["dw-analyticsOn","click","angularticsAction","\u65b0\u5efa-\u8fdb\u5165\u65b0\u5efa\u9875\u9762",1,"act-item",3,"angularticsCategory","angularticsLabel","click"],["dw-button","","type","button","dwActionAuthorized","",1,"one_btn",3,"dwType","dwActionId","dwDefaultAuthorized","click"],["src","../../../../../../assets/img/icon_recycle.png","alt","\u5df2\u56de\u6536"],["src","../../../../../../assets/img/icon_recycle_pre.png","alt","\u5df2\u56de\u6536",1,"hover"],["dw-button","","type","button","dwActionAuthorized","",1,"one_btn",3,"dwType","dwDefaultAuthorized","dwActionId","click"],["src","../../../../../../assets/img/icon_multy_modify_nor.png","alt","\u6279\u91cf\u4fee\u6539"],["src","../../../../../../assets/img/icon_multy_modify.png","alt","\u6279\u91cf\u4fee\u6539",1,"hover"],["dw-button","","type","button","dwActionAuthorized","",1,"one_btn",3,"dwType","dwLoading","dwDefaultAuthorized","dwActionId","click"],["dw-icon","","dwType","upload"],[3,"visible","visibleChanged"],["childStep1",""],[3,"dwVisible","dwTitle","dwWidth","dwBodyStyle","dwOnClose"],["dwDrawerContent",""],["detailTitle",""],["totalTemplate",""],["totalTemplate2",""],["dwTableMulty",""],["dw-button","","dwType","primary","dwSearch","",3,"click"],["dw-icon","","dwType","search"],["dw-icon","","class","ant-input-clear-icon","dwTheme","fill","dwType","close-circle",3,"click",4,"ngIf"],["dw-button","","dwType","primary","dwSearch","","angularticsAction","\u67e5\u8be2\u6761\u4ef6-\u70b9\u51fb\u9009\u62e9\u5ba2\u6237\u540d\u79f0","dw-analyticsOn","click","type","button",3,"angularticsCategory","angularticsLabel","click"],["dw-icon","","dwTheme","fill","dwType","close-circle",1,"ant-input-clear-icon",3,"click"],["formControlName","serviceStatus",2,"width","100%",3,"ngModelChange"],[3,"dwLabel","dwValue"],["formControlName","next_maintain_date",3,"ngModelChange"],["class","search-input",4,"ngIf"],["type","text","dw-input","","formControlName","SN",2,"width","100%"],["formControlName","file_type",2,"white-space","nowrap",3,"ngModelChange"],["dw-radio","",3,"dwValue"],["dwTableId","crs-product-file-list","dwShowSizeChanger","",3,"dwData","dwPageIndex","dwPageSize","dwScroll","dwShowTotal","dwPageIndexChange","dwPageSizeChange","dwCurrentPageDataChange"],["dwTable",""],[3,"dwSortOrderChange"],["dwDropColumns",""],["dwReorderColumns","",4,"ngFor","ngForOf"],["dwWidth","114px","dwShowSort","","dwColumnKey","product_file_code","dwDragDrop","",4,"dwColumnId"],["dwWidth","114px","dwShowSort","","dwColumnKey","product_file_code","dwDragDrop",""],["dwWidth","160px","dwShowSort","","dwColumnKey","product_file_name","dwDragDrop","",4,"dwColumnId"],["dwWidth","160px","dwShowSort","","dwColumnKey","product_file_name","dwDragDrop",""],["dwShowSort","","dwColumnKey","item_group_name","dwWidth","120px","dwDragDrop","",4,"dwColumnId"],["dwShowSort","","dwColumnKey","item_group_name","dwWidth","120px","dwDragDrop",""],["dwWidth","120px","dwDragDrop","",4,"dwColumnId"],["dwWidth","120px","dwDragDrop",""],["translate","",4,"ngIf"],["dwWidth","160px","dwDragDrop","",4,"dwColumnId"],["dwWidth","160px","dwDragDrop",""],["dwWidth","136px","dwDragDrop","",4,"dwColumnId"],["dwWidth","136px","dwDragDrop",""],["dwWidth","96px","dwDragDrop","",4,"dwColumnId"],["dwWidth","96px","dwDragDrop",""],["dwWidth","200px","dwDragDrop","",4,"dwColumnId"],["dwWidth","200px","dwDragDrop",""],["dwWidth","112px","dwDragDrop","",4,"dwColumnId"],["dwWidth","112px","dwDragDrop",""],["dwWidth","210px","dwDragDrop","",4,"dwColumnId"],["dwWidth","210px","dwDragDrop",""],["dwWidth","120px","dwShowSort","","dwColumnKey","maintenance_count","dwDragDrop","",3,"dwAlign",4,"dwColumnId"],["dwWidth","120px","dwShowSort","","dwColumnKey","maintenance_count","dwDragDrop","",3,"dwAlign"],["dwRight","","dwWidth","96px",3,"dwAlign",4,"dwColumnId"],["dwRight","","dwWidth","96px",3,"dwAlign"],["dwReorderColumns",""],["dwWidth","114px","dwEllipsis","",4,"dwColumnId"],["dwWidth","114px","dwEllipsis",""],["dw-analyticsOn","click","id","product-file-detail","angularticsAction","\u8be6\u60c5-\u70b9\u51fb\u67e5\u770b\u8be6\u60c5",3,"angularticsCategory","angularticsLabel","click"],["dwWidth","160px","dwEllipsis","",4,"dwColumnId"],["dwWidth","160px","dwEllipsis",""],["dwWidth","120px","dwEllipsis","",4,"dwColumnId"],["dwWidth","120px","dwEllipsis",""],["dwEllipsis","","dwWidth","120px",4,"dwColumnId"],["dwEllipsis","","dwWidth","120px"],["dwWidth","136px","dwEllipsis","",4,"dwColumnId"],["dwWidth","136px","dwEllipsis",""],["dwWidth","96px","dwEllipsis","",4,"dwColumnId"],["dwWidth","96px","dwEllipsis",""],["dwWidth","200px","dwEllipsis","",4,"dwColumnId"],["dwWidth","200px","dwEllipsis",""],["dwWidth","112px","dwEllipsis","",4,"dwColumnId"],["dwWidth","112px","dwEllipsis",""],["dwWidth","210px","dwEllipsis","",4,"dwColumnId"],["dwWidth","210px","dwEllipsis",""],["dwWidth","120px","dwWidth","120px","dwEllipsis","",3,"dwAlign",4,"dwColumnId"],["dwWidth","120px","dwWidth","120px","dwEllipsis","",3,"dwAlign"],["class","state_tip",4,"ngIf"],["class","state_tip zise",4,"ngIf"],["class","state_tip gray",4,"ngIf"],[1,"state_tip"],[1,"state_tip","zise"],[1,"state_tip","gray"],["dwRight","","dwWidth","96px","dwEllipsis","",3,"dwAlign",4,"dwColumnId"],["dwRight","","dwWidth","96px","dwEllipsis","",3,"dwAlign"],["dwActionAuthorized","","translate","","id","product-resume","dw-analyticsOn","click","angularticsAction","\u5c65\u5386-\u70b9\u51fb\u67e5\u770b\u5c65\u5386",3,"dwActionId","dwDefaultAuthorized","angularticsCategory","angularticsLabel","dwClick"],[1,"action-grid"],["dwActionAuthorized","","title","\u7f16\u8f91","dw-analyticsOn","click","angularticsAction","\u4fee\u6539-\u8fdb\u5165\u4fee\u6539\u9875\u9762","id","modify-product-file",3,"dwActionId","dwDefaultAuthorized","angularticsCategory","angularticsLabel","click"],["src","../../../../../../assets/img/icon_edit.png","alt","\u4fee\u6539",1,"action-icon"],["src","../../../../../../assets/img/icon_edit_hover.png","alt","\u4fee\u6539",1,"action-icon"],["dwActionAuthorized","","title","\u5220\u9664",3,"dwActionId","dwDefaultAuthorized",4,"ngIf"],["dwActionAuthorized","","title","\u5220\u9664",3,"dwActionId","dwDefaultAuthorized"],["dw-popconfirm","",3,"dwPopconfirmTitle","dwOkText","dwCancelText","dwPopconfirmPlacement","dwOnConfirm"],["dw-popconfirm","","translate",""],["src","../../../../../../assets/img/icon_delete.png","alt","\u5220\u9664",1,"action-icon"],["src","../../../../../../assets/img/icon_delete_hover.png","alt","\u5220\u9664",1,"action-icon"],[3,"visibleChanged"],["child",""],[1,"detail-title"],["src","../../../../../../assets/img/qrcode.png","alt","\u4e8c\u7ef4\u7801",1,"qrcode",3,"click"],[3,"dwData","dwShowTotal"],["tableMulty",""],["dw-tr",""],["dw-th","","width","200"],["dw-th","","width","200",4,"ngIf"],[4,"ngFor","ngForOf"]],template:function(e,t){if(1&e){const e=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"dw-content",0),a.\u0275\u0275elementStart(1,"div",1),a.\u0275\u0275elementStart(2,"h2",2),a.\u0275\u0275elementStart(3,"span"),a.\u0275\u0275text(4,"\u4ea7\u54c1\u6863\u6848"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(5,"div",3),a.\u0275\u0275elementStart(6,"dw-input-group",4),a.\u0275\u0275elementStart(7,"input",5),a.\u0275\u0275listener("ngModelChange",function(e){return t.param=e}),a.\u0275\u0275elementEnd(),a.\u0275\u0275template(8,Me,2,0,"ng-template",null,6,a.\u0275\u0275templateRefExtractor),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275element(10,"hr",7),a.\u0275\u0275elementStart(11,"div",8),a.\u0275\u0275elementStart(12,"form",9),a.\u0275\u0275elementStart(13,"div",10),a.\u0275\u0275elementStart(14,"div",11),a.\u0275\u0275elementStart(15,"div",12),a.\u0275\u0275text(16,"\u51fa\u5e93\u65e5\u671f"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(17,"dw-form-item",13),a.\u0275\u0275elementStart(18,"dw-form-control"),a.\u0275\u0275elementStart(19,"dw-range-picker",14),a.\u0275\u0275listener("dwOnOpenChange",function(e){return t.onOpenRange(e)}),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(20,"div",11),a.\u0275\u0275elementStart(21,"div",12),a.\u0275\u0275text(22,"\u5ba2\u6237\u540d\u79f0"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(23,"dw-form-item",13),a.\u0275\u0275elementStart(24,"dw-form-control"),a.\u0275\u0275elementStart(25,"dw-input-group",15),a.\u0275\u0275element(26,"input",16),a.\u0275\u0275elementEnd(),a.\u0275\u0275template(27,ke,3,3,"ng-template",null,17,a.\u0275\u0275templateRefExtractor),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(29,"div",11),a.\u0275\u0275elementStart(30,"div"),a.\u0275\u0275text(31,"\xa0\xa0\xa0\xa0"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(32,"dw-form-item",13),a.\u0275\u0275elementStart(33,"dw-form-control"),a.\u0275\u0275elementStart(34,"div",18),a.\u0275\u0275elementStart(35,"dw-input-group"),a.\u0275\u0275elementStart(36,"label",19),a.\u0275\u0275listener("ngModelChange",function(e){return t.onOpenRange4(e)}),a.\u0275\u0275text(37," 30\u5929\u5185\u5373\u5c06\u8fc7\u4fdd "),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(38,"button",20),a.\u0275\u0275listener("dwClick",function(){return t.loadData()}),a.\u0275\u0275text(39),a.\u0275\u0275pipe(40,"translate"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(41,"button",21),a.\u0275\u0275listener("click",function(){return t.reset()}),a.\u0275\u0275text(42),a.\u0275\u0275pipe(43,"translate"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(44,"div",22),a.\u0275\u0275listener("click",function(){return t.isShowSearchExpand()}),a.\u0275\u0275text(45),a.\u0275\u0275element(46,"em",23),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275template(47,Ve,26,7,"div",24),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(48,"div",25),a.\u0275\u0275elementStart(49,"div",26),a.\u0275\u0275elementStart(50,"div",27),a.\u0275\u0275elementStart(51,"button",28),a.\u0275\u0275element(52,"em",29),a.\u0275\u0275elementStart(53,"span",30),a.\u0275\u0275text(54,"\u65b0\u5efa"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(55,"div",31),a.\u0275\u0275element(56,"div",32),a.\u0275\u0275elementStart(57,"div",33),a.\u0275\u0275listener("click",function(){return t.create("1")}),a.\u0275\u0275text(58,"\u65b0\u5efa\u5355\u673a"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(59,"div",33),a.\u0275\u0275listener("click",function(){return t.create("2")}),a.\u0275\u0275text(60,"\u65b0\u5efa\u4ea7\u7ebf/\u9879\u76ee "),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(61,"button",34),a.\u0275\u0275listener("click",function(){return t.goRecycledList()}),a.\u0275\u0275element(62,"img",35),a.\u0275\u0275element(63,"img",36),a.\u0275\u0275text(64," \u5df2\u56de\u6536\u4ea7\u54c1 "),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(65,"button",37),a.\u0275\u0275listener("click",function(){return a.\u0275\u0275restoreView(e),a.\u0275\u0275reference(74).initData(),t.showMultyModify()}),a.\u0275\u0275element(66,"img",38),a.\u0275\u0275element(67,"img",39),a.\u0275\u0275text(68," \u6279\u91cf\u4fee\u6539 "),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(69,"button",40),a.\u0275\u0275listener("click",function(){return t.export()}),a.\u0275\u0275element(70,"em",41),a.\u0275\u0275text(71," \u5bfc\u51fa\u6570\u636e "),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275template(72,vn,27,27,"ng-container",24),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(73,"app-multy-modify-step1",42,43),a.\u0275\u0275listener("visibleChanged",function(e){return t.changeStep1Visible(e)}),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(75,"dw-drawer",44),a.\u0275\u0275listener("dwOnClose",function(){return t.isCollapsed=!1}),a.\u0275\u0275template(76,xn,2,0,"ng-template",45),a.\u0275\u0275elementEnd(),a.\u0275\u0275template(77,Cn,3,0,"ng-template",null,46,a.\u0275\u0275templateRefExtractor),a.\u0275\u0275template(79,_n,1,1,"ng-template",null,47,a.\u0275\u0275templateRefExtractor),a.\u0275\u0275template(81,yn,1,1,"ng-template",null,48,a.\u0275\u0275templateRefExtractor),a.\u0275\u0275template(83,Fn,16,7,"ng-template",null,49,a.\u0275\u0275templateRefExtractor)}if(2&e){const e=a.\u0275\u0275reference(9),n=a.\u0275\u0275reference(28),i=a.\u0275\u0275reference(78);a.\u0275\u0275advance(6),a.\u0275\u0275property("dwAddOnAfter",e),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngModel",t.param),a.\u0275\u0275advance(5),a.\u0275\u0275property("formGroup",t.searchForm),a.\u0275\u0275advance(13),a.\u0275\u0275property("dwSuffix",n),a.\u0275\u0275advance(13),a.\u0275\u0275propertyInterpolate("angularticsLabel",t.userInfo.tenantId+","+t.userInfo.userId),a.\u0275\u0275property("dwType","primary")("dwActionId","query")("angularticsCategory","\u4ea7\u54c1\u6863\u6848"),a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate1(" ",a.\u0275\u0275pipeBind1(40,41,"\u67e5\u8be2")," "),a.\u0275\u0275advance(2),a.\u0275\u0275propertyInterpolate("angularticsLabel",t.userInfo.tenantId+","+t.userInfo.userId),a.\u0275\u0275property("dwType","defult")("angularticsCategory","\u4ea7\u54c1\u6863\u6848"),a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate1(" ",a.\u0275\u0275pipeBind1(43,43,"\u91cd\u7f6e")," "),a.\u0275\u0275advance(3),a.\u0275\u0275textInterpolate1(" ",t.isSearchExpand?"\u6536\u8d77":"\u5c55\u5f00"," "),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwType",t.isSearchExpand?"up":"down"),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",t.isSearchExpand),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwActionId","add")("dwDefaultAuthorized","disabled"),a.\u0275\u0275advance(3),a.\u0275\u0275property("dwType","primary")("dwActionId","add")("dwDefaultAuthorized","disabled"),a.\u0275\u0275advance(6),a.\u0275\u0275propertyInterpolate("angularticsLabel",t.userInfo.tenantId+","+t.userInfo.userId),a.\u0275\u0275property("angularticsCategory","\u4ea7\u54c1\u6863\u6848"),a.\u0275\u0275advance(2),a.\u0275\u0275propertyInterpolate("angularticsLabel",t.userInfo.tenantId+","+t.userInfo.userId),a.\u0275\u0275property("angularticsCategory","\u4ea7\u54c1\u6863\u6848"),a.\u0275\u0275advance(2),a.\u0275\u0275property("dwType","defult")("dwActionId","recycle")("dwDefaultAuthorized","disabled"),a.\u0275\u0275advance(4),a.\u0275\u0275property("dwType","defult")("dwDefaultAuthorized","disabled")("dwActionId","batchmodify"),a.\u0275\u0275advance(4),a.\u0275\u0275property("dwType","defult")("dwLoading",t.isDownloading)("dwDefaultAuthorized","disabled")("dwActionId","export"),a.\u0275\u0275advance(3),a.\u0275\u0275property("ngIf",t.showFile),a.\u0275\u0275advance(1),a.\u0275\u0275property("visible",t.showStep1),a.\u0275\u0275advance(2),a.\u0275\u0275property("dwVisible",t.isCollapsed)("dwTitle",i)("dwWidth","70%")("dwBodyStyle",a.\u0275\u0275pureFunction0(45,Vn))}},directives:[Q.DwContentComponent,K.u,z.DwInputGroupComponent,z.DwInputDirective,l.DefaultValueAccessor,l.NgControlStatus,l.NgModel,l.\u0275NgNoValidate,l.NgControlStatusGroup,l.FormGroupDirective,A.DwRowDirective,N.DwFormItemComponent,A.DwColDirective,N.DwFormControlComponent,W.DwDatePickerComponent,W.DwRangePickerComponent,l.FormControlName,z.DwInputGroupWhitSuffixOrPrefixDirective,S.DwCheckboxComponent,j.DwButtonComponent,J.uG,Z.DwActionAuthorizedDirective,u.DwAnalyticsOn,B.DwIconDirective,i.NgIf,b.TranslateDirective,Ce,_e.DwDrawerComponent,_e.DwDrawerContentDirective,$.DwSelectComponent,$.DwOptionComponent,ye.DwRadioGroupComponent,ye.DwRadioComponent,_.DwTableComponent,y.Ct,_.DwTheadComponent,_.DwTrDirective,y.Y9,_.DwTbodyComponent,i.NgForOf,y.b,_.DwTableCellDirective,_.DwThMeasureDirective,y.BL,_.DwThAddOnComponent,y.$2,_.DwCellAlignDirective,_.DwCellFixedDirective,y.at,_.DwCellEllipsisDirective,Se.DwPopconfirmDirective,v.w],pipes:[b.TranslatePipe,i.DatePipe],styles:[".state_tip[_ngcontent-%COMP%]{display:inline-block;width:64px;height:28px;line-height:28px;text-align:center;border-radius:15px;color:#fff;font-size:13px;background:#29cc8d}.state_tip.zise[_ngcontent-%COMP%]{background:#5c64d1}.state_tip.gray[_ngcontent-%COMP%]{background:#5c5c5c}.search-form-box[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]{width:calc((100% - 3 * 24px - 48px) / 3)}.search-form-box[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]   .form-input[_ngcontent-%COMP%]{flex:1}.search-form-box[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{width:5rem;text-align:right}.one_btn[_ngcontent-%COMP%]{height:32px;padding:0 8px 0 4px;margin-left:8px;border-radius:4px;display:flex;align-items:center}.one_btn[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{display:block;width:24px;margin-right:2px}.one_btn[_ngcontent-%COMP%]   img.hover[_ngcontent-%COMP%]{display:none}.one_btn[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%]{display:none}.one_btn[_ngcontent-%COMP%]:hover   img.hover[_ngcontent-%COMP%]{display:block}.one_btn[_ngcontent-%COMP%]:active{color:#096dd9;border-color:#096dd9}.sub_act[_ngcontent-%COMP%]:hover   .pub-btns[_ngcontent-%COMP%]{display:flex}.pub-btns[_ngcontent-%COMP%]{width:100px;position:absolute;top:32px;left:-20px;z-index:1999;background:#fff;display:none;flex-direction:column}.pub-btns[_ngcontent-%COMP%]   .blank[_ngcontent-%COMP%]{height:8px}.pub-btns[_ngcontent-%COMP%]   .act-item[_ngcontent-%COMP%]{display:block;width:100px;height:40px;line-height:40px;text-align:center;color:#000000a6;cursor:pointer;border:1px solid #e9e9e9;border-bottom:0}.pub-btns[_ngcontent-%COMP%]   .act-item[_ngcontent-%COMP%]:last-child{border-bottom:1px solid #e9e9e9}.pub-btns[_ngcontent-%COMP%]   .act-item[_ngcontent-%COMP%]:hover{background:#f1f1f1}  b{font-weight:normal;color:#0d9def}.isExpand[_ngcontent-%COMP%]{width:46px;white-space:nowrap;color:#1890ff;margin-left:16px;cursor:pointer}"]}),e})();var Ln=n(64762),Rn=n(53524);class An{constructor(e){this.product_file_id="",this.product_part_id="",this.material_id="",this.material_code="",this.material_name="",this.specification="",this.model="",this.sn="",this.sn_management="",this.unit="",this.unit_qty="",this.item_group_name="",this.expiry_date="",this.remark="",this.quickwear_part=!1,this.replacement_date="",Object.assign(this,e)}}class Nn{constructor(e){this.product_file_id="",this.product_equipment_list_id="",this.code="",this.name="",this.specification="",this.model="",this.sn="",this.picture_id="",this.file_name="",this.file_context="",this.quantity=1,this.item_group_id="",this.item_group_name="",this.remark="",this.product_part=[],this.quickwear_part=!1,this.replacement_date="",Object.assign(this,e)}}var $n=n(9682);class jn extends $n.DwClientPagingDataSource{constructor(e,t){super(),this.http=e,this.url=t}getDataList(e,t){return this.http.get(this.url).pipe((0,U.map)(n=>(this._result={currentPage:e,datas:Object.assign([],n),pageCount:Math.ceil(n.length/t),pageSize:t,rowCount:n.length},console.log("result",this._result),this._result)))}}var zn=n(16072),Bn=n(59083);let qn=(()=>{class e{constructor(e){this.sanitized=e}transform(e){const t="\u6613\u635f\u4ef6"===e.slice(-3),n=e.slice(0,e.length-3);return this.sanitized.bypassSecurityTrustHtml(t?`<div>${n}<span style="color: #ffffff;background: linear-gradient(270deg, #FD928B 0%, #FC493E 100%);border-radius: 2px;padding: 0 2px;font-size: 12px;margin-left: 10px;white-space:nowrap;">\u6613\u635f\u4ef6</span></div>`:`<div>${n}</div>`)}}return e.\u0275fac=function(t){return new(t||e)(a.\u0275\u0275directiveInject(Bn.DomSanitizer,16))},e.\u0275pipe=a.\u0275\u0275definePipe({name:"CustomHtmlPipe",type:e,pure:!0}),e})(),Wn=(()=>{class e{constructor(e,t,n,i,r){this.selectModalService=e,this.dwHttp=t,this.http=n,this.customPipe=i,this.customHtmlPipe=r,this.typeEnum={1:"\u603b\u90e8",2:"\u7f51\u70b9",3:"\u7ecf\u9500\u5546"},this.config={modalTitle:"\u4ea7\u54c1\u6863\u6848",modalWidth:"50%",tableMultiSelect:!1,tableIdField:"product_file_id",tableNameField:"product_file_name",tablePageSize:10,tableColDefs:[],dataSource:new jn(this.dwHttp,"restful/service/product/Product/Product?id=")}}open(e,t,n,i){let r="";return"service_site_name"===t?(r="restful/service/serviceSite/ServiceSite/List",this.config={modalTitle:"\u670d\u52a1\u7ad9\u70b9",modalWidth:"50%",tableMultiSelect:!1,tableIdField:"service_site_id",tableNameField:"service_site_name",tablePageSize:10,tableColDefs:[{title:"\u7f16\u53f7",field:"service_site_code",width:""},{title:"\u540d\u79f0",field:"service_site_name",width:""},{title:"\u7c7b\u578b",field:"service_site_type",dataPipe:"i18nSelect",dataEnum:this.typeEnum}],tableCustomTag:e=>"("+e.service_site_code+")"+e.service_site_name,dataSource:new $n.ApiServerPagingService(this.dwHttp,r,"service_site",["service_site_code","service_site_name"]),returnFields:["service_site_id","service_site_name"],initParams:this.getQueryCondition(n[0],n[1])}):"employee_id"===t?(r=`restful/service/employee/Employee/EmployeeForServiceSite?service_site_id=${n}`,this.config={modalTitle:"\u670d\u52a1\u4eba\u5458",modalWidth:"50%",tableMultiSelect:!1,tableIdField:"employee_id",tableNameField:"employee_name",tablePageSize:10,tableColDefs:[{title:"\u7f16\u53f7",field:"employee_code",width:""},{title:"\u59d3\u540d",field:"employee_name",width:""}],tableCustomTag:e=>"("+e.employee_code+")"+e.employee_name,dataSource:new jn(this.dwHttp,r)}):"customer_id"===t?(r="restful/service/customer/Customer/List",this.config={modalTitle:"\u5ba2\u6237",modalWidth:"50%",tableMultiSelect:!1,tableIdField:"customer_id",tableNameField:"customer_name",tablePageSize:10,tableColDefs:[{title:"\u5ba2\u6237\u7f16\u53f7",field:"customer_code",width:""},{title:"\u5ba2\u6237\u540d\u79f0",field:"customer_name",width:""},{title:"\u8054\u7cfb\u4eba",field:"contact",width:""},{title:"\u8054\u7cfb\u7535\u8bdd",field:"contact_number",width:""}],tableCustomTag:e=>"("+e.customer_code+")"+e.customer_name,dataSource:new $n.ApiServerPagingService(this.dwHttp,r,"customer",["customer_code","customer_name"])}):(r="restful/service/material/Material/MaterialForServerPaging?type=false",this.config={modalTitle:"\u4ea7\u54c1\u914d\u4ef6",modalWidth:"70%",tableMultiSelect:n,tableIdField:"material_id",tableNameField:"material_name",tablePageSize:10,tableColDefs:[{title:"\u7f16\u7801",field:"material_code",width:"110px"},{title:"\u540d\u79f0",field:"material_name",width:"140px"},{title:"\u914d\u4ef6\u5206\u7c7b",field:"item_group_name",width:"140px"},{title:"\u89c4\u683c",field:"specification",width:"150px"},{title:"\u578b\u53f7",field:"model",width:"130px"},{title:"\u56fe\u7247",field:"url",width:"80px",dataPipe:"custom:url",customPipe:this.customPipe,isSort:!1}],tableCustomTag:e=>"("+e.material_code+")"+e.material_name,dataSource:new $n.ApiServerPagingService(this.dwHttp,r,"material",["material_code","material_name"])}),"employee_id"===t?this.selectModalService.open(this.config,e).pipe((0,U.switchMap)(e=>this.dwHttp.get(`restful/service/employee/Employee/EmployeeById?id=${e[0]}`))):"customer_id"===t?this.selectModalService.open(this.config,e).pipe((0,U.switchMap)(e=>this.dwHttp.get(`restful/service/customer/Customer/CustomerByCustomerId?customerId=${e[0]}`))):"material_id"===t?this.selectModalService.open(this.config,e).pipe((0,U.switchMap)(e=>this.dwHttp.get(`restful/service/material/Material/MaterialByIds?material_id=${e}&delivery_date=${i}`))):this.selectModalService.open(this.config,e)}getQueryCondition(e,t){const n=new Rn.DwQueryCondition;return"1"!==t?(n.addCondition(new Rn.DwQueryConditionInfo("service_site_id",String(e),Rn.DwQueryConditionOperator.EQUAL)),n):null}}return e.\u0275fac=function(t){return new(t||e)(a.\u0275\u0275inject($n.DwSelectModalService),a.\u0275\u0275inject(Y.DwDapHttpClient),a.\u0275\u0275inject(X.HttpClient),a.\u0275\u0275inject(zn.M),a.\u0275\u0275inject(qn))},e.\u0275prov=a.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e})();function Gn(e,t){if(1&e){const e=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"em",24),a.\u0275\u0275listener("click",function(){return a.\u0275\u0275restoreView(e),a.\u0275\u0275nextContext(2).clear("material_")}),a.\u0275\u0275elementEnd()}}function Un(e,t){if(1&e){const e=a.\u0275\u0275getCurrentView();a.\u0275\u0275template(0,Gn,1,0,"em",21),a.\u0275\u0275elementStart(1,"button",22),a.\u0275\u0275listener("click",function(t){return a.\u0275\u0275restoreView(e),a.\u0275\u0275nextContext().openProductDataWin(t,"material_id")}),a.\u0275\u0275element(2,"em",23),a.\u0275\u0275elementEnd()}if(2&e){const e=a.\u0275\u0275nextContext();a.\u0275\u0275property("ngIf",e.form.value.material_code)}}function Hn(e,t){1&e&&(a.\u0275\u0275elementStart(0,"dw-form-item"),a.\u0275\u0275elementStart(1,"dw-form-label",1),a.\u0275\u0275text(2,"\u5230\u671f\u66f4\u6362\u65e5\u671f"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(3,"dw-form-control",2),a.\u0275\u0275element(4,"dw-date-picker",25),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd()),2&e&&(a.\u0275\u0275advance(1),a.\u0275\u0275property("dwSm",6)("dwXs",24),a.\u0275\u0275advance(2),a.\u0275\u0275property("dwSm",16)("dwXs",24),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwDisabled",!0))}let Xn=(()=>{class e{constructor(e,t,n,i){this.fb=e,this.productFileSrv=t,this.productFileSelectService=n,this.modalSubject=i,this.sn_readonly=!0}set cmd(e){this._cmd=e}set expiryDate(e){this._expiryDate=e}set deliveryDate(e){this._deliveryDate=e||new Date}set orderDetail(e){this.detailEdit=e}ngOnInit(){String(this._deliveryDate).indexOf("/")>0&&(this._deliveryDate=new Date(this._deliveryDate)),console.log(this._deliveryDate,this._expiryDate||new Date),"add"===this._cmd?(this.detailEdit=new An({}),this.detailEdit.product_part_id="",this.sn_readonly=!1):this.sn_readonly="1"!==this.detailEdit.sn_management,this.form=this.fb.group({}),this.form.addControl("product_file_id",new l.FormControl(this.detailEdit.product_file_id)),this.form.addControl("material_id",new l.FormControl(this.detailEdit.material_id,l.Validators.required)),this.form.addControl("material_code",new l.FormControl(this.detailEdit.material_code,l.Validators.required)),this.form.addControl("material_name",new l.FormControl(this.detailEdit.material_name,l.Validators.required)),this.form.addControl("specification",new l.FormControl(this.detailEdit.specification)),this.form.addControl("model",new l.FormControl(this.detailEdit.model)),this.form.addControl("sn",new l.FormControl(this.detailEdit.sn)),this.form.addControl("unit",new l.FormControl(this.detailEdit.unit)),this.form.addControl("unit_qty",new l.FormControl(this.detailEdit.unit_qty||1)),this.form.addControl("item_group_name",new l.FormControl(this.detailEdit.item_group_name)),this.form.addControl("expiry_date",new l.FormControl(this.detailEdit.expiry_date)),this.form.addControl("sn_management",new l.FormControl(this.detailEdit.sn_management)),this.form.addControl("remark",new l.FormControl(this.detailEdit.remark)),this.form.addControl("quickwear_part",new l.FormControl(this.detailEdit.quickwear_part)),this.form.addControl("replacement_date",new l.FormControl(this.detailEdit.replacement_date))}onInput(e,t){console.log(e.target.value),e.target.value<=0&&this.form.get(t).setValue(1)}emitDataOutside(){Object.assign(this.detailEdit,this.form.value),this.detailEdit.$state="u",console.log(this.detailEdit),this.modalSubject.triggerOk()}handleCancel(e){this.modalSubject.triggerCancel()}openProductDataWin(e,t){e.preventDefault(),console.log(event.target);const n=this._deliveryDate.getFullYear()+"-"+(this._deliveryDate.getMonth()+1)+"-"+this._deliveryDate.getDate();this.productFileSelectService.open([],t,!1,n).subscribe(e=>{console.log(e),this.form.get(t).setValue(e[0][t]),this.form.get("material_code").setValue(e[0].material_code),this.form.get("material_name").setValue(e[0].material_name),this.form.get("specification").setValue(e[0].specification),this.form.get("model").setValue(e[0].model),this.form.get("sn").reset(""),this.form.get("unit").setValue(e[0].unit),this.form.get("item_group_name").setValue(e[0].item_group_name),this.form.get("material_name").setValue(e[0].material_name),this.form.get("expiry_date").setValue(this._expiryDate||new Date),this.form.get("sn_management").setValue(e[0].sn_management),this.sn_readonly="1"!==e[0].sn_management,this.form.get("replacement_date").setValue(e[0].replacement_date),this.form.get("quickwear_part").setValue(e[0].quickwear_part),console.log(this.form)})}clear(e){this.form.get(`${e}id`).setValue(0),this.form.get(`${e}code`).setValue(""),this.sn_readonly=!1}}return e.\u0275fac=function(t){return new(t||e)(a.\u0275\u0275directiveInject(l.FormBuilder),a.\u0275\u0275directiveInject(d.U),a.\u0275\u0275directiveInject(Wn),a.\u0275\u0275directiveInject(c.DwModalRef))},e.\u0275cmp=a.\u0275\u0275defineComponent({type:e,selectors:[["app-product-part-modify"]],inputs:{cmd:"cmd",expiryDate:"expiryDate",deliveryDate:"deliveryDate",orderDetail:"orderDetail"},features:[a.\u0275\u0275ProvidersFeature([Wn])],decls:63,vars:50,consts:[["dw-form","",3,"formGroup","ngSubmit"],["dwRequired","",3,"dwSm","dwXs"],[3,"dwSm","dwXs"],["dwSearch","",3,"dwSuffix"],["dw-input","","type","text","readonly","","dw-input","","formControlName","material_code"],["suffixMaterialData",""],["dw-input","","readonly","","required","","formControlName","material_name"],["dw-input","","readonly","","formControlName","specification"],["dw-input","","readonly","","formControlName","model"],[3,"dwSm","dwXs","dwRequired"],["dw-input","","formControlName","sn","maxlength","255",3,"readonly","required"],["dw-input","","readonly","","formControlName","unit"],["dw-input","","formControlName","unit_qty","type","number","maxlength","20",3,"readonly","change"],["dw-input","","readonly","","formControlName","item_group_name"],["formControlName","expiry_date","required",""],[4,"ngIf"],["dw-input","","maxlength","20","formControlName","remark"],[1,"customize-footer","ant-modal-footer",2,"padding-bottom","0"],["dw-button","",3,"dwType","disabled"],["translate",""],["dw-button","","type","button",3,"dwType","click"],["dw-icon","","class","ant-input-clear-icon","dwTheme","fill","dwType","close-circle",3,"click",4,"ngIf"],["dw-button","","dwType","primary","dwSearch","","type","button",3,"click"],["dw-icon","","dwType","search"],["dw-icon","","dwTheme","fill","dwType","close-circle",1,"ant-input-clear-icon",3,"click"],["formControlName","replacement_date","dwPlaceHolder","\u6613\u635f\u4ef6\u672a\u8bbe\u7f6e\u66f4\u6362\u5468\u671f",3,"dwDisabled"]],template:function(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"dw-content"),a.\u0275\u0275elementStart(1,"form",0),a.\u0275\u0275listener("ngSubmit",function(){return t.emitDataOutside()}),a.\u0275\u0275elementStart(2,"dw-form-item"),a.\u0275\u0275elementStart(3,"dw-form-label",1),a.\u0275\u0275text(4,"\u914d\u4ef6\u7f16\u53f7"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(5,"dw-form-control",2),a.\u0275\u0275elementStart(6,"dw-input-group",3),a.\u0275\u0275element(7,"input",4),a.\u0275\u0275elementEnd(),a.\u0275\u0275template(8,Un,3,1,"ng-template",null,5,a.\u0275\u0275templateRefExtractor),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(10,"dw-form-item"),a.\u0275\u0275elementStart(11,"dw-form-label",1),a.\u0275\u0275text(12,"\u914d\u4ef6\u540d\u79f0"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(13,"dw-form-control",2),a.\u0275\u0275element(14,"input",6),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(15,"dw-form-item"),a.\u0275\u0275elementStart(16,"dw-form-label",2),a.\u0275\u0275text(17,"\u89c4\u683c"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(18,"dw-form-control",2),a.\u0275\u0275element(19,"input",7),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(20,"dw-form-item"),a.\u0275\u0275elementStart(21,"dw-form-label",2),a.\u0275\u0275text(22,"\u578b\u53f7"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(23,"dw-form-control",2),a.\u0275\u0275element(24,"input",8),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(25,"dw-form-item"),a.\u0275\u0275elementStart(26,"dw-form-label",9),a.\u0275\u0275text(27,"\u5e8f\u5217\u53f7"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(28,"dw-form-control",2),a.\u0275\u0275element(29,"input",10),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(30,"dw-form-item"),a.\u0275\u0275elementStart(31,"dw-form-label",2),a.\u0275\u0275text(32,"\u5355\u4f4d"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(33,"dw-form-control",2),a.\u0275\u0275element(34,"input",11),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(35,"dw-form-item"),a.\u0275\u0275elementStart(36,"dw-form-label",2),a.\u0275\u0275text(37,"\u5355\u4f4d\u6570\u91cf"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(38,"dw-form-control",2),a.\u0275\u0275elementStart(39,"input",12),a.\u0275\u0275listener("change",function(e){return t.onInput(e,"unit_qty")}),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(40,"dw-form-item"),a.\u0275\u0275elementStart(41,"dw-form-label",2),a.\u0275\u0275text(42,"\u7c7b\u578b"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(43,"dw-form-control",2),a.\u0275\u0275element(44,"input",13),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(45,"dw-form-item"),a.\u0275\u0275elementStart(46,"dw-form-label",1),a.\u0275\u0275text(47,"\u4fdd\u4fee\u622a\u6b62\u65e5\u671f"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(48,"dw-form-control",2),a.\u0275\u0275element(49,"dw-date-picker",14),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275template(50,Hn,5,5,"dw-form-item",15),a.\u0275\u0275elementStart(51,"dw-form-item"),a.\u0275\u0275elementStart(52,"dw-form-label",2),a.\u0275\u0275text(53,"\u5907\u6ce8"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(54,"dw-form-control",2),a.\u0275\u0275element(55,"input",16),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(56,"div",17),a.\u0275\u0275elementStart(57,"button",18),a.\u0275\u0275elementStart(58,"span",19),a.\u0275\u0275text(59,"\u786e\u5b9a"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(60,"button",20),a.\u0275\u0275listener("click",function(e){return t.handleCancel(e)}),a.\u0275\u0275elementStart(61,"span",19),a.\u0275\u0275text(62,"\u53d6\u6d88"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd()),2&e){const e=a.\u0275\u0275reference(9);a.\u0275\u0275advance(1),a.\u0275\u0275property("formGroup",t.form),a.\u0275\u0275advance(2),a.\u0275\u0275property("dwSm",6)("dwXs",24),a.\u0275\u0275advance(2),a.\u0275\u0275property("dwSm",16)("dwXs",24),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwSuffix",e),a.\u0275\u0275advance(5),a.\u0275\u0275property("dwSm",6)("dwXs",24),a.\u0275\u0275advance(2),a.\u0275\u0275property("dwSm",16)("dwXs",24),a.\u0275\u0275advance(3),a.\u0275\u0275property("dwSm",6)("dwXs",24),a.\u0275\u0275advance(2),a.\u0275\u0275property("dwSm",16)("dwXs",24),a.\u0275\u0275advance(3),a.\u0275\u0275property("dwSm",6)("dwXs",24),a.\u0275\u0275advance(2),a.\u0275\u0275property("dwSm",16)("dwXs",24),a.\u0275\u0275advance(3),a.\u0275\u0275property("dwSm",6)("dwXs",24)("dwRequired",!t.sn_readonly),a.\u0275\u0275advance(2),a.\u0275\u0275property("dwSm",16)("dwXs",24),a.\u0275\u0275advance(1),a.\u0275\u0275property("readonly",t.sn_readonly)("required",!t.sn_readonly),a.\u0275\u0275advance(2),a.\u0275\u0275property("dwSm",6)("dwXs",24),a.\u0275\u0275advance(2),a.\u0275\u0275property("dwSm",16)("dwXs",24),a.\u0275\u0275advance(3),a.\u0275\u0275property("dwSm",6)("dwXs",24),a.\u0275\u0275advance(2),a.\u0275\u0275property("dwSm",16)("dwXs",24),a.\u0275\u0275advance(1),a.\u0275\u0275property("readonly",!t.sn_readonly),a.\u0275\u0275advance(2),a.\u0275\u0275property("dwSm",6)("dwXs",24),a.\u0275\u0275advance(2),a.\u0275\u0275property("dwSm",16)("dwXs",24),a.\u0275\u0275advance(3),a.\u0275\u0275property("dwSm",6)("dwXs",24),a.\u0275\u0275advance(2),a.\u0275\u0275property("dwSm",16)("dwXs",24),a.\u0275\u0275advance(2),a.\u0275\u0275property("ngIf",t.form.value.quickwear_part),a.\u0275\u0275advance(2),a.\u0275\u0275property("dwSm",6)("dwXs",24),a.\u0275\u0275advance(2),a.\u0275\u0275property("dwSm",16)("dwXs",24),a.\u0275\u0275advance(3),a.\u0275\u0275property("dwType","primary")("disabled",!t.form.valid),a.\u0275\u0275advance(3),a.\u0275\u0275property("dwType","default")}},directives:[Q.DwContentComponent,l.\u0275NgNoValidate,l.NgControlStatusGroup,N.DwFormDirective,l.FormGroupDirective,A.DwRowDirective,N.DwFormItemComponent,A.DwColDirective,N.DwFormLabelComponent,N.DwFormControlComponent,K.u,z.DwInputGroupComponent,z.DwInputGroupWhitSuffixOrPrefixDirective,z.DwInputDirective,l.DefaultValueAccessor,l.NgControlStatus,l.FormControlName,l.RequiredValidator,l.MaxLengthValidator,l.NumberValueAccessor,W.DwDatePickerComponent,i.NgIf,j.DwButtonComponent,J.uG,b.TranslateDirective,B.DwIconDirective],styles:[""]}),e})();var Qn=n(14025),Kn=n(119),Jn=n(67733),Zn=n(41430);function Yn(e,t){if(1&e&&a.\u0275\u0275element(0,"dw-option",42),2&e){const e=t.$implicit;a.\u0275\u0275property("dwLabel",e.item_group_name)("dwValue",e.item_group_id)}}const ei=function(){return{width:"100%"}};function ti(e,t){if(1&e&&a.\u0275\u0275element(0,"img",43),2&e){const e=a.\u0275\u0275nextContext();a.\u0275\u0275property("src",e.previewImage,a.\u0275\u0275sanitizeUrl)("ngStyle",a.\u0275\u0275pureFunction0(2,ei))}}function ni(e,t){1&e&&(a.\u0275\u0275elementStart(0,"th",44),a.\u0275\u0275elementStart(1,"span",29),a.\u0275\u0275text(2,"\u914d\u4ef6\u7f16\u53f7"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd())}function ii(e,t){1&e&&(a.\u0275\u0275elementStart(0,"th",45),a.\u0275\u0275elementStart(1,"span",29),a.\u0275\u0275text(2,"\u914d\u4ef6\u540d\u79f0"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd())}function ri(e,t){1&e&&(a.\u0275\u0275elementStart(0,"th",45),a.\u0275\u0275elementStart(1,"span",29),a.\u0275\u0275text(2,"\u89c4\u683c"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd())}function ai(e,t){1&e&&(a.\u0275\u0275elementStart(0,"th",45),a.\u0275\u0275elementStart(1,"span",29),a.\u0275\u0275text(2,"\u578b\u53f7"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd())}function oi(e,t){1&e&&(a.\u0275\u0275elementStart(0,"th",46),a.\u0275\u0275elementStart(1,"span",29),a.\u0275\u0275text(2,"\u5e8f\u5217\u53f7"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd())}function li(e,t){1&e&&(a.\u0275\u0275elementStart(0,"th",47),a.\u0275\u0275elementStart(1,"span",29),a.\u0275\u0275text(2,"\u5355\u4f4d"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd())}function di(e,t){1&e&&(a.\u0275\u0275elementStart(0,"th",45),a.\u0275\u0275elementStart(1,"span",29),a.\u0275\u0275text(2,"\u5355\u4f4d\u6570\u91cf"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd())}function si(e,t){1&e&&(a.\u0275\u0275elementStart(0,"th",45),a.\u0275\u0275elementStart(1,"span",29),a.\u0275\u0275text(2,"\u7c7b\u578b"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd())}function ci(e,t){1&e&&(a.\u0275\u0275elementStart(0,"th",44),a.\u0275\u0275elementStart(1,"span",29),a.\u0275\u0275text(2,"\u4fdd\u4fee\u622a\u6b62\u65e5\u671f"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd())}function mi(e,t){1&e&&(a.\u0275\u0275elementStart(0,"th",44),a.\u0275\u0275elementStart(1,"span",29),a.\u0275\u0275text(2,"\u5230\u671f\u66f4\u6362\u65e5\u671f"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd())}function pi(e,t){1&e&&(a.\u0275\u0275elementStart(0,"th",48),a.\u0275\u0275elementStart(1,"span",29),a.\u0275\u0275text(2,"\u5907\u6ce8"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd())}function ui(e,t){1&e&&(a.\u0275\u0275elementStart(0,"th",49),a.\u0275\u0275elementStart(1,"span",29),a.\u0275\u0275text(2,"\u64cd\u4f5c"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd())}function hi(e,t){1&e&&(a.\u0275\u0275elementStart(0,"span",54),a.\u0275\u0275element(1,"em",55),a.\u0275\u0275elementEnd())}function gi(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"td"),a.\u0275\u0275template(1,hi,2,0,"span",53),a.\u0275\u0275text(2),a.\u0275\u0275elementEnd()),2&e){const e=a.\u0275\u0275nextContext().$implicit;a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",e.quickwear_part),a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate1(" ",e.material_code," ")}}function fi(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"td"),a.\u0275\u0275text(1),a.\u0275\u0275elementEnd()),2&e){const e=a.\u0275\u0275nextContext().$implicit;a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate1(" ",e.material_name," ")}}function wi(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"td"),a.\u0275\u0275text(1),a.\u0275\u0275elementEnd()),2&e){const e=a.\u0275\u0275nextContext().$implicit;a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate1(" ",e.specification," ")}}function vi(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"td"),a.\u0275\u0275text(1),a.\u0275\u0275elementEnd()),2&e){const e=a.\u0275\u0275nextContext().$implicit;a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate1(" ",e.model," ")}}function xi(e,t){if(1&e){const e=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"input",57),a.\u0275\u0275listener("ngModelChange",function(t){return a.\u0275\u0275restoreView(e),a.\u0275\u0275nextContext(2).$implicit.sn=t})("change",function(){a.\u0275\u0275restoreView(e);const t=a.\u0275\u0275nextContext(2).$implicit;return a.\u0275\u0275nextContext().partInputChange(t)}),a.\u0275\u0275elementEnd()}if(2&e){const e=a.\u0275\u0275nextContext(2).$implicit;a.\u0275\u0275property("ngModel",e.sn)}}function Ci(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"td"),a.\u0275\u0275template(1,xi,1,1,"input",56),a.\u0275\u0275elementEnd()),2&e){const e=a.\u0275\u0275nextContext().$implicit;a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf","1"===e.sn_management)}}function _i(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"td"),a.\u0275\u0275text(1),a.\u0275\u0275elementEnd()),2&e){const e=a.\u0275\u0275nextContext().$implicit;a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate1(" ",e.unit," ")}}function yi(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"span"),a.\u0275\u0275text(1),a.\u0275\u0275elementEnd()),2&e){const e=a.\u0275\u0275nextContext(2).$implicit;a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate(e.unit_qty)}}function Si(e,t){if(1&e){const e=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"dw-input-number",60),a.\u0275\u0275listener("ngModelChange",function(t){return a.\u0275\u0275restoreView(e),a.\u0275\u0275nextContext(2).$implicit.unit_qty=t})("ngModelChange",function(){a.\u0275\u0275restoreView(e);const t=a.\u0275\u0275nextContext(2).$implicit;return a.\u0275\u0275nextContext().partInputChange(t)}),a.\u0275\u0275elementEnd()}if(2&e){const e=a.\u0275\u0275nextContext(2).$implicit;a.\u0275\u0275property("ngModel",e.unit_qty)("dwMin",0)}}function bi(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"td"),a.\u0275\u0275template(1,yi,2,1,"span",58),a.\u0275\u0275template(2,Si,1,2,"dw-input-number",59),a.\u0275\u0275elementEnd()),2&e){const e=a.\u0275\u0275nextContext().$implicit;a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf","1"===e.sn_management),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf","0"===e.sn_management)}}function Ii(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"td"),a.\u0275\u0275text(1),a.\u0275\u0275elementEnd()),2&e){const e=a.\u0275\u0275nextContext().$implicit;a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate1(" ",e.item_group_name," ")}}function Ei(e,t){if(1&e){const e=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"td"),a.\u0275\u0275elementStart(1,"dw-date-picker",61),a.\u0275\u0275listener("ngModelChange",function(t){return a.\u0275\u0275restoreView(e),a.\u0275\u0275nextContext().$implicit.expiry_date=t})("ngModelChange",function(){a.\u0275\u0275restoreView(e);const t=a.\u0275\u0275nextContext().$implicit;return a.\u0275\u0275nextContext().partInputChange(t)}),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd()}if(2&e){const e=a.\u0275\u0275nextContext().$implicit;a.\u0275\u0275advance(1),a.\u0275\u0275property("ngModel",e.expiry_date)}}function Di(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"td"),a.\u0275\u0275text(1),a.\u0275\u0275pipe(2,"date"),a.\u0275\u0275elementEnd()),2&e){const e=a.\u0275\u0275nextContext().$implicit;a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate1(" ",a.\u0275\u0275pipeBind2(2,1,e.replacement_date,"yyyy-MM-dd")," ")}}function Oi(e,t){if(1&e){const e=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"td"),a.\u0275\u0275elementStart(1,"input",62),a.\u0275\u0275listener("ngModelChange",function(t){return a.\u0275\u0275restoreView(e),a.\u0275\u0275nextContext().$implicit.remark=t})("change",function(){a.\u0275\u0275restoreView(e);const t=a.\u0275\u0275nextContext().$implicit;return a.\u0275\u0275nextContext().partInputChange(t)}),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd()}if(2&e){const e=a.\u0275\u0275nextContext().$implicit;a.\u0275\u0275advance(1),a.\u0275\u0275property("ngModel",e.remark)}}function Mi(e,t){if(1&e){const e=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"td",63),a.\u0275\u0275elementStart(1,"div",64),a.\u0275\u0275elementStart(2,"div",65),a.\u0275\u0275elementStart(3,"a",66),a.\u0275\u0275listener("dwOnConfirm",function(){a.\u0275\u0275restoreView(e);const t=a.\u0275\u0275nextContext().$implicit;return a.\u0275\u0275nextContext().deletePart(t.index)}),a.\u0275\u0275pipe(4,"translate"),a.\u0275\u0275pipe(5,"translate"),a.\u0275\u0275elementStart(6,"a",67),a.\u0275\u0275element(7,"img",68),a.\u0275\u0275element(8,"img",69),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd()}2&e&&(a.\u0275\u0275advance(3),a.\u0275\u0275property("dwPopconfirmTitle","\u662f\u5426\u5220\u9664")("dwOkText",a.\u0275\u0275pipeBind1(4,4,"dw-determine"))("dwCancelText",a.\u0275\u0275pipeBind1(5,6,"dw-cancel"))("dwPopconfirmPlacement","topRight"))}function Pi(e,t){1&e&&(a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275elementStart(1,"tr",50),a.\u0275\u0275template(2,gi,3,2,"td",51),a.\u0275\u0275template(3,fi,2,1,"td",51),a.\u0275\u0275template(4,wi,2,1,"td",51),a.\u0275\u0275template(5,vi,2,1,"td",51),a.\u0275\u0275template(6,Ci,2,1,"td",51),a.\u0275\u0275template(7,_i,2,1,"td",51),a.\u0275\u0275template(8,bi,3,2,"td",51),a.\u0275\u0275template(9,Ii,2,1,"td",51),a.\u0275\u0275template(10,Ei,2,1,"td",51),a.\u0275\u0275template(11,Di,3,4,"td",51),a.\u0275\u0275template(12,Oi,2,1,"td",51),a.\u0275\u0275template(13,Mi,9,8,"td",52),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementContainerEnd()),2&e&&(a.\u0275\u0275advance(2),a.\u0275\u0275property("dwColumnId","material_code"),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","material_name"),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","specification"),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","model"),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","sn"),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","unit"),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","unit_qty"),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","item_group_name"),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","expiry_date"),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","replacement_date"),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","remark"),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","operation"))}const ki=function(){return{showPreviewIcon:!0,showRemoveIcon:!0}},Fi=function(){return{x:"1300px"}};let Vi=(()=>{class e{constructor(e,t,n,i,r,a){this.fb=e,this.productFileSrv=t,this.productFileSelectService=n,this.message=i,this.datePipe=r,this.modalSubject=a,this.product_part=[],this.product_part_for_show=[],this.itemGroupList=[],this._isIntegrated=!1,this.picture_id="",this.fileList=[],this.previewImage="",this.previewVisible=!1,this.handlePreview=e=>(0,Ln.mG)(this,void 0,void 0,function*(){!e.url&&!e.preview&&(e.preview=yield this.getBase64(e.originFileObj)),this.previewImage=e.url||e.preview,this.previewVisible=!0}),this.handleChange=e=>(0,Ln.mG)(this,void 0,void 0,function*(){switch(e.file.status){case"done":this.fileList[0].url=this.fileList.length?yield this.getBase64(e.file.originFileObj):"",this.form.get("file_context").setValue(this.fileList.length?this.fileList[0].url:""),this.form.get("file_name").setValue(this.fileList.length?this.fileList[0].name:""),this.form.get("picture_id").setValue("");break;case"removed":this.fileList[0].url="",this.form.get("file_context").setValue(""),this.form.get("file_name").setValue(""),this.form.get("picture_id").setValue("");break;case"error":this.fileList[0].status="done",this.fileList[0].url=this.fileList.length?yield this.getBase64(e.file.originFileObj):"",this.form.get("file_context").setValue(this.fileList.length?this.fileList[0].url:""),this.form.get("file_name").setValue(this.fileList.length?this.fileList[0].name:""),this.form.get("picture_id").setValue("")}}),this.beforeUpload=(e,t)=>new f.Observable(t=>{const n="image/jpeg"===e.type||"image/png"===e.type;if(!n)return this.message.create("error","\u8bf7\u4e0a\u4f20jpg\u6216png\u683c\u5f0f\u56fe\u7247\uff01"),void t.complete();const i=e.size/1024/1024<=5;if(!i)return this.message.create("error","\u4e0a\u4f20\u6587\u4ef6\u5927\u5c0f\u8d85\u8fc75M\uff01"),void t.complete();t.next(n&&i),t.complete()})}set isIntegrated(e){this._isIntegrated=e}set cmd(e){this._cmd=e}set expiryDate(e){this._expiryDate=e}set deliveryDate(e){this._deliveryDate=e||new Date}set orderDetail(e){this.detailEdit=e}ngOnInit(){console.log(this._deliveryDate,this.datePipe.transform(this._expiryDate||new Date,"yyyy/MM/dd HH:mm:dd")),String(this._deliveryDate).indexOf("/")>0&&(this._deliveryDate=new Date(this._deliveryDate)),this.form=this.fb.group({}),"add"===this._cmd?(this.detailEdit=new Nn({}),this.detailEdit.product_equipment_list_id=null,this.detailEdit.product_file_id=null,this.fileList=[],this.picture_id="",this.previewImage=""):(this.product_part=this.detailEdit.product_part?JSON.parse(JSON.stringify(this.detailEdit.product_part)):[],this.product_part.forEach(e=>{e.$state=e.$state||"u",e.expiry_date=this.datePipe.transform(e.expiry_date||new Date,"yyyy/MM/dd")}),this.getPartsForShow(),this.picture_id=this.detailEdit.picture_id||"",this.detailEdit.file_context?this.fileList=[{uid:this.picture_id,name:this.detailEdit.file_name,status:"done",url:this.detailEdit.file_context}]:(this.fileList=[],this.previewImage="")),this.form.addControl("product_file_id",new l.FormControl(this.detailEdit.product_file_id)),this.form.addControl("code",new l.FormControl(this.detailEdit.code,l.Validators.required)),this.form.addControl("name",new l.FormControl(this.detailEdit.name,l.Validators.required)),this.form.addControl("specification",new l.FormControl(this.detailEdit.specification)),this.form.addControl("model",new l.FormControl(this.detailEdit.model)),this.form.addControl("sn",new l.FormControl(this.detailEdit.sn)),this.form.addControl("picture_id",new l.FormControl(this.detailEdit.picture_id)),this.form.addControl("file_name",new l.FormControl(this.detailEdit.file_name)),this.form.addControl("file_context",new l.FormControl(this.detailEdit.file_context)),this.form.addControl("quantity",new l.FormControl(this.detailEdit.quantity||1,l.Validators.required)),this.form.addControl("item_group_id",new l.FormControl(this.detailEdit.item_group_id,l.Validators.required)),this.form.addControl("item_group_name",new l.FormControl(this.detailEdit.item_group_name,l.Validators.required)),this.form.addControl("remark",new l.FormControl(this.detailEdit.remark)),this.productFileSrv.getItemGroupList("","","1").subscribe(e=>{this.itemGroupList=e||[]})}onInput(e){""!==this.form.value.sn&&this.form.get("quantity").setValue(1)}itemGroupChange(e){if(this.itemGroupList.length)for(const t in this.itemGroupList)if(this.itemGroupList[t].item_group_id===e)return void this.form.get("item_group_name").setValue(this.itemGroupList[t].item_group_name)}emitDataOutside(){console.log(this.detailEdit),Object.assign(this.detailEdit,this.form.value),Object.assign(this.detailEdit,{product_part:this.product_part}),this.detailEdit.$state="u",console.log(this.detailEdit);let e=!0;this.product_part_for_show.forEach(t=>t.sn||"1"!==t.sn_management?t.unit_qty?t.expiry_date?void 0:(this.message.error("\u8bf7\u8f93\u5165\u914d\u4ef6\u4fdd\u4fee\u622a\u6b62\u65e5\u671f"),void(e=!1)):(this.message.error("\u8bf7\u8f93\u5165\u914d\u4ef6\u5355\u4f4d\u6570\u91cf"),void(e=!1)):(this.message.error("\u8bf7\u8f93\u5165\u914d\u4ef6\u5e8f\u5217\u53f7"),void(e=!1))),e&&this.modalSubject.triggerOk()}handleCancel(e){console.log(this.detailEdit),this.modalSubject.triggerCancel()}openProductDataWin(e,t){e.preventDefault(),console.log(event.target);const n=this._deliveryDate.getFullYear()+"-"+(this._deliveryDate.getMonth()+1)+"-"+this._deliveryDate.getDate();this.productFileSelectService.open([],t,!0,n).subscribe(e=>{let t=!1;e&&e.length&&e.forEach(e=>{const n=this.product_part?this.product_part.filter(t=>e.quickwear_part&&"1"!==e.sn_management&&t.material_id===e.material_id&&this.datePipe.transform(t.replacement_date,"yyyy/MM/dd")===this.datePipe.transform(e.replacement_date,"yyyy/MM/dd")&&"d"!==t.$state):[];if(console.log(n),n&&n.length)return console.log(t),void(t=!0);this.product_part.push(this.detailModelWinObjForProductPart({material_id:e.material_id,material_code:e.material_code,material_name:e.material_name,specification:e.specification,model:e.model,sn:"",unit:e.unit,unit_qty:1,item_group_name:e.item_group_name,expiry_date:this.datePipe.transform(this._expiryDate||new Date,"yyyy/MM/dd"),sn_management:e.sn_management,remark:"",quickwear_part:e.quickwear_part,replacement_date:e.replacement_date,$state:"c"})),this.getPartsForShow()}),t&&this.message.error("\u5df2\u5b58\u5728\u76f8\u540c\u5230\u671f\u66f4\u6362\u65e5\u671f\u7684\u6613\u635f\u914d\u4ef6\uff01")})}detailModelWinObjForProductPart(e){return Object.assign(Object.assign({},e),{product_file_id:this.detailEdit.product_file_id||null,product_equipment_list_id:this.detailEdit.product_equipment_list_id||null})}deletePart(e){console.log(JSON.parse(JSON.stringify(this.product_part)),e),"c"===this.product_part[e].$state?this.product_part.splice(e,1):this.product_part[e].$state="d",this.getPartsForShow()}getPartsForShow(){const e=[];console.log(JSON.parse(JSON.stringify(this.product_part))),this.product_part.forEach((t,n)=>{"d"!==t.$state&&(console.log("index",n),e.push(Object.assign(Object.assign({},t),{index:n})))}),console.log(e,"list"),this.product_part_for_show=e}partInputChange(e){this.product_part[e.index]=Object.assign({},e),console.log(this.product_part)}getBase64(e){return new Promise((t,n)=>{const i=new FileReader;i.readAsDataURL(e),i.onload=()=>t(i.result),i.onerror=e=>n(e)})}}return e.\u0275fac=function(t){return new(t||e)(a.\u0275\u0275directiveInject(l.FormBuilder),a.\u0275\u0275directiveInject(d.U),a.\u0275\u0275directiveInject(Wn),a.\u0275\u0275directiveInject(s.DwMessageService),a.\u0275\u0275directiveInject(i.DatePipe),a.\u0275\u0275directiveInject(c.DwModalRef))},e.\u0275cmp=a.\u0275\u0275defineComponent({type:e,selectors:[["app-product-equipment-modify"]],inputs:{isIntegrated:"isIntegrated",cmd:"cmd",expiryDate:"expiryDate",deliveryDate:"deliveryDate",orderDetail:"orderDetail"},features:[a.\u0275\u0275ProvidersFeature([Wn])],decls:95,vars:74,consts:[["dw-form","",3,"formGroup"],[1,"lessons-list"],[1,"sub-title",2,"margin-top","0","margin-left","0"],["dw-row","","dwGutter","8"],["dw-col","","dwSpan","10"],["dwRequired","",3,"dwSm","dwXs"],[3,"dwSm","dwXs"],["dw-input","","required","","formControlName","code","maxlength","40",3,"readonly"],["dw-input","","required","","formControlName","name","maxlength","60",3,"readonly"],["dw-input","","formControlName","sn","maxlength","255",3,"readonly","change"],["formControlName","quantity","required","",2,"width","100%",3,"dwMin","dwPrecision","dwDisabled"],["formControlName","item_group_id","required","",2,"width","100%",3,"ngModelChange"],[3,"dwLabel","dwValue",4,"ngFor","ngForOf"],["dw-input","","formControlName","remark","maxlength","100","placeholder","100\u5b57\u4ee5\u5185"],["dw-col","","dwSpan","12"],["rowspan","4"],[1,"clearfix",2,"min-height","117.5px"],["dwAction","https://www.mocky.io/v2/5cc8019d300000980a055e76","dwListType","picture-card",3,"dwFileList","dwShowButton","dwPreview","dwBeforeUpload","dwAccept","dwShowUploadList","dwFileListChange","dwChange"],["dw-icon","","dwType","plus"],[1,"ant-upload-text"],[3,"dwVisible","dwContent","dwFooter","dwOnCancel"],["modalContent",""],["dw-input","","formControlName","model","maxlength","255"],["dw-input","","formControlName","specification","maxlength","255"],[1,"sub-title",2,"margin-left","0"],[2,"padding-left","20px"],["dw-row","",1,"dw-f-btn-bar-action",2,"padding-bottom","16px"],["dw-col",""],["dw-button","","type","button",3,"dwType","click"],["translate",""],["dwTableId","crs-equipment-part-modify-list",3,"dwData","dwScroll"],["dwTablePart",""],["dw-tr","","dwDropColumns",""],["dw-th","","dwDragDrop","","dwWidth","140px",4,"dwColumnId"],["dw-th","","dwWidth","100px","dwDragDrop","",4,"dwColumnId"],["dw-th","","dwWidth","110px","dwDragDrop","",4,"dwColumnId"],["dw-th","","dwWidth","80px","dwDragDrop","",4,"dwColumnId"],["dw-th","","dwWidth","120px","dwDragDrop","",4,"dwColumnId"],["dw-th","","dwWidth","60px","dwRight","","class","align-center","dwDragDrop","",4,"dwColumnId"],[4,"ngFor","ngForOf"],[1,"customize-footer","ant-modal-footer",2,"padding-bottom","0","padding-right","0"],["dw-button","",3,"dwType","disabled","click"],[3,"dwLabel","dwValue"],["alt","\u7167\u7247",3,"src","ngStyle"],["dw-th","","dwDragDrop","","dwWidth","140px"],["dw-th","","dwWidth","100px","dwDragDrop",""],["dw-th","","dwWidth","110px","dwDragDrop",""],["dw-th","","dwWidth","80px","dwDragDrop",""],["dw-th","","dwWidth","120px","dwDragDrop",""],["dw-th","","dwWidth","60px","dwRight","","dwDragDrop","",1,"align-center"],["dw-tbody-tr","","dwReorderColumns",""],[4,"dwColumnId"],["dwRight","","class","align-center",4,"dwColumnId"],["dw-tooltip","","dwTooltipTitle","\u6613\u635f\u4ef6","class","quickPart",4,"ngIf"],["dw-tooltip","","dwTooltipTitle","\u6613\u635f\u4ef6",1,"quickPart"],[1,"point"],["dw-input","","maxlength","255",3,"ngModel","ngModelChange","change",4,"ngIf"],["dw-input","","maxlength","255",3,"ngModel","ngModelChange","change"],[4,"ngIf"],["style","width: 100%;",3,"ngModel","dwMin","ngModelChange",4,"ngIf"],[2,"width","100%",3,"ngModel","dwMin","ngModelChange"],[3,"ngModel","ngModelChange"],["dw-input","","maxlength","20",3,"ngModel","ngModelChange","change"],["dwRight","",1,"align-center"],[1,"action-grid"],["title","\u5220\u9664"],["dw-popconfirm","",3,"dwPopconfirmTitle","dwOkText","dwCancelText","dwPopconfirmPlacement","dwOnConfirm"],["dw-popconfirm","","translate",""],["src","../../../../../../assets/img/icon_delete.png","alt","\u5220\u9664",1,"action-icon"],["src","../../../../../../assets/img/icon_delete_hover.png","alt","\u5220\u9664",1,"action-icon"]],template:function(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"dw-content"),a.\u0275\u0275elementStart(1,"form",0),a.\u0275\u0275elementStart(2,"div",1),a.\u0275\u0275elementStart(3,"div",2),a.\u0275\u0275text(4,"\u8bbe\u5907\u4fe1\u606f"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(5,"div",3),a.\u0275\u0275elementStart(6,"div",4),a.\u0275\u0275elementStart(7,"dw-form-item"),a.\u0275\u0275elementStart(8,"dw-form-label",5),a.\u0275\u0275text(9,"\u8bbe\u5907\u7f16\u53f7"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(10,"dw-form-control",6),a.\u0275\u0275element(11,"input",7),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(12,"dw-form-item"),a.\u0275\u0275elementStart(13,"dw-form-label",5),a.\u0275\u0275text(14,"\u8bbe\u5907\u540d\u79f0"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(15,"dw-form-control",6),a.\u0275\u0275element(16,"input",8),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(17,"dw-form-item"),a.\u0275\u0275elementStart(18,"dw-form-label",6),a.\u0275\u0275text(19,"\u5e8f\u5217\u53f7"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(20,"dw-form-control",6),a.\u0275\u0275elementStart(21,"input",9),a.\u0275\u0275listener("change",function(e){return t.onInput(e)}),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(22,"dw-form-item"),a.\u0275\u0275elementStart(23,"dw-form-label",5),a.\u0275\u0275text(24,"\u6570\u91cf"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(25,"dw-form-control",6),a.\u0275\u0275element(26,"dw-input-number",10),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(27,"dw-form-item"),a.\u0275\u0275elementStart(28,"dw-form-label",5),a.\u0275\u0275text(29,"\u4ea7\u54c1\u5206\u7c7b"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(30,"dw-form-control",6),a.\u0275\u0275elementStart(31,"dw-select",11),a.\u0275\u0275listener("ngModelChange",function(e){return t.itemGroupChange(e)}),a.\u0275\u0275template(32,Yn,1,2,"dw-option",12),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(33,"dw-form-item"),a.\u0275\u0275elementStart(34,"dw-form-label",6),a.\u0275\u0275text(35,"\u5907\u6ce8"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(36,"dw-form-control",6),a.\u0275\u0275element(37,"input",13),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(38,"div",14),a.\u0275\u0275elementStart(39,"dw-form-item",15),a.\u0275\u0275elementStart(40,"dw-form-label",6),a.\u0275\u0275text(41,"\u7167\u7247"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(42,"dw-form-control",6),a.\u0275\u0275elementStart(43,"div",16),a.\u0275\u0275elementStart(44,"dw-upload",17),a.\u0275\u0275listener("dwFileListChange",function(e){return t.fileList=e})("dwChange",function(e){return t.handleChange(e)}),a.\u0275\u0275element(45,"em",18),a.\u0275\u0275elementStart(46,"div",19),a.\u0275\u0275text(47,"Upload"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(48,"dw-modal",20),a.\u0275\u0275listener("dwOnCancel",function(){return t.previewVisible=!1}),a.\u0275\u0275template(49,ti,1,3,"ng-template",null,21,a.\u0275\u0275templateRefExtractor),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(51,"dw-form-item"),a.\u0275\u0275elementStart(52,"dw-form-label",6),a.\u0275\u0275text(53,"\u578b\u53f7"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(54,"dw-form-control",6),a.\u0275\u0275element(55,"input",22),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(56,"dw-form-item"),a.\u0275\u0275elementStart(57,"dw-form-label",6),a.\u0275\u0275text(58,"\u89c4\u683c"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(59,"dw-form-control",6),a.\u0275\u0275element(60,"input",23),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(61,"div",24),a.\u0275\u0275text(62,"\u914d\u4ef6\u4fe1\u606f"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(63,"div",25),a.\u0275\u0275elementStart(64,"div",26),a.\u0275\u0275elementStart(65,"div",27),a.\u0275\u0275elementStart(66,"button",28),a.\u0275\u0275listener("click",function(e){return t.openProductDataWin(e,"material_id")}),a.\u0275\u0275element(67,"em",18),a.\u0275\u0275elementStart(68,"span",29),a.\u0275\u0275text(69,"\u6dfb\u52a0"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(70,"dw-table",30,31),a.\u0275\u0275elementStart(72,"thead"),a.\u0275\u0275elementStart(73,"tr",32),a.\u0275\u0275template(74,ni,3,0,"th",33),a.\u0275\u0275template(75,ii,3,0,"th",34),a.\u0275\u0275template(76,ri,3,0,"th",34),a.\u0275\u0275template(77,ai,3,0,"th",34),a.\u0275\u0275template(78,oi,3,0,"th",35),a.\u0275\u0275template(79,li,3,0,"th",36),a.\u0275\u0275template(80,di,3,0,"th",34),a.\u0275\u0275template(81,si,3,0,"th",34),a.\u0275\u0275template(82,ci,3,0,"th",33),a.\u0275\u0275template(83,mi,3,0,"th",33),a.\u0275\u0275template(84,pi,3,0,"th",37),a.\u0275\u0275template(85,ui,3,0,"th",38),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(86,"tbody"),a.\u0275\u0275template(87,Pi,14,12,"ng-container",39),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(88,"div",40),a.\u0275\u0275elementStart(89,"button",41),a.\u0275\u0275listener("click",function(){return t.emitDataOutside()}),a.\u0275\u0275elementStart(90,"span",29),a.\u0275\u0275text(91,"\u786e\u5b9a"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(92,"button",28),a.\u0275\u0275listener("click",function(e){return t.handleCancel(e)}),a.\u0275\u0275elementStart(93,"span",29),a.\u0275\u0275text(94,"\u53d6\u6d88"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd()),2&e){const e=a.\u0275\u0275reference(50),n=a.\u0275\u0275reference(71);a.\u0275\u0275advance(1),a.\u0275\u0275property("formGroup",t.form),a.\u0275\u0275advance(7),a.\u0275\u0275property("dwSm",6)("dwXs",24),a.\u0275\u0275advance(2),a.\u0275\u0275property("dwSm",16)("dwXs",24),a.\u0275\u0275advance(1),a.\u0275\u0275property("readonly",!!t.detailEdit.product_equipment_list_id),a.\u0275\u0275advance(2),a.\u0275\u0275property("dwSm",6)("dwXs",24),a.\u0275\u0275advance(2),a.\u0275\u0275property("dwSm",16)("dwXs",24),a.\u0275\u0275advance(1),a.\u0275\u0275property("readonly",t._isIntegrated),a.\u0275\u0275advance(2),a.\u0275\u0275property("dwSm",6)("dwXs",24),a.\u0275\u0275advance(2),a.\u0275\u0275property("dwSm",16)("dwXs",24),a.\u0275\u0275advance(1),a.\u0275\u0275property("readonly",!!t.detailEdit.product_equipment_list_id),a.\u0275\u0275advance(2),a.\u0275\u0275property("dwSm",6)("dwXs",24),a.\u0275\u0275advance(2),a.\u0275\u0275property("dwSm",16)("dwXs",24),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwMin",1)("dwPrecision",0)("dwDisabled",!!t.form.get("sn").value),a.\u0275\u0275advance(2),a.\u0275\u0275property("dwSm",6)("dwXs",24),a.\u0275\u0275advance(2),a.\u0275\u0275property("dwSm",16)("dwXs",24),a.\u0275\u0275advance(2),a.\u0275\u0275property("ngForOf",t.itemGroupList),a.\u0275\u0275advance(2),a.\u0275\u0275property("dwSm",6)("dwXs",24),a.\u0275\u0275advance(2),a.\u0275\u0275property("dwSm",16)("dwXs",24),a.\u0275\u0275advance(4),a.\u0275\u0275property("dwSm",6)("dwXs",24),a.\u0275\u0275advance(2),a.\u0275\u0275property("dwSm",16)("dwXs",24),a.\u0275\u0275advance(2),a.\u0275\u0275property("dwFileList",t.fileList)("dwShowButton",t.fileList.length<1)("dwPreview",t.handlePreview)("dwBeforeUpload",t.beforeUpload)("dwAccept",".png,.jpg")("dwShowUploadList",a.\u0275\u0275pureFunction0(72,ki)),a.\u0275\u0275advance(4),a.\u0275\u0275property("dwVisible",t.previewVisible)("dwContent",e)("dwFooter",null),a.\u0275\u0275advance(4),a.\u0275\u0275property("dwSm",6)("dwXs",24),a.\u0275\u0275advance(2),a.\u0275\u0275property("dwSm",16)("dwXs",24),a.\u0275\u0275advance(3),a.\u0275\u0275property("dwSm",6)("dwXs",24),a.\u0275\u0275advance(2),a.\u0275\u0275property("dwSm",16)("dwXs",24),a.\u0275\u0275advance(7),a.\u0275\u0275property("dwType","default"),a.\u0275\u0275advance(4),a.\u0275\u0275property("dwData",t.product_part_for_show)("dwScroll",a.\u0275\u0275pureFunction0(73,Fi)),a.\u0275\u0275advance(4),a.\u0275\u0275property("dwColumnId","material_code"),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","material_name"),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","specification"),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","model"),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","sn"),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","unit"),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","unit_qty"),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","item_group_name"),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","expiry_date"),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","replacement_date"),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","remark"),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","operation"),a.\u0275\u0275advance(2),a.\u0275\u0275property("ngForOf",n.data),a.\u0275\u0275advance(2),a.\u0275\u0275property("dwType","primary")("disabled",!t.form.valid),a.\u0275\u0275advance(3),a.\u0275\u0275property("dwType","default")}},directives:[Q.DwContentComponent,l.\u0275NgNoValidate,l.NgControlStatusGroup,N.DwFormDirective,l.FormGroupDirective,A.DwRowDirective,A.DwColDirective,N.DwFormItemComponent,N.DwFormLabelComponent,N.DwFormControlComponent,z.DwInputDirective,l.DefaultValueAccessor,l.RequiredValidator,l.NgControlStatus,l.FormControlName,l.MaxLengthValidator,Kn.DwInputNumberComponent,$.DwSelectComponent,i.NgForOf,Jn.DwUploadComponent,K.u,B.DwIconDirective,c.DwModalComponent,j.DwButtonComponent,J.uG,b.TranslateDirective,_.DwTableComponent,y.Ct,_.DwTheadComponent,_.DwTrDirective,y.Y9,y.b,_.DwTbodyComponent,$.DwOptionComponent,i.NgStyle,_.DwTableCellDirective,_.DwThMeasureDirective,y.BL,y.$2,_.DwCellFixedDirective,y.at,i.NgIf,Zn.DwTooltipDirective,l.NgModel,W.DwDatePickerComponent,Se.DwPopconfirmDirective],pipes:[i.DatePipe,b.TranslatePipe],styles:[".quickPart[_ngcontent-%COMP%]   .point[_ngcontent-%COMP%]{display:inline-block;width:6px;height:6px;border-radius:3px;background-color:#ffbe68;margin-bottom:3px}"]}),e})();var Ti=n(16511),Li=n(80419),Ri=n(78169),Ai=n(45907);function Ni(e,t){1&e&&(a.\u0275\u0275elementStart(0,"span",10),a.\u0275\u0275text(1,"\u65b0\u5efa\u4ea7\u54c1\u6863\u6848"),a.\u0275\u0275elementEnd())}function $i(e,t){1&e&&(a.\u0275\u0275elementStart(0,"span",10),a.\u0275\u0275text(1,"\u4fee\u6539\u4ea7\u54c1\u6863\u6848"),a.\u0275\u0275elementEnd())}function ji(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"dw-form-item"),a.\u0275\u0275elementStart(1,"dw-form-label",32),a.\u0275\u0275text(2,"\u7f16\u7801"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(3,"dw-form-control",33),a.\u0275\u0275element(4,"input",34),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd()),2&e){const e=a.\u0275\u0275nextContext(2);a.\u0275\u0275advance(1),a.\u0275\u0275property("dwSm",6)("dwXs",24),a.\u0275\u0275advance(2),a.\u0275\u0275property("dwSm",16)("dwXs",24),a.\u0275\u0275advance(1),a.\u0275\u0275property("readonly",!!e.id)}}function zi(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"dw-form-item"),a.\u0275\u0275elementStart(1,"dw-form-label",32),a.\u0275\u0275text(2,"\u540d\u79f0"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(3,"dw-form-control",33),a.\u0275\u0275element(4,"input",35),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd()),2&e){const e=a.\u0275\u0275nextContext(2);a.\u0275\u0275advance(1),a.\u0275\u0275property("dwSm",6)("dwXs",24),a.\u0275\u0275advance(2),a.\u0275\u0275property("dwSm",16)("dwXs",24),a.\u0275\u0275advance(1),a.\u0275\u0275property("readonly",e.isIntegrated)}}function Bi(e,t){if(1&e&&a.\u0275\u0275element(0,"dw-option",38),2&e){const e=t.$implicit;a.\u0275\u0275property("dwLabel",e.item_group_name)("dwValue",e.item_group_id)}}function qi(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"dw-form-item"),a.\u0275\u0275elementStart(1,"dw-form-label",32),a.\u0275\u0275text(2,"\u4ea7\u54c1\u5206\u7c7b"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(3,"dw-form-control",33),a.\u0275\u0275elementStart(4,"dw-select",36),a.\u0275\u0275template(5,Bi,1,2,"dw-option",37),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd()),2&e){const e=a.\u0275\u0275nextContext(2);a.\u0275\u0275advance(1),a.\u0275\u0275property("dwSm",6)("dwXs",24),a.\u0275\u0275advance(2),a.\u0275\u0275property("dwSm",16)("dwXs",24),a.\u0275\u0275advance(2),a.\u0275\u0275property("ngForOf",e.itemGroupList)}}function Wi(e,t){1&e&&(a.\u0275\u0275elementStart(0,"dw-form-item"),a.\u0275\u0275elementStart(1,"dw-form-label",33),a.\u0275\u0275text(2,"\u578b\u53f7"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(3,"dw-form-control",33),a.\u0275\u0275element(4,"input",39),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd()),2&e&&(a.\u0275\u0275advance(1),a.\u0275\u0275property("dwSm",6)("dwXs",24),a.\u0275\u0275advance(2),a.\u0275\u0275property("dwSm",16)("dwXs",24))}function Gi(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"dw-form-item"),a.\u0275\u0275elementStart(1,"dw-form-label",33),a.\u0275\u0275text(2,"\u89c4\u683c"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(3,"dw-form-control",33),a.\u0275\u0275element(4,"input",40),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd()),2&e){const e=a.\u0275\u0275nextContext(2);a.\u0275\u0275advance(1),a.\u0275\u0275property("dwSm",6)("dwXs",24),a.\u0275\u0275advance(2),a.\u0275\u0275property("dwSm",16)("dwXs",24),a.\u0275\u0275advance(1),a.\u0275\u0275property("readonly",e.isIntegrated)}}function Ui(e,t){1&e&&(a.\u0275\u0275elementStart(0,"dw-form-label",32),a.\u0275\u0275text(1,"\u5e8f\u5217\u53f7"),a.\u0275\u0275elementEnd()),2&e&&a.\u0275\u0275property("dwSm",6)("dwXs",24)}function Hi(e,t){1&e&&(a.\u0275\u0275elementStart(0,"dw-form-label",32),a.\u0275\u0275text(1,"\u9879\u76ee\u53f7"),a.\u0275\u0275elementEnd()),2&e&&a.\u0275\u0275property("dwSm",6)("dwXs",24)}function Xi(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"dw-form-item"),a.\u0275\u0275template(1,Ui,2,2,"dw-form-label",41),a.\u0275\u0275template(2,Hi,2,2,"dw-form-label",41),a.\u0275\u0275elementStart(3,"dw-form-control",33),a.\u0275\u0275element(4,"input",42),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd()),2&e){const e=a.\u0275\u0275nextContext(2);a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf","1"===e.file_type),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf","2"===e.file_type),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwSm",16)("dwXs",24),a.\u0275\u0275advance(1),a.\u0275\u0275property("readonly",!!e.id)}}function Qi(e,t){if(1&e){const e=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"button",46),a.\u0275\u0275listener("click",function(t){return a.\u0275\u0275restoreView(e),a.\u0275\u0275nextContext(3).openProductDataWin(t,"customer_id")}),a.\u0275\u0275element(1,"em",47),a.\u0275\u0275elementEnd()}if(2&e){const e=a.\u0275\u0275nextContext(3);a.\u0275\u0275property("disabled",!!e.id)}}function Ki(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"dw-form-item"),a.\u0275\u0275elementStart(1,"dw-form-label",32),a.\u0275\u0275text(2,"\u5ba2\u6237"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(3,"dw-form-control",33),a.\u0275\u0275elementStart(4,"dw-input-group",43),a.\u0275\u0275element(5,"input",44),a.\u0275\u0275elementEnd(),a.\u0275\u0275template(6,Qi,2,1,"ng-template",null,45,a.\u0275\u0275templateRefExtractor),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd()),2&e){const e=a.\u0275\u0275reference(7);a.\u0275\u0275advance(1),a.\u0275\u0275property("dwSm",6)("dwXs",24),a.\u0275\u0275advance(2),a.\u0275\u0275property("dwSm",16)("dwXs",24),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwSuffix",e)}}function Ji(e,t){1&e&&(a.\u0275\u0275elementStart(0,"dw-form-item"),a.\u0275\u0275elementStart(1,"dw-form-label",33),a.\u0275\u0275text(2,"\u51fa\u5382\u5ba2\u6237"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(3,"dw-form-control",33),a.\u0275\u0275element(4,"input",48),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd()),2&e&&(a.\u0275\u0275advance(1),a.\u0275\u0275property("dwSm",6)("dwXs",24),a.\u0275\u0275advance(2),a.\u0275\u0275property("dwSm",16)("dwXs",24))}function Zi(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"dw-form-item"),a.\u0275\u0275elementStart(1,"dw-form-label",33),a.\u0275\u0275text(2,"\u4f7f\u7528\u5730\u70b9"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(3,"dw-form-control",33),a.\u0275\u0275element(4,"input",49),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd()),2&e){const e=a.\u0275\u0275nextContext(2);a.\u0275\u0275advance(1),a.\u0275\u0275property("dwSm",6)("dwXs",24),a.\u0275\u0275advance(2),a.\u0275\u0275property("dwSm",16)("dwXs",24),a.\u0275\u0275advance(1),a.\u0275\u0275property("readonly",e.isIntegrated)}}function Yi(e,t){if(1&e){const e=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"em",54),a.\u0275\u0275listener("click",function(){return a.\u0275\u0275restoreView(e),a.\u0275\u0275nextContext(4).clear("service_site_")}),a.\u0275\u0275elementEnd()}}function er(e,t){if(1&e){const e=a.\u0275\u0275getCurrentView();a.\u0275\u0275template(0,Yi,1,0,"em",52),a.\u0275\u0275elementStart(1,"button",53),a.\u0275\u0275listener("click",function(t){return a.\u0275\u0275restoreView(e),a.\u0275\u0275nextContext(3).openProductDataWin(t,"service_site_name")}),a.\u0275\u0275element(2,"em",47),a.\u0275\u0275elementEnd()}if(2&e){const e=a.\u0275\u0275nextContext(3);a.\u0275\u0275property("ngIf",e.product_file.controls[0].controls.service_site_name.value)}}function tr(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"dw-form-item"),a.\u0275\u0275elementStart(1,"dw-form-label",33),a.\u0275\u0275text(2,"\u670d\u52a1\u7ad9\u70b9"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(3,"dw-form-control",33),a.\u0275\u0275elementStart(4,"dw-input-group",43),a.\u0275\u0275element(5,"input",50),a.\u0275\u0275elementEnd(),a.\u0275\u0275template(6,er,3,1,"ng-template",null,51,a.\u0275\u0275templateRefExtractor),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd()),2&e){const e=a.\u0275\u0275reference(7);a.\u0275\u0275advance(1),a.\u0275\u0275property("dwSm",6)("dwXs",24),a.\u0275\u0275advance(2),a.\u0275\u0275property("dwSm",16)("dwXs",24),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwSuffix",e)}}function nr(e,t){if(1&e){const e=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"em",54),a.\u0275\u0275listener("click",function(){return a.\u0275\u0275restoreView(e),a.\u0275\u0275nextContext(4).clear("employee_")}),a.\u0275\u0275elementEnd()}}function ir(e,t){if(1&e){const e=a.\u0275\u0275getCurrentView();a.\u0275\u0275template(0,nr,1,0,"em",52),a.\u0275\u0275elementStart(1,"button",53),a.\u0275\u0275listener("click",function(t){return a.\u0275\u0275restoreView(e),a.\u0275\u0275nextContext(3).openProductDataWin(t,"employee_id")}),a.\u0275\u0275element(2,"em",47),a.\u0275\u0275elementEnd()}if(2&e){const e=a.\u0275\u0275nextContext(3);a.\u0275\u0275property("ngIf",e.product_file.controls[0].controls.employee_name.value)}}function rr(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"dw-form-item"),a.\u0275\u0275elementStart(1,"dw-form-label",33),a.\u0275\u0275text(2,"\u670d\u52a1\u4eba\u5458"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(3,"dw-form-control",33),a.\u0275\u0275elementStart(4,"dw-input-group",43),a.\u0275\u0275element(5,"input",55),a.\u0275\u0275elementEnd(),a.\u0275\u0275template(6,ir,3,1,"ng-template",null,56,a.\u0275\u0275templateRefExtractor),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd()),2&e){const e=a.\u0275\u0275reference(7);a.\u0275\u0275advance(1),a.\u0275\u0275property("dwSm",6)("dwXs",24),a.\u0275\u0275advance(2),a.\u0275\u0275property("dwSm",16)("dwXs",24),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwSuffix",e)}}function ar(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"dw-form-item"),a.\u0275\u0275elementStart(1,"dw-form-label",32),a.\u0275\u0275text(2,"\u51fa\u5e93\u65e5\u671f"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(3,"dw-form-control",33),a.\u0275\u0275element(4,"dw-date-picker",57),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd()),2&e){const e=a.\u0275\u0275nextContext(2);a.\u0275\u0275advance(1),a.\u0275\u0275property("dwSm",6)("dwXs",24),a.\u0275\u0275advance(2),a.\u0275\u0275property("dwSm",16)("dwXs",24),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwDisabled",e.isIntegrated)}}function or(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"dw-form-item"),a.\u0275\u0275elementStart(1,"dw-form-label",33),a.\u0275\u0275text(2,"\u5b89\u88c5\u65e5\u671f"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(3,"dw-form-control",33),a.\u0275\u0275element(4,"dw-range-picker",58),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd()),2&e){const e=a.\u0275\u0275nextContext(2);a.\u0275\u0275advance(1),a.\u0275\u0275property("dwSm",6)("dwXs",24),a.\u0275\u0275advance(2),a.\u0275\u0275property("dwSm",16)("dwXs",24),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwDisabledDate",e.disabledDate)}}function lr(e,t){1&e&&(a.\u0275\u0275elementStart(0,"dw-form-item"),a.\u0275\u0275elementStart(1,"dw-form-label",33),a.\u0275\u0275text(2,"\u8c03\u8bd5\u4eba\u5458"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(3,"dw-form-control",33),a.\u0275\u0275element(4,"input",59),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd()),2&e&&(a.\u0275\u0275advance(1),a.\u0275\u0275property("dwSm",6)("dwXs",24),a.\u0275\u0275advance(2),a.\u0275\u0275property("dwSm",16)("dwXs",24))}function dr(e,t){1&e&&(a.\u0275\u0275elementStart(0,"dw-form-item"),a.\u0275\u0275elementStart(1,"dw-form-label",33),a.\u0275\u0275text(2,"\u5907\u6ce8"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(3,"dw-form-control",33),a.\u0275\u0275element(4,"input",60),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd()),2&e&&(a.\u0275\u0275advance(1),a.\u0275\u0275property("dwSm",6)("dwXs",24),a.\u0275\u0275advance(2),a.\u0275\u0275property("dwSm",16)("dwXs",24))}function sr(e,t){if(1&e&&(a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275template(1,dr,5,4,"dw-form-item",17),a.\u0275\u0275elementContainerEnd()),2&e){const e=a.\u0275\u0275nextContext(2);a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",e.formConfigList.indexOf("remark")>=0)}}function cr(e,t){if(1&e){const e=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"div",69),a.\u0275\u0275elementStart(1,"div",70),a.\u0275\u0275element(2,"em",71),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(3,"div",72),a.\u0275\u0275text(4),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(5,"div",73),a.\u0275\u0275listener("click",function(){a.\u0275\u0275restoreView(e);const t=a.\u0275\u0275nextContext().index;return a.\u0275\u0275nextContext(3).deleteFile(t)}),a.\u0275\u0275element(6,"em",74),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd()}if(2&e){const e=a.\u0275\u0275nextContext().$implicit;a.\u0275\u0275advance(4),a.\u0275\u0275textInterpolate(e.name)}}function mr(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"div"),a.\u0275\u0275template(1,cr,7,1,"div",68),a.\u0275\u0275elementEnd()),2&e){const e=t.$implicit;a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf","D"!==e.state)}}function pr(e,t){if(1&e){const e=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"dw-form-item"),a.\u0275\u0275elementStart(1,"dw-form-label",33),a.\u0275\u0275text(2,"\u9644\u4ef6"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(3,"dw-form-control",33),a.\u0275\u0275elementStart(4,"div",61),a.\u0275\u0275elementStart(5,"div",62),a.\u0275\u0275elementStart(6,"dw-upload",63),a.\u0275\u0275listener("dwFileListChange",function(t){return a.\u0275\u0275restoreView(e),a.\u0275\u0275nextContext(2).attachmentsList=t})("dwChange",function(t){return a.\u0275\u0275restoreView(e),a.\u0275\u0275nextContext(2).handleFileChange(t)}),a.\u0275\u0275elementStart(7,"button",64),a.\u0275\u0275element(8,"em",65),a.\u0275\u0275text(9,"\u4e0a\u4f20\u6587\u4ef6"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275template(10,mr,2,1,"div",66),a.\u0275\u0275elementStart(11,"div",67),a.\u0275\u0275text(12,"\u652f\u6301\u6269\u5c55\u540d\uff1a.doc .docx .pdf .xlsx .xls .ppt .pptx .png .jpg"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd()}if(2&e){const e=a.\u0275\u0275nextContext(2);a.\u0275\u0275advance(1),a.\u0275\u0275property("dwSm",6)("dwXs",24),a.\u0275\u0275advance(2),a.\u0275\u0275property("dwSm",16)("dwXs",24),a.\u0275\u0275advance(3),a.\u0275\u0275property("dwFileList",e.attachmentsList)("dwBeforeUpload",e.beforeUploadFiles)("dwShowUploadList",!1)("dwAccept",".doc,.docx,.pdf,.xls,.xlsx,.ppt,.png,.jpg"),a.\u0275\u0275advance(4),a.\u0275\u0275property("ngForOf",e.attachmentsList)}}const ur=function(){return{width:"100%"}};function hr(e,t){if(1&e&&a.\u0275\u0275element(0,"img",82),2&e){const e=a.\u0275\u0275nextContext(3);a.\u0275\u0275property("src",e.previewImage,a.\u0275\u0275sanitizeUrl)("ngStyle",a.\u0275\u0275pureFunction0(2,ur))}}const gr=function(){return{showPreviewIcon:!0}},fr=function(){return{showPreviewIcon:!0,showRemoveIcon:!0}};function wr(e,t){if(1&e){const e=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"dw-form-item",75),a.\u0275\u0275elementStart(1,"dw-form-label",33),a.\u0275\u0275text(2,"\u4ea7\u54c1\u6863\u6848\u7167\u7247"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(3,"dw-form-control",33),a.\u0275\u0275elementStart(4,"div",76),a.\u0275\u0275elementStart(5,"dw-upload",77),a.\u0275\u0275listener("dwFileListChange",function(t){return a.\u0275\u0275restoreView(e),a.\u0275\u0275nextContext(2).fileList=t})("dwChange",function(t){return a.\u0275\u0275restoreView(e),a.\u0275\u0275nextContext(2).handleChange(t)}),a.\u0275\u0275element(6,"em",78),a.\u0275\u0275elementStart(7,"div",79),a.\u0275\u0275text(8,"Upload"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(9,"dw-modal",80),a.\u0275\u0275listener("dwOnCancel",function(){return a.\u0275\u0275restoreView(e),a.\u0275\u0275nextContext(2).previewVisible=!1}),a.\u0275\u0275template(10,hr,1,3,"ng-template",null,81,a.\u0275\u0275templateRefExtractor),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd()}if(2&e){const e=a.\u0275\u0275reference(11),t=a.\u0275\u0275nextContext(2);a.\u0275\u0275advance(1),a.\u0275\u0275property("dwSm",6)("dwXs",24),a.\u0275\u0275advance(2),a.\u0275\u0275property("dwSm",16)("dwXs",24),a.\u0275\u0275advance(2),a.\u0275\u0275property("dwFileList",t.fileList)("dwShowButton",t.fileList.length<1&&(!t.isIntegrated||!t.id))("dwPreview",t.handlePreview)("dwBeforeUpload",t.beforeUpload)("dwAccept",".png,.jpg")("dwShowUploadList",t.isIntegrated&&t.id?a.\u0275\u0275pureFunction0(13,gr):a.\u0275\u0275pureFunction0(14,fr)),a.\u0275\u0275advance(4),a.\u0275\u0275property("dwVisible",t.previewVisible)("dwContent",e)("dwFooter",null)}}function vr(e,t){1&e&&(a.\u0275\u0275elementStart(0,"dw-form-item",83),a.\u0275\u0275elementStart(1,"dw-form-label",33),a.\u0275\u0275text(2,"0"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(3,"dw-form-control",33),a.\u0275\u0275element(4,"input",84),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd()),2&e&&(a.\u0275\u0275advance(1),a.\u0275\u0275property("dwSm",6)("dwXs",24),a.\u0275\u0275advance(2),a.\u0275\u0275property("dwSm",16)("dwXs",24))}function xr(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"dw-form-item"),a.\u0275\u0275elementStart(1,"dw-form-label",33),a.\u0275\u0275text(2,"\u63cf\u8ff0"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(3,"dw-form-control",33),a.\u0275\u0275element(4,"textarea",85),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd()),2&e){const e=a.\u0275\u0275nextContext(2);a.\u0275\u0275advance(1),a.\u0275\u0275property("dwSm",6)("dwXs",24),a.\u0275\u0275advance(2),a.\u0275\u0275property("dwSm",18)("dwXs",24),a.\u0275\u0275advance(1),a.\u0275\u0275property("readonly",e.isIntegrated)}}function Cr(e,t){1&e&&(a.\u0275\u0275elementStart(0,"dw-form-item",83),a.\u0275\u0275elementStart(1,"dw-form-label",33),a.\u0275\u0275text(2,"0"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(3,"dw-form-control",33),a.\u0275\u0275element(4,"input",86),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd()),2&e&&(a.\u0275\u0275advance(1),a.\u0275\u0275property("dwSm",6)("dwXs",24),a.\u0275\u0275advance(2),a.\u0275\u0275property("dwSm",14)("dwXs",24))}function _r(e,t){1&e&&(a.\u0275\u0275elementStart(0,"dw-form-item"),a.\u0275\u0275elementStart(1,"dw-form-label",32),a.\u0275\u0275text(2,"\u4fdd\u4fee\u622a\u6b62\u65e5\u671f"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(3,"dw-form-control",33),a.\u0275\u0275element(4,"dw-date-picker",87),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd()),2&e&&(a.\u0275\u0275advance(1),a.\u0275\u0275property("dwSm",6)("dwXs",24),a.\u0275\u0275advance(2),a.\u0275\u0275property("dwSm",13)("dwXs",24))}function yr(e,t){1&e&&(a.\u0275\u0275elementStart(0,"dw-form-item"),a.\u0275\u0275elementStart(1,"dw-form-label",33),a.\u0275\u0275text(2,"\u9a8c\u6536\u65e5\u671f"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(3,"dw-form-control",33),a.\u0275\u0275element(4,"dw-date-picker",88),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd()),2&e&&(a.\u0275\u0275advance(1),a.\u0275\u0275property("dwSm",6)("dwXs",24),a.\u0275\u0275advance(2),a.\u0275\u0275property("dwSm",13)("dwXs",24))}function Sr(e,t){1&e&&(a.\u0275\u0275elementStart(0,"dw-form-item"),a.\u0275\u0275elementStart(1,"dw-form-label",33),a.\u0275\u0275text(2,"\u9a8c\u6536\u4eba\u5458"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(3,"dw-form-control",33),a.\u0275\u0275element(4,"input",89),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd()),2&e&&(a.\u0275\u0275advance(1),a.\u0275\u0275property("dwSm",6)("dwXs",24),a.\u0275\u0275advance(2),a.\u0275\u0275property("dwSm",13)("dwXs",24))}function br(e,t){1&e&&(a.\u0275\u0275elementStart(0,"dw-form-item"),a.\u0275\u0275elementStart(1,"dw-form-label",33),a.\u0275\u0275text(2,"\u7ef4\u4fee\u6b21\u6570"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(3,"dw-form-control",33),a.\u0275\u0275element(4,"input",90),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd()),2&e&&(a.\u0275\u0275advance(1),a.\u0275\u0275property("dwSm",6)("dwXs",24),a.\u0275\u0275advance(2),a.\u0275\u0275property("dwSm",13)("dwXs",24))}function Ir(e,t){if(1&e&&(a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275template(1,br,5,4,"dw-form-item",17),a.\u0275\u0275elementContainerEnd()),2&e){const e=a.\u0275\u0275nextContext(2);a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",e.formConfigList.indexOf("maintenance_count")>=0)}}function Er(e,t){1&e&&(a.\u0275\u0275elementStart(0,"dw-form-item"),a.\u0275\u0275elementStart(1,"dw-form-label",33),a.\u0275\u0275text(2,"\u5907\u6ce8"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(3,"dw-form-control",33),a.\u0275\u0275element(4,"input",60),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd()),2&e&&(a.\u0275\u0275advance(1),a.\u0275\u0275property("dwSm",6)("dwXs",24),a.\u0275\u0275advance(2),a.\u0275\u0275property("dwSm",13)("dwXs",24))}function Dr(e,t){if(1&e&&(a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275template(1,Er,5,4,"dw-form-item",17),a.\u0275\u0275elementContainerEnd()),2&e){const e=a.\u0275\u0275nextContext(2);a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",e.formConfigList.indexOf("remark")>=0)}}function Or(e,t){1&e&&(a.\u0275\u0275elementStart(0,"div",91),a.\u0275\u0275elementStart(1,"label",92),a.\u0275\u0275text(2," \u7ef4\u62a4\u4fdd\u517b "),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd())}function Mr(e,t){1&e&&(a.\u0275\u0275elementStart(0,"div",16),a.\u0275\u0275element(1,"dw-form-item"),a.\u0275\u0275elementStart(2,"dw-form-item"),a.\u0275\u0275elementStart(3,"dw-form-label",97),a.\u0275\u0275text(4,"\u6700\u8fd1\u7ef4\u62a4\u65e5\u671f"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(5,"dw-form-control",97),a.\u0275\u0275element(6,"dw-date-picker",104),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(7,"dw-form-item"),a.\u0275\u0275elementStart(8,"dw-form-label",96),a.\u0275\u0275text(9,"\u4e0b\u6b21\u7ef4\u62a4\u65e5\u671f"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(10,"dw-form-control",97),a.\u0275\u0275element(11,"dw-date-picker",105),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd()),2&e&&(a.\u0275\u0275advance(3),a.\u0275\u0275property("dwSpan",9),a.\u0275\u0275advance(2),a.\u0275\u0275property("dwSpan",14),a.\u0275\u0275advance(3),a.\u0275\u0275property("dwSpan",9),a.\u0275\u0275advance(2),a.\u0275\u0275property("dwSpan",14))}function Pr(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"div",95),a.\u0275\u0275elementStart(1,"div",16),a.\u0275\u0275element(2,"dw-form-item"),a.\u0275\u0275elementStart(3,"dw-form-item"),a.\u0275\u0275elementStart(4,"dw-form-label",96),a.\u0275\u0275text(5,"\u7ef4\u62a4\u5f00\u59cb\u65e5\u671f"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(6,"dw-form-control",97),a.\u0275\u0275element(7,"dw-date-picker",98),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(8,"dw-form-item"),a.\u0275\u0275elementStart(9,"dw-form-label",96),a.\u0275\u0275text(10,"\u7ef4\u62a4\u5468\u671f"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(11,"div",99),a.\u0275\u0275elementStart(12,"dw-form-control",97),a.\u0275\u0275elementStart(13,"div",100),a.\u0275\u0275element(14,"input",101),a.\u0275\u0275elementStart(15,"span",102),a.\u0275\u0275text(16,"\u6708"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275template(17,Mr,12,4,"div",103),a.\u0275\u0275elementEnd()),2&e){const e=a.\u0275\u0275nextContext(3);a.\u0275\u0275advance(4),a.\u0275\u0275property("dwSpan",9),a.\u0275\u0275advance(2),a.\u0275\u0275property("dwSpan",14),a.\u0275\u0275advance(3),a.\u0275\u0275property("dwSpan",9),a.\u0275\u0275advance(2),a.\u0275\u0275property("dwSpan",14),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwSpan",22),a.\u0275\u0275advance(5),a.\u0275\u0275property("ngIf","1"===e.basis_of_maintain)}}function kr(e,t){if(1&e){const e=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"div",95),a.\u0275\u0275elementStart(1,"div",16),a.\u0275\u0275element(2,"dw-form-item"),a.\u0275\u0275elementStart(3,"dw-form-item"),a.\u0275\u0275elementStart(4,"dw-form-label",96),a.\u0275\u0275text(5,"\u6bcf\u6284\u8868\u8fbe"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(6,"div",99),a.\u0275\u0275elementStart(7,"dw-form-control",97),a.\u0275\u0275elementStart(8,"div",100),a.\u0275\u0275element(9,"input",101),a.\u0275\u0275elementStart(10,"span",102),a.\u0275\u0275text(11,"\u9700\u4fdd\u517b"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(12,"dw-form-item"),a.\u0275\u0275elementStart(13,"dw-form-label",97),a.\u0275\u0275text(14,"\u6700\u8fd1\u4fdd\u517b\u6284\u8868\u6570"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(15,"dw-form-control",97),a.\u0275\u0275element(16,"input",106),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(17,"div",16),a.\u0275\u0275element(18,"dw-form-item"),a.\u0275\u0275elementStart(19,"dw-form-item"),a.\u0275\u0275element(20,"dw-form-label",97),a.\u0275\u0275element(21,"dw-form-control",97),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(22,"dw-form-item"),a.\u0275\u0275elementStart(23,"dw-form-label",97),a.\u0275\u0275text(24,"\u4e0b\u6b21\u4fdd\u517b\u6284\u8868\u6570"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(25,"dw-form-control",97),a.\u0275\u0275elementStart(26,"input",107),a.\u0275\u0275listener("change",function(){return a.\u0275\u0275restoreView(e),a.\u0275\u0275nextContext(3).nextMaintainReadingmeterChange()})("keyup",function(){return a.\u0275\u0275restoreView(e),a.\u0275\u0275nextContext(3).nextMaintainReadingmeterChange()}),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd()}2&e&&(a.\u0275\u0275advance(4),a.\u0275\u0275property("dwSpan",9),a.\u0275\u0275advance(2),a.\u0275\u0275property("dwSpan",14),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwSpan",22),a.\u0275\u0275advance(6),a.\u0275\u0275property("dwSpan",9),a.\u0275\u0275advance(2),a.\u0275\u0275property("dwSpan",14),a.\u0275\u0275advance(5),a.\u0275\u0275property("dwSpan",9),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwSpan",14),a.\u0275\u0275advance(2),a.\u0275\u0275property("dwSpan",9),a.\u0275\u0275advance(2),a.\u0275\u0275property("dwSpan",14))}function Fr(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"div",93),a.\u0275\u0275elementStart(1,"div"),a.\u0275\u0275elementStart(2,"label",92),a.\u0275\u0275text(3," \u7ef4\u62a4\u4fdd\u517b "),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275template(4,Pr,18,6,"div",94),a.\u0275\u0275template(5,kr,27,9,"div",94),a.\u0275\u0275elementEnd()),2&e){const e=a.\u0275\u0275nextContext(2);a.\u0275\u0275advance(4),a.\u0275\u0275property("ngIf","1"===e.basis_of_maintain),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf","2"===e.basis_of_maintain)}}function Vr(e,t){1&e&&(a.\u0275\u0275elementStart(0,"th",119),a.\u0275\u0275elementStart(1,"span",6),a.\u0275\u0275text(2,"\u8bbe\u5907\u7f16\u53f7"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd())}function Tr(e,t){1&e&&(a.\u0275\u0275elementStart(0,"th",120),a.\u0275\u0275elementStart(1,"span",6),a.\u0275\u0275text(2,"\u8bbe\u5907\u540d\u79f0"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd())}function Lr(e,t){1&e&&(a.\u0275\u0275elementStart(0,"th",120),a.\u0275\u0275elementStart(1,"span",6),a.\u0275\u0275text(2,"\u89c4\u683c"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd())}function Rr(e,t){1&e&&(a.\u0275\u0275elementStart(0,"th",120),a.\u0275\u0275elementStart(1,"span",6),a.\u0275\u0275text(2,"\u578b\u53f7"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd())}function Ar(e,t){1&e&&(a.\u0275\u0275elementStart(0,"th",120),a.\u0275\u0275elementStart(1,"span",6),a.\u0275\u0275text(2,"\u5206\u7c7b"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd())}function Nr(e,t){1&e&&(a.\u0275\u0275elementStart(0,"th",120),a.\u0275\u0275elementStart(1,"span",6),a.\u0275\u0275text(2,"\u5e8f\u5217\u53f7"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd())}function $r(e,t){1&e&&(a.\u0275\u0275elementStart(0,"th",120),a.\u0275\u0275elementStart(1,"span",6),a.\u0275\u0275text(2,"\u8bbe\u5907\u56fe\u7247"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd())}function jr(e,t){1&e&&(a.\u0275\u0275elementStart(0,"th",121),a.\u0275\u0275elementStart(1,"span",6),a.\u0275\u0275text(2,"\u6570\u91cf"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd())}function zr(e,t){1&e&&(a.\u0275\u0275elementStart(0,"th",120),a.\u0275\u0275elementStart(1,"span",6),a.\u0275\u0275text(2,"\u5907\u6ce8"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd())}function Br(e,t){1&e&&(a.\u0275\u0275elementStart(0,"th",122),a.\u0275\u0275elementStart(1,"span",6),a.\u0275\u0275text(2,"\u64cd\u4f5c"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd())}function qr(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"td"),a.\u0275\u0275text(1),a.\u0275\u0275elementEnd()),2&e){const e=a.\u0275\u0275nextContext(2).$implicit;a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate1(" ",e.controls.code.value," ")}}function Wr(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"td"),a.\u0275\u0275text(1),a.\u0275\u0275elementEnd()),2&e){const e=a.\u0275\u0275nextContext(2).$implicit;a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate1(" ",e.controls.name.value," ")}}function Gr(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"td"),a.\u0275\u0275text(1),a.\u0275\u0275elementEnd()),2&e){const e=a.\u0275\u0275nextContext(2).$implicit;a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate1(" ",e.controls.specification.value," ")}}function Ur(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"td"),a.\u0275\u0275text(1),a.\u0275\u0275elementEnd()),2&e){const e=a.\u0275\u0275nextContext(2).$implicit;a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate1(" ",e.controls.model.value," ")}}function Hr(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"td"),a.\u0275\u0275text(1),a.\u0275\u0275elementEnd()),2&e){const e=a.\u0275\u0275nextContext(2).$implicit;a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate1(" ",e.controls.item_group_name.value," ")}}function Xr(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"td"),a.\u0275\u0275text(1),a.\u0275\u0275elementEnd()),2&e){const e=a.\u0275\u0275nextContext(2).$implicit;a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate1(" ",e.controls.sn.value," ")}}function Qr(e,t){if(1&e&&a.\u0275\u0275element(0,"img",130),2&e){const e=a.\u0275\u0275nextContext(3).$implicit;a.\u0275\u0275property("src",e.controls.file_context.value,a.\u0275\u0275sanitizeUrl)}}function Kr(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"td"),a.\u0275\u0275template(1,Qr,1,1,"img",129),a.\u0275\u0275elementEnd()),2&e){const e=a.\u0275\u0275nextContext(2).$implicit;a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",e.controls.file_context.value)}}function Jr(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"td",131),a.\u0275\u0275text(1),a.\u0275\u0275elementEnd()),2&e){const e=a.\u0275\u0275nextContext(2).$implicit;a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate1(" ",e.controls.quantity.value," ")}}function Zr(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"td"),a.\u0275\u0275text(1),a.\u0275\u0275elementEnd()),2&e){const e=a.\u0275\u0275nextContext(2).$implicit;a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate1(" ",e.controls.remark.value," ")}}function Yr(e,t){if(1&e){const e=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"td",132),a.\u0275\u0275elementStart(1,"div",133),a.\u0275\u0275elementStart(2,"div",134),a.\u0275\u0275listener("click",function(){a.\u0275\u0275restoreView(e);const t=a.\u0275\u0275nextContext(2),n=t.$implicit,i=t.index;return a.\u0275\u0275nextContext(3).modifyEquipment(n,i)}),a.\u0275\u0275element(3,"img",135),a.\u0275\u0275element(4,"img",136),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(5,"div",137),a.\u0275\u0275elementStart(6,"a",138),a.\u0275\u0275listener("dwOnConfirm",function(){a.\u0275\u0275restoreView(e);const t=a.\u0275\u0275nextContext(2),n=t.$implicit,i=t.index;return a.\u0275\u0275nextContext(3).deleteEquipment(n,i)}),a.\u0275\u0275pipe(7,"translate"),a.\u0275\u0275pipe(8,"translate"),a.\u0275\u0275elementStart(9,"a",139),a.\u0275\u0275element(10,"img",140),a.\u0275\u0275element(11,"img",141),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd()}2&e&&(a.\u0275\u0275advance(6),a.\u0275\u0275property("dwPopconfirmTitle","\u662f\u5426\u5220\u9664")("dwOkText",a.\u0275\u0275pipeBind1(7,4,"dw-determine"))("dwCancelText",a.\u0275\u0275pipeBind1(8,6,"dw-cancel"))("dwPopconfirmPlacement","topRight"))}function ea(e,t){1&e&&(a.\u0275\u0275elementStart(0,"tr",125),a.\u0275\u0275template(1,qr,2,1,"td",126),a.\u0275\u0275template(2,Wr,2,1,"td",126),a.\u0275\u0275template(3,Gr,2,1,"td",126),a.\u0275\u0275template(4,Ur,2,1,"td",126),a.\u0275\u0275template(5,Hr,2,1,"td",126),a.\u0275\u0275template(6,Xr,2,1,"td",126),a.\u0275\u0275template(7,Kr,2,1,"td",126),a.\u0275\u0275template(8,Jr,2,1,"td",127),a.\u0275\u0275template(9,Zr,2,1,"td",126),a.\u0275\u0275template(10,Yr,12,8,"td",128),a.\u0275\u0275elementEnd()),2&e&&(a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","code"),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","name"),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","specification"),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","model"),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","item_group_name"),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","sn"),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","file_context"),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","quantity"),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","remark"),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","operation"))}function ta(e,t){if(1&e&&(a.\u0275\u0275elementContainerStart(0,123),a.\u0275\u0275template(1,ea,11,10,"tr",124),a.\u0275\u0275elementContainerEnd()),2&e){const e=t.$implicit;a.\u0275\u0275property("formGroup",e),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf","d"!==e.$state)}}const na=function(){return{x:"1100px"}};function ia(e,t){if(1&e){const e=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"dw-tab",108),a.\u0275\u0275elementStart(1,"div",109),a.\u0275\u0275elementStart(2,"div",110),a.\u0275\u0275elementStart(3,"button",7),a.\u0275\u0275listener("click",function(){return a.\u0275\u0275restoreView(e),a.\u0275\u0275nextContext(2).equipmentAdd()}),a.\u0275\u0275element(4,"em",78),a.\u0275\u0275elementStart(5,"span",6),a.\u0275\u0275text(6,"\u65b0\u5efa"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(7,"dw-table",111,112),a.\u0275\u0275listener("dwPageSizeChange",function(t){return a.\u0275\u0275restoreView(e),a.\u0275\u0275nextContext(2).search.pageSize=t})("dwPageSizeOptionsChange",function(t){return a.\u0275\u0275restoreView(e),a.\u0275\u0275nextContext(2).search.pageSizeOptions=t}),a.\u0275\u0275elementStart(9,"thead"),a.\u0275\u0275elementStart(10,"tr",113),a.\u0275\u0275template(11,Vr,3,0,"th",114),a.\u0275\u0275template(12,Tr,3,0,"th",115),a.\u0275\u0275template(13,Lr,3,0,"th",115),a.\u0275\u0275template(14,Rr,3,0,"th",115),a.\u0275\u0275template(15,Ar,3,0,"th",115),a.\u0275\u0275template(16,Nr,3,0,"th",115),a.\u0275\u0275template(17,$r,3,0,"th",115),a.\u0275\u0275template(18,jr,3,0,"th",116),a.\u0275\u0275template(19,zr,3,0,"th",115),a.\u0275\u0275template(20,Br,3,0,"th",117),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(21,"tbody"),a.\u0275\u0275template(22,ta,2,2,"ng-container",118),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd()}if(2&e){const e=a.\u0275\u0275reference(8),t=a.\u0275\u0275nextContext(2);a.\u0275\u0275property("id",t.id?"modify-product-equipment-tab":"create-product-equipment-tab"),a.\u0275\u0275advance(3),a.\u0275\u0275property("dwType","primary"),a.\u0275\u0275advance(4),a.\u0275\u0275property("dwData",t.product_equipment_list.activeRows)("dwPageIndex",t.search.pageIndex)("dwPageSize",t.search.pageSize)("dwPageSizeOptions",t.search.pageSizeOptions)("dwScroll",a.\u0275\u0275pureFunction0(18,na)),a.\u0275\u0275advance(4),a.\u0275\u0275property("dwColumnId","code"),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","name"),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","specification"),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","model"),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","item_group_name"),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","sn"),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","file_context"),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","quantity"),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","remark"),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","operation"),a.\u0275\u0275advance(2),a.\u0275\u0275property("ngForOf",e.data)}}function ra(e,t){if(1&e){const e=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"div",109),a.\u0275\u0275elementStart(1,"div",110),a.\u0275\u0275elementStart(2,"button",142),a.\u0275\u0275listener("dwClick",function(){return a.\u0275\u0275restoreView(e),a.\u0275\u0275nextContext(2).productPartAdd()}),a.\u0275\u0275element(3,"em",78),a.\u0275\u0275elementStart(4,"span",6),a.\u0275\u0275text(5,"\u6dfb\u52a0"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd()}2&e&&(a.\u0275\u0275advance(2),a.\u0275\u0275property("dwType","primary")("dwActionId","add")("dwDefaultAuthorized","disabled"))}function aa(e,t){1&e&&(a.\u0275\u0275elementStart(0,"th",152),a.\u0275\u0275elementStart(1,"span",6),a.\u0275\u0275text(2,"\u914d\u4ef6\u7f16\u53f7"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd())}function oa(e,t){1&e&&(a.\u0275\u0275elementStart(0,"th",153),a.\u0275\u0275elementStart(1,"span",6),a.\u0275\u0275text(2,"\u914d\u4ef6\u540d\u79f0"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd())}function la(e,t){1&e&&(a.\u0275\u0275elementStart(0,"th",153),a.\u0275\u0275elementStart(1,"span",6),a.\u0275\u0275text(2,"\u89c4\u683c"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd())}function da(e,t){1&e&&(a.\u0275\u0275elementStart(0,"th",153),a.\u0275\u0275elementStart(1,"span",6),a.\u0275\u0275text(2,"\u578b\u53f7"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd())}function sa(e,t){1&e&&(a.\u0275\u0275elementStart(0,"th",154),a.\u0275\u0275elementStart(1,"span",6),a.\u0275\u0275text(2,"\u5e8f\u5217\u53f7"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd())}function ca(e,t){1&e&&(a.\u0275\u0275elementStart(0,"th",155),a.\u0275\u0275elementStart(1,"span",6),a.\u0275\u0275text(2,"\u5355\u4f4d"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd())}function ma(e,t){1&e&&(a.\u0275\u0275elementStart(0,"th",156),a.\u0275\u0275elementStart(1,"span",6),a.\u0275\u0275text(2,"\u5355\u4f4d\u6570\u91cf"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd())}function pa(e,t){1&e&&(a.\u0275\u0275elementStart(0,"th",153),a.\u0275\u0275elementStart(1,"span",6),a.\u0275\u0275text(2,"\u7c7b\u578b"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd())}function ua(e,t){1&e&&(a.\u0275\u0275elementStart(0,"th",157),a.\u0275\u0275elementStart(1,"span",6),a.\u0275\u0275text(2,"\u4fdd\u4fee\u622a\u6b62\u65e5\u671f"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd())}function ha(e,t){1&e&&(a.\u0275\u0275elementStart(0,"th",157),a.\u0275\u0275elementStart(1,"span",6),a.\u0275\u0275text(2,"\u5230\u671f\u66f4\u6362\u65e5\u671f"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd())}function ga(e,t){1&e&&(a.\u0275\u0275elementStart(0,"th",152),a.\u0275\u0275elementStart(1,"span",6),a.\u0275\u0275text(2,"\u5907\u6ce8"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd())}function fa(e,t){1&e&&(a.\u0275\u0275elementStart(0,"th",158),a.\u0275\u0275elementStart(1,"span",6),a.\u0275\u0275text(2,"\u64cd\u4f5c"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd())}function wa(e,t){1&e&&(a.\u0275\u0275elementStart(0,"span",160),a.\u0275\u0275element(1,"em",161),a.\u0275\u0275elementEnd())}function va(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"td"),a.\u0275\u0275template(1,wa,2,0,"span",159),a.\u0275\u0275text(2),a.\u0275\u0275elementEnd()),2&e){const e=a.\u0275\u0275nextContext(2).$implicit;a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",e.controls.quickwear_part.value),a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate1(" ",e.controls.material_code.value," ")}}function xa(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"td"),a.\u0275\u0275text(1),a.\u0275\u0275elementEnd()),2&e){const e=a.\u0275\u0275nextContext(2).$implicit;a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate1(" ",e.controls.material_name.value," ")}}function Ca(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"td"),a.\u0275\u0275text(1),a.\u0275\u0275elementEnd()),2&e){const e=a.\u0275\u0275nextContext(2).$implicit;a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate1(" ",e.controls.specification.value," ")}}function _a(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"td"),a.\u0275\u0275text(1),a.\u0275\u0275elementEnd()),2&e){const e=a.\u0275\u0275nextContext(2).$implicit;a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate1(" ",e.controls.model.value," ")}}function ya(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"td"),a.\u0275\u0275text(1),a.\u0275\u0275elementEnd()),2&e){const e=a.\u0275\u0275nextContext(2).$implicit;a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate1(" ",e.controls.sn.value," ")}}function Sa(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"td"),a.\u0275\u0275text(1),a.\u0275\u0275elementEnd()),2&e){const e=a.\u0275\u0275nextContext(2).$implicit;a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate1(" ",e.controls.unit.value," ")}}function ba(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"td",131),a.\u0275\u0275text(1),a.\u0275\u0275elementEnd()),2&e){const e=a.\u0275\u0275nextContext(2).$implicit;a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate1(" ",e.controls.unit_qty.value," ")}}function Ia(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"td"),a.\u0275\u0275text(1),a.\u0275\u0275elementEnd()),2&e){const e=a.\u0275\u0275nextContext(2).$implicit;a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate1(" ",e.controls.item_group_name.value," ")}}function Ea(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"td"),a.\u0275\u0275text(1),a.\u0275\u0275pipe(2,"date"),a.\u0275\u0275elementEnd()),2&e){const e=a.\u0275\u0275nextContext(2).$implicit;a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate1(" ",a.\u0275\u0275pipeBind2(2,1,e.controls.expiry_date.value,"yyyy/MM/dd")," ")}}function Da(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"td"),a.\u0275\u0275text(1),a.\u0275\u0275pipe(2,"date"),a.\u0275\u0275elementEnd()),2&e){const e=a.\u0275\u0275nextContext(2).$implicit;a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate1(" ",e.controls.replacement_date?a.\u0275\u0275pipeBind2(2,1,e.controls.replacement_date.value,"yyyy/MM/dd"):""," ")}}function Oa(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"td"),a.\u0275\u0275text(1),a.\u0275\u0275elementEnd()),2&e){const e=a.\u0275\u0275nextContext(2).$implicit;a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate1(" ",e.controls.remark.value," ")}}function Ma(e,t){if(1&e){const e=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"td",132),a.\u0275\u0275elementStart(1,"div",133),a.\u0275\u0275elementStart(2,"div",134),a.\u0275\u0275listener("click",function(){a.\u0275\u0275restoreView(e);const t=a.\u0275\u0275nextContext(2),n=t.$implicit,i=t.index;return a.\u0275\u0275nextContext(3).modifyPart(n,i)}),a.\u0275\u0275element(3,"img",135),a.\u0275\u0275element(4,"img",136),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(5,"div",137),a.\u0275\u0275elementStart(6,"a",138),a.\u0275\u0275listener("dwOnConfirm",function(){a.\u0275\u0275restoreView(e);const t=a.\u0275\u0275nextContext(2),n=t.$implicit,i=t.index;return a.\u0275\u0275nextContext(3).deletePart(n,i)}),a.\u0275\u0275pipe(7,"translate"),a.\u0275\u0275pipe(8,"translate"),a.\u0275\u0275elementStart(9,"a",139),a.\u0275\u0275element(10,"img",140),a.\u0275\u0275element(11,"img",141),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd()}2&e&&(a.\u0275\u0275advance(6),a.\u0275\u0275property("dwPopconfirmTitle","\u662f\u5426\u5220\u9664")("dwOkText",a.\u0275\u0275pipeBind1(7,4,"dw-determine"))("dwCancelText",a.\u0275\u0275pipeBind1(8,6,"dw-cancel"))("dwPopconfirmPlacement","topRight"))}function Pa(e,t){1&e&&(a.\u0275\u0275elementStart(0,"tr",125),a.\u0275\u0275template(1,va,3,2,"td",126),a.\u0275\u0275template(2,xa,2,1,"td",126),a.\u0275\u0275template(3,Ca,2,1,"td",126),a.\u0275\u0275template(4,_a,2,1,"td",126),a.\u0275\u0275template(5,ya,2,1,"td",126),a.\u0275\u0275template(6,Sa,2,1,"td",126),a.\u0275\u0275template(7,ba,2,1,"td",127),a.\u0275\u0275template(8,Ia,2,1,"td",126),a.\u0275\u0275template(9,Ea,3,4,"td",126),a.\u0275\u0275template(10,Da,3,4,"td",126),a.\u0275\u0275template(11,Oa,2,1,"td",126),a.\u0275\u0275template(12,Ma,12,8,"td",128),a.\u0275\u0275elementEnd()),2&e&&(a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","material_code"),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","material_name"),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","specification"),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","model"),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","sn"),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","unit"),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","unit_qty"),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","item_group_name"),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","expiry_date"),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","replacement_date"),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","remark"),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","operation"))}function ka(e,t){if(1&e&&(a.\u0275\u0275elementContainerStart(0,123),a.\u0275\u0275template(1,Pa,13,12,"tr",124),a.\u0275\u0275elementContainerEnd()),2&e){const e=t.$implicit;a.\u0275\u0275property("formGroup",e),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf","d"!==e.$state)}}function Fa(e,t){if(1&e){const e=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"dw-table",143,144),a.\u0275\u0275listener("dwPageSizeChange",function(t){return a.\u0275\u0275restoreView(e),a.\u0275\u0275nextContext(2).search.pageSize=t})("dwPageSizeOptionsChange",function(t){return a.\u0275\u0275restoreView(e),a.\u0275\u0275nextContext(2).search.pageSizeOptions=t}),a.\u0275\u0275elementStart(2,"thead"),a.\u0275\u0275elementStart(3,"tr",113),a.\u0275\u0275template(4,aa,3,0,"th",145),a.\u0275\u0275template(5,oa,3,0,"th",146),a.\u0275\u0275template(6,la,3,0,"th",146),a.\u0275\u0275template(7,da,3,0,"th",146),a.\u0275\u0275template(8,sa,3,0,"th",147),a.\u0275\u0275template(9,ca,3,0,"th",148),a.\u0275\u0275template(10,ma,3,0,"th",149),a.\u0275\u0275template(11,pa,3,0,"th",146),a.\u0275\u0275template(12,ua,3,0,"th",150),a.\u0275\u0275template(13,ha,3,0,"th",150),a.\u0275\u0275template(14,ga,3,0,"th",145),a.\u0275\u0275template(15,fa,3,0,"th",151),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(16,"tbody"),a.\u0275\u0275template(17,ka,2,2,"ng-container",118),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd()}if(2&e){const e=a.\u0275\u0275reference(1),t=a.\u0275\u0275nextContext(2);a.\u0275\u0275property("dwData",t.product_part.activeRows)("dwPageIndex",t.search.pageIndex)("dwPageSize",t.search.pageSize)("dwPageSizeOptions",t.search.pageSizeOptions)("dwScroll",a.\u0275\u0275pureFunction0(18,na)),a.\u0275\u0275advance(4),a.\u0275\u0275property("dwColumnId","material_code"),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","material_name"),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","specification"),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","model"),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","sn"),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","unit"),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","unit_qty"),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","item_group_name"),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","expiry_date"),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","replacement_date"),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","remark"),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","operation"),a.\u0275\u0275advance(2),a.\u0275\u0275property("ngForOf",e.data)}}function Va(e,t){1&e&&(a.\u0275\u0275elementStart(0,"th",167),a.\u0275\u0275elementStart(1,"span",6),a.\u0275\u0275text(2,"\u8bbe\u5907"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd())}function Ta(e,t){1&e&&(a.\u0275\u0275elementStart(0,"th",167),a.\u0275\u0275elementStart(1,"span",6),a.\u0275\u0275text(2,"\u8bbe\u5907\u5e8f\u5217\u53f7"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd())}function La(e,t){1&e&&(a.\u0275\u0275elementStart(0,"th",152),a.\u0275\u0275elementStart(1,"span",6),a.\u0275\u0275text(2,"\u914d\u4ef6\u7f16\u53f7"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd())}function Ra(e,t){1&e&&(a.\u0275\u0275elementStart(0,"th",154),a.\u0275\u0275elementStart(1,"span",6),a.\u0275\u0275text(2,"\u914d\u4ef6\u540d\u79f0"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd())}function Aa(e,t){1&e&&(a.\u0275\u0275elementStart(0,"th",153),a.\u0275\u0275elementStart(1,"span",6),a.\u0275\u0275text(2,"\u89c4\u683c"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd())}function Na(e,t){1&e&&(a.\u0275\u0275elementStart(0,"th",153),a.\u0275\u0275elementStart(1,"span",6),a.\u0275\u0275text(2,"\u578b\u53f7"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd())}function $a(e,t){1&e&&(a.\u0275\u0275elementStart(0,"th",157),a.\u0275\u0275elementStart(1,"span",6),a.\u0275\u0275text(2,"\u5e8f\u5217\u53f7"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd())}function ja(e,t){1&e&&(a.\u0275\u0275elementStart(0,"th",168),a.\u0275\u0275elementStart(1,"span",6),a.\u0275\u0275text(2,"\u5355\u4f4d"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd())}function za(e,t){1&e&&(a.\u0275\u0275elementStart(0,"th",156),a.\u0275\u0275elementStart(1,"span",6),a.\u0275\u0275text(2,"\u5355\u4f4d\u6570\u91cf"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd())}function Ba(e,t){1&e&&(a.\u0275\u0275elementStart(0,"th",153),a.\u0275\u0275elementStart(1,"span",6),a.\u0275\u0275text(2,"\u7c7b\u578b"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd())}function qa(e,t){1&e&&(a.\u0275\u0275elementStart(0,"th",157),a.\u0275\u0275elementStart(1,"span",6),a.\u0275\u0275text(2,"\u4fdd\u4fee\u622a\u6b62\u65e5\u671f"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd())}function Wa(e,t){1&e&&(a.\u0275\u0275elementStart(0,"th",157),a.\u0275\u0275elementStart(1,"span",6),a.\u0275\u0275text(2,"\u5230\u671f\u66f4\u6362\u65e5\u671f"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd())}function Ga(e,t){1&e&&(a.\u0275\u0275elementStart(0,"th",152),a.\u0275\u0275elementStart(1,"span",6),a.\u0275\u0275text(2,"\u5907\u6ce8"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd())}const Ua=function(e){return{display:e}};function Ha(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"td",170),a.\u0275\u0275text(1),a.\u0275\u0275elementEnd()),2&e){const e=a.\u0275\u0275nextContext().index,t=a.\u0275\u0275nextContext().$implicit;a.\u0275\u0275property("ngStyle",a.\u0275\u0275pureFunction1(3,Ua,0===e?"":"none")),a.\u0275\u0275attribute("rowspan",t.product_part.length),a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate1(" ",t.code," ")}}function Xa(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"td",170),a.\u0275\u0275text(1),a.\u0275\u0275elementEnd()),2&e){const e=a.\u0275\u0275nextContext().index,t=a.\u0275\u0275nextContext().$implicit;a.\u0275\u0275property("ngStyle",a.\u0275\u0275pureFunction1(3,Ua,0===e?"":"none")),a.\u0275\u0275attribute("rowspan",t.product_part.length),a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate1(" ",t.sn," ")}}function Qa(e,t){1&e&&(a.\u0275\u0275elementStart(0,"span",160),a.\u0275\u0275element(1,"em",161),a.\u0275\u0275elementEnd())}function Ka(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"td"),a.\u0275\u0275template(1,Qa,2,0,"span",159),a.\u0275\u0275text(2),a.\u0275\u0275elementEnd()),2&e){const e=a.\u0275\u0275nextContext().$implicit;a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",e.quickwear_part),a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate1(" ",e.material_code," ")}}function Ja(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"td"),a.\u0275\u0275text(1),a.\u0275\u0275elementEnd()),2&e){const e=a.\u0275\u0275nextContext().$implicit;a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate1(" ",e.material_name," ")}}function Za(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"td"),a.\u0275\u0275text(1),a.\u0275\u0275elementEnd()),2&e){const e=a.\u0275\u0275nextContext().$implicit;a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate1(" ",e.specification," ")}}function Ya(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"td"),a.\u0275\u0275text(1),a.\u0275\u0275elementEnd()),2&e){const e=a.\u0275\u0275nextContext().$implicit;a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate1(" ",e.model," ")}}function eo(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"td"),a.\u0275\u0275text(1),a.\u0275\u0275elementEnd()),2&e){const e=a.\u0275\u0275nextContext().$implicit;a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate1(" ",e.sn," ")}}function to(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"td"),a.\u0275\u0275text(1),a.\u0275\u0275elementEnd()),2&e){const e=a.\u0275\u0275nextContext().$implicit;a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate1(" ",e.unit," ")}}function no(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"td",131),a.\u0275\u0275text(1),a.\u0275\u0275elementEnd()),2&e){const e=a.\u0275\u0275nextContext().$implicit;a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate1(" ",e.unit_qty," ")}}function io(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"td"),a.\u0275\u0275text(1),a.\u0275\u0275elementEnd()),2&e){const e=a.\u0275\u0275nextContext().$implicit;a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate1(" ",e.item_group_name," ")}}function ro(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"td"),a.\u0275\u0275text(1),a.\u0275\u0275pipe(2,"date"),a.\u0275\u0275elementEnd()),2&e){const e=a.\u0275\u0275nextContext().$implicit;a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate1(" ",a.\u0275\u0275pipeBind2(2,1,e.expiry_date,"yyyy/MM/dd")," ")}}function ao(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"td"),a.\u0275\u0275text(1),a.\u0275\u0275pipe(2,"date"),a.\u0275\u0275elementEnd()),2&e){const e=a.\u0275\u0275nextContext().$implicit;a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate1(" ",e.replacement_date?a.\u0275\u0275pipeBind2(2,1,e.replacement_date,"yyyy/MM/dd"):""," ")}}function oo(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"td"),a.\u0275\u0275text(1),a.\u0275\u0275elementEnd()),2&e){const e=a.\u0275\u0275nextContext().$implicit;a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate1(" ",e.remark," ")}}function lo(e,t){1&e&&(a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275elementStart(1,"tr",125),a.\u0275\u0275template(2,Ha,2,5,"td",169),a.\u0275\u0275template(3,Xa,2,5,"td",169),a.\u0275\u0275template(4,Ka,3,2,"td",126),a.\u0275\u0275template(5,Ja,2,1,"td",126),a.\u0275\u0275template(6,Za,2,1,"td",126),a.\u0275\u0275template(7,Ya,2,1,"td",126),a.\u0275\u0275template(8,eo,2,1,"td",126),a.\u0275\u0275template(9,to,2,1,"td",126),a.\u0275\u0275template(10,no,2,1,"td",127),a.\u0275\u0275template(11,io,2,1,"td",126),a.\u0275\u0275template(12,ro,3,4,"td",126),a.\u0275\u0275template(13,ao,3,4,"td",126),a.\u0275\u0275template(14,oo,2,1,"td",126),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementContainerEnd()),2&e&&(a.\u0275\u0275advance(2),a.\u0275\u0275property("dwColumnId","equipment_name"),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","equipment_sn"),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","material_code"),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","material_name"),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","specification"),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","model"),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","sn"),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","unit"),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","unit_qty"),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","item_group_name"),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","expiry_date"),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","replacement_date"),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","remark"))}function so(e,t){if(1&e&&(a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275template(1,lo,15,13,"ng-container",66),a.\u0275\u0275elementContainerEnd()),2&e){const e=t.$implicit;a.\u0275\u0275advance(1),a.\u0275\u0275property("ngForOf",e.product_part)}}const co=function(){return{x:"1200px"}};function mo(e,t){if(1&e){const e=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"dw-table",162,163),a.\u0275\u0275listener("dwPageSizeChange",function(t){return a.\u0275\u0275restoreView(e),a.\u0275\u0275nextContext(2).search.pageSize=t})("dwPageSizeOptionsChange",function(t){return a.\u0275\u0275restoreView(e),a.\u0275\u0275nextContext(2).search.pageSizeOptions=t}),a.\u0275\u0275elementStart(2,"thead"),a.\u0275\u0275elementStart(3,"tr",113),a.\u0275\u0275template(4,Va,3,0,"th",164),a.\u0275\u0275template(5,Ta,3,0,"th",164),a.\u0275\u0275template(6,La,3,0,"th",145),a.\u0275\u0275template(7,Ra,3,0,"th",147),a.\u0275\u0275template(8,Aa,3,0,"th",146),a.\u0275\u0275template(9,Na,3,0,"th",146),a.\u0275\u0275template(10,$a,3,0,"th",150),a.\u0275\u0275template(11,ja,3,0,"th",165),a.\u0275\u0275template(12,za,3,0,"th",166),a.\u0275\u0275template(13,Ba,3,0,"th",146),a.\u0275\u0275template(14,qa,3,0,"th",150),a.\u0275\u0275template(15,Wa,3,0,"th",150),a.\u0275\u0275template(16,Ga,3,0,"th",145),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(17,"tbody"),a.\u0275\u0275template(18,so,2,1,"ng-container",66),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd()}if(2&e){const e=a.\u0275\u0275reference(1),t=a.\u0275\u0275nextContext(2);a.\u0275\u0275property("dwData",t.equipment_parts)("dwPageIndex",t.search.pageIndex)("dwPageSize",t.search.pageSize)("dwPageSizeOptions",t.search.pageSizeOptions)("dwScroll",a.\u0275\u0275pureFunction0(19,co)),a.\u0275\u0275advance(4),a.\u0275\u0275property("dwColumnId","equipment_name"),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","equipment_sn"),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","material_code"),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","material_name"),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","specification"),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","model"),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","sn"),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","unit"),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","unit_qty"),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","item_group_name"),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","expiry_date"),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","replacement_date"),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","remark"),a.\u0275\u0275advance(2),a.\u0275\u0275property("ngForOf",e.data)}}function po(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"dw-tab",171),a.\u0275\u0275elementStart(1,"div",15),a.\u0275\u0275elementStart(2,"div",172),a.\u0275\u0275element(3,"dw-extra-fields",173),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd()),2&e){const e=a.\u0275\u0275nextContext(2);a.\u0275\u0275property("id",e.id?"modify-extra-tab":"create-extra-tab"),a.\u0275\u0275advance(2),a.\u0275\u0275property("dwSpan",24),a.\u0275\u0275advance(1),a.\u0275\u0275property("group",e.product_file.controls[0])("dwDocument",e.doc)}}function uo(e,t){if(1&e){const e=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"form",11),a.\u0275\u0275elementStart(1,"dw-tabset",12),a.\u0275\u0275listener("dwSelectChange",function(t){return a.\u0275\u0275restoreView(e),a.\u0275\u0275nextContext().onTabChange(t)}),a.\u0275\u0275elementStart(2,"dw-tab",13),a.\u0275\u0275elementStart(3,"div",14),a.\u0275\u0275elementStart(4,"div",15),a.\u0275\u0275elementStart(5,"div",16),a.\u0275\u0275template(6,ji,5,5,"dw-form-item",17),a.\u0275\u0275template(7,zi,5,5,"dw-form-item",17),a.\u0275\u0275template(8,qi,6,5,"dw-form-item",17),a.\u0275\u0275template(9,Wi,5,4,"dw-form-item",17),a.\u0275\u0275template(10,Gi,5,5,"dw-form-item",17),a.\u0275\u0275template(11,Xi,5,5,"dw-form-item",17),a.\u0275\u0275template(12,Ki,8,5,"dw-form-item",17),a.\u0275\u0275template(13,Ji,5,4,"dw-form-item",17),a.\u0275\u0275template(14,Zi,5,5,"dw-form-item",17),a.\u0275\u0275template(15,tr,8,5,"dw-form-item",17),a.\u0275\u0275template(16,rr,8,5,"dw-form-item",17),a.\u0275\u0275template(17,ar,5,5,"dw-form-item",17),a.\u0275\u0275template(18,or,5,5,"dw-form-item",17),a.\u0275\u0275template(19,lr,5,4,"dw-form-item",17),a.\u0275\u0275template(20,sr,2,1,"ng-container",17),a.\u0275\u0275template(21,pr,13,9,"dw-form-item",17),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(22,"div",18),a.\u0275\u0275template(23,wr,12,15,"dw-form-item",19),a.\u0275\u0275template(24,vr,5,4,"dw-form-item",20),a.\u0275\u0275template(25,xr,5,5,"dw-form-item",17),a.\u0275\u0275template(26,Cr,5,4,"dw-form-item",20),a.\u0275\u0275template(27,_r,5,4,"dw-form-item",17),a.\u0275\u0275template(28,yr,5,4,"dw-form-item",17),a.\u0275\u0275template(29,Sr,5,4,"dw-form-item",17),a.\u0275\u0275template(30,Ir,2,1,"ng-container",17),a.\u0275\u0275template(31,Dr,2,1,"ng-container",17),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(32,"div",21),a.\u0275\u0275elementStart(33,"div",22),a.\u0275\u0275element(34,"div",23),a.\u0275\u0275template(35,Or,3,0,"div",24),a.\u0275\u0275template(36,Fr,6,2,"div",25),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275template(37,ia,23,19,"dw-tab",26),a.\u0275\u0275elementStart(38,"dw-tab",27),a.\u0275\u0275template(39,ra,6,3,"div",28),a.\u0275\u0275template(40,Fa,18,19,"dw-table",29),a.\u0275\u0275template(41,mo,19,20,"dw-table",30),a.\u0275\u0275elementEnd(),a.\u0275\u0275template(42,po,4,4,"dw-tab",31),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd()}if(2&e){const e=a.\u0275\u0275nextContext();a.\u0275\u0275property("formGroup",e.product_file.controls[0]),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwTabPosition","top")("dwType","line")("dwAnimated",!1),a.\u0275\u0275advance(1),a.\u0275\u0275property("id",e.id?"modify-product-file-tab":"create-product-file-tab"),a.\u0275\u0275advance(4),a.\u0275\u0275property("ngIf",e.formConfigList.indexOf("product_file_code")>=0),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",e.formConfigList.indexOf("product_file_name")>=0),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",e.formConfigList.indexOf("item_group")>=0),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",e.formConfigList.indexOf("model")>=0),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",e.formConfigList.indexOf("specification")>=0),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",e.formConfigList.indexOf("sn")>=0),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",e.formConfigList.indexOf("customer")>=0),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",e.formConfigList.indexOf("customer")>=0),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",e.formConfigList.indexOf("location")>=0),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",e.formConfigList.indexOf("service_site")>=0),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",e.formConfigList.indexOf("employee")>=0),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",e.formConfigList.indexOf("delivery_date")>=0),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",e.formConfigList.indexOf("installation_date_range")>=0),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",e.formConfigList.indexOf("commissioning_person")>=0),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",e.id),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",e.formConfigList.indexOf("attachment")>=0),a.\u0275\u0275advance(2),a.\u0275\u0275property("ngIf",e.formConfigList.indexOf("file")>=0),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",e.formConfigList.indexOf("file")>=0),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",e.formConfigList.indexOf("product_description")>=0),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",e.formConfigList.indexOf("product_description")>=0),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",e.formConfigList.indexOf("expiry_date")>=0),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",e.formConfigList.indexOf("acceptance_date")>=0),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",e.formConfigList.indexOf("acceptance_person")>=0),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",e.id),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",!e.id),a.\u0275\u0275advance(4),a.\u0275\u0275property("ngIf",!e.product_file.controls[0].controls.enable_maintain.value),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",e.product_file.controls[0].controls.enable_maintain.value),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf","2"===e.file_type),a.\u0275\u0275advance(1),a.\u0275\u0275property("id",e.id?"modify-product-part-tab":"create-product-part-tab"),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf","1"===e.file_type),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf","1"===e.file_type),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf","2"===e.file_type),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",e.productFileHasCustomizeField)}}let ho=(()=>{class e{constructor(e,t,n,i,r,a,o,l,d,s,c,m,p){this.router=e,this.activeRoute=t,this.doc=n,this.dwModalService=i,this.message=r,this.productFileSrv=a,this.customerSrv=o,this.productFileSelectService=l,this.analytics=d,this.userService=s,this.fb=c,this.commonHttpService=m,this.datePipe=p,this.file_type="1",this.formConfigList=[],this.product_equipment_list=new Rn.DwDataTable([]),this.equipment_parts=[],this.id="",this.type="",this.search={pageIndex:1,pageSize:10,pageSizeOptions:[10,20,30]},this.itemGroupList=[],this.isIntegrated=!1,this.attachmentsList=[],this.attachmentsListTemp=[],this.attachmentIds=[],this.disabledDate=e=>(0,Qn.differenceInCalendarDays)(this.product_file.controls[0].value.delivery_date,e)>0,this.basis_of_maintain="1",this.userInfo={tenantId:"",userId:""},this.productFileHasCustomizeField=!1,this.product_picture="",this.fileList=[],this.previewImage="",this.previewVisible=!1,this.handlePreview=e=>(0,Ln.mG)(this,void 0,void 0,function*(){!e.url&&!e.preview&&(e.preview=yield this.getBase64(e.originFileObj)),this.previewImage=e.url||e.preview,this.previewVisible=!0}),this.disabledDeliveryDate=e=>!(!e||!this.product_file.controls[0].value.installation_date)&&this.changeZero(e)>this.changeZero(this.product_file.controls[0].value.installation_date),this.disabledInstallationDate=e=>!(!e||!this.product_file.controls[0].value.delivery_date)&&(this.changeZero(e)<this.changeZero(this.product_file.controls[0].value.delivery_date)||this.changeZero(e)>this.changeZero(this.product_file.controls[0].value.acceptance_date)),this.disabledAcceptanceDate=e=>!(!e||!this.product_file.controls[0].value.installation_date)&&(this.changeZero(e)<this.changeZero(this.product_file.controls[0].value.installation_date)||this.changeZero(e)>=this.changeZero(this.product_file.controls[0].value.expiry_date)),this.disabledExpiryDate=e=>!(!e||!this.product_file.controls[0].value.acceptance_date)&&this.changeZero(e)<=this.changeZero(this.product_file.controls[0].value.acceptance_date),this.handleChange=e=>(0,Ln.mG)(this,void 0,void 0,function*(){switch(e.file.status){case"done":this.fileList[0].url=this.fileList.length?yield this.getBase64(e.file.originFileObj):"",this.product_file.controls[0].get("file_context").setValue(this.fileList.length?this.fileList[0].url:""),this.product_file.controls[0].get("file_name").setValue(this.fileList.length?this.fileList[0].name:""),this.product_file.controls[0].get("product_picture").setValue(""),this.product_file.controls[0].modifyState="u";break;case"removed":this.fileList[0].url="",this.product_file.controls[0].get("file_context").setValue(""),this.product_file.controls[0].get("file_name").setValue(""),this.product_file.controls[0].get("product_picture").setValue(""),this.product_file.controls[0].modifyState="u";break;case"error":this.fileList[0].status="done",this.fileList[0].url=this.fileList.length?yield this.getBase64(e.file.originFileObj):"",this.product_file.controls[0].get("file_context").setValue(this.fileList.length?this.fileList[0].url:""),this.product_file.controls[0].get("file_name").setValue(this.fileList.length?this.fileList[0].name:""),this.product_file.controls[0].get("product_picture").setValue(""),this.product_file.controls[0].modifyState="u"}}),this.beforeUpload=(e,t)=>new f.Observable(t=>{const n="image/jpeg"===e.type||"image/png"===e.type;if(!n)return this.message.create("error","\u8bf7\u4e0a\u4f20jpg\u6216png\u683c\u5f0f\u56fe\u7247\uff01"),void t.complete();const i=e.size/1024/1024<=5;if(!i)return this.message.create("error","\u4e0a\u4f20\u6587\u4ef6\u5927\u5c0f\u8d85\u8fc75M\uff01"),void t.complete();t.next(n&&i),t.complete()}),this.beforeUploadFiles=(e,t)=>new f.Observable(t=>{console.log(e);const n=e.name.split("."),i=n[n.length-1].indexOf("xls")>=0||n[n.length-1].indexOf("doc")>=0||n[n.length-1].indexOf("ppt")>=0||n[n.length-1].indexOf("pdf")>=0||n[n.length-1].indexOf("png")>=0||n[n.length-1].indexOf("jpg")>=0;if(!i)return this.message.create("error","\u8bf7\u4e0a\u4f20\u6b63\u786e\u683c\u5f0f\u6587\u4ef6\uff01"),void t.complete();const r=e.size/1024/1024<=10;if(!r)return this.message.create("error","\u4e0a\u4f20\u6587\u4ef6\u5927\u5c0f\u8d85\u8fc710M\uff01"),void t.complete();t.next(i&&r),t.complete()}),this.doc.registerEvent(this),this.activeRoute.paramMap.subscribe(e=>{this.id=e.get("id")||""}),this.activeRoute.queryParams.subscribe(e=>{this.file_type=e.file_type||"1"})}maintainValueChanges(){this.enableMaintainChange();const e=this.product_file.activeRows[0];e.get("item_group_id").valueChanges.subscribe(e=>{this.itemGroupChange()}),e.get("enable_maintain").valueChanges.subscribe(e=>{this.enableMaintainChange()}),e.get("maintain_begin_date").valueChanges.subscribe(e=>{this.dateOrPeriodChange()}),e.get("recently_maintain_date").valueChanges.subscribe(e=>{this.dateOrPeriodChange()}),e.get("recently_maintain_readingmeter").valueChanges.subscribe(e=>{this.dateOrPeriodChange()}),e.get("maintain_period").valueChanges.subscribe(e=>{this.dateOrPeriodChange()}),e.get("next_maintain_date").valueChanges.subscribe(t=>{console.log(t),console.log(e.get("next_maintain_date").value)})}ngOnInit(){this.commonHttpService.get("restful/service/autoSettings/CustomView/CustomView?viewId=product_file").subscribe(e=>{let t=[];e.data.config&&e.data.config.formConfig&&e.data.config.formConfig.length?(t=e.data.config.formConfig,Ti.R.product_file.length!==e.data.config.formConfig.length&&(t=Ti.R.product_file,t.forEach(t=>{e.data.config.formConfig.forEach(e=>{e.fieldKey===t.fieldKey&&(t.isTurnOn=e.isTurnOn)})}))):t=Ti.R.product_file;const n=[];t.forEach(e=>{e.isTurnOn&&n.push(e.fieldKey)}),this.formConfigList=n},e=>{e.hasOwnProperty("error")&&e.error.hasOwnProperty("errorMessage")&&e.error.errorMessage&&this.message.error(e.error.errorMessage)}),this.commonHttpService.get("restful/service/serviceSite/ServiceSite/UserSite").subscribe(e=>{this.user_service_site_id=e.service_site_id,this.user_service_site_type=e.service_site_type}),this.userInfo=this.userService.getUserInfo(),""===this.id?(this.product_file=new Rn.DwDataTable([{file_type:this.file_type,product_file_code:"",product_file_name:"",item_group_id:"",item_group_name:"",specification:"",model:"",sn:"",location:"",service_site_id:"",service_site_name:"",employee_id:"",employee_name:"",customer_id:"",customer_name:"",exfactory_customer_name:"",exfactory_customer_id:0,delivery_date:new Date,installation_date:new Date,acceptance_date:new Date,expiry_date:new Date,replacement_date:new Date,quickwear_part:!1,product_description:"",product_picture:"",file_context:"",file_name:"",commissioning_person:"",acceptance_person:"",remark:"",source:"1",installation_date_end:new Date,attachment:"",installation_date_range:"",enable_maintain:!1,maintain_begin_date:null,maintain_period:null,recently_maintain_date:null,next_maintain_date:null,recently_maintain_readingmeter:0,next_maintain_readingmeter:0,basis_of_maintain:"1"}]),this.fileList=[],this.product_picture="",this.previewImage=""):this.product_file=new Rn.DwDataTable([]),this.product_part=new Rn.DwDataTable([]),this.product_equipment_list=new Rn.DwDataTable([]),this.id?this.doc.read({id:this.id,fileType:this.file_type}).subscribe(e=>{console.log(e),this.product_file=e.product_file;const t=this.product_file.activeRows[0];t.get("item_group_id").value||t.get("item_group_id").setValue(""),"1"===t.getRawValue().enable_maintain?t.get("enable_maintain").setValue(!0):t.get("enable_maintain").setValue(!1),this.isIntegrated="0"===this.product_file.controls[0].value.source,this.product_part=e.product_part||new Rn.DwDataTable([]),this.product_part.rows.forEach(e=>{e.markAsUpdate()}),"2"===e.product_file.controls[0].value.file_type&&(e.product_equipment_list.rows.forEach((e,t)=>{const n=e.value;this.product_part.value.forEach(e=>{e.$state="u"}),Object.assign(n,{product_part:this.product_part.value.filter(e=>e.product_equipment_list_id===n.product_equipment_list_id)}),this.product_equipment_list.insertRow(0,this.detailModelWinObjForProductEquipment({detailEdit:n})),e.markAsUpdate()}),this.product_equipment_list.rows.forEach(e=>{e.modifyState="u",e.markAsUpdate()}),this.getEquipmentParts()),this.product_picture=e.product_file.controls[0].value.product_picture,e.product_file.controls[0].value.product_picture?this.fileList=[{uid:this.product_picture,name:e.product_file.controls[0].value.file_name,status:"done",url:e.product_file.controls[0].value.file_context}]:(this.fileList=[],this.previewImage=""),e.attachments.controls.forEach(e=>{this.attachmentsList.push(e.value)}),this.attachmentsList.forEach(e=>{e.name=e.attachment_name,e.uid=e.attachment_id,e.state="",this.attachmentIds.push(e.attachment_id)}),this.product_file.controls[0].get("installation_date").value?this.product_file.controls[0].get("installation_date_range").setValue([this.product_file.controls[0].get("installation_date").value,this.product_file.controls[0].get("installation_date_end").value]):this.product_file.controls[0].get("installation_date_range").setValue(""),this.productFileSrv.getItemGroupList("","","1").subscribe(e=>{this.itemGroupList=e||[];const t=this.itemGroupList.filter(e=>e.item_group_id===this.product_file.controls[0].value.item_group_id);this.basis_of_maintain=t.length&&t[0].basis_of_maintain||"1"}),this.maintainValueChanges()}):(this.doc.setControl("product_file",this.product_file),this.doc.addControl("product_part",this.product_part),this.doc.addControl("product_equipment_list",this.product_equipment_list),this.productFileSrv.getItemGroupList("","","1").subscribe(e=>{this.itemGroupList=e||[]}),this.maintainValueChanges()),this.productFileSrv.getProductFileHasCustomizeField("product_file").subscribe(e=>{this.productFileHasCustomizeField="true"===e.data})}getEquipmentParts(){const e=[],t=JSON.parse(JSON.stringify(this.product_equipment_list.value));console.log("this.product_equipment_list",this.product_equipment_list,t),this.product_equipment_list.value.forEach((n,i)=>{n.product_part&&n.product_part.forEach((n,r)=>{e.push(Object.assign({},n)),"d"===n.$state&&(console.log(i,r),t[i].product_part.splice(r,1))})}),this.equipment_parts=e.length?t:new Rn.DwDataTable([]),console.log(this.equipment_parts)}onTabChange(e){console.log(e.index)}getBase64(e){return new Promise((t,n)=>{const i=new FileReader;i.readAsDataURL(e),i.onload=()=>t(i.result),i.onerror=e=>n(e)})}changeZero(e){return new Date(e).setHours(0,0,0,0)}setInstallationDate(){let e=this.product_file.controls[0].value.installation_date_range;""!==e&&e.length&&""!==e[0]?(this.product_file.controls[0].get("installation_date").setValue(this.datePipe.transform(e[0],"yyyy-MM-dd")),this.product_file.controls[0].get("installation_date_end").setValue(this.datePipe.transform(e[1],"yyyy-MM-dd"))):(e=["",""],this.product_file.controls[0].get("installation_date").setValue(""),this.product_file.controls[0].get("installation_date_end").setValue(""))}detailModelWinObjForProductPart(e){const t=e.detailEdit;return""===this.id?{material_id:t.material_id,material_code:t.material_code,material_name:t.material_name,specification:t.specification,model:t.model,sn:t.sn,sn_management:t.sn_management,unit:t.unit,unit_qty:t.unit_qty,item_group_name:t.item_group_name,expiry_date:t.expiry_date,remark:t.remark,quickwear_part:t.quickwear_part,replacement_date:t.replacement_date}:{product_file_id:this.id,product_part_id:t.product_part_id,material_id:t.material_id,material_code:t.material_code,material_name:t.material_name,specification:t.specification,model:t.model,sn:t.sn,sn_management:t.sn_management,unit:t.unit,unit_qty:t.unit_qty,item_group_name:t.item_group_name,expiry_date:t.expiry_date,remark:t.remark,quickwear_part:t.quickwear_part,replacement_date:t.replacement_date}}productPartAdd(){this.dwModalService.create({dwTitle:"\u6dfb\u52a0\u4ea7\u54c1\u914d\u4ef6",dwContent:Xn,dwOnOk:e=>{console.log("data===>",e,this.product_part.controls);const t=this.product_part.controls?this.product_part.controls.filter(t=>e.detailEdit.quickwear_part&&(!e.detailEdit.sn||e.detailEdit.sn===t.value.sn)&&t.value.material_id===e.detailEdit.material_id&&this.datePipe.transform(t.value.replacement_date,"yyyy/MM/dd")===this.datePipe.transform(e.detailEdit.replacement_date,"yyyy/MM/dd")&&"d"!==t.$state):[];console.log(t),t&&t.length?this.message.error("\u5df2\u5b58\u5728\u76f8\u540c\u5230\u671f\u66f4\u6362\u65e5\u671f\u7684\u6613\u635f\u914d\u4ef6\uff01"):this.product_part.insertRow(0,this.detailModelWinObjForProductPart(e))},dwOnCancel(){},dwFooter:null,dwComponentParams:{cmd:"add",expiryDate:this.product_file.controls[0].value.expiry_date,deliveryDate:this.product_file.controls[0].value.delivery_date}})}modifyPart(e,t){console.log(this.product_part);const n=e.controls.product_part_id?this.product_part.controls.findIndex(t=>t.get("product_part_id").value===e.controls.product_part_id.value):t,i=this.product_part.controls[n].getRawValue();this.dwModalService.create({dwTitle:"\u4fee\u6539\u4ea7\u54c1\u914d\u4ef6",dwContent:Xn,dwOnOk:e=>{console.log(this.detailModelWinObjForProductPart(e)),this.product_part.updateRow(n,this.detailModelWinObjForProductPart(e))},dwOnCancel(){},dwFooter:null,dwComponentParams:{cmd:"modify",expiryDate:this.product_file.controls[0].value.expiry_date,orderDetail:new An(i),deliveryDate:this.product_file.controls[0].value.delivery_date}})}deletePart(e,t){const n=e.controls.product_part_id?this.product_part.controls.findIndex(t=>t.get("product_part_id").value===e.controls.product_part_id.value):t;this.product_part.deleteRow(n)}equipmentAdd(){this.dwModalService.create({dwTitle:"\u6dfb\u52a0\u4ea7\u7ebf/\u9879\u76ee\u8bbe\u5907",dwWidth:"1000px",dwContent:Vi,dwOnOk:e=>{let t=!1;if(e.detailEdit.product_part){const n=[];e.detailEdit.product_part.forEach(e=>{"d"!==e.$state&&e.sn&&(n.indexOf(e.code+e.sn)<0?n.push(e.code+e.sn):t=!0)})}if(t)this.message.error("\u5df2\u5b58\u5728\u5e8f\u5217\u53f7\u76f8\u540c\u7684\u914d\u4ef6\uff01");else{const t=[];this.product_equipment_list.value.forEach(e=>{e.sn&&t.push(e.code+e.sn)}),console.log(e,t),(!e.detailEdit.sn||t.indexOf(e.detailEdit.code+e.detailEdit.sn)<0)&&(this.product_equipment_list.insertRow(0,this.detailModelWinObjForProductEquipment(e)),this.getEquipmentParts())}},dwOnCancel(){},dwFooter:null,dwComponentParams:{cmd:"add",expiryDate:this.product_file.controls[0].value.expiry_date,isIntegrated:this.isIntegrated,deliveryDate:this.product_file.controls[0].value.delivery_date}})}modifyEquipment(e,t){console.log(this.product_equipment_list);const n=e.value.product_equipment_list_id?this.product_equipment_list.controls.findIndex(t=>t.get("product_equipment_list_id").value===e.value.product_equipment_list_id):t,i=this.product_equipment_list.controls[n].getRawValue();this.dwModalService.create({dwTitle:"\u4fee\u6539\u4ea7\u7ebf/\u9879\u76ee\u8bbe\u5907",dwWidth:"1000px",dwContent:Vi,dwOnOk:e=>{console.log(e);let t=!1;if(e.detailEdit.product_part){const n=[];e.detailEdit.product_part.forEach(e=>{"d"!==e.$state&&e.sn&&(n.indexOf(e.code+e.sn)<0?n.push(e.code+e.sn):t=!0)})}t?this.message.error("\u5df2\u5b58\u5728\u5e8f\u5217\u53f7\u76f8\u540c\u7684\u914d\u4ef6\uff01"):(this.product_equipment_list.updateRow(n,this.detailModelWinObjForProductEquipment(e)),this.doc.controls.product_equipment_list=this.product_equipment_list,this.getEquipmentParts())},dwOnCancel(){},dwFooter:null,dwComponentParams:{cmd:"modify",expiryDate:this.product_file.controls[0].value.expiry_date,isIntegrated:this.isIntegrated,orderDetail:new Nn(i),deliveryDate:this.product_file.controls[0].value.delivery_date}})}deleteEquipment(e,t){const n=e.value.product_equipment_list_id?this.product_equipment_list.controls.findIndex(t=>t.get("product_equipment_list_id").value===e.value.product_equipment_list_id):t;if(e.controls.product_part){const t=e.value.product_part.filter(e=>"c"!==e.$state);t.forEach(e=>{"d"!==e.$state&&(e.$state="d")}),this.product_equipment_list.controls[n].get("product_part").setValue(t)}this.product_equipment_list.deleteRow(n),this.getEquipmentParts()}detailModelWinObjForProductEquipment(e){const t=e.detailEdit,n={code:t.code,name:t.name,specification:t.specification,model:t.model,sn:t.sn,picture_id:t.picture_id,file_name:t.file_name,file_context:t.file_context,quantity:t.quantity,item_group_id:t.item_group_id,item_group_name:t.item_group_name,remark:t.remark,product_part:t.product_part};return Object.assign(n,{product_file_id:this.id||null}),Object.assign(n,{product_equipment_list_id:t.product_equipment_list_id||null}),n}handleCancel(){console.log("Button cancel clicked!"),this.returnProductList()}returnProductList(){this.router.navigate(this.id?["../../"]:["../"],{relativeTo:this.activeRoute})}openProductDataWin(e,t){e.preventDefault(),console.log(event.target),this.productFileSelectService.open([],t,"employee_id"===t?this.product_file.controls[0].value.service_site_id:"customer_id"===t?[this.product_file.controls[0].value.service_site_id,this.product_file.controls[0].value.employee_id]:"service_site_name"===t?[this.user_service_site_id,this.user_service_site_type]:"","").subscribe(e=>{if(console.log(e),"employee_id"===t?this.product_file.controls[0].get(t).setValue(e.data.employee[0][t]):"service_site_name"===t?this.product_file.controls[0].get(t).setValue(e[0].service_site_name):this.product_file.controls[0].get(t).setValue(e[0][t]),"service_site_name"===t){if(!e.length)return;this.product_file.controls[0].value.service_site_id!==e[0].service_site_id&&(this.product_file.controls[0].get("service_site_id").setValue(e[0].service_site_id),this.product_file.controls[0].get("employee_id").setValue(0),this.product_file.controls[0].get("employee_name").setValue(""))}else"employee_id"===t?this.product_file.controls[0].get("employee_name").setValue(e.data.employee[0].employee_name):"customer_id"===t&&(this.product_file.controls[0].get("customer_name").setValue(e[0].customer_name),this.product_file.controls[0].get("service_site_id").setValue(e[0].service_site_id),this.product_file.controls[0].get("service_site_name").setValue(e[0].service_site_name),this.product_file.controls[0].get("employee_id").setValue(e[0].employee_id),this.product_file.controls[0].get("employee_name").setValue(e[0].employee_name),this.product_file.controls[0].get("exfactory_customer_id").setValue(e[0].customer_id),this.product_file.controls[0].get("exfactory_customer_name").setValue(e[0].customer_name));this.product_file.controls[0].modifyState="u"})}clear(e){this.product_file.controls[0].get(`${e}id`).setValue(0),this.product_file.controls[0].get(`${e}name`).setValue(""),"customer_"===e&&(this.product_file.controls[0].get("service_site_id").setValue(0),this.product_file.controls[0].get("service_site_name").setValue(""),this.product_file.controls[0].get("employee_id").setValue(0),this.product_file.controls[0].get("employee_name").setValue("")),"service_site_"===e&&(this.product_file.controls[0].get("employee_id").setValue(0),this.product_file.controls[0].get("employee_name").setValue("")),this.product_file.controls[0].modifyState="u"}compare(){const e=this.product_part.rows;let t=!0;for(let n=0;n<e.length;n++){for(let i=n+1;i<e.length;i++)if(e[n].value.material_code===e[i].value.material_code&&e[n].value.sn&&e[n].value.sn===e[i].value.sn){this.message.create("error","d"===e[n].modifyState||"d"===e[i].modifyState?"\u76f8\u540c\u914d\u4ef6\u5e8f\u5217\u53f7(\u5305\u542b\u5220\u9664\u7684\u914d\u4ef6)\u8bf7\u52ff\u91cd\u590d\uff01":"\u76f8\u540c\u914d\u4ef6\u5e8f\u5217\u53f7\u8bf7\u52ff\u91cd\u590d\uff01"),t=!1;break}if(!t)break}return t}validDate(){this.setInstallationDate();const e=this.product_file.controls[0].value.delivery_date,t=this.product_file.controls[0].value.installation_date,n=this.product_file.controls[0].value.installation_date_end,i=this.product_file.controls[0].value.acceptance_date,r=this.product_file.controls[0].value.expiry_date;return e&&t&&this.changeZero(e)>this.changeZero(t)?(this.message.create("error","\u5b89\u88c5\u65e5\u671f\u4e0d\u5f97\u65e9\u4e8e\u51fa\u5e93\u65e5\u671f\uff01"),!1):n&&i&&this.changeZero(n)>this.changeZero(i)?(this.message.create("error","\u9a8c\u6536\u65e5\u671f\u4e0d\u5f97\u65e9\u4e8e\u5b89\u88c5\u622a\u6b62\u65e5\u671f\uff01"),!1):i&&r&&this.changeZero(i)>this.changeZero(r)?(this.message.create("error","\u4fdd\u4fee\u622a\u6b62\u65e5\u671f\u4e0d\u5f97\u65e9\u4e8e\u9a8c\u6536\u65e5\u671f\uff01"),!1):!i&&n&&r&&this.changeZero(n)>this.changeZero(r)?(this.message.create("error","\u4fdd\u4fee\u622a\u6b62\u65e5\u671f\u4e0d\u5f97\u65e9\u4e8e\u5b89\u88c5\u622a\u6b62\u65e5\u671f\uff01"),!1):!i&&!t&&e&&r&&this.changeZero(e)>this.changeZero(r)?(this.message.create("error","\u4fdd\u4fee\u622a\u6b62\u65e5\u671f\u4e0d\u5f97\u65e9\u4e8e\u51fa\u5e93\u65e5\u671f\uff01"),!1):!(!t&&e&&i&&this.changeZero(e)>this.changeZero(i)&&(this.message.create("error","\u9a8c\u6536\u65e5\u671f\u4e0d\u5f97\u65e9\u4e8e\u51fa\u5e93\u65e5\u671f\uff01"),1))}validForm(){const e=this.product_file.activeRows[0].getRawValue();if(e.next_maintain_date=e.next_maintain_date?new Date(e.next_maintain_date):null,console.log(e.next_maintain_date),e.enable_maintain){if(!e.maintain_begin_date&&"1"===this.basis_of_maintain)return void this.message.error("\u7ef4\u62a4\u5f00\u59cb\u65e5\u671f\u4e0d\u80fd\u4e3a\u7a7a");if(!e.maintain_period)return void this.message.error("\u7ef4\u62a4\u5468\u671f\u4e0d\u80fd\u4e3a\u7a7a");if("1"===this.basis_of_maintain){if(!e.next_maintain_date)return void this.message.error("\u4e0b\u6b21\u7ef4\u62a4\u65e5\u671f\u4e0d\u80fd\u4e3a\u7a7a");if(e.next_maintain_date<=e.maintain_begin_date)return void this.message.error("\u4e0b\u6b21\u7ef4\u62a4\u65e5\u671f\u5fc5\u987b\u5927\u4e8e\u7ef4\u62a4\u5f00\u59cb\u65e5\u671f");if(e.recently_maintain_date&&e.next_maintain_date<=e.recently_maintain_date)return void this.message.error("\u4e0b\u6b21\u7ef4\u62a4\u65e5\u671f\u5fc5\u987b\u5927\u4e8e\u6700\u8fd1\u7ef4\u62a4\u65e5\u671f")}else if(e.next_maintain_readingmeter<e.recently_maintain_readingmeter)return void this.message.error("\u4e0b\u6b21\u4fdd\u517b\u6284\u8868\u6570\u4e0d\u53ef\u5c0f\u4e8e\u6700\u8fd1\u4fdd\u517b\u6284\u8868\u6570")}if(!this.product_equipment_list.activeRows.length&&"2"===this.file_type)return void this.message.error("\u8bf7\u6dfb\u52a0\u8bbe\u5907\u4fe1\u606f");if(!this.validDate()||!this.compare())return;this.product_file.controls[0].get("basis_of_maintain").setValue(this.basis_of_maintain);let t=!0;t=!this.id,this.saveProductFile(t)}saveProductFile(e){const t=[];this.attachmentsList.forEach(n=>(0,Ln.mG)(this,void 0,void 0,function*(){let i=!0;if(i=e?"D"!==n.state&&"d"!==n.state:("C"===n.state||"c"===n.state)&&n.name!==n.attachment_name,i){const e=new FormData;e.append("file",n.originFileObj),t.push(new Promise((t,n)=>{this.productFileSrv.saveAttachments(e).subscribe(e=>{e.success?(this.attachmentIds.push(e.data),t()):(this.message.create("error","\u9644\u4ef6\u4fdd\u5b58\u5931\u8d25\uff01"),n())},e=>{e.hasOwnProperty("error")&&e.error.hasOwnProperty("errorMessage")&&e.error.errorMessage&&this.message.error(e.error.errorMessage)})}))}})),Promise.all(t).then(e=>{this.product_file.controls[0].get("attachment").setValue(this.attachmentIds.length?this.attachmentIds.join(","):""),this.product_file.controls[0].get("installation_date_range").setValue("");const t=this.product_file.activeRows[0];t.getRawValue().enable_maintain?t.get("enable_maintain").setValue("1",{emitEvent:!1}):t.get("enable_maintain").setValue("0",{emitEvent:!1}),console.log("product_equipment_list",this.product_equipment_list),console.log("product_part",this.product_part),this.id&&"2"===this.file_type&&(this.product_equipment_list.value.forEach(e=>{e.product_part.forEach(t=>{t.product_file_id=t.product_file_id||e.product_file_id||null})}),this.doc.controls.product_equipment_list=this.product_equipment_list),this.doc.save().subscribe(e=>{},e=>{e.hasOwnProperty("error")&&e.error.hasOwnProperty("errorMessage")&&e.error.errorMessage&&this.message.error(e.error.errorMessage),"1"===t.getRawValue().enable_maintain?t.get("enable_maintain").setValue(!0):"0"===t.getRawValue().enable_maintain&&t.get("enable_maintain").setValue(!1)},()=>{console.log("\u8bf7\u6c42\u7ed3\u675f"),"1"===t.getRawValue().enable_maintain?t.get("enable_maintain").setValue(!0):"0"===t.getRawValue().enable_maintain&&t.get("enable_maintain").setValue(!1)})})}saving(){return this.id&&this.product_file.rows.forEach(e=>{e.markAsUpdate()}),!0}saved(e){this.message.success("\u64cd\u4f5c\u6210\u529f\uff01"),this.returnProductList()}handleFileChange(e){for(const t in this.attachmentsList)this.attachmentsList[t].state||(this.attachmentsList[t].state="C");console.log("change:",this.attachmentsList)}deleteFile(e){let t=0,n=!1;this.attachmentIds.forEach(i=>{n||i===this.attachmentsList[e].uid&&(this.attachmentIds.splice(t,1),n=!0),t++}),"C"===this.attachmentsList[e].state?this.attachmentsList.splice(e,1):this.attachmentsList[e].state="D"}downloadFile(){this.productFileSrv.download({attachment_id:"4b7eade3-c83f-4c5c-aeea-0c3434d54b1c"}).subscribe(e=>{if(e)switch(e.type){case X.HttpEventType.Response:const t=URL.createObjectURL(e.body),n=document.createElement("a");n.href=t,n.style="visibility:hidden",n.download=e.headers.get("Content-disposition").split("filename=")[1],document.body.appendChild(n),n.click(),document.body.removeChild(n)}},e=>{e.hasOwnProperty("error")&&e.error.hasOwnProperty("errorMessage")&&e.error.errorMessage&&this.message.error(e.error.errorMessage)})}enableMaintainChange(){const e=this.product_file.activeRows[0];e.getRawValue().enable_maintain?(e.get("maintain_begin_date").enable(),e.get("maintain_period").enable(),e.get("recently_maintain_date").enable(),e.get("next_maintain_date").enable(),e.get("recently_maintain_readingmeter").enable(),e.get("next_maintain_readingmeter").enable()):(e.get("maintain_begin_date").disable(),e.get("maintain_period").disable(),e.get("recently_maintain_date").disable(),e.get("next_maintain_date").disable(),e.get("recently_maintain_readingmeter").disable(),e.get("next_maintain_readingmeter").disable())}dateOrPeriodChange(){this.maintainPeriodChange(),this.recentlyMaintainReadingmeterChange();const e=this.product_file.activeRows[0],t=e.getRawValue().maintain_period;if(t&&"1"===this.basis_of_maintain){let n;const i=e.get("next_maintain_date"),r=e.getRawValue().maintain_begin_date,a=e.getRawValue().recently_maintain_date;if(a)n=new Date(a);else{if(!r)return;n=new Date(r)}i.setValue(new Date(this.addMonths(n,t)),{emitEvent:!1})}else if(t&&"2"===this.basis_of_maintain){let n;const i=e.get("next_maintain_readingmeter");n=e.getRawValue().recently_maintain_readingmeter,i.setValue(Number(n)+Number(t),{emitEvent:!1})}}itemGroupChange(){const e=this.product_file.activeRows[0];if(!e.getRawValue().item_group_id)return;const t=this.itemGroupList.find(t=>t.item_group_id===e.getRawValue().item_group_id),n=t.enable_maintain,i=t.maintain_period;this.basis_of_maintain=t.basis_of_maintain||"1","1"===n?(e.get("enable_maintain").setValue(!0),e.get("maintain_begin_date").enable(),e.get("maintain_period").enable(),e.get("recently_maintain_date").enable(),e.get("next_maintain_date").enable(),e.get("maintain_period").setValue(i),e.get("recently_maintain_readingmeter").enable(),e.get("next_maintain_readingmeter").enable()):(e.get("enable_maintain").setValue(!1,{emitEvent:!1}),e.get("maintain_begin_date").disable(),e.get("maintain_period").disable(),e.get("maintain_period").setValue(i),e.get("recently_maintain_date").disable(),e.get("next_maintain_date").disable(),e.get("recently_maintain_readingmeter").disable(),e.get("next_maintain_readingmeter").disable())}maintainPeriodChange(){const e=this.product_file.activeRows[0],t=e.getRawValue().maintain_period;!t||t<0?e.get("maintain_period").setValue(1,{emitEvent:!1}):t>120&&"1"===this.basis_of_maintain?e.get("maintain_period").setValue(120,{emitEvent:!1}):t>99999&&"2"===this.basis_of_maintain?e.get("maintain_period").setValue(99999,{emitEvent:!1}):e.get("maintain_period").setValue(Math.round(t),{emitEvent:!1})}recentlyMaintainReadingmeterChange(){const e=this.product_file.activeRows[0],t=e.getRawValue().recently_maintain_readingmeter;!t||t<0?e.get("recently_maintain_readingmeter").setValue(0,{emitEvent:!1}):e.get("recently_maintain_readingmeter").setValue(Math.round(t),{emitEvent:!1})}nextMaintainReadingmeterChange(){const e=this.product_file.activeRows[0],t=e.getRawValue().recently_maintain_readingmeter,n=e.getRawValue().next_maintain_readingmeter;!n||n<t?e.get("next_maintain_readingmeter").setValue(t,{emitEvent:!1}):e.get("next_maintain_readingmeter").setValue(Math.round(n),{emitEvent:!1})}addDays(e,t){return e.setDate(e.getDate()+t),e}addMonths(e,t){return e.setMonth(e.getMonth()+t),e}}return e.\u0275fac=function(t){return new(t||e)(a.\u0275\u0275directiveInject(r.Router),a.\u0275\u0275directiveInject(r.ActivatedRoute),a.\u0275\u0275directiveInject(Rn.DwDocument),a.\u0275\u0275directiveInject(c.DwModalService),a.\u0275\u0275directiveInject(s.DwMessageService),a.\u0275\u0275directiveInject(d.U),a.\u0275\u0275directiveInject(p.v),a.\u0275\u0275directiveInject(Wn),a.\u0275\u0275directiveInject(u.DwAnalytics),a.\u0275\u0275directiveInject(h.DwUserService),a.\u0275\u0275directiveInject(l.FormBuilder),a.\u0275\u0275directiveInject(w.$),a.\u0275\u0275directiveInject(i.DatePipe))},e.\u0275cmp=a.\u0275\u0275defineComponent({type:e,selectors:[["app-product-file-modify"]],features:[a.\u0275\u0275ProvidersFeature([Rn.DwDocument,Wn])],decls:15,vars:10,consts:[[1,"dw-f-content-list","layoutClass","sales_layout"],[1,"issue_layout_head"],[1,"issue_layout_title"],["style","margin-left: 3px;",4,"ngIf"],[2,"float","right"],["dw-button","","dw-analyticsOn","click",3,"dwType","disabled","angularticsCategory","id","angularticsAction","angularticsLabel","click"],["translate",""],["dw-button","","type","button",3,"dwType","click"],[1,"content-box",2,"padding-bottom","24px"],["dw-form","",3,"formGroup",4,"ngIf"],[2,"margin-left","3px"],["dw-form","",3,"formGroup"],[1,"my-tab",3,"dwTabPosition","dwType","dwAnimated","dwSelectChange"],["dwTitle","\u57fa\u672c\u4fe1\u606f",3,"id"],[1,"lessons-list"],["dw-row","","dwGutter","8"],["dw-col","","dwSpan","10"],[4,"ngIf"],["dw-col","","dwSpan","12"],["rowspan","4",4,"ngIf"],["style","opacity: 0;",4,"ngIf"],["dw-row","","dwGutter","8",2,"margin-top","8px"],["dw-col","","dwSpan","22",2,"display","flex"],[1,"temp"],["class","checkbox_label",4,"ngIf"],["class","maintain_box",4,"ngIf"],["dwTitle","\u8bbe\u5907\u4fe1\u606f",3,"id",4,"ngIf"],["dwTitle","\u914d\u4ef6\u4fe1\u606f",3,"id"],["dw-row","","class","dw-f-btn-bar-action",4,"ngIf"],["dwTableId","crs-product-part-modify-list",3,"dwData","dwPageIndex","dwPageSize","dwPageSizeOptions","dwScroll","dwPageSizeChange","dwPageSizeOptionsChange",4,"ngIf"],["dwTableId","crs-equipment-part-modify-list",3,"dwData","dwPageIndex","dwPageSize","dwPageSizeOptions","dwScroll","dwPageSizeChange","dwPageSizeOptionsChange",4,"ngIf"],["dwTitle","\u9644\u52a0\u4fe1\u606f",3,"id",4,"ngIf"],["dwRequired","",3,"dwSm","dwXs"],[3,"dwSm","dwXs"],["dw-input","","required","","formControlName","product_file_code","maxlength","40",3,"readonly"],["dw-input","","required","","formControlName","product_file_name","maxlength","60",3,"readonly"],["formControlName","item_group_id","required","",2,"width","100%"],[3,"dwLabel","dwValue",4,"ngFor","ngForOf"],[3,"dwLabel","dwValue"],["dw-input","","formControlName","model","maxlength","255"],["dw-input","","formControlName","specification","maxlength","255",3,"readonly"],["dwRequired","",3,"dwSm","dwXs",4,"ngIf"],["dw-input","","formControlName","sn","required","","maxlength","255",3,"readonly"],["dwSearch","",3,"dwSuffix"],["dw-input","","required","","type","text","readonly","","formControlName","customer_name"],["suffixCustomerData",""],["dw-button","","dwType","primary","dwSearch","","type","button",3,"disabled","click"],["dw-icon","","dwType","search"],["dw-input","","readonly","","formControlName","exfactory_customer_name"],["dw-input","","formControlName","location","maxlength","255",3,"readonly"],["dw-input","","type","text","readonly","","dw-input","","formControlName","service_site_name"],["suffixServiceSiteData",""],["dw-icon","","class","ant-input-clear-icon","dwTheme","fill","dwType","close-circle",3,"click",4,"ngIf"],["dw-button","","dwType","primary","dwSearch","","type","button",3,"click"],["dw-icon","","dwTheme","fill","dwType","close-circle",1,"ant-input-clear-icon",3,"click"],["dw-input","","type","text","readonly","","dw-input","","formControlName","employee_name"],["suffixEmployeeData",""],["required","","formControlName","delivery_date",3,"dwDisabled"],["formControlName","installation_date_range",2,"width","100%",3,"dwDisabledDate"],["dw-input","","formControlName","commissioning_person","maxlength","20"],["dw-input","","formControlName","remark","maxlength","20"],[1,"upFiles"],[1,"upload"],[2,"margin-bottom","8px",3,"dwFileList","dwBeforeUpload","dwShowUploadList","dwAccept","dwFileListChange","dwChange"],["dw-button",""],["dw-icon","","dwType","upload"],[4,"ngFor","ngForOf"],[1,"tip"],["class","chosen-file","dw-row","",4,"ngIf"],["dw-row","",1,"chosen-file"],["dw-col","",1,"type-icon"],["dw-icon","","dwType","paper-clip","dwTheme","outline"],["dw-col","",1,"file-name"],["dw-col","",1,"del",3,"click"],["dw-icon","","dwType","delete","dwTheme","outline"],["rowspan","4"],[1,"clearfix",2,"min-height","117.5px"],["dwAction","https://www.mocky.io/v2/5cc8019d300000980a055e76","dwListType","picture-card",3,"dwFileList","dwShowButton","dwPreview","dwBeforeUpload","dwAccept","dwShowUploadList","dwFileListChange","dwChange"],["dw-icon","","dwType","plus"],[1,"ant-upload-text"],[3,"dwVisible","dwContent","dwFooter","dwOnCancel"],["modalContent",""],["alt","\u4ea7\u54c1\u6863\u6848",3,"src","ngStyle"],[2,"opacity","0"],["dw-input","","readonly","","formControlName","file_context"],["dw-input","","maxlength","400","placeholder","200\u5b57\u4ee5\u5185","formControlName","product_description",2,"height","211px",3,"readonly"],["dw-input","","readonly",""],["formControlName","expiry_date","required",""],["formControlName","acceptance_date"],["dw-input","","formControlName","acceptance_person","maxlength","20"],["dw-input","","readonly","","formControlName","maintenance_count","maxlength","20"],[1,"checkbox_label"],["dw-checkbox","","formControlName","enable_maintain",2,"color","rgba(0,0,0,0.85)"],[1,"maintain_box"],["dw-row","",4,"ngIf"],["dw-row",""],["dwRequired","",3,"dwSpan"],[3,"dwSpan"],["formControlName","maintain_begin_date"],["dw-row","",3,"dwSpan"],[2,"display","flex"],["type","number","dw-input","","formControlName","maintain_period","maxlength","5",2,"flex","1"],[2,"margin-left","10px","line-height","32px","color","rgba(0,0,0,0.85)"],["dw-col","","dwSpan","10",4,"ngIf"],["formControlName","recently_maintain_date"],["formControlName","next_maintain_date"],["type","number","dw-input","","formControlName","recently_maintain_readingmeter"],["type","number","dw-input","","formControlName","next_maintain_readingmeter",3,"change","keyup"],["dwTitle","\u8bbe\u5907\u4fe1\u606f",3,"id"],["dw-row","",1,"dw-f-btn-bar-action"],["dw-col",""],["dwTableId","crs-product-equipment-modify-list",3,"dwData","dwPageIndex","dwPageSize","dwPageSizeOptions","dwScroll","dwPageSizeChange","dwPageSizeOptionsChange"],["dwTable",""],["dw-tr","","dwDropColumns",""],["dw-th","","dwDragDrop","","dwColumnKey","contact",4,"dwColumnId"],["dw-th","","dwDragDrop","",4,"dwColumnId"],["dw-th","","dwDragDrop","","class","align-right",4,"dwColumnId"],["dw-th","","dwRight","","dwDragDropdwRight","","class","align-center","width","92",4,"dwColumnId"],[3,"formGroup",4,"ngFor","ngForOf"],["dw-th","","dwDragDrop","","dwColumnKey","contact"],["dw-th","","dwDragDrop",""],["dw-th","","dwDragDrop","",1,"align-right"],["dw-th","","dwRight","","dwDragDropdwRight","","width","92",1,"align-center"],[3,"formGroup"],["dw-tbody-tr","","dwReorderColumns","",4,"ngIf"],["dw-tbody-tr","","dwReorderColumns",""],[4,"dwColumnId"],["class","align-right",4,"dwColumnId"],["dwRight","","class","align-center",4,"dwColumnId"],["style","width: 56px;height: 56px;","alt","\u8bbe\u5907\u56fe\u7247",3,"src",4,"ngIf"],["alt","\u8bbe\u5907\u56fe\u7247",2,"width","56px","height","56px",3,"src"],[1,"align-right"],["dwRight","",1,"align-center"],[1,"action-grid"],["title","\u7f16\u8f91",3,"click"],["src","../../../../../../assets/img/icon_edit.png","alt","\u7f16\u8f91",1,"action-icon"],["src","../../../../../../assets/img/icon_edit_hover.png","alt","\u7f16\u8f91",1,"action-icon"],["title","\u5220\u9664"],["dw-popconfirm","",3,"dwPopconfirmTitle","dwOkText","dwCancelText","dwPopconfirmPlacement","dwOnConfirm"],["dw-popconfirm","","translate",""],["src","../../../../../../assets/img/icon_delete.png","alt","\u5220\u9664",1,"action-icon"],["src","../../../../../../assets/img/icon_delete_hover.png","alt","\u5220\u9664",1,"action-icon"],["dw-button","","type","button","dwActionAuthorized","",3,"dwType","dwActionId","dwDefaultAuthorized","dwClick"],["dwTableId","crs-product-part-modify-list",3,"dwData","dwPageIndex","dwPageSize","dwPageSizeOptions","dwScroll","dwPageSizeChange","dwPageSizeOptionsChange"],["dwTablePart",""],["dw-th","","dwDragDrop","","dwWidth","140px",4,"dwColumnId"],["dw-th","","dwDragDrop","","dwWidth","100px",4,"dwColumnId"],["dw-th","","dwDragDrop","","dwWidth","120px",4,"dwColumnId"],["dw-th","","dwDragDrop","","dwWidth","70px",4,"dwColumnId"],["dw-th","","dwDragDrop","","class","align-right","dwWidth","100px",4,"dwColumnId"],["dw-th","","dwDragDrop","","dwWidth","110px",4,"dwColumnId"],["dw-th","","dwRight","","class","align-center","dwWidth","92px",4,"dwColumnId"],["dw-th","","dwDragDrop","","dwWidth","140px"],["dw-th","","dwDragDrop","","dwWidth","100px"],["dw-th","","dwDragDrop","","dwWidth","120px"],["dw-th","","dwDragDrop","","dwWidth","70px"],["dw-th","","dwDragDrop","","dwWidth","100px",1,"align-right"],["dw-th","","dwDragDrop","","dwWidth","110px"],["dw-th","","dwRight","","dwWidth","92px",1,"align-center"],["dw-tooltip","","dwTooltipTitle","\u6613\u635f\u4ef6","class","quickPart",4,"ngIf"],["dw-tooltip","","dwTooltipTitle","\u6613\u635f\u4ef6",1,"quickPart"],[1,"point"],["dwTableId","crs-equipment-part-modify-list",3,"dwData","dwPageIndex","dwPageSize","dwPageSizeOptions","dwScroll","dwPageSizeChange","dwPageSizeOptionsChange"],["dwTablePart2",""],["dw-th","","dwWidth","120px",4,"dwColumnId"],["dw-th","","dwDragDrop","","dwWidth","80px",4,"dwColumnId"],["dw-th","","class","align-right","dwDragDrop","","dwWidth","100px",4,"dwColumnId"],["dw-th","","dwWidth","120px"],["dw-th","","dwDragDrop","","dwWidth","80px"],[3,"ngStyle",4,"dwColumnId"],[3,"ngStyle"],["dwTitle","\u9644\u52a0\u4fe1\u606f",3,"id"],["dw-col","",1,"cust-field",3,"dwSpan"],["cols","1","labelSpan","3","inputSpan","7","tableName","product_file",3,"group","dwDocument"]],template:function(e,t){1&e&&(a.\u0275\u0275elementStart(0,"dw-content",0),a.\u0275\u0275elementStart(1,"div",1),a.\u0275\u0275elementStart(2,"h2",2),a.\u0275\u0275template(3,Ni,2,0,"span",3),a.\u0275\u0275template(4,$i,2,0,"span",3),a.\u0275\u0275elementStart(5,"div",4),a.\u0275\u0275elementStart(6,"button",5),a.\u0275\u0275listener("click",function(){return t.validForm()}),a.\u0275\u0275elementStart(7,"span",6),a.\u0275\u0275text(8,"\u786e\u5b9a"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(9,"button",7),a.\u0275\u0275listener("click",function(){return t.handleCancel()}),a.\u0275\u0275elementStart(10,"span",6),a.\u0275\u0275text(11,"\u53d6\u6d88"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275element(12,"dw-divider"),a.\u0275\u0275elementStart(13,"div",8),a.\u0275\u0275template(14,uo,43,38,"form",9),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd()),2&e&&(a.\u0275\u0275advance(3),a.\u0275\u0275property("ngIf",!t.id),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",t.id),a.\u0275\u0275advance(2),a.\u0275\u0275propertyInterpolate("angularticsLabel",t.userInfo.tenantId+","+t.userInfo.userId),a.\u0275\u0275property("dwType","primary")("disabled",!t.doc.valid)("angularticsCategory","\u4ea7\u54c1\u6863\u6848")("id",t.id?"sure-modify-product-file":"sure-create-product-file")("angularticsAction",t.id?"\u4fee\u6539-\u70b9\u51fb\u786e\u5b9a\u4fee\u6539":"\u65b0\u5efa-\u70b9\u51fb\u786e\u5b9a\u65b0\u5efa"),a.\u0275\u0275advance(3),a.\u0275\u0275property("dwType","default"),a.\u0275\u0275advance(5),a.\u0275\u0275property("ngIf",t.product_file.controls[0]))},directives:[Q.DwContentComponent,i.NgIf,j.DwButtonComponent,J.uG,K.u,u.DwAnalyticsOn,b.TranslateDirective,Li.DwDividerComponent,l.\u0275NgNoValidate,l.NgControlStatusGroup,N.DwFormDirective,l.FormGroupDirective,Ri.DwTabSetComponent,Ri.DwTabComponent,A.DwRowDirective,A.DwColDirective,N.DwFormItemComponent,N.DwFormLabelComponent,N.DwFormControlComponent,z.DwInputDirective,l.DefaultValueAccessor,l.RequiredValidator,l.NgControlStatus,l.FormControlName,l.MaxLengthValidator,$.DwSelectComponent,i.NgForOf,$.DwOptionComponent,z.DwInputGroupComponent,z.DwInputGroupWhitSuffixOrPrefixDirective,B.DwIconDirective,W.DwDatePickerComponent,W.DwRangePickerComponent,Jn.DwUploadComponent,c.DwModalComponent,i.NgStyle,S.DwCheckboxComponent,l.NumberValueAccessor,_.DwTableComponent,y.Ct,_.DwTheadComponent,_.DwTrDirective,y.Y9,y.b,_.DwTbodyComponent,_.DwTableCellDirective,_.DwThMeasureDirective,y.BL,y.$2,_.DwThAddOnComponent,_.DwCellFixedDirective,y.at,Se.DwPopconfirmDirective,Z.DwActionAuthorizedDirective,Zn.DwTooltipDirective,Ai.DwExtraFieldsComponent],pipes:[b.TranslatePipe,i.DatePipe],styles:[".ant-calendar-picker{width:100%}.content-box[_ngcontent-%COMP%]{padding-top:8px}.upFiles[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{color:#000000d9;font-size:18px;margin-bottom:12px}.upFiles[_ngcontent-%COMP%]   .chosen-file[_ngcontent-%COMP%]{margin:8px 0}.upFiles[_ngcontent-%COMP%]   .tip[_ngcontent-%COMP%]{color:#00000073;font-size:14px;margin-top:8px;white-space:nowrap}.upFiles[_ngcontent-%COMP%]   .file-name[_ngcontent-%COMP%]{width:200px;margin-left:5px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.upFiles[_ngcontent-%COMP%]   .del[_ngcontent-%COMP%]{display:none}.upFiles[_ngcontent-%COMP%]   .chosen-file[_ngcontent-%COMP%]:hover   .del[_ngcontent-%COMP%]{display:block}.upFiles[_ngcontent-%COMP%]   .chosen-file[_ngcontent-%COMP%]:hover   .del[_ngcontent-%COMP%]:hover   em[_ngcontent-%COMP%]{color:#40a9ff;cursor:pointer}.temp[_ngcontent-%COMP%]{width:calc((10 / 24 * (6 / 24)) * 100% + 8px);height:100%}.maintain_box[_ngcontent-%COMP%]{flex:1;background:#f7f7f7;padding:8px 0 4px 16px}.quickPart[_ngcontent-%COMP%]   .point[_ngcontent-%COMP%]{display:inline-block;width:6px;height:6px;border-radius:3px;background-color:#ffbe68;margin-bottom:3px}"]}),e})();var go=n(74913);function fo(e,t){1&e&&(a.\u0275\u0275elementStart(0,"span",41),a.\u0275\u0275text(1,"\u6b63\u5e38"),a.\u0275\u0275elementEnd())}function wo(e,t){1&e&&(a.\u0275\u0275elementStart(0,"span",42),a.\u0275\u0275text(1,"\u62a5\u4fee\u4e2d"),a.\u0275\u0275elementEnd())}function vo(e,t){1&e&&(a.\u0275\u0275elementStart(0,"span",43),a.\u0275\u0275text(1,"\u5df2\u56de\u6536"),a.\u0275\u0275elementEnd())}function xo(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"div",44),a.\u0275\u0275element(1,"img",45),a.\u0275\u0275elementStart(2,"div",46),a.\u0275\u0275text(3),a.\u0275\u0275pipe(4,"date"),a.\u0275\u0275elementStart(5,"div"),a.\u0275\u0275text(6),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd()),2&e){const e=a.\u0275\u0275nextContext();a.\u0275\u0275advance(3),a.\u0275\u0275textInterpolate2(" ",a.\u0275\u0275pipeBind2(4,4,e.SNHistoryInfo.end_time,"yyyy-MM-dd"),"\xa0\xa0\xa0",e.SNHistoryInfo.original_sn," \u2014> "),a.\u0275\u0275advance(3),a.\u0275\u0275textInterpolate2("",e.SNHistoryInfo.current_sn,"\xa0\xa0\xa0",e.SNHistoryInfo.employee_name,"")}}function Co(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"div"),a.\u0275\u0275text(1),a.\u0275\u0275pipe(2,"date"),a.\u0275\u0275pipe(3,"date"),a.\u0275\u0275elementEnd()),2&e){const e=a.\u0275\u0275nextContext();a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate2(" \u5b89\u88c5\u65e5\u671f:\xa0\xa0",a.\u0275\u0275pipeBind2(2,2,e.resumeInfo.installation_date,"yyyy-MM-dd"),"~",a.\u0275\u0275pipeBind2(3,5,e.resumeInfo.installation_date_end,"yyyy-MM-dd")," ")}}function _o(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"div"),a.\u0275\u0275text(1),a.\u0275\u0275pipe(2,"date"),a.\u0275\u0275elementEnd()),2&e){const e=a.\u0275\u0275nextContext();a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate1(" \u5b89\u88c5\u65e5\u671f:\xa0\xa0",a.\u0275\u0275pipeBind2(2,1,e.resumeInfo.installation_date,"yyyy-MM-dd")," ")}}function yo(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"tr"),a.\u0275\u0275elementStart(1,"td"),a.\u0275\u0275text(2),a.\u0275\u0275pipe(3,"date"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(4,"td"),a.\u0275\u0275text(5),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(6,"td"),a.\u0275\u0275text(7),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(8,"td"),a.\u0275\u0275text(9),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(10,"td"),a.\u0275\u0275text(11),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd()),2&e){const e=t.$implicit;a.\u0275\u0275advance(2),a.\u0275\u0275textInterpolate1(" ",a.\u0275\u0275pipeBind2(3,5,e.doc_date,"yyyy-MM-dd")," "),a.\u0275\u0275advance(3),a.\u0275\u0275textInterpolate1(" ",e.breakdown_code," "),a.\u0275\u0275advance(2),a.\u0275\u0275textInterpolate1(" ",e.breakdown_name," "),a.\u0275\u0275advance(2),a.\u0275\u0275textInterpolate1(" ",e.employee_name," "),a.\u0275\u0275advance(2),a.\u0275\u0275textInterpolate1(" ",e.processing_description," ")}}function So(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"tr"),a.\u0275\u0275elementStart(1,"td"),a.\u0275\u0275text(2),a.\u0275\u0275pipe(3,"date"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(4,"td"),a.\u0275\u0275text(5),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(6,"td"),a.\u0275\u0275text(7),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(8,"td"),a.\u0275\u0275text(9),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(10,"td"),a.\u0275\u0275text(11),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(12,"td"),a.\u0275\u0275text(13),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(14,"td",47),a.\u0275\u0275text(15),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(16,"td"),a.\u0275\u0275text(17),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(18,"td"),a.\u0275\u0275text(19),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(20,"td"),a.\u0275\u0275text(21),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(22,"td"),a.\u0275\u0275text(23),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(24,"td"),a.\u0275\u0275text(25),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(26,"td",47),a.\u0275\u0275text(27),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd()),2&e){const e=t.$implicit;a.\u0275\u0275advance(2),a.\u0275\u0275textInterpolate1(" ",a.\u0275\u0275pipeBind2(3,13,e.doc_date,"yyyy-MM-dd")," "),a.\u0275\u0275advance(3),a.\u0275\u0275textInterpolate1(" ",e.orig_material_code," "),a.\u0275\u0275advance(2),a.\u0275\u0275textInterpolate1(" ",e.orig_material_name," "),a.\u0275\u0275advance(2),a.\u0275\u0275textInterpolate1(" ",e.orig_specification," "),a.\u0275\u0275advance(2),a.\u0275\u0275textInterpolate1(" ",e.orig_model," "),a.\u0275\u0275advance(2),a.\u0275\u0275textInterpolate1(" ",e.orig_sn," "),a.\u0275\u0275advance(2),a.\u0275\u0275textInterpolate1(" ",e.orig_qty," "),a.\u0275\u0275advance(2),a.\u0275\u0275textInterpolate1(" ",e.new_material_code," "),a.\u0275\u0275advance(2),a.\u0275\u0275textInterpolate1(" ",e.new_material_name," "),a.\u0275\u0275advance(2),a.\u0275\u0275textInterpolate1(" ",e.new_specification," "),a.\u0275\u0275advance(2),a.\u0275\u0275textInterpolate1(" ",e.sn," "),a.\u0275\u0275advance(2),a.\u0275\u0275textInterpolate1(" ",e.employee_name," "),a.\u0275\u0275advance(2),a.\u0275\u0275textInterpolate1(" ",e.qty," ")}}function bo(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"tr"),a.\u0275\u0275elementStart(1,"td"),a.\u0275\u0275text(2),a.\u0275\u0275pipe(3,"date"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(4,"td"),a.\u0275\u0275text(5),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(6,"td"),a.\u0275\u0275text(7),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(8,"td"),a.\u0275\u0275text(9),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd()),2&e){const e=t.$implicit;a.\u0275\u0275advance(2),a.\u0275\u0275textInterpolate1(" ",a.\u0275\u0275pipeBind2(3,4,e.doc_date,"yyyy-MM-dd")," "),a.\u0275\u0275advance(3),a.\u0275\u0275textInterpolate1(" ",e.service_item_name," "),a.\u0275\u0275advance(2),a.\u0275\u0275textInterpolate1(" ",e.process_description," "),a.\u0275\u0275advance(2),a.\u0275\u0275textInterpolate1(" ",e.employee_name," ")}}function Io(e,t){if(1&e){const e=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"div"),a.\u0275\u0275elementStart(1,"a",48),a.\u0275\u0275listener("click",function(){a.\u0275\u0275restoreView(e);const t=a.\u0275\u0275nextContext().$implicit;return a.\u0275\u0275nextContext().goOldProductResume(t)}),a.\u0275\u0275text(2,"\u67e5\u770b\u539f\u4ea7\u54c1\u5c65\u5386"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd()}}function Eo(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"tr"),a.\u0275\u0275elementStart(1,"td"),a.\u0275\u0275text(2),a.\u0275\u0275pipe(3,"date"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(4,"td"),a.\u0275\u0275text(5),a.\u0275\u0275template(6,Io,3,0,"div",19),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(7,"td"),a.\u0275\u0275text(8),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(9,"td"),a.\u0275\u0275text(10),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd()),2&e){const e=t.$implicit;a.\u0275\u0275advance(2),a.\u0275\u0275textInterpolate1(" ",a.\u0275\u0275pipeBind2(3,5,e.doc_date,"yyyy-MM-dd")," "),a.\u0275\u0275advance(3),a.\u0275\u0275textInterpolate1(" ",e.type," "),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf","\u65b0\u673a\u53d1\u51fa"===e.type),a.\u0275\u0275advance(2),a.\u0275\u0275textInterpolate1(" ",e.employee_name," "),a.\u0275\u0275advance(2),a.\u0275\u0275textInterpolate1(" ",e.remark," ")}}function Do(e,t){if(1&e&&a.\u0275\u0275element(0,"img",59),2&e){const e=a.\u0275\u0275nextContext().$implicit;a.\u0275\u0275property("title",e.remark)}}function Oo(e,t){if(1&e&&a.\u0275\u0275element(0,"img",60),2&e){const e=a.\u0275\u0275nextContext().$implicit;a.\u0275\u0275property("title",e.remark)}}function Mo(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"dw-timeline-item",53),a.\u0275\u0275elementStart(1,"div",54),a.\u0275\u0275elementStart(2,"div",55),a.\u0275\u0275text(3),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(4,"div"),a.\u0275\u0275elementStart(5,"div",56),a.\u0275\u0275text(6," \u5ba2\u6237\u7f16\u53f7\uff1a"),a.\u0275\u0275elementStart(7,"span"),a.\u0275\u0275text(8),a.\u0275\u0275elementEnd(),a.\u0275\u0275template(9,Do,1,1,"img",57),a.\u0275\u0275template(10,Oo,1,1,"img",58),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(11,"div",56),a.\u0275\u0275text(12," \u5ba2\u6237\u540d\u79f0\uff1a"),a.\u0275\u0275elementStart(13,"span"),a.\u0275\u0275text(14),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd()),2&e){const e=t.$implicit,n=t.index;a.\u0275\u0275property("dwColor",0===n?"#0d9def":"#d8d8d8"),a.\u0275\u0275advance(3),a.\u0275\u0275textInterpolate2("",e.startDate,"~",e.endDate,""),a.\u0275\u0275advance(1),a.\u0275\u0275classMap(0===n?"info-box blue":"info-box"),a.\u0275\u0275advance(4),a.\u0275\u0275textInterpolate(e.new_customer_code),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",0===n&&e.remark),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",0!==n&&e.remark),a.\u0275\u0275advance(4),a.\u0275\u0275textInterpolate(e.new_customer_name)}}function Po(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"dw-tab",49),a.\u0275\u0275elementStart(1,"div",50),a.\u0275\u0275elementStart(2,"dw-timeline",51),a.\u0275\u0275template(3,Mo,15,9,"dw-timeline-item",52),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd()),2&e){const e=a.\u0275\u0275nextContext();a.\u0275\u0275advance(3),a.\u0275\u0275property("ngForOf",e.transferList)}}const ko=function(){return{x:"900px"}},Fo=function(){return{x:"1400px"}},Vo=function(){return{x:"800px"}};let To=(()=>{class e{constructor(e,t,n,i,r,a,o){this.router=e,this.fb=t,this.activeRoute=n,this.productFileSrv=i,this.analytics=r,this.userService=a,this.message=o,this.DW_IN_MFA=x.ns,this.resumeInfo={product_file_code:"",product_file_name:"",item_group_name:"",specification:"",model:"",sn:"",service_site_name:"",location:"",customer_name:"",delivery_date:"",installation_date:"",acceptance_date:"",expiry_date:"",acceptance_person:"",commissioning_person:"",remark:""},this.machineList=[],this.transferList=[],this.SNHistoryInfo={employee_name:"",current_sn:"",original_sn:"",end_time:""},this.userInfo={tenantId:"",userId:""}}ngOnInit(){this.userInfo=this.userService.getUserInfo(),this.activeRoute.queryParams.subscribe(e=>{console.log(e),this.paramId=e.id,this.fromPage=e.fromPage||"1",this.productFileSrv.getProductFileResume(this.paramId).subscribe(e=>{console.log(e),this.resumeInfo=e.data.product_file[0],this.breakdownList=e.data.service_doc_breakdown||[],this.partList=e.data.service_doc_partchange||[],this.serviceList=e.data.service_doc_serviceitem||[],this.machineList=e.data.machine_receive_doc||[],this.productFileSrv.getProductTransfersByFileId(this.paramId).subscribe(e=>{if(e.data.product_transfer.length){const t=e.data.product_transfer.concat([{new_customer_code:e.data.product_transfer[e.data.product_transfer.length-1].original_customer_code,new_customer_name:e.data.product_transfer[e.data.product_transfer.length-1].original_customer_name,transfer_date:this.resumeInfo.delivery_date||"- -",remark:""}]);t.forEach((e,n)=>{t[n].startDate=t[n].transfer_date?t[n].transfer_date.split(" ")[0]:"- -",t[n].endDate=0===n?"\u81f3\u4eca":t[n-1].transfer_date?t[n-1].transfer_date.split(" ")[0]:"- -"}),this.transferList=t}},e=>{e.hasOwnProperty("error")&&e.error.hasOwnProperty("errorMessage")&&e.error.errorMessage&&this.message.error(e.error.errorMessage)})},e=>{e.hasOwnProperty("error")&&e.error.hasOwnProperty("errorMessage")&&e.error.errorMessage&&this.message.error(e.error.errorMessage)}),this.productFileSrv.getSNChangeHistory(this.paramId).subscribe(e=>{this.SNHistoryInfo=e.data[0]},e=>{e.hasOwnProperty("error")&&e.error.hasOwnProperty("errorMessage")&&e.error.errorMessage&&this.message.error(e.error.errorMessage)})})}onTabChange(e){console.log(e.index);const t=e.index;this.analytics.eventTrack.next({action:0===t?"\u5c65\u5386-\u70b9\u51fb\u6545\u969c\u60c5\u51b5\u9875\u7b7e":1===t?"\u5c65\u5386-\u70b9\u51fb\u96f6\u914d\u4ef6\u66f4\u6362\u9875\u7b7e":2===t?"\u5c65\u5386-\u70b9\u51fb\u670d\u52a1\u8bb0\u5f55\u9875\u7b7e":3===t?"\u5c65\u5386-\u70b9\u51fb\u6574\u673a\u8fd4\u4fee\u8bb0\u5f55\u9875\u7b7e":"\u5c65\u5386-\u70b9\u51fb\u8fc7\u6237\u8bb0\u5f55\u9875\u7b7e",properties:{category:"\u4ea7\u54c1\u6863\u6848",label:this.userInfo.tenantId+","+this.userInfo.userId,value:0}})}goOldProductResume(e){this.router.navigateByUrl(`${this.DW_IN_MFA?"/assc_crs":""}/bases/product-file/product-resume?id=${e.product_file_id}`)}goBack(){const e={relativeTo:this.activeRoute};console.log(this.fromPage),1===Number(this.fromPage)?this.router.navigate(["../"],e):this.router.navigate(["../recycled-list"],e)}}return e.\u0275fac=function(t){return new(t||e)(a.\u0275\u0275directiveInject(r.Router),a.\u0275\u0275directiveInject(l.FormBuilder),a.\u0275\u0275directiveInject(r.ActivatedRoute),a.\u0275\u0275directiveInject(d.U),a.\u0275\u0275directiveInject(u.DwAnalytics),a.\u0275\u0275directiveInject(h.DwUserService),a.\u0275\u0275directiveInject(s.DwMessageService))},e.\u0275cmp=a.\u0275\u0275defineComponent({type:e,selectors:[["app-product-resume"]],decls:189,vars:86,consts:[[1,"dw-f-content-list","layoutClass","sales_layout"],[1,"issue_layout_head"],["translate","",2,"float","left","margin-right","6px","margin-left","-5px",3,"click"],["src","../../../../../../assets/img/arrow-left.svg","alt","\u8fd4\u56de"],[1,"issue_layout_title"],[2,"margin-left","3px"],["color","#e5e5e5"],[1,"content-box"],["dw-form","","dw-row","",1,"sa-form"],["dw-col","","dwSpan","10",1,"box"],[1,"sub-title"],[1,"item-wrap"],[3,"dwSm","dwXs"],["class","state_tip",4,"ngIf"],["class","state_tip zise",4,"ngIf"],["class","state_tip gray",4,"ngIf"],[2,"display","flex"],[2,"flex","1"],["class","timeItem-remark",4,"ngIf"],[4,"ngIf"],["dw-col","","dwSpan","14",1,"box2"],[1,"my-tab",2,"padding","8px 0 20px 20px",3,"dwTabPosition","dwType","dwAnimated","dwSelectChange"],["dwTitle","\u6545\u969c\u60c5\u51b5","id","product-resume-breakdown-tab"],[3,"dwData","dwScroll"],["dwBreakdownTable",""],["dw-tr",""],["dw-th",""],["translate",""],[4,"ngFor","ngForOf"],["dwTitle","\u96f6\u914d\u4ef6\u66f4\u6362","id","product-resume-material-tab"],["dwPartTable",""],["dw-th","","dwWidth","100px"],["dw-th","","dwWidth","120px"],["dw-th","","dwAlign","right","dwWidth","100px"],["dwTitle","\u670d\u52a1\u8bb0\u5f55","id","product-resume-record-tab"],["dwServiceTable",""],["dwTitle","\u6574\u673a\u8fd4\u4fee\u8bb0\u5f55","id","product-resume-machine-tab"],[3,"dwData"],["dwMachineTable",""],["dw-th","","dwWidth","160px"],["dwTitle","\u8fc7\u6237\u8bb0\u5f55","id","product-resume-transfer-record-tab",4,"ngIf"],[1,"state_tip"],[1,"state_tip","zise"],[1,"state_tip","gray"],[1,"timeItem-remark"],["src","../../../../../../assets/img/icon_information_web.png","alt","remark"],[1,"distribute-remark"],["dwAlign","right"],[3,"click"],["dwTitle","\u8fc7\u6237\u8bb0\u5f55","id","product-resume-transfer-record-tab"],[1,"record"],[1,"timeline"],["class","timeItem",3,"dwColor",4,"ngFor","ngForOf"],[1,"timeItem",3,"dwColor"],[1,"card"],[1,"date"],[1,"item"],["src","../../../../../../assets/img/remark_white.png","alt","remark",3,"title",4,"ngIf"],["src","../../../../../../assets/img/remark_gray.png","alt","remark",3,"title",4,"ngIf"],["src","../../../../../../assets/img/remark_white.png","alt","remark",3,"title"],["src","../../../../../../assets/img/remark_gray.png","alt","remark",3,"title"]],template:function(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"dw-content",0),a.\u0275\u0275elementStart(1,"div",1),a.\u0275\u0275elementStart(2,"a",2),a.\u0275\u0275listener("click",function(){return t.goBack()}),a.\u0275\u0275element(3,"img",3),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(4,"h2",4),a.\u0275\u0275elementStart(5,"span",5),a.\u0275\u0275text(6,"\u4ea7\u54c1\u5c65\u5386"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275element(7,"hr",6),a.\u0275\u0275elementStart(8,"div",7),a.\u0275\u0275elementStart(9,"form",8),a.\u0275\u0275elementStart(10,"div",9),a.\u0275\u0275elementStart(11,"div",10),a.\u0275\u0275text(12,"\u57fa\u672c\u4fe1\u606f"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(13,"div",11),a.\u0275\u0275elementStart(14,"dw-form-item"),a.\u0275\u0275elementStart(15,"dw-form-control",12),a.\u0275\u0275text(16),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(17,"dw-form-item"),a.\u0275\u0275elementStart(18,"dw-form-control",12),a.\u0275\u0275text(19),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(20,"dw-form-item"),a.\u0275\u0275elementStart(21,"dw-form-control",12),a.\u0275\u0275text(22," \u552e\u540e\u72b6\u6001:\xa0\xa0 "),a.\u0275\u0275template(23,fo,2,0,"span",13),a.\u0275\u0275template(24,wo,2,0,"span",14),a.\u0275\u0275template(25,vo,2,0,"span",15),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(26,"dw-form-item"),a.\u0275\u0275elementStart(27,"dw-form-control",12),a.\u0275\u0275text(28),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(29,"dw-form-item"),a.\u0275\u0275elementStart(30,"dw-form-control",12),a.\u0275\u0275elementStart(31,"div",16),a.\u0275\u0275elementStart(32,"span"),a.\u0275\u0275text(33," \u89c4\u683c:\xa0\xa0 "),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(34,"span",17),a.\u0275\u0275text(35),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(36,"dw-form-item"),a.\u0275\u0275elementStart(37,"dw-form-control",12),a.\u0275\u0275text(38),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(39,"dw-form-item"),a.\u0275\u0275elementStart(40,"dw-form-control",12),a.\u0275\u0275text(41),a.\u0275\u0275template(42,xo,7,7,"div",18),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(43,"dw-form-item"),a.\u0275\u0275elementStart(44,"dw-form-control",12),a.\u0275\u0275text(45),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(46,"dw-form-item"),a.\u0275\u0275elementStart(47,"dw-form-control",12),a.\u0275\u0275text(48),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(49,"dw-form-item"),a.\u0275\u0275elementStart(50,"dw-form-control",12),a.\u0275\u0275text(51),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(52,"dw-form-item"),a.\u0275\u0275elementStart(53,"dw-form-control",12),a.\u0275\u0275text(54),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(55,"dw-form-item"),a.\u0275\u0275elementStart(56,"dw-form-control",12),a.\u0275\u0275text(57),a.\u0275\u0275pipe(58,"date"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(59,"dw-form-item"),a.\u0275\u0275elementStart(60,"dw-form-control",12),a.\u0275\u0275template(61,Co,4,8,"div",19),a.\u0275\u0275template(62,_o,3,4,"div",19),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(63,"dw-form-item"),a.\u0275\u0275elementStart(64,"dw-form-control",12),a.\u0275\u0275text(65),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(66,"dw-form-item"),a.\u0275\u0275elementStart(67,"dw-form-control",12),a.\u0275\u0275text(68),a.\u0275\u0275pipe(69,"date"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(70,"dw-form-item"),a.\u0275\u0275elementStart(71,"dw-form-control",12),a.\u0275\u0275text(72),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(73,"dw-form-item"),a.\u0275\u0275elementStart(74,"dw-form-control",12),a.\u0275\u0275text(75),a.\u0275\u0275pipe(76,"date"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(77,"dw-form-item"),a.\u0275\u0275elementStart(78,"dw-form-control",12),a.\u0275\u0275text(79),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(80,"div",20),a.\u0275\u0275elementStart(81,"dw-tabset",21),a.\u0275\u0275listener("dwSelectChange",function(e){return t.onTabChange(e)}),a.\u0275\u0275elementStart(82,"dw-tab",22),a.\u0275\u0275elementStart(83,"dw-table",23,24),a.\u0275\u0275elementStart(85,"thead"),a.\u0275\u0275elementStart(86,"tr",25),a.\u0275\u0275elementStart(87,"th",26),a.\u0275\u0275elementStart(88,"span",27),a.\u0275\u0275text(89,"\u65e5\u671f"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(90,"th",26),a.\u0275\u0275elementStart(91,"span",27),a.\u0275\u0275text(92,"\u6545\u969c\u7f16\u53f7"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(93,"th",26),a.\u0275\u0275elementStart(94,"span",27),a.\u0275\u0275text(95,"\u6545\u969c\u540d\u79f0"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(96,"th",26),a.\u0275\u0275elementStart(97,"span",27),a.\u0275\u0275text(98,"\u5de5\u7a0b\u5e08"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(99,"th",26),a.\u0275\u0275elementStart(100,"span",27),a.\u0275\u0275text(101,"\u5904\u7406\u65b9\u6848"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(102,"tbody"),a.\u0275\u0275template(103,yo,12,8,"tr",28),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(104,"dw-tab",29),a.\u0275\u0275elementStart(105,"dw-table",23,30),a.\u0275\u0275elementStart(107,"thead"),a.\u0275\u0275elementStart(108,"tr",25),a.\u0275\u0275elementStart(109,"th",31),a.\u0275\u0275elementStart(110,"span",27),a.\u0275\u0275text(111,"\u65e5\u671f"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(112,"th",31),a.\u0275\u0275elementStart(113,"span",27),a.\u0275\u0275text(114,"\u539f\u96f6\u914d\u4ef6\u7f16\u53f7"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(115,"th",31),a.\u0275\u0275elementStart(116,"span",27),a.\u0275\u0275text(117,"\u539f\u96f6\u914d\u4ef6\u540d\u79f0"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(118,"th",31),a.\u0275\u0275elementStart(119,"span",27),a.\u0275\u0275text(120,"\u539f\u96f6\u914d\u4ef6\u89c4\u683c"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(121,"th",31),a.\u0275\u0275elementStart(122,"span",27),a.\u0275\u0275text(123,"\u539f\u96f6\u914d\u4ef6\u578b\u53f7"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(124,"th",32),a.\u0275\u0275elementStart(125,"span",27),a.\u0275\u0275text(126,"\u539f\u96f6\u914d\u4ef6\u5e8f\u5217\u53f7"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(127,"th",33),a.\u0275\u0275elementStart(128,"span",27),a.\u0275\u0275text(129,"\u539f\u96f6\u914d\u4ef6\u6570\u91cf"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(130,"th",31),a.\u0275\u0275elementStart(131,"span",27),a.\u0275\u0275text(132,"\u65b0\u96f6\u914d\u4ef6\u7f16\u53f7"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(133,"th",31),a.\u0275\u0275elementStart(134,"span",27),a.\u0275\u0275text(135,"\u65b0\u96f6\u914d\u4ef6\u540d\u79f0"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(136,"th",31),a.\u0275\u0275elementStart(137,"span",27),a.\u0275\u0275text(138,"\u65b0\u96f6\u914d\u4ef6\u89c4\u683c"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(139,"th",32),a.\u0275\u0275elementStart(140,"span",27),a.\u0275\u0275text(141,"\u65b0\u96f6\u914d\u4ef6\u5e8f\u5217\u53f7"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(142,"th",31),a.\u0275\u0275elementStart(143,"span",27),a.\u0275\u0275text(144,"\u5de5\u7a0b\u5e08"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(145,"th",33),a.\u0275\u0275elementStart(146,"span",27),a.\u0275\u0275text(147,"\u66f4\u6362\u6570\u91cf"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(148,"tbody"),a.\u0275\u0275template(149,So,28,16,"tr",28),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(150,"dw-tab",34),a.\u0275\u0275elementStart(151,"dw-table",23,35),a.\u0275\u0275elementStart(153,"thead"),a.\u0275\u0275elementStart(154,"tr",25),a.\u0275\u0275elementStart(155,"th",26),a.\u0275\u0275elementStart(156,"span",27),a.\u0275\u0275text(157,"\u65e5\u671f"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(158,"th",26),a.\u0275\u0275elementStart(159,"span",27),a.\u0275\u0275text(160,"\u670d\u52a1\u9879\u76ee"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(161,"th",26),a.\u0275\u0275elementStart(162,"span",27),a.\u0275\u0275text(163,"\u670d\u52a1\u7ed3\u679c"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(164,"th",26),a.\u0275\u0275elementStart(165,"span",27),a.\u0275\u0275text(166,"\u5de5\u7a0b\u5e08"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(167,"tbody"),a.\u0275\u0275template(168,bo,10,7,"tr",28),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(169,"dw-tab",36),a.\u0275\u0275elementStart(170,"dw-table",37,38),a.\u0275\u0275elementStart(172,"thead"),a.\u0275\u0275elementStart(173,"tr",25),a.\u0275\u0275elementStart(174,"th",32),a.\u0275\u0275elementStart(175,"span",27),a.\u0275\u0275text(176,"\u65e5\u671f"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(177,"th",32),a.\u0275\u0275elementStart(178,"span",27),a.\u0275\u0275text(179,"\u8fd4\u5382/\u53d1\u51fa"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(180,"th",32),a.\u0275\u0275elementStart(181,"span",27),a.\u0275\u0275text(182,"\u6536\u53d1\u4eba\u5458"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(183,"th",39),a.\u0275\u0275elementStart(184,"span",27),a.\u0275\u0275text(185,"\u5907\u6ce8"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(186,"tbody"),a.\u0275\u0275template(187,Eo,11,8,"tr",28),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275template(188,Po,4,1,"dw-tab",40),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd()),2&e){const e=a.\u0275\u0275reference(84),n=a.\u0275\u0275reference(106),i=a.\u0275\u0275reference(152),r=a.\u0275\u0275reference(171);a.\u0275\u0275advance(15),a.\u0275\u0275property("dwSm",17)("dwXs",24),a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate1(" \u54c1\u53f7:\xa0\xa0",t.resumeInfo.product_file_code," "),a.\u0275\u0275advance(2),a.\u0275\u0275property("dwSm",17)("dwXs",24),a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate1(" \u54c1\u540d:\xa0\xa0",t.resumeInfo.product_file_name," "),a.\u0275\u0275advance(2),a.\u0275\u0275property("dwSm",17)("dwXs",24),a.\u0275\u0275advance(2),a.\u0275\u0275property("ngIf","1"===t.resumeInfo.service_status),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf","2"===t.resumeInfo.service_status),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf","3"===t.resumeInfo.service_status),a.\u0275\u0275advance(2),a.\u0275\u0275property("dwSm",17)("dwXs",24),a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate1(" \u4ea7\u54c1\u5206\u7c7b:\xa0\xa0",t.resumeInfo.item_group_name," "),a.\u0275\u0275advance(2),a.\u0275\u0275property("dwSm",17)("dwXs",24),a.\u0275\u0275advance(5),a.\u0275\u0275textInterpolate1(" ",t.resumeInfo.specification," "),a.\u0275\u0275advance(2),a.\u0275\u0275property("dwSm",17)("dwXs",24),a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate1(" \u578b\u53f7:\xa0\xa0",t.resumeInfo.model," "),a.\u0275\u0275advance(2),a.\u0275\u0275property("dwSm",17)("dwXs",24),a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate2(" ","1"===t.resumeInfo.file_type?"\u5e8f\u5217\u53f7:":"\u9879\u76ee\u53f7:","\xa0\xa0",t.resumeInfo.sn," "),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",t.SNHistoryInfo),a.\u0275\u0275advance(2),a.\u0275\u0275property("dwSm",17)("dwXs",24),a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate1(" \u670d\u52a1\u7ad9\u70b9:\xa0\xa0",t.resumeInfo.service_site_name," "),a.\u0275\u0275advance(2),a.\u0275\u0275property("dwSm",17)("dwXs",24),a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate1(" \u4f7f\u7528\u5730\u70b9:\xa0\xa0",t.resumeInfo.location," "),a.\u0275\u0275advance(2),a.\u0275\u0275property("dwSm",17)("dwXs",24),a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate1(" \u51fa\u5382\u5ba2\u6237:\xa0\xa0",t.resumeInfo.exfactory_customer_name," "),a.\u0275\u0275advance(2),a.\u0275\u0275property("dwSm",17)("dwXs",24),a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate1(" \u5ba2\u6237:\xa0\xa0",t.resumeInfo.customer_name," "),a.\u0275\u0275advance(2),a.\u0275\u0275property("dwSm",17)("dwXs",24),a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate1(" \u51fa\u5e93\u65e5\u671f:\xa0\xa0",a.\u0275\u0275pipeBind2(58,74,t.resumeInfo.delivery_date,"yyyy-MM-dd")," "),a.\u0275\u0275advance(3),a.\u0275\u0275property("dwSm",17)("dwXs",24),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",t.resumeInfo.installation_date&&t.resumeInfo.installation_date_end),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",!t.resumeInfo.installation_date_end),a.\u0275\u0275advance(2),a.\u0275\u0275property("dwSm",17)("dwXs",24),a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate1(" \u8c03\u8bd5\u4eba\u5458:\xa0\xa0",t.resumeInfo.commissioning_person," "),a.\u0275\u0275advance(2),a.\u0275\u0275property("dwSm",17)("dwXs",24),a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate1(" \u9a8c\u6536\u65e5\u671f:\xa0\xa0",a.\u0275\u0275pipeBind2(69,77,t.resumeInfo.acceptance_date,"yyyy-MM-dd")," "),a.\u0275\u0275advance(3),a.\u0275\u0275property("dwSm",17)("dwXs",24),a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate1(" \u9a8c\u6536\u4eba\u5458:\xa0\xa0",t.resumeInfo.acceptance_person," "),a.\u0275\u0275advance(2),a.\u0275\u0275property("dwSm",17)("dwXs",24),a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate1(" \u4fdd\u4fee\u622a\u6b62\u65e5\u671f:\xa0\xa0",a.\u0275\u0275pipeBind2(76,80,t.resumeInfo.expiry_date,"yyyy-MM-dd")," "),a.\u0275\u0275advance(3),a.\u0275\u0275property("dwSm",17)("dwXs",24),a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate1(" \u5907\u6ce8:\xa0\xa0",t.resumeInfo.remark," "),a.\u0275\u0275advance(2),a.\u0275\u0275property("dwTabPosition","top")("dwType","line")("dwAnimated",!1),a.\u0275\u0275advance(2),a.\u0275\u0275property("dwData",t.breakdownList)("dwScroll",a.\u0275\u0275pureFunction0(83,ko)),a.\u0275\u0275advance(20),a.\u0275\u0275property("ngForOf",e.data),a.\u0275\u0275advance(2),a.\u0275\u0275property("dwData",t.partList)("dwScroll",a.\u0275\u0275pureFunction0(84,Fo)),a.\u0275\u0275advance(44),a.\u0275\u0275property("ngForOf",n.data),a.\u0275\u0275advance(2),a.\u0275\u0275property("dwData",t.serviceList)("dwScroll",a.\u0275\u0275pureFunction0(85,Vo)),a.\u0275\u0275advance(17),a.\u0275\u0275property("ngForOf",i.data),a.\u0275\u0275advance(2),a.\u0275\u0275property("dwData",t.machineList),a.\u0275\u0275advance(17),a.\u0275\u0275property("ngForOf",r.data),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",t.transferList.length)}},directives:[Q.DwContentComponent,b.TranslateDirective,l.\u0275NgNoValidate,l.NgControlStatusGroup,l.NgForm,N.DwFormDirective,A.DwRowDirective,A.DwColDirective,N.DwFormItemComponent,N.DwFormControlComponent,i.NgIf,Ri.DwTabSetComponent,Ri.DwTabComponent,_.DwTableComponent,y.Ct,_.DwTheadComponent,_.DwTrDirective,_.DwTableCellDirective,_.DwThMeasureDirective,y.BL,_.DwTbodyComponent,i.NgForOf,_.DwCellAlignDirective,go.DwTimelineComponent,go.DwTimelineItemComponent],pipes:[i.DatePipe],styles:[".content-box[_ngcontent-%COMP%]{padding-top:0}.sa-form[_ngcontent-%COMP%]{height:100%;overflow-y:auto}.box[_ngcontent-%COMP%]{border-right:1px solid #e5e5e5;min-height:100%}.item-wrap[_ngcontent-%COMP%]{width:100%;padding-left:20px}.sub-title[_ngcontent-%COMP%]:first-of-type{margin-top:24px}.state_tip[_ngcontent-%COMP%]{display:inline-block;width:64px;height:26px;line-height:26px;text-align:center;border-radius:15px;color:#fff;font-size:13px;background:#29cc8d}.state_tip.zise[_ngcontent-%COMP%]{background:#5c64d1}.state_tip.gray[_ngcontent-%COMP%]{background:#5c5c5c}.record[_ngcontent-%COMP%]{padding:4px 12px}.record[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]{color:#000000d9;font-size:14px;font-weight:bold;margin-bottom:8px}.record[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .info-box[_ngcontent-%COMP%]{width:260px;background:#e6e6e6;padding:8px 8px 8px 16px}.record[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .info-box[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{color:#000000d9;font-size:14px;line-height:26px}.record[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .info-box[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#000000d9;font-weight:bold}.record[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .info-box[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{float:right;width:14px}.record[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .blue[_ngcontent-%COMP%]{background:#0d9def}.record[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .blue[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{color:#ffffffd9}.record[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .blue[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#fff}.record[_ngcontent-%COMP%]   .arrow[_ngcontent-%COMP%]{margin:20px 0}.timeItem-remark[_ngcontent-%COMP%]{display:inline-block;margin-left:8px;cursor:pointer;position:relative}.timeItem-remark[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:16px;height:16px;margin-top:-3px}.distribute-remark[_ngcontent-%COMP%]{display:none;position:absolute;top:28px;left:50%;transform:translate(-50%);padding:8px 14px;color:#fff;font-size:12px;z-index:4;white-space:nowrap;background:rgba(0,0,0,.75);border-radius:4px}.distribute-remark.word-wrap[_ngcontent-%COMP%]{width:210px;white-space:normal}.timeItem-remark[_ngcontent-%COMP%]:hover   .distribute-remark[_ngcontent-%COMP%]{display:block}"]}),e})();var Lo=n(32276);const Ro=["child"];function Ao(e,t){1&e&&(a.\u0275\u0275elementStart(0,"div",15),a.\u0275\u0275text(1,"\u5e8f\u5217\u53f7"),a.\u0275\u0275elementEnd())}function No(e,t){1&e&&(a.\u0275\u0275elementStart(0,"div",15),a.\u0275\u0275text(1,"\u9879\u76ee\u53f7"),a.\u0275\u0275elementEnd())}function $o(e,t){1&e&&(a.\u0275\u0275elementStart(0,"div",15),a.\u0275\u0275text(1,"\u5e8f\u5217\u53f7/\u9879\u76ee\u53f7"),a.\u0275\u0275elementEnd())}function jo(e,t){if(1&e){const e=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"em",42),a.\u0275\u0275listener("click",function(){return a.\u0275\u0275restoreView(e),a.\u0275\u0275nextContext(2).clear()}),a.\u0275\u0275elementEnd()}}function zo(e,t){if(1&e&&a.\u0275\u0275template(0,jo,1,0,"em",41),2&e){const e=a.\u0275\u0275nextContext();a.\u0275\u0275property("ngIf",e.searchForm.value.sn)}}function Bo(e,t){1&e&&(a.\u0275\u0275elementStart(0,"th",43),a.\u0275\u0275elementStart(1,"span",44),a.\u0275\u0275text(2,"\u56de\u6536\u65e5\u671f"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd())}function qo(e,t){1&e&&(a.\u0275\u0275elementStart(0,"th",45),a.\u0275\u0275elementStart(1,"span",44),a.\u0275\u0275text(2,"\u7f16\u7801"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd())}function Wo(e,t){1&e&&(a.\u0275\u0275elementStart(0,"th",46),a.\u0275\u0275elementStart(1,"span",44),a.\u0275\u0275text(2,"\u540d\u79f0"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd())}function Go(e,t){1&e&&(a.\u0275\u0275elementStart(0,"span",44),a.\u0275\u0275text(1,"\u5e8f\u5217\u53f7"),a.\u0275\u0275elementEnd())}function Uo(e,t){1&e&&(a.\u0275\u0275elementStart(0,"span",44),a.\u0275\u0275text(1,"\u9879\u76ee\u53f7"),a.\u0275\u0275elementEnd())}function Ho(e,t){1&e&&(a.\u0275\u0275elementStart(0,"span",44),a.\u0275\u0275text(1,"\u5e8f\u5217\u53f7/\u9879\u76ee\u53f7"),a.\u0275\u0275elementEnd())}function Xo(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"th",47),a.\u0275\u0275template(1,Go,2,0,"span",48),a.\u0275\u0275template(2,Uo,2,0,"span",48),a.\u0275\u0275template(3,Ho,2,0,"span",48),a.\u0275\u0275elementEnd()),2&e){const e=a.\u0275\u0275nextContext();a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf","1"===e.fileType),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf","2"===e.fileType),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf","0"===e.fileType)}}const Qo=function(e){return{display:e}};function Ko(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"th",49),a.\u0275\u0275elementStart(1,"span",44),a.\u0275\u0275text(2,"\u7c7b\u578b"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd()),2&e){const e=a.\u0275\u0275nextContext();a.\u0275\u0275property("ngStyle",a.\u0275\u0275pureFunction1(1,Qo,"0"===e.fileType?"":"none"))}}function Jo(e,t){1&e&&(a.\u0275\u0275elementStart(0,"th",50),a.\u0275\u0275elementStart(1,"span",44),a.\u0275\u0275text(2,"\u4ea7\u54c1\u5206\u7c7b"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd())}function Zo(e,t){1&e&&(a.\u0275\u0275elementStart(0,"th",51),a.\u0275\u0275elementStart(1,"span",44),a.\u0275\u0275text(2,"\u89c4\u683c"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd())}function Yo(e,t){1&e&&(a.\u0275\u0275elementStart(0,"th",52),a.\u0275\u0275elementStart(1,"span",44),a.\u0275\u0275text(2,"\u578b\u53f7"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd())}function el(e,t){1&e&&(a.\u0275\u0275elementStart(0,"th",53),a.\u0275\u0275elementStart(1,"span",44),a.\u0275\u0275text(2,"\u4f7f\u7528\u5730\u70b9"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd())}function tl(e,t){1&e&&(a.\u0275\u0275elementStart(0,"th",54),a.\u0275\u0275elementStart(1,"span",44),a.\u0275\u0275text(2,"\u51fa\u5e93\u65e5\u671f"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd())}function nl(e,t){1&e&&(a.\u0275\u0275elementStart(0,"th",55),a.\u0275\u0275elementStart(1,"span",44),a.\u0275\u0275text(2,"\u5b89\u88c5\u65e5\u671f"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd())}function il(e,t){1&e&&(a.\u0275\u0275elementStart(0,"th",54),a.\u0275\u0275elementStart(1,"span",44),a.\u0275\u0275text(2,"\u9a8c\u6536\u65e5\u671f"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd())}function rl(e,t){1&e&&(a.\u0275\u0275elementStart(0,"th",56),a.\u0275\u0275elementStart(1,"span",44),a.\u0275\u0275text(2,"\u4fdd\u4fee\u622a\u81f3\u65e5\u671f"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd())}function al(e,t){1&e&&(a.\u0275\u0275elementStart(0,"th",57),a.\u0275\u0275elementStart(1,"span",44),a.\u0275\u0275text(2,"\u63cf\u8ff0"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd())}function ol(e,t){1&e&&(a.\u0275\u0275elementStart(0,"th",58),a.\u0275\u0275elementStart(1,"span",44),a.\u0275\u0275text(2,"\u552e\u540e\u72b6\u6001"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd()),2&e&&a.\u0275\u0275property("dwAlign","center")}function ll(e,t){1&e&&(a.\u0275\u0275elementStart(0,"th",58),a.\u0275\u0275elementStart(1,"span",44),a.\u0275\u0275text(2,"\u4ea7\u54c1\u5c65\u5386"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd()),2&e&&a.\u0275\u0275property("dwAlign","center")}function dl(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"td",65),a.\u0275\u0275text(1),a.\u0275\u0275pipe(2,"date"),a.\u0275\u0275elementEnd()),2&e){const e=a.\u0275\u0275nextContext().$implicit;a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate1(" ",a.\u0275\u0275pipeBind2(2,1,e.recycled_date,"yyyy-MM-dd HH:mm:ss")," ")}}function sl(e,t){if(1&e){const e=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"td",65),a.\u0275\u0275elementStart(1,"a",66),a.\u0275\u0275listener("click",function(){a.\u0275\u0275restoreView(e);const t=a.\u0275\u0275nextContext().$implicit;return a.\u0275\u0275nextContext().detail(t)}),a.\u0275\u0275text(2),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd()}if(2&e){const e=a.\u0275\u0275nextContext().$implicit,t=a.\u0275\u0275nextContext();a.\u0275\u0275advance(1),a.\u0275\u0275propertyInterpolate("angularticsLabel",t.userInfo.tenantId+","+t.userInfo.userId),a.\u0275\u0275property("angularticsCategory","\u4ea7\u54c1\u6863\u6848"),a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate(e.product_file_code)}}function cl(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"td",65),a.\u0275\u0275text(1),a.\u0275\u0275elementEnd()),2&e){const e=a.\u0275\u0275nextContext().$implicit;a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate1(" ",e.product_file_name," ")}}function ml(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"td",65),a.\u0275\u0275text(1),a.\u0275\u0275elementEnd()),2&e){const e=a.\u0275\u0275nextContext().$implicit;a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate1(" ",e.sn," ")}}function pl(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"td",67),a.\u0275\u0275text(1),a.\u0275\u0275elementEnd()),2&e){const e=a.\u0275\u0275nextContext().$implicit,t=a.\u0275\u0275nextContext();a.\u0275\u0275property("ngStyle",a.\u0275\u0275pureFunction1(2,Qo,"0"===t.fileType?"":"none")),a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate1(" ","1"===e.file_type?"\u5355\u673a":"\u4ea7\u7ebf/\u9879\u76ee"," ")}}function ul(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"td",65),a.\u0275\u0275text(1),a.\u0275\u0275elementEnd()),2&e){const e=a.\u0275\u0275nextContext().$implicit;a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate1(" ",e.item_group_name," ")}}function hl(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"td",65),a.\u0275\u0275text(1),a.\u0275\u0275elementEnd()),2&e){const e=a.\u0275\u0275nextContext().$implicit;a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate1(" ",e.specification," ")}}function gl(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"td",65),a.\u0275\u0275text(1),a.\u0275\u0275elementEnd()),2&e){const e=a.\u0275\u0275nextContext().$implicit;a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate1(" ",e.model," ")}}function fl(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"td",65),a.\u0275\u0275text(1),a.\u0275\u0275elementEnd()),2&e){const e=a.\u0275\u0275nextContext().$implicit;a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate1(" ",e.location," ")}}function wl(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"td",65),a.\u0275\u0275text(1),a.\u0275\u0275pipe(2,"date"),a.\u0275\u0275elementEnd()),2&e){const e=a.\u0275\u0275nextContext().$implicit;a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate1(" ",a.\u0275\u0275pipeBind2(2,1,e.delivery_date,"yyyy/MM/dd")," ")}}function vl(e,t){if(1&e&&(a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275text(1),a.\u0275\u0275pipe(2,"date"),a.\u0275\u0275pipe(3,"date"),a.\u0275\u0275elementContainerEnd()),2&e){const e=a.\u0275\u0275nextContext(2).$implicit;a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate2(" ",a.\u0275\u0275pipeBind2(2,2,e.installation_date,"yyyy/MM/dd"),"~",a.\u0275\u0275pipeBind2(3,5,e.installation_date_end,"yyyy/MM/dd")," ")}}function xl(e,t){if(1&e&&(a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275text(1),a.\u0275\u0275pipe(2,"date"),a.\u0275\u0275elementContainerEnd()),2&e){const e=a.\u0275\u0275nextContext(2).$implicit;a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate1(" ",a.\u0275\u0275pipeBind2(2,1,e.installation_date,"yyyy/MM/dd")," ")}}function Cl(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"td",65),a.\u0275\u0275template(1,vl,4,8,"ng-container",68),a.\u0275\u0275template(2,xl,3,4,"ng-container",68),a.\u0275\u0275elementEnd()),2&e){const e=a.\u0275\u0275nextContext().$implicit;a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",e.installation_date&&e.installation_date_end),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",!e.installation_date_end)}}function _l(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"td",65),a.\u0275\u0275text(1),a.\u0275\u0275pipe(2,"date"),a.\u0275\u0275elementEnd()),2&e){const e=a.\u0275\u0275nextContext().$implicit;a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate1(" ",a.\u0275\u0275pipeBind2(2,1,e.acceptance_date,"yyyy/MM/dd")," ")}}function yl(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"td",65),a.\u0275\u0275text(1),a.\u0275\u0275pipe(2,"date"),a.\u0275\u0275elementEnd()),2&e){const e=a.\u0275\u0275nextContext().$implicit;a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate1(" ",a.\u0275\u0275pipeBind2(2,1,e.expiry_date,"yyyy/MM/dd")," ")}}function Sl(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"td",69),a.\u0275\u0275text(1),a.\u0275\u0275elementEnd()),2&e){const e=a.\u0275\u0275nextContext().$implicit;a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate1(" ",e.product_description," ")}}function bl(e,t){1&e&&(a.\u0275\u0275elementStart(0,"span",74),a.\u0275\u0275text(1,"\u6b63\u5e38"),a.\u0275\u0275elementEnd())}function Il(e,t){1&e&&(a.\u0275\u0275elementStart(0,"span",75),a.\u0275\u0275text(1,"\u62a5\u4fee\u4e2d"),a.\u0275\u0275elementEnd())}function El(e,t){1&e&&(a.\u0275\u0275elementStart(0,"span",76),a.\u0275\u0275text(1,"\u5df2\u56de\u6536"),a.\u0275\u0275elementEnd())}function Dl(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"td",70),a.\u0275\u0275template(1,bl,2,0,"span",71),a.\u0275\u0275template(2,Il,2,0,"span",72),a.\u0275\u0275template(3,El,2,0,"span",73),a.\u0275\u0275elementEnd()),2&e){const e=a.\u0275\u0275nextContext().$implicit;a.\u0275\u0275property("dwAlign","center"),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf","1"===e.service_status),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf","2"===e.service_status),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf","3"===e.service_status)}}function Ol(e,t){if(1&e){const e=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"td",77),a.\u0275\u0275elementStart(1,"a",78),a.\u0275\u0275listener("dwClick",function(){a.\u0275\u0275restoreView(e);const t=a.\u0275\u0275nextContext().$implicit;return a.\u0275\u0275nextContext().goProductResume(t)}),a.\u0275\u0275text(2," \u67e5\u770b "),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd()}if(2&e){const e=a.\u0275\u0275nextContext(2);a.\u0275\u0275property("dwAlign","center"),a.\u0275\u0275advance(1),a.\u0275\u0275propertyInterpolate("angularticsLabel",e.userInfo.tenantId+","+e.userInfo.userId),a.\u0275\u0275property("dwActionId","resume")("dwDefaultAuthorized","disabled")("angularticsCategory","\u4ea7\u54c1\u6863\u6848")}}function Ml(e,t){1&e&&(a.\u0275\u0275elementStart(0,"tr",59),a.\u0275\u0275template(1,dl,3,4,"td",60),a.\u0275\u0275template(2,sl,3,3,"td",60),a.\u0275\u0275template(3,cl,2,1,"td",60),a.\u0275\u0275template(4,ml,2,1,"td",60),a.\u0275\u0275template(5,pl,2,4,"td",61),a.\u0275\u0275template(6,ul,2,1,"td",60),a.\u0275\u0275template(7,hl,2,1,"td",60),a.\u0275\u0275template(8,gl,2,1,"td",60),a.\u0275\u0275template(9,fl,2,1,"td",60),a.\u0275\u0275template(10,wl,3,4,"td",60),a.\u0275\u0275template(11,Cl,3,2,"td",60),a.\u0275\u0275template(12,_l,3,4,"td",60),a.\u0275\u0275template(13,yl,3,4,"td",60),a.\u0275\u0275template(14,Sl,2,1,"td",62),a.\u0275\u0275template(15,Dl,4,4,"td",63),a.\u0275\u0275template(16,Ol,3,5,"td",64),a.\u0275\u0275elementEnd()),2&e&&(a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","recycled_date"),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","product_file_code"),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","product_file_name"),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","sn"),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","file_type_name"),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","item_group_name"),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","specification"),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","model"),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","location"),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","delivery_date"),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","installation_date"),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","acceptance_date"),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","expiry_date"),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","product_description"),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","service_status"),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","product_resume"))}function Pl(e,t){if(1&e){const e=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"app-product-file-detail",79,80),a.\u0275\u0275listener("visibleChanged",function(t){return a.\u0275\u0275restoreView(e),a.\u0275\u0275nextContext().changeRecycleVisible(t)}),a.\u0275\u0275elementEnd()}}function kl(e,t){if(1&e){const e=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"div",81),a.\u0275\u0275text(1," \u4ea7\u54c1\u6863\u6848 "),a.\u0275\u0275elementStart(2,"img",82),a.\u0275\u0275listener("click",function(){return a.\u0275\u0275restoreView(e),a.\u0275\u0275nextContext().child.showQrcode()}),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd()}}function Fl(e,t){if(1&e&&a.\u0275\u0275text(0),2&e){const e=a.\u0275\u0275nextContext();a.\u0275\u0275textInterpolate1("\u5171 ",e.dataList.length," \u6761")}}const Vl=function(){return{x:"2000px",y:"calc(100vh - 171px - 130px)"}},Tl=function(){return{overflow:"auto"}};let Ll=(()=>{class e{constructor(t,n,i,r,a,o,l,d,s){if(this.commonHttpService=t,this.router=n,this.activeRoute=i,this.productFileSrv=r,this.message=a,this.modalService=o,this.analytics=l,this.userService=d,this.fb=s,this.DW_IN_MFA=x.ns,this.search={pageIndex:1,pageSize:10},this.dataList=[],this.displayData=[],this.indeterminate=!1,this.isCollapsed=!1,this.param="",this.fileType="0",this.isIntegrated=!1,this.userInfo={tenantId:"",userId:""},e.useKeeper&&e.keeper)return e.keeper}ngOnInit(){this.subscription=this.router.events.subscribe(t=>{if(t instanceof r.NavigationStart){const n=this.router.parseUrl(this.router.url).root.children[r.PRIMARY_OUTLET].segments,i=this.router.parseUrl(t.url).root.children[r.PRIMARY_OUTLET].segments,a=n[n.length-1].path,o=i[i.length-1].path;"recycled-list"===a&&"product-resume"===o||"product-resume"===a&&"recycled-list"===o?(e.useKeeper=!0,e.keeper=this):(e.useKeeper=!1,e.keeper=this)}}),this.userInfo=this.userService.getUserInfo(),this.commonHttpService.get("restful/service/serviceOrder/ServiceOrder/IsShowTypeOption").subscribe(e=>{this.fileType=e.data},e=>{e.hasOwnProperty("error")&&e.error.hasOwnProperty("errorMessage")&&e.error.errorMessage&&this.message.error(e.error.errorMessage)}),(!e.useKeeper||!e.keeper)&&this.init()}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}init(){this.searchForm=this.fb.group({}),this.searchForm.addControl("date_range",new l.FormControl("")),this.searchForm.addControl("sn",new l.FormControl("")),this.loadData()}loadData(){this.search={pageIndex:1,pageSize:10},this.productFileSrv.getRecycledList(this.searchForm.value).subscribe(e=>{this.dataList=e||[],this.dataList.filter(e=>"1"===e.file_type)})}changeRecycleVisible(e){this.isCollapsed=!1,e&&this.loadData()}clear(){this.searchForm.get("sn").setValue("")}goProductResume(e){this.router.navigateByUrl(`${this.DW_IN_MFA?"/assc_crs":""}/bases/product-file/product-resume?id=${e.product_file_id}&fromPage=2`)}detail(e){this.isCollapsed=!0,setTimeout(()=>{this.child.initData(e.product_file_id,e.file_type)})}goBack(){console.log("goback",this.activeRoute),this.router.navigateByUrl((this.DW_IN_MFA?"/assc_crs":"")+"/bases/product-file")}order(e){const t=e.key,n=e.value;if("maintenance_count"===t)switch(n){case"ascend":const e=[...this.dataList].sort((e,t)=>e.maintenance_count<t.maintenance_count?1:-1);this.dataList=e;break;case"descend":const t=[...this.dataList].sort((e,t)=>e.maintenance_count>=t.maintenance_count?1:-1);this.dataList=t}else switch(n){case"ascend":this.dataList=m.l.order(this.dataList,[t]);break;case"descend":this.dataList=m.l.order(this.dataList,[t,-1])}}onOpenRange(e){console.log(e),e&&this.analytics.eventTrack.next({action:"\u67e5\u8be2\u6761\u4ef6-\u70b9\u51fb\u9009\u62e9\u56de\u6536\u65e5\u671f",properties:{category:"\u4ea7\u54c1\u6863\u6848",label:this.userInfo.tenantId+","+this.userInfo.userId,value:0}})}}return e.\u0275fac=function(t){return new(t||e)(a.\u0275\u0275directiveInject(w.$),a.\u0275\u0275directiveInject(r.Router),a.\u0275\u0275directiveInject(r.ActivatedRoute),a.\u0275\u0275directiveInject(d.U),a.\u0275\u0275directiveInject(s.DwMessageService),a.\u0275\u0275directiveInject(c.DwModalService),a.\u0275\u0275directiveInject(u.DwAnalytics),a.\u0275\u0275directiveInject(h.DwUserService),a.\u0275\u0275directiveInject(l.FormBuilder))},e.\u0275cmp=a.\u0275\u0275defineComponent({type:e,selectors:[["app-recycled-list"]],viewQuery:function(e,t){if(1&e&&a.\u0275\u0275viewQuery(Ro,5),2&e){let e;a.\u0275\u0275queryRefresh(e=a.\u0275\u0275loadQuery())&&(t.child=e.first)}},features:[a.\u0275\u0275ProvidersFeature([g.N])],decls:59,vars:40,consts:[[1,"dw-f-content-list","layoutClass","sales_layout"],[1,"issue_layout_head"],["translate","",2,"float","left","margin-right","6px","margin-left","-5px",3,"click"],["src","../../../../../../assets/img/arrow-left.svg","alt","\u8fd4\u56de"],[1,"issue_layout_title"],["color","#e5e5e5"],[1,"dw-f-table","content-box"],[1,"sales_issue_form","sales_form","sales_shadow",3,"formGroup"],["dw-row","",1,"search-form-box"],[1,"search-input"],["class","label",4,"ngIf"],[1,"form-input"],[3,"dwSuffix"],["type","text","dw-input","","formControlName","sn",2,"width","100%"],["SNSeachData",""],[1,"label"],["formControlName","date_range",2,"width","100%",3,"dwOnOpenChange"],["dw-button","","dwActionAuthorized","","angularticsAction","\u67e5\u8be2\u6761\u4ef6-\u70b9\u51fb\u67e5\u8be2\u6309\u94ae","dw-analyticsOn","click",3,"dwType","dwActionId","angularticsCategory","angularticsLabel","dwClick"],["dwTableId","crs-product-file-recycled-list","dwShowSizeChanger","",3,"dwData","dwPageIndex","dwPageSize","dwScroll","dwShowTotal","dwPageIndexChange","dwPageSizeChange"],["dwTable",""],[3,"dwSortOrderChange"],["dw-tr","","dwDropColumns",""],["dw-th","","dwShowSort","","dwColumnKey","recycled_date","dwWidth","160px","dwDragDrop","",4,"dwColumnId"],["dw-th","","dwShowSort","","dwColumnKey","product_file_code","dwWidth","144px","dwDragDrop","",4,"dwColumnId"],["dw-th","","dwShowSort","","dwColumnKey","product_file_name","dwWidth","160px","dwDragDrop","",4,"dwColumnId"],["dw-th","","dwWidth","144px","dwDragDrop","",4,"dwColumnId"],["dw-th","","dwDragDrop","","dwWidth","120px",3,"ngStyle",4,"dwColumnId"],["dw-th","","dwShowSort","","dwColumnKey","item_group_name","dwWidth","120px","dwDragDrop","",4,"dwColumnId"],["dw-th","","dwDragDrop","","dwWidth","160px",4,"dwColumnId"],["dw-th","","dwDragDrop","","dwWidth","120px",4,"dwColumnId"],["dw-th","","dwDragDrop","","dwWidth","136px",4,"dwColumnId"],["dw-th","","dwDragDrop","","dwWidth","112px",4,"dwColumnId"],["dw-th","","dwWidth","210px","dwDragDrop","","dwWidth","112px",4,"dwColumnId"],["dw-th","","dwWidth","120px","dwDragDrop","",4,"dwColumnId"],["dw-th","","dwDragDrop","","dwWidth","140px",4,"dwColumnId"],["dw-th","","dwRight","","dwWidth","96px",3,"dwAlign",4,"dwColumnId"],["dwReorderColumns","",4,"ngFor","ngForOf"],[3,"dwVisible","dwTitle","dwWidth","dwBodyStyle","dwOnClose"],["dwDrawerContent",""],["detailTitle",""],["totalTemplate",""],["dw-icon","","class","ant-input-clear-icon","dwTheme","fill","dwType","close-circle",3,"click",4,"ngIf"],["dw-icon","","dwTheme","fill","dwType","close-circle",1,"ant-input-clear-icon",3,"click"],["dw-th","","dwShowSort","","dwColumnKey","recycled_date","dwWidth","160px","dwDragDrop",""],["translate",""],["dw-th","","dwShowSort","","dwColumnKey","product_file_code","dwWidth","144px","dwDragDrop",""],["dw-th","","dwShowSort","","dwColumnKey","product_file_name","dwWidth","160px","dwDragDrop",""],["dw-th","","dwWidth","144px","dwDragDrop",""],["translate","",4,"ngIf"],["dw-th","","dwDragDrop","","dwWidth","120px",3,"ngStyle"],["dw-th","","dwShowSort","","dwColumnKey","item_group_name","dwWidth","120px","dwDragDrop",""],["dw-th","","dwDragDrop","","dwWidth","160px"],["dw-th","","dwDragDrop","","dwWidth","120px"],["dw-th","","dwDragDrop","","dwWidth","136px"],["dw-th","","dwDragDrop","","dwWidth","112px"],["dw-th","","dwWidth","210px","dwDragDrop","","dwWidth","112px"],["dw-th","","dwWidth","120px","dwDragDrop",""],["dw-th","","dwDragDrop","","dwWidth","140px"],["dw-th","","dwRight","","dwWidth","96px",3,"dwAlign"],["dwReorderColumns",""],["dwEllipsis","",4,"dwColumnId"],["dwEllipsis","",3,"ngStyle",4,"dwColumnId"],["style","min-width: 72px;max-width: 240px;","dwEllipsis","",4,"dwColumnId"],["dwRight","",3,"dwAlign",4,"dwColumnId"],["dwRight","","dwEllipsis","",3,"dwAlign",4,"dwColumnId"],["dwEllipsis",""],["dw-analyticsOn","click","id","product-file-detail","angularticsAction","\u8be6\u60c5-\u70b9\u51fb\u67e5\u770b\u8be6\u60c5",3,"angularticsCategory","angularticsLabel","click"],["dwEllipsis","",3,"ngStyle"],[4,"ngIf"],["dwEllipsis","",2,"min-width","72px","max-width","240px"],["dwRight","",3,"dwAlign"],["class","state_tip",4,"ngIf"],["class","state_tip zise",4,"ngIf"],["class","state_tip gray",4,"ngIf"],[1,"state_tip"],[1,"state_tip","zise"],[1,"state_tip","gray"],["dwRight","","dwEllipsis","",3,"dwAlign"],["dwActionAuthorized","","translate","","id","product-resume","dw-analyticsOn","click","angularticsAction","\u5c65\u5386-\u70b9\u51fb\u67e5\u770b\u5c65\u5386",3,"dwActionId","dwDefaultAuthorized","angularticsCategory","angularticsLabel","dwClick"],[3,"visibleChanged"],["child",""],[1,"detail-title"],["src","../../../../../../assets/img/qrcode.png","alt","\u4e8c\u7ef4\u7801",1,"qrcode",3,"click"]],template:function(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"dw-content",0),a.\u0275\u0275elementStart(1,"div",1),a.\u0275\u0275elementStart(2,"a",2),a.\u0275\u0275listener("click",function(){return t.goBack()}),a.\u0275\u0275element(3,"img",3),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(4,"h2",4),a.\u0275\u0275elementStart(5,"span"),a.\u0275\u0275text(6,"\u5df2\u56de\u6536\u4ea7\u54c1"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275element(7,"hr",5),a.\u0275\u0275elementStart(8,"div",6),a.\u0275\u0275elementStart(9,"form",7),a.\u0275\u0275elementStart(10,"div",8),a.\u0275\u0275elementStart(11,"div",9),a.\u0275\u0275template(12,Ao,2,0,"div",10),a.\u0275\u0275template(13,No,2,0,"div",10),a.\u0275\u0275template(14,$o,2,0,"div",10),a.\u0275\u0275elementStart(15,"dw-form-item",11),a.\u0275\u0275elementStart(16,"dw-form-control"),a.\u0275\u0275elementStart(17,"dw-input-group",12),a.\u0275\u0275element(18,"input",13),a.\u0275\u0275elementEnd(),a.\u0275\u0275template(19,zo,1,1,"ng-template",null,14,a.\u0275\u0275templateRefExtractor),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(21,"div",9),a.\u0275\u0275elementStart(22,"div",15),a.\u0275\u0275text(23,"\u56de\u6536\u65e5\u671f"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(24,"dw-form-item",11),a.\u0275\u0275elementStart(25,"dw-form-control"),a.\u0275\u0275elementStart(26,"dw-range-picker",16),a.\u0275\u0275listener("dwOnOpenChange",function(e){return t.onOpenRange(e)}),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(27,"div",9),a.\u0275\u0275elementStart(28,"button",17),a.\u0275\u0275listener("dwClick",function(){return t.loadData()}),a.\u0275\u0275text(29),a.\u0275\u0275pipe(30,"translate"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(31,"dw-table",18,19),a.\u0275\u0275listener("dwPageIndexChange",function(e){return t.search.pageIndex=e})("dwPageSizeChange",function(e){return t.search.pageSize=e}),a.\u0275\u0275elementStart(33,"thead",20),a.\u0275\u0275listener("dwSortOrderChange",function(e){return t.order(e)}),a.\u0275\u0275elementStart(34,"tr",21),a.\u0275\u0275template(35,Bo,3,0,"th",22),a.\u0275\u0275template(36,qo,3,0,"th",23),a.\u0275\u0275template(37,Wo,3,0,"th",24),a.\u0275\u0275template(38,Xo,4,3,"th",25),a.\u0275\u0275template(39,Ko,3,3,"th",26),a.\u0275\u0275template(40,Jo,3,0,"th",27),a.\u0275\u0275template(41,Zo,3,0,"th",28),a.\u0275\u0275template(42,Yo,3,0,"th",29),a.\u0275\u0275template(43,el,3,0,"th",30),a.\u0275\u0275template(44,tl,3,0,"th",31),a.\u0275\u0275template(45,nl,3,0,"th",32),a.\u0275\u0275template(46,il,3,0,"th",31),a.\u0275\u0275template(47,rl,3,0,"th",33),a.\u0275\u0275template(48,al,3,0,"th",34),a.\u0275\u0275template(49,ol,3,1,"th",35),a.\u0275\u0275template(50,ll,3,1,"th",35),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(51,"tbody"),a.\u0275\u0275template(52,Ml,17,16,"tr",36),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(53,"dw-drawer",37),a.\u0275\u0275listener("dwOnClose",function(){return t.isCollapsed=!1}),a.\u0275\u0275template(54,Pl,2,0,"ng-template",38),a.\u0275\u0275elementEnd(),a.\u0275\u0275template(55,kl,3,0,"ng-template",null,39,a.\u0275\u0275templateRefExtractor),a.\u0275\u0275template(57,Fl,1,1,"ng-template",null,40,a.\u0275\u0275templateRefExtractor)),2&e){const e=a.\u0275\u0275reference(20),n=a.\u0275\u0275reference(32),i=a.\u0275\u0275reference(56),r=a.\u0275\u0275reference(58);a.\u0275\u0275advance(9),a.\u0275\u0275property("formGroup",t.searchForm),a.\u0275\u0275advance(3),a.\u0275\u0275property("ngIf","1"===t.fileType),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf","2"===t.fileType),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf","0"===t.fileType),a.\u0275\u0275advance(3),a.\u0275\u0275property("dwSuffix",e),a.\u0275\u0275advance(11),a.\u0275\u0275propertyInterpolate("angularticsLabel",t.userInfo.tenantId+","+t.userInfo.userId),a.\u0275\u0275property("dwType","primary")("dwActionId","query")("angularticsCategory","\u4ea7\u54c1\u6863\u6848"),a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate1(" ",a.\u0275\u0275pipeBind1(30,36,"\u67e5\u8be2")," "),a.\u0275\u0275advance(2),a.\u0275\u0275property("dwData",t.dataList)("dwPageIndex",t.search.pageIndex)("dwPageSize",t.search.pageSize)("dwScroll",a.\u0275\u0275pureFunction0(38,Vl))("dwShowTotal",r),a.\u0275\u0275advance(4),a.\u0275\u0275property("dwColumnId","recycled_date"),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","product_file_code"),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","product_file_name"),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","sn"),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","file_type_name"),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","item_group_name"),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","specification"),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","model"),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","location"),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","delivery_date"),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","installation_date"),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","acceptance_date"),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","expiry_date"),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","product_description"),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","service_status"),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","product_resume"),a.\u0275\u0275advance(2),a.\u0275\u0275property("ngForOf",n.data),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwVisible",t.isCollapsed)("dwTitle",i)("dwWidth","80%")("dwBodyStyle",a.\u0275\u0275pureFunction0(39,Tl))}},directives:[Q.DwContentComponent,b.TranslateDirective,l.\u0275NgNoValidate,l.NgControlStatusGroup,l.FormGroupDirective,A.DwRowDirective,i.NgIf,N.DwFormItemComponent,A.DwColDirective,N.DwFormControlComponent,K.u,z.DwInputGroupComponent,z.DwInputGroupWhitSuffixOrPrefixDirective,z.DwInputDirective,l.DefaultValueAccessor,l.NgControlStatus,l.FormControlName,W.DwDatePickerComponent,W.DwRangePickerComponent,j.DwButtonComponent,J.uG,Z.DwActionAuthorizedDirective,u.DwAnalyticsOn,_.DwTableComponent,y.Ct,_.DwTheadComponent,_.DwTrDirective,y.Y9,y.b,_.DwTbodyComponent,i.NgForOf,_e.DwDrawerComponent,_e.DwDrawerContentDirective,B.DwIconDirective,_.DwTableCellDirective,_.DwThMeasureDirective,y.BL,_.DwThAddOnComponent,y.$2,i.NgStyle,_.DwCellFixedDirective,_.DwCellAlignDirective,y.at,_.DwCellEllipsisDirective,v.w],pipes:[b.TranslatePipe,i.DatePipe],styles:[".state_tip[_ngcontent-%COMP%]{display:inline-block;width:64px;height:28px;line-height:28px;text-align:center;border-radius:15px;color:#fff;font-size:13px;background:#29cc8d}.state_tip.zise[_ngcontent-%COMP%]{background:#5c64d1}.state_tip.gray[_ngcontent-%COMP%]{background:#5c5c5c}"]}),e})();var Rl=n(51033);const Al=[{path:"",pathMatch:"prefix",canActivate:[Lo.DwAuthGuardService,Rl.L],component:o,children:[{path:"",component:Tn,canActivate:[Lo.DwAuthGuardService,Rl.L],data:{dwRouteData:{programId:"product-file",dwAuthId:"product-file"},reload:!0}},{path:"product-file-modify/:id",component:ho,canActivate:[Lo.DwAuthGuardService,Rl.L],data:{dwRouteData:{programId:"product-file",dwAuthId:"product-file"},reload:!0}},{path:"product-file-create",component:ho,canActivate:[Lo.DwAuthGuardService,Rl.L],data:{dwRouteData:{programId:"product-file",dwAuthId:"product-file"},reload:!0}},{path:"product-part-modify",component:Xn,canActivate:[Lo.DwAuthGuardService,Rl.L],data:{dwRouteData:{programId:"product-file",dwAuthId:"product-file"},reload:!0}},{path:"product-resume",component:To,canActivate:[Lo.DwAuthGuardService,Rl.L],data:{dwRouteData:{programId:"product-file",dwAuthId:"product-file"},reload:!0}},{path:"recycled-list",component:Ll,canActivate:[Lo.DwAuthGuardService,Rl.L],data:{dwRouteData:{programId:"product-file",dwAuthId:"product-file"},reload:!0}}]}];let Nl=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=a.\u0275\u0275defineInjector({imports:[[r.RouterModule.forChild(Al)],r.RouterModule]}),e})();var $l=n(23938);let jl=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=a.\u0275\u0275defineInjector({providers:[{provide:"DocumentResource",useValue:"restful/service/productFile/productFile/ProductFile"},H,{provide:y.hb,useExisting:H},qn],imports:[[i.CommonModule,$l.m,Nl,Rn.DwDocumentModule,Ai.DwExtraFieldsModule,s.DwMessageModule,c.DwModalModule,j.DwButtonModule,Q.DwLayoutModule,W.DwDatePickerModule,_e.DwDrawerModule,N.DwFormModule,z.DwInputModule,Kn.DwInputNumberModule,ye.DwRadioModule,$.DwSelectModule,_.DwTableModule,A.DwGridModule,B.DwIconModule,Se.DwPopconfirmModule,S.DwCheckboxModule,Z.DwActionModule,l.ReactiveFormsModule,b.TranslateModule,Li.DwDividerModule,Ri.DwTabsModule,Jn.DwUploadModule,go.DwTimelineModule,y.f1,Zn.DwToolTipModule]]}),e})()},9201:function(e,t,n){n.d(t,{N:function(){return l}});var i=n(51156),r=n(53524),a=n(9682),o=n(42746);let l=(()=>{class e{constructor(e,t){this.selectModalService=e,this.dwHttp=t}setConfig(e,t){this.config={modalTitle:"\u9009\u62e9\u65b0\u5ba2\u6237",modalWidth:"50%",tableMultiSelect:t,tableIdField:"customer_id",tableNameField:"customer_name",returnFields:["customer_id","customer_code","customer_name"],tablePageSize:10,tableColDefs:[{title:"\u5ba2\u6237\u7f16\u53f7",field:"customer_code",width:""},{title:"\u5ba2\u6237\u540d\u79f0",field:"customer_name",width:""}],tableCustomTag:e=>"("+e.customer_code+")"+e.customer_name,dataSource:new a.ApiServerPagingService(this.dwHttp,"restful/service/customer/Customer/List","customer",["customer_code","customer_name"]),initParams:this.getQueryCondition(e)}}open(e){return this.selectModalService.open(this.config,e)}getQueryCondition(e){const t=new r.DwQueryCondition;return t.addCondition(new r.DwQueryConditionInfo("customer_id",e,r.DwQueryConditionOperator.NOTEQUALS)),t}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(a.DwSelectModalService),o.\u0275\u0275inject(i.DwDapHttpClient))},e.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e})()},33795:function(e,t,n){n.d(t,{U:function(){return c}});var i=n(51156),r=n(66800),a=n(65134),o=n(47372),l=n(99487),d=n(55245),s=n(42746);let c=(()=>{class e{constructor(e,t,n,i){this.http=e,this.pctHttp=t,this.userService=n,this.datePipe=i}getProductFileList(e,t,n){""!==e.date_range&&e.date_range.length&&""!==e.date_range[0]?(e.date_range[0]=this.datePipe.transform(e.date_range[0],"yyyy-MM-dd"),e.date_range[1]=this.datePipe.transform(e.date_range[1],"yyyy-MM-dd")):e.date_range=["",""],e.next_maintain_date=e.next_maintain_date?this.datePipe.transform(e.next_maintain_date,"yyyy-MM-dd"):"";const i=encodeURIComponent(JSON.stringify({customerIds:e.customer_id,beginDate:e.date_range[0],endDate:e.date_range[1],nextMaintainDate:e.next_maintain_date,serviceStatus:e.serviceStatus,checkExpiryDate:e.checkExpiryDate,fileType:e.file_type,dataSource:n,paramLike:t,SN:e.SN}));return this.http.get(`restful/service/productFile/ProductFile/ProductFile?params=${i}`).pipe((0,o.map)(e=>e))}getProductFileDetail(e,t){const n=encodeURIComponent(JSON.stringify([{id:e,fileType:t}]));return this.http.get(`restful/service/productFile/productFile/ProductFile?oids=${n}`).pipe((0,o.map)(e=>e))}getProductFileResume(e){return this.http.get(`restful/service/productFile/ProductFile/ProductFileResume?product_file_id=${e}`).pipe((0,o.map)(e=>e))}getSNChangeHistory(e){return this.http.get(`restful/service/productFile/ProductFile/SNChangeHistory?product_file_id=${e}`)}getItemGroupList(e,t,n){return this.http.get(`restful/service/itemGroup/ItemGroup/ItemGroup?code=${e}&name=${t}&type=${n}`).pipe((0,o.map)(e=>e))}getFileById(e){return this.http.get(`restful/service/employee/Employee/File?file_id=${e}`).pipe((0,o.map)(e=>e))}createProductFile(e){return console.log(e),this.http.post("restful/service/productFile/ProductFile/ProductFile",{params:e})}modifyProductFile(e,t){const n=this.createDwDataSet(e,t,"U");return this.http.put("restful/service/productFile/ProductFile/ProductFile",n)}deleteProductFile(e){return this.http.delete("restful/service/productFile/ProductFile/BathRemove",{body:{ids:e.join(",")}})}getUserSite(){return this.pctHttp.get("restful/service/warehouse/Warehouse/UserSite")}getProductInfo(e){return this.http.get("restful/service/productFile/ProductFile/TransferInitialInfoByFileId?productFileId="+e)}transfer(e){const t={};return Object.assign(t,e),t.$state="C",this.http.post("restful/service/productFile/ProductFile/ProductTransfer",{dataset:{product_transfer:t}})}getProductTransfersByFileId(e){return this.http.get(`restful/service/productFile/ProductFile/ProductTransfersByFileId?productFileId=${e}`).pipe((0,o.map)(e=>e))}recycle(e){return this.http.post("restful/service/productFile/ProductFile/ProductRecycled",{param:e})}createDwDataSet(e,t,n){const i={};return Object.assign(i,e),i.$state=n,i.product_file_id=t,{dataSet:{product_file:i}}}getQuery(e){return this.http.get(`restful/service/productFile/ProductFile/ProductFileSearch?param=${e}`).pipe((0,o.map)(e=>e))}getRecycledList(e){return""!==e.date_range&&e.date_range.length&&""!==e.date_range[0]?(e.date_range[0]=this.datePipe.transform(e.date_range[0],"yyyy-MM-dd"),e.date_range[1]=this.datePipe.transform(e.date_range[1],"yyyy-MM-dd")):e.date_range=["",""],this.http.get(`restful/service/productFile/ProductFile/ProductRecycledList?sn=${e.sn}&beginDate=${e.date_range[0]}&endDate=${e.date_range[1]}`).pipe((0,o.map)(e=>e))}saveAttachments(e){return this.http.post("restful/service/productFile/ProductFile/Attachments",e,{})}download(e){return this.http.get("restful/service/productFile/ProductFile/downloadFile",{params:e=e||{},headers:this.getHeader(),observe:"events",responseType:"blob",reportProgress:!0})}getProductFileHasCustomizeField(e){return this.http.get("restful/service/productFile/ProductFile/ProductFileHasCustomizeField?tableName="+e)}getHeader(){return new l.HttpHeaders({token:this.userService.getUser("token")})}export(e,t,n){""!==e.date_range&&e.date_range.length&&""!==e.date_range[0]?(e.date_range[0]=this.datePipe.transform(e.date_range[0],"yyyy-MM-dd"),e.date_range[1]=this.datePipe.transform(e.date_range[1],"yyyy-MM-dd")):e.date_range=["",""],e.next_maintain_date=e.next_maintain_date?this.datePipe.transform(e.next_maintain_date,"yyyy-MM-dd"):"";const i=encodeURIComponent(JSON.stringify({customerIds:e.customer_id,beginDate:e.date_range[0],endDate:e.date_range[1],nextMaintainDate:e.next_maintain_date,serviceStatus:e.serviceStatus,checkExpiryDate:e.checkExpiryDate,fileType:e.file_type,dataSource:n,paramLike:t,SN:e.SN}));return this.http.get(`restful/service/productFile/ProductFile/ProductFileExcel?params=${i}`,{headers:this.getHeader(),observe:"events",responseType:"blob",reportProgress:!0})}}return e.\u0275fac=function(t){return new(t||e)(s.\u0275\u0275inject(i.DwDapHttpClient),s.\u0275\u0275inject(a.k),s.\u0275\u0275inject(r.DwUserService),s.\u0275\u0275inject(d.DatePipe))},e.\u0275prov=s.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},67229:function(e,t,n){n.r(t),n.d(t,{EngineerScheduleModule:function(){return me}});var i=n(55245),r=n(87974),a=n(32276),o=n(42746);let l=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["app-engineer-schedule"]],decls:1,vars:0,template:function(e,t){1&e&&o.\u0275\u0275element(0,"router-outlet")},directives:[r.RouterOutlet],styles:[""]}),e})();var d=n(64762),s=n(66800),c=n(83237),m=n(51156),p=n(65134),u=n(47372);let h=(()=>{class e{constructor(e,t,n){this.http=e,this.pctHttp=t,this.datePipe=n}getServiceSites(e,t){return this.http.get(`restful/service/employee/Employee/EngineerEmployees?status=${e?"Y":""}&date=${t}`).pipe((0,u.map)(e=>e))}getEngineerList(e){return this.http.get(`restful/service/employee/Employee/EngineerEmployees?serviceSiteId=${e}`).pipe((0,u.map)(e=>e))}getEngineerDetail(e){return this.http.get("restful/service/employee/Employee/EmployeeSchedule?employeeId="+e)}getFileById(e){return this.http.get(`restful/service/employee/Employee/File?file_id=${e}`).pipe((0,u.map)(e=>e))}getDateInfo(e,t){const n=this.datePipe.transform(t,"yyyy-MM-dd");return this.http.get("restful/service/employee/Employee/EmployeeScheduleDetail?employeeId="+e+"&reportTime="+n)}getUserSiteType(){return this.http.get("restful/service/serviceSite/ServiceSite/UserSite")}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(m.DwDapHttpClient),o.\u0275\u0275inject(p.k),o.\u0275\u0275inject(i.DatePipe))},e.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var g=n(67733),f=n(31441),w=n(74913),v=n(96344);const x=["child"];function C(e,t){if(1&e&&(o.\u0275\u0275elementStart(0,"div",7),o.\u0275\u0275elementStart(1,"dw-timeline",8),o.\u0275\u0275elementStart(2,"dw-timeline-item",9),o.\u0275\u0275elementStart(3,"div",10),o.\u0275\u0275elementStart(4,"span",11),o.\u0275\u0275text(5),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(6,"div",12),o.\u0275\u0275elementStart(7,"span",13),o.\u0275\u0275text(8,"\u65e0\u670d\u52a1"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(9,"div",14),o.\u0275\u0275elementStart(10,"div",15),o.\u0275\u0275element(11,"img",16),o.\u0275\u0275elementStart(12,"div",17),o.\u0275\u0275text(13),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()),2&e){const e=t.$implicit;o.\u0275\u0275advance(2),o.\u0275\u0275property("dwColor","#d8d8d8"),o.\u0275\u0275advance(3),o.\u0275\u0275textInterpolate(e.report_time),o.\u0275\u0275advance(8),o.\u0275\u0275textInterpolate(e.location)}}function _(e,t){1&e&&(o.\u0275\u0275elementStart(0,"span",25),o.\u0275\u0275text(1,"\u534f\u540c"),o.\u0275\u0275elementEnd())}function y(e,t){if(1&e&&(o.\u0275\u0275elementStart(0,"span",34),o.\u0275\u0275text(1),o.\u0275\u0275elementEnd()),2&e){const e=o.\u0275\u0275nextContext().$implicit;o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate(e.type)}}function S(e,t){if(1&e&&(o.\u0275\u0275elementStart(0,"span",35),o.\u0275\u0275text(1),o.\u0275\u0275elementEnd()),2&e){const e=o.\u0275\u0275nextContext().$implicit;o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate(e.type)}}function b(e,t){if(1&e&&(o.\u0275\u0275elementStart(0,"span",13),o.\u0275\u0275text(1),o.\u0275\u0275elementEnd()),2&e){const e=o.\u0275\u0275nextContext().$implicit;o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate(e.type)}}function I(e,t){if(1&e&&(o.\u0275\u0275elementStart(0,"span",36),o.\u0275\u0275text(1),o.\u0275\u0275elementEnd()),2&e){const e=o.\u0275\u0275nextContext().$implicit;o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate(e.type)}}const E=function(){return{showPreviewIcon:!0}};function D(e,t){if(1&e){const e=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"div",7),o.\u0275\u0275elementStart(1,"dw-timeline",8),o.\u0275\u0275elementStart(2,"dw-timeline-item",9),o.\u0275\u0275elementStart(3,"div",10),o.\u0275\u0275elementStart(4,"span",11),o.\u0275\u0275text(5),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(6,"div",12),o.\u0275\u0275template(7,y,2,1,"span",26),o.\u0275\u0275template(8,S,2,1,"span",27),o.\u0275\u0275template(9,b,2,1,"span",28),o.\u0275\u0275template(10,I,2,1,"span",29),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(11,"div",14),o.\u0275\u0275elementStart(12,"div",15),o.\u0275\u0275element(13,"img",16),o.\u0275\u0275elementStart(14,"div",17),o.\u0275\u0275text(15),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(16,"div",30),o.\u0275\u0275elementStart(17,"dw-upload",31),o.\u0275\u0275listener("dwFileListChange",function(t){return o.\u0275\u0275restoreView(e).$implicit.pictureInfos=t}),o.\u0275\u0275element(18,"em",32),o.\u0275\u0275elementStart(19,"div",33),o.\u0275\u0275text(20,"\u4e0a\u4f20"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()}if(2&e){const e=t.$implicit,n=o.\u0275\u0275nextContext(2);o.\u0275\u0275advance(2),o.\u0275\u0275property("dwColor","#d8d8d8"),o.\u0275\u0275advance(3),o.\u0275\u0275textInterpolate(e.report_time),o.\u0275\u0275advance(2),o.\u0275\u0275property("ngIf",1===e.typeState),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",2===e.typeState),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",3===e.typeState),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",4===e.typeState),o.\u0275\u0275advance(5),o.\u0275\u0275textInterpolate(e.location),o.\u0275\u0275advance(2),o.\u0275\u0275property("dwFileList",e.pictureInfos)("dwShowButton",e.pictureInfos.length<0)("dwShowUploadList",o.\u0275\u0275pureFunction0(11,E))("dwPreview",n.handlePreview)}}function O(e,t){if(1&e){const e=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"div",2),o.\u0275\u0275elementStart(1,"div",18),o.\u0275\u0275elementStart(2,"div",19),o.\u0275\u0275element(3,"img",20),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(4,"dw-timeline"),o.\u0275\u0275elementStart(5,"dw-timeline-item",9),o.\u0275\u0275elementStart(6,"div",21),o.\u0275\u0275listener("click",function(){const t=o.\u0275\u0275restoreView(e).$implicit;return o.\u0275\u0275nextContext().seeDetail(t)}),o.\u0275\u0275elementStart(7,"div",22),o.\u0275\u0275text(8),o.\u0275\u0275template(9,_,2,0,"span",23),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(10,"div",24),o.\u0275\u0275text(11),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275template(12,D,21,12,"div",3),o.\u0275\u0275elementEnd()}if(2&e){const e=t.$implicit;o.\u0275\u0275advance(5),o.\u0275\u0275property("dwColor","#d8d8d8"),o.\u0275\u0275advance(3),o.\u0275\u0275textInterpolate(e.docNo),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",0===e.charge),o.\u0275\u0275advance(2),o.\u0275\u0275textInterpolate(e.name),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngForOf",e.info)}}function M(e,t){1&e&&o.\u0275\u0275element(0,"app-service-order-detail",null,37)}const P=function(){return{height:"calc(100vh - 88px)",overflow:"auto",padding:"0 24px"}};let k=(()=>{class e{constructor(e,t){this.message=e,this.engineerScheduleService=t,this.scheduleList=[],this.freeClockInList=[],this.isCollapsed=!1,this.visibleChanged=new o.EventEmitter,this.handlePreview=e=>(0,d.mG)(this,void 0,void 0,function*(){this.visibleChanged.emit(e)})}initData(e){this.engineerScheduleService.getDateInfo(e.employee_id,e.schedule_date).subscribe(e=>{console.log(e,"res");const t=e.clockInList,n=e.freeClockInList;t.forEach(e=>{e.info.forEach(e=>{e.type=e.type.slice(0,-2),e.type.indexOf("\u534f\u540c\u4eba")>=0&&(e.type=e.type.slice(3)),e.typeState=e.type.indexOf("\u51fa\u53d1")>=0?1:e.type.indexOf("\u5230\u8fbe")>=0?2:e.type.indexOf("\u9014\u7ecf")>=0?4:3})}),this.scheduleList=t,this.freeClockInList=n},e=>{e.hasOwnProperty("error")&&e.error.hasOwnProperty("errorMessage")&&e.error.errorMessage&&this.message.error(e.error.errorMessage)})}seeDetail(e){this.isCollapsed=!0,setTimeout(()=>{this.child.init(e.serviceOrderId)})}ngAfterViewInit(){}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(c.DwMessageService),o.\u0275\u0275directiveInject(h))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["app-engineer-schedule-detail"]],viewQuery:function(e,t){if(1&e&&o.\u0275\u0275viewQuery(x,5),2&e){let e;o.\u0275\u0275queryRefresh(e=o.\u0275\u0275loadQuery())&&(t.child=e.first)}},outputs:{visibleChanged:"visibleChanged"},decls:8,vars:9,consts:[[1,"all-title"],[1,"timeline-wrap"],[1,"emgineer-schedule-detail"],["class","time-box",4,"ngFor","ngForOf"],["class","emgineer-schedule-detail",4,"ngFor","ngForOf"],[3,"dwBodyStyle","dwMaskClosable","dwWidth","dwVisible","dwTitle","dwFooter","dwVisibleChange","dwOnCancel"],["dwModalContent",""],[1,"time-box"],[1,"timeline"],[1,"timeItem",3,"dwColor"],[1,"wrapper"],[1,"time"],[1,"type-wrap"],[1,"type"],[1,"timeItem-remark"],[1,"location"],["src","../../../../../assets/img/icon_address.png","alt","\u5730\u5740\uff1a"],[1,"text"],[1,"main-timeline"],[1,"position-img"],["src","../../../../../assets/img/icon_schedule.png","alt","\u5de5\u5355"],[1,"main-info-box",3,"click"],[1,"link"],["class","together",4,"ngIf"],[1,"company"],[1,"together"],["class","type blue",4,"ngIf"],["class","type green",4,"ngIf"],["class","type",4,"ngIf"],["class","type gray",4,"ngIf"],[1,"clearfix"],["dwListType","picture-card",3,"dwFileList","dwShowButton","dwShowUploadList","dwPreview","dwFileListChange"],["dw-icon","","dwType","plus"],[1,"ant-upload-text"],[1,"type","blue"],[1,"type","green"],[1,"type","gray"],["child",""]],template:function(e,t){1&e&&(o.\u0275\u0275elementStart(0,"div",0),o.\u0275\u0275text(1,"\u6240\u6709\u52a8\u6001"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(2,"div",1),o.\u0275\u0275elementStart(3,"div",2),o.\u0275\u0275template(4,C,14,3,"div",3),o.\u0275\u0275elementEnd(),o.\u0275\u0275template(5,O,13,5,"div",4),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(6,"dw-modal",5),o.\u0275\u0275listener("dwVisibleChange",function(e){return t.isCollapsed=e})("dwOnCancel",function(){return t.isCollapsed=!1}),o.\u0275\u0275template(7,M,2,0,"ng-template",6),o.\u0275\u0275elementEnd()),2&e&&(o.\u0275\u0275advance(4),o.\u0275\u0275property("ngForOf",t.freeClockInList),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngForOf",t.scheduleList),o.\u0275\u0275advance(1),o.\u0275\u0275property("dwBodyStyle",o.\u0275\u0275pureFunction0(8,P))("dwMaskClosable",!0)("dwWidth",1120)("dwVisible",t.isCollapsed)("dwTitle","\u670d\u52a1\u5de5\u5355\u8be6\u60c5")("dwFooter",null))},directives:[i.NgForOf,f.DwModalComponent,f.DwModalContentDirective,w.DwTimelineComponent,w.DwTimelineItemComponent,i.NgIf,g.DwUploadComponent,v.h],styles:[".all-title[_ngcontent-%COMP%]{color:#000000a6;font-weight:bold;font-size:14px;line-height:14px;margin-bottom:24px}.timeline-wrap[_ngcontent-%COMP%]{padding-left:58px}.wrapper[_ngcontent-%COMP%]{display:flex;position:relative}.wrapper[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]{position:absolute;top:0;left:-80px;line-height:24px;color:#000000d9;font-size:16px}.wrapper[_ngcontent-%COMP%]   .type-wrap[_ngcontent-%COMP%]{width:68px;padding-top:3px;font-size:0}.wrapper[_ngcontent-%COMP%]   .type-wrap[_ngcontent-%COMP%]   .type[_ngcontent-%COMP%]{display:inline-block;color:#fff;font-size:14px;line-height:24px;padding:0 4px;background:#e7a65e}.wrapper[_ngcontent-%COMP%]   .type-wrap[_ngcontent-%COMP%]   .type.blue[_ngcontent-%COMP%]{background:#57C2FF}.wrapper[_ngcontent-%COMP%]   .type-wrap[_ngcontent-%COMP%]   .type.green[_ngcontent-%COMP%]{background:#3ccc99}.wrapper[_ngcontent-%COMP%]   .type-wrap[_ngcontent-%COMP%]   .type.gray[_ngcontent-%COMP%]{background:#BDBDBD}.wrapper[_ngcontent-%COMP%]   .timeItem-remark[_ngcontent-%COMP%]{flex:1;padding:3px 8px}.wrapper[_ngcontent-%COMP%]   .timeItem-remark[_ngcontent-%COMP%]   .location[_ngcontent-%COMP%]{display:flex;margin-bottom:5px}.wrapper[_ngcontent-%COMP%]   .timeItem-remark[_ngcontent-%COMP%]   .location[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:11px;height:14px;margin-top:3px;margin-right:7px}.wrapper[_ngcontent-%COMP%]   .timeItem-remark[_ngcontent-%COMP%]   .location[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{color:#333;font-size:14px;line-height:20px}.main-timeline[_ngcontent-%COMP%]{position:relative}.position-img[_ngcontent-%COMP%]{width:24px;height:24px;border-radius:50%;background:#FFFFFF;border:1px solid #D8D8D8;position:absolute;top:-8px;left:-8px;z-index:10;text-align:center}.position-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:9px;height:auto;margin-bottom:2px}.main-timeline[_ngcontent-%COMP%]   .main-info-box[_ngcontent-%COMP%]{background:#F7F7F7;width:308px;font-size:12px;padding:6px 5px;cursor:pointer}.main-timeline[_ngcontent-%COMP%]   .company[_ngcontent-%COMP%]{font-weight:bold}.main-timeline[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%]{color:#0d9def}.main-timeline[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline-block;border:1px solid #57C2FF;color:#57c2ff;margin-left:4px;line-height:16px;padding:0 5px;border-radius:2px}  .emgineer-schedule-detail .ant-timeline-item-last>.ant-timeline-item-tail{height:calc(100%)}  .emgineer-schedule-detail .time-box:last-child .ant-timeline-item-last>.ant-timeline-item-tail{height:calc(0%)}  .emgineer-schedule-detail .time-box .ant-timeline-item{padding-bottom:0}.time-box[_ngcontent-%COMP%]:last-child{margin-bottom:10px}"]}),e})();var F=n(80677),V=n(80419),T=n(88059),L=n(51690),R=n(74591),A=n(1020),N=n(17494);const $=["child"];function j(e,t){if(1&e&&o.\u0275\u0275element(0,"img",21),2&e){const e=o.\u0275\u0275nextContext().$implicit;o.\u0275\u0275classMap("V"===e.status?"gray":"")}}function z(e,t){if(1&e&&o.\u0275\u0275element(0,"img",22),2&e){const e=o.\u0275\u0275nextContext().$implicit;o.\u0275\u0275classMap("V"===e.status?"gray":""),o.\u0275\u0275property("src",e.head_img,o.\u0275\u0275sanitizeUrl)}}function B(e,t){1&e&&(o.\u0275\u0275elementStart(0,"div",23),o.\u0275\u0275text(1,"\u5931\u6548"),o.\u0275\u0275elementEnd())}function q(e,t){if(1&e){const e=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"div",17),o.\u0275\u0275listener("click",function(){const t=o.\u0275\u0275restoreView(e),n=t.$implicit,i=t.index,r=o.\u0275\u0275nextContext().index;return o.\u0275\u0275nextContext().clickTab(n.employee_id,r,i)}),o.\u0275\u0275template(1,j,1,2,"img",18),o.\u0275\u0275template(2,z,1,3,"img",19),o.\u0275\u0275elementStart(3,"span"),o.\u0275\u0275text(4),o.\u0275\u0275elementEnd(),o.\u0275\u0275template(5,B,2,0,"div",20),o.\u0275\u0275elementEnd()}if(2&e){const e=t.$implicit,n=o.\u0275\u0275nextContext(2);o.\u0275\u0275classMap(e.employee_id===n.engineerId?"V"===e.status?"tab-act-v tab-act  group-item":"tab-act group-item":"group-item"),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",!e.head_img),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",e.head_img),o.\u0275\u0275advance(1),o.\u0275\u0275classMap("V"===e.status?"gray name_overflow":""),o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate(e.employee_name),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf","V"===e.status)}}function W(e,t){if(1&e){const e=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementContainerStart(0),o.\u0275\u0275elementStart(1,"div",13),o.\u0275\u0275listener("click",function(){const t=o.\u0275\u0275restoreView(e).index;return o.\u0275\u0275nextContext().clickSite(t,!1)}),o.\u0275\u0275elementStart(2,"div",14),o.\u0275\u0275element(3,"img",15),o.\u0275\u0275elementEnd(),o.\u0275\u0275text(4),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(5,"div"),o.\u0275\u0275template(6,q,6,8,"div",16),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementContainerEnd()}if(2&e){const e=t.$implicit;o.\u0275\u0275advance(1),o.\u0275\u0275property("title",e.serviceSite),o.\u0275\u0275advance(2),o.\u0275\u0275classMap(e.open?"":"turn"),o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate1(" ",e.serviceSite," "),o.\u0275\u0275advance(1),o.\u0275\u0275classMap(e.open?"height e-wrap":"e-wrap"),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngForOf",e.employees)}}function G(e,t){1&e&&(o.\u0275\u0275elementStart(0,"div",40),o.\u0275\u0275text(1,"\u670d\u52a1"),o.\u0275\u0275elementEnd())}function U(e,t){1&e&&(o.\u0275\u0275elementStart(0,"div",41),o.\u0275\u0275text(1,"\u7a7a\u95f2"),o.\u0275\u0275elementEnd())}function H(e,t){1&e&&(o.\u0275\u0275elementStart(0,"div",42),o.\u0275\u0275text(1,"\u534f\u540c"),o.\u0275\u0275elementEnd())}function X(e,t){1&e&&(o.\u0275\u0275elementContainerStart(0),o.\u0275\u0275elementStart(1,"div",43),o.\u0275\u0275text(2,"\u534f\u540c"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(3,"div",44),o.\u0275\u0275text(4,"\u670d\u52a1"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementContainerEnd())}function Q(e,t){1&e&&o.\u0275\u0275element(0,"img",45)}function K(e,t){1&e&&o.\u0275\u0275element(0,"img",46)}function J(e,t){if(1&e){const e=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"div",32),o.\u0275\u0275listener("click",function(){o.\u0275\u0275restoreView(e);const t=o.\u0275\u0275nextContext().$implicit;return o.\u0275\u0275nextContext(3).detail(t)}),o.\u0275\u0275template(1,G,2,0,"div",33),o.\u0275\u0275template(2,U,2,0,"div",34),o.\u0275\u0275template(3,H,2,0,"div",35),o.\u0275\u0275template(4,X,5,0,"ng-container",36),o.\u0275\u0275template(5,Q,1,0,"img",37),o.\u0275\u0275template(6,K,1,0,"img",38),o.\u0275\u0275elementStart(7,"div",39),o.\u0275\u0275text(8),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()}if(2&e){const e=o.\u0275\u0275nextContext().$implicit,t=o.\u0275\u0275nextContext(3);o.\u0275\u0275propertyInterpolate("angularticsLabel",t.userInfo.tenantId+","+t.userInfo.userId),o.\u0275\u0275property("angularticsCategory","\u65e5\u7a0b\u603b\u89c8"),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",2==e.status),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",1==e.status),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",3==e.status),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",4==e.status),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",1!=e.status),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",1==e.status),o.\u0275\u0275advance(1),o.\u0275\u0275property("title",e.location),o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate(e.location)}}function Z(e,t){if(1&e&&(o.\u0275\u0275elementContainerStart(0),o.\u0275\u0275elementContainerStart(1,30),o.\u0275\u0275pipe(2,"date"),o.\u0275\u0275template(3,J,9,10,"div",31),o.\u0275\u0275elementContainerEnd(),o.\u0275\u0275elementContainerEnd()),2&e){const e=t.$implicit,n=o.\u0275\u0275nextContext().$implicit;o.\u0275\u0275advance(1),o.\u0275\u0275property("ngSwitch",o.\u0275\u0275pipeBind2(2,2,n,"yyyy/MM/dd")),o.\u0275\u0275advance(2),o.\u0275\u0275property("ngSwitchCase",e.schedule_date.split(" ")[0])}}function Y(e,t){if(1&e&&(o.\u0275\u0275elementStart(0,"ul",29),o.\u0275\u0275template(1,Z,4,5,"ng-container",7),o.\u0275\u0275elementEnd()),2&e){const e=o.\u0275\u0275nextContext(2);o.\u0275\u0275advance(1),o.\u0275\u0275property("ngForOf",e.listDataMap)}}function ee(e,t){if(1&e){const e=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"div",24),o.\u0275\u0275elementStart(1,"dw-calendar",25),o.\u0275\u0275listener("dwSelectChange",function(t){return o.\u0275\u0275restoreView(e),o.\u0275\u0275nextContext().datachange(t)}),o.\u0275\u0275template(2,Y,2,1,"ul",26),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(3,"div",27),o.\u0275\u0275elementStart(4,"label",28),o.\u0275\u0275listener("ngModelChange",function(t){return o.\u0275\u0275restoreView(e),o.\u0275\u0275nextContext().status=t})("ngModelChange",function(){return o.\u0275\u0275restoreView(e),o.\u0275\u0275nextContext().changePersonnel()}),o.\u0275\u0275text(5,"\u4ec5\u663e\u793a\u751f\u6548\u5458\u5de5\u65e5\u7a0b"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()}if(2&e){const e=o.\u0275\u0275nextContext();o.\u0275\u0275advance(4),o.\u0275\u0275property("ngModel",e.status)("dwDisabled",e.isDisabled)}}function te(e,t){if(1&e){const e=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"app-engineer-schedule-detail",47,48),o.\u0275\u0275listener("visibleChanged",function(t){return o.\u0275\u0275restoreView(e),o.\u0275\u0275nextContext().handlePreview(t)}),o.\u0275\u0275elementEnd()}}const ne=function(){return{width:"100%"}};function ie(e,t){if(1&e&&o.\u0275\u0275element(0,"img",49),2&e){const e=o.\u0275\u0275nextContext();o.\u0275\u0275property("src",e.previewImage,o.\u0275\u0275sanitizeUrl)("ngStyle",o.\u0275\u0275pureFunction0(2,ne))}}const re=function(){return{overflow:"auto"}};let ae=(()=>{class e{constructor(e,t,n,i,r){this.message=e,this.userService=t,this.engineerScheduleService=n,this.datePipe=i,this.router=r,this.data="",this.siteList=[],this.siteIdx=null,this.engineerList=[],this.employeeIdx=0,this.engineerId=0,this.listDataMap=[],this.isDisabled=!1,this.isCollapsed=!1,this.detailTitle="",this.service_site_type="",this.status=!0,this.previewVisible=!1,this.previewImage="",this.userInfo={tenantId:"",userId:""},this.handlePreview=e=>(0,d.mG)(this,void 0,void 0,function*(){console.log(e),this.engineerScheduleService.getFileById(e.uid).subscribe(e=>{this.previewImage=e.value,this.previewVisible=!0})})}ngOnInit(){this.userInfo=this.userService.getUserInfo(),this.engineerScheduleService.getUserSiteType().subscribe(e=>{this.service_site_type=e.service_site_type,this.data=this.datePipe.transform(new Date,"yyyy-MM"),this.loadData("")})}onKeyDown(e){this.router.routerState.snapshot.url.includes("engineer-schedule")&&("ArrowDown"===e.key?(this.employeeIdx>=this.siteList[this.siteIdx].employees.length-1?(this.siteIdx=this.siteIdx>=this.siteList.length-1?0:this.siteIdx+1,this.employeeIdx=0,this.clickSite(this.siteIdx,!0)):this.employeeIdx=this.employeeIdx+1,this.engineerId=this.siteList[this.siteIdx].employees[this.employeeIdx].employee_id,this.getEngineerDetail(),console.log(this.siteIdx,this.employeeIdx)):"ArrowUp"===e.key&&(this.employeeIdx<=0?(this.siteIdx=this.siteIdx<=0?this.siteList.length-1:this.siteIdx-1,this.employeeIdx=this.siteList[this.siteIdx].employees.length-1,this.clickSite(this.siteIdx,!0)):this.employeeIdx=this.employeeIdx-1,this.engineerId=this.siteList[this.siteIdx].employees[this.employeeIdx].employee_id,this.getEngineerDetail(),console.log(this.siteIdx)))}loadData(e){this.engineerScheduleService.getServiceSites(this.status,this.data).subscribe(t=>{var n;this.isDisabled="0"===t.data.invalidEmployeeFlag,"0"===t.data.invalidEmployeeFlag&&(this.status=!0),"changePersonnel"===e?(null===(n=t.data.serviceSites)||void 0===n||n.forEach((e,t)=>{e.open=!!this.siteList[t].open&&this.siteList[t].open,e.isLoadImg=!!this.siteList[t].isLoadImg&&this.siteList[t].isLoadImg}),this.siteList=t.data.serviceSites,this.siteList.forEach((e,t)=>{e.isLoadImg&&this.getEngineersHeadImg(t)})):(this.siteList=t.data.serviceSites||[],this.siteList.length&&(this.siteIdx=0,this.getEngineersHeadImg(0),this.siteList[0].open=!0,this.siteList[0].isLoadImg=!0,this.engineerId=this.siteList[0].employees[0].employee_id,this.getEngineerDetail()))},e=>{e.hasOwnProperty("error")&&e.error.hasOwnProperty("errorMessage")&&e.error.errorMessage&&this.message.error(e.error.errorMessage)})}changePersonnel(){this.loadData("changePersonnel")}getEngineersHeadImg(e){const t=[];for(const n of this.siteList[e].employees)n.file_id&&t.push(new Promise((e,t)=>{this.engineerScheduleService.getFileById(n.file_id).subscribe(t=>{n.head_img=t.value,e(1)})}));Promise.all(t).then(t=>{this.siteList[e].isLoadImg=!0})}datachange(e){console.log(e),this.data=this.datePipe.transform(e,"yyyy-MM"),this.loadData("changePersonnel")}clickSite(e,t){this.siteIdx=e,this.siteList[e].open=!!t||!this.siteList[e].open,this.siteList[e].open&&!this.siteList[e].isLoadImg&&this.getEngineersHeadImg(e),console.log("this.siteList",this.siteList)}clickTab(e,t,n){console.log(t,n),this.engineerId!==e&&(this.engineerId=e,this.siteIdx=t,this.employeeIdx=n,this.getEngineerDetail())}getEngineerDetail(){this.engineerScheduleService.getEngineerDetail(this.engineerId).subscribe(e=>{this.listDataMap=e.engineer_schedule},e=>{e.hasOwnProperty("error")&&e.error.hasOwnProperty("errorMessage")&&e.error.errorMessage&&this.message.error(e.error.errorMessage)})}detail(e){this.isCollapsed=!0;const t=this.datePipe.transform(e.schedule_date,"yyyy-MM-dd"),n=this.getDateWeek(e.schedule_date);this.detailTitle="1"===e.status?` <div class="detail-title">\n          ${t} ${n}\n          <div class="status-tip">\u7a7a\u95f2</div>\n        </div>`:"2"===e.status?` <div class="detail-title">\n          ${t} ${n}\n          <div class="status-tip orange">\u670d\u52a1</div>\n        </div>`:"3"===e.status?`<div class="detail-title">\n          ${t} ${n}\n          <div class="status-tip blue">\u534f\u540c</div>\n        </div>`:`<div class="detail-title">\n          ${t} ${n}\n              <div class="status-tip blue2">\u534f\u540c</div>\n              <div class="status-tip orange2">\u670d\u52a1</div>\n        </div>`,setTimeout(()=>{this.child.initData(e)})}getDateWeek(e){const t=new Date(Date.parse(e));return new Array("\u661f\u671f\u65e5","\u661f\u671f\u4e00","\u661f\u671f\u4e8c","\u661f\u671f\u4e09","\u661f\u671f\u56db","\u661f\u671f\u4e94","\u661f\u671f\u516d")[t.getDay()]}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(c.DwMessageService),o.\u0275\u0275directiveInject(s.DwUserService),o.\u0275\u0275directiveInject(h),o.\u0275\u0275directiveInject(i.DatePipe),o.\u0275\u0275directiveInject(r.Router))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["app-engineer-schedule-list"]],viewQuery:function(e,t){if(1&e&&o.\u0275\u0275viewQuery($,5),2&e){let e;o.\u0275\u0275queryRefresh(e=o.\u0275\u0275loadQuery())&&(t.child=e.first)}},hostBindings:function(e,t){1&e&&o.\u0275\u0275listener("keydown",function(e){return t.onKeyDown(e)},!1,o.\u0275\u0275resolveDocument)},decls:16,vars:10,consts:[[1,"dw-f-content-list","layoutClass","sales_layout"],[1,"issue_layout_head"],[1,"issue_layout_title"],[2,"margin-left","3px"],[1,"content-box"],[1,"schedule-box"],[1,"left"],[4,"ngFor","ngForOf"],["class","right",4,"ngIf"],[3,"dwVisible","dwWidth","dwBodyStyle","dwTitle","dwOnClose"],["dwDrawerContent",""],[3,"dwVisible","dwContent","dwFooter","dwOnCancel"],["modalContent",""],[1,"group-title",3,"title","click"],[1,"icon-arrow"],["src","../../../../../assets/img/icon_arrow.png","alt","\u5c55\u5f00"],[3,"class","click",4,"ngFor","ngForOf"],[3,"click"],["src","../../../../../assets/img/user-head.png","alt","\u5934\u50cf",3,"class",4,"ngIf"],["alt","\u5934\u50cf",3,"class","src",4,"ngIf"],["class","invalid",4,"ngIf"],["src","../../../../../assets/img/user-head.png","alt","\u5934\u50cf"],["alt","\u5934\u50cf",3,"src"],[1,"invalid"],[1,"right"],[3,"dwSelectChange"],["class","events",4,"dwDateCell"],[1,"select-box"],["dw-checkbox","",3,"ngModel","dwDisabled","ngModelChange"],[1,"events"],[3,"ngSwitch"],["class","location","dw-analyticsOn","click","angularticsAction","\u8be6\u60c5-\u70b9\u51fb\u67e5\u770b\u8be6\u60c5",3,"angularticsCategory","angularticsLabel","click",4,"ngSwitchCase"],["dw-analyticsOn","click","angularticsAction","\u8be6\u60c5-\u70b9\u51fb\u67e5\u770b\u8be6\u60c5",1,"location",3,"angularticsCategory","angularticsLabel","click"],["class","status-tip orange",4,"ngIf"],["class","status-tip",4,"ngIf"],["class","status-tip blue",4,"ngIf"],[4,"ngIf"],["src","../../../../../assets/img/icon_company.png","alt","\u5730\u5740",4,"ngIf"],["src","../../../../../assets/img/icon_address.png","alt","\u5730\u5740",4,"ngIf"],[1,"text",3,"title"],[1,"status-tip","orange"],[1,"status-tip"],[1,"status-tip","blue"],[1,"status-tip","blue2"],[1,"status-tip","orange2"],["src","../../../../../assets/img/icon_company.png","alt","\u5730\u5740"],["src","../../../../../assets/img/icon_address.png","alt","\u5730\u5740"],[3,"visibleChanged"],["child",""],["alt","\u76f8\u5173\u56fe\u7247",3,"src","ngStyle"]],template:function(e,t){if(1&e&&(o.\u0275\u0275elementStart(0,"dw-content",0),o.\u0275\u0275elementStart(1,"div",1),o.\u0275\u0275elementStart(2,"h2",2),o.\u0275\u0275elementStart(3,"span",3),o.\u0275\u0275text(4,"\u65e5\u7a0b\u603b\u89c8"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275element(5,"dw-divider"),o.\u0275\u0275elementStart(6,"div",4),o.\u0275\u0275elementStart(7,"div",5),o.\u0275\u0275elementStart(8,"div",6),o.\u0275\u0275template(9,W,7,7,"ng-container",7),o.\u0275\u0275elementEnd(),o.\u0275\u0275template(10,ee,6,2,"div",8),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(11,"dw-drawer",9),o.\u0275\u0275listener("dwOnClose",function(){return t.isCollapsed=!1}),o.\u0275\u0275template(12,te,2,0,"ng-template",10),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(13,"dw-modal",11),o.\u0275\u0275listener("dwOnCancel",function(){return t.previewVisible=!1}),o.\u0275\u0275template(14,ie,1,3,"ng-template",null,12,o.\u0275\u0275templateRefExtractor),o.\u0275\u0275elementEnd()),2&e){const e=o.\u0275\u0275reference(15);o.\u0275\u0275advance(9),o.\u0275\u0275property("ngForOf",t.siteList),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",t.siteList.length),o.\u0275\u0275advance(1),o.\u0275\u0275property("dwVisible",t.isCollapsed)("dwWidth","45%")("dwBodyStyle",o.\u0275\u0275pureFunction0(9,re))("dwTitle",t.detailTitle),o.\u0275\u0275advance(2),o.\u0275\u0275property("dwVisible",t.previewVisible)("dwContent",e)("dwFooter",null)}},directives:[F.DwContentComponent,V.DwDividerComponent,i.NgForOf,i.NgIf,T.DwDrawerComponent,T.DwDrawerContentDirective,f.DwModalComponent,L.DwCalendarComponent,L.DwDateCellDirective,R.DwCheckboxComponent,A.NgControlStatus,A.NgModel,i.NgSwitch,i.NgSwitchCase,N.DwAnalyticsOn,k,i.NgStyle],pipes:[i.DatePipe],styles:[".content-box[_ngcontent-%COMP%]{padding:0}.schedule-box[_ngcontent-%COMP%]{height:100%;display:flex}.schedule-box[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]{width:230px;height:100%;background:#ffffff;overflow-y:auto;border-right:1px solid #EEEEEE}.schedule-box[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .group-title[_ngcontent-%COMP%]{height:48px;line-height:48px;color:#000;font-size:18px;font-weight:bold;padding-left:30px;padding-right:12px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;cursor:pointer;position:relative}.schedule-box[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .group-title[_ngcontent-%COMP%]   .icon-arrow[_ngcontent-%COMP%]{width:12px;height:12px;display:flex;align-items:center;justify-content:center;position:absolute;top:18px;left:10px}.schedule-box[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .group-title[_ngcontent-%COMP%]   .icon-arrow[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:12px;transition:all ease .2s}.schedule-box[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .group-title[_ngcontent-%COMP%]   .icon-arrow[_ngcontent-%COMP%]   img.turn[_ngcontent-%COMP%]{transform:rotate(-90deg)}.schedule-box[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .group-title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#999}.schedule-box[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .e-wrap[_ngcontent-%COMP%]{height:0;overflow:hidden;transition:all ease .2s}.schedule-box[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .e-wrap.height[_ngcontent-%COMP%]{height:auto}.schedule-box[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .group-item[_ngcontent-%COMP%]{height:48px;color:#333;font-size:16px;padding-right:12px;overflow:hidden;display:flex;align-items:center;justify-content:flex-start;cursor:pointer}.schedule-box[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .group-item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:32px;height:32px;border-radius:50%;margin:0 10px 0 16px}.schedule-box[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .group-item.tab-act[_ngcontent-%COMP%]{color:#333;background:#DFF2FF;border-right:4px solid #1890ff;padding-right:8px}.schedule-box[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .group-item.tab-act-v[_ngcontent-%COMP%]{background:#EFEFEF}.schedule-box[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .invalid[_ngcontent-%COMP%]{display:inline-block;background:#BDBDBD;border-radius:4px;font-size:11px;color:#fff;padding:2px 7px 1px;margin-left:4px}.schedule-box[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .name_overflow[_ngcontent-%COMP%]{max-width:112px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.schedule-box[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .gray[_ngcontent-%COMP%]{opacity:.5}.schedule-box[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{flex:1;height:100%;overflow-y:auto;padding:8px 16px;position:relative}.schedule-box[_ngcontent-%COMP%]   .select-box[_ngcontent-%COMP%]{position:absolute;right:190px;top:24px}.schedule-box[_ngcontent-%COMP%]   .select-box[_ngcontent-%COMP%]   .ant-checkbox-wrapper[_ngcontent-%COMP%]{display:inline-flex;align-items:center}.schedule-box[_ngcontent-%COMP%]   .select-box[_ngcontent-%COMP%]   .ant-checkbox-wrapper[_ngcontent-%COMP%]     .ant-checkbox{margin-bottom:5px}.events[_ngcontent-%COMP%]{width:100%;height:100%;list-style:none;margin:0;padding:0}.events[_ngcontent-%COMP%]   .ant-badge-status[_ngcontent-%COMP%]{overflow:hidden;white-space:nowrap;width:100%;text-overflow:ellipsis;font-size:12px}.notes-month[_ngcontent-%COMP%]{text-align:center;font-size:28px}.notes-month[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]{font-size:28px}.location[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center}.location[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:14px;margin-right:4px}.location[_ngcontent-%COMP%]   .status-tip[_ngcontent-%COMP%]{width:48px;height:24px;line-height:24px;text-align:center;color:#fff;font-size:12px;background:#50d1a4;border-radius:12px;position:absolute;right:6px;bottom:36px}.location[_ngcontent-%COMP%]   .status-tip.orange[_ngcontent-%COMP%]{background:#ffad01}.location[_ngcontent-%COMP%]   .status-tip.orange2[_ngcontent-%COMP%]{background:#ffad01;right:38px;width:40px}.location[_ngcontent-%COMP%]   .status-tip.blue[_ngcontent-%COMP%]{background:#57C2FF}.location[_ngcontent-%COMP%]   .status-tip.blue2[_ngcontent-%COMP%]{background:#57C2FF;border-radius:0 12px 12px 0;text-align:right;padding-right:6px}.location[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{flex:1;color:#666;font-size:11px;white-space:nowrap;text-overflow:ellipsis;overflow:hidden}"]}),e})();var oe=n(51033);const le=[{path:"",pathMatch:"prefix",component:l,children:[{path:"",component:ae,canActivate:[a.DwAuthGuardService,oe.L],data:{dwRouteData:{programId:"engineer-schedule",dwAuthId:"engineer-schedule"},reload:!0}}]}];let de=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=o.\u0275\u0275defineInjector({imports:[[r.RouterModule.forChild(le)],r.RouterModule]}),e})();var se=n(23938),ce=n(93206);let me=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=o.\u0275\u0275defineInjector({imports:[[i.CommonModule,se.m,de,c.DwMessageModule,L.DwCalendarModule,F.DwLayoutModule,V.DwDividerModule,T.DwDrawerModule,w.DwTimelineModule,R.DwCheckboxModule,f.DwModalModule,ce.ServiceOrderModule,g.DwUploadModule]]}),e})()},31969:function(e,t,n){n.d(t,{M:function(){return d}});var i=n(51156),r=n(47372),a=n(9682);class o extends a.DwClientPagingDataSource{constructor(e,t){super(),this.dwDapHttp=e,this.url=t}getDataList(e,t){return this.dwDapHttp.get(this.url).pipe((0,r.map)(n=>(this._result={currentPage:e,datas:Object.assign([],n.data.common_phrase),pageCount:Math.ceil(n.data.common_phrase.length/t),pageSize:t,rowCount:n.data.common_phrase.length},this._result)))}}var l=n(42746);let d=(()=>{class e{constructor(e,t){this.dwHttp=e,this.selectModalService=t,this.setConfig("1")}setConfig(e){this.config={modalTitle:"\u5e38\u7528\u6545\u969c\u63cf\u8ff0",modalWidth:"50%",tableMultiSelect:!1,tableIdField:"common_phrase_id",tableNameField:"phrase",tablePageSize:10,tableColDefs:[{title:"\u5e38\u7528\u8bed",field:"phrase"}],tableCustomTag:e=>e.phrase,dataSource:new o(this.dwHttp,"restful/service/autoSettings/CommonPhrase/CommonPhraseList?type="+e+"&phrase=")}}open(e){return this.selectModalService.open(this.config,e).pipe((0,r.switchMap)(e=>this.dwHttp.get(`restful/service/autoSettings/CommonPhrase/CommonPhrase?id=${e[0]}`)))}}return e.\u0275fac=function(t){return new(t||e)(l.\u0275\u0275inject(i.DwDapHttpClient),l.\u0275\u0275inject(a.DwSelectModalService))},e.\u0275prov=l.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e})()},13437:function(e,t,n){n.d(t,{y:function(){return d}});var i=n(47372),r=n(9682);class a extends r.DwClientPagingDataSource{constructor(e,t){super(),this.dwDapHttp=e,this.url=t}getDataList(e,t){return this.dwDapHttp.get(this.url).pipe((0,i.map)(n=>(this._result={currentPage:e,datas:Object.assign([],n),pageCount:Math.ceil(n.length/t),pageSize:t,rowCount:n.length},this._result)))}}var o=n(51156),l=n(42746);let d=(()=>{class e{constructor(e,t){this.dwHttp=e,this.selectModalService=t}setConfig(e,t){this.config={modalTitle:"\u9009\u62e9\u670d\u52a1\u9879\u76ee",modalWidth:"50%",tableMultiSelect:t,tableIdField:"service_item_id",tableNameField:"service_item_name",tablePageSize:10,tableColDefs:[{title:"\u9879\u76ee\u7f16\u53f7",field:"service_item_code",width:""},{title:"\u9879\u76ee\u540d\u79f0",field:"service_item_name",width:""},{title:"\u4ef7\u683c",field:"customer_settlement_price",width:""}],tableCustomTag:e=>"("+e.service_item_code+")"+e.service_item_name,dataSource:new a(this.dwHttp,"restful/service/serviceItem/ServiceItem/ServiceItem?name=&code=")}}open(e){return this.selectModalService.open(this.config,e).pipe((0,i.switchMap)(e=>this.dwHttp.get(`restful/service/serviceItem/ServiceItem/ServiceItemByIds?ids=${e}`)))}}return e.\u0275fac=function(t){return new(t||e)(l.\u0275\u0275inject(o.DwDapHttpClient),l.\u0275\u0275inject(r.DwSelectModalService))},e.\u0275prov=l.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e})()},96344:function(e,t,n){n.d(t,{h:function(){return ml}});var i=n(64762),r=n(87974),a=n(1020),o=n(91970),l=n(18843),d=n(31371),s=n(83237),c=n(67733),m=n(53524),p=n(85835),u=n(30469),h=n(71049),g=n(97981),f=n(99487),w=n(17494),v=n(66800);class x extends class{constructor(){this.service_doc_servicecost_id=0,this.service_doc_id=0,this.service_cost_id=0,this.description="",this.cost_amt=0}}{constructor(){super(...arguments),this.service_order_id=0,this.service_cost_code="",this.service_cost_name=""}}var C=n(45890),_=n(9682),y=n(51156),S=n(42746);let b=(()=>{class e extends _.ApiServerPagingService{constructor(e,t){super(e,`${t}/ServiceCostOpener`,"service_cost",["service_cost_code","service_cost_name"]),this.dwDapHttpClient=e,this.serviceCostResource=t}}return e.\u0275fac=function(t){return new(t||e)(S.\u0275\u0275inject(y.DwDapHttpClient),S.\u0275\u0275inject("ServiceCostResource"))},e.\u0275prov=S.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e})();var I=n(47372);let E=(()=>{class e{constructor(e,t,n,i,r){this.dwDapHttpClient=e,this.commonHttpService=t,this.dwSelectModalService=n,this.serviceCostOpenerDataSourceService=i,this.serviceCostResource=r}setConfig(){this.config={modalTitle:"\u9009\u62e9\u670d\u52a1\u6210\u672c",modalWidth:"50%",tableMultiSelect:!0,tableIdField:"service_cost_id",tableNameField:"service_cost_name",tablePageSize:10,tableColDefs:[{title:"\u670d\u52a1\u6210\u672c\u7f16\u53f7",field:"service_cost_code"},{title:"\u670d\u52a1\u6210\u672c\u540d\u79f0",field:"service_cost_name"}],tableCustomTag:e=>"("+e.service_cost_code+")"+e.service_cost_name,dataSource:this.serviceCostOpenerDataSourceService}}open(e){return this.dwSelectModalService.open(this.config,e).pipe((0,I.switchMap)(e=>{const t={serviceCostIds:JSON.stringify(e||[])};return this.commonHttpService.get(`${this.serviceCostResource}/ServiceCostOpenerSelected`,t)}))}setQueryCondition(e){this.config.initParams=e}}return e.\u0275fac=function(t){return new(t||e)(S.\u0275\u0275inject(y.DwDapHttpClient),S.\u0275\u0275inject(C.$),S.\u0275\u0275inject(_.DwSelectModalService),S.\u0275\u0275inject(b),S.\u0275\u0275inject("ServiceCostResource"))},e.\u0275prov=S.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e})();var D=n(55245),O=n(13437),M=n(33795),P=n(31441),k=n(32276),F=n(80677),V=n(78169),T=n(29872),L=n(85773),R=n(8852),A=n(85277),N=n(10332),$=n(90395),j=n(82542),z=n(92323),B=n(67280);function q(e,t){1&e&&S.\u0275\u0275element(0,"em",13)}function W(e,t){1&e&&(S.\u0275\u0275elementStart(0,"span",14),S.\u0275\u0275text(1,"\u5f88\u5dee"),S.\u0275\u0275elementEnd())}function G(e,t){1&e&&(S.\u0275\u0275elementStart(0,"span",14),S.\u0275\u0275text(1,"\u5dee"),S.\u0275\u0275elementEnd())}function U(e,t){1&e&&(S.\u0275\u0275elementStart(0,"span",14),S.\u0275\u0275text(1,"\u4e00\u822c"),S.\u0275\u0275elementEnd())}function H(e,t){1&e&&(S.\u0275\u0275elementStart(0,"span",14),S.\u0275\u0275text(1,"\u6ee1\u610f"),S.\u0275\u0275elementEnd())}function X(e,t){1&e&&(S.\u0275\u0275elementStart(0,"span",14),S.\u0275\u0275text(1,"\u8d85\u8d5e"),S.\u0275\u0275elementEnd())}function Q(e,t){1&e&&S.\u0275\u0275element(0,"em",13)}function K(e,t){1&e&&(S.\u0275\u0275elementStart(0,"span",14),S.\u0275\u0275text(1,"\u5f88\u5dee"),S.\u0275\u0275elementEnd())}function J(e,t){1&e&&(S.\u0275\u0275elementStart(0,"span",14),S.\u0275\u0275text(1,"\u5dee"),S.\u0275\u0275elementEnd())}function Z(e,t){1&e&&(S.\u0275\u0275elementStart(0,"span",14),S.\u0275\u0275text(1,"\u4e00\u822c"),S.\u0275\u0275elementEnd())}function Y(e,t){1&e&&(S.\u0275\u0275elementStart(0,"span",14),S.\u0275\u0275text(1,"\u6ee1\u610f"),S.\u0275\u0275elementEnd())}function ee(e,t){1&e&&(S.\u0275\u0275elementStart(0,"span",14),S.\u0275\u0275text(1,"\u8d85\u8d5e"),S.\u0275\u0275elementEnd())}function te(e,t){1&e&&S.\u0275\u0275element(0,"em",13)}function ne(e,t){1&e&&(S.\u0275\u0275elementStart(0,"span",14),S.\u0275\u0275text(1,"\u5f88\u5dee"),S.\u0275\u0275elementEnd())}function ie(e,t){1&e&&(S.\u0275\u0275elementStart(0,"span",14),S.\u0275\u0275text(1,"\u5dee"),S.\u0275\u0275elementEnd())}function re(e,t){1&e&&(S.\u0275\u0275elementStart(0,"span",14),S.\u0275\u0275text(1,"\u4e00\u822c"),S.\u0275\u0275elementEnd())}function ae(e,t){1&e&&(S.\u0275\u0275elementStart(0,"span",14),S.\u0275\u0275text(1,"\u6ee1\u610f"),S.\u0275\u0275elementEnd())}function oe(e,t){1&e&&(S.\u0275\u0275elementStart(0,"span",14),S.\u0275\u0275text(1,"\u8d85\u8d5e"),S.\u0275\u0275elementEnd())}const le=function(){return{minRows:3,maxRows:3}};function de(e,t){if(1&e&&(S.\u0275\u0275elementStart(0,"form",2),S.\u0275\u0275elementStart(1,"dw-form-item"),S.\u0275\u0275elementStart(2,"dw-form-label",3),S.\u0275\u0275text(3,"\u95ee\u9898\u89e3\u51b3\u60c5\u51b5"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(4,"dw-form-control",3),S.\u0275\u0275elementStart(5,"dw-radio-group",4),S.\u0275\u0275elementStart(6,"label",5),S.\u0275\u0275text(7,"\u5df2\u89e3\u51b3"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(8,"label",6),S.\u0275\u0275text(9,"\u672a\u89e3\u51b3"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(10,"dw-form-item"),S.\u0275\u0275elementStart(11,"dw-form-label",3),S.\u0275\u0275text(12,"\u670d\u52a1\u54cd\u5e94\u901f\u5ea6"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(13,"dw-form-control",3),S.\u0275\u0275element(14,"dw-rate",7),S.\u0275\u0275template(15,q,1,0,"ng-template",null,8,S.\u0275\u0275templateRefExtractor),S.\u0275\u0275template(17,W,2,0,"span",9),S.\u0275\u0275template(18,G,2,0,"span",9),S.\u0275\u0275template(19,U,2,0,"span",9),S.\u0275\u0275template(20,H,2,0,"span",9),S.\u0275\u0275template(21,X,2,0,"span",9),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(22,"dw-form-item"),S.\u0275\u0275elementStart(23,"dw-form-label",3),S.\u0275\u0275text(24,"\u670d\u52a1\u6001\u5ea6"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(25,"dw-form-control",3),S.\u0275\u0275element(26,"dw-rate",10),S.\u0275\u0275template(27,Q,1,0,"ng-template",null,8,S.\u0275\u0275templateRefExtractor),S.\u0275\u0275template(29,K,2,0,"span",9),S.\u0275\u0275template(30,J,2,0,"span",9),S.\u0275\u0275template(31,Z,2,0,"span",9),S.\u0275\u0275template(32,Y,2,0,"span",9),S.\u0275\u0275template(33,ee,2,0,"span",9),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(34,"dw-form-item"),S.\u0275\u0275elementStart(35,"dw-form-label",3),S.\u0275\u0275text(36,"\u670d\u52a1\u6ee1\u610f\u5ea6"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(37,"dw-form-control",3),S.\u0275\u0275element(38,"dw-rate",11),S.\u0275\u0275template(39,te,1,0,"ng-template",null,8,S.\u0275\u0275templateRefExtractor),S.\u0275\u0275template(41,ne,2,0,"span",9),S.\u0275\u0275template(42,ie,2,0,"span",9),S.\u0275\u0275template(43,re,2,0,"span",9),S.\u0275\u0275template(44,ae,2,0,"span",9),S.\u0275\u0275template(45,oe,2,0,"span",9),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(46,"dw-form-item"),S.\u0275\u0275elementStart(47,"dw-form-label",3),S.\u0275\u0275text(48,"\u5ba2\u6237\u60f3\u8bf4"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(49,"dw-form-control",3),S.\u0275\u0275element(50,"textarea",12),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd()),2&e){const e=S.\u0275\u0275reference(16),t=S.\u0275\u0275nextContext();S.\u0275\u0275property("formGroup",t.form),S.\u0275\u0275advance(2),S.\u0275\u0275property("dwSm",6)("dwXs",24),S.\u0275\u0275advance(2),S.\u0275\u0275property("dwSm",16)("dwXs",24),S.\u0275\u0275advance(7),S.\u0275\u0275property("dwSm",6)("dwXs",24),S.\u0275\u0275advance(2),S.\u0275\u0275property("dwSm",16)("dwXs",24),S.\u0275\u0275advance(1),S.\u0275\u0275property("dwCharacter",e),S.\u0275\u0275advance(3),S.\u0275\u0275property("ngIf","1"==t.form.value.serviceResponseSpeed),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf","2"==t.form.value.serviceResponseSpeed),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf","3"==t.form.value.serviceResponseSpeed),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf","4"==t.form.value.serviceResponseSpeed),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf","5"==t.form.value.serviceResponseSpeed),S.\u0275\u0275advance(2),S.\u0275\u0275property("dwSm",6)("dwXs",24),S.\u0275\u0275advance(2),S.\u0275\u0275property("dwSm",16)("dwXs",24),S.\u0275\u0275advance(1),S.\u0275\u0275property("dwCharacter",e),S.\u0275\u0275advance(3),S.\u0275\u0275property("ngIf","1"==t.form.value.serviceAttitude),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf","2"==t.form.value.serviceAttitude),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf","3"==t.form.value.serviceAttitude),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf","4"==t.form.value.serviceAttitude),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf","5"==t.form.value.serviceAttitude),S.\u0275\u0275advance(2),S.\u0275\u0275property("dwSm",6)("dwXs",24),S.\u0275\u0275advance(2),S.\u0275\u0275property("dwSm",16)("dwXs",24),S.\u0275\u0275advance(1),S.\u0275\u0275property("dwCharacter",e),S.\u0275\u0275advance(3),S.\u0275\u0275property("ngIf","1"==t.form.value.serviceSatisfaction),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf","2"==t.form.value.serviceSatisfaction),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf","3"==t.form.value.serviceSatisfaction),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf","4"==t.form.value.serviceSatisfaction),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf","5"==t.form.value.serviceSatisfaction),S.\u0275\u0275advance(2),S.\u0275\u0275property("dwSm",6)("dwXs",24),S.\u0275\u0275advance(2),S.\u0275\u0275property("dwSm",16)("dwXs",24),S.\u0275\u0275advance(1),S.\u0275\u0275property("dwAutosize",S.\u0275\u0275pureFunction0(40,le))}}const se=function(){return{height:"calc(100% - 55px)",overflow:"auto","padding-bottom":"24px"}};let ce=(()=>{class e{constructor(e,t,n){this.serviceOrderSrv=e,this.fb=t,this.message=n,this.isEvaluationVisible=!1,this.visibleChanged=new S.EventEmitter,this.service_order_id="",this.form=t.group({service_order_id:"",problemSolving:[0,a.Validators.required],serviceResponseSpeed:[0,a.Validators.required],serviceAttitude:[0,a.Validators.required],serviceSatisfaction:[0,a.Validators.required],customer_feedback:[""]})}ngOnInit(){}initData(e){this.service_order_id=e,this.form.setValue({service_order_id:e,problemSolving:"5",serviceResponseSpeed:0,serviceAttitude:0,serviceSatisfaction:0,customer_feedback:""})}close(){this.form.reset({service_order_id:"",problemSolving:"5",serviceResponseSpeed:0,serviceAttitude:0,serviceSatisfaction:0,customer_feedback:""}),this.isEvaluationVisible=!1,this.visibleChanged.emit(this.isEvaluationVisible)}submit(){const e=String(this.form.value.problemSolving)+","+String(this.form.value.serviceResponseSpeed)+","+String(this.form.value.serviceAttitude)+","+String(this.form.value.serviceSatisfaction),t=(Number(this.form.value.problemSolving)+Number(this.form.value.serviceResponseSpeed)+Number(this.form.value.serviceAttitude)+Number(this.form.value.serviceSatisfaction))/2;this.serviceOrderSrv.evaluationServiceOrder({service_order_id:this.form.value.service_order_id,customer_evaluation:e,customer_scoring:t,customer_feedback:this.form.value.customer_feedback}).subscribe(e=>{"success"===e?(this.isSuccess=!0,this.close(),this.message.create("success","\u64cd\u4f5c\u6210\u529f\uff01")):this.message.create("error",e)}),this.close()}}return e.\u0275fac=function(t){return new(t||e)(S.\u0275\u0275directiveInject(g.R),S.\u0275\u0275directiveInject(a.FormBuilder),S.\u0275\u0275directiveInject(s.DwMessageService))},e.\u0275cmp=S.\u0275\u0275defineComponent({type:e,selectors:[["app-service-order-evaluation"]],inputs:{isEvaluationVisible:"isEvaluationVisible"},outputs:{visibleChanged:"visibleChanged"},decls:2,vars:6,consts:[["dwTitle","\u7528\u6237\u8bc4\u4ef7",3,"dwBodyStyle","dwMaskClosable","dwWidth","dwVisible","dwOkDisabled","dwVisibleChange","dwOnCancel","dwOnOk"],["dwModalContent",""],["dw-form","",3,"formGroup"],[3,"dwSm","dwXs"],["dwName","radiogroup","formControlName","problemSolving"],["dw-radio","","dwValue","5"],["dw-radio","","dwValue","0"],["formControlName","serviceResponseSpeed",3,"dwCharacter"],["characterIcon",""],["class","score-text",4,"ngIf"],["formControlName","serviceAttitude",3,"dwCharacter"],["formControlName","serviceSatisfaction",3,"dwCharacter"],["dw-input","","maxlength","255","placeholder","\u8bf7\u8f93\u5165\u5907\u6ce8","formControlName","customer_feedback",3,"dwAutosize"],["dw-icon","","dwTheme","fill","dwType","heart"],[1,"score-text"]],template:function(e,t){1&e&&(S.\u0275\u0275elementStart(0,"dw-modal",0),S.\u0275\u0275listener("dwVisibleChange",function(e){return t.isEvaluationVisible=e})("dwOnCancel",function(){return t.close()})("dwOnOk",function(){return t.submit()}),S.\u0275\u0275template(1,de,51,41,"ng-template",1),S.\u0275\u0275elementEnd()),2&e&&S.\u0275\u0275property("dwBodyStyle",S.\u0275\u0275pureFunction0(5,se))("dwMaskClosable",!1)("dwWidth",420)("dwVisible",t.isEvaluationVisible)("dwOkDisabled",!t.form.valid)},directives:[P.DwModalComponent,P.DwModalContentDirective,a.\u0275NgNoValidate,a.NgControlStatusGroup,L.DwFormDirective,a.FormGroupDirective,T.DwRowDirective,L.DwFormItemComponent,T.DwColDirective,L.DwFormLabelComponent,L.DwFormControlComponent,j.DwRadioGroupComponent,a.NgControlStatus,a.FormControlName,j.DwRadioComponent,z.DwRateComponent,D.NgIf,B.DwInputDirective,a.DefaultValueAccessor,B.DwAutosizeDirective,a.MaxLengthValidator,R.u,A.DwIconDirective],styles:[".score-text[_ngcontent-%COMP%]{color:#00000073;font-size:12px;margin-left:12px;vertical-align:1px}"]}),e})();var me=n(62695),pe=n(71452),ue=n(83522);function he(e,t){1&e&&S.\u0275\u0275element(0,"em",19)}function ge(e,t){1&e&&(S.\u0275\u0275elementStart(0,"span",20),S.\u0275\u0275text(1,"\u5f88\u5dee"),S.\u0275\u0275elementEnd())}function fe(e,t){1&e&&(S.\u0275\u0275elementStart(0,"span",20),S.\u0275\u0275text(1,"\u5dee"),S.\u0275\u0275elementEnd())}function we(e,t){1&e&&(S.\u0275\u0275elementStart(0,"span",20),S.\u0275\u0275text(1,"\u4e00\u822c"),S.\u0275\u0275elementEnd())}function ve(e,t){1&e&&(S.\u0275\u0275elementStart(0,"span",20),S.\u0275\u0275text(1,"\u6ee1\u610f"),S.\u0275\u0275elementEnd())}function xe(e,t){1&e&&(S.\u0275\u0275elementStart(0,"span",20),S.\u0275\u0275text(1,"\u8d85\u8d5e"),S.\u0275\u0275elementEnd())}const Ce=function(){return{minRows:2,maxRows:2}};function _e(e,t){if(1&e){const e=S.\u0275\u0275getCurrentView();S.\u0275\u0275elementStart(0,"tr"),S.\u0275\u0275elementStart(1,"td"),S.\u0275\u0275elementStart(2,"span",14),S.\u0275\u0275text(3),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(4,"dw-rate",15),S.\u0275\u0275listener("ngModelChange",function(t){return S.\u0275\u0275restoreView(e).$implicit.score=t}),S.\u0275\u0275elementEnd(),S.\u0275\u0275template(5,he,1,0,"ng-template",null,16,S.\u0275\u0275templateRefExtractor),S.\u0275\u0275template(7,ge,2,0,"span",17),S.\u0275\u0275template(8,fe,2,0,"span",17),S.\u0275\u0275template(9,we,2,0,"span",17),S.\u0275\u0275template(10,ve,2,0,"span",17),S.\u0275\u0275template(11,xe,2,0,"span",17),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(12,"td"),S.\u0275\u0275elementStart(13,"textarea",18),S.\u0275\u0275listener("ngModelChange",function(t){return S.\u0275\u0275restoreView(e).$implicit.explanation=t}),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd()}if(2&e){const e=t.$implicit,n=S.\u0275\u0275reference(6);S.\u0275\u0275advance(3),S.\u0275\u0275textInterpolate(e.name),S.\u0275\u0275advance(1),S.\u0275\u0275property("dwCharacter",n)("ngModel",e.score),S.\u0275\u0275advance(3),S.\u0275\u0275property("ngIf","1"==e.score),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf","2"==e.score),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf","3"==e.score),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf","4"==e.score),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf","5"==e.score),S.\u0275\u0275advance(2),S.\u0275\u0275property("dwAutosize",S.\u0275\u0275pureFunction0(10,Ce))("ngModel",e.explanation)}}function ye(e,t){if(1&e&&(S.\u0275\u0275elementStart(0,"form",2),S.\u0275\u0275elementStart(1,"dw-form-item"),S.\u0275\u0275elementStart(2,"dw-form-label",3),S.\u0275\u0275text(3,"\u95ee\u9898\u89e3\u51b3\u60c5\u51b5"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(4,"dw-form-control",4),S.\u0275\u0275elementStart(5,"dw-radio-group",5),S.\u0275\u0275elementStart(6,"label",6),S.\u0275\u0275text(7,"\u5df2\u89e3\u51b3"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(8,"label",6),S.\u0275\u0275text(9,"\u672a\u89e3\u51b3"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(10,"dw-table",7,8),S.\u0275\u0275elementStart(12,"thead"),S.\u0275\u0275elementStart(13,"tr",9),S.\u0275\u0275elementStart(14,"th",10),S.\u0275\u0275elementStart(15,"span",11),S.\u0275\u0275text(16,"\u56de\u8bbf\u9879\u76ee"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(17,"th",12),S.\u0275\u0275elementStart(18,"span",11),S.\u0275\u0275text(19,"\u8bf4\u660e"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(20,"tbody"),S.\u0275\u0275template(21,_e,14,11,"tr",13),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd()),2&e){const e=S.\u0275\u0275reference(11),t=S.\u0275\u0275nextContext();S.\u0275\u0275property("formGroup",t.form),S.\u0275\u0275advance(2),S.\u0275\u0275property("dwSm",4)("dwXs",24),S.\u0275\u0275advance(2),S.\u0275\u0275property("dwSm",16)("dwXs",24),S.\u0275\u0275advance(2),S.\u0275\u0275property("dwValue",5),S.\u0275\u0275advance(2),S.\u0275\u0275property("dwValue",0),S.\u0275\u0275advance(2),S.\u0275\u0275property("dwData",t.returnvisitList)("dwFrontPagination",!1),S.\u0275\u0275advance(11),S.\u0275\u0275property("ngForOf",e.data)}}const Se=function(){return{height:"calc(100% - 55px)",overflow:"auto","padding-bottom":"24px"}};let be=(()=>{class e{constructor(e,t,n){this.serviceOrderSrv=e,this.fb=t,this.message=n,this.returnvisitList=[],this.isReturnvisitVisible=!1,this.visibleChanged=new S.EventEmitter,this.service_order_id="",this.form=t.group({service_order_id:"",problemSolving:[0,a.Validators.required],problemId:[0,a.Validators.required]})}ngOnInit(){}initData(e){this.service_order_id=e,this.form.setValue({service_order_id:e,problemSolving:5,problemId:0}),this.serviceOrderSrv.getReturnvisitItemList().subscribe(e=>{const t=[];for(const n of e)"\u95ee\u9898\u89e3\u51b3\u60c5\u51b5"!==n.name?t.push({name:n.name,returnvisit_item_id:n.returnvisit_item_id,score:0,explanation:""}):this.form.get("problemId").setValue(n.returnvisit_item_id);this.returnvisitList=t},e=>{e.hasOwnProperty("error")&&e.error.hasOwnProperty("errorMessage")&&e.error.errorMessage&&this.message.error(e.error.errorMessage)})}close(e){this.form.reset({service_order_id:"",problemSolving:5,problemId:0}),this.visibleChanged.emit(e)}submit(){const e=[{name:"\u95ee\u9898\u89e3\u51b3\u60c5\u51b5",returnvisit_item_id:this.form.value.problemId,score:this.form.value.problemSolving+"",explanation:""}];for(const t of this.returnvisitList)e.push({name:t.name,returnvisit_item_id:t.returnvisit_item_id,score:t.score+"",explanation:t.explanation});this.serviceOrderSrv.returnvisit({service_order_id:this.form.value.service_order_id,returnvisitItems:e}).subscribe(e=>{this.close(!0),this.message.create("success","\u64cd\u4f5c\u6210\u529f\uff01")},e=>{e.hasOwnProperty("error")&&e.error.hasOwnProperty("errorMessage")&&e.error.errorMessage&&this.message.error(e.error.errorMessage)})}}return e.\u0275fac=function(t){return new(t||e)(S.\u0275\u0275directiveInject(o.v),S.\u0275\u0275directiveInject(a.FormBuilder),S.\u0275\u0275directiveInject(s.DwMessageService))},e.\u0275cmp=S.\u0275\u0275defineComponent({type:e,selectors:[["app-service-order-returnvisit"]],inputs:{isReturnvisitVisible:"isReturnvisitVisible"},outputs:{visibleChanged:"visibleChanged"},decls:2,vars:6,consts:[["dwTitle","\u670d\u52a1\u56de\u8bbf",3,"dwBodyStyle","dwMaskClosable","dwWidth","dwVisible","dwOkDisabled","dwVisibleChange","dwOnCancel","dwOnOk"],["dwModalContent",""],["dw-form","",3,"formGroup"],[2,"font-weight","bold",3,"dwSm","dwXs"],[3,"dwSm","dwXs"],["dwName","radiogroup","formControlName","problemSolving"],["dw-radio","",3,"dwValue"],[3,"dwData","dwFrontPagination"],["dwTable",""],["dw-tr",""],["dw-th","","width","320","dwAlign","center",2,"background","#fff"],["translate",""],["dw-th","",2,"background","#fff"],[4,"ngFor","ngForOf"],[1,"returnvisit-label"],[3,"dwCharacter","ngModel","ngModelChange"],["characterIcon",""],["class","score-text",4,"ngIf"],["dw-input","","maxlength","255",3,"dwAutosize","ngModel","ngModelChange"],["dw-icon","","dwTheme","fill","dwType","heart"],[1,"score-text"]],template:function(e,t){1&e&&(S.\u0275\u0275elementStart(0,"dw-modal",0),S.\u0275\u0275listener("dwVisibleChange",function(e){return t.isReturnvisitVisible=e})("dwOnCancel",function(){return t.close(!1)})("dwOnOk",function(){return t.submit()}),S.\u0275\u0275template(1,ye,22,10,"ng-template",1),S.\u0275\u0275elementEnd()),2&e&&S.\u0275\u0275property("dwBodyStyle",S.\u0275\u0275pureFunction0(5,Se))("dwMaskClosable",!1)("dwWidth",620)("dwVisible",t.isReturnvisitVisible)("dwOkDisabled",!t.form.valid)},directives:[P.DwModalComponent,P.DwModalContentDirective,a.\u0275NgNoValidate,a.NgControlStatusGroup,L.DwFormDirective,a.FormGroupDirective,T.DwRowDirective,L.DwFormItemComponent,T.DwColDirective,L.DwFormLabelComponent,L.DwFormControlComponent,j.DwRadioGroupComponent,a.NgControlStatus,a.FormControlName,j.DwRadioComponent,me.DwTableComponent,pe.Ct,me.DwTheadComponent,me.DwTrDirective,me.DwTableCellDirective,me.DwThMeasureDirective,pe.BL,me.DwCellAlignDirective,ue.TranslateDirective,me.DwTbodyComponent,D.NgForOf,z.DwRateComponent,a.NgModel,D.NgIf,B.DwInputDirective,B.DwAutosizeDirective,a.DefaultValueAccessor,a.MaxLengthValidator,R.u,A.DwIconDirective],styles:[".returnvisit-label[_ngcontent-%COMP%]{display:inline-block;width:120px;padding-right:20px;padding-left:12px;text-align:right;font-weight:bold}.score-text[_ngcontent-%COMP%]{color:#00000073;font-size:12px;margin-left:12px;vertical-align:1px}"]}),e})();var Ie=n(74591);function Ee(e,t){1&e&&(S.\u0275\u0275elementStart(0,"div",15),S.\u0275\u0275text(1,"\u539f\u5e8f\u5217\u53f7"),S.\u0275\u0275elementEnd())}function De(e,t){1&e&&(S.\u0275\u0275elementStart(0,"div",15),S.\u0275\u0275text(1,"\u539f\u9879\u76ee\u53f7"),S.\u0275\u0275elementEnd())}const Oe=function(){return{standalone:!0}};function Me(e,t){if(1&e){const e=S.\u0275\u0275getCurrentView();S.\u0275\u0275elementStart(0,"div",9),S.\u0275\u0275elementStart(1,"div",10),S.\u0275\u0275template(2,Ee,2,0,"div",11),S.\u0275\u0275template(3,De,2,0,"div",11),S.\u0275\u0275elementStart(4,"div",12),S.\u0275\u0275text(5,"\u62a5\u4fee\u65f6\u63d0\u4ea4"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(6,"div",13),S.\u0275\u0275elementStart(7,"input",14),S.\u0275\u0275listener("ngModelChange",function(t){return S.\u0275\u0275restoreView(e),S.\u0275\u0275nextContext(2).originalSn=t}),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd()}if(2&e){const e=S.\u0275\u0275nextContext(2);S.\u0275\u0275advance(2),S.\u0275\u0275property("ngIf","1"===e.type),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf","2"===e.type),S.\u0275\u0275advance(4),S.\u0275\u0275property("ngModelOptions",S.\u0275\u0275pureFunction0(4,Oe))("ngModel",e.originalSn)}}function Pe(e,t){1&e&&(S.\u0275\u0275elementStart(0,"div",15),S.\u0275\u0275text(1,"\u65b0\u5e8f\u5217\u53f7"),S.\u0275\u0275elementEnd())}function ke(e,t){1&e&&(S.\u0275\u0275elementStart(0,"div",15),S.\u0275\u0275text(1,"\u65b0\u9879\u76ee\u53f7"),S.\u0275\u0275elementEnd())}function Fe(e,t){if(1&e){const e=S.\u0275\u0275getCurrentView();S.\u0275\u0275elementStart(0,"div",20),S.\u0275\u0275elementStart(1,"div",21),S.\u0275\u0275listener("click",function(){return S.\u0275\u0275restoreView(e),S.\u0275\u0275nextContext(3).changeAgree("0")}),S.\u0275\u0275text(2,"\u4e0d\u540c\u610f"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(3,"div",22),S.\u0275\u0275listener("click",function(){return S.\u0275\u0275restoreView(e),S.\u0275\u0275nextContext(3).changeAgree("1")}),S.\u0275\u0275text(4,"\u540c\u610f\u53d8\u66f4"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd()}}function Ve(e,t){1&e&&(S.\u0275\u0275elementStart(0,"div",23),S.\u0275\u0275element(1,"img",24),S.\u0275\u0275text(2," \u4e0d\u540c\u610f "),S.\u0275\u0275elementEnd())}function Te(e,t){1&e&&(S.\u0275\u0275elementStart(0,"div",25),S.\u0275\u0275element(1,"img",26),S.\u0275\u0275text(2," \u540c\u610f\u53d8\u66f4 "),S.\u0275\u0275elementEnd())}function Le(e,t){1&e&&(S.\u0275\u0275elementStart(0,"div",27),S.\u0275\u0275text(1," \u8bf7\u786e\u8ba4\u5e8f\u5217\u53f7 "),S.\u0275\u0275elementEnd())}function Re(e,t){1&e&&(S.\u0275\u0275elementStart(0,"div",27),S.\u0275\u0275text(1," \u8bf7\u786e\u8ba4\u9879\u76ee\u53f7 "),S.\u0275\u0275elementEnd())}function Ae(e,t){if(1&e){const e=S.\u0275\u0275getCurrentView();S.\u0275\u0275elementStart(0,"div",9),S.\u0275\u0275elementStart(1,"div",10),S.\u0275\u0275template(2,Pe,2,0,"div",11),S.\u0275\u0275template(3,ke,2,0,"div",11),S.\u0275\u0275elementStart(4,"div",12),S.\u0275\u0275text(5,"\u5de5\u7a0b\u5e08\u63d0\u4ea4"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(6,"div",13),S.\u0275\u0275elementStart(7,"input",14),S.\u0275\u0275listener("ngModelChange",function(t){return S.\u0275\u0275restoreView(e),S.\u0275\u0275nextContext(2).currentSn=t}),S.\u0275\u0275elementEnd(),S.\u0275\u0275template(8,Fe,5,0,"div",16),S.\u0275\u0275template(9,Ve,3,0,"div",17),S.\u0275\u0275template(10,Te,3,0,"div",18),S.\u0275\u0275template(11,Le,2,0,"div",19),S.\u0275\u0275template(12,Re,2,0,"div",19),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd()}if(2&e){const e=S.\u0275\u0275nextContext(2);S.\u0275\u0275advance(2),S.\u0275\u0275property("ngIf","1"===e.type),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf","2"===e.type),S.\u0275\u0275advance(4),S.\u0275\u0275property("ngModelOptions",S.\u0275\u0275pureFunction0(9,Oe))("ngModel",e.currentSn),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf",null===e.agreeChangeSn),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf","0"===e.agreeChangeSn),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf","1"===e.agreeChangeSn),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf",null===e.agreeChangeSn&&e.notCheckedAgree&&"1"===e.type),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf",null===e.agreeChangeSn&&e.notCheckedAgree&&"2"===e.type)}}const Ne=function(){return{minRows:3,maxRows:3}};function $e(e,t){if(1&e){const e=S.\u0275\u0275getCurrentView();S.\u0275\u0275template(0,Me,8,5,"div",2),S.\u0275\u0275template(1,Ae,13,10,"div",2),S.\u0275\u0275elementStart(2,"p",3),S.\u0275\u0275text(3,"\u8d23\u4efb\u5f52\u5c5e"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(4,"div",4),S.\u0275\u0275elementStart(5,"div",5),S.\u0275\u0275elementStart(6,"dw-form-item"),S.\u0275\u0275elementStart(7,"label",6),S.\u0275\u0275listener("ngModelChange",function(t){return S.\u0275\u0275restoreView(e),S.\u0275\u0275nextContext().install=t})("ngModelChange",function(){return S.\u0275\u0275restoreView(e),S.\u0275\u0275nextContext().checkboxChange()}),S.\u0275\u0275text(8,"\u5b89\u88c5"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(9,"div",5),S.\u0275\u0275elementStart(10,"dw-form-item"),S.\u0275\u0275elementStart(11,"label",6),S.\u0275\u0275listener("ngModelChange",function(t){return S.\u0275\u0275restoreView(e),S.\u0275\u0275nextContext().postSale=t})("ngModelChange",function(){return S.\u0275\u0275restoreView(e),S.\u0275\u0275nextContext().checkboxChange()}),S.\u0275\u0275text(12,"\u552e\u540e"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(13,"div",4),S.\u0275\u0275elementStart(14,"div",5),S.\u0275\u0275elementStart(15,"dw-form-item"),S.\u0275\u0275elementStart(16,"label",6),S.\u0275\u0275listener("ngModelChange",function(t){return S.\u0275\u0275restoreView(e),S.\u0275\u0275nextContext().quality=t})("ngModelChange",function(){return S.\u0275\u0275restoreView(e),S.\u0275\u0275nextContext().checkboxChange()}),S.\u0275\u0275text(17,"\u54c1\u8d28"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(18,"div",5),S.\u0275\u0275elementStart(19,"dw-form-item"),S.\u0275\u0275elementStart(20,"label",6),S.\u0275\u0275listener("ngModelChange",function(t){return S.\u0275\u0275restoreView(e),S.\u0275\u0275nextContext().customer=t})("ngModelChange",function(){return S.\u0275\u0275restoreView(e),S.\u0275\u0275nextContext().checkboxChange()}),S.\u0275\u0275text(21,"\u5ba2\u6237"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(22,"div",4),S.\u0275\u0275elementStart(23,"div",5),S.\u0275\u0275elementStart(24,"dw-form-item"),S.\u0275\u0275elementStart(25,"label",6),S.\u0275\u0275listener("ngModelChange",function(t){return S.\u0275\u0275restoreView(e),S.\u0275\u0275nextContext().design=t})("ngModelChange",function(){return S.\u0275\u0275restoreView(e),S.\u0275\u0275nextContext().checkboxChange()}),S.\u0275\u0275text(26,"\u8bbe\u8ba1"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(27,"div",5),S.\u0275\u0275elementStart(28,"dw-form-item"),S.\u0275\u0275elementStart(29,"label",6),S.\u0275\u0275listener("ngModelChange",function(t){return S.\u0275\u0275restoreView(e),S.\u0275\u0275nextContext().partsQuality=t})("ngModelChange",function(){return S.\u0275\u0275restoreView(e),S.\u0275\u0275nextContext().checkboxChange()}),S.\u0275\u0275text(30,"\u96f6\u4ef6\u8d28\u91cf"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(31,"div",4),S.\u0275\u0275elementStart(32,"div",7),S.\u0275\u0275elementStart(33,"dw-form-item"),S.\u0275\u0275elementStart(34,"label",6),S.\u0275\u0275listener("ngModelChange",function(t){return S.\u0275\u0275restoreView(e),S.\u0275\u0275nextContext().produce=t})("ngModelChange",function(){return S.\u0275\u0275restoreView(e),S.\u0275\u0275nextContext().checkboxChange()}),S.\u0275\u0275text(35,"\u751f\u4ea7\u5236\u9020"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(36,"p",3),S.\u0275\u0275text(37,"\u610f\u89c1"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(38,"dw-form-item"),S.\u0275\u0275elementStart(39,"textarea",8),S.\u0275\u0275listener("ngModelChange",function(t){return S.\u0275\u0275restoreView(e),S.\u0275\u0275nextContext().remark=t}),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd()}if(2&e){const e=S.\u0275\u0275nextContext();S.\u0275\u0275property("ngIf",e.originalSn!==e.currentSn&&!e.isChangeReview),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf",e.originalSn!==e.currentSn&&!e.isChangeReview),S.\u0275\u0275advance(6),S.\u0275\u0275property("ngModel",e.install),S.\u0275\u0275advance(4),S.\u0275\u0275property("ngModel",e.postSale),S.\u0275\u0275advance(5),S.\u0275\u0275property("ngModel",e.quality),S.\u0275\u0275advance(4),S.\u0275\u0275property("ngModel",e.customer),S.\u0275\u0275advance(5),S.\u0275\u0275property("ngModel",e.design),S.\u0275\u0275advance(4),S.\u0275\u0275property("ngModel",e.partsQuality),S.\u0275\u0275advance(5),S.\u0275\u0275property("ngModel",e.produce),S.\u0275\u0275advance(5),S.\u0275\u0275property("ngModel",e.remark)("dwAutosize",S.\u0275\u0275pureFunction0(11,Ne))}}const je=function(){return{height:"calc(100% - 55px)",overflow:"auto","padding-bottom":"24px"}};let ze=(()=>{class e{constructor(e,t,n){this.serviceOrderSrv=e,this.fb=t,this.message=n,this.isEnableConfirm=!1,this.install=!1,this.postSale=!1,this.quality=!1,this.customer=!1,this.design=!1,this.partsQuality=!1,this.produce=!1,this.remark="",this.originalSn="",this.currentSn="",this.agreeChangeSn=null,this.isChangeReview=!1,this.type="1",this.isReviewVisible=!1,this.visibleChanged=new S.EventEmitter,this.service_order_id="",this.notCheckedAgree=!1}ngOnInit(){console.log(this.month("2020-9-1",6))}initData(e,t,n,i,r){this.type=r,this.agreeChangeSn=null,this.notCheckedAgree=!1,this.service_order_id=e,this.originalSn=t,this.currentSn=n,this.isChangeReview=!!i.review_employee_name,this.isChangeReview&&(this.install=i.review_responsible_party.indexOf("\u5b89\u88c5")>=0,this.postSale=i.review_responsible_party.indexOf("\u552e\u540e")>=0,this.quality=i.review_responsible_party.indexOf("\u54c1\u8d28")>=0,this.customer=i.review_responsible_party.indexOf("\u5ba2\u6237")>=0,this.design=i.review_responsible_party.indexOf("\u8bbe\u8ba1")>=0,this.partsQuality=i.review_responsible_party.indexOf("\u96f6\u4ef6\u8d28\u91cf")>=0,this.produce=i.review_responsible_party.indexOf("\u751f\u4ea7\u5236\u9020")>=0,this.remark=i.review_opinions)}month(e,t){const n=new Date(e);n.setDate(n.getDate()-1);let i,r=n.getFullYear();n.getMonth()+t+1>12?(r+=1,i=n.getMonth()+t-11):i=n.getMonth()+t+1;const a=n.getDate();let o=new Date(r,i,0).getDate();return o=o<a?o:a,r+"-"+i+"-"+o}changeAgree(e){this.notCheckedAgree=!1,this.agreeChangeSn=e}checkboxChange(){this.isEnableConfirm=this.install||this.postSale||this.quality||this.customer||this.design||this.partsQuality||this.produce}close(e){this.install=!1,this.postSale=!1,this.quality=!1,this.customer=!1,this.design=!1,this.partsQuality=!1,this.produce=!1,this.remark="",this.visibleChanged.emit(e)}submit(){if(!this.isChangeReview&&null===this.agreeChangeSn&&this.originalSn!==this.currentSn)return void(this.notCheckedAgree=!0);const e=String(Number(this.install))+","+String(Number(this.quality))+","+String(Number(this.design))+","+String(Number(this.postSale))+","+String(Number(this.customer))+","+String(Number(this.partsQuality))+","+String(Number(this.produce));this.serviceOrderSrv.reviewServiceOrder({params:{service_order_id:this.service_order_id,review_responsible_party:e,review_opinions:this.remark,original_sn:this.originalSn,current_sn:this.currentSn,agree_change_sn:null===this.agreeChangeSn?"0":this.agreeChangeSn},actionName:this.isChangeReview?"U":"C"}).subscribe(e=>{"success"===e?(this.close(!0),this.message.create("success","\u64cd\u4f5c\u6210\u529f\uff01")):this.message.create("error",e)},e=>{e.hasOwnProperty("error")&&e.error.hasOwnProperty("errorMessage")&&e.error.errorMessage&&this.message.error(e.error.errorMessage)})}}return e.\u0275fac=function(t){return new(t||e)(S.\u0275\u0275directiveInject(g.R),S.\u0275\u0275directiveInject(a.FormBuilder),S.\u0275\u0275directiveInject(s.DwMessageService))},e.\u0275cmp=S.\u0275\u0275defineComponent({type:e,selectors:[["app-service-order-review"]],inputs:{isReviewVisible:"isReviewVisible"},outputs:{visibleChanged:"visibleChanged"},decls:2,vars:7,consts:[[3,"dwBodyStyle","dwMaskClosable","dwWidth","dwVisible","dwOkDisabled","dwTitle","dwVisibleChange","dwOnCancel","dwOnOk"],["dwModalContent",""],["class","sn-box",4,"ngIf"],[2,"color","#333"],["dw-row","","dwGutter","8"],["dw-col","","dwSpan","12"],["dw-checkbox","",3,"ngModel","ngModelChange"],["dw-col","","dwSpan","24"],["dw-input","","maxlength","255","placeholder","200\u5b57\u4ee5\u5185",3,"ngModel","dwAutosize","ngModelChange"],[1,"sn-box"],[1,"labels"],["class","label1",4,"ngIf"],[1,"label2"],[1,"in-box"],["dw-input","","readonly","",3,"ngModelOptions","ngModel","ngModelChange"],[1,"label1"],["class","agree-box",4,"ngIf"],["class","agree-result not",4,"ngIf"],["class","agree-result",4,"ngIf"],["class","agree-warn",4,"ngIf"],[1,"agree-box"],[1,"dis-agree",3,"click"],[1,"do-agree",3,"click"],[1,"agree-result","not"],["src","../../../../../../assets/img/icon_disagree.png","alt","\u4e0d\u540c\u610f"],[1,"agree-result"],["src","../../../../../../assets/img/icon_agree.png","alt","\u540c\u610f"],[1,"agree-warn"]],template:function(e,t){1&e&&(S.\u0275\u0275elementStart(0,"dw-modal",0),S.\u0275\u0275listener("dwVisibleChange",function(e){return t.isReviewVisible=e})("dwOnCancel",function(){return t.close(!1)})("dwOnOk",function(){return t.submit()}),S.\u0275\u0275template(1,$e,40,12,"ng-template",1),S.\u0275\u0275elementEnd()),2&e&&S.\u0275\u0275property("dwBodyStyle",S.\u0275\u0275pureFunction0(6,je))("dwMaskClosable",!1)("dwWidth",420)("dwVisible",t.isReviewVisible)("dwOkDisabled",!t.isEnableConfirm)("dwTitle",t.isChangeReview?"\u66f4\u6539\u5ba1\u67e5":"\u5ba1\u67e5")},directives:[P.DwModalComponent,P.DwModalContentDirective,D.NgIf,T.DwRowDirective,T.DwColDirective,L.DwFormItemComponent,Ie.DwCheckboxComponent,a.NgControlStatus,a.NgModel,B.DwInputDirective,a.DefaultValueAccessor,B.DwAutosizeDirective,a.MaxLengthValidator],styles:[".sn-box[_ngcontent-%COMP%]{display:flex;margin-bottom:12px}.sn-box[_ngcontent-%COMP%]:nth-of-type(2){margin-bottom:24px}.sn-box[_ngcontent-%COMP%]   .labels[_ngcontent-%COMP%]{width:72px;height:32px;display:flex;flex-direction:column;justify-content:space-between}.sn-box[_ngcontent-%COMP%]   .labels[_ngcontent-%COMP%]   .label1[_ngcontent-%COMP%]{color:#333;font-size:14px;line-height:20px}.sn-box[_ngcontent-%COMP%]   .labels[_ngcontent-%COMP%]   .label2[_ngcontent-%COMP%]{color:#666;font-size:10px;line-height:14px}.sn-box[_ngcontent-%COMP%]   .in-box[_ngcontent-%COMP%]{flex:1;height:32px;display:flex;align-items:center;justify-content:center;position:relative}.sn-box[_ngcontent-%COMP%]   .in-box[_ngcontent-%COMP%]   .agree-box[_ngcontent-%COMP%]{height:32px;display:flex;justify-content:flex-end;align-items:center;position:absolute;top:0;right:12px;z-index:3}.sn-box[_ngcontent-%COMP%]   .in-box[_ngcontent-%COMP%]   .agree-box[_ngcontent-%COMP%]   .dis-agree[_ngcontent-%COMP%]{color:#999;font-size:14px;margin-right:8px;cursor:pointer}.sn-box[_ngcontent-%COMP%]   .in-box[_ngcontent-%COMP%]   .agree-box[_ngcontent-%COMP%]   .do-agree[_ngcontent-%COMP%]{color:#0d9def;font-size:14px;cursor:pointer}.sn-box[_ngcontent-%COMP%]   .in-box[_ngcontent-%COMP%]   .agree-result[_ngcontent-%COMP%]{height:32px;line-height:32px;display:flex;justify-content:flex-end;align-items:center;color:#0d9def;font-size:14px;position:absolute;top:0;right:12px;z-index:3}.sn-box[_ngcontent-%COMP%]   .in-box[_ngcontent-%COMP%]   .agree-result.not[_ngcontent-%COMP%]{color:#fe3a3a}.sn-box[_ngcontent-%COMP%]   .in-box[_ngcontent-%COMP%]   .agree-result[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:16px;margin-right:4px;margin-top:1px}.sn-box[_ngcontent-%COMP%]   .in-box[_ngcontent-%COMP%]   .agree-warn[_ngcontent-%COMP%]{color:red;font-size:12px;position:absolute;top:36px;left:0;z-index:3}"]}),e})();var Be=n(74913);function qe(e,t){1&e&&(S.\u0275\u0275elementStart(0,"div"),S.\u0275\u0275text(1,"\u6682\u65e0\u534f\u540c\u4eba\u6253\u5361\uff01\uff01\uff01\uff01"),S.\u0275\u0275elementEnd())}function We(e,t){1&e&&S.\u0275\u0275element(0,"img",9)}function Ge(e,t){if(1&e&&S.\u0275\u0275element(0,"img",10),2&e){const e=S.\u0275\u0275nextContext().$implicit;S.\u0275\u0275property("src",e.image,S.\u0275\u0275sanitizeUrl)}}function Ue(e,t){1&e&&(S.\u0275\u0275elementStart(0,"span",11),S.\u0275\u0275text(1,"\u534f\u540c"),S.\u0275\u0275elementEnd())}function He(e,t){1&e&&(S.\u0275\u0275elementStart(0,"span",12),S.\u0275\u0275text(1,"\u8d1f\u8d23\u4eba"),S.\u0275\u0275elementEnd())}function Xe(e,t){if(1&e&&(S.\u0275\u0275elementStart(0,"span",31),S.\u0275\u0275text(1),S.\u0275\u0275elementEnd()),2&e){const e=S.\u0275\u0275nextContext().$implicit;S.\u0275\u0275advance(1),S.\u0275\u0275textInterpolate(e.type)}}function Qe(e,t){if(1&e&&(S.\u0275\u0275elementStart(0,"span",32),S.\u0275\u0275text(1),S.\u0275\u0275elementEnd()),2&e){const e=S.\u0275\u0275nextContext().$implicit;S.\u0275\u0275advance(1),S.\u0275\u0275textInterpolate(e.type)}}function Ke(e,t){if(1&e&&(S.\u0275\u0275elementStart(0,"span",33),S.\u0275\u0275text(1),S.\u0275\u0275elementEnd()),2&e){const e=S.\u0275\u0275nextContext().$implicit;S.\u0275\u0275advance(1),S.\u0275\u0275textInterpolate(e.type)}}function Je(e,t){if(1&e&&(S.\u0275\u0275elementStart(0,"span",34),S.\u0275\u0275text(1),S.\u0275\u0275elementEnd()),2&e){const e=S.\u0275\u0275nextContext().$implicit;S.\u0275\u0275advance(1),S.\u0275\u0275textInterpolate(e.type)}}const Ze=function(){return{showPreviewIcon:!0}};function Ye(e,t){if(1&e){const e=S.\u0275\u0275getCurrentView();S.\u0275\u0275elementStart(0,"div",13),S.\u0275\u0275elementStart(1,"span",14),S.\u0275\u0275text(2),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(3,"div",15),S.\u0275\u0275elementStart(4,"dw-timeline"),S.\u0275\u0275elementStart(5,"dw-timeline-item",16),S.\u0275\u0275elementStart(6,"div",17),S.\u0275\u0275elementStart(7,"div",18),S.\u0275\u0275template(8,Xe,2,1,"span",19),S.\u0275\u0275template(9,Qe,2,1,"span",20),S.\u0275\u0275template(10,Ke,2,1,"span",21),S.\u0275\u0275template(11,Je,2,1,"span",22),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(12,"div",23),S.\u0275\u0275elementStart(13,"div",24),S.\u0275\u0275element(14,"img",25),S.\u0275\u0275elementStart(15,"div",26),S.\u0275\u0275text(16),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(17,"div",27),S.\u0275\u0275elementStart(18,"dw-upload",28),S.\u0275\u0275listener("dwFileListChange",function(t){return S.\u0275\u0275restoreView(e).$implicit.pictureInfos=t}),S.\u0275\u0275element(19,"em",29),S.\u0275\u0275elementStart(20,"div",30),S.\u0275\u0275text(21,"\u4e0a\u4f20"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd()}if(2&e){const e=t.$implicit,n=S.\u0275\u0275nextContext(3);S.\u0275\u0275advance(2),S.\u0275\u0275textInterpolate(null==e.report_time?null:e.report_time.slice(0,16)),S.\u0275\u0275advance(3),S.\u0275\u0275property("dwColor","#d8d8d8"),S.\u0275\u0275advance(3),S.\u0275\u0275property("ngIf",1===e.typeState),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf",2===e.typeState),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf",3===e.typeState),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf",4===e.typeState),S.\u0275\u0275advance(5),S.\u0275\u0275textInterpolate(e.location),S.\u0275\u0275advance(2),S.\u0275\u0275property("dwFileList",e.pictureInfos)("dwShowButton",e.pictureInfos.length<0)("dwShowUploadList",S.\u0275\u0275pureFunction0(11,Ze))("dwPreview",n.handlePreview)}}function et(e,t){if(1&e&&(S.\u0275\u0275elementStart(0,"div"),S.\u0275\u0275elementStart(1,"p"),S.\u0275\u0275template(2,We,1,0,"img",4),S.\u0275\u0275template(3,Ge,1,1,"img",5),S.\u0275\u0275elementStart(4,"span"),S.\u0275\u0275text(5),S.\u0275\u0275elementEnd(),S.\u0275\u0275template(6,Ue,2,0,"span",6),S.\u0275\u0275template(7,He,2,0,"span",7),S.\u0275\u0275elementEnd(),S.\u0275\u0275template(8,Ye,22,12,"div",8),S.\u0275\u0275elementEnd()),2&e){const e=t.$implicit;S.\u0275\u0275advance(2),S.\u0275\u0275property("ngIf",!e.image),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf",e.image),S.\u0275\u0275advance(2),S.\u0275\u0275textInterpolate(e.name),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf",0===e.charge),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf",1===e.charge),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngForOf",e.info)}}function tt(e,t){if(1&e&&(S.\u0275\u0275template(0,qe,2,0,"div",2),S.\u0275\u0275template(1,et,9,6,"div",3)),2&e){const e=S.\u0275\u0275nextContext();S.\u0275\u0275property("ngIf",!(null!=e.clockList&&e.clockList.length)),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngForOf",e.clockList)}}const nt=function(){return{height:"calc(80vh - 55px)",overflow:"scroll","padding-bottom":"24px"}};let it=(()=>{class e{constructor(){this.isClockVisible=!1,this.visibleChanged=new S.EventEmitter,this.title="",this.previewChange=new S.EventEmitter,this.handlePreview=e=>(0,i.mG)(this,void 0,void 0,function*(){this.previewChange.emit(e)})}ngOnInit(){}initData(e,t){console.log(e);const n=JSON.parse(JSON.stringify(e));n.forEach(e=>{e.info.forEach(e=>{e.type=e.type.slice(0,-2),e.type.indexOf("\u534f\u540c\u4eba")>=0&&(e.type=e.type.slice(3)),e.typeState=e.type.indexOf("\u51fa\u53d1")>=0?1:e.type.indexOf("\u5230\u8fbe")>=0?2:e.type.indexOf("\u9014\u7ecf")>=0?4:3})}),console.log(n),this.clockList=n,this.title="\u534f\u540c\u4eba\u6253\u5361\u8be6\u60c5 "+t}close(){this.visibleChanged.emit()}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=S.\u0275\u0275defineComponent({type:e,selectors:[["app-service-order-clock"]],inputs:{isClockVisible:"isClockVisible"},outputs:{visibleChanged:"visibleChanged",previewChange:"previewChange"},decls:2,vars:7,consts:[[3,"dwBodyStyle","dwMaskClosable","dwWidth","dwVisible","dwTitle","dwFooter","dwVisibleChange","dwOnCancel","dwOnOk"],["dwModalContent",""],[4,"ngIf"],[4,"ngFor","ngForOf"],["src","../../../../../../assets/img/user-head.png","alt","\u5934\u50cf",4,"ngIf"],["alt","\u5934\u50cf",3,"src",4,"ngIf"],["class","type",4,"ngIf"],["class","type blueType",4,"ngIf"],["class","clock-box",4,"ngFor","ngForOf"],["src","../../../../../../assets/img/user-head.png","alt","\u5934\u50cf"],["alt","\u5934\u50cf",3,"src"],[1,"type"],[1,"type","blueType"],[1,"clock-box"],[1,"time"],[1,"time-box"],[1,"timeItem",3,"dwColor"],[1,"process-flex-box"],[1,"type-wrap"],["class","process_state blue",4,"ngIf"],["class","process_state green",4,"ngIf"],["class","process_state",4,"ngIf"],["class","process_state gray",4,"ngIf"],[1,"remark"],[1,"location"],["src","../../../../../assets/img/icon_address.png","alt","\u5730\u5740"],[1,"text"],[1,"clearfix"],["dwListType","picture-card",3,"dwFileList","dwShowButton","dwShowUploadList","dwPreview","dwFileListChange"],["dw-icon","","dwType","plus"],[1,"ant-upload-text"],[1,"process_state","blue"],[1,"process_state","green"],[1,"process_state"],[1,"process_state","gray"]],template:function(e,t){1&e&&(S.\u0275\u0275elementStart(0,"dw-modal",0),S.\u0275\u0275listener("dwVisibleChange",function(e){return t.isClockVisible=e})("dwOnCancel",function(){return t.close()})("dwOnOk",function(){return t.close()}),S.\u0275\u0275template(1,tt,2,2,"ng-template",1),S.\u0275\u0275elementEnd()),2&e&&S.\u0275\u0275property("dwBodyStyle",S.\u0275\u0275pureFunction0(6,nt))("dwMaskClosable",!1)("dwWidth",700)("dwVisible",t.isClockVisible)("dwTitle",t.title)("dwFooter",null)},directives:[P.DwModalComponent,P.DwModalContentDirective,D.NgIf,D.NgForOf,Be.DwTimelineComponent,Be.DwTimelineItemComponent,c.DwUploadComponent,R.u,A.DwIconDirective],styles:["p[_ngcontent-%COMP%]{font-size:14px;display:flex;align-items:center;margin-bottom:24px}p[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:32px;height:32px;border-radius:50%;margin-right:8px}.type[_ngcontent-%COMP%]{font-size:11px;line-height:15px;margin-left:8px;padding:0 5px;color:#50d1a4;border:1px solid #50D1A4;border-radius:2px}.type.blueType[_ngcontent-%COMP%]{color:#01a3ff;border:1px solid #01A3FF}.clock-box[_ngcontent-%COMP%]{display:flex;align-items:flex-start;width:100%}.clock-box[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]{margin-right:12px;margin-top:-5px}.clock-box[_ngcontent-%COMP%]   .time-box[_ngcontent-%COMP%]{flex:1}  .clock-box .ant-timeline-item-last>.ant-timeline-item-tail{height:calc(100%)}  .clock-box:last-child .ant-timeline-item-last>.ant-timeline-item-tail{height:calc(0%)}.time-box[_ngcontent-%COMP%]   .type-wrap[_ngcontent-%COMP%]{width:82px}.time-box[_ngcontent-%COMP%]   .process_state[_ngcontent-%COMP%]{display:inline-block;color:#fff;font-size:14px;line-height:24px;padding:0 4px;margin-right:12px;background:#e7a65e}.time-box[_ngcontent-%COMP%]   .process_state.blue[_ngcontent-%COMP%]{background:#01A3FF}.time-box[_ngcontent-%COMP%]   .process_state.green[_ngcontent-%COMP%]{background:#3DCC99}.time-box[_ngcontent-%COMP%]   .process_state.gray[_ngcontent-%COMP%]{background:#BDBDBD}.time-box[_ngcontent-%COMP%]   .process-flex-box[_ngcontent-%COMP%]{display:flex;align-items:flex-start;flex:1}.time-box[_ngcontent-%COMP%]   .remark[_ngcontent-%COMP%]{margin-top:6px;width:calc(100% - 62px)}.time-box[_ngcontent-%COMP%]   .remark[_ngcontent-%COMP%]   .location[_ngcontent-%COMP%]{display:flex;align-items:flex-start;margin-bottom:5px}.time-box[_ngcontent-%COMP%]   .remark[_ngcontent-%COMP%]   .location[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:11px;height:14px;margin-right:5px;margin-top:3px}.time-box[_ngcontent-%COMP%]   .remark[_ngcontent-%COMP%]   .location[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{font-size:14px;color:#000000d9;line-height:14px;flex:1;line-height:20px}  .time-box .ant-timeline-item-content{top:-5px}  .time-box .ant-timeline-item{padding-bottom:0}"]}),e})();var rt=n(88680),at=n(31969),ot=n(32126);class lt extends _.DwClientPagingDataSource{constructor(e,t){super(),this.dwHttp=e,this.url=t}getDataList(e,t){return this.dwHttp.get(this.url).pipe((0,I.map)(n=>(this._result={currentPage:e,datas:Object.assign([],n.data),pageCount:Math.ceil(n.data.length/t),pageSize:t,rowCount:n.data.length},this._result)))}}let dt=(()=>{class e{constructor(e,t){this.dwHttp=e,this.selectModalService=t,this.config={modalTitle:"\u9009\u62e9\u6545\u969c\u90e8\u4f4d",modalWidth:"50%",tableMultiSelect:!1,tableIdField:"fault_location_id",tableNameField:"name",tablePageSize:10,tableColDefs:[{title:"\u7f16\u53f7",field:"code"},{title:"\u540d\u79f0",field:"name"}],returnFields:["fault_location_id","name"],tableCustomTag:e=>"("+e.code+")"+e.name,dataSource:new lt(this.dwHttp,"restful/service/breakdown/Breakdown/FaultLocationForReport?codeOrName=")}}open(e){return this.selectModalService.open(this.config,e)}}return e.\u0275fac=function(t){return new(t||e)(S.\u0275\u0275inject(y.DwDapHttpClient),S.\u0275\u0275inject(_.DwSelectModalService))},e.\u0275prov=S.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e})();var st=n(88531),ct=n(35626),mt=n(41430),pt=n(90697);function ut(e,t){if(1&e){const e=S.\u0275\u0275getCurrentView();S.\u0275\u0275elementStart(0,"div",20),S.\u0275\u0275listener("click",function(){return S.\u0275\u0275restoreView(e),S.\u0275\u0275nextContext(2).clearInput("orig")}),S.\u0275\u0275element(1,"em",21),S.\u0275\u0275elementEnd()}}function ht(e,t){if(1&e){const e=S.\u0275\u0275getCurrentView();S.\u0275\u0275elementStart(0,"div",22),S.\u0275\u0275listener("click",function(){const t=S.\u0275\u0275restoreView(e).index;return S.\u0275\u0275nextContext(2).swichNav(t)}),S.\u0275\u0275text(1),S.\u0275\u0275elementEnd()}if(2&e){const e=t.$implicit,n=t.index,i=S.\u0275\u0275nextContext(2);S.\u0275\u0275classMap(i.currOrigTab==n?"swiper-tab-list tab-on":"swiper-tab-list"),S.\u0275\u0275advance(1),S.\u0275\u0275textInterpolate1(" ",e.itemGroupName," ")}}function gt(e,t){1&e&&(S.\u0275\u0275elementStart(0,"th",35),S.\u0275\u0275elementStart(1,"span",27),S.\u0275\u0275text(2,"\u5e8f\u5217\u53f7"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd())}function ft(e,t){1&e&&(S.\u0275\u0275elementStart(0,"th",36),S.\u0275\u0275elementStart(1,"span",27),S.\u0275\u0275text(2,"\u5728\u4fdd\u60c5\u51b5"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd()),2&e&&S.\u0275\u0275property("dwAlign","center")}function wt(e,t){1&e&&(S.\u0275\u0275elementStart(0,"th",37),S.\u0275\u0275elementStart(1,"span",27),S.\u0275\u0275text(2,"\u5230\u671f\u66f4\u6362\u65e5\u671f"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd())}function vt(e,t){1&e&&(S.\u0275\u0275elementStart(0,"span",44),S.\u0275\u0275element(1,"em",45),S.\u0275\u0275elementEnd())}function xt(e,t){if(1&e&&(S.\u0275\u0275elementStart(0,"td"),S.\u0275\u0275text(1),S.\u0275\u0275elementEnd()),2&e){const e=S.\u0275\u0275nextContext().$implicit;S.\u0275\u0275advance(1),S.\u0275\u0275textInterpolate1(" ",e.sn," ")}}function Ct(e,t){1&e&&(S.\u0275\u0275elementStart(0,"span",49),S.\u0275\u0275text(1,"\u4fdd\u5185"),S.\u0275\u0275elementEnd())}function _t(e,t){1&e&&(S.\u0275\u0275elementStart(0,"span",50),S.\u0275\u0275text(1,"\u4fdd\u5916"),S.\u0275\u0275elementEnd())}function yt(e,t){if(1&e&&(S.\u0275\u0275elementStart(0,"td",46),S.\u0275\u0275template(1,Ct,2,0,"span",47),S.\u0275\u0275template(2,_t,2,0,"span",48),S.\u0275\u0275elementEnd()),2&e){const e=S.\u0275\u0275nextContext().$implicit;S.\u0275\u0275property("dwAlign","center"),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf",e.underWarranty),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf",!e.underWarranty)}}function St(e,t){if(1&e&&(S.\u0275\u0275elementStart(0,"td"),S.\u0275\u0275text(1),S.\u0275\u0275pipe(2,"date"),S.\u0275\u0275elementEnd()),2&e){const e=S.\u0275\u0275nextContext().$implicit;S.\u0275\u0275advance(1),S.\u0275\u0275textInterpolate1(" ",S.\u0275\u0275pipeBind2(2,1,e.replacement_date,"yyyy-MM-dd")," ")}}function bt(e,t){if(1&e&&S.\u0275\u0275element(0,"app-big-img",51),2&e){const e=S.\u0275\u0275nextContext().$implicit;S.\u0275\u0275property("item",e)}}function It(e,t){if(1&e&&(S.\u0275\u0275elementStart(0,"tr"),S.\u0275\u0275elementStart(1,"td",38),S.\u0275\u0275element(2,"label",39),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(3,"td"),S.\u0275\u0275template(4,vt,2,0,"span",40),S.\u0275\u0275text(5),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(6,"td"),S.\u0275\u0275text(7),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(8,"td"),S.\u0275\u0275text(9),S.\u0275\u0275elementEnd(),S.\u0275\u0275template(10,xt,2,1,"td",41),S.\u0275\u0275template(11,yt,3,3,"td",42),S.\u0275\u0275template(12,St,3,4,"td",41),S.\u0275\u0275elementStart(13,"td"),S.\u0275\u0275template(14,bt,1,1,"app-big-img",43),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd()),2&e){const e=t.$implicit,n=S.\u0275\u0275nextContext(3);S.\u0275\u0275advance(1),S.\u0275\u0275property("dwAlign","center"),S.\u0275\u0275advance(1),S.\u0275\u0275propertyInterpolate("dwValue",e.materialId+e.sn+e.replacement_date),S.\u0275\u0275advance(2),S.\u0275\u0275property("ngIf",e.quickwear_part),S.\u0275\u0275advance(1),S.\u0275\u0275textInterpolate1(" ",e.materialCode," "),S.\u0275\u0275advance(2),S.\u0275\u0275textInterpolate1(" ",e.materialName," "),S.\u0275\u0275advance(2),S.\u0275\u0275textInterpolate1(" ",e.specification," "),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf","0"===n.typeIdx),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf","0"===n.typeIdx),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf","0"===n.typeIdx),S.\u0275\u0275advance(2),S.\u0275\u0275property("ngIf",e.url)}}function Et(e,t){if(1&e){const e=S.\u0275\u0275getCurrentView();S.\u0275\u0275elementStart(0,"div"),S.\u0275\u0275elementStart(1,"dw-table",23,24),S.\u0275\u0275listener("dwPageIndexChange",function(t){const n=S.\u0275\u0275restoreView(e).index;return S.\u0275\u0275nextContext(2).materialGroups[n].pageIndex=t})("dwPageSizeChange",function(t){const n=S.\u0275\u0275restoreView(e).index;return S.\u0275\u0275nextContext(2).materialGroups[n].pageSize=t})("dwPageIndexChange",function(t){return S.\u0275\u0275restoreView(e),S.\u0275\u0275nextContext(2).pageIndexChange(t)}),S.\u0275\u0275elementStart(3,"thead"),S.\u0275\u0275elementStart(4,"tr",25),S.\u0275\u0275elementStart(5,"th",26),S.\u0275\u0275element(6,"span",27),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(7,"th",28),S.\u0275\u0275elementStart(8,"span",27),S.\u0275\u0275text(9,"\u914d\u4ef6\u7f16\u53f7"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(10,"th",29),S.\u0275\u0275elementStart(11,"span",27),S.\u0275\u0275text(12,"\u914d\u4ef6\u540d\u79f0"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(13,"th",29),S.\u0275\u0275elementStart(14,"span",27),S.\u0275\u0275text(15,"\u89c4\u683c"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275template(16,gt,3,0,"th",30),S.\u0275\u0275template(17,ft,3,1,"th",31),S.\u0275\u0275template(18,wt,3,0,"th",32),S.\u0275\u0275elementStart(19,"th",33),S.\u0275\u0275elementStart(20,"span",27),S.\u0275\u0275text(21,"\u56fe\u7247"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(22,"tbody"),S.\u0275\u0275template(23,It,15,10,"tr",34),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd()}if(2&e){const e=t.index,n=S.\u0275\u0275reference(2),i=S.\u0275\u0275nextContext(2);S.\u0275\u0275classMap(i.currOrigTab==e?"scroll-box":"scroll-box hide"),S.\u0275\u0275advance(1),S.\u0275\u0275property("dwData",i.materialGroups[e].list)("dwFrontPagination",!1)("dwTotal",i.materialGroups[e].itemCount)("dwPageIndex",i.materialGroups[e].pageIndex)("dwPageSize",i.materialGroups[e].pageSize),S.\u0275\u0275advance(15),S.\u0275\u0275property("ngIf","0"===i.typeIdx),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf","0"===i.typeIdx),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf","0"===i.typeIdx),S.\u0275\u0275advance(5),S.\u0275\u0275property("ngForOf",n.data)}}function Dt(e,t){if(1&e){const e=S.\u0275\u0275getCurrentView();S.\u0275\u0275elementStart(0,"div",3),S.\u0275\u0275elementStart(1,"div",4),S.\u0275\u0275elementStart(2,"div",5),S.\u0275\u0275elementStart(3,"dw-select",6),S.\u0275\u0275listener("ngModelChange",function(t){return S.\u0275\u0275restoreView(e),S.\u0275\u0275nextContext().typeIdx=t})("ngModelChange",function(t){return S.\u0275\u0275restoreView(e),S.\u0275\u0275nextContext().bindPickerChange(t,"orig")}),S.\u0275\u0275element(4,"dw-option",7),S.\u0275\u0275element(5,"dw-option",8),S.\u0275\u0275element(6,"dw-option",9),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(7,"div",10),S.\u0275\u0275elementStart(8,"div",11),S.\u0275\u0275listener("click",function(){return S.\u0275\u0275restoreView(e),S.\u0275\u0275nextContext().getMaterialGroups()}),S.\u0275\u0275element(9,"em",12),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(10,"input",13),S.\u0275\u0275listener("ngModelChange",function(t){return S.\u0275\u0275restoreView(e),S.\u0275\u0275nextContext().searchValue=t})("keydown",function(t){return S.\u0275\u0275restoreView(e),S.\u0275\u0275nextContext().onKeydown("oldInput",t)}),S.\u0275\u0275elementEnd(),S.\u0275\u0275template(11,ut,2,0,"div",14),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(12,"div",15),S.\u0275\u0275elementStart(13,"div",16),S.\u0275\u0275template(14,ht,2,3,"div",17),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(15,"dw-radio-group",18),S.\u0275\u0275listener("ngModelChange",function(t){return S.\u0275\u0275restoreView(e),S.\u0275\u0275nextContext().origPartId=t}),S.\u0275\u0275template(16,Et,24,11,"div",19),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd()}if(2&e){const e=S.\u0275\u0275nextContext();S.\u0275\u0275advance(3),S.\u0275\u0275property("ngModel",e.typeIdx),S.\u0275\u0275advance(7),S.\u0275\u0275property("ngModel",e.searchValue),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf",e.searchValue),S.\u0275\u0275advance(3),S.\u0275\u0275property("ngForOf",e.materialGroups),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngModel",e.origPartId),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngForOf",e.materialGroups)}}function Ot(e,t){if(1&e&&S.\u0275\u0275element(0,"app-big-img",51),2&e){const e=S.\u0275\u0275nextContext().$implicit;S.\u0275\u0275property("item",e)}}function Mt(e,t){if(1&e&&(S.\u0275\u0275elementStart(0,"tr"),S.\u0275\u0275elementStart(1,"td",38),S.\u0275\u0275element(2,"label",56),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(3,"td"),S.\u0275\u0275text(4),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(5,"td"),S.\u0275\u0275text(6),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(7,"td"),S.\u0275\u0275text(8),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(9,"td",57),S.\u0275\u0275text(10),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(11,"td"),S.\u0275\u0275template(12,Ot,1,1,"app-big-img",43),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd()),2&e){const e=t.$implicit;S.\u0275\u0275advance(1),S.\u0275\u0275property("dwAlign","center"),S.\u0275\u0275advance(1),S.\u0275\u0275property("dwValue",e.material_id+""+e.parts_delivery_details_id),S.\u0275\u0275advance(2),S.\u0275\u0275textInterpolate1(" ",e.material_code," "),S.\u0275\u0275advance(2),S.\u0275\u0275textInterpolate1(" ",e.material_name," "),S.\u0275\u0275advance(2),S.\u0275\u0275textInterpolate1(" ",e.specification," "),S.\u0275\u0275advance(2),S.\u0275\u0275textInterpolate1(" ",e.canUse," "),S.\u0275\u0275advance(2),S.\u0275\u0275property("ngIf",e.url)}}function Pt(e,t){if(1&e){const e=S.\u0275\u0275getCurrentView();S.\u0275\u0275elementStart(0,"div",3),S.\u0275\u0275elementStart(1,"dw-checkbox-wrapper",52),S.\u0275\u0275listener("dwOnChange",function(t){return S.\u0275\u0275restoreView(e),S.\u0275\u0275nextContext().checkboxChange(t)}),S.\u0275\u0275elementStart(2,"dw-table",53,24),S.\u0275\u0275elementStart(4,"thead"),S.\u0275\u0275elementStart(5,"tr",25),S.\u0275\u0275elementStart(6,"th",54),S.\u0275\u0275element(7,"span",27),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(8,"th",54),S.\u0275\u0275elementStart(9,"span",27),S.\u0275\u0275text(10,"\u914d\u4ef6\u7f16\u53f7"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(11,"th",54),S.\u0275\u0275elementStart(12,"span",27),S.\u0275\u0275text(13,"\u914d\u4ef6\u540d\u79f0"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(14,"th",54),S.\u0275\u0275elementStart(15,"span",27),S.\u0275\u0275text(16,"\u89c4\u683c"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(17,"th",55),S.\u0275\u0275elementStart(18,"span",27),S.\u0275\u0275text(19,"\u6570\u91cf"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(20,"th",54),S.\u0275\u0275elementStart(21,"span",27),S.\u0275\u0275text(22,"\u56fe\u7247"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(23,"tbody"),S.\u0275\u0275template(24,Mt,13,7,"tr",34),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd()}if(2&e){const e=S.\u0275\u0275reference(3),t=S.\u0275\u0275nextContext();S.\u0275\u0275advance(2),S.\u0275\u0275property("dwData",t.newParts)("dwPageSize",10),S.\u0275\u0275advance(22),S.\u0275\u0275property("ngForOf",e.data)}}function kt(e,t){if(1&e){const e=S.\u0275\u0275getCurrentView();S.\u0275\u0275elementStart(0,"div",22),S.\u0275\u0275listener("click",function(){const t=S.\u0275\u0275restoreView(e).index;return S.\u0275\u0275nextContext(2).swichNavForMode1(t)}),S.\u0275\u0275text(1),S.\u0275\u0275elementEnd()}if(2&e){const e=t.$implicit,n=t.index,i=S.\u0275\u0275nextContext(2);S.\u0275\u0275classMap(i.currNewMode1Tab==n?"swiper-tab-list tab-on":"swiper-tab-list"),S.\u0275\u0275advance(1),S.\u0275\u0275textInterpolate1(" ",e.itemGroupName," ")}}function Ft(e,t){if(1&e&&S.\u0275\u0275element(0,"app-big-img",51),2&e){const e=S.\u0275\u0275nextContext().$implicit;S.\u0275\u0275property("item",e)}}function Vt(e,t){if(1&e&&(S.\u0275\u0275elementStart(0,"tr"),S.\u0275\u0275elementStart(1,"td",38),S.\u0275\u0275element(2,"label",56),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(3,"td"),S.\u0275\u0275text(4),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(5,"td"),S.\u0275\u0275text(6),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(7,"td"),S.\u0275\u0275text(8),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(9,"td",57),S.\u0275\u0275text(10),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(11,"td"),S.\u0275\u0275template(12,Ft,1,1,"app-big-img",43),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd()),2&e){const e=t.$implicit;S.\u0275\u0275advance(1),S.\u0275\u0275property("dwAlign","center"),S.\u0275\u0275advance(1),S.\u0275\u0275property("dwValue",e.material_id+""+e.parts_delivery_details_id),S.\u0275\u0275advance(2),S.\u0275\u0275textInterpolate1(" ",e.material_code," "),S.\u0275\u0275advance(2),S.\u0275\u0275textInterpolate1(" ",e.material_name," "),S.\u0275\u0275advance(2),S.\u0275\u0275textInterpolate1(" ",e.specification," "),S.\u0275\u0275advance(2),S.\u0275\u0275textInterpolate1(" ",e.parts_delivery_details_id?e.canUse:e.inv_qty," "),S.\u0275\u0275advance(2),S.\u0275\u0275property("ngIf",e.url)}}function Tt(e,t){if(1&e&&(S.\u0275\u0275elementStart(0,"div"),S.\u0275\u0275elementStart(1,"dw-table",53,24),S.\u0275\u0275elementStart(3,"thead"),S.\u0275\u0275elementStart(4,"tr",25),S.\u0275\u0275elementStart(5,"th",54),S.\u0275\u0275element(6,"span",27),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(7,"th",54),S.\u0275\u0275elementStart(8,"span",27),S.\u0275\u0275text(9,"\u914d\u4ef6\u7f16\u53f7"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(10,"th",54),S.\u0275\u0275elementStart(11,"span",27),S.\u0275\u0275text(12,"\u914d\u4ef6\u540d\u79f0"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(13,"th",54),S.\u0275\u0275elementStart(14,"span",27),S.\u0275\u0275text(15,"\u89c4\u683c"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(16,"th",55),S.\u0275\u0275elementStart(17,"span",27),S.\u0275\u0275text(18,"\u6570\u91cf"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(19,"th",54),S.\u0275\u0275elementStart(20,"span",27),S.\u0275\u0275text(21,"\u56fe\u7247"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(22,"tbody"),S.\u0275\u0275template(23,Vt,13,7,"tr",34),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd()),2&e){const e=t.index,n=S.\u0275\u0275reference(2),i=S.\u0275\u0275nextContext(2);S.\u0275\u0275classMap(i.currNewMode1Tab==e?"scroll-box":"scroll-box hide"),S.\u0275\u0275advance(1),S.\u0275\u0275property("dwData",i.materialGroupsForMode1[e].list)("dwPageSize",10),S.\u0275\u0275advance(22),S.\u0275\u0275property("ngForOf",n.data)}}function Lt(e,t){if(1&e){const e=S.\u0275\u0275getCurrentView();S.\u0275\u0275elementStart(0,"div",3),S.\u0275\u0275elementStart(1,"div",58),S.\u0275\u0275elementStart(2,"div",16),S.\u0275\u0275template(3,kt,2,3,"div",17),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(4,"dw-checkbox-wrapper",52),S.\u0275\u0275listener("dwOnChange",function(t){return S.\u0275\u0275restoreView(e),S.\u0275\u0275nextContext().checkboxChange(t)}),S.\u0275\u0275template(5,Tt,24,5,"div",19),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd()}if(2&e){const e=S.\u0275\u0275nextContext();S.\u0275\u0275advance(3),S.\u0275\u0275property("ngForOf",e.materialGroupsForMode1),S.\u0275\u0275advance(2),S.\u0275\u0275property("ngForOf",e.materialGroupsForMode1)}}function Rt(e,t){1&e&&S.\u0275\u0275element(0,"dw-option",7)}function At(e,t){if(1&e){const e=S.\u0275\u0275getCurrentView();S.\u0275\u0275elementStart(0,"div",20),S.\u0275\u0275listener("click",function(){return S.\u0275\u0275restoreView(e),S.\u0275\u0275nextContext(2).clearInput("noRelate")}),S.\u0275\u0275element(1,"em",21),S.\u0275\u0275elementEnd()}}function Nt(e,t){if(1&e){const e=S.\u0275\u0275getCurrentView();S.\u0275\u0275elementStart(0,"div",22),S.\u0275\u0275listener("click",function(){const t=S.\u0275\u0275restoreView(e).index;return S.\u0275\u0275nextContext(2).swichNavForNoRelate(t)}),S.\u0275\u0275text(1),S.\u0275\u0275elementEnd()}if(2&e){const e=t.$implicit,n=t.index,i=S.\u0275\u0275nextContext(2);S.\u0275\u0275classMap(i.currNewTab==n?"swiper-tab-list tab-on":"swiper-tab-list"),S.\u0275\u0275advance(1),S.\u0275\u0275textInterpolate1(" ",e.itemGroupName," ")}}function $t(e,t){1&e&&(S.\u0275\u0275elementStart(0,"th",35),S.\u0275\u0275elementStart(1,"span",27),S.\u0275\u0275text(2,"\u5e8f\u5217\u53f7"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd())}function jt(e,t){1&e&&(S.\u0275\u0275elementStart(0,"th",36),S.\u0275\u0275elementStart(1,"span",27),S.\u0275\u0275text(2,"\u5728\u4fdd\u60c5\u51b5"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd()),2&e&&S.\u0275\u0275property("dwAlign","center")}function zt(e,t){1&e&&(S.\u0275\u0275elementStart(0,"th",37),S.\u0275\u0275elementStart(1,"span",27),S.\u0275\u0275text(2,"\u5230\u671f\u66f4\u6362\u65e5\u671f"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd())}function Bt(e,t){1&e&&(S.\u0275\u0275elementStart(0,"span",44),S.\u0275\u0275element(1,"em",45),S.\u0275\u0275elementEnd())}function qt(e,t){if(1&e&&(S.\u0275\u0275elementStart(0,"td"),S.\u0275\u0275text(1),S.\u0275\u0275elementEnd()),2&e){const e=S.\u0275\u0275nextContext().$implicit;S.\u0275\u0275advance(1),S.\u0275\u0275textInterpolate1(" ",e.sn," ")}}function Wt(e,t){1&e&&(S.\u0275\u0275elementStart(0,"span",49),S.\u0275\u0275text(1,"\u4fdd\u5185"),S.\u0275\u0275elementEnd())}function Gt(e,t){1&e&&(S.\u0275\u0275elementStart(0,"span",50),S.\u0275\u0275text(1,"\u4fdd\u5916"),S.\u0275\u0275elementEnd())}function Ut(e,t){if(1&e&&(S.\u0275\u0275elementStart(0,"td",46),S.\u0275\u0275template(1,Wt,2,0,"span",47),S.\u0275\u0275template(2,Gt,2,0,"span",48),S.\u0275\u0275elementEnd()),2&e){const e=S.\u0275\u0275nextContext().$implicit;S.\u0275\u0275property("dwAlign","center"),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf",e.underWarranty),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf",!e.underWarranty)}}function Ht(e,t){if(1&e&&(S.\u0275\u0275elementStart(0,"td"),S.\u0275\u0275text(1),S.\u0275\u0275pipe(2,"date"),S.\u0275\u0275elementEnd()),2&e){const e=S.\u0275\u0275nextContext().$implicit;S.\u0275\u0275advance(1),S.\u0275\u0275textInterpolate1(" ",S.\u0275\u0275pipeBind2(2,1,e.replacement_date,"yyyy-MM-dd")," ")}}function Xt(e,t){if(1&e&&S.\u0275\u0275element(0,"app-big-img",51),2&e){const e=S.\u0275\u0275nextContext().$implicit;S.\u0275\u0275property("item",e)}}function Qt(e,t){if(1&e&&(S.\u0275\u0275elementStart(0,"tr"),S.\u0275\u0275elementStart(1,"td",38),S.\u0275\u0275element(2,"label",56),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(3,"td"),S.\u0275\u0275template(4,Bt,2,0,"span",40),S.\u0275\u0275text(5),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(6,"td"),S.\u0275\u0275text(7),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(8,"td"),S.\u0275\u0275text(9),S.\u0275\u0275elementEnd(),S.\u0275\u0275template(10,qt,2,1,"td",41),S.\u0275\u0275template(11,Ut,3,3,"td",42),S.\u0275\u0275template(12,Ht,3,4,"td",41),S.\u0275\u0275elementStart(13,"td"),S.\u0275\u0275template(14,Xt,1,1,"app-big-img",43),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd()),2&e){const e=t.$implicit,n=S.\u0275\u0275nextContext(3);S.\u0275\u0275advance(1),S.\u0275\u0275property("dwAlign","center"),S.\u0275\u0275advance(1),S.\u0275\u0275property("dwValue",e.materialId+e.sn+e.replacement_date),S.\u0275\u0275advance(2),S.\u0275\u0275property("ngIf",e.quickwear_part),S.\u0275\u0275advance(1),S.\u0275\u0275textInterpolate1(" ",e.materialCode," "),S.\u0275\u0275advance(2),S.\u0275\u0275textInterpolate1(" ",e.materialName," "),S.\u0275\u0275advance(2),S.\u0275\u0275textInterpolate1(" ",e.specification," "),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf","0"===n.typeIdx),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf","0"===n.typeIdx),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf","0"===n.typeIdx),S.\u0275\u0275advance(2),S.\u0275\u0275property("ngIf",e.url)}}function Kt(e,t){if(1&e){const e=S.\u0275\u0275getCurrentView();S.\u0275\u0275elementStart(0,"div"),S.\u0275\u0275elementStart(1,"dw-table",23,24),S.\u0275\u0275listener("dwPageIndexChange",function(t){const n=S.\u0275\u0275restoreView(e).index;return S.\u0275\u0275nextContext(2).materialGroupsForNoRelate[n].pageIndex=t})("dwPageSizeChange",function(t){const n=S.\u0275\u0275restoreView(e).index;return S.\u0275\u0275nextContext(2).materialGroupsForNoRelate[n].pageSize=t})("dwPageIndexChange",function(t){return S.\u0275\u0275restoreView(e),S.\u0275\u0275nextContext(2).newPageIndexChange(t)}),S.\u0275\u0275elementStart(3,"thead"),S.\u0275\u0275elementStart(4,"tr",25),S.\u0275\u0275elementStart(5,"th",26),S.\u0275\u0275element(6,"span",27),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(7,"th",28),S.\u0275\u0275elementStart(8,"span",27),S.\u0275\u0275text(9,"\u914d\u4ef6\u7f16\u53f7"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(10,"th",29),S.\u0275\u0275elementStart(11,"span",27),S.\u0275\u0275text(12,"\u914d\u4ef6\u540d\u79f0"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(13,"th",29),S.\u0275\u0275elementStart(14,"span",27),S.\u0275\u0275text(15,"\u89c4\u683c"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275template(16,$t,3,0,"th",30),S.\u0275\u0275template(17,jt,3,1,"th",31),S.\u0275\u0275template(18,zt,3,0,"th",32),S.\u0275\u0275elementStart(19,"th",33),S.\u0275\u0275elementStart(20,"span",27),S.\u0275\u0275text(21,"\u56fe\u7247"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(22,"tbody"),S.\u0275\u0275template(23,Qt,15,10,"tr",34),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd()}if(2&e){const e=t.index,n=S.\u0275\u0275reference(2),i=S.\u0275\u0275nextContext(2);S.\u0275\u0275classMap(i.currNewTab==e?"scroll-box":"scroll-box hide"),S.\u0275\u0275advance(1),S.\u0275\u0275property("dwData",i.materialGroupsForNoRelate[e].list)("dwFrontPagination",!1)("dwTotal",i.materialGroupsForNoRelate[e].itemCount)("dwPageIndex",i.materialGroupsForNoRelate[e].pageIndex)("dwPageSize",i.materialGroupsForNoRelate[e].pageSize),S.\u0275\u0275advance(15),S.\u0275\u0275property("ngIf","0"===i.typeIdx),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf","0"===i.typeIdx),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf","0"===i.typeIdx),S.\u0275\u0275advance(5),S.\u0275\u0275property("ngForOf",n.data)}}function Jt(e,t){if(1&e){const e=S.\u0275\u0275getCurrentView();S.\u0275\u0275elementStart(0,"div",3),S.\u0275\u0275elementStart(1,"div",4),S.\u0275\u0275elementStart(2,"div",5),S.\u0275\u0275elementStart(3,"dw-select",6),S.\u0275\u0275listener("ngModelChange",function(t){return S.\u0275\u0275restoreView(e),S.\u0275\u0275nextContext().typeIdx=t})("ngModelChange",function(t){return S.\u0275\u0275restoreView(e),S.\u0275\u0275nextContext().bindPickerChange(t,"noRelate")}),S.\u0275\u0275template(4,Rt,1,0,"dw-option",59),S.\u0275\u0275element(5,"dw-option",8),S.\u0275\u0275element(6,"dw-option",9),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(7,"div",10),S.\u0275\u0275elementStart(8,"div",11),S.\u0275\u0275listener("click",function(){return S.\u0275\u0275restoreView(e),S.\u0275\u0275nextContext().getMaterialGroupsForNoRelate()}),S.\u0275\u0275element(9,"em",12),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(10,"input",13),S.\u0275\u0275listener("ngModelChange",function(t){return S.\u0275\u0275restoreView(e),S.\u0275\u0275nextContext().searchValue=t})("keydown",function(t){return S.\u0275\u0275restoreView(e),S.\u0275\u0275nextContext().onKeydown("newInputNoRelate",t)}),S.\u0275\u0275elementEnd(),S.\u0275\u0275template(11,At,2,0,"div",14),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(12,"div",15),S.\u0275\u0275elementStart(13,"div",16),S.\u0275\u0275template(14,Nt,2,3,"div",17),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(15,"dw-checkbox-wrapper",52),S.\u0275\u0275listener("dwOnChange",function(t){return S.\u0275\u0275restoreView(e),S.\u0275\u0275nextContext().checkboxChange(t)}),S.\u0275\u0275template(16,Kt,24,11,"div",19),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd()}if(2&e){const e=S.\u0275\u0275nextContext();S.\u0275\u0275advance(3),S.\u0275\u0275property("ngModel",e.typeIdx),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf","1"===e.type),S.\u0275\u0275advance(6),S.\u0275\u0275property("ngModel",e.searchValue),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf",e.searchValue),S.\u0275\u0275advance(3),S.\u0275\u0275property("ngForOf",e.materialGroupsForNoRelate),S.\u0275\u0275advance(2),S.\u0275\u0275property("ngForOf",e.materialGroupsForNoRelate)}}function Zt(e,t){1&e&&S.\u0275\u0275element(0,"dw-option",7)}function Yt(e,t){1&e&&S.\u0275\u0275element(0,"dw-option",62)}function en(e,t){if(1&e){const e=S.\u0275\u0275getCurrentView();S.\u0275\u0275elementStart(0,"div",20),S.\u0275\u0275listener("click",function(){return S.\u0275\u0275restoreView(e),S.\u0275\u0275nextContext(2).clearInput("machineReceive")}),S.\u0275\u0275element(1,"em",21),S.\u0275\u0275elementEnd()}}function tn(e,t){if(1&e){const e=S.\u0275\u0275getCurrentView();S.\u0275\u0275elementStart(0,"div",22),S.\u0275\u0275listener("click",function(){const t=S.\u0275\u0275restoreView(e).index;return S.\u0275\u0275nextContext(2).swichNavForMachineReceive(t)}),S.\u0275\u0275text(1),S.\u0275\u0275elementEnd()}if(2&e){const e=t.$implicit,n=t.index,i=S.\u0275\u0275nextContext(2);S.\u0275\u0275classMap(i.currNewTab==n?"swiper-tab-list tab-on":"swiper-tab-list"),S.\u0275\u0275advance(1),S.\u0275\u0275textInterpolate1(" ",e.itemGroupName," ")}}function nn(e,t){1&e&&(S.\u0275\u0275elementStart(0,"th",35),S.\u0275\u0275elementStart(1,"span",27),S.\u0275\u0275text(2,"\u5e8f\u5217\u53f7"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd())}function rn(e,t){1&e&&(S.\u0275\u0275elementStart(0,"th",36),S.\u0275\u0275elementStart(1,"span",27),S.\u0275\u0275text(2,"\u5728\u4fdd\u60c5\u51b5"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd()),2&e&&S.\u0275\u0275property("dwAlign","center")}function an(e,t){1&e&&(S.\u0275\u0275elementStart(0,"th",37),S.\u0275\u0275elementStart(1,"span",27),S.\u0275\u0275text(2,"\u5230\u671f\u66f4\u6362\u65e5\u671f"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd())}function on(e,t){1&e&&(S.\u0275\u0275elementStart(0,"th",64),S.\u0275\u0275elementStart(1,"span",27),S.\u0275\u0275text(2,"\u6570\u91cf"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd())}function ln(e,t){1&e&&(S.\u0275\u0275elementStart(0,"span",44),S.\u0275\u0275element(1,"em",45),S.\u0275\u0275elementEnd())}function dn(e,t){if(1&e&&(S.\u0275\u0275elementStart(0,"td"),S.\u0275\u0275text(1),S.\u0275\u0275elementEnd()),2&e){const e=S.\u0275\u0275nextContext().$implicit;S.\u0275\u0275advance(1),S.\u0275\u0275textInterpolate1(" ",e.sn," ")}}function sn(e,t){1&e&&(S.\u0275\u0275elementStart(0,"span",49),S.\u0275\u0275text(1,"\u4fdd\u5185"),S.\u0275\u0275elementEnd())}function cn(e,t){1&e&&(S.\u0275\u0275elementStart(0,"span",50),S.\u0275\u0275text(1,"\u4fdd\u5916"),S.\u0275\u0275elementEnd())}function mn(e,t){if(1&e&&(S.\u0275\u0275elementStart(0,"td",46),S.\u0275\u0275template(1,sn,2,0,"span",47),S.\u0275\u0275template(2,cn,2,0,"span",48),S.\u0275\u0275elementEnd()),2&e){const e=S.\u0275\u0275nextContext().$implicit;S.\u0275\u0275property("dwAlign","center"),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf",e.underWarranty),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf",!e.underWarranty)}}function pn(e,t){if(1&e&&(S.\u0275\u0275elementStart(0,"td"),S.\u0275\u0275text(1),S.\u0275\u0275pipe(2,"date"),S.\u0275\u0275elementEnd()),2&e){const e=S.\u0275\u0275nextContext().$implicit;S.\u0275\u0275advance(1),S.\u0275\u0275textInterpolate1(" ",S.\u0275\u0275pipeBind2(2,1,e.replacement_date,"yyyy-MM-dd")," ")}}function un(e,t){if(1&e&&(S.\u0275\u0275elementStart(0,"td",57),S.\u0275\u0275text(1),S.\u0275\u0275elementEnd()),2&e){const e=S.\u0275\u0275nextContext().$implicit;S.\u0275\u0275advance(1),S.\u0275\u0275textInterpolate1(" ",e.parts_delivery_details_id?e.canUse:e.inv_qty," ")}}function hn(e,t){if(1&e&&S.\u0275\u0275element(0,"app-big-img",51),2&e){const e=S.\u0275\u0275nextContext().$implicit;S.\u0275\u0275property("item",e)}}function gn(e,t){if(1&e&&(S.\u0275\u0275elementStart(0,"tr"),S.\u0275\u0275elementStart(1,"td",38),S.\u0275\u0275element(2,"label",56),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(3,"td"),S.\u0275\u0275template(4,ln,2,0,"span",40),S.\u0275\u0275text(5),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(6,"td"),S.\u0275\u0275text(7),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(8,"td"),S.\u0275\u0275text(9),S.\u0275\u0275elementEnd(),S.\u0275\u0275template(10,dn,2,1,"td",41),S.\u0275\u0275template(11,mn,3,3,"td",42),S.\u0275\u0275template(12,pn,3,4,"td",41),S.\u0275\u0275template(13,un,2,1,"td",65),S.\u0275\u0275elementStart(14,"td"),S.\u0275\u0275template(15,hn,1,1,"app-big-img",43),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd()),2&e){const e=t.$implicit,n=S.\u0275\u0275nextContext(3);S.\u0275\u0275advance(1),S.\u0275\u0275property("dwAlign","center"),S.\u0275\u0275advance(1),S.\u0275\u0275property("dwValue",e.materialId+e.sn+e.parts_delivery_details_id+e.replacement_date),S.\u0275\u0275advance(2),S.\u0275\u0275property("ngIf",e.quickwear_part),S.\u0275\u0275advance(1),S.\u0275\u0275textInterpolate1(" ",e.materialCode," "),S.\u0275\u0275advance(2),S.\u0275\u0275textInterpolate1(" ",e.materialName," "),S.\u0275\u0275advance(2),S.\u0275\u0275textInterpolate1(" ",e.specification," "),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf","0"===n.typeIdx),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf","0"===n.typeIdx),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf","0"===n.typeIdx),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf","3"===n.typeIdx||"4"===n.typeIdx),S.\u0275\u0275advance(2),S.\u0275\u0275property("ngIf",e.url)}}function fn(e,t){if(1&e){const e=S.\u0275\u0275getCurrentView();S.\u0275\u0275elementStart(0,"div"),S.\u0275\u0275elementStart(1,"dw-table",23,24),S.\u0275\u0275listener("dwPageIndexChange",function(t){const n=S.\u0275\u0275restoreView(e).index;return S.\u0275\u0275nextContext(2).materialGroupsForMachineReceive[n].pageIndex=t})("dwPageSizeChange",function(t){const n=S.\u0275\u0275restoreView(e).index;return S.\u0275\u0275nextContext(2).materialGroupsForMachineReceive[n].pageSize=t})("dwPageIndexChange",function(t){return S.\u0275\u0275restoreView(e),S.\u0275\u0275nextContext(2).pageIndexChange(t)}),S.\u0275\u0275elementStart(3,"thead"),S.\u0275\u0275elementStart(4,"tr",25),S.\u0275\u0275elementStart(5,"th",26),S.\u0275\u0275element(6,"span",27),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(7,"th",28),S.\u0275\u0275elementStart(8,"span",27),S.\u0275\u0275text(9,"\u914d\u4ef6\u7f16\u53f7"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(10,"th",29),S.\u0275\u0275elementStart(11,"span",27),S.\u0275\u0275text(12,"\u914d\u4ef6\u540d\u79f0"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(13,"th",29),S.\u0275\u0275elementStart(14,"span",27),S.\u0275\u0275text(15,"\u89c4\u683c"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275template(16,nn,3,0,"th",30),S.\u0275\u0275template(17,rn,3,1,"th",31),S.\u0275\u0275template(18,an,3,0,"th",32),S.\u0275\u0275template(19,on,3,0,"th",63),S.\u0275\u0275elementStart(20,"th",33),S.\u0275\u0275elementStart(21,"span",27),S.\u0275\u0275text(22,"\u56fe\u7247"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(23,"tbody"),S.\u0275\u0275template(24,gn,16,11,"tr",34),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd()}if(2&e){const e=t.index,n=S.\u0275\u0275reference(2),i=S.\u0275\u0275nextContext(2);S.\u0275\u0275classMap(i.currNewTab==e?"scroll-box":"scroll-box hide"),S.\u0275\u0275advance(1),S.\u0275\u0275property("dwData",i.materialGroupsForMachineReceive[e].list)("dwFrontPagination",!1)("dwTotal",i.materialGroupsForMachineReceive[e].itemCount)("dwPageIndex",i.materialGroupsForMachineReceive[e].pageIndex)("dwPageSize",i.materialGroupsForMachineReceive[e].pageSize),S.\u0275\u0275advance(15),S.\u0275\u0275property("ngIf","0"===i.typeIdx),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf","0"===i.typeIdx),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf","0"===i.typeIdx),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf","3"===i.typeIdx||"4"===i.typeIdx),S.\u0275\u0275advance(5),S.\u0275\u0275property("ngForOf",n.data)}}function wn(e,t){if(1&e){const e=S.\u0275\u0275getCurrentView();S.\u0275\u0275elementStart(0,"div",3),S.\u0275\u0275elementStart(1,"div",4),S.\u0275\u0275elementStart(2,"div",5),S.\u0275\u0275elementStart(3,"dw-select",6),S.\u0275\u0275listener("ngModelChange",function(t){return S.\u0275\u0275restoreView(e),S.\u0275\u0275nextContext().typeIdx=t})("ngModelChange",function(t){return S.\u0275\u0275restoreView(e),S.\u0275\u0275nextContext().bindPickerChange(t,"machineReceive")}),S.\u0275\u0275template(4,Zt,1,0,"dw-option",59),S.\u0275\u0275element(5,"dw-option",8),S.\u0275\u0275element(6,"dw-option",9),S.\u0275\u0275element(7,"dw-option",60),S.\u0275\u0275template(8,Yt,1,0,"dw-option",61),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(9,"div",10),S.\u0275\u0275elementStart(10,"div",11),S.\u0275\u0275listener("click",function(){return S.\u0275\u0275restoreView(e),S.\u0275\u0275nextContext().getMaterialGroupsForMachineReceive()}),S.\u0275\u0275element(11,"em",12),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(12,"input",13),S.\u0275\u0275listener("ngModelChange",function(t){return S.\u0275\u0275restoreView(e),S.\u0275\u0275nextContext().searchValue=t})("keydown",function(t){return S.\u0275\u0275restoreView(e),S.\u0275\u0275nextContext().onKeydown("newInputMachineReceive",t)}),S.\u0275\u0275elementEnd(),S.\u0275\u0275template(13,en,2,0,"div",14),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(14,"div",15),S.\u0275\u0275elementStart(15,"div",16),S.\u0275\u0275template(16,tn,2,3,"div",17),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(17,"dw-checkbox-wrapper",52),S.\u0275\u0275listener("dwOnChange",function(t){return S.\u0275\u0275restoreView(e),S.\u0275\u0275nextContext().checkboxChange(t)}),S.\u0275\u0275template(18,fn,25,12,"div",19),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd()}if(2&e){const e=S.\u0275\u0275nextContext();S.\u0275\u0275advance(3),S.\u0275\u0275property("ngModel",e.typeIdx),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf","1"===e.type),S.\u0275\u0275advance(4),S.\u0275\u0275property("ngIf",e.is_service_mode1),S.\u0275\u0275advance(4),S.\u0275\u0275property("ngModel",e.searchValue),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf",e.searchValue),S.\u0275\u0275advance(3),S.\u0275\u0275property("ngForOf",e.materialGroupsForMachineReceive),S.\u0275\u0275advance(2),S.\u0275\u0275property("ngForOf",e.materialGroupsForMachineReceive)}}const vn=function(){return{height:"450px",overflow:"auto","padding-bottom":"8px"}};let xn=(()=>{class e{constructor(e,t){this.message=e,this.serviceOrderDetailSrv=t,this.partVisibleChanged=new S.EventEmitter,this.partStepOneVisible=new S.EventEmitter,this.isChangeReport=!1,this.partIdx="",this.choose_type="",this.product_file_id="",this.service_order_id="",this.service_mode="",this.is_service_mode1=!1,this.isMachineReceive=!1,this.type="1",this.service_site_id="",this.relate_to_inventory=!0,this.typeIdx="0",this.searchValue="",this.currOrigTab=0,this.origParts=[],this.materialGroups=[],this.origPartId="",this.newParts=[],this.newPartIds=[],this.materialGroupsForNoRelate=[],this.currNewTab=0,this.materialGroupsForMode1=[],this.currNewMode1Tab=0,this.materialGroupsForMachineReceive=[],this.serviceDocUnderWarranty=!1}getServiceDocUnderWarranty(e){this.serviceDocUnderWarranty=e,console.log(this.serviceDocUnderWarranty)}initData(e="new",t,n,i=2,r=0,a="0",o="1"){this.partIdx="",this.choose_type=e,this.product_file_id=t,this.service_order_id=n,this.service_mode=i,this.is_service_mode1=1===i,this.service_site_id=r,this.isMachineReceive="0"!==a,this.type=o,this.typeIdx="0",this.searchValue="",this.origPartId="",this.newPartIds=[],"old"===this.choose_type?this.getMaterialGroups():this.getAutoSettings()}addOrEditOldPart(e,t){this.isChangeReport=t,this.partIdx=e}getMaterialGroups(){let e=`ProductMaterialGroups?productFileId=${this.product_file_id}&searchValue=${this.searchValue}`,t="getMaterialGroups";"1"===this.typeIdx&&(e=`AllMaterialGroups?searchValue=${this.searchValue}`,t="getMaterialGroups"),"2"===this.typeIdx&&(e=`QuickwearPartAllMaterialGroups?productFileId=${this.product_file_id}&searchValue=${this.searchValue}`,t="getQuickwearPartAllMaterialGroups"),this.serviceOrderDetailSrv[t](e).subscribe(e=>{this.origParts=[],this.materialGroups=e;for(let t=0;t<this.materialGroups.length;t++)this.materialGroups[t].list=[],this.materialGroups[t].pageSize=10,this.materialGroups[t].pageIndex=1,this.materialGroups[t].allPages=Math.ceil(this.materialGroups[t].itemCount/this.materialGroups[t].pageSize);this.currOrigTab=0,this.materialGroups.length&&this.getOrigParts()})}pageIndexChange(e){this.materialGroups[this.currOrigTab].pageIndex=e,this.getOrigParts()}getOrigParts(){let e=`ProductMaterialsByGroupId?productFileId=${this.product_file_id}&itemGroupId=${this.materialGroups[this.currOrigTab].itemGroupId}&searchValue=${this.searchValue}`,t="getMaterialList";"1"===this.typeIdx&&(e=`AllMaterialsByGroupId?searchValue=${this.searchValue}&itemGroupId=${this.materialGroups[this.currOrigTab].itemGroupId}&pageIndex=${this.materialGroups[this.currOrigTab].pageIndex}&pageSize=${this.materialGroups[this.currOrigTab].pageSize}`,t="getMaterialList"),"2"===this.typeIdx&&(e=`productFile/QuickwearPart/MaterialForOpenner?productFileId=${this.product_file_id}&searchValue=${this.searchValue}&itemGroupId=${this.materialGroups[this.currOrigTab].itemGroupId}&pageIndex=${this.materialGroups[this.currOrigTab].pageIndex}&pageSize=${this.materialGroups[this.currOrigTab].pageSize}`,t="getQuotationMaterialList"),this.serviceOrderDetailSrv[t](e).subscribe(e=>{const t="2"===this.typeIdx?e.data.quotation:e;t.forEach(e=>{e.sn=e.sn?e.sn:"",e.materialId=e.materialId||e.material_id,e.materialCode=e.materialCode||e.material_code,e.materialName=e.materialName||e.material_name,e.underWarranty=0===e.underWarranty||1===e.underWarranty?e.underWarranty:this.serviceDocUnderWarranty?1:0}),this.materialGroups[this.currOrigTab].list=t,console.log(this.materialGroups[this.currOrigTab].list)})}clearInput(e){this.searchValue="","orig"===e?this.getMaterialGroups():"machineReceive"===e?this.getMaterialGroupsForMachineReceive():this.getMaterialGroupsForNoRelate()}bindPickerChange(e,t){"orig"===t&&this.getMaterialGroups(),"machineReceive"===t&&this.getMaterialGroupsForMachineReceive(),"noRelate"===t&&this.getMaterialGroupsForNoRelate()}swichNav(e){this.currOrigTab!==e&&(this.currOrigTab=e,this.materialGroups[this.currOrigTab].list.length||this.getOrigParts())}close(){this.choose_type="",this.partVisibleChanged.emit(null)}nextStep(){if(console.log(this.origPartId),!this.origPartId)return void this.partVisibleChanged.emit(null);let e={materialId:"",materialCode:"",materialName:"",underWarranty:0,origQty:0,sn_management:"",sn:"",specification:"",replacement_date:""};this.materialGroups.forEach(t=>{t.list.forEach(t=>{t.materialId+t.sn+t.replacement_date===this.origPartId&&(e=t)})});const t=e.specification?"_"+e.specification:"";this.partVisibleChanged.emit(""===this.partIdx?{origPartId:e.materialId,origName:`(${e.materialCode})${e.materialName}${t}`,needReturn:1===e.underWarranty,underWarranty:1===e.underWarranty,partIdx:this.partIdx,origQty:e.origQty?e.origQty:e.materialId?1:0,origSn:e.sn||"",newOrigQty:0,newPartId:0,partName:"",qty:0,customerSettlementPrice:0,siteSettlementPrice:0,employeeSettlementPrice:0,partsDeliveryDetailsId:0,origSnManagement:"1"===e.sn_management,snManagement:!1,sn:"",origReplacementDate:e.replacement_date,oldPartSource:"0"}:{origPartId:e.materialId,origName:`(${e.materialCode})${e.materialName}${t}`,needReturn:1===e.underWarranty,underWarranty:1===e.underWarranty,partIdx:this.partIdx,origQty:e.origQty?e.origQty:e.materialId?1:0,origSnManagement:"1"===e.sn_management,origSn:e.sn||"",origReplacementDate:e.replacement_date,oldPartSource:"0"})}chooseOk(){if(!this.newPartIds.length)return void this.message.create("error","\u8bf7\u81f3\u5c11\u9009\u62e9\u4e00\u4e2a\u65b0\u96f6\u914d\u4ef6\uff01");let e={material_id:0,material_code:"",material_name:"",customer_settlement_price:0,site_settlement_price:0,employee_settlement_price:0,unit_qty:0,parts_delivery_details_id:0,sn_management:"",sn:"",specification:"",need_return:!1,canUse:0,newPartSource:"1",replacement_date:null};this.newParts.forEach(t=>{if(this.newPartIds.indexOf(t.material_id+""+t.parts_delivery_details_id)>=0){e=t;const n=e.specification?"_"+e.specification:"";this.partVisibleChanged.emit({partIdx:this.partIdx,origPartId:e.material_id,origName:`(${e.material_code})${e.material_name}${n}`,underWarranty:!!this.serviceDocUnderWarranty,needReturn:e.need_return||!1,origQty:"1"===e.sn_management?1:e.parts_delivery_details_id?e.canUse:1,newOrigQty:e.parts_delivery_details_id?e.canUse:999999,newPartId:e.material_id,partName:`(${e.material_code})${e.material_name}${n}`,qty:e.material_id?"1"===e.sn_management?1:e.canUse:0,customerSettlementPrice:e.customer_settlement_price||0,siteSettlementPrice:e.site_settlement_price||0,employeeSettlementPrice:e.employee_settlement_price||0,partsDeliveryDetailsId:e.parts_delivery_details_id||0,origSn:"",origSnManagement:"1"===e.sn_management,snManagement:"1"===e.sn_management,sn:e.sn||"",newPartSource:e.newPartSource,oldPartSource:"old"===this.choose_type?"0":"1",origReplacementDate:e.replacement_date||null})}}),this.choose_type=""}chooseOkForMode1(){if(!this.newPartIds.length)return void this.message.create("error","\u8bf7\u81f3\u5c11\u9009\u62e9\u4e00\u4e2a\u65b0\u96f6\u914d\u4ef6\uff01");let e={material_id:0,material_code:"",material_name:"",customer_settlement_price:0,site_settlement_price:0,employee_settlement_price:0,unit_qty:0,parts_delivery_details_id:0,sn_management:"",sn:"",specification:"",need_return:!1,canUse:0,newPartSource:"1",replacement_date:null};this.materialGroupsForMode1.forEach(t=>{t.list.forEach(t=>{if(this.newPartIds.indexOf(t.material_id+""+t.parts_delivery_details_id)>=0){e=t;const n=e.specification?"_"+e.specification:"";this.partVisibleChanged.emit({partIdx:this.partIdx,origPartId:e.material_id,origName:`(${e.material_code})${e.material_name}${n}`,underWarranty:!!this.serviceDocUnderWarranty,needReturn:e.need_return||!1,origQty:"1"===e.sn_management?1:e.parts_delivery_details_id?e.canUse:1,newOrigQty:e.parts_delivery_details_id?e.canUse:999999,newPartId:e.material_id,partName:`(${e.material_code})${e.material_name}${n}`,qty:e.material_id?"1"===e.sn_management?1:e.parts_delivery_details_id?e.canUse:1:0,customerSettlementPrice:e.customer_settlement_price||0,siteSettlementPrice:e.site_settlement_price||0,employeeSettlementPrice:e.employee_settlement_price||0,partsDeliveryDetailsId:e.parts_delivery_details_id?e.parts_delivery_details_id:0,origSn:"",origSnManagement:"1"===e.sn_management,snManagement:"1"===e.sn_management,sn:e.sn||"",newPartSource:e.newPartSource,oldPartSource:"old"===this.choose_type?"0":"1",origReplacementDate:e.replacement_date||null})}})}),this.choose_type=""}ngOnInit(){}getAutoSettings(){this.serviceOrderDetailSrv.getAutoSettings().subscribe(e=>{this.relate_to_inventory=e.relate_to_inventory,this.relate_to_inventory&&(this.isMachineReceive?(this.typeIdx="1"===this.type?"0":"1",this.getMaterialGroupsForMachineReceive()):(1===this.service_mode&&this.getMaterialGroupsForMode1(),2===this.service_mode&&this.serviceOrderDetailSrv.getNewMaterialListByOrder(this.service_order_id).subscribe(e=>{e.forEach(e=>{e.newPartSource="2"}),this.newParts=e}))),this.relate_to_inventory||(this.typeIdx="1"===this.type?"0":"1",this.getMaterialGroupsForNoRelate())})}newPageIndexChange(e){this.materialGroupsForNoRelate[this.currNewTab].pageIndex=e,this.getNewPartsForNoRelate()}getMaterialGroupsForMode1(){this.materialGroupsForMode1=[],this.newParts=[],this.serviceOrderDetailSrv.getNewMaterialListBySite(this.service_order_id).subscribe(e=>{e.length&&(e.forEach(e=>{e.parts_delivery_details_id=0,e.newPartSource="1"}),this.materialGroupsForMode1.push({itemGroupName:"\u6211\u7684\u9886\u7528",list:e})),this.serviceOrderDetailSrv.getNewMaterialListByOrder(this.service_order_id).subscribe(e=>{e.length&&(e.forEach(e=>{e.newPartSource="2"}),this.materialGroupsForMode1.push({itemGroupName:"\u914d\u4ef6\u7533\u8bf7",list:e}))})})}getMaterialGroupsForNoRelate(){let e=`ProductMaterialGroups?productFileId=${this.product_file_id}&searchValue=${this.searchValue}`,t="getMaterialGroups";"1"===this.typeIdx&&(e=`AllMaterialGroups?searchValue=${this.searchValue}`,t="getMaterialGroups"),"2"===this.typeIdx&&(e=`QuickwearPartAllMaterialGroups?productFileId=${this.product_file_id}&searchValue=${this.searchValue}`,t="getQuickwearPartAllMaterialGroups"),this.serviceOrderDetailSrv[t](e).subscribe(e=>{this.materialGroupsForNoRelate=e;for(let t=0;t<this.materialGroupsForNoRelate.length;t++)this.materialGroupsForNoRelate[t].list=[],this.materialGroupsForNoRelate[t].pageSize=10,this.materialGroupsForNoRelate[t].pageIndex=1,this.materialGroupsForNoRelate[t].allPages=Math.ceil(this.materialGroupsForNoRelate[t].itemCount/this.materialGroupsForNoRelate[t].pageSize);this.currNewTab=0,this.materialGroupsForNoRelate.length&&this.getNewPartsForNoRelate()})}getNewPartsForNoRelate(){let e=`ProductMaterialsByGroupId?productFileId=${this.product_file_id}&itemGroupId=${this.materialGroupsForNoRelate[this.currNewTab].itemGroupId}&searchValue=${this.searchValue}`,t="getMaterialList";"1"===this.typeIdx&&(e=`AllMaterialsByGroupId?searchValue=${this.searchValue}&itemGroupId=${this.materialGroupsForNoRelate[this.currNewTab].itemGroupId}&pageIndex=${this.materialGroupsForNoRelate[this.currNewTab].pageIndex}&pageSize=${this.materialGroupsForNoRelate[this.currNewTab].pageSize}`,t="getMaterialList"),"2"===this.typeIdx&&(e=`productFile/QuickwearPart/MaterialForOpenner?productFileId=${this.product_file_id}&searchValue=${this.searchValue}&itemGroupId=${this.materialGroupsForNoRelate[this.currNewTab].itemGroupId}&pageIndex=${this.materialGroupsForNoRelate[this.currNewTab].pageIndex}&pageSize=${this.materialGroupsForNoRelate[this.currNewTab].pageSize}`,t="getQuotationMaterialList"),this.serviceOrderDetailSrv[t](e).subscribe(e=>{const t="2"===this.typeIdx?e.data.quotation:e;t.forEach(e=>{e.sn=e.sn?e.sn:"",e.materialId=e.materialId||e.material_id,e.materialCode=e.materialCode||e.material_code,e.materialName=e.materialName||e.material_name,e.newPartSource="3"}),this.materialGroupsForNoRelate[this.currNewTab].list=t})}swichNavForMode1(e){this.currNewMode1Tab!==e&&(this.currNewMode1Tab=e)}swichNavForNoRelate(e){this.currNewTab!==e&&(this.currNewTab=e,this.materialGroupsForNoRelate[this.currNewTab].list.length||this.getNewPartsForNoRelate())}swichNavForMachineReceive(e){this.currNewTab!==e&&(this.currNewTab=e,this.materialGroupsForMachineReceive[this.currNewTab].list.length||this.getNewPartsForMachineReceive())}chooseOkForNoRelate(){if(!this.newPartIds.length)return void this.message.create("error","\u8bf7\u81f3\u5c11\u9009\u62e9\u4e00\u4e2a\u65b0\u96f6\u914d\u4ef6\uff01");console.log(this.newPartIds);let e={materialId:0,materialCode:"",materialName:"",customer_settlement_price:0,site_settlement_price:0,employee_settlement_price:0,sn_management:"",sn:"",specification:"",newPartSource:"1",replacement_date:null};this.materialGroupsForNoRelate.forEach(t=>{t.list.forEach(t=>{if(this.newPartIds.indexOf(t.materialId+t.sn+t.replacement_date)>=0){e=t;const n=e.specification?"_"+e.specification:"";this.partVisibleChanged.emit({partIdx:this.partIdx,origPartId:e.materialId,origName:`(${e.materialCode})${e.materialName}${n}`,underWarranty:!!this.serviceDocUnderWarranty,needReturn:!1,origQty:1,newOrigQty:999999,newPartId:e.materialId,partName:`(${e.materialCode})${e.materialName}${n}`,qty:1,customerSettlementPrice:e.customer_settlement_price||0,siteSettlementPrice:e.site_settlement_price||0,employeeSettlementPrice:e.employee_settlement_price||0,partsDeliveryDetailsId:0,origSn:"",origSnManagement:"1"===e.sn_management,snManagement:"1"===e.sn_management,sn:e.sn||"",newPartSource:e.newPartSource,oldPartSource:"old"===this.choose_type?"0":"1",origReplacementDate:e.replacement_date||null})}})}),this.choose_type=""}getMaterialGroupsForMachineReceive(){let e=`ProductMaterialGroups?productFileId=${this.product_file_id}&searchValue=${this.searchValue}`,t="getMaterialGroups";"1"===this.typeIdx&&(e=`AllMaterialGroups?searchValue=${this.searchValue}`,t="getMaterialGroups"),"2"===this.typeIdx&&(e=`QuickwearPartAllMaterialGroups?productFileId=${this.product_file_id}&searchValue=${this.searchValue}`,t="getQuickwearPartAllMaterialGroups"),"3"===this.typeIdx&&(e=`PartsDeliveryDetailGroups?serviceOrderId=${this.service_order_id}&searchValue=${this.searchValue}`,t="getMaterialGroups"),"4"===this.typeIdx&&(e=`EngineerMaterialGroups?serviceOrderId=${this.service_order_id}&searchValue=${this.searchValue}`,t="getMaterialGroups"),this.serviceOrderDetailSrv[t](e).subscribe(e=>{this.materialGroupsForMachineReceive=e;for(let t=0;t<this.materialGroupsForMachineReceive.length;t++)this.materialGroupsForMachineReceive[t].list=[],this.materialGroupsForMachineReceive[t].pageSize=10,this.materialGroupsForMachineReceive[t].pageIndex=1,this.materialGroupsForMachineReceive[t].allPages=Math.ceil(this.materialGroupsForMachineReceive[t].itemCount/this.materialGroupsForMachineReceive[t].pageSize);this.currNewTab=0,this.materialGroupsForMachineReceive.length&&this.getNewPartsForMachineReceive()})}getNewPartsForMachineReceive(){let e=`ProductMaterialsByGroupId?productFileId=${this.product_file_id}&itemGroupId=${this.materialGroupsForMachineReceive[this.currNewTab].itemGroupId}&searchValue=${this.searchValue}`,t="getMaterialList";"1"===this.typeIdx&&(e=`AllMaterialsByGroupId?searchValue=${this.searchValue}&itemGroupId=${this.materialGroupsForMachineReceive[this.currNewTab].itemGroupId}&pageIndex=${this.materialGroupsForMachineReceive[this.currNewTab].pageIndex}&pageSize=${this.materialGroupsForMachineReceive[this.currNewTab].pageSize}`,t="getMaterialList"),"2"===this.typeIdx&&(e=`productFile/QuickwearPart/MaterialForOpenner?productFileId=${this.product_file_id}&searchValue=${this.searchValue}&itemGroupId=${this.materialGroupsForMachineReceive[this.currNewTab].itemGroupId}&pageIndex=${this.materialGroupsForMachineReceive[this.currNewTab].pageIndex}&pageSize=${this.materialGroupsForMachineReceive[this.currNewTab].pageSize}`,t="getQuotationMaterialList"),"3"===this.typeIdx&&(e=`PartsDeliveryDetailMaterialForOpener?serviceOrderId=${this.service_order_id}&searchValue=${this.searchValue}&itemGroupId=${this.materialGroupsForMachineReceive[this.currNewTab].itemGroupId}&pageIndex=${this.materialGroupsForMachineReceive[this.currNewTab].pageIndex}&pageSize=${this.materialGroupsForMachineReceive[this.currNewTab].pageSize}`,t="getMaterialList"),"4"===this.typeIdx&&(e=`EngineerMaterialForOpener?serviceOrderId=${this.service_order_id}&searchValue=${this.searchValue}&itemGroupId=${this.materialGroupsForMachineReceive[this.currNewTab].itemGroupId}&pageIndex=${this.materialGroupsForMachineReceive[this.currNewTab].pageIndex}&pageSize=${this.materialGroupsForMachineReceive[this.currNewTab].pageSize}`,t="getMaterialList"),this.serviceOrderDetailSrv[t](e).subscribe(e=>{const t="0"===this.typeIdx||"1"===this.typeIdx?e:e.data.quotation;t.forEach(e=>{e.sn=e.sn?e.sn:"",e.materialId=e.materialId||e.material_id,e.materialCode=e.materialCode||e.material_code,e.materialName=e.materialName||e.material_name,e.newPartSource="3"===this.typeIdx?"2":"4"===this.typeIdx?"1":"3",e.parts_delivery_details_id=e.parts_delivery_details_id||0}),this.materialGroupsForMachineReceive[this.currNewTab].list=t})}chooseOkForMachineReceive(){if(!this.newPartIds.length)return void this.message.create("error","\u8bf7\u81f3\u5c11\u9009\u62e9\u4e00\u4e2a\u65b0\u96f6\u914d\u4ef6\uff01");let e={materialId:0,materialCode:"",materialName:"",customer_settlement_price:0,site_settlement_price:0,employee_settlement_price:0,need_return:!1,sn_management:"",sn:"",specification:"",parts_delivery_details_id:0,canUse:0,newPartSource:"1",replacement_date:null};this.materialGroupsForMachineReceive.forEach(t=>{t.list.forEach(t=>{if(this.newPartIds.indexOf(t.materialId+t.sn+t.parts_delivery_details_id+t.replacement_date)>=0){e=t;const n=e.specification?"_"+e.specification:"";this.partVisibleChanged.emit({partIdx:this.partIdx,origPartId:e.materialId,origName:`(${e.materialCode})${e.materialName}${n}`,underWarranty:!!this.serviceDocUnderWarranty,needReturn:"3"!==e.newPartSource&&!!e.need_return&&e.need_return,origQty:"1"===e.sn_management?1:e.parts_delivery_details_id?e.canUse:1,newOrigQty:e.parts_delivery_details_id?e.canUse:999999,newPartId:e.materialId,partName:`(${e.materialCode})${e.materialName}${n}`,qty:e.materialId?"1"===e.sn_management?1:e.parts_delivery_details_id?e.canUse:1:0,customerSettlementPrice:e.customer_settlement_price||0,siteSettlementPrice:e.site_settlement_price||0,employeeSettlementPrice:e.employee_settlement_price||0,partsDeliveryDetailsId:e.parts_delivery_details_id||0,origSn:"",origSnManagement:"1"===e.sn_management,snManagement:"1"===e.sn_management,sn:e.sn||"",newPartSource:e.newPartSource,oldPartSource:"old"===this.choose_type?"0":"1",origReplacementDate:e.replacement_date||null})}})}),this.choose_type=""}checkboxChange(e){this.newPartIds=e}onKeydown(e,t){13===t.keyCode&&("oldInput"===e?this.getMaterialGroups():"newInputNoRelate"===e?this.getMaterialGroupsForNoRelate():this.getMaterialGroupsForMachineReceive())}}return e.\u0275fac=function(t){return new(t||e)(S.\u0275\u0275directiveInject(s.DwMessageService),S.\u0275\u0275directiveInject(o.v))},e.\u0275cmp=S.\u0275\u0275defineComponent({type:e,selectors:[["app-part-opener"]],inputs:{visible:"visible"},outputs:{partVisibleChanged:"partVisibleChanged",partStepOneVisible:"partStepOneVisible"},decls:10,vars:25,consts:[["dwTitle","\u9009\u62e9\u539f\u96f6\u914d\u4ef6",3,"dwBodyStyle","dwMaskClosable","dwWidth","dwVisible","dwVisibleChange","dwOnCancel","dwOnOk"],["dwModalContent",""],["dwTitle","\u9009\u62e9\u65b0\u96f6\u914d\u4ef6",3,"dwBodyStyle","dwMaskClosable","dwWidth","dwVisible","dwVisibleChange","dwOnCancel","dwOnOk"],[1,"wrapper"],[1,"top-box"],[1,"select-box"],[2,"width","100%",3,"ngModel","ngModelChange"],["dwValue","0","dwLabel","\u5e38\u7528\u914d\u4ef6"],["dwValue","1","dwLabel","\u914d\u4ef6\u4fe1\u606f"],["dwValue","2","dwLabel","\u6613\u635f\u4ef6\u6e05\u5355"],[1,"search-box"],[1,"search",3,"click"],["dw-icon","","dwType","search","dwTheme","outline"],["dw-input","","type","text","placeholder","\u641c\u7d22",3,"ngModel","ngModelChange","keydown"],["class","close",3,"click",4,"ngIf"],[1,"choose-wrap","hasInput"],[1,"swiper-tab"],[3,"class","click",4,"ngFor","ngForOf"],[1,"radio-group",3,"ngModel","ngModelChange"],[3,"class",4,"ngFor","ngForOf"],[1,"close",3,"click"],["dw-icon","","dwTheme","fill","dwType","close-circle",1,"ant-input-clear-icon"],[3,"click"],[3,"dwData","dwFrontPagination","dwTotal","dwPageIndex","dwPageSize","dwPageIndexChange","dwPageSizeChange"],["dwTable",""],["dw-tr",""],["dw-th","","dwWidth","40px"],["translate",""],["dw-th","","dwWidth","96px"],["dw-th","","dwWidth","98px"],["dw-th","","dwWidth","86px",4,"ngIf"],["dw-th","","dwWidth","86px",3,"dwAlign",4,"ngIf"],["dw-th","","dwWidth","100px",4,"ngIf"],["dw-th","","dwWidth","84px"],[4,"ngFor","ngForOf"],["dw-th","","dwWidth","86px"],["dw-th","","dwWidth","86px",3,"dwAlign"],["dw-th","","dwWidth","100px"],["width","40",3,"dwAlign"],["dw-radio","",3,"dwValue"],["dw-tooltip","","dwTooltipTitle","\u6613\u635f\u4ef6","class","quickPart",4,"ngIf"],[4,"ngIf"],[3,"dwAlign",4,"ngIf"],[3,"item",4,"ngIf"],["dw-tooltip","","dwTooltipTitle","\u6613\u635f\u4ef6",1,"quickPart"],[1,"point"],[3,"dwAlign"],["class","warranty",4,"ngIf"],["class","warranty red",4,"ngIf"],[1,"warranty"],[1,"warranty","red"],[3,"item"],[1,"radio-group",3,"dwOnChange"],[3,"dwData","dwPageSize"],["dw-th",""],["dw-th","","dwAlign","right"],["dw-checkbox","",3,"dwValue"],["dwAlign","right"],[1,"choose-wrap"],["dwValue","0","dwLabel","\u5e38\u7528\u914d\u4ef6",4,"ngIf"],["dwValue","3","dwLabel","\u914d\u4ef6\u7533\u8bf7"],["dwValue","4","dwLabel","\u6211\u7684\u9886\u7528",4,"ngIf"],["dwValue","4","dwLabel","\u6211\u7684\u9886\u7528"],["dw-th","","dwWidth","80px","dwAlign","right",4,"ngIf"],["dw-th","","dwWidth","80px","dwAlign","right"],["dwAlign","right",4,"ngIf"]],template:function(e,t){1&e&&(S.\u0275\u0275elementStart(0,"dw-modal",0),S.\u0275\u0275listener("dwVisibleChange",function(e){return"old"===t.choose_type&&(t.visible=e)})("dwOnCancel",function(){return t.close()})("dwOnOk",function(){return t.nextStep()}),S.\u0275\u0275template(1,Dt,17,6,"ng-template",1),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(2,"dw-modal",2),S.\u0275\u0275listener("dwVisibleChange",function(e){return"new"===t.choose_type&&t.relate_to_inventory&&!t.isMachineReceive&&!(t.is_service_mode1=e)})("dwOnCancel",function(){return t.close()})("dwOnOk",function(){return t.chooseOk()}),S.\u0275\u0275template(3,Pt,25,3,"ng-template",1),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(4,"dw-modal",2),S.\u0275\u0275listener("dwVisibleChange",function(e){return"new"===t.choose_type&&t.relate_to_inventory&&!t.isMachineReceive&&(t.is_service_mode1=e)})("dwOnCancel",function(){return t.close()})("dwOnOk",function(){return t.chooseOkForMode1()}),S.\u0275\u0275template(5,Lt,6,2,"ng-template",1),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(6,"dw-modal",2),S.\u0275\u0275listener("dwVisibleChange",function(e){return"new"===t.choose_type&&!(t.relate_to_inventory=e)})("dwOnCancel",function(){return t.close()})("dwOnOk",function(){return t.chooseOkForNoRelate()}),S.\u0275\u0275template(7,Jt,17,6,"ng-template",1),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(8,"dw-modal",2),S.\u0275\u0275listener("dwVisibleChange",function(e){return"new"===t.choose_type&&t.relate_to_inventory&&(t.isMachineReceive=e)})("dwOnCancel",function(){return t.close()})("dwOnOk",function(){return t.chooseOkForMachineReceive()}),S.\u0275\u0275template(9,wn,19,7,"ng-template",1),S.\u0275\u0275elementEnd()),2&e&&(S.\u0275\u0275property("dwBodyStyle",S.\u0275\u0275pureFunction0(20,vn))("dwMaskClosable",!0)("dwWidth",900)("dwVisible","old"===t.choose_type&&t.visible),S.\u0275\u0275advance(2),S.\u0275\u0275property("dwBodyStyle",S.\u0275\u0275pureFunction0(21,vn))("dwMaskClosable",!0)("dwWidth",900)("dwVisible","new"===t.choose_type&&t.relate_to_inventory&&!t.isMachineReceive&&!t.is_service_mode1),S.\u0275\u0275advance(2),S.\u0275\u0275property("dwBodyStyle",S.\u0275\u0275pureFunction0(22,vn))("dwMaskClosable",!0)("dwWidth",900)("dwVisible","new"===t.choose_type&&t.relate_to_inventory&&!t.isMachineReceive&&t.is_service_mode1),S.\u0275\u0275advance(2),S.\u0275\u0275property("dwBodyStyle",S.\u0275\u0275pureFunction0(23,vn))("dwMaskClosable",!0)("dwWidth",900)("dwVisible","new"===t.choose_type&&!t.relate_to_inventory),S.\u0275\u0275advance(2),S.\u0275\u0275property("dwBodyStyle",S.\u0275\u0275pureFunction0(24,vn))("dwMaskClosable",!0)("dwWidth",900)("dwVisible","new"===t.choose_type&&t.relate_to_inventory&&t.isMachineReceive))},directives:[P.DwModalComponent,P.DwModalContentDirective,ct.DwSelectComponent,a.NgControlStatus,a.NgModel,ct.DwOptionComponent,R.u,A.DwIconDirective,B.DwInputDirective,a.DefaultValueAccessor,D.NgIf,D.NgForOf,j.DwRadioGroupComponent,me.DwTableComponent,pe.Ct,me.DwTheadComponent,me.DwTrDirective,me.DwTableCellDirective,me.DwThMeasureDirective,pe.BL,ue.TranslateDirective,me.DwTbodyComponent,me.DwCellAlignDirective,j.DwRadioComponent,mt.DwTooltipDirective,pt.a,Ie.DwCheckboxWrapperComponent,Ie.DwCheckboxComponent],pipes:[D.DatePipe],styles:[".top-box[_ngcontent-%COMP%]{width:100%;height:32px;display:flex;margin-bottom:24px}.select-box[_ngcontent-%COMP%]{width:120px;height:100%;margin-right:24px}.search-box[_ngcontent-%COMP%]{flex:1;height:100%;position:relative}.search-box[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]{width:30px;height:100%;display:flex;align-items:center;justify-content:center;position:absolute;top:0;left:0;z-index:2}.search-box[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]   em[_ngcontent-%COMP%]{font-size:16px;color:#999}.search-box[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{position:absolute;top:0;right:8px;font-size:20px}.search-box[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]   .ant-input-clear-icon[_ngcontent-%COMP%]:last-child{font-size:16px}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;height:32px;background:#fff;border-radius:4px;padding:0 30px}.wrapper[_ngcontent-%COMP%]{height:100%}.choose-wrap[_ngcontent-%COMP%]{height:100%;flex:1;display:flex}.choose-wrap.hasInput[_ngcontent-%COMP%]{height:calc(100% - 56px)}.swiper-tab[_ngcontent-%COMP%]{width:120px;height:100%;overflow-y:auto;margin-right:24px}.swiper-tab[_ngcontent-%COMP%]   .swiper-tab-list[_ngcontent-%COMP%]{width:100%;min-height:40px;line-height:40px;text-align:center;color:#000000a6;font-size:14px;background:#e8e8e8;cursor:pointer}.swiper-tab[_ngcontent-%COMP%]   .swiper-tab-list.tab-on[_ngcontent-%COMP%]{color:#fff;background:#00a3ff}.radio-group[_ngcontent-%COMP%]{flex:1;height:100%;position:relative;overflow:auto}.scroll-box[_ngcontent-%COMP%]{height:100%}.scroll-box.hide[_ngcontent-%COMP%]{display:none}.warranty[_ngcontent-%COMP%]{display:inline-block;width:60px;height:24px;line-height:22px;text-align:center;color:#00af26;font-size:12px;border:1px solid #84d997;border-radius:12px}.warranty.red[_ngcontent-%COMP%]{color:#fe3a3a;border-color:#fe4949}.ant-radio-wrapper[_ngcontent-%COMP%]{margin-right:0}.quickPart[_ngcontent-%COMP%]   .point[_ngcontent-%COMP%]{display:inline-block;width:6px;height:6px;border-radius:3px;background-color:#ffbe68;margin-bottom:3px}"]}),e})();function Cn(e,t){1&e&&(S.\u0275\u0275elementStart(0,"div",6),S.\u0275\u0275text(1,"\u8bf7\u8f93\u5165\u65b0\u5e8f\u5217\u53f7"),S.\u0275\u0275elementEnd())}function _n(e,t){1&e&&(S.\u0275\u0275elementStart(0,"div",6),S.\u0275\u0275text(1,"\u8bf7\u8f93\u5165\u65b0\u9879\u76ee\u53f7"),S.\u0275\u0275elementEnd())}const yn=function(){return{standalone:!0}};function Sn(e,t){if(1&e){const e=S.\u0275\u0275getCurrentView();S.\u0275\u0275elementStart(0,"div",2),S.\u0275\u0275template(1,Cn,2,0,"div",3),S.\u0275\u0275template(2,_n,2,0,"div",3),S.\u0275\u0275elementStart(3,"div",4),S.\u0275\u0275elementStart(4,"input",5),S.\u0275\u0275listener("ngModelChange",function(t){return S.\u0275\u0275restoreView(e),S.\u0275\u0275nextContext().currentSn=t}),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd()}if(2&e){const e=S.\u0275\u0275nextContext();S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf","1"===e.type),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf","2"===e.type),S.\u0275\u0275advance(2),S.\u0275\u0275property("ngModelOptions",S.\u0275\u0275pureFunction0(4,yn))("ngModel",e.currentSn)}}const bn=function(){return{height:"120px",overflow:"auto","padding-bottom":"24px"}};let In=(()=>{class e{constructor(e){this.message=e,this.type="1",this.currentSn="",this.snVisibleChanged=new S.EventEmitter}initData(e,t){this.type=t,this.currentSn=e}close(){this.snVisibleChanged.emit(null)}chooseOk(){this.currentSn=this.currentSn.trim(),this.currentSn?this.snVisibleChanged.emit(this.currentSn):this.message.create("error","\u8bf7\u8f93\u5165\u65b0"+("1"===this.type?"\u5e8f\u5217\u53f7":"\u9879\u76ee\u53f7"))}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)(S.\u0275\u0275directiveInject(s.DwMessageService))},e.\u0275cmp=S.\u0275\u0275defineComponent({type:e,selectors:[["app-sn-opener"]],inputs:{visible:"visible"},outputs:{snVisibleChanged:"snVisibleChanged"},decls:2,vars:7,consts:[[3,"dwBodyStyle","dwMaskClosable","dwWidth","dwVisible","dwTitle","dwOkDisabled","dwVisibleChange","dwOnCancel","dwOnOk"],["dwModalContent",""],[1,"in-box"],["class","col-label","style","margin-bottom: 8px;",4,"ngIf"],[1,"col-input"],["dw-input","",3,"ngModelOptions","ngModel","ngModelChange"],[1,"col-label",2,"margin-bottom","8px"]],template:function(e,t){1&e&&(S.\u0275\u0275elementStart(0,"dw-modal",0),S.\u0275\u0275listener("dwVisibleChange",function(e){return t.visible=e})("dwOnCancel",function(){return t.close()})("dwOnOk",function(){return t.chooseOk()}),S.\u0275\u0275template(1,Sn,5,5,"ng-template",1),S.\u0275\u0275elementEnd()),2&e&&S.\u0275\u0275property("dwBodyStyle",S.\u0275\u0275pureFunction0(6,bn))("dwMaskClosable",!0)("dwWidth",360)("dwVisible",t.visible)("dwTitle","1"===t.type?"\u5e8f\u5217\u53f7\u53d8\u66f4":"\u9879\u76ee\u53f7\u53d8\u66f4")("dwOkDisabled",!t.currentSn)},directives:[P.DwModalComponent,P.DwModalContentDirective,D.NgIf,B.DwInputDirective,a.DefaultValueAccessor,a.NgControlStatus,a.NgModel],styles:[""]}),e})();var En=n(93761),Dn=n(96670),On=n(41937),Mn=n(39288),Pn=n(119);function kn(e,t){1&e&&(S.\u0275\u0275elementStart(0,"span"),S.\u0275\u0275text(1,"\u5e8f\u5217\u53f7\uff1a"),S.\u0275\u0275elementEnd())}function Fn(e,t){1&e&&(S.\u0275\u0275elementStart(0,"span"),S.\u0275\u0275text(1,"\u9879\u76ee\u53f7\uff1a"),S.\u0275\u0275elementEnd())}function Vn(e,t){if(1&e){const e=S.\u0275\u0275getCurrentView();S.\u0275\u0275elementStart(0,"div",36),S.\u0275\u0275listener("click",function(){S.\u0275\u0275restoreView(e);const t=S.\u0275\u0275nextContext(2);return S.\u0275\u0275reference(7).initData(t.docInfo.currentSn,t.docInfo.type),t.openSn()}),S.\u0275\u0275element(1,"img",37),S.\u0275\u0275element(2,"img",38),S.\u0275\u0275elementEnd()}}function Tn(e,t){if(1&e&&S.\u0275\u0275element(0,"dw-option",39),2&e){const e=t.$implicit;S.\u0275\u0275property("dwLabel",e.service_type_name)("dwValue",e.service_type_id)}}function Ln(e,t){1&e&&(S.\u0275\u0275elementContainerStart(0),S.\u0275\u0275elementStart(1,"dw-form-label",40),S.\u0275\u0275text(2,"\u5b89\u88c5/\u8c03\u8bd5\u65e5\u671f\uff1a"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(3,"div",41),S.\u0275\u0275element(4,"dw-range-picker",42),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(5,"dw-form-label",40),S.\u0275\u0275text(6,"\u9a8c\u6536\u65e5\u671f\uff1a"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(7,"div",9),S.\u0275\u0275element(8,"dw-date-picker",43),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementContainerEnd())}function Rn(e,t){if(1&e){const e=S.\u0275\u0275getCurrentView();S.\u0275\u0275elementStart(0,"div",57),S.\u0275\u0275elementStart(1,"div",58),S.\u0275\u0275listener("click",function(){S.\u0275\u0275restoreView(e);const t=S.\u0275\u0275nextContext().$implicit;return S.\u0275\u0275nextContext(3).deleteEquipment(t.index)}),S.\u0275\u0275element(2,"img",59),S.\u0275\u0275element(3,"img",60),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd()}}function An(e,t){if(1&e&&(S.\u0275\u0275elementStart(0,"tr"),S.\u0275\u0275elementStart(1,"td"),S.\u0275\u0275text(2),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(3,"td"),S.\u0275\u0275text(4),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(5,"td"),S.\u0275\u0275text(6),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(7,"td"),S.\u0275\u0275text(8),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(9,"td"),S.\u0275\u0275text(10),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(11,"td"),S.\u0275\u0275text(12),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(13,"td",55),S.\u0275\u0275template(14,Rn,4,0,"div",56),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd()),2&e){const e=t.$implicit;S.\u0275\u0275advance(2),S.\u0275\u0275textInterpolate1(" ",e.code," "),S.\u0275\u0275advance(2),S.\u0275\u0275textInterpolate1(" ",e.name," "),S.\u0275\u0275advance(2),S.\u0275\u0275textInterpolate1(" ",e.sn," "),S.\u0275\u0275advance(2),S.\u0275\u0275textInterpolate1(" ",e.item_group_name," "),S.\u0275\u0275advance(2),S.\u0275\u0275textInterpolate1(" ",e.specification," "),S.\u0275\u0275advance(2),S.\u0275\u0275textInterpolate1(" ",e.model," "),S.\u0275\u0275advance(2),S.\u0275\u0275property("ngIf",!e.depot_repair_status||"0"===e.depot_repair_status)}}function Nn(e,t){if(1&e){const e=S.\u0275\u0275getCurrentView();S.\u0275\u0275elementStart(0,"div",20),S.\u0275\u0275elementStart(1,"dw-form-label",44),S.\u0275\u0275text(2,"\u7ef4\u4fee\u8bbe\u5907\u4fe1\u606f"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(3,"div",22),S.\u0275\u0275elementStart(4,"div",45),S.\u0275\u0275listener("click",function(){S.\u0275\u0275restoreView(e);const t=S.\u0275\u0275reference(7),n=S.\u0275\u0275nextContext(2);return t.initData(n.getConfigValue())}),S.\u0275\u0275element(5,"em",46),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(6,"app-opener-frontend",47,48),S.\u0275\u0275listener("selectedChanged",function(t){return S.\u0275\u0275restoreView(e),S.\u0275\u0275nextContext(2).openSelect(t)}),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(8,"dw-table",49,50),S.\u0275\u0275elementStart(10,"thead"),S.\u0275\u0275elementStart(11,"tr",51),S.\u0275\u0275elementStart(12,"th",52),S.\u0275\u0275elementStart(13,"span",53),S.\u0275\u0275text(14,"\u8bbe\u5907\u7f16\u53f7"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(15,"th",52),S.\u0275\u0275elementStart(16,"span",53),S.\u0275\u0275text(17,"\u8bbe\u5907\u540d\u79f0"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(18,"th",52),S.\u0275\u0275elementStart(19,"span",53),S.\u0275\u0275text(20,"\u5e8f\u5217\u53f7"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(21,"th",52),S.\u0275\u0275elementStart(22,"span",53),S.\u0275\u0275text(23,"\u4ea7\u54c1\u5206\u7c7b"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(24,"th",52),S.\u0275\u0275elementStart(25,"span",53),S.\u0275\u0275text(26,"\u89c4\u683c"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(27,"th",52),S.\u0275\u0275elementStart(28,"span",53),S.\u0275\u0275text(29,"\u578b\u53f7"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(30,"th",54),S.\u0275\u0275elementStart(31,"span",53),S.\u0275\u0275text(32,"\u64cd\u4f5c"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(33,"tbody"),S.\u0275\u0275template(34,An,15,7,"tr",34),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd()}if(2&e){const e=S.\u0275\u0275reference(9),t=S.\u0275\u0275nextContext(2);S.\u0275\u0275advance(8),S.\u0275\u0275property("dwData",t.equipments_for_show)("dwFrontPagination",!1)("dwShowPagination",!1),S.\u0275\u0275advance(26),S.\u0275\u0275property("ngForOf",e.data)}}function $n(e,t){if(1&e){const e=S.\u0275\u0275getCurrentView();S.\u0275\u0275elementStart(0,"em",76),S.\u0275\u0275listener("click",function(){S.\u0275\u0275restoreView(e);const t=S.\u0275\u0275nextContext(2).$implicit;return S.\u0275\u0275nextContext(3).clearFaultLocation(t)}),S.\u0275\u0275elementEnd()}}function jn(e,t){if(1&e){const e=S.\u0275\u0275getCurrentView();S.\u0275\u0275template(0,$n,1,0,"em",73),S.\u0275\u0275elementStart(1,"button",74),S.\u0275\u0275listener("click",function(){S.\u0275\u0275restoreView(e);const t=S.\u0275\u0275nextContext().$implicit;return S.\u0275\u0275nextContext(3).openServiceEmployeeWin(t)}),S.\u0275\u0275element(2,"em",75),S.\u0275\u0275elementEnd()}if(2&e){const e=S.\u0275\u0275nextContext().$implicit;S.\u0275\u0275property("ngIf",e.faultLocationName)}}function zn(e,t){if(1&e){const e=S.\u0275\u0275getCurrentView();S.\u0275\u0275elementStart(0,"div",77),S.\u0275\u0275listener("click",function(){S.\u0275\u0275restoreView(e);const t=S.\u0275\u0275nextContext().index;return S.\u0275\u0275nextContext(3).openPhrase(t,"faultPhrase")}),S.\u0275\u0275text(1,"+ \u5e38\u7528\u8bed "),S.\u0275\u0275elementEnd()}}function Bn(e,t){if(1&e){const e=S.\u0275\u0275getCurrentView();S.\u0275\u0275elementStart(0,"div",78),S.\u0275\u0275text(1),S.\u0275\u0275elementStart(2,"img",79),S.\u0275\u0275listener("click",function(){S.\u0275\u0275restoreView(e);const t=S.\u0275\u0275nextContext().index;return S.\u0275\u0275nextContext(3).delPhrase(t,"faultPhrase")}),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd()}if(2&e){const e=S.\u0275\u0275nextContext().$implicit;S.\u0275\u0275advance(1),S.\u0275\u0275textInterpolate1(" ",e.faultPhrase," ")}}function qn(e,t){if(1&e){const e=S.\u0275\u0275getCurrentView();S.\u0275\u0275elementStart(0,"div",77),S.\u0275\u0275listener("click",function(){S.\u0275\u0275restoreView(e);const t=S.\u0275\u0275nextContext().index;return S.\u0275\u0275nextContext(3).openPhrase(t,"programmePhrase")}),S.\u0275\u0275text(1,"+ \u5e38\u7528\u8bed"),S.\u0275\u0275elementEnd()}}function Wn(e,t){if(1&e){const e=S.\u0275\u0275getCurrentView();S.\u0275\u0275elementStart(0,"div",78),S.\u0275\u0275text(1),S.\u0275\u0275elementStart(2,"img",79),S.\u0275\u0275listener("click",function(){S.\u0275\u0275restoreView(e);const t=S.\u0275\u0275nextContext().index;return S.\u0275\u0275nextContext(3).delPhrase(t,"programmePhrase")}),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd()}if(2&e){const e=S.\u0275\u0275nextContext().$implicit;S.\u0275\u0275advance(1),S.\u0275\u0275textInterpolate1(" ",e.programmePhrase," ")}}const Gn=function(){return{standalone:!0}};function Un(e,t){if(1&e){const e=S.\u0275\u0275getCurrentView();S.\u0275\u0275elementStart(0,"tr"),S.\u0275\u0275elementStart(1,"td"),S.\u0275\u0275text(2),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(3,"td"),S.\u0275\u0275text(4),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(5,"td"),S.\u0275\u0275elementStart(6,"dw-input-group",67),S.\u0275\u0275elementStart(7,"input",68),S.\u0275\u0275listener("ngModelChange",function(t){return S.\u0275\u0275restoreView(e).$implicit.faultLocationName=t}),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275template(8,jn,3,1,"ng-template",null,69,S.\u0275\u0275templateRefExtractor),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(10,"td"),S.\u0275\u0275template(11,zn,2,0,"div",70),S.\u0275\u0275template(12,Bn,3,1,"div",71),S.\u0275\u0275elementStart(13,"input",72),S.\u0275\u0275listener("ngModelChange",function(t){return S.\u0275\u0275restoreView(e).$implicit.breakdownDescription=t}),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(14,"td"),S.\u0275\u0275template(15,qn,2,0,"div",70),S.\u0275\u0275template(16,Wn,3,1,"div",71),S.\u0275\u0275elementStart(17,"input",72),S.\u0275\u0275listener("ngModelChange",function(t){return S.\u0275\u0275restoreView(e).$implicit.processingDescription=t}),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(18,"td"),S.\u0275\u0275elementStart(19,"div",57),S.\u0275\u0275elementStart(20,"div",58),S.\u0275\u0275listener("click",function(){const t=S.\u0275\u0275restoreView(e).index;return S.\u0275\u0275nextContext(3).deleteGrid("breakdown",t)}),S.\u0275\u0275element(21,"img",59),S.\u0275\u0275element(22,"img",60),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd()}if(2&e){const e=t.$implicit,n=S.\u0275\u0275reference(9);S.\u0275\u0275advance(2),S.\u0275\u0275textInterpolate1(" ",e.breakdownCode," "),S.\u0275\u0275advance(2),S.\u0275\u0275textInterpolate1(" ",e.breakdownName," "),S.\u0275\u0275advance(2),S.\u0275\u0275property("dwSuffix",n),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngModel",e.faultLocationName)("ngModelOptions",S.\u0275\u0275pureFunction0(13,Gn)),S.\u0275\u0275advance(4),S.\u0275\u0275property("ngIf",!e.faultPhrase),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf",e.faultPhrase),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngModelOptions",S.\u0275\u0275pureFunction0(14,Gn))("ngModel",e.breakdownDescription),S.\u0275\u0275advance(2),S.\u0275\u0275property("ngIf",!e.programmePhrase),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf",e.programmePhrase),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngModelOptions",S.\u0275\u0275pureFunction0(15,Gn))("ngModel",e.processingDescription)}}function Hn(e,t){if(1&e){const e=S.\u0275\u0275getCurrentView();S.\u0275\u0275elementStart(0,"div",20),S.\u0275\u0275elementStart(1,"dw-form-label",61),S.\u0275\u0275text(2,"\u6545\u969c\u89e3\u51b3\u60c5\u51b5"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(3,"div",22),S.\u0275\u0275elementStart(4,"div",45),S.\u0275\u0275listener("click",function(){S.\u0275\u0275restoreView(e);const t=S.\u0275\u0275nextContext(2);return S.\u0275\u0275reference(3).initData(t.breakdowns),t.isBreakdownVisible=!0}),S.\u0275\u0275element(5,"em",46),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(6,"dw-table",49,62),S.\u0275\u0275elementStart(8,"thead"),S.\u0275\u0275elementStart(9,"tr",51),S.\u0275\u0275elementStart(10,"th",63),S.\u0275\u0275elementStart(11,"span",53),S.\u0275\u0275text(12,"\u6545\u969c\u7f16\u53f7"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(13,"th",64),S.\u0275\u0275elementStart(14,"span",53),S.\u0275\u0275text(15,"\u6545\u969c\u540d\u79f0"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(16,"th",64),S.\u0275\u0275elementStart(17,"span",53),S.\u0275\u0275text(18,"\u6545\u969c\u90e8\u4f4d"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(19,"th",65),S.\u0275\u0275elementStart(20,"span",53),S.\u0275\u0275text(21,"\u6545\u969c\u63cf\u8ff0"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(22,"th",65),S.\u0275\u0275elementStart(23,"span",53),S.\u0275\u0275text(24,"\u5904\u7406\u8bf4\u660e"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(25,"th",66),S.\u0275\u0275elementStart(26,"span",53),S.\u0275\u0275text(27,"\u64cd\u4f5c"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(28,"tbody"),S.\u0275\u0275template(29,Un,23,16,"tr",34),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd()}if(2&e){const e=S.\u0275\u0275reference(7),t=S.\u0275\u0275nextContext(2);S.\u0275\u0275advance(1),S.\u0275\u0275property("dwRequired",!t.docInfo.installDebugAccept),S.\u0275\u0275advance(5),S.\u0275\u0275property("dwData",t.breakdowns)("dwFrontPagination",!1)("dwShowPagination",!1),S.\u0275\u0275advance(19),S.\u0275\u0275property("dwAlign","center"),S.\u0275\u0275advance(4),S.\u0275\u0275property("ngForOf",e.data)}}function Xn(e,t){if(1&e&&(S.\u0275\u0275elementStart(0,"span",91),S.\u0275\u0275element(1,"em",92),S.\u0275\u0275elementEnd()),2&e){const e=S.\u0275\u0275nextContext(3);S.\u0275\u0275property("dwTooltipTitle",e.need_return_tooltip)}}function Qn(e,t){if(1&e){const e=S.\u0275\u0275getCurrentView();S.\u0275\u0275elementStart(0,"button",100),S.\u0275\u0275listener("click",function(){S.\u0275\u0275restoreView(e);const t=S.\u0275\u0275nextContext().index,n=S.\u0275\u0275nextContext(3),i=S.\u0275\u0275reference(5);return i.getServiceDocUnderWarranty(n.serviceDocUnderWarranty),i.initData("old",n.product_file_id,n.service_order_id),i.addOrEditOldPart(t,n.isChangeReport),n.openSpareParts()}),S.\u0275\u0275element(1,"em",101),S.\u0275\u0275elementEnd()}}function Kn(e,t){if(1&e){const e=S.\u0275\u0275getCurrentView();S.\u0275\u0275elementStart(0,"button",102),S.\u0275\u0275listener("click",function(){S.\u0275\u0275restoreView(e);const t=S.\u0275\u0275nextContext().index;return S.\u0275\u0275nextContext(3).deleteOldPart(t)}),S.\u0275\u0275element(1,"em",103),S.\u0275\u0275elementEnd()}}function Jn(e,t){if(1&e){const e=S.\u0275\u0275getCurrentView();S.\u0275\u0275elementStart(0,"input",104),S.\u0275\u0275listener("ngModelChange",function(t){return S.\u0275\u0275restoreView(e),S.\u0275\u0275nextContext().$implicit.origSn=t}),S.\u0275\u0275elementEnd()}if(2&e){const e=S.\u0275\u0275nextContext().$implicit;S.\u0275\u0275property("ngModelOptions",S.\u0275\u0275pureFunction0(2,Gn))("ngModel",e.origSn)}}function Zn(e,t){if(1&e&&(S.\u0275\u0275elementStart(0,"span"),S.\u0275\u0275text(1),S.\u0275\u0275elementEnd()),2&e){const e=S.\u0275\u0275nextContext().$implicit;S.\u0275\u0275advance(1),S.\u0275\u0275textInterpolate(e.origSn)}}function Yn(e,t){if(1&e){const e=S.\u0275\u0275getCurrentView();S.\u0275\u0275elementStart(0,"input",104),S.\u0275\u0275listener("ngModelChange",function(t){return S.\u0275\u0275restoreView(e),S.\u0275\u0275nextContext().$implicit.sn=t}),S.\u0275\u0275elementEnd()}if(2&e){const e=S.\u0275\u0275nextContext().$implicit;S.\u0275\u0275property("ngModelOptions",S.\u0275\u0275pureFunction0(2,Gn))("ngModel",e.sn)}}function ei(e,t){if(1&e&&(S.\u0275\u0275elementStart(0,"span"),S.\u0275\u0275text(1),S.\u0275\u0275elementEnd()),2&e){const e=S.\u0275\u0275nextContext().$implicit;S.\u0275\u0275advance(1),S.\u0275\u0275textInterpolate(e.sn)}}function ti(e,t){if(1&e){const e=S.\u0275\u0275getCurrentView();S.\u0275\u0275elementStart(0,"div",57),S.\u0275\u0275elementStart(1,"div",58),S.\u0275\u0275listener("click",function(){S.\u0275\u0275restoreView(e);const t=S.\u0275\u0275nextContext().index;return S.\u0275\u0275nextContext(3).deleteGrid("part",t)}),S.\u0275\u0275element(2,"img",59),S.\u0275\u0275element(3,"img",60),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd()}}function ni(e,t){if(1&e){const e=S.\u0275\u0275getCurrentView();S.\u0275\u0275elementStart(0,"tr"),S.\u0275\u0275elementStart(1,"td"),S.\u0275\u0275text(2),S.\u0275\u0275template(3,Qn,2,0,"button",93),S.\u0275\u0275template(4,Kn,2,0,"button",94),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(5,"td"),S.\u0275\u0275template(6,Jn,1,3,"input",95),S.\u0275\u0275template(7,Zn,2,1,"span",10),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(8,"td"),S.\u0275\u0275elementStart(9,"dw-input-number",96),S.\u0275\u0275listener("ngModelChange",function(t){return S.\u0275\u0275restoreView(e).$implicit.origQty=t}),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(10,"td",97),S.\u0275\u0275elementStart(11,"label",98),S.\u0275\u0275listener("ngModelChange",function(t){return S.\u0275\u0275restoreView(e).$implicit.needReturn=t}),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(12,"td"),S.\u0275\u0275text(13),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(14,"td"),S.\u0275\u0275template(15,Yn,1,3,"input",95),S.\u0275\u0275template(16,ei,2,1,"span",10),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(17,"td"),S.\u0275\u0275elementStart(18,"dw-input-number",99),S.\u0275\u0275listener("ngModelChange",function(t){return S.\u0275\u0275restoreView(e).$implicit.qty=t})("ngModelChange",function(){const t=S.\u0275\u0275restoreView(e).index;return S.\u0275\u0275nextContext(3).newQtyChange(t)}),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(19,"td"),S.\u0275\u0275elementStart(20,"dw-input-number",96),S.\u0275\u0275listener("ngModelChange",function(t){return S.\u0275\u0275restoreView(e).$implicit.customerSettlementPrice=t}),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(21,"td",97),S.\u0275\u0275text(22),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(23,"td"),S.\u0275\u0275template(24,ti,4,0,"div",56),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd()}if(2&e){const e=t.$implicit,n=S.\u0275\u0275nextContext(3);S.\u0275\u0275advance(2),S.\u0275\u0275textInterpolate1(" ",e.origName," "),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf",n.isChangeReport&&(!e.origPartId||""!==e.partIdx||!e.serviceDocPartchangeId)||!n.isChangeReport),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf",(n.isChangeReport&&(!e.origPartId||""!==e.partIdx||!e.serviceDocPartchangeId)||!n.isChangeReport)&&e.origPartId),S.\u0275\u0275advance(2),S.\u0275\u0275property("ngIf",e.origSnManagement&&(!n.isChangeReport||n.isChangeReport&&(""!==e.partIdx||!e.serviceDocPartchangeId))),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf",!e.origSnManagement),S.\u0275\u0275advance(2),S.\u0275\u0275property("ngModelOptions",S.\u0275\u0275pureFunction0(31,Gn))("ngModel",e.origQty)("dwDisabled",!e.origPartId||n.isChangeReport&&""===e.partIdx&&e.serviceDocPartchangeId||e.origSnManagement)("dwMin",0)("dwPrecision",2),S.\u0275\u0275advance(1),S.\u0275\u0275property("dwAlign","center"),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngModelOptions",S.\u0275\u0275pureFunction0(32,Gn))("ngModel",e.needReturn)("dwDisabled",!(!(n.recycle_unchangeable||!e.origPartId||!e.newPartId||n.isChangeReport&&""===e.partIdx&&e.serviceDocPartchangeId||n.isChangeReport&&"1"===e.writeoffStatus)||n.isChangeReport&&e.serviceDocPartchangeId&&n.isSuperAdmin&&"1"!==e.writeoff_status&&e.newPartSource)),S.\u0275\u0275advance(2),S.\u0275\u0275textInterpolate1(" ",e.partName," "),S.\u0275\u0275advance(2),S.\u0275\u0275property("ngIf",e.snManagement&&(!n.isChangeReport||n.isChangeReport&&!e.serviceDocPartchangeId)),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf",!e.snManagement||n.isChangeReport&&e.serviceDocPartchangeId),S.\u0275\u0275advance(2),S.\u0275\u0275property("ngModel",e.qty)("ngModelOptions",S.\u0275\u0275pureFunction0(33,Gn))("dwDisabled",n.isChangeReport&&e.serviceDocPartchangeId||e.snManagement||!e.newPartId)("dwMin",0)("dwMax",e.newOrigQty)("dwPrecision",2),S.\u0275\u0275advance(2),S.\u0275\u0275property("ngModelOptions",S.\u0275\u0275pureFunction0(34,Gn))("ngModel",e.customerSettlementPrice)("dwDisabled",n.isChangeReport&&e.serviceDocPartchangeId||!e.newPartId)("dwMin",0)("dwPrecision",2),S.\u0275\u0275advance(1),S.\u0275\u0275property("dwAlign","right"),S.\u0275\u0275advance(1),S.\u0275\u0275textInterpolate1(" ",(e.customerSettlementPrice*e.qty).toFixed(2)," "),S.\u0275\u0275advance(2),S.\u0275\u0275property("ngIf",!n.isChangeReport||n.isChangeReport&&!e.serviceDocPartchangeId)}}function ii(e,t){if(1&e){const e=S.\u0275\u0275getCurrentView();S.\u0275\u0275elementStart(0,"div",20),S.\u0275\u0275elementStart(1,"div",21),S.\u0275\u0275text(2,"\u96f6\u914d\u4ef6\u66f4\u6362"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(3,"div",22),S.\u0275\u0275elementStart(4,"div",80),S.\u0275\u0275listener("click",function(){S.\u0275\u0275restoreView(e);const t=S.\u0275\u0275nextContext(2),n=S.\u0275\u0275reference(5);return n.getServiceDocUnderWarranty(t.serviceDocUnderWarranty),n.addOrEditOldPart("",t.isChangeReport),n.initData("new",t.product_file_id,t.service_order_id,t.service_mode,t.service_site_id,t.docInfo.depotRepairStatus,t.docInfo.type),t.openSpareParts()}),S.\u0275\u0275element(5,"em",46),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(6,"div",81),S.\u0275\u0275element(7,"em",82),S.\u0275\u0275elementStart(8,"div",83),S.\u0275\u0275listener("click",function(){S.\u0275\u0275restoreView(e);const t=S.\u0275\u0275nextContext(2),n=S.\u0275\u0275reference(5);return n.getServiceDocUnderWarranty(t.serviceDocUnderWarranty),n.initData("old",t.product_file_id,t.service_order_id),n.addOrEditOldPart("",t.isChangeReport),t.openSpareParts()}),S.\u0275\u0275text(9," \u62c6\u4ef6 "),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(10,"dw-table",49,84),S.\u0275\u0275elementStart(12,"thead"),S.\u0275\u0275elementStart(13,"tr",51),S.\u0275\u0275elementStart(14,"th",85),S.\u0275\u0275elementStart(15,"span",53),S.\u0275\u0275text(16,"\u539f\u96f6\u914d\u4ef6"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(17,"th",86),S.\u0275\u0275elementStart(18,"span",53),S.\u0275\u0275text(19,"\u539f\u5e8f\u5217\u53f7"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(20,"th",87),S.\u0275\u0275elementStart(21,"span",53),S.\u0275\u0275text(22,"\u539f\u4ef6\u6570\u91cf"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(23,"th",88),S.\u0275\u0275elementStart(24,"div",53),S.\u0275\u0275text(25,"\u9700\u56de\u6536\xa0 "),S.\u0275\u0275template(26,Xn,2,1,"span",89),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(27,"th",85),S.\u0275\u0275elementStart(28,"span",53),S.\u0275\u0275text(29,"\u65b0\u96f6\u914d\u4ef6"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(30,"th",86),S.\u0275\u0275elementStart(31,"span",53),S.\u0275\u0275text(32,"\u65b0\u5e8f\u5217\u53f7"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(33,"th",87),S.\u0275\u0275elementStart(34,"span",53),S.\u0275\u0275text(35,"\u66f4\u6362\u6570\u91cf"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(36,"th",90),S.\u0275\u0275elementStart(37,"span",53),S.\u0275\u0275text(38,"\u5355\u4ef7"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(39,"th",88),S.\u0275\u0275elementStart(40,"span",53),S.\u0275\u0275text(41,"\u5408\u8ba1"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(42,"th",66),S.\u0275\u0275elementStart(43,"span",53),S.\u0275\u0275text(44,"\u64cd\u4f5c"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(45,"tbody"),S.\u0275\u0275template(46,ni,25,35,"tr",34),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd()}if(2&e){const e=S.\u0275\u0275reference(11),t=S.\u0275\u0275nextContext(2);S.\u0275\u0275advance(10),S.\u0275\u0275property("dwData",t.spareParts)("dwFrontPagination",!1)("dwShowPagination",!1),S.\u0275\u0275advance(13),S.\u0275\u0275property("dwAlign","center"),S.\u0275\u0275advance(3),S.\u0275\u0275property("ngIf",!t.isSuperAdmin&&t.isChangeReport),S.\u0275\u0275advance(13),S.\u0275\u0275property("dwAlign","right"),S.\u0275\u0275advance(3),S.\u0275\u0275property("dwAlign","center"),S.\u0275\u0275advance(4),S.\u0275\u0275property("ngForOf",e.data)}}function ri(e,t){if(1&e){const e=S.\u0275\u0275getCurrentView();S.\u0275\u0275elementStart(0,"tr"),S.\u0275\u0275elementStart(1,"td"),S.\u0275\u0275text(2),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(3,"td"),S.\u0275\u0275text(4),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(5,"td"),S.\u0275\u0275elementStart(6,"dw-input-number",108),S.\u0275\u0275listener("ngModelChange",function(t){return S.\u0275\u0275restoreView(e).$implicit.customer_settlement_price=t}),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(7,"td"),S.\u0275\u0275elementStart(8,"input",72),S.\u0275\u0275listener("ngModelChange",function(t){return S.\u0275\u0275restoreView(e).$implicit.process_description=t}),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(9,"td"),S.\u0275\u0275elementStart(10,"div",57),S.\u0275\u0275elementStart(11,"div",58),S.\u0275\u0275listener("click",function(){const t=S.\u0275\u0275restoreView(e).index;return S.\u0275\u0275nextContext(3).deleteGrid("serviceItem",t)}),S.\u0275\u0275element(12,"img",59),S.\u0275\u0275element(13,"img",60),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd()}if(2&e){const e=t.$implicit;S.\u0275\u0275advance(2),S.\u0275\u0275textInterpolate1(" ",e.service_item_code," "),S.\u0275\u0275advance(2),S.\u0275\u0275textInterpolate1(" ",e.service_item_name," "),S.\u0275\u0275advance(2),S.\u0275\u0275property("ngModelOptions",S.\u0275\u0275pureFunction0(9,Gn))("ngModel",e.customer_settlement_price)("dwMin",0)("dwStep",1)("dwPrecision",2),S.\u0275\u0275advance(2),S.\u0275\u0275property("ngModelOptions",S.\u0275\u0275pureFunction0(10,Gn))("ngModel",e.process_description)}}function ai(e,t){if(1&e){const e=S.\u0275\u0275getCurrentView();S.\u0275\u0275elementStart(0,"div",20),S.\u0275\u0275elementStart(1,"div",21),S.\u0275\u0275text(2,"\u670d\u52a1\u9879\u76ee"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(3,"div",22),S.\u0275\u0275elementStart(4,"div",45),S.\u0275\u0275listener("click",function(){return S.\u0275\u0275restoreView(e),S.\u0275\u0275nextContext(2).openServiceItem()}),S.\u0275\u0275element(5,"em",46),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(6,"dw-table",49,105),S.\u0275\u0275elementStart(8,"thead"),S.\u0275\u0275elementStart(9,"tr",51),S.\u0275\u0275elementStart(10,"th",63),S.\u0275\u0275elementStart(11,"span",53),S.\u0275\u0275text(12,"\u9879\u76ee\u7f16\u53f7"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(13,"th",64),S.\u0275\u0275elementStart(14,"span",53),S.\u0275\u0275text(15,"\u9879\u76ee\u540d\u79f0"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(16,"th",106),S.\u0275\u0275elementStart(17,"span",53),S.\u0275\u0275text(18,"\u4ef7\u683c"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(19,"th",107),S.\u0275\u0275elementStart(20,"span",53),S.\u0275\u0275text(21,"\u5904\u7406\u8bf4\u660e"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(22,"th",66),S.\u0275\u0275elementStart(23,"span",53),S.\u0275\u0275text(24,"\u64cd\u4f5c"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(25,"tbody"),S.\u0275\u0275template(26,ri,14,11,"tr",34),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd()}if(2&e){const e=S.\u0275\u0275reference(7),t=S.\u0275\u0275nextContext(2);S.\u0275\u0275advance(6),S.\u0275\u0275property("dwData",t.serviceItems)("dwFrontPagination",!1)("dwShowPagination",!1),S.\u0275\u0275advance(16),S.\u0275\u0275property("dwAlign","center"),S.\u0275\u0275advance(4),S.\u0275\u0275property("ngForOf",e.data)}}const oi=function(){return{width:"100%"}};function li(e,t){if(1&e&&S.\u0275\u0275element(0,"img",109),2&e){const e=S.\u0275\u0275nextContext(2);S.\u0275\u0275property("src",e.previewImage,S.\u0275\u0275sanitizeUrl)("ngStyle",S.\u0275\u0275pureFunction0(2,oi))}}function di(e,t){if(1&e&&(S.\u0275\u0275elementStart(0,"div"),S.\u0275\u0275elementStart(1,"a"),S.\u0275\u0275text(2),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd()),2&e){const e=S.\u0275\u0275nextContext().$implicit;S.\u0275\u0275advance(2),S.\u0275\u0275textInterpolate(e.title)}}function si(e,t){1&e&&(S.\u0275\u0275elementStart(0,"div",114),S.\u0275\u0275text(1),S.\u0275\u0275pipe(2,"translate"),S.\u0275\u0275elementEnd()),2&e&&(S.\u0275\u0275advance(1),S.\u0275\u0275textInterpolate(S.\u0275\u0275pipeBind1(2,1,"dw-demo-image-viewer-audit")))}function ci(e,t){if(1&e&&S.\u0275\u0275template(0,si,3,3,"div",113),2&e){const e=S.\u0275\u0275nextContext().$implicit;S.\u0275\u0275property("ngIf",e.isAudit)}}function mi(e,t){if(1&e&&(S.\u0275\u0275elementContainerStart(0),S.\u0275\u0275elementStart(1,"dw-image-viewer-list-item",110),S.\u0275\u0275template(2,di,3,1,"ng-template",null,111,S.\u0275\u0275templateRefExtractor),S.\u0275\u0275template(4,ci,1,1,"ng-template",null,112,S.\u0275\u0275templateRefExtractor),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementContainerEnd()),2&e){const e=t.$implicit,n=S.\u0275\u0275reference(5),i=S.\u0275\u0275nextContext(2);S.\u0275\u0275advance(1),S.\u0275\u0275property("dwListType","picture-card")("dwFile",e)("dwItemAction",i.listActionMap2[e.uid])("dwDesignTpl",n)("onPreview",i.handlePreview2)("onRemove",i.handleRemove2)("onCheck",i.handleCheck)("onOtherAction",i.handleOtherAction)}}function pi(e,t){if(1&e){const e=S.\u0275\u0275getCurrentView();S.\u0275\u0275elementStart(0,"dw-upload",117),S.\u0275\u0275listener("dwFileListChange",function(t){return S.\u0275\u0275restoreView(e),S.\u0275\u0275nextContext(3).attachmentsList=t})("dwChange",function(t){return S.\u0275\u0275restoreView(e),S.\u0275\u0275nextContext(3).handleChange(t)}),S.\u0275\u0275elementStart(1,"button",118),S.\u0275\u0275element(2,"em",31),S.\u0275\u0275text(3,"\u4e0a\u4f20\u6587\u4ef6"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd()}if(2&e){const e=S.\u0275\u0275nextContext(3);S.\u0275\u0275property("dwFileList",e.attachmentsList)("dwBeforeUpload",e.beforeUploadFiles)("dwShowUploadList",!1)("dwAccept",".doc,.docx,.xls,.xlsx,.pdf,.ppt,.pptx")}}function ui(e,t){if(1&e){const e=S.\u0275\u0275getCurrentView();S.\u0275\u0275elementStart(0,"div"),S.\u0275\u0275elementStart(1,"div",119),S.\u0275\u0275elementStart(2,"div",120),S.\u0275\u0275element(3,"em",121),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(4,"div",122),S.\u0275\u0275text(5),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(6,"div",123),S.\u0275\u0275listener("click",function(){const t=S.\u0275\u0275restoreView(e).index;return S.\u0275\u0275nextContext(3).deleteFile(t)}),S.\u0275\u0275element(7,"em",103),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd()}if(2&e){const e=t.$implicit;S.\u0275\u0275advance(4),S.\u0275\u0275property("title",e.name),S.\u0275\u0275advance(1),S.\u0275\u0275textInterpolate(e.name)}}function hi(e,t){if(1&e&&(S.\u0275\u0275elementStart(0,"div",20),S.\u0275\u0275elementStart(1,"div",21),S.\u0275\u0275text(2," \u4e0a\u4f20\u9644\u4ef6 "),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(3,"div",22),S.\u0275\u0275elementStart(4,"div",23),S.\u0275\u0275template(5,pi,4,4,"dw-upload",115),S.\u0275\u0275template(6,ui,8,2,"div",34),S.\u0275\u0275elementStart(7,"div",116),S.\u0275\u0275text(8,"\u652f\u6301\u6269\u5c55\u540d\uff1a.doc .docx .xlsx .xls .ppt .pptx .pdf"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd()),2&e){const e=S.\u0275\u0275nextContext(2);S.\u0275\u0275advance(5),S.\u0275\u0275property("ngIf",e.attachmentsList.length<5),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngForOf",e.attachmentsList)}}function gi(e,t){if(1&e&&(S.\u0275\u0275elementStart(0,"div",20),S.\u0275\u0275elementStart(1,"dw-form-label",61),S.\u0275\u0275text(2,"\u5ba2\u6237\u7b7e\u540d"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(3,"div",22),S.\u0275\u0275element(4,"input",124),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd()),2&e){const e=S.\u0275\u0275nextContext(2);S.\u0275\u0275advance(1),S.\u0275\u0275property("dwRequired",1===e.service_mode),S.\u0275\u0275advance(3),S.\u0275\u0275property("required",1===e.service_mode)("readonly",e.isChangeReport)}}const fi=function(){return{showPreviewIcon:!0}},wi=function(){return{showPreviewIcon:!0,showRemoveIcon:!0}},vi=function(e){return{marginBottom:e}},xi=function(e){return{"my-list":e}};function Ci(e,t){if(1&e){const e=S.\u0275\u0275getCurrentView();S.\u0275\u0275elementStart(0,"div",8),S.\u0275\u0275elementStart(1,"div",9),S.\u0275\u0275text(2),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(3,"div",9),S.\u0275\u0275text(4),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(5,"div",9),S.\u0275\u0275text(6),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(7,"div",9),S.\u0275\u0275template(8,kn,2,0,"span",10),S.\u0275\u0275template(9,Fn,2,0,"span",10),S.\u0275\u0275text(10),S.\u0275\u0275template(11,Vn,3,0,"div",11),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(12,"form",12),S.\u0275\u0275elementStart(13,"div",13),S.\u0275\u0275elementStart(14,"dw-form-label",14),S.\u0275\u0275text(15,"\u670d\u52a1\u7c7b\u578b\uff1a"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(16,"div",9),S.\u0275\u0275elementStart(17,"dw-select",15),S.\u0275\u0275listener("ngModelChange",function(t){return S.\u0275\u0275restoreView(e),S.\u0275\u0275nextContext().serviceTypeChange(t)}),S.\u0275\u0275template(18,Tn,1,2,"dw-option",16),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275template(19,Ln,9,0,"ng-container",10),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(20,"div",17),S.\u0275\u0275elementStart(21,"div",18),S.\u0275\u0275template(22,Nn,35,4,"div",19),S.\u0275\u0275template(23,Hn,30,6,"div",19),S.\u0275\u0275template(24,ii,47,8,"div",19),S.\u0275\u0275template(25,ai,27,5,"div",19),S.\u0275\u0275elementStart(26,"div",20),S.\u0275\u0275elementStart(27,"div",21),S.\u0275\u0275text(28,"\u4e0a\u4f20\u7167\u7247"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(29,"div",22),S.\u0275\u0275elementStart(30,"div",23),S.\u0275\u0275elementStart(31,"dw-upload",24),S.\u0275\u0275listener("dwFileListChange",function(t){return S.\u0275\u0275restoreView(e),S.\u0275\u0275nextContext().pictures=t})("dwChange",function(){return S.\u0275\u0275restoreView(e),S.\u0275\u0275nextContext().onUploadChange()}),S.\u0275\u0275element(32,"em",25),S.\u0275\u0275elementStart(33,"div",26),S.\u0275\u0275text(34,"\u4e0a\u4f20"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(35,"dw-modal",27),S.\u0275\u0275listener("dwOnCancel",function(){return S.\u0275\u0275restoreView(e),S.\u0275\u0275nextContext().previewVisible=!1}),S.\u0275\u0275template(36,li,1,3,"ng-template",null,28,S.\u0275\u0275templateRefExtractor),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(38,"div",20),S.\u0275\u0275elementStart(39,"div",21),S.\u0275\u0275text(40,"\u4e0a\u4f20\u89c6\u9891"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(41,"div",22),S.\u0275\u0275elementStart(42,"div",23),S.\u0275\u0275elementStart(43,"dw-upload",29),S.\u0275\u0275listener("dwFileListChange",function(t){return S.\u0275\u0275restoreView(e),S.\u0275\u0275nextContext().thumbnailList2=t})("dwChange",function(t){return S.\u0275\u0275restoreView(e),S.\u0275\u0275nextContext().uploadChange(t)}),S.\u0275\u0275elementStart(44,"button",30),S.\u0275\u0275element(45,"em",31),S.\u0275\u0275elementStart(46,"span"),S.\u0275\u0275text(47,"\u4e0a\u4f20\u89c6\u9891"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(48,"div",32),S.\u0275\u0275elementStart(49,"div",33),S.\u0275\u0275template(50,mi,6,8,"ng-container",34),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275template(51,hi,9,2,"div",19),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(52,"div",20),S.\u0275\u0275elementStart(53,"div",21),S.\u0275\u0275text(54,"\u5907\u6ce8"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(55,"div",22),S.\u0275\u0275element(56,"textarea",35),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275template(57,gi,5,3,"div",19),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd()}if(2&e){const e=S.\u0275\u0275reference(37),t=S.\u0275\u0275nextContext();S.\u0275\u0275advance(2),S.\u0275\u0275textInterpolate1(" \u5355\u53f7\uff1a ",t.docInfo.serviceDocNo," "),S.\u0275\u0275advance(2),S.\u0275\u0275textInterpolate1(" \u8bbe\u5907\u540d\u79f0\uff1a ",t.docInfo.productFileName," "),S.\u0275\u0275advance(2),S.\u0275\u0275textInterpolate1(" \u5ba2\u6237\u540d\u79f0\uff1a ",t.docInfo.customerName," "),S.\u0275\u0275advance(2),S.\u0275\u0275property("ngIf","1"===t.docInfo.type),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf","2"===t.docInfo.type),S.\u0275\u0275advance(1),S.\u0275\u0275textInterpolate1(" ",t.docInfo.currentSn," "),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf",!t.isChangeReport),S.\u0275\u0275advance(1),S.\u0275\u0275property("formGroup",t.form),S.\u0275\u0275advance(5),S.\u0275\u0275property("dwDisabled",t.isChangeReport),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngForOf",t.serviceTypes),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf",t.docInfo.installDebugAccept),S.\u0275\u0275advance(3),S.\u0275\u0275property("ngIf","2"===t.docInfo.type),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf",t.docInfo.breakdownCondition),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf",t.docInfo.sparepartChange),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf",t.docInfo.serviceItem&&!t.isChangeReport),S.\u0275\u0275advance(6),S.\u0275\u0275property("dwFileList",t.pictures)("dwShowButton",t.pictures.length<5&&!t.isChangeReport)("dwPreview",t.handlePreview)("dwBeforeUpload",t.beforeUpload)("dwAccept",".png,.jpg")("dwShowUploadList",t.isChangeReport?S.\u0275\u0275pureFunction0(40,fi):S.\u0275\u0275pureFunction0(41,wi)),S.\u0275\u0275advance(4),S.\u0275\u0275property("dwVisible",t.previewVisible)("dwContent",e)("dwFooter",null),S.\u0275\u0275advance(3),S.\u0275\u0275styleMap(S.\u0275\u0275pureFunction1(42,vi,t.thumbnailList2.length?"6px":"20px")),S.\u0275\u0275classMap(t.pictures.length||!t.isChangeReport?"margin-top-14":""),S.\u0275\u0275advance(5),S.\u0275\u0275property("dwCustomRequest",t.customReq)("dwFileList",t.thumbnailList2)("dwShowUploadList",!1)("dwShowButton",t.thumbnailList2.length<3&&!t.isChangeReport)("dwMultiple",!0)("dwDisabled",t.isCheckShow2||t.fileUploadingCount>0)("dwAccept",".mp4"),S.\u0275\u0275advance(1),S.\u0275\u0275property("disabled",t.isCheckShow2||t.fileUploadingCount>0||3==t.thumbnailList2.length),S.\u0275\u0275advance(5),S.\u0275\u0275property("ngClass",S.\u0275\u0275pureFunction1(44,xi,t.isDemoStyle)),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngForOf",t.thumbnailList2),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf",t.docInfo.installDebugAccept),S.\u0275\u0275advance(6),S.\u0275\u0275property("ngIf",t.isChangeReport&&t.form.value.signature&&"null"!=t.form.value.signature||!t.isChangeReport)}}const _i=function(){return{height:"calc(100vh - 155px)",overflow:"auto","padding-top":"0"}};let yi=(()=>{class e{constructor(e,t,n,r,o,l,d,s,c,m,p,u){this.http=e,this.fb=t,this.serviceOrderDetailSrv=n,this.serviceItemSelectService=r,this.message=o,this.modalService=l,this.dwUploadFileMangementService=d,this.dwImageViewerListService=s,this.serviceOrderSrv=c,this.phraseOpenerService=m,this.datePipe=p,this.faultLocationOpenerService=u,this.visibleChanged=new S.EventEmitter,this.isSuperAdmin=!1,this.isChangeReport=!1,this.recycle_unchangeable=!1,this.docInfo={serviceDocId:"",serviceDocNo:"",type:"1",productFileName:"",customerName:"",breakdownCondition:!1,serviceItem:!1,sparepartChange:!1,installDebugAccept:!1,originalSn:"",currentSn:"",depotRepairStatus:"0"},this.product_file_id="",this.service_order_id="",this.service_doc_id="",this.service_order_equipment=[],this.equipments_for_show=[],this.isBreakdownVisible=!1,this.isSparePartVisible=!1,this.isSnVisible=!1,this.breakdowns=[],this.spareParts=[],this.serviceItems=[],this.pictures=[],this.previewImage="",this.previewVisible=!1,this.serviceTypes=[],this.attachmentsList=[],this.need_return_tooltip='\u82e5\u60a8\u60f3\u53d8\u66f4\u539f\u62a5\u544a\u4e2d\u7684"\u9700\u56de\u6536"\u9009\u9879\uff0c\u8bf7\u8054\u7cfb\u7ba1\u7406\u5458\u5904\u7406\u3002',this.underWarrantyList=[],this.serviceDocUnderWarranty=!1,this.service_mode="",this.service_site_id="",this.beforeUpload=(e,t)=>new h.Observable(t=>{const n="image/jpeg"===e.type||"image/png"===e.type;if(!n)return this.message.create("error","\u8bf7\u4e0a\u4f20jpg\u6216png\u683c\u5f0f\u56fe\u7247\uff01"),void t.complete();const i=e.size/1024/1024<=5;if(!i)return this.message.create("error","\u4e0a\u4f20\u6587\u4ef6\u5927\u5c0f\u8d85\u8fc75M\uff01"),void t.complete();t.next(n&&i),t.complete()}),this.handlePreview=e=>(0,i.mG)(this,void 0,void 0,function*(){!e.url&&!e.preview&&(e.preview=yield this.getBase64(e.originFileObj)),console.log("handlePreview",e),this.previewImage=e.url||e.preview,this.previewVisible=!0}),this.beforeUploadFiles=(e,t)=>new h.Observable(t=>{console.log(e);const n=e.name.split("."),i=n[n.length-1].indexOf("xls")>=0||n[n.length-1].indexOf("doc")>=0||n[n.length-1].indexOf("ppt")>=0||n[n.length-1].indexOf("pdf")>=0;if(!i)return this.message.create("error","\u8bf7\u4e0a\u4f20\u6b63\u786e\u683c\u5f0f\u6587\u4ef6\uff01"),void t.complete();const r=e.size/1024/1024<=5;if(!r)return this.message.create("error","\u4e0a\u4f20\u6587\u4ef6\u5927\u5c0f\u8d85\u8fc75M\uff01"),void t.complete();t.next(i&&r),t.complete()}),this.thumbnailList2=[],this.listActionMap2={},this.isCheckShow2=!1,this.isDemoStyle=!1,this.customReq=e=>{const t=e.file;if(!("video/mp4"!==t.type&&"video/avi"!==t.type&&"video/rmvb"!==t.type&&"video/3gp"!==t.type&&"video/flv"!==t.type||t.size/1024/1024>10))return this.serviceOrderSrv.uploadFile(t,!0,null,"",{shrink:"100000",width:"200"}).subscribe(t=>{"success"===t.status?(t.primaryKey="id-"+Math.random().toString(36).substring(2),e.onSuccess(t,e.file,null)):"error"===t.status?e.onError(t,e.file):e.onProgress(t,e.file)},t=>{e.onError(t,e.file)})},this.handlePreview2=e=>this.dwImageViewerListService.previewModal(e,this.thumbnailList2,this.viewerAction2,this.handlePrevious2,this.handleNext2),this.handlePrevious2=e=>this.dwImageViewerListService.previous(this.thumbnailList2,e,this.viewerAction2),this.handleNext2=e=>this.dwImageViewerListService.next(this.thumbnailList2,e,this.viewerAction2),this.handleRemove2=e=>h.Observable.create(t=>{"uploading"===e.status?(this.dwUploadFileMangementService.cancelUploading(e.uid),this.listRemove2(e.uid),t.next("ok"),t.complete()):"error"===e.status?(this.listRemove2(e.uid),t.next("ok"),t.complete()):this.serviceOrderSrv.deleteFile(e.dmcFileId).subscribe(n=>{this.listRemove2(e.uid),t.next("ok"),t.complete()},e=>{console.log(e),t.next("error"),t.complete()})}),this.handleCheck=e=>h.Observable.create(t=>{const n=this.thumbnailList2.length;for(let i=0;i<n;i++)this.thumbnailList2[i].uid===e.uid&&(this.thumbnailList2[i].check=!this.thumbnailList2[i].check);t.next("ok"),t.complete()}),this.handleOtherAction=(e,t)=>h.Observable.create(n=>{switch(t){case"my-action-0":this.message.create("success","uid:"+e.uid+"<br>"+e.name),n.next("ok"),n.complete();break;default:this.message.create("success","uid:"+e.uid+"<br>actionId:"+t),n.next("ok"),n.complete()}}),this.form=this.fb.group({remark:[""],signature:[""],serviceType:["",a.Validators.required],installationDateRange:[""],acceptanceDate:[""]})}initData(e,t,n,i,r){this.product_file_id=e,this.service_order_id=t,this.service_doc_id=n,this.service_mode=i,console.log("service_mode",i),1===i?this.form.get("signature").setValidators([a.Validators.required]):this.form.get("signature").clearValidators(),this.service_site_id=r,this.serviceOrderDetailSrv.getServiceTypes().subscribe(e=>{this.serviceTypes=e}),this.serviceOrderDetailSrv.getSummaryInfo(this.service_doc_id).subscribe(e=>{this.docInfo=e.data,this.serviceDocUnderWarranty=e.data.underWarranty,console.log("serviceDocUnderWarranty",this.serviceDocUnderWarranty),e.data.serviceOrderEquipments.forEach(e=>{e.$state="u",e.product_equipment_list_id=e.equipment_id,e.sn=e.equipment_sn}),this.service_order_equipment=e.data.serviceOrderEquipments,this.getEquipmentsForShow(),this.docInfo.installDebugAccept?(this.form.get("installationDateRange").setValidators([a.Validators.required]),this.form.get("acceptanceDate").setValidators([a.Validators.required])):(this.form.get("installationDateRange").clearValidators(),this.form.get("acceptanceDate").clearValidators()),this.form.get("installationDateRange").reset(),this.form.get("acceptanceDate").reset(),this.form.get("serviceType").setValue(e.data.serviceTypeId),"2"===e.data.statue&&e.data.serviceItem&&this.serviceOrderDetailSrv.getQuotationServiceItems(t).subscribe(e=>{const t=[];e.forEach(e=>{t.push({customer_settlement_price:e.customerSettlementPrice,employee_settlement_price:e.employeeSettlementPrice,process_description:e.processDescription,service_item_code:e.serviceItemCode,service_item_id:parseInt(e.serviceItemId),service_item_name:e.serviceItemName,site_settlement_price:e.siteSettlementPrice})}),this.serviceItems=t})}),this.serviceOrderDetailSrv.getAutoSettings().subscribe(e=>{this.serviceOrderDetailSrv.getCurrentEmployee().subscribe(t=>{const n=t.value.function.split(""),i=1===n.filter(e=>"1"===e).length&&"1"===n[0];this.recycle_unchangeable=e.recycle_unchangeable&&i},e=>{e.hasOwnProperty("error")&&e.error.hasOwnProperty("errorMessage")&&e.error.errorMessage&&this.message.error(e.error.errorMessage)})},e=>{e.hasOwnProperty("error")&&e.error.hasOwnProperty("errorMessage")&&e.error.errorMessage&&this.message.error(e.error.errorMessage)})}getReportInfo(e){this.isChangeReport=!0,this.http.get("restful/service/serviceDoc/ServiceReport/IsSuperAdmin").subscribe(e=>{this.isSuperAdmin=e.data}),this.serviceOrderDetailSrv.getServiceReportInfo(e).subscribe(e=>{console.log(e);const t=e.service_doc;this.form.setValue({remark:t.serviceRemark,signature:t.signature||"null",serviceType:t.serviceTypeId,installationDateRange:t.installationDateBegin?[t.installationDateBegin,t.installationDateEnd]:"",acceptanceDate:t.acceptanceDate||""}),this.breakdowns=e.service_doc_breakdown;const n=[];e.service_doc_partchange.forEach(e=>{n.push({serviceDocPartchangeId:e.serviceDocPartchangeId,origPartId:e.origPartId,origName:e.origPartCode?`(${e.origPartCode})${e.origPartName}${e.origSpecification?"_"+e.origSpecification:""}`:"",underWarranty:e.underWarranty,origQty:e.origQty,needReturn:e.needReturn,newPartId:e.partId,partName:e.partCode?`(${e.partCode})${e.partName}${e.specification?"_"+e.specification:""}`:"",qty:e.qty,newPartSource:e.newPartSource,partsDeliveryDetailsId:e.partsDeliveryDetailsId,sourceId:e.sourceId,writeoffStatus:e.writeoffStatus,origSn:e.origSn,sn:e.sn,snManagement:"1"===e.snManagement,customerSettlementPrice:e.customerSettlementPrice,partIdx:""})}),this.spareParts=n;const i=[];if(e.service_doc_serviceitem.forEach(e=>{i.push({customer_settlement_price:e.customerSettlementPrice,employee_settlement_price:e.employeeSettlementPrice,process_description:e.processDescription,service_item_code:e.serviceItemCode,service_item_id:e.serviceItemId,service_item_name:e.serviceItemName,site_settlement_price:e.siteSettlementPrice})}),this.serviceItems=i,this.initVideoData(e.service_doc.videos),e.service_doc.pictures){const t=e.service_doc.pictures.split(","),n=[];for(const e in t)t[e]&&n.push(new Promise((n,i)=>{this.serviceOrderDetailSrv.getFileById(t[e]).subscribe(i=>{n({uid:t[e],name:t[e],status:"done",url:i.value})})}));Promise.all(n).then(e=>{this.pictures=e})}else this.pictures=[];e.service_doc.annexs&&(e.service_doc.annexs.forEach(e=>{this.attachmentsList.push(e)}),this.attachmentsList.forEach(e=>{e.name=e.annex_name,e.uid=e.annex_id,e.state=""}))})}ngOnInit(){}openSn(){this.isSnVisible=!0}snChangeVisible(e){e&&(this.docInfo.currentSn=e),this.isSnVisible=!1}getConfigValue(){return{modalTitle:"\u9009\u62e9\u8bbe\u5907",modalWidth:"50%",multiSelect:!0,tableIdField:"product_equipment_list_id",tableNameField:"name",returnFields:["product_equipment_list_id","code","name","model","sn","specification","item_group_name"],tablePageSize:10,tableColDefs:[{title:"\u8bbe\u5907\u7f16\u53f7",field:"code"},{title:"\u8bbe\u5907\u540d\u79f0",field:"name"},{title:"\u8bbe\u5907\u578b\u53f7",field:"model"},{title:"\u5e8f\u5217\u53f7",field:"sn"},{title:"\u89c4\u683c",field:"specification"}],tableCustomTag:e=>"("+e.code+")"+e.name,dataSourceUrl:`restful/service/productFile/ProductFile/ProductEquipmentList?productFileId=${this.product_file_id}`,dwHttp:this.http}}openSelect(e){e.forEach(e=>{console.log("element",e),this.equipments_for_show.filter(t=>e.product_equipment_list_id===t.product_equipment_list_id).length||this.service_order_equipment.push(Object.assign({$state:"c"},e))}),this.getEquipmentsForShow()}deleteEquipment(e){"c"===this.service_order_equipment[e].$state?this.service_order_equipment.splice(e,1):this.service_order_equipment[e].$state="d",this.getEquipmentsForShow()}getEquipmentsForShow(){const e=[];this.service_order_equipment.forEach((t,n)=>{"d"!==t.$state&&e.push(Object.assign({index:n},t))}),this.equipments_for_show=e}breakChangeVisible(e){if(e){const t=[],n=[];this.breakdowns.length&&this.breakdowns.forEach(e=>{t.push(e),n.push(e.breakdownId)}),e.forEach(e=>{e.child.forEach(e=>{n.indexOf(e.id)<0&&t.push({breakdownId:e.id,breakdownCode:e.code,breakdownName:e.name,breakdownDescription:"",processingDescription:"",faultPhrase:"",programmePhrase:"",faultLocationName:"",faultLocationId:0})})}),this.breakdowns=t}this.isBreakdownVisible=!1}openSpareParts(){this.isSparePartVisible=!0}partChangeVisible(e){if(console.log("par====>",e),e&&""!==e.partIdx)this.spareParts[e.partIdx].serviceDocPartchangeId=this.spareParts[e.partIdx].serviceDocPartchangeId?this.spareParts[e.partIdx].serviceDocPartchangeId:0,this.spareParts[e.partIdx].origPartId=e.origPartId,this.spareParts[e.partIdx].origName=e.origName,this.spareParts[e.partIdx].needReturn=e.needReturn,this.spareParts[e.partIdx].partIdx=e.partIdx,this.spareParts[e.partIdx].underWarranty=e.underWarranty,this.spareParts[e.partIdx].origQty=e.origQty,this.spareParts[e.partIdx].origSnManagement=e.origSnManagement,this.spareParts[e.partIdx].origSn=e.origSn,this.spareParts[e.partIdx].origReplacementDate=e.origReplacementDate,this.spareParts[e.partIdx].oldPartSource=e.oldPartSource;else if(e){e.serviceDocPartchangeId=0;const t=[];let n=!0,i=0;if(this.spareParts.length){this.spareParts.forEach(n=>{t.push(n),e.snManagement&&e.partsDeliveryDetailsId&&!n.serviceDocPartchangeId&&n.newPartId+""+n.partsDeliveryDetailsId==e.newPartId+""+e.partsDeliveryDetailsId&&(i+=1)});for(const i in t)if(t[i].origPartId+t[i].origSn===e.origPartId+e.origSn&&t[i].newPartId+t[i].sn===e.newPartId+e.sn&&!t[i].serviceDocPartchangeId&&!t[i].snManagement&&t[i].partsDeliveryDetailsId===e.partsDeliveryDetailsId){t[i].qty=t[i].qty===t[i].newOrigQty?t[i].qty:t[i].qty+1,n=!1;break}}if(n)if(e.snManagement&&e.partsDeliveryDetailsId)if(i>=e.newOrigQty)this.message.create("error","\u8be5\u914d\u4ef6\u5df2\u5728\u62a5\u544a\u4e2d\u5168\u90e8\u4f7f\u7528");else for(let r=0;r<e.newOrigQty-i;r++){const n=JSON.parse(JSON.stringify(e));t.push(n)}else t.push(e);this.spareParts=t}this.isSparePartVisible=!1}openServiceItem(){this.serviceItemSelectService.setConfig([],!0),this.serviceItemSelectService.open([]).subscribe(({data:e})=>{console.log(e);const t=[],n=[];this.serviceItems.length&&this.serviceItems.forEach(e=>{t.push(e.service_item_id),n.push(e)}),e.service_item.forEach(e=>{t.indexOf(e.service_item_id)<0&&(e.process_description="",n.push(e))}),this.serviceItems=n})}deleteGrid(e,t){if("equipment"===e){const e=[];this.service_order_equipment.forEach(t=>{e.push(t)}),e.splice(t,1),this.service_order_equipment=e}else if("breakdown"===e){const e=[];this.breakdowns.forEach(t=>{e.push(t)}),e.splice(t,1),this.breakdowns=e}else if("part"===e){const e=[];this.spareParts.forEach(t=>{e.push(t)}),e.splice(t,1),this.spareParts=e}else{const e=[];this.serviceItems.forEach(t=>{e.push(t)}),e.splice(t,1),this.serviceItems=e}}deleteOldPart(e){this.spareParts[e].newPartId?(this.spareParts[e].origPartId=0,this.spareParts[e].origName="",this.spareParts[e].needReturn=!1,this.spareParts[e].underWarranty=!1,this.spareParts[e].partIdx="",this.spareParts[e].origQty=0,this.spareParts[e].origSnManagement=!1,this.spareParts[e].origSn="",this.spareParts[e].origReplacementDate=null):this.deleteGrid("part",e)}onUploadChange(){this.pictures.forEach(e=>{e.status="done"})}getBase64(e){return new Promise((t,n)=>{const i=new FileReader;i.readAsDataURL(e),i.onload=()=>t(i.result),i.onerror=e=>n(e)})}deleteFile(e){this.attachmentsList.splice(e,1)}close(){this.breakdowns=[],this.spareParts=[],this.serviceItems=[],this.pictures=[],this.thumbnailList2=[],this.form.setValue({remark:"",signature:"",serviceType:"",installationDateRange:"",acceptanceDate:""}),this.attachmentsList=[],this.form.get("signature").reset(),this.visibleChanged.emit(!1)}handleOk(){if("2"===this.docInfo.type&&!this.equipments_for_show.length)return void this.message.create("error","\u8bf7\u9009\u62e9\u8bbe\u5907\u4fe1\u606f");if(this.docInfo.breakdownCondition&&!this.breakdowns.length&&!this.docInfo.installDebugAccept)return void this.message.create("error","\u8bf7\u9009\u62e9\u6545\u969c\u89e3\u51b3\u60c5\u51b5");let e=[];if(this.breakdowns.length&&(e=this.breakdowns.filter(e=>!e.breakdownDescription.trim()&&!e.faultPhrase||!e.processingDescription.trim()&&!e.programmePhrase),console.log("errorList",e)),e&&e.length)return void this.message.create("error",e[0].breakdownDescription.trim()||e[0].faultPhrase?"("+e[0].breakdownCode+")"+e[0].breakdownName+" \u672a\u586b\u5199\u5904\u7406\u8bf4\u660e":"("+e[0].breakdownCode+")"+e[0].breakdownName+" \u672a\u586b\u5199\u6545\u969c\u63cf\u8ff0");if(!this.docInfo.installDebugAccept&&0===this.spareParts.length&&0===this.serviceItems.length&&0===this.breakdowns.length)return void this.message.create("error","\u62a5\u544a\u4e2d\uff0c\u6545\u969c\u3001\u96f6\u914d\u4ef6\u3001\u670d\u52a1\u9879\u76ee\u4e0d\u53ef\u540c\u65f6\u4e3a\u7a7a\uff0c\u8bf7\u81f3\u5c11\u586b\u5199\u4e00\u9879\u3002");if(this.docInfo.installDebugAccept&&new Date(this.form.value.acceptanceDate).getTime()<new Date(this.form.value.installationDateRange[1]).getTime())return void this.message.create("error","\u9a8c\u6536\u65e5\u671f\u4e0d\u53ef\u5c0f\u4e8e\u8c03\u8bd5\u65e5\u671f");let t=!0;if(this.spareParts.forEach(e=>{(e.origPartId&&e.origQty<=0||e.newPartId&&e.qty<=0)&&(t=!1)}),t){if(!this.recycle_unchangeable&&this.spareParts){const e=[];this.spareParts.forEach(t=>{t.underWarranty&&!t.needReturn&&(!(this.recycle_unchangeable||!t.origPartId||!t.newPartId||this.isChangeReport&&""===t.partIdx&&t.serviceDocPartchangeId||this.isChangeReport&&"1"===t.writeoffStatus)||this.isChangeReport&&t.serviceDocPartchangeId&&this.isSuperAdmin&&"1"!==t.writeoff_status&&t.newPartSource)&&e.push(t.origName)}),this.underWarrantyList=e,console.log("underWarrantyList",this.underWarrantyList)}if(this.underWarrantyList&&this.underWarrantyList.length)this.modalService.warning({dwTitle:"\u6e29\u99a8\u63d0\u793a",dwContent:`<div>\u4ee5\u4e0b\u914d\u4ef6\u5728\u4fdd\u4fee\u671f\u5185\uff0c\u4f46\u672a\u52fe\u9009\u9700\u56de\u6536\uff0c\u60a8\u786e\u8ba4\u4e0d\u9700\u8fdb\u884c\u56de\u6536\u561b?\u63d0\u4ea4\u540e\u5c06\u65e0\u6cd5\u4fee\u6539\u3002</div>\n                    <div class="underWarranty"><span>\u914d\u4ef6\uff1a</span><span class="underWarranty-blue">${this.underWarrantyList.toString()}</span></div>`,dwOkText:"\u53d6\u6d88",dwOkType:"primary",dwOnCancel:()=>{const e=this.spareParts.filter(e=>e.partsDeliveryDetailsId>0),t=[],n=[];if(e.length){e.forEach(e=>{t.indexOf(e.partsDeliveryDetailsId)>=0?n[t.indexOf(e.partsDeliveryDetailsId)].totalNum+=e.qty:(t.push(e.partsDeliveryDetailsId),n.push({partName:e.partName,maxNum:e.newOrigQty,totalNum:e.qty}))});for(const e of n)if(e.totalNum>e.maxNum)return void this.message.create("error","\u65b0\u96f6\u914d\u4ef6\u201c"+e.partName+"\u201d\u7684\u603b\u6570\u91cf\u4e0d\u53ef\u8d85\u8fc7\u53d1\u8d27\u6570\u91cf"+e.maxNum)}"create"===this.type?this.serviceOrderDetailSrv.checkNotCompletePartsApply(this.service_doc_id).subscribe(e=>{e.data[0].acount>=1?this.modalService.confirm({dwIconType:"exclamation-circle",dwOkText:"\u76f4\u63a5\u63d0\u4ea4",dwTitle:"\u63d0\u793a",dwContent:"\u6b64\u5de5\u5355\u63d0\u4ea4\u7684\u914d\u4ef6\u7533\u8bf7\u5355\u8fd8\u672a\u5ba1\u6838\u786e\u8ba4\uff0c\u82e5\u540e\u7eed\u4ecd\u9700\u53d1\u8d27\uff0c\u8bf7\u5728\u63d0\u4ea4\u62a5\u544a\u524d\u5148\u5b8c\u6210\u5ba1\u6838\uff01",dwOnOk:()=>{this.alertUpdateDate()},dwOnCancel(){}}):this.alertUpdateDate()},e=>{e.hasOwnProperty("error")&&e.error.hasOwnProperty("errorMessage")&&e.error.errorMessage&&this.message.error(e.error.errorMessage)}):this.uploadFile()},dwCancelText:"\u786e\u8ba4",dwOnOk:()=>{}});else{const e=this.spareParts.filter(e=>e.partsDeliveryDetailsId>0),t=[],n=[];if(e.length){e.forEach(e=>{t.indexOf(e.partsDeliveryDetailsId)>=0?n[t.indexOf(e.partsDeliveryDetailsId)].totalNum+=e.qty:(t.push(e.partsDeliveryDetailsId),n.push({partName:e.partName,maxNum:e.newOrigQty,totalNum:e.qty}))});for(const e of n)if(e.totalNum>e.maxNum)return void this.message.create("error","\u65b0\u96f6\u914d\u4ef6\u201c"+e.partName+"\u201d\u7684\u603b\u6570\u91cf\u4e0d\u53ef\u8d85\u8fc7\u53d1\u8d27\u6570\u91cf"+e.maxNum)}"create"===this.type?this.serviceOrderDetailSrv.checkNotCompletePartsApply(this.service_doc_id).subscribe(e=>{e.data[0].acount>=1?this.modalService.confirm({dwIconType:"exclamation-circle",dwOkText:"\u76f4\u63a5\u63d0\u4ea4",dwTitle:"\u63d0\u793a",dwContent:"\u6b64\u5de5\u5355\u63d0\u4ea4\u7684\u914d\u4ef6\u7533\u8bf7\u5355\u8fd8\u672a\u5ba1\u6838\u786e\u8ba4\uff0c\u82e5\u540e\u7eed\u4ecd\u9700\u53d1\u8d27\uff0c\u8bf7\u5728\u63d0\u4ea4\u62a5\u544a\u524d\u5148\u5b8c\u6210\u5ba1\u6838\uff01",dwOnOk:()=>{this.alertUpdateDate()},dwOnCancel(){}}):this.alertUpdateDate()},e=>{e.hasOwnProperty("error")&&e.error.hasOwnProperty("errorMessage")&&e.error.errorMessage&&this.message.error(e.error.errorMessage)}):this.uploadFile()}}else this.message.create("error","\u914d\u4ef6\u6570\u91cf\u9700\u5927\u4e8e0")}alertUpdateDate(){this.docInfo.installDebugAccept?this.serviceOrderDetailSrv.serviceOrderRecordShowAlert(this.product_file_id).subscribe(e=>{if(e.data.length){const t=[];e.data.forEach((e,n)=>{n<3&&t.push(e)}),e.data.length>3&&t.push("..."),this.modalService.confirm({dwIconType:"exclamation-circle",dwOkText:"\u786e\u8ba4\u63d0\u4ea4",dwTitle:"\u63d0\u793a",dwWidth:"500px",dwContent:`\u5f53\u524d\u4ea7\u54c1\u5df2\u8fdb\u884c\u8fc7\u5b89\u88c5\u9a8c\u6536\uff0c\u5de5\u5355\u5355\u53f7\uff1a${t}\uff0c\u672c\u6b21\u62a5\u544a\u63d0\u4ea4\u4f1a\u518d\u6b21\u66f4\u65b0\u8be5\u4ea7\u54c1\u7684\u5b89\u88c5\u548c\u9a8c\u6536\u65e5\u671f\u3002`,dwOnOk:()=>{this.uploadFile()},dwOnCancel(){}})}else this.uploadFile()},e=>{e.hasOwnProperty("error")&&e.error.hasOwnProperty("errorMessage")&&e.error.errorMessage&&this.message.error(e.error.errorMessage)}):this.uploadFile()}uploadFile(){const e=[],t=this.pictures;console.log(t);for(let n=0;n<t.length;n++)e.push(new Promise((e,r)=>(0,i.mG)(this,void 0,void 0,function*(){const i={name:t[n].name,base64String:t[n].thumbUrl?yield this.getBase64(t[n].originFileObj):t[n].url};setTimeout(()=>{this.serviceOrderDetailSrv.uploadImg(i).subscribe(t=>{e(t)})},200)})));Promise.all(e).then(e=>{console.log(e),"create"===this.type?this.create(e.join(",")):this.modify()})}handleCancel(){this.close()}create(e){const t=[];this.service_order_equipment.forEach(e=>{const n=Object.assign({},e);Object.assign(n,{equipment_id:e.product_equipment_list_id,equipment_sn:e.sn,product_file_id:this.product_file_id,product_file_sn:this.docInfo.currentSn}),t.push(n)});const n=[];this.breakdowns.forEach(e=>{n.push({breakdownId:e.breakdownId,processingDescription:e.processingDescription,breakdownDescription:e.breakdownDescription,faultPhrase:e.faultPhrase,programmePhrase:e.programmePhrase,faultLocationId:e.faultLocationId||0})});const r=[];this.serviceItems.forEach(e=>{r.push({serviceItemId:e.service_item_id,processDescription:e.process_description,customerSettlementPrice:e.customer_settlement_price,siteSettlementPrice:e.site_settlement_price,employeeSettlementPrice:e.employee_settlement_price})});const a=[];let o=!0;const l=[];if(this.spareParts.forEach(e=>e.snManagement&&!e.sn?(o=!1,void this.message.create("error","\u65b0\u96f6\u914d\u4ef6\u201c"+e.partName+"\u201d\u7684\u5e8f\u5217\u53f7\u4e0d\u53ef\u4e3a\u7a7a")):e.origSnManagement&&!e.origSn?(o=!1,void this.message.create("error","\u539f\u96f6\u914d\u4ef6\u201c"+e.origName+"\u201d\u7684\u5e8f\u5217\u53f7\u4e0d\u53ef\u4e3a\u7a7a")):e.snManagement&&e.origPartId+e.origSn===e.newPartId+e.sn?(o=!1,void this.message.create("error","\u65b0\u65e7\u96f6\u914d\u4ef6\u4e0d\u53ef\u5b8c\u5168\u76f8\u540c")):(l.push(e.snManagement?e.origPartId+e.origSn+e.newPartId+e.sn:e.origPartId+e.origSn+e.newPartId+e.sn+e.partsDeliveryDetailsId),void a.push({origPartId:e.origPartId,underWarranty:e.underWarranty,origQty:e.origQty,needReturn:e.needReturn,partId:e.newPartId,qty:e.qty,customerSettlementPrice:e.customerSettlementPrice,siteSettlementPrice:e.siteSettlementPrice,employeeSettlementPrice:e.employeeSettlementPrice,newPartSource:e.newPartSource,sourceId:e.partsDeliveryDetailsId,writeoffStatus:0,origSn:e.origSn||"",snManagement:e.snManagement?"1":"0",sn:e.sn,origReplacementDate:e.origReplacementDate,oldPartSource:e.oldPartSource}))),!o)return;if(l.filter((e,t,n)=>n.indexOf(e)===t).length<l.length)return void this.message.create("error","\u8bf7\u52ff\u91cd\u590d\u9009\u62e9\u914d\u4ef6");const d=[],s=[];this.attachmentsList.forEach(e=>(0,i.mG)(this,void 0,void 0,function*(){const t=new FormData;t.append("file",e.originFileObj),s.push(new Promise((e,n)=>{this.serviceOrderDetailSrv.saveAttachments(t).subscribe(t=>{t.success?(d.push(t.data),e(t)):(this.message.create("error","\u9644\u4ef6\u4fdd\u5b58\u5931\u8d25\uff01"),n())},e=>{e.hasOwnProperty("error")&&e.error.hasOwnProperty("errorMessage")&&e.error.errorMessage&&this.message.error(e.error.errorMessage)})}))})),Promise.all(s).then(i=>{const o={serviceReport:JSON.stringify({serviceDocId:this.docInfo.serviceDocId,fileType:this.docInfo.type,productEquipments:t,breakdowns:n,serviceItems:r,serviceDocPartChanges:a,pictures:e,serviceRemark:this.form.value.remark,signature:this.form.value.signature?this.form.value.signature:"",serviceTypeId:this.form.value.serviceType,currentSn:this.docInfo.currentSn,repair_video:this.videos,install:this.docInfo.installDebugAccept?{installationDate:this.form.value.installationDateRange?this.datePipe.transform(this.form.value.installationDateRange[0],"yyyy-MM-dd"):"",installationDateEnd:this.form.value.installationDateRange?this.datePipe.transform(this.form.value.installationDateRange[1],"yyyy-MM-dd"):"",acceptanceDate:this.form.value.acceptanceDate?this.datePipe.transform(this.form.value.acceptanceDate,"yyyy-MM-dd"):"",annex:d.join(",")}:null})};console.log(JSON.parse(o.serviceReport)),this.serviceOrderDetailSrv.createReport(o).subscribe(e=>{this.form.setValue({remark:"",signature:"",serviceType:"",installationDateRange:"",acceptanceDate:""}),this.attachmentsList=[],this.form.get("signature").reset(),this.visibleChanged.emit(!0),this.message.create("success","\u63d0\u4ea4\u6210\u529f\uff01")},e=>{e.hasOwnProperty("error")&&e.error.hasOwnProperty("errorMessage")&&e.error.errorMessage&&this.message.error(e.error.errorMessage)})})}modify(){console.log(this.spareParts);const e=[];this.service_order_equipment.forEach(t=>{const n=Object.assign({},t);Object.assign(n,{equipment_id:t.product_equipment_list_id,equipment_sn:t.sn,product_file_id:this.product_file_id,product_file_sn:this.docInfo.currentSn}),e.push(n)});const t=[];this.breakdowns.forEach(e=>{t.push({breakdownId:e.breakdownId,processingDescription:e.processingDescription,breakdownDescription:e.breakdownDescription,faultPhrase:e.faultPhrase,programmePhrase:e.programmePhrase,faultLocationId:e.faultLocationId||0})});const n=[];this.serviceItems.forEach(e=>{n.push({serviceItemId:e.service_item_id,processDescription:e.process_description,customerSettlementPrice:e.customer_settlement_price,siteSettlementPrice:e.site_settlement_price,employeeSettlementPrice:e.employee_settlement_price})});const r=[];let a=!0;const o=[];if(this.spareParts.forEach(e=>e.snManagement&&!e.sn?(a=!1,void this.message.create("error","\u65b0\u96f6\u914d\u4ef6\u201c"+e.partName+"\u201d\u7684\u5e8f\u5217\u53f7\u4e0d\u53ef\u4e3a\u7a7a")):e.snManagement&&e.origPartId+e.origSn===e.newPartId+e.sn?(a=!1,void this.message.create("error","\u65b0\u65e7\u96f6\u914d\u4ef6\u4e0d\u53ef\u5b8c\u5168\u76f8\u540c")):e.origSnManagement&&!e.origSn?(a=!1,void this.message.create("error","\u539f\u96f6\u914d\u4ef6\u201c"+e.origName+"\u201d\u7684\u5e8f\u5217\u53f7\u4e0d\u53ef\u4e3a\u7a7a")):(o.push(e.snManagement?e.origPartId+e.origSn+e.newPartId+e.sn:e.origPartId+e.origSn+e.newPartId+e.sn+e.serviceDocPartchangeId+e.partsDeliveryDetailsId),void r.push({serviceDocPartchangeId:e.serviceDocPartchangeId,origPartId:e.origPartId,underWarranty:e.underWarranty,origQty:e.origQty,origSn:e.origSn||"",needReturn:e.needReturn,partId:e.newPartId,qty:e.qty,newPartSource:e.newPartSource,customerSettlementPrice:e.customerSettlementPrice,siteSettlementPrice:e.siteSettlementPrice,employeeSettlementPrice:e.employeeSettlementPrice,sourceId:e.partsDeliveryDetailsId,writeoffStatus:0,snManagement:e.snManagement?"1":"0",sn:e.sn,origReplacementDate:e.origReplacementDate,oldPartSource:e.oldPartSource}))),!a)return;if(o.filter((e,t,n)=>n.indexOf(e)===t).length<o.length)return void this.message.create("error","\u8bf7\u52ff\u91cd\u590d\u9009\u62e9\u914d\u4ef6");const l=[],d=[];this.attachmentsList.forEach(e=>(0,i.mG)(this,void 0,void 0,function*(){if(e.annex_id)l.push(e.annex_id);else{const t=new FormData;t.append("file",e.originFileObj),d.push(new Promise((e,n)=>{this.serviceOrderDetailSrv.saveAttachments(t).subscribe(t=>{t.success?(l.push(t.data),e(t)):(this.message.create("error","\u9644\u4ef6\u4fdd\u5b58\u5931\u8d25\uff01"),n())},e=>{e.hasOwnProperty("error")&&e.error.hasOwnProperty("errorMessage")&&e.error.errorMessage&&this.message.error(e.error.errorMessage)})}))}})),Promise.all(d).then(i=>{const a={serviceReport:JSON.stringify({serviceDocId:this.docInfo.serviceDocId,fileType:this.docInfo.type,productEquipments:e,breakdowns:t,serviceItems:n,serviceDocPartChanges:r,serviceRemark:this.form.value.remark,serviceTypeId:this.form.value.serviceType,install:this.docInfo.installDebugAccept?{installationDate:this.form.value.installationDateRange?this.datePipe.transform(this.form.value.installationDateRange[0],"yyyy-MM-dd"):"",installationDateEnd:this.form.value.installationDateRange?this.datePipe.transform(this.form.value.installationDateRange[1],"yyyy-MM-dd"):"",acceptanceDate:this.form.value.acceptanceDate?this.datePipe.transform(this.form.value.acceptanceDate,"yyyy-MM-dd"):"",annex:l.join(",")}:null})};console.log(JSON.parse(a.serviceReport)),this.serviceOrderDetailSrv.modifyReport(a).subscribe(e=>{console.log(e),this.form.setValue({remark:"",signature:"",serviceType:"",installationDateRange:"",acceptanceDate:""}),this.attachmentsList=[],this.form.get("signature").reset(),this.visibleChanged.emit(!0),this.message.create("success","\u63d0\u4ea4\u6210\u529f\uff01")},e=>{e.hasOwnProperty("error")&&e.error.hasOwnProperty("errorMessage")&&e.error.errorMessage&&this.message.error(e.error.errorMessage)})})}openPhrase(e,t){this.phraseOpenerService.setConfig("faultPhrase"===t?"1":"2"),this.phraseOpenerService.open([]).subscribe(n=>{"faultPhrase"===t?this.breakdowns[e].faultPhrase=n.data.common_phrase[0].phrase:this.breakdowns[e].programmePhrase=n.data.common_phrase[0].phrase})}delPhrase(e,t){"faultPhrase"===t?this.breakdowns[e].faultPhrase="":this.breakdowns[e].programmePhrase=""}newQtyChange(e){const t=this.spareParts[e];t.origPartId&&!t.origSnManagement&&(this.spareParts[e].origQty=this.spareParts[e].qty)}serviceTypeChange(e){if(this.serviceTypes.length)for(const t in this.serviceTypes)if(this.serviceTypes[t].service_type_id===e)return this.docInfo.breakdownCondition=this.serviceTypes[t].breakdown_condition,this.docInfo.sparepartChange=this.serviceTypes[t].sparepart_change,this.docInfo.serviceItem=this.serviceTypes[t].service_item,this.docInfo.installDebugAccept=this.serviceTypes[t].install_debug_accept,this.docInfo.breakdownCondition||(this.breakdowns=[]),this.docInfo.sparepartChange||(this.spareParts=[]),this.docInfo.serviceItem||(this.serviceItems=[]),void(this.docInfo.installDebugAccept?(this.form.get("installationDateRange").setValidators([a.Validators.required]),this.form.get("acceptanceDate").setValidators([a.Validators.required])):(this.form.get("installationDateRange").clearValidators(),this.form.get("installationDateRange").reset(),this.form.get("acceptanceDate").clearValidators(),this.form.get("acceptanceDate").reset(),this.attachmentsList=[]))}get fileUploadingCount(){let e=0;return this.thumbnailList2.forEach(t=>{"uploading"===t.status&&(e+=1)}),e}get videos(){const e=[];return this.thumbnailList2.forEach(t=>{e.push(t.response.fileId)}),e.join(",")}uploadChange(e){const t=e.file;if(t.title=t.name,t.dmcFileId=null,t.isAudit=!1,e.event&&e.event.hasOwnProperty("percent")&&(t.percent=e.event.percent),t.response&&(t.url=t.response.shareUrl?t.response.shareUrl:null,t.thumbUrl=t.response.shrinkUrl?t.response.shrinkUrl:null,t.percent=t.response.percent,t.dmcFileId=t.response.fileId),"done"===t.status){t.message="";const e=t.name.split(".");e.length>0&&(t.title=e[0]),this.listActionMap2[t.uid]=Object.assign({},this.listActionDefault2)}const n=this.thumbnailList2.length;for(let i=0;i<n;i++)if(t.uid===this.thumbnailList2[i].uid){this.thumbnailList2[i]=Object.assign({},t);break}if("video/mp4"!==t.type&&"video/avi"!==t.type&&"video/rmvb"!==t.type&&"video/3gp"!==t.type&&"video/flv"!==t.type)return this.message.create("error","\u8bf7\u4e0a\u4f20avi\u30013gp\u3001mp4\u3001flv\u3001rmvb\u683c\u5f0f\u89c6\u9891\uff01"),void this.thumbnailList2.splice(this.thumbnailList2.length-1);t.size/1024/1024>10&&(this.message.create("error","\u4e0a\u4f20\u6587\u4ef6\u5927\u5c0f\u8d85\u8fc710M\uff01"),this.thumbnailList2.splice(this.thumbnailList2.length-1))}cancelUploading(){const e=[];this.thumbnailList2.forEach(t=>{"uploading"===t.status&&(this.dwUploadFileMangementService.cancelUploading(t.uid),e.push(t.uid))})}listRemove2(e){delete this.listActionMap2[e];const t=this.dwImageViewerListService.listRemove(this.thumbnailList2,e);t.isRemove&&this.message.create("success",t.removeItem.name+",\u5220\u9664\u6210\u529f")}initVideoData(e){this.thumbnailList2.splice(0),e.forEach(e=>{this.thumbnailList2.push({uid:e.uid,type:e.type,title:e.titue,name:e.name,size:e.size,url:e.url,status:"done",dmcFileId:e.uid,response:{fileId:e.uid}}),this.isChangeReport&&(this.listActionMap2[e.uid]={dwPreview:{show:!0,title:"\u9884\u89c8"},dwCheck:{show:!1,title:"\u68c0\u67e5"},dwDownload:{show:!1,title:"\u4e0b\u8f7d"},dwRemove:{show:!1,title:"\u5220\u9664"}})})}clearFaultLocation(e){e.faultLocationName="",e.faultLocationId=0}openServiceEmployeeWin(e){this.faultLocationOpenerService.open([]).subscribe(t=>{if(null==t||0===t.length)return;const n=t[0];e.faultLocationName=n.name,e.faultLocationId=n.fault_location_id})}}return e.\u0275fac=function(t){return new(t||e)(S.\u0275\u0275directiveInject(y.DwDapHttpClient),S.\u0275\u0275directiveInject(a.FormBuilder),S.\u0275\u0275directiveInject(o.v),S.\u0275\u0275directiveInject(O.y),S.\u0275\u0275directiveInject(s.DwMessageService),S.\u0275\u0275directiveInject(P.DwModalService),S.\u0275\u0275directiveInject(ot.DwUploadFileMangementService),S.\u0275\u0275directiveInject(d.DwImageViewerListService),S.\u0275\u0275directiveInject(g.R),S.\u0275\u0275directiveInject(at.M),S.\u0275\u0275directiveInject(D.DatePipe),S.\u0275\u0275directiveInject(dt))},e.\u0275cmp=S.\u0275\u0275defineComponent({type:e,selectors:[["app-service-report"]],inputs:{type:"type",visible:"visible"},outputs:{visibleChanged:"visibleChanged"},features:[S.\u0275\u0275ProvidersFeature([O.y,at.M,dt])],decls:8,vars:12,consts:[[3,"dwBodyStyle","dwMaskClosable","dwWidth","dwVisible","dwTitle","dwOkDisabled","dwOkText","dwVisibleChange","dwOnCancel","dwOnOk"],["dwModalContent",""],[3,"visible","isMultyChoose","breakVisibleChanged"],["child1",""],[3,"visible","partStepOneVisible","partVisibleChanged"],["child2",""],[3,"visible","snVisibleChanged"],["child3",""],[1,"title-info"],[1,"item"],[4,"ngIf"],[3,"click",4,"ngIf"],["dw-form","",1,"report_form",3,"formGroup"],[1,"servicetype-info"],["dwRequired","",2,"width","106px","text-align","left"],["required","","formControlName","serviceType",2,"width","100%",3,"dwDisabled","ngModelChange"],[3,"dwLabel","dwValue",4,"ngFor","ngForOf"],[1,"report-content"],[1,"report_form"],["class","box",4,"ngIf"],[1,"box"],[1,"label"],[1,"cont-table"],[1,"clearfix"],["dwAction","https://www.mocky.io/v2/5cc8019d300000980a055e76","dwListType","picture-card",3,"dwFileList","dwShowButton","dwPreview","dwBeforeUpload","dwAccept","dwShowUploadList","dwFileListChange","dwChange"],["dw-icon","","dwType","plus"],[1,"ant-upload-text"],[3,"dwVisible","dwContent","dwFooter","dwOnCancel"],["modalContent",""],["dwAction","",3,"dwCustomRequest","dwFileList","dwShowUploadList","dwShowButton","dwMultiple","dwDisabled","dwAccept","dwFileListChange","dwChange"],["dw-button","",3,"disabled"],["dw-icon","","dwType","upload"],["dw-col","","dwSpan","24"],[1,"ant-upload-list","ant-upload-list-picture-card",2,"margin-left","-8px",3,"ngClass"],[4,"ngFor","ngForOf"],["dw-input","","maxlength","200","placeholder","200\u5b57\u4ee5\u5185","formControlName","remark",2,"width","520px","height","120px"],[3,"click"],["src","../../../../../../assets/img/icon_edit.png","alt","\u7f16\u8f91",1,"action-icon"],["src","../../../../../../assets/img/icon_edit_hover.png","alt","\u7f16\u8f91",1,"action-icon"],[3,"dwLabel","dwValue"],["dwRequired",""],[1,"item",2,"width","240px"],["formControlName","installationDateRange",2,"width","100%"],["formControlName","acceptanceDate"],["dwRequired","",2,"width","106px"],[1,"plus-icon",3,"click"],["dw-icon","","dwType","plus","dwTheme","outline"],[3,"selectedChanged"],["selectOpener",""],[3,"dwData","dwFrontPagination","dwShowPagination"],["dwTable5",""],["dw-tr",""],["dw-th",""],["translate",""],["dw-th","","dwRight","",1,"align-center"],[1,"align-center"],["class","action-grid",4,"ngIf"],[1,"action-grid"],["title","\u5220\u9664",3,"click"],["src","../../../../../../assets/img/icon_delete.png","alt","\u5220\u9664",1,"action-icon"],["src","../../../../../../assets/img/icon_delete_hover.png","alt","\u5220\u9664",1,"action-icon"],[2,"width","106px",3,"dwRequired"],["dwTable",""],["dw-th","","width","144"],["dw-th","","width","160"],["dw-th","","width","200"],["dw-th","","width","136",3,"dwAlign"],["dwSearch","",3,"dwSuffix"],["dw-input","","type","text","readonly","","dw-input","",3,"ngModel","ngModelOptions","ngModelChange"],["suffixServiceEmployeeData",""],["class","choose-phrase",3,"click",4,"ngIf"],["class","phrase",4,"ngIf"],["dw-input","","type","text","maxlength","255",3,"ngModelOptions","ngModel","ngModelChange"],["dw-icon","","class","ant-input-clear-icon","dwTheme","fill","dwType","close-circle",3,"click",4,"ngIf"],["dw-button","","dwType","primary","dwSearch","",3,"click"],["dw-icon","","dwType","search","dwTheme","outline"],["dw-icon","","dwTheme","fill","dwType","close-circle",1,"ant-input-clear-icon",3,"click"],[1,"choose-phrase",3,"click"],[1,"phrase"],["src","../../../../../../assets/img/icon_cancel.png","alt","\u5220\u9664",3,"click"],["dw-button","","dwType","default",1,"plus-icon",3,"click"],[1,"change-old"],["dw-icon","","dwType","ellipsis"],[1,"old-btn",3,"click"],["dwTable2",""],["dw-th","","width","210"],["dw-th","","width","120"],["dw-th","","width","110"],["dw-th","","width","120",3,"dwAlign"],["dw-tooltip","",3,"dwTooltipTitle",4,"ngIf"],["dw-th","","width","130"],["dw-tooltip","",3,"dwTooltipTitle"],["dw-icon","","dwType","info-circle",2,"font-size","16px","color","#0D9DEF"],["dw-button","","dwType","default","style","cursor: pointer;margin-left: 2px;","class","partButton",3,"click",4,"ngIf"],["dw-button","","dwType","default","class","partButton","style","cursor: pointer;margin-left: 4px;",3,"click",4,"ngIf"],["dw-input","",3,"ngModelOptions","ngModel","ngModelChange",4,"ngIf"],[3,"ngModelOptions","ngModel","dwDisabled","dwMin","dwPrecision","ngModelChange"],[3,"dwAlign"],["dw-checkbox","","dwValue","data.origPartId",3,"ngModelOptions","ngModel","dwDisabled","ngModelChange"],[3,"ngModel","ngModelOptions","dwDisabled","dwMin","dwMax","dwPrecision","ngModelChange"],["dw-button","","dwType","default",1,"partButton",2,"cursor","pointer","margin-left","2px",3,"click"],["dw-icon","","dwType","plus-square","dwTheme","outline"],["dw-button","","dwType","default",1,"partButton",2,"cursor","pointer","margin-left","4px",3,"click"],["dw-icon","","dwType","delete","dwTheme","outline"],["dw-input","",3,"ngModelOptions","ngModel","ngModelChange"],["dwTable3",""],["dw-th","","width","136"],["dw-th","","width","264"],[3,"ngModelOptions","ngModel","dwMin","dwStep","dwPrecision","ngModelChange"],["alt","\u7167\u7247",3,"src","ngStyle"],[3,"dwListType","dwFile","dwItemAction","dwDesignTpl","onPreview","onRemove","onCheck","onOtherAction"],["titleTpl",""],["designTpl",""],["class","myTitleTag",4,"ngIf"],[1,"myTitleTag"],["style","margin-bottom: 8px;","dwAction","https://www.mocky.io/v2/5cc8019d300000980a055e76",3,"dwFileList","dwBeforeUpload","dwShowUploadList","dwAccept","dwFileListChange","dwChange",4,"ngIf"],[1,"tip"],["dwAction","https://www.mocky.io/v2/5cc8019d300000980a055e76",2,"margin-bottom","8px",3,"dwFileList","dwBeforeUpload","dwShowUploadList","dwAccept","dwFileListChange","dwChange"],["dw-button",""],["dw-row","",1,"chosen-file"],["dw-col","",1,"type-icon"],["dw-icon","","dwType","paper-clip","dwTheme","outline"],["dw-col","",1,"file-name",3,"title"],["dw-col","",1,"del",3,"click"],["dw-input","","maxlength","10","formControlName","signature",2,"width","340px",3,"required","readonly"]],template:function(e,t){1&e&&(S.\u0275\u0275elementStart(0,"dw-modal",0),S.\u0275\u0275listener("dwVisibleChange",function(e){return t.visible=e})("dwOnCancel",function(){return t.handleCancel()})("dwOnOk",function(){return t.handleOk()}),S.\u0275\u0275template(1,Ci,58,46,"ng-template",1),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(2,"app-breakdown-opener",2,3),S.\u0275\u0275listener("breakVisibleChanged",function(e){return t.breakChangeVisible(e)}),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(4,"app-part-opener",4,5),S.\u0275\u0275listener("partStepOneVisible",function(){return t.openSpareParts()})("partVisibleChanged",function(e){return t.partChangeVisible(e)}),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(6,"app-sn-opener",6,7),S.\u0275\u0275listener("snVisibleChanged",function(e){return t.snChangeVisible(e)}),S.\u0275\u0275elementEnd()),2&e&&(S.\u0275\u0275property("dwBodyStyle",S.\u0275\u0275pureFunction0(11,_i))("dwMaskClosable",!0)("dwWidth",1200)("dwVisible",t.visible)("dwTitle","create"==t.type?"\u586b\u5199\u670d\u52a1\u62a5\u544a":"\u66f4\u6539\u670d\u52a1\u62a5\u544a")("dwOkDisabled",!t.form.valid)("dwOkText","\u63d0\u4ea4"),S.\u0275\u0275advance(2),S.\u0275\u0275property("visible",t.isBreakdownVisible)("isMultyChoose",!0),S.\u0275\u0275advance(2),S.\u0275\u0275property("visible",t.isSparePartVisible),S.\u0275\u0275advance(2),S.\u0275\u0275property("visible",t.isSnVisible))},directives:[P.DwModalComponent,P.DwModalContentDirective,st.Y,xn,In,D.NgIf,a.\u0275NgNoValidate,a.NgControlStatusGroup,L.DwFormDirective,a.FormGroupDirective,T.DwColDirective,L.DwFormLabelComponent,ct.DwSelectComponent,a.RequiredValidator,a.NgControlStatus,a.FormControlName,D.NgForOf,c.DwUploadComponent,R.u,A.DwIconDirective,En.DwButtonComponent,Dn.uG,D.NgClass,B.DwInputDirective,a.DefaultValueAccessor,a.MaxLengthValidator,ct.DwOptionComponent,On.DwDatePickerComponent,On.DwRangePickerComponent,Mn.R,me.DwTableComponent,pe.Ct,me.DwTheadComponent,me.DwTrDirective,me.DwTableCellDirective,me.DwThMeasureDirective,pe.BL,ue.TranslateDirective,me.DwCellFixedDirective,me.DwTbodyComponent,me.DwCellAlignDirective,B.DwInputGroupComponent,B.DwInputGroupWhitSuffixOrPrefixDirective,a.NgModel,mt.DwTooltipDirective,Pn.DwInputNumberComponent,Ie.DwCheckboxComponent,D.NgStyle,d.DwImageViewerListItemComponent,T.DwRowDirective],pipes:[ue.TranslatePipe],styles:[".margin-top-14[_ngcontent-%COMP%]{margin-top:-14px}.title-info[_ngcontent-%COMP%]{height:60px;border-bottom:1px solid #d9d9d9;display:flex;align-items:center}.title-info[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{color:#000000d9;font-size:14px;margin-right:36px;display:flex}.title-info[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]:last-child{margin-right:0}.title-info[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:hover{cursor:pointer}.title-info[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:hover   .action-icon[_ngcontent-%COMP%]{display:none}.title-info[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:hover   .action-icon[_ngcontent-%COMP%]:last-of-type{display:block}.servicetype-info[_ngcontent-%COMP%]{height:60px;margin-bottom:10px;border-bottom:1px solid #d9d9d9;display:flex;align-items:center}.servicetype-info[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{color:#000000d9;font-size:14px;margin-right:36px;width:150px;display:block}.report-content[_ngcontent-%COMP%]{overflow-y:auto}.plus-icon[_ngcontent-%COMP%]{width:48px;height:32px;border:1px solid #d0d0d0;border-radius:4px;background:#f5f5f5;display:flex;align-items:center;justify-content:center;margin-bottom:16px;color:#999;font-size:20px;cursor:pointer}.plus-icon.in-grid[_ngcontent-%COMP%]{display:inline-block;margin:0;text-align:center}.box[_ngcontent-%COMP%]{width:100%;display:flex;margin-bottom:20px}.box[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{width:96px;font-size:14px;text-align:right;white-space:nowrap}.box[_ngcontent-%COMP%]   .cont-table[_ngcontent-%COMP%]{flex:1;position:relative}.box[_ngcontent-%COMP%]   .cont-table[_ngcontent-%COMP%]   .change-old[_ngcontent-%COMP%]{width:52px;height:32px;display:flex;align-items:center;justify-content:center;position:absolute;top:0;right:0;z-index:2;cursor:pointer}.box[_ngcontent-%COMP%]   .cont-table[_ngcontent-%COMP%]   .change-old[_ngcontent-%COMP%]   em[_ngcontent-%COMP%]{font-size:24px}.box[_ngcontent-%COMP%]   .cont-table[_ngcontent-%COMP%]   .change-old[_ngcontent-%COMP%]   .old-btn[_ngcontent-%COMP%]{display:none;width:52px;height:32px;line-height:30px;text-align:center;color:#009def;border:1px solid #e9e9e9;background:#fff;position:absolute;top:24px;right:0;z-index:3}.box[_ngcontent-%COMP%]   .cont-table[_ngcontent-%COMP%]   .change-old[_ngcontent-%COMP%]:hover   .old-btn[_ngcontent-%COMP%]{display:block}.choose-phrase[_ngcontent-%COMP%]{display:inline-block;height:32px;line-height:32px;padding:0 10px;color:#666;background:#eaeaea;font-size:13px;margin-bottom:10px;cursor:pointer}.phrase[_ngcontent-%COMP%]{display:inline-block;height:32px;line-height:32px;padding:0 10px;color:#fff;background:#5ebaef;font-size:13px;margin-bottom:10px}.phrase[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:14px;height:14px;margin-left:5px;vertical-align:-2px;cursor:pointer}.chosen-file[_ngcontent-%COMP%]{margin:8px 0}.tip[_ngcontent-%COMP%]{color:#00000073;font-size:14px;margin-top:8px}.file-name[_ngcontent-%COMP%]{width:200px;margin-left:5px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.del[_ngcontent-%COMP%]{display:none}.chosen-file[_ngcontent-%COMP%]:hover   .del[_ngcontent-%COMP%]{display:block}.chosen-file[_ngcontent-%COMP%]:hover   .del[_ngcontent-%COMP%]:hover   em[_ngcontent-%COMP%]{color:#40a9ff;cursor:pointer}  .underWarranty{margin-top:8px}  .underWarranty .underWarranty-blue{color:#0d9def}.partButton[_ngcontent-%COMP%]{background-color:transparent;padding:0;border:none}"]}),e})();function Si(e,t){if(1&e){const e=S.\u0275\u0275getCurrentView();S.\u0275\u0275elementStart(0,"span",38),S.\u0275\u0275listener("click",function(){S.\u0275\u0275restoreView(e);const t=S.\u0275\u0275nextContext().index;return S.\u0275\u0275nextContext(2).deleteOldPart(t)}),S.\u0275\u0275element(1,"em",39),S.\u0275\u0275elementEnd()}}const bi=function(){return{standalone:!0}};function Ii(e,t){if(1&e){const e=S.\u0275\u0275getCurrentView();S.\u0275\u0275elementStart(0,"input",40),S.\u0275\u0275listener("ngModelChange",function(t){return S.\u0275\u0275restoreView(e),S.\u0275\u0275nextContext().$implicit.origSn=t}),S.\u0275\u0275elementEnd()}if(2&e){const e=S.\u0275\u0275nextContext().$implicit;S.\u0275\u0275property("ngModelOptions",S.\u0275\u0275pureFunction0(2,bi))("ngModel",e.origSn)}}function Ei(e,t){if(1&e&&(S.\u0275\u0275elementStart(0,"span"),S.\u0275\u0275text(1),S.\u0275\u0275elementEnd()),2&e){const e=S.\u0275\u0275nextContext().$implicit;S.\u0275\u0275advance(1),S.\u0275\u0275textInterpolate(e.origSn)}}function Di(e,t){if(1&e){const e=S.\u0275\u0275getCurrentView();S.\u0275\u0275elementStart(0,"input",41),S.\u0275\u0275listener("ngModelChange",function(t){return S.\u0275\u0275restoreView(e),S.\u0275\u0275nextContext().$implicit.sn=t}),S.\u0275\u0275elementEnd()}if(2&e){const e=S.\u0275\u0275nextContext().$implicit;S.\u0275\u0275property("ngModel",e.sn)}}function Oi(e,t){if(1&e){const e=S.\u0275\u0275getCurrentView();S.\u0275\u0275elementStart(0,"tr"),S.\u0275\u0275elementStart(1,"td"),S.\u0275\u0275text(2),S.\u0275\u0275elementStart(3,"span",24),S.\u0275\u0275listener("click",function(){const t=S.\u0275\u0275restoreView(e).index,n=S.\u0275\u0275nextContext(2),i=S.\u0275\u0275reference(3);return i.initData("old",n.product_file_id,n.service_order_id),i.addOrEditOldPart(t,!1),n.openSpareParts()}),S.\u0275\u0275element(4,"em",25),S.\u0275\u0275elementEnd(),S.\u0275\u0275template(5,Si,2,0,"span",26),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(6,"td"),S.\u0275\u0275template(7,Ii,1,3,"input",27),S.\u0275\u0275template(8,Ei,2,1,"span",28),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(9,"td"),S.\u0275\u0275elementStart(10,"dw-input-number",29),S.\u0275\u0275listener("ngModelChange",function(t){return S.\u0275\u0275restoreView(e).$implicit.origQty=t}),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(11,"td",30),S.\u0275\u0275elementStart(12,"label",31),S.\u0275\u0275listener("ngModelChange",function(t){return S.\u0275\u0275restoreView(e).$implicit.needReturn=t}),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(13,"td"),S.\u0275\u0275text(14),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(15,"td"),S.\u0275\u0275template(16,Di,1,1,"input",32),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(17,"td"),S.\u0275\u0275elementStart(18,"dw-input-number",33),S.\u0275\u0275listener("ngModelChange",function(t){return S.\u0275\u0275restoreView(e).$implicit.qty=t})("ngModelChange",function(){const t=S.\u0275\u0275restoreView(e).index;return S.\u0275\u0275nextContext(2).newQtyChange(t)}),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(19,"td"),S.\u0275\u0275elementStart(20,"dw-input-number",29),S.\u0275\u0275listener("ngModelChange",function(t){return S.\u0275\u0275restoreView(e).$implicit.customerSettlementPrice=t}),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(21,"td"),S.\u0275\u0275text(22),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(23,"td"),S.\u0275\u0275elementStart(24,"div",34),S.\u0275\u0275elementStart(25,"div",35),S.\u0275\u0275listener("click",function(){const t=S.\u0275\u0275restoreView(e).index;return S.\u0275\u0275nextContext(2).deleteGrid(t)}),S.\u0275\u0275element(26,"img",36),S.\u0275\u0275element(27,"img",37),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd()}if(2&e){const e=t.$implicit;S.\u0275\u0275advance(2),S.\u0275\u0275textInterpolate1(" ",e.origName," "),S.\u0275\u0275advance(3),S.\u0275\u0275property("ngIf",e.origPartId),S.\u0275\u0275advance(2),S.\u0275\u0275property("ngIf",e.origSnManagement),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf",!e.origSnManagement),S.\u0275\u0275advance(2),S.\u0275\u0275property("ngModel",e.origQty)("dwDisabled",!e.origPartId||e.origSnManagement)("dwMin",1)("dwPrecision",0),S.\u0275\u0275advance(1),S.\u0275\u0275property("dwAlign","center"),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngModel",e.needReturn)("dwDisabled",!e.origPartId),S.\u0275\u0275advance(2),S.\u0275\u0275textInterpolate1(" ",e.partName," "),S.\u0275\u0275advance(2),S.\u0275\u0275property("ngIf",e.snManagement),S.\u0275\u0275advance(2),S.\u0275\u0275property("ngModel",e.qty)("dwDisabled",e.snManagement||!e.newPartId)("dwMin",1)("dwMax",e.newOrigQty)("dwPrecision",0),S.\u0275\u0275advance(2),S.\u0275\u0275property("ngModel",e.customerSettlementPrice)("dwDisabled",!e.newPartId)("dwMin",0)("dwPrecision",2),S.\u0275\u0275advance(2),S.\u0275\u0275textInterpolate1(" ",(e.customerSettlementPrice*e.qty).toFixed(2)," ")}}function Mi(e,t){if(1&e){const e=S.\u0275\u0275getCurrentView();S.\u0275\u0275elementStart(0,"div",4),S.\u0275\u0275elementStart(1,"div",5),S.\u0275\u0275text(2),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(3,"div",5),S.\u0275\u0275text(4),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(5,"div",5),S.\u0275\u0275text(6),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(7,"div",6),S.\u0275\u0275elementStart(8,"div",7),S.\u0275\u0275elementStart(9,"div",8),S.\u0275\u0275elementStart(10,"div",9),S.\u0275\u0275text(11,"\u96f6\u914d\u4ef6\u66f4\u6362"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(12,"div",10),S.\u0275\u0275elementStart(13,"div",11),S.\u0275\u0275listener("click",function(){S.\u0275\u0275restoreView(e);const t=S.\u0275\u0275nextContext();return S.\u0275\u0275reference(3).initData("new",t.product_file_id,t.service_order_id,t.service_mode,t.service_site_id),t.openSpareParts()}),S.\u0275\u0275element(14,"em",12),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(15,"dw-table",13,14),S.\u0275\u0275elementStart(17,"thead"),S.\u0275\u0275elementStart(18,"tr",15),S.\u0275\u0275elementStart(19,"th",16),S.\u0275\u0275elementStart(20,"span",17),S.\u0275\u0275text(21,"\u539f\u96f6\u914d\u4ef6"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(22,"th",18),S.\u0275\u0275elementStart(23,"span",17),S.\u0275\u0275text(24,"\u539f\u5e8f\u5217\u53f7"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(25,"th",18),S.\u0275\u0275elementStart(26,"span",17),S.\u0275\u0275text(27,"\u539f\u4ef6\u6570\u91cf"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(28,"th",19),S.\u0275\u0275elementStart(29,"span",17),S.\u0275\u0275text(30,"\u9700\u56de\u6536"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(31,"th",16),S.\u0275\u0275elementStart(32,"span",17),S.\u0275\u0275text(33,"\u65b0\u96f6\u914d\u4ef6"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(34,"th",18),S.\u0275\u0275elementStart(35,"span",17),S.\u0275\u0275text(36,"\u65b0\u5e8f\u5217\u53f7"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(37,"th",20),S.\u0275\u0275elementStart(38,"span",17),S.\u0275\u0275text(39,"\u66f4\u6362\u6570\u91cf"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(40,"th",20),S.\u0275\u0275elementStart(41,"span",17),S.\u0275\u0275text(42,"\u5355\u4ef7"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(43,"th",20),S.\u0275\u0275elementStart(44,"span",17),S.\u0275\u0275text(45,"\u5408\u8ba1"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(46,"th",21),S.\u0275\u0275elementStart(47,"span",17),S.\u0275\u0275text(48,"\u64cd\u4f5c"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(49,"tbody"),S.\u0275\u0275template(50,Oi,28,23,"tr",22),S.\u0275\u0275elementStart(51,"tr"),S.\u0275\u0275elementStart(52,"td"),S.\u0275\u0275elementStart(53,"div",23),S.\u0275\u0275listener("click",function(){S.\u0275\u0275restoreView(e);const t=S.\u0275\u0275nextContext(),n=S.\u0275\u0275reference(3);return n.initData("old",t.product_file_id,t.service_order_id),n.addOrEditOldPart("",!1),t.openSpareParts()}),S.\u0275\u0275element(54,"em",12),S.\u0275\u0275text(55,"\u6dfb\u52a0\u539f\u96f6\u914d\u4ef6 "),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275element(56,"td"),S.\u0275\u0275element(57,"td"),S.\u0275\u0275element(58,"td"),S.\u0275\u0275element(59,"td"),S.\u0275\u0275element(60,"td"),S.\u0275\u0275element(61,"td"),S.\u0275\u0275element(62,"td"),S.\u0275\u0275element(63,"td"),S.\u0275\u0275element(64,"td"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd()}if(2&e){const e=S.\u0275\u0275reference(16),t=S.\u0275\u0275nextContext();S.\u0275\u0275advance(2),S.\u0275\u0275textInterpolate1(" \u5355\u53f7\uff1a ",t.docInfo.serviceDocNo," "),S.\u0275\u0275advance(2),S.\u0275\u0275textInterpolate1(" \u8bbe\u5907\u540d\u79f0\uff1a ",t.docInfo.productFileName," "),S.\u0275\u0275advance(2),S.\u0275\u0275textInterpolate1(" \u5ba2\u6237\u540d\u79f0\uff1a ",t.docInfo.customerName," "),S.\u0275\u0275advance(9),S.\u0275\u0275property("dwNoResult",null)("dwData",t.spareParts)("dwFrontPagination",!1)("dwShowPagination",!1),S.\u0275\u0275advance(13),S.\u0275\u0275property("dwAlign","center"),S.\u0275\u0275advance(18),S.\u0275\u0275property("dwAlign","center"),S.\u0275\u0275advance(4),S.\u0275\u0275property("ngForOf",e.data)}}const Pi=function(){return{height:"calc(100vh - 155px)",overflow:"auto","padding-top":"0"}};let ki=(()=>{class e{constructor(e,t){this.serviceOrderDetailSrv=e,this.message=t,this.visibleChanged=new S.EventEmitter,this.docInfo={serviceDocId:"",serviceDocNo:"",productFileName:"",customerName:"",breakdownCondition:!1,serviceItem:!1,sparepartChange:!1},this.product_file_id="",this.service_order_id="",this.service_doc_id="",this.service_mode="",this.service_site_id="",this.isSparePartVisible=!1,this.spareParts=[]}initData(e,t,n,i,r){this.product_file_id=e,this.service_order_id=t,this.service_doc_id=n,this.service_mode=i,this.service_site_id=r,this.serviceOrderDetailSrv.getSummaryInfo(this.service_doc_id).subscribe(e=>{this.docInfo=e.data})}openSpareParts(){this.isSparePartVisible=!0}partChangeVisible(e){if(e&&""!==e.partIdx)this.spareParts[e.partIdx].origPartId=e.origPartId,this.spareParts[e.partIdx].origName=e.origName,this.spareParts[e.partIdx].needReturn=e.needReturn,this.spareParts[e.partIdx].partIdx=e.partIdx,this.spareParts[e.partIdx].underWarranty=e.underWarranty,this.spareParts[e.partIdx].origQty=e.origQty,this.spareParts[e.partIdx].origSnManagement=e.origSnManagement,this.spareParts[e.partIdx].origSn=e.origSn;else if(e){const t=[];let n=!0;if(this.spareParts.length){this.spareParts.forEach(e=>{t.push(e)});for(const i in t)if(t[i].origPartId+t[i].origSn===e.origPartId+e.origSn&&t[i].newPartId+t[i].sn===e.newPartId+e.sn){t[i].qty=t[i].qty===t[i].newOrigQty?t[i].qty:t[i].qty+1,n=!1;break}}n&&t.push(e),this.spareParts=t}this.isSparePartVisible=!1}newQtyChange(e){const t=this.spareParts[e];t.origPartId&&!t.origSnManagement&&(this.spareParts[e].origQty=this.spareParts[e].qty)}deleteGrid(e){const t=[];this.spareParts.forEach(e=>{t.push(e)}),t.splice(e,1),this.spareParts=t}deleteOldPart(e){this.spareParts[e].newPartId?(this.spareParts[e].origPartId=0,this.spareParts[e].origName="",this.spareParts[e].needReturn=!1,this.spareParts[e].underWarranty=!1,this.spareParts[e].partIdx="",this.spareParts[e].origQty=0,this.spareParts[e].origSnManagement=!1,this.spareParts[e].origSn=""):this.deleteGrid(e)}close(){this.spareParts=[],this.visibleChanged.emit(!1)}handleOk(){0!==this.spareParts.length?this.create():this.message.create("error","\u8bf7\u9009\u62e9\u96f6\u914d\u4ef6\u66f4\u6362")}handleCancel(){this.close()}create(){const e=[];let t=!0;const n=[];this.spareParts.forEach(i=>i.snManagement&&!i.sn?(t=!1,void this.message.create("error","\u65b0\u96f6\u914d\u4ef6\u201c"+i.partName+"\u201d\u7684\u5e8f\u5217\u53f7\u4e0d\u53ef\u4e3a\u7a7a")):i.origSnManagement&&!i.origSn?(t=!1,void this.message.create("error","\u539f\u96f6\u914d\u4ef6\u201c"+i.origName+"\u201d\u7684\u5e8f\u5217\u53f7\u4e0d\u53ef\u4e3a\u7a7a")):i.snManagement&&i.origPartId+i.origSn===i.newPartId+i.sn?(t=!1,void this.message.create("error","\u65b0\u65e7\u96f6\u914d\u4ef6\u4e0d\u53ef\u5b8c\u5168\u76f8\u540c")):(n.push(i.origPartId+i.origSn+i.newPartId+i.sn),void e.push({origPartId:i.origPartId,underWarranty:i.underWarranty,origQty:i.origQty,needReturn:i.needReturn,partId:i.newPartId,qty:i.qty,customerSettlementPrice:i.customerSettlementPrice,siteSettlementPrice:i.siteSettlementPrice,employeeSettlementPrice:i.employeeSettlementPrice,newPartSource:i.partsDeliveryDetailsId?2:1,sourceId:i.partsDeliveryDetailsId,writeoffStatus:0,origSn:i.origSn||"",snManagement:i.snManagement?"1":"0",sn:i.sn})));const i={serviceReport:JSON.stringify({serviceDocId:this.docInfo.serviceDocId,serviceDocPartChanges:e})};t&&(n.filter((e,t,n)=>n.indexOf(e)===t).length<n.length?this.message.create("error","\u8bf7\u52ff\u91cd\u590d\u9009\u62e9\u914d\u4ef6"):this.serviceOrderDetailSrv.serviceDocPartChanges(i).subscribe(e=>{this.visibleChanged.emit(!0),this.message.create("success","\u63d0\u4ea4\u6210\u529f\uff01")},e=>{e.hasOwnProperty("error")&&e.error.hasOwnProperty("errorMessage")&&e.error.errorMessage&&this.message.error(e.error.errorMessage)}))}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)(S.\u0275\u0275directiveInject(o.v),S.\u0275\u0275directiveInject(s.DwMessageService))},e.\u0275cmp=S.\u0275\u0275defineComponent({type:e,selectors:[["app-add-partchange-record"]],inputs:{visible:"visible"},outputs:{visibleChanged:"visibleChanged"},decls:4,vars:8,consts:[[3,"dwBodyStyle","dwMaskClosable","dwWidth","dwVisible","dwTitle","dwOkText","dwVisibleChange","dwOnCancel","dwOnOk"],["dwModalContent",""],[3,"visible","partStepOneVisible","partVisibleChanged"],["child2",""],[1,"title-info"],[1,"item"],[1,"report-content"],[1,"report_form"],[1,"box"],[1,"label"],[1,"cont-table"],[1,"plus-icon",3,"click"],["dw-icon","","dwType","plus","dwTheme","outline"],[3,"dwNoResult","dwData","dwFrontPagination","dwShowPagination"],["dwTable2",""],["dw-tr",""],["dw-th","","width","200"],["translate",""],["dw-th","","width","120"],["dw-th","","width","120",3,"dwAlign"],["dw-th","","width","184"],["dw-th","","width","136",3,"dwAlign"],[4,"ngFor","ngForOf"],[2,"cursor","pointer",3,"click"],[2,"cursor","pointer","margin-left","2px",3,"click"],["dw-icon","","dwType","plus-square","dwTheme","outline"],["style","cursor: pointer;margin-left: 4px;",3,"click",4,"ngIf"],["dw-input","",3,"ngModelOptions","ngModel","ngModelChange",4,"ngIf"],[4,"ngIf"],[3,"ngModel","dwDisabled","dwMin","dwPrecision","ngModelChange"],[3,"dwAlign"],["dw-checkbox","","dwValue","data.origPartId",3,"ngModel","dwDisabled","ngModelChange"],["dw-input","",3,"ngModel","ngModelChange",4,"ngIf"],[3,"ngModel","dwDisabled","dwMin","dwMax","dwPrecision","ngModelChange"],[1,"action-grid"],["title","\u5220\u9664",3,"click"],["src","../../../../../../assets/img/icon_delete.png","alt","\u5220\u9664",1,"action-icon"],["src","../../../../../../assets/img/icon_delete_hover.png","alt","\u5220\u9664",1,"action-icon"],[2,"cursor","pointer","margin-left","4px",3,"click"],["dw-icon","","dwType","delete","dwTheme","outline"],["dw-input","",3,"ngModelOptions","ngModel","ngModelChange"],["dw-input","",3,"ngModel","ngModelChange"]],template:function(e,t){1&e&&(S.\u0275\u0275elementStart(0,"dw-modal",0),S.\u0275\u0275listener("dwVisibleChange",function(e){return t.visible=e})("dwOnCancel",function(){return t.handleCancel()})("dwOnOk",function(){return t.handleOk()}),S.\u0275\u0275template(1,Mi,65,10,"ng-template",1),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(2,"app-part-opener",2,3),S.\u0275\u0275listener("partStepOneVisible",function(){return t.openSpareParts()})("partVisibleChanged",function(e){return t.partChangeVisible(e)}),S.\u0275\u0275elementEnd()),2&e&&(S.\u0275\u0275property("dwBodyStyle",S.\u0275\u0275pureFunction0(7,Pi))("dwMaskClosable",!0)("dwWidth",992)("dwVisible",t.visible)("dwTitle","\u8865\u5f55\u96f6\u914d\u4ef6\u66f4\u6362")("dwOkText","\u4fdd\u5b58"),S.\u0275\u0275advance(2),S.\u0275\u0275property("visible",t.isSparePartVisible))},directives:[P.DwModalComponent,P.DwModalContentDirective,xn,R.u,A.DwIconDirective,me.DwTableComponent,pe.Ct,me.DwTheadComponent,me.DwTrDirective,me.DwTableCellDirective,me.DwThMeasureDirective,pe.BL,ue.TranslateDirective,me.DwCellAlignDirective,me.DwTbodyComponent,D.NgForOf,D.NgIf,Pn.DwInputNumberComponent,a.NgControlStatus,a.NgModel,Ie.DwCheckboxComponent,B.DwInputDirective,a.DefaultValueAccessor],styles:[".title-info[_ngcontent-%COMP%]{height:60px;margin-bottom:20px;border-bottom:1px solid #d9d9d9;display:flex;align-items:center}.title-info[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{color:#000000d9;font-size:14px;margin-right:36px}.title-info[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]:last-child{margin-right:0}.report-content[_ngcontent-%COMP%]{overflow-y:auto}.plus-icon[_ngcontent-%COMP%]{width:48px;height:32px;border:1px solid #d0d0d0;border-radius:4px;background:#f5f5f5;display:flex;align-items:center;justify-content:center;margin-bottom:16px;color:#999;font-size:20px;cursor:pointer}.plus-icon.in-grid[_ngcontent-%COMP%]{display:inline-block;margin:0;text-align:center}.box[_ngcontent-%COMP%]{width:100%;display:flex;margin-bottom:20px}.box[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{width:86px;font-size:14px;text-align:right;white-space:nowrap}.box[_ngcontent-%COMP%]   .cont-table[_ngcontent-%COMP%]{flex:1}"]}),e})();function Fi(e,t){if(1&e&&(S.\u0275\u0275elementContainerStart(0),S.\u0275\u0275elementStart(1,"tr",10),S.\u0275\u0275elementStart(2,"td"),S.\u0275\u0275text(3),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(4,"td"),S.\u0275\u0275text(5),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(6,"td"),S.\u0275\u0275text(7),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(8,"td"),S.\u0275\u0275text(9),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(10,"td"),S.\u0275\u0275text(11),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(12,"td"),S.\u0275\u0275text(13),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(14,"td",11),S.\u0275\u0275text(15),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(16,"td"),S.\u0275\u0275text(17),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementContainerEnd()),2&e){const e=t.$implicit;S.\u0275\u0275advance(3),S.\u0275\u0275textInterpolate1(" ",e.code," "),S.\u0275\u0275advance(2),S.\u0275\u0275textInterpolate1(" ",e.name," "),S.\u0275\u0275advance(2),S.\u0275\u0275textInterpolate1(" ",e.specification," "),S.\u0275\u0275advance(2),S.\u0275\u0275textInterpolate1(" ",e.model," "),S.\u0275\u0275advance(2),S.\u0275\u0275textInterpolate1(" ",e.item_group_name," "),S.\u0275\u0275advance(2),S.\u0275\u0275textInterpolate1(" ",e.sn," "),S.\u0275\u0275advance(2),S.\u0275\u0275textInterpolate1(" ",e.quantity," "),S.\u0275\u0275advance(2),S.\u0275\u0275textInterpolate1(" ",e.remark," ")}}function Vi(e,t){if(1&e&&(S.\u0275\u0275elementStart(0,"dw-table",2,3),S.\u0275\u0275elementStart(2,"thead"),S.\u0275\u0275elementStart(3,"tr",4),S.\u0275\u0275elementStart(4,"th",5),S.\u0275\u0275elementStart(5,"span",6),S.\u0275\u0275text(6,"\u8bbe\u5907\u7f16\u53f7"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(7,"th",5),S.\u0275\u0275elementStart(8,"span",6),S.\u0275\u0275text(9,"\u8bbe\u5907\u540d\u79f0"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(10,"th",5),S.\u0275\u0275elementStart(11,"span",6),S.\u0275\u0275text(12,"\u89c4\u683c"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(13,"th",5),S.\u0275\u0275elementStart(14,"span",6),S.\u0275\u0275text(15,"\u578b\u53f7"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(16,"th",7),S.\u0275\u0275elementStart(17,"span",6),S.\u0275\u0275text(18,"\u5206\u7c7b"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(19,"th",5),S.\u0275\u0275elementStart(20,"span",6),S.\u0275\u0275text(21,"\u5e8f\u5217\u53f7"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(22,"th",8),S.\u0275\u0275elementStart(23,"span",6),S.\u0275\u0275text(24,"\u6570\u91cf"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(25,"th",5),S.\u0275\u0275elementStart(26,"span",6),S.\u0275\u0275text(27,"\u5907\u6ce8"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(28,"tbody"),S.\u0275\u0275template(29,Fi,18,8,"ng-container",9),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd()),2&e){const e=S.\u0275\u0275reference(1),t=S.\u0275\u0275nextContext();S.\u0275\u0275property("dwData",t.product_equipment_list),S.\u0275\u0275advance(29),S.\u0275\u0275property("ngForOf",e.data)}}const Ti=function(){return{"padding-bottom":"24px"}};let Li=(()=>{class e{constructor(e){this.message=e,this.productInfo={},this.product_equipment_list=[],this.visibleChanged=new S.EventEmitter}initData(e,t){this.productInfo=e,this.product_equipment_list=t}close(){this.visibleChanged.emit(null)}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)(S.\u0275\u0275directiveInject(s.DwMessageService))},e.\u0275cmp=S.\u0275\u0275defineComponent({type:e,selectors:[["app-product-equipments"]],inputs:{visible:"visible"},outputs:{visibleChanged:"visibleChanged"},decls:2,vars:7,consts:[[3,"dwBodyStyle","dwMaskClosable","dwWidth","dwVisible","dwTitle","dwFooter","dwVisibleChange","dwOnCancel"],["dwModalContent",""],[3,"dwData"],["dwTable",""],["dw-tr",""],["dw-th","","width","100"],["translate",""],["dw-th","","width","90"],["dw-th","","width","70",1,"align-right"],[4,"ngFor","ngForOf"],["dw-tbody-tr",""],[1,"align-right"]],template:function(e,t){1&e&&(S.\u0275\u0275elementStart(0,"dw-modal",0),S.\u0275\u0275listener("dwVisibleChange",function(e){return t.visible=e})("dwOnCancel",function(){return t.close()}),S.\u0275\u0275template(1,Vi,30,2,"ng-template",1),S.\u0275\u0275elementEnd()),2&e&&(S.\u0275\u0275propertyInterpolate("dwTitle","\u8bbe\u5907\u4fe1\u606f("+t.productInfo.product_file_name+" "+t.productInfo.product_file_code+")"),S.\u0275\u0275property("dwBodyStyle",S.\u0275\u0275pureFunction0(6,Ti))("dwMaskClosable",!0)("dwWidth",860)("dwVisible",t.visible)("dwFooter",null))},directives:[P.DwModalComponent,P.DwModalContentDirective,me.DwTableComponent,pe.Ct,me.DwTheadComponent,me.DwTrDirective,me.DwTableCellDirective,me.DwThMeasureDirective,pe.BL,ue.TranslateDirective,me.DwTbodyComponent,D.NgForOf],styles:[""]}),e})();var Ri=n(80419),Ai=n(37568),Ni=n(64840),$i=n(45907),ji=n(48005),zi=n(57252);const Bi=["productFileChild"];function qi(e,t){if(1&e){const e=S.\u0275\u0275getCurrentView();S.\u0275\u0275elementContainerStart(0),S.\u0275\u0275elementStart(1,"div",119),S.\u0275\u0275elementStart(2,"a",120),S.\u0275\u0275listener("click",function(){return S.\u0275\u0275restoreView(e),S.\u0275\u0275nextContext().returnToList()}),S.\u0275\u0275element(3,"img",121),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(4,"h2",122),S.\u0275\u0275elementStart(5,"span",123),S.\u0275\u0275text(6,"\u670d\u52a1\u5de5\u5355\u8be6\u60c5"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275element(7,"dw-divider"),S.\u0275\u0275elementContainerEnd()}}function Wi(e,t){if(1&e&&(S.\u0275\u0275elementStart(0,"div",124),S.\u0275\u0275text(1),S.\u0275\u0275elementEnd()),2&e){const e=S.\u0275\u0275nextContext();S.\u0275\u0275advance(1),S.\u0275\u0275textInterpolate1(" ",e.serviceOrderBaseInfo.fault_phrase," ")}}function Gi(e,t){if(1&e&&(S.\u0275\u0275elementStart(0,"span"),S.\u0275\u0275text(1),S.\u0275\u0275elementEnd()),2&e){const e=S.\u0275\u0275nextContext();S.\u0275\u0275advance(1),S.\u0275\u0275textInterpolate1("(",e.serviceOrderBaseInfo.channel_explanation,")")}}function Ui(e,t){1&e&&(S.\u0275\u0275elementContainerStart(0),S.\u0275\u0275text(1," \u670d\u52a1\u65b9\u5f0f: \u4e0a\u95e8\u670d\u52a1 "),S.\u0275\u0275elementContainerEnd())}function Hi(e,t){1&e&&(S.\u0275\u0275elementContainerStart(0),S.\u0275\u0275text(1," \u670d\u52a1\u65b9\u5f0f: \u8fdc\u7a0b\u670d\u52a1 "),S.\u0275\u0275elementContainerEnd())}function Xi(e,t){if(1&e&&(S.\u0275\u0275elementStart(0,"dw-form-item"),S.\u0275\u0275elementStart(1,"dw-form-control",7),S.\u0275\u0275template(2,Ui,2,0,"ng-container",1),S.\u0275\u0275template(3,Hi,2,0,"ng-container",1),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd()),2&e){const e=S.\u0275\u0275nextContext();S.\u0275\u0275advance(1),S.\u0275\u0275property("dwSm",18)("dwXs",24),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf",1===e.service_mode),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf",2===e.service_mode)}}const Qi=function(){return{width:"100%"}};function Ki(e,t){if(1&e&&S.\u0275\u0275element(0,"img",125),2&e){const e=S.\u0275\u0275nextContext();S.\u0275\u0275property("src",e.previewImage,S.\u0275\u0275sanitizeUrl)("ngStyle",S.\u0275\u0275pureFunction0(2,Qi))}}function Ji(e,t){if(1&e&&(S.\u0275\u0275elementStart(0,"div"),S.\u0275\u0275elementStart(1,"a"),S.\u0275\u0275text(2),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd()),2&e){const e=S.\u0275\u0275nextContext().$implicit;S.\u0275\u0275advance(2),S.\u0275\u0275textInterpolate(e.title)}}function Zi(e,t){if(1&e&&(S.\u0275\u0275elementContainerStart(0),S.\u0275\u0275elementStart(1,"dw-image-viewer-list-item",126),S.\u0275\u0275template(2,Ji,3,1,"ng-template",null,127,S.\u0275\u0275templateRefExtractor),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementContainerEnd()),2&e){const e=t.$implicit,n=S.\u0275\u0275nextContext();S.\u0275\u0275advance(1),S.\u0275\u0275property("dwListType","picture-card")("dwFile",e)("dwItemAction",n.listActionMap2[e.uid])("onPreview",n.handlePreview2)}}function Yi(e,t){if(1&e&&S.\u0275\u0275element(0,"img",143),2&e){const e=S.\u0275\u0275nextContext(2).$implicit;S.\u0275\u0275property("src",e.file_context[0],S.\u0275\u0275sanitizeUrl)}}function er(e,t){1&e&&S.\u0275\u0275element(0,"img",144)}function tr(e,t){if(1&e&&(S.\u0275\u0275elementStart(0,"div",133),S.\u0275\u0275elementStart(1,"div",134),S.\u0275\u0275template(2,Yi,1,1,"img",135),S.\u0275\u0275template(3,er,1,0,"img",136),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(4,"div",137),S.\u0275\u0275elementStart(5,"div",138),S.\u0275\u0275text(6),S.\u0275\u0275elementStart(7,"span"),S.\u0275\u0275text(8),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(9,"div",139),S.\u0275\u0275elementStart(10,"div",140),S.\u0275\u0275text(11,"\u5e8f\u5217\u53f7\uff1a"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(12,"div",141),S.\u0275\u0275text(13),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(14,"div",139),S.\u0275\u0275elementStart(15,"div",140),S.\u0275\u0275text(16,"\u578b\u53f7\uff1a"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(17,"div",141),S.\u0275\u0275text(18),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(19,"div",139),S.\u0275\u0275elementStart(20,"div",140),S.\u0275\u0275text(21,"\u89c4\u683c\uff1a"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(22,"div",141),S.\u0275\u0275text(23),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(24,"div",139),S.\u0275\u0275elementStart(25,"div",140),S.\u0275\u0275text(26,"\u6570\u91cf\uff1a"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(27,"div",141),S.\u0275\u0275text(28),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(29,"div",142),S.\u0275\u0275text(30,"\u62a5\u4fee"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd()),2&e){const e=S.\u0275\u0275nextContext().$implicit;S.\u0275\u0275advance(2),S.\u0275\u0275property("ngIf",e.file_context&&e.file_context[0]),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf",!e.file_context||!e.file_context[0]),S.\u0275\u0275advance(3),S.\u0275\u0275textInterpolate1(" ",e.name,""),S.\u0275\u0275advance(2),S.\u0275\u0275textInterpolate(e.code),S.\u0275\u0275advance(5),S.\u0275\u0275textInterpolate(e.sn),S.\u0275\u0275advance(5),S.\u0275\u0275textInterpolate(e.model),S.\u0275\u0275advance(5),S.\u0275\u0275textInterpolate(e.specification),S.\u0275\u0275advance(5),S.\u0275\u0275textInterpolate(e.quantity)}}function nr(e,t){if(1&e&&(S.\u0275\u0275elementContainerStart(0),S.\u0275\u0275template(1,tr,31,8,"div",132),S.\u0275\u0275elementContainerEnd()),2&e){const e=t.$implicit;S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf",1===e.is_repair)}}function ir(e,t){if(1&e){const e=S.\u0275\u0275getCurrentView();S.\u0275\u0275elementStart(0,"dw-tab",128),S.\u0275\u0275elementStart(1,"div",129),S.\u0275\u0275listener("click",function(){S.\u0275\u0275restoreView(e);const t=S.\u0275\u0275nextContext();return S.\u0275\u0275reference(389).initData(t.serviceOrderBaseInfo,t.product_equipment_list),t.searchEquipments()}),S.\u0275\u0275element(2,"em",130),S.\u0275\u0275text(3,"\u67e5\u8be2\u4ea7\u7ebf/\u9879\u76ee\u8bbe\u5907\u6e05\u5355 "),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(4,"div",131),S.\u0275\u0275template(5,nr,2,1,"ng-container",22),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd()}if(2&e){const e=S.\u0275\u0275nextContext();S.\u0275\u0275advance(5),S.\u0275\u0275property("ngForOf",e.product_equipment_list)}}function rr(e,t){if(1&e&&(S.\u0275\u0275elementStart(0,"div",139),S.\u0275\u0275text(1),S.\u0275\u0275pipe(2,"date"),S.\u0275\u0275elementEnd()),2&e){const e=S.\u0275\u0275nextContext().$implicit;S.\u0275\u0275advance(1),S.\u0275\u0275textInterpolate(S.\u0275\u0275pipeBind2(2,1,e.field_value,"yyyy-MM-dd"))}}function ar(e,t){if(1&e&&(S.\u0275\u0275elementStart(0,"div",139),S.\u0275\u0275text(1),S.\u0275\u0275elementEnd()),2&e){const e=S.\u0275\u0275nextContext().$implicit;S.\u0275\u0275advance(1),S.\u0275\u0275textInterpolate(e.field_value)}}function or(e,t){if(1&e&&(S.\u0275\u0275elementStart(0,"div",147),S.\u0275\u0275elementStart(1,"div",148),S.\u0275\u0275elementStart(2,"div",149),S.\u0275\u0275text(3),S.\u0275\u0275elementEnd(),S.\u0275\u0275template(4,rr,3,4,"div",42),S.\u0275\u0275template(5,ar,2,1,"div",42),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd()),2&e){const e=t.$implicit;S.\u0275\u0275advance(3),S.\u0275\u0275textInterpolate1("",e.field_label,"\uff1a"),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf","DATEPICKER"===e.field_type),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf","DATEPICKER"!==e.field_type)}}function lr(e,t){if(1&e&&(S.\u0275\u0275elementStart(0,"dw-tab",145),S.\u0275\u0275elementStart(1,"div",6),S.\u0275\u0275template(2,or,6,3,"div",146),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd()),2&e){const e=S.\u0275\u0275nextContext();S.\u0275\u0275advance(2),S.\u0275\u0275property("ngForOf",e.custFields)}}function dr(e,t){if(1&e){const e=S.\u0275\u0275getCurrentView();S.\u0275\u0275elementStart(0,"div",160),S.\u0275\u0275elementStart(1,"dw-upload",161),S.\u0275\u0275listener("dwFileListChange",function(t){return S.\u0275\u0275restoreView(e),S.\u0275\u0275nextContext(2).technologyList=t})("dwChange",function(t){return S.\u0275\u0275restoreView(e),S.\u0275\u0275nextContext(2).handleFileChange(t)}),S.\u0275\u0275elementStart(2,"button",162),S.\u0275\u0275element(3,"em",163),S.\u0275\u0275text(4,"\u4e0a\u4f20\u6587\u4ef6 "),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(5,"div",142),S.\u0275\u0275text(6,"\u652f\u6301\u6269\u5c55\u540d\uff1a.doc .docx .pdf .xlsx .xls .ppt .pptx "),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd()}if(2&e){const e=S.\u0275\u0275nextContext(2);S.\u0275\u0275property("disabled",e.technologyList.length>=5),S.\u0275\u0275advance(1),S.\u0275\u0275property("dwFileList",e.technologyList)("dwBeforeUpload",e.beforeUploadFiles)("dwShowUploadList",!1)("dwAccept",".doc,.docx,.pdf,.xls,.xlsx,.ppt"),S.\u0275\u0275advance(1),S.\u0275\u0275property("disabled",e.technologyList.length>=5||"disabled"===e.uploadatecdocs)}}function sr(e,t){1&e&&S.\u0275\u0275element(0,"img",175)}function cr(e,t){1&e&&S.\u0275\u0275element(0,"img",176)}function mr(e,t){1&e&&S.\u0275\u0275element(0,"img",177)}function pr(e,t){1&e&&S.\u0275\u0275element(0,"img",178)}function ur(e,t){if(1&e){const e=S.\u0275\u0275getCurrentView();S.\u0275\u0275elementStart(0,"button",183),S.\u0275\u0275listener("click",function(){S.\u0275\u0275restoreView(e);const t=S.\u0275\u0275nextContext(2),n=t.index,i=t.$implicit;return S.\u0275\u0275nextContext(2).deleteFile(n,i.file_info_id)}),S.\u0275\u0275element(1,"em",184),S.\u0275\u0275text(2," \u5220\u9664 "),S.\u0275\u0275elementEnd()}if(2&e){const e=S.\u0275\u0275nextContext(4);S.\u0275\u0275propertyInterpolate("angularticsLabel",e.userInfo.tenantId+","+e.userInfo.userId),S.\u0275\u0275property("dwType","defult")("dwActionId","deletetecdocs")("dwDefaultAuthorized","disabled")("angularticsCategory","\u670d\u52a1\u5de5\u5355")}}function hr(e,t){if(1&e){const e=S.\u0275\u0275getCurrentView();S.\u0275\u0275elementStart(0,"div",179),S.\u0275\u0275elementStart(1,"button",180),S.\u0275\u0275listener("click",function(){S.\u0275\u0275restoreView(e);const t=S.\u0275\u0275nextContext().$implicit;return S.\u0275\u0275nextContext(2).downloadTechnogyFile(t.id)}),S.\u0275\u0275element(2,"em",181),S.\u0275\u0275text(3," \u4e0b\u8f7d "),S.\u0275\u0275elementEnd(),S.\u0275\u0275template(4,ur,3,5,"button",182),S.\u0275\u0275elementEnd()}if(2&e){const e=S.\u0275\u0275nextContext(3);S.\u0275\u0275advance(1),S.\u0275\u0275property("dwType","defult"),S.\u0275\u0275advance(3),S.\u0275\u0275property("ngIf",e.serviceOrderCurrentLink.state<5)}}function gr(e,t){if(1&e){const e=S.\u0275\u0275getCurrentView();S.\u0275\u0275elementStart(0,"div",154),S.\u0275\u0275elementStart(1,"div",155),S.\u0275\u0275template(2,sr,1,0,"img",164),S.\u0275\u0275template(3,cr,1,0,"img",165),S.\u0275\u0275template(4,mr,1,0,"img",166),S.\u0275\u0275template(5,pr,1,0,"img",167),S.\u0275\u0275elementStart(6,"div",168),S.\u0275\u0275elementStart(7,"div",169),S.\u0275\u0275text(8),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(9,"div",170),S.\u0275\u0275text(10),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(11,"div",171),S.\u0275\u0275text(12),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(13,"div",158),S.\u0275\u0275elementStart(14,"a",172),S.\u0275\u0275listener("click",function(t){const n=S.\u0275\u0275restoreView(e).index,i=S.\u0275\u0275nextContext(2);return i.showActBox(n),i.stopProp(t)}),S.\u0275\u0275element(15,"em",173),S.\u0275\u0275elementEnd(),S.\u0275\u0275template(16,hr,5,2,"div",174),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd()}if(2&e){const e=t.$implicit,n=t.index,i=S.\u0275\u0275nextContext(2);S.\u0275\u0275advance(2),S.\u0275\u0275property("ngIf",e.name.indexOf(".xls")>=0),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf",e.name.indexOf(".doc")>=0),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf",e.name.indexOf(".pdf")>=0),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf",e.name.indexOf(".ppt")>=0),S.\u0275\u0275advance(2),S.\u0275\u0275property("title",e.name),S.\u0275\u0275advance(1),S.\u0275\u0275textInterpolate(e.name),S.\u0275\u0275advance(1),S.\u0275\u0275property("title",e.file_update_name),S.\u0275\u0275advance(1),S.\u0275\u0275textInterpolate(e.file_update_name),S.\u0275\u0275advance(2),S.\u0275\u0275textInterpolate(e.file_update_time),S.\u0275\u0275advance(1),S.\u0275\u0275classMap(i.actIdx===n?"":"static"),S.\u0275\u0275advance(3),S.\u0275\u0275property("ngIf",i.actIdx===n)}}function fr(e,t){if(1&e&&(S.\u0275\u0275elementStart(0,"dw-tab",150),S.\u0275\u0275elementStart(1,"div",6),S.\u0275\u0275elementStart(2,"div",151),S.\u0275\u0275template(3,dr,7,6,"div",152),S.\u0275\u0275elementStart(4,"div",153),S.\u0275\u0275elementStart(5,"div",154),S.\u0275\u0275elementStart(6,"div",155),S.\u0275\u0275text(7,"\u540d\u79f0"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(8,"div",156),S.\u0275\u0275text(9,"\u4e0a\u4f20\u8005"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(10,"div",157),S.\u0275\u0275text(11,"\u4e0a\u4f20\u65f6\u95f4"),S.\u0275\u0275elementEnd(),S.\u0275\u0275element(12,"div",158),S.\u0275\u0275elementEnd(),S.\u0275\u0275template(13,gr,17,13,"div",159),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd()),2&e){const e=S.\u0275\u0275nextContext();S.\u0275\u0275advance(3),S.\u0275\u0275property("ngIf",e.serviceOrderCurrentLink.state<5&&"hidden"!==e.uploadatecdocs),S.\u0275\u0275advance(10),S.\u0275\u0275property("ngForOf",e.technologyList)}}function wr(e,t){if(1&e&&S.\u0275\u0275element(0,"img",191),2&e){const e=S.\u0275\u0275nextContext(2);S.\u0275\u0275propertyInterpolate("src",e.serviceOrderCurrentLink.file_context,S.\u0275\u0275sanitizeUrl)}}function vr(e,t){1&e&&S.\u0275\u0275element(0,"img",192)}function xr(e,t){if(1&e){const e=S.\u0275\u0275getCurrentView();S.\u0275\u0275elementStart(0,"button",193),S.\u0275\u0275listener("dwClick",function(){S.\u0275\u0275restoreView(e);const t=S.\u0275\u0275nextContext(2),n=S.\u0275\u0275reference(124);return t.modify(),n.initData(t.service_order_id,t.serviceOrderBaseInfo.latitude)}),S.\u0275\u0275elementStart(1,"span",67),S.\u0275\u0275text(2),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd()}if(2&e){const e=S.\u0275\u0275nextContext(2);S.\u0275\u0275propertyInterpolate("angularticsLabel",e.userInfo.tenantId+","+e.userInfo.userId),S.\u0275\u0275property("dwType","primary")("dwActionId","assign")("dwDefaultAuthorized","disabled")("angularticsCategory","\u670d\u52a1\u5de5\u5355"),S.\u0275\u0275advance(2),S.\u0275\u0275textInterpolate(e.serviceOrderCurrentLink.button_show)}}function Cr(e,t){if(1&e){const e=S.\u0275\u0275getCurrentView();S.\u0275\u0275elementStart(0,"button",194),S.\u0275\u0275listener("dwClick",function(){S.\u0275\u0275restoreView(e);const t=S.\u0275\u0275nextContext(2),n=S.\u0275\u0275reference(122);return t.modify(),n.initData(t.service_order_id,t.technologyList)}),S.\u0275\u0275elementStart(1,"span",67),S.\u0275\u0275text(2),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd()}if(2&e){const e=S.\u0275\u0275nextContext(2);S.\u0275\u0275propertyInterpolate("angularticsLabel",e.userInfo.tenantId+","+e.userInfo.userId),S.\u0275\u0275property("dwType","primary")("dwActionId","distribute")("dwDefaultAuthorized","disabled")("angularticsCategory","\u670d\u52a1\u5de5\u5355"),S.\u0275\u0275advance(2),S.\u0275\u0275textInterpolate(e.serviceOrderCurrentLink.button_show)}}function _r(e,t){if(1&e){const e=S.\u0275\u0275getCurrentView();S.\u0275\u0275elementStart(0,"button",195),S.\u0275\u0275listener("dwClick",function(){S.\u0275\u0275restoreView(e);const t=S.\u0275\u0275nextContext(2);return S.\u0275\u0275reference(383).initData(t.product_file_id,t.service_order_id,t.service_doc_id,t.service_mode),t.report("create")}),S.\u0275\u0275elementStart(1,"span",67),S.\u0275\u0275text(2),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd()}if(2&e){const e=S.\u0275\u0275nextContext(2);S.\u0275\u0275propertyInterpolate("angularticsLabel",e.userInfo.tenantId+","+e.userInfo.userId),S.\u0275\u0275property("dwType","primary")("dwActionId","writeservicereport")("dwDefaultAuthorized","disabled")("angularticsCategory","\u670d\u52a1\u5de5\u5355"),S.\u0275\u0275advance(2),S.\u0275\u0275textInterpolate(e.serviceOrderCurrentLink.button_show)}}function yr(e,t){if(1&e&&(S.\u0275\u0275elementStart(0,"div",139),S.\u0275\u0275elementStart(1,"div",185),S.\u0275\u0275template(2,wr,1,1,"img",186),S.\u0275\u0275template(3,vr,1,0,"img",187),S.\u0275\u0275elementStart(4,"span",138),S.\u0275\u0275text(5),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275template(6,xr,3,6,"button",188),S.\u0275\u0275template(7,Cr,3,6,"button",189),S.\u0275\u0275template(8,_r,3,6,"button",190),S.\u0275\u0275elementEnd()),2&e){const e=S.\u0275\u0275nextContext();S.\u0275\u0275advance(2),S.\u0275\u0275property("ngIf",e.serviceOrderCurrentLink.file_context),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf",!e.serviceOrderCurrentLink.file_context),S.\u0275\u0275advance(2),S.\u0275\u0275textInterpolate(e.serviceOrderCurrentLink.employee_name),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf","1"==e.serviceOrderCurrentLink.state),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf","2"==e.serviceOrderCurrentLink.state&&!e.serviceOrderBaseInfo.assign_to_pool&&(e.serviceOrderBaseInfo.service_site_id==e.currentServiceSiteId||e.distribution_all&&"1"===e.currentServiceSiteType)),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf","4"==e.serviceOrderCurrentLink.state&&2==e.service_mode&&e.isNowUser)}}function Sr(e,t){if(1&e){const e=S.\u0275\u0275getCurrentView();S.\u0275\u0275elementStart(0,"img",200),S.\u0275\u0275listener("click",function(){return S.\u0275\u0275restoreView(e),S.\u0275\u0275nextContext(3).showCommunication()}),S.\u0275\u0275elementEnd()}}function br(e,t){if(1&e){const e=S.\u0275\u0275getCurrentView();S.\u0275\u0275elementStart(0,"img",201),S.\u0275\u0275listener("click",function(){return S.\u0275\u0275restoreView(e),S.\u0275\u0275nextContext(3).showWorkrecord()}),S.\u0275\u0275elementEnd()}}function Ir(e,t){if(1&e&&(S.\u0275\u0275elementStart(0,"div",197),S.\u0275\u0275template(1,Sr,1,0,"img",198),S.\u0275\u0275template(2,br,1,0,"img",199),S.\u0275\u0275elementEnd()),2&e){const e=S.\u0275\u0275nextContext(2);S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf",0!=e.processrecordCount),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf",0!=e.workrecordCount)}}function Er(e,t){if(1&e&&S.\u0275\u0275template(0,Ir,3,2,"div",196),2&e){const e=S.\u0275\u0275nextContext();S.\u0275\u0275property("ngIf",0!=e.processrecordCount||0!=e.workrecordCount)}}function Dr(e,t){if(1&e){const e=S.\u0275\u0275getCurrentView();S.\u0275\u0275elementStart(0,"div",172),S.\u0275\u0275listener("click",function(){S.\u0275\u0275restoreView(e);const t=S.\u0275\u0275nextContext(2).$implicit;return S.\u0275\u0275nextContext().showDispatch(t.process_details)}),S.\u0275\u0275element(1,"img",210),S.\u0275\u0275elementStart(2,"span"),S.\u0275\u0275text(3,"\u6d3e\u5de5\u5907\u6ce8"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd()}}function Or(e,t){1&e&&(S.\u0275\u0275elementStart(0,"span"),S.\u0275\u0275text(1,"|"),S.\u0275\u0275elementEnd())}function Mr(e,t){if(1&e){const e=S.\u0275\u0275getCurrentView();S.\u0275\u0275elementStart(0,"div",172),S.\u0275\u0275listener("click",function(){S.\u0275\u0275restoreView(e);const t=S.\u0275\u0275nextContext(3),n=S.\u0275\u0275reference(132);return t.showEngineerClock(),n.initData(t.clockList,t.serviceOrderBaseInfo.doc_no)}),S.\u0275\u0275element(1,"img",211),S.\u0275\u0275elementStart(2,"span"),S.\u0275\u0275text(3,"\u534f\u540c\u4eba\u6253\u5361\u8be6\u60c5"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd()}}function Pr(e,t){if(1&e&&(S.\u0275\u0275elementStart(0,"div",208),S.\u0275\u0275template(1,Dr,4,0,"div",209),S.\u0275\u0275template(2,Or,2,0,"span",1),S.\u0275\u0275template(3,Mr,4,0,"div",209),S.\u0275\u0275elementEnd()),2&e){const e=S.\u0275\u0275nextContext().$implicit,t=S.\u0275\u0275nextContext();S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf",e.process_details),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf",e.process_details&&t.clockList.length),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf",t.clockList.length)}}const kr=function(){return{showPreviewIcon:!0}};function Fr(e,t){if(1&e){const e=S.\u0275\u0275getCurrentView();S.\u0275\u0275elementStart(0,"div",212),S.\u0275\u0275elementStart(1,"dw-upload",15),S.\u0275\u0275listener("dwFileListChange",function(t){return S.\u0275\u0275restoreView(e),S.\u0275\u0275nextContext().$implicit.child.pictureInfos=t}),S.\u0275\u0275element(2,"em",16),S.\u0275\u0275elementStart(3,"div",17),S.\u0275\u0275text(4,"\u4e0a\u4f20"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd()}if(2&e){const e=S.\u0275\u0275nextContext().$implicit,t=S.\u0275\u0275nextContext();S.\u0275\u0275advance(1),S.\u0275\u0275property("dwFileList",e.child.pictureInfos)("dwShowButton",e.child.pictureInfos.length<0)("dwShowUploadList",S.\u0275\u0275pureFunction0(4,kr))("dwPreview",t.handlePreviewClockIn)}}function Vr(e,t){if(1&e&&(S.\u0275\u0275elementStart(0,"dw-timeline-item",202),S.\u0275\u0275elementStart(1,"div",203),S.\u0275\u0275elementStart(2,"span",204),S.\u0275\u0275text(3),S.\u0275\u0275pipe(4,"date"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(5,"span",205),S.\u0275\u0275text(6),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(7,"span",206),S.\u0275\u0275text(8),S.\u0275\u0275template(9,Pr,4,3,"div",207),S.\u0275\u0275template(10,Fr,5,5,"div",76),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd()),2&e){const e=t.$implicit,n=S.\u0275\u0275nextContext();S.\u0275\u0275property("dwColor","#d8d8d8"),S.\u0275\u0275advance(3),S.\u0275\u0275textInterpolate(S.\u0275\u0275pipeBind2(4,6,e.process_time,"yyyy/MM/dd HH:mm")),S.\u0275\u0275advance(3),S.\u0275\u0275textInterpolate(n.getProcessStateLable(e.process_state)),S.\u0275\u0275advance(2),S.\u0275\u0275textInterpolate1(" ",e.remark," "),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf","3"===e.process_state),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf","13"===e.process_state||"14"===e.process_state)}}function Tr(e,t){1&e&&S.\u0275\u0275element(0,"img",239)}function Lr(e,t){1&e&&S.\u0275\u0275element(0,"img",240)}function Rr(e,t){if(1&e&&(S.\u0275\u0275elementStart(0,"div",233),S.\u0275\u0275elementStart(1,"div",234),S.\u0275\u0275text(2,"\u5e8f\u5217\u53f7\u53d8\u66f4"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(3,"div",236),S.\u0275\u0275elementStart(4,"p"),S.\u0275\u0275text(5),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(6,"span"),S.\u0275\u0275text(7),S.\u0275\u0275template(8,Tr,1,0,"img",237),S.\u0275\u0275template(9,Lr,1,0,"img",238),S.\u0275\u0275text(10),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd()),2&e){const e=S.\u0275\u0275nextContext(3);S.\u0275\u0275advance(5),S.\u0275\u0275textInterpolate("0"===e.agreeChangeSn?"\u4e0d\u540c\u610f":"\u540c\u610f\u53d8\u66f4"),S.\u0275\u0275advance(2),S.\u0275\u0275textInterpolate1(" ( ",e.originalSn," "),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf","0"===e.agreeChangeSn),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf","1"===e.agreeChangeSn),S.\u0275\u0275advance(1),S.\u0275\u0275textInterpolate1(" ",e.currentSn," ) ")}}function Ar(e,t){if(1&e&&(S.\u0275\u0275elementStart(0,"div",227),S.\u0275\u0275element(1,"img",228),S.\u0275\u0275elementStart(2,"div",229),S.\u0275\u0275elementStart(3,"div",230),S.\u0275\u0275text(4,"\u5ba1\u67e5\u7ed3\u679c"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(5,"div",231),S.\u0275\u0275template(6,Rr,11,5,"div",232),S.\u0275\u0275elementStart(7,"div",233),S.\u0275\u0275elementStart(8,"div",234),S.\u0275\u0275text(9,"\u8d23\u4efb\u5f52\u5c5e"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(10,"div",235),S.\u0275\u0275text(11),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(12,"div",233),S.\u0275\u0275elementStart(13,"div",234),S.\u0275\u0275text(14,"\u610f\u89c1"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(15,"div",235),S.\u0275\u0275text(16),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(17,"div",138),S.\u0275\u0275text(18),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(19,"div",204),S.\u0275\u0275text(20),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd()),2&e){const e=S.\u0275\u0275nextContext(2);S.\u0275\u0275advance(6),S.\u0275\u0275property("ngIf",e.originalSn!==e.currentSn),S.\u0275\u0275advance(5),S.\u0275\u0275textInterpolate(e.orderReviewInfo.review_responsible_party),S.\u0275\u0275advance(5),S.\u0275\u0275textInterpolate(e.orderReviewInfo.review_opinions),S.\u0275\u0275advance(2),S.\u0275\u0275textInterpolate1("\u5ba1\u67e5\u4eba\uff1a",e.orderReviewInfo.review_employee_name,""),S.\u0275\u0275advance(2),S.\u0275\u0275textInterpolate(e.orderReviewInfo.review_date)}}function Nr(e,t){if(1&e){const e=S.\u0275\u0275getCurrentView();S.\u0275\u0275elementStart(0,"div",241),S.\u0275\u0275listener("dwClick",function(){S.\u0275\u0275restoreView(e);const t=S.\u0275\u0275nextContext(2),n=S.\u0275\u0275reference(383);return n.initData(t.product_file_id,t.service_order_id,t.service_doc_id,t.service_mode,t.serviceOrderBaseInfo.service_site_id),n.getReportInfo(t.service_doc_id),t.report("modify")}),S.\u0275\u0275element(1,"img",242),S.\u0275\u0275text(2," \u66f4\u6539\u62a5\u544a "),S.\u0275\u0275elementEnd()}if(2&e){const e=S.\u0275\u0275nextContext(2);S.\u0275\u0275propertyInterpolate("angularticsLabel",e.userInfo.tenantId+","+e.userInfo.userId),S.\u0275\u0275property("dwActionId","changeservicereport")("dwDefaultAuthorized","disabled")("angularticsCategory","\u670d\u52a1\u5de5\u5355")}}function $r(e,t){if(1&e){const e=S.\u0275\u0275getCurrentView();S.\u0275\u0275elementStart(0,"div",243),S.\u0275\u0275listener("dwClick",function(){S.\u0275\u0275restoreView(e);const t=S.\u0275\u0275nextContext(2),n=S.\u0275\u0275reference(130);return t.review(),n.initData(t.service_order_id,t.originalSn,t.currentSn,t.orderReviewInfo,t.serviceOrderBaseInfo.type)}),S.\u0275\u0275element(1,"img",244),S.\u0275\u0275text(2," \u5ba1\u67e5"),S.\u0275\u0275elementEnd()}if(2&e){const e=S.\u0275\u0275nextContext(2);S.\u0275\u0275propertyInterpolate("angularticsLabel",e.userInfo.tenantId+","+e.userInfo.userId),S.\u0275\u0275property("dwActionId","review")("dwDefaultAuthorized","disabled")("angularticsCategory","\u670d\u52a1\u5de5\u5355")}}function jr(e,t){if(1&e){const e=S.\u0275\u0275getCurrentView();S.\u0275\u0275elementStart(0,"div",245),S.\u0275\u0275listener("dwClick",function(){S.\u0275\u0275restoreView(e);const t=S.\u0275\u0275nextContext(2),n=S.\u0275\u0275reference(130);return t.review(),n.initData(t.service_order_id,t.originalSn,t.currentSn,t.orderReviewInfo,t.serviceOrderBaseInfo.type)}),S.\u0275\u0275element(1,"img",242),S.\u0275\u0275text(2," \u66f4\u6539\u5ba1\u67e5\u7ed3\u679c"),S.\u0275\u0275elementEnd()}if(2&e){const e=S.\u0275\u0275nextContext(2);S.\u0275\u0275propertyInterpolate("angularticsLabel",e.userInfo.tenantId+","+e.userInfo.userId),S.\u0275\u0275property("dwActionId","review")("dwDefaultAuthorized","disabled")("angularticsCategory","\u670d\u52a1\u5de5\u5355")}}function zr(e,t){if(1&e){const e=S.\u0275\u0275getCurrentView();S.\u0275\u0275elementStart(0,"div",246),S.\u0275\u0275listener("dwClick",function(){S.\u0275\u0275restoreView(e);const t=S.\u0275\u0275nextContext(2);return t.changeFaq(t.service_doc_id)}),S.\u0275\u0275element(1,"img",247),S.\u0275\u0275text(2," \u8f6c\u77e5\u8bc6\u5e93"),S.\u0275\u0275elementEnd()}if(2&e){const e=S.\u0275\u0275nextContext(2);S.\u0275\u0275propertyInterpolate("angularticsLabel",e.userInfo.tenantId+","+e.userInfo.userId),S.\u0275\u0275property("dwDefaultAuthorized","disabled")("dwActionId","generatedkb")("angularticsCategory","\u670d\u52a1\u5de5\u5355")}}function Br(e,t){1&e&&S.\u0275\u0275element(0,"img",250)}function qr(e,t){if(1&e){const e=S.\u0275\u0275getCurrentView();S.\u0275\u0275elementStart(0,"button",248),S.\u0275\u0275listener("dwClick",function(){S.\u0275\u0275restoreView(e);const t=S.\u0275\u0275nextContext(2);return t.exportPDF(t.service_doc_id)}),S.\u0275\u0275template(1,Br,1,0,"img",249),S.\u0275\u0275text(2," \u5bfc\u51fa "),S.\u0275\u0275elementEnd()}if(2&e){const e=S.\u0275\u0275nextContext(2);S.\u0275\u0275propertyInterpolate("angularticsLabel",e.userInfo.tenantId+","+e.userInfo.userId),S.\u0275\u0275property("dwDefaultAuthorized","disabled")("dwActionId","export")("angularticsCategory","\u670d\u52a1\u5de5\u5355")("dwLoading",e.isDownloading),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf",!e.isDownloading)}}function Wr(e,t){1&e&&(S.\u0275\u0275elementStart(0,"div",251),S.\u0275\u0275element(1,"img",252),S.\u0275\u0275elementEnd())}function Gr(e,t){if(1&e&&(S.\u0275\u0275elementStart(0,"div",213),S.\u0275\u0275elementStart(1,"div",214),S.\u0275\u0275element(2,"img",215),S.\u0275\u0275elementStart(3,"div",216),S.\u0275\u0275text(4," \u5de5\u7a0b\u5e08 "),S.\u0275\u0275elementStart(5,"span",217),S.\u0275\u0275text(6),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(7,"div",218),S.\u0275\u0275text(8),S.\u0275\u0275pipe(9,"date"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275template(10,Ar,21,5,"div",219),S.\u0275\u0275elementStart(11,"div",220),S.\u0275\u0275template(12,Nr,3,4,"div",221),S.\u0275\u0275template(13,$r,3,4,"div",222),S.\u0275\u0275template(14,jr,3,4,"div",223),S.\u0275\u0275template(15,zr,3,4,"div",224),S.\u0275\u0275template(16,qr,3,6,"button",225),S.\u0275\u0275elementEnd(),S.\u0275\u0275template(17,Wr,2,0,"div",226),S.\u0275\u0275elementEnd(),S.\u0275\u0275element(18,"dw-divider"),S.\u0275\u0275elementEnd()),2&e){const e=S.\u0275\u0275nextContext();S.\u0275\u0275advance(6),S.\u0275\u0275textInterpolate(e.install.employee_name),S.\u0275\u0275advance(2),S.\u0275\u0275textInterpolate(S.\u0275\u0275pipeBind2(9,9,e.install.end_time,"yyyy-MM-dd HH:mm:ss")),S.\u0275\u0275advance(2),S.\u0275\u0275property("ngIf",e.isReviewStamp),S.\u0275\u0275advance(2),S.\u0275\u0275property("ngIf","4"==e.service_doc_state&&e.isReviewEnable&&!e.serviceOrderBaseInfo.customer_settled&&!e.serviceOrderBaseInfo.site_settled&&!e.serviceOrderBaseInfo.employee_settled),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf",e.isReviewEnable),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf",e.isReviewStamp&&e.isInSixMonths),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf",e.isReviewStamp&&!e.isFaqChanged),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf","5"==e.serviceOrderCurrentLink.state||"6"==e.serviceOrderCurrentLink.state),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf",e.isFaqChanged)}}function Ur(e,t){1&e&&(S.\u0275\u0275elementStart(0,"p",62),S.\u0275\u0275text(1,"\u57fa\u672c\u4fe1\u606f"),S.\u0275\u0275elementEnd())}const Hr=function(){return[1]};function Xr(e,t){if(1&e&&(S.\u0275\u0275elementStart(0,"div",253),S.\u0275\u0275elementStart(1,"dw-table",254,255),S.\u0275\u0275elementStart(3,"tbody"),S.\u0275\u0275elementStart(4,"tr"),S.\u0275\u0275elementStart(5,"td",256),S.\u0275\u0275text(6," \u670d\u52a1\u7c7b\u578b "),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(7,"td",257),S.\u0275\u0275text(8),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(9,"td",258),S.\u0275\u0275text(10," \u5de5\u7a0b\u5e08 "),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(11,"td",257),S.\u0275\u0275text(12),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(13,"td",259),S.\u0275\u0275text(14," \u670d\u52a1\u5b8c\u6210\u65e5\u671f "),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(15,"td",257),S.\u0275\u0275text(16),S.\u0275\u0275pipe(17,"date"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(18,"tr"),S.\u0275\u0275elementStart(19,"td",260),S.\u0275\u0275text(20," \u5b89\u88c5\u8c03\u8bd5\u65e5\u671f "),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(21,"td",261),S.\u0275\u0275text(22),S.\u0275\u0275pipe(23,"date"),S.\u0275\u0275pipe(24,"date"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(25,"td",262),S.\u0275\u0275text(26," \u9a8c\u6536\u65e5\u671f "),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(27,"td"),S.\u0275\u0275text(28),S.\u0275\u0275pipe(29,"date"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd()),2&e){const e=S.\u0275\u0275nextContext();S.\u0275\u0275advance(1),S.\u0275\u0275property("dwData",S.\u0275\u0275pureFunction0(20,Hr))("dwShowPagination",!1),S.\u0275\u0275advance(7),S.\u0275\u0275textInterpolate1(" ",e.install.service_type_name," "),S.\u0275\u0275advance(4),S.\u0275\u0275textInterpolate1(" ",e.install.employee_name," "),S.\u0275\u0275advance(4),S.\u0275\u0275textInterpolate1(" ",S.\u0275\u0275pipeBind2(17,8,e.install.end_time,"yyyy-MM-dd")," "),S.\u0275\u0275advance(6),S.\u0275\u0275textInterpolate2(" ",S.\u0275\u0275pipeBind2(23,11,e.install.installationDateBegin,"yyyy-MM-dd"),"~",S.\u0275\u0275pipeBind2(24,14,e.install.installationDateEnd,"yyyy-MM-dd")," "),S.\u0275\u0275advance(6),S.\u0275\u0275textInterpolate1(" ",S.\u0275\u0275pipeBind2(29,17,e.install.acceptanceDate,"yyyy-MM-dd")," ")}}function Qr(e,t){if(1&e&&(S.\u0275\u0275elementStart(0,"div",124),S.\u0275\u0275text(1),S.\u0275\u0275elementEnd()),2&e){const e=S.\u0275\u0275nextContext().$implicit;S.\u0275\u0275advance(1),S.\u0275\u0275textInterpolate1(" ",e.fault_phrase," ")}}function Kr(e,t){if(1&e&&(S.\u0275\u0275elementStart(0,"div",124),S.\u0275\u0275text(1),S.\u0275\u0275elementEnd()),2&e){const e=S.\u0275\u0275nextContext().$implicit;S.\u0275\u0275advance(1),S.\u0275\u0275textInterpolate1(" ",e.programme_phrase," ")}}function Jr(e,t){if(1&e&&(S.\u0275\u0275elementStart(0,"tr"),S.\u0275\u0275elementStart(1,"td",263),S.\u0275\u0275text(2),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(3,"td",263),S.\u0275\u0275text(4),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(5,"td",264),S.\u0275\u0275template(6,Qr,2,1,"div",12),S.\u0275\u0275text(7),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(8,"td",264),S.\u0275\u0275template(9,Kr,2,1,"div",12),S.\u0275\u0275text(10),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd()),2&e){const e=t.$implicit;S.\u0275\u0275advance(2),S.\u0275\u0275textInterpolate1(" ",e.breakdown_show," "),S.\u0275\u0275advance(2),S.\u0275\u0275textInterpolate1(" ",e.name," "),S.\u0275\u0275advance(2),S.\u0275\u0275property("ngIf",e.fault_phrase),S.\u0275\u0275advance(1),S.\u0275\u0275textInterpolate1(" ",e.breakdown_description," "),S.\u0275\u0275advance(2),S.\u0275\u0275property("ngIf",e.programme_phrase),S.\u0275\u0275advance(1),S.\u0275\u0275textInterpolate1(" ",e.processing_description," ")}}function Zr(e,t){1&e&&(S.\u0275\u0275elementStart(0,"th",265),S.\u0275\u0275elementStart(1,"span",67),S.\u0275\u0275text(2,"\u73b0\u573a\u786e\u8ba4\u56fe\u7247"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd())}function Yr(e,t){if(1&e&&(S.\u0275\u0275elementStart(0,"span",271),S.\u0275\u0275text(1),S.\u0275\u0275elementEnd()),2&e){const e=S.\u0275\u0275nextContext().$implicit;S.\u0275\u0275advance(1),S.\u0275\u0275textInterpolate(e.orig_qty)}}function ea(e,t){1&e&&(S.\u0275\u0275elementStart(0,"span",271),S.\u0275\u0275text(1,"\u221a"),S.\u0275\u0275elementEnd())}function ta(e,t){1&e&&(S.\u0275\u0275elementStart(0,"span",272),S.\u0275\u0275text(1,"\xd7"),S.\u0275\u0275elementEnd())}const na=function(e,t){return{url:e,file_id:t}};function ia(e,t){if(1&e&&S.\u0275\u0275element(0,"app-big-img",274),2&e){const e=S.\u0275\u0275nextContext(2).$implicit;S.\u0275\u0275property("item",S.\u0275\u0275pureFunction2(1,na,e.confirmed_picture,e.confirmed_picture_id))}}function ra(e,t){if(1&e&&(S.\u0275\u0275elementStart(0,"td"),S.\u0275\u0275template(1,ia,1,4,"app-big-img",273),S.\u0275\u0275elementEnd()),2&e){const e=S.\u0275\u0275nextContext().$implicit;S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf",e.confirmed_picture_id)}}function aa(e,t){if(1&e&&(S.\u0275\u0275elementStart(0,"span",271),S.\u0275\u0275text(1),S.\u0275\u0275elementEnd()),2&e){const e=S.\u0275\u0275nextContext().$implicit;S.\u0275\u0275advance(1),S.\u0275\u0275textInterpolate(e.qty)}}function oa(e,t){if(1&e&&(S.\u0275\u0275elementStart(0,"tr"),S.\u0275\u0275elementStart(1,"td"),S.\u0275\u0275text(2),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(3,"td"),S.\u0275\u0275text(4),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(5,"td",266),S.\u0275\u0275template(6,Yr,2,1,"span",267),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(7,"td",268),S.\u0275\u0275template(8,ea,2,0,"span",267),S.\u0275\u0275template(9,ta,2,0,"span",269),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(10,"td",270),S.\u0275\u0275text(11),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(12,"td"),S.\u0275\u0275text(13),S.\u0275\u0275elementEnd(),S.\u0275\u0275template(14,ra,2,1,"td",1),S.\u0275\u0275elementStart(15,"td",266),S.\u0275\u0275template(16,aa,2,1,"span",267),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd()),2&e){const e=t.$implicit,n=S.\u0275\u0275nextContext();S.\u0275\u0275advance(2),S.\u0275\u0275textInterpolate1(" ",e.orig_show," "),S.\u0275\u0275advance(2),S.\u0275\u0275textInterpolate1(" ",e.orig_sn," "),S.\u0275\u0275advance(2),S.\u0275\u0275property("ngIf",e.orig_qty),S.\u0275\u0275advance(2),S.\u0275\u0275property("ngIf",e.orig_qty&&e.need_return),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf",e.orig_qty&&!e.need_return),S.\u0275\u0275advance(2),S.\u0275\u0275textInterpolate1(" ",e.new_show," "),S.\u0275\u0275advance(2),S.\u0275\u0275textInterpolate1(" ",e.sn," "),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf",n.showConfirmedPicture),S.\u0275\u0275advance(2),S.\u0275\u0275property("ngIf",e.qty)}}function la(e,t){if(1&e&&(S.\u0275\u0275elementStart(0,"tr"),S.\u0275\u0275elementStart(1,"td"),S.\u0275\u0275text(2),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(3,"td",275),S.\u0275\u0275text(4),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd()),2&e){const e=t.$implicit;S.\u0275\u0275advance(2),S.\u0275\u0275textInterpolate1(" ",e.service_item_show," "),S.\u0275\u0275advance(2),S.\u0275\u0275textInterpolate1(" ",e.process_description," ")}}function da(e,t){if(1&e&&S.\u0275\u0275element(0,"img",276),2&e){const e=S.\u0275\u0275nextContext(2);S.\u0275\u0275property("src",e.previewImage,S.\u0275\u0275sanitizeUrl)("ngStyle",S.\u0275\u0275pureFunction0(2,Qi))}}function sa(e,t){if(1&e){const e=S.\u0275\u0275getCurrentView();S.\u0275\u0275elementStart(0,"div",212),S.\u0275\u0275elementStart(1,"dw-upload",15),S.\u0275\u0275listener("dwFileListChange",function(t){return S.\u0275\u0275restoreView(e),S.\u0275\u0275nextContext().docInfoFileContextList=t}),S.\u0275\u0275element(2,"em",16),S.\u0275\u0275elementStart(3,"div",17),S.\u0275\u0275text(4,"\u4e0a\u4f20"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(5,"dw-modal",18),S.\u0275\u0275listener("dwOnCancel",function(){return S.\u0275\u0275restoreView(e),S.\u0275\u0275nextContext().previewVisible=!1}),S.\u0275\u0275template(6,da,1,3,"ng-template",null,19,S.\u0275\u0275templateRefExtractor),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd()}if(2&e){const e=S.\u0275\u0275reference(7),t=S.\u0275\u0275nextContext();S.\u0275\u0275advance(1),S.\u0275\u0275property("dwFileList",t.docInfoFileContextList)("dwShowButton",t.docInfoFileContextList.length<0)("dwShowUploadList",S.\u0275\u0275pureFunction0(7,kr))("dwPreview",t.handlePreview),S.\u0275\u0275advance(4),S.\u0275\u0275property("dwVisible",t.previewVisible)("dwContent",e)("dwFooter",null)}}function ca(e,t){if(1&e&&(S.\u0275\u0275elementStart(0,"div"),S.\u0275\u0275elementStart(1,"a"),S.\u0275\u0275text(2),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd()),2&e){const e=S.\u0275\u0275nextContext().$implicit;S.\u0275\u0275advance(2),S.\u0275\u0275textInterpolate(e.title)}}function ma(e,t){if(1&e&&(S.\u0275\u0275elementContainerStart(0),S.\u0275\u0275elementStart(1,"dw-image-viewer-list-item",126),S.\u0275\u0275template(2,ca,3,1,"ng-template",null,127,S.\u0275\u0275templateRefExtractor),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementContainerEnd()),2&e){const e=t.$implicit,n=S.\u0275\u0275nextContext(2);S.\u0275\u0275advance(1),S.\u0275\u0275property("dwListType","picture-card")("dwFile",e)("dwItemAction",n.listActionMap2_2[e.uid])("onPreview",n.handlePreview2_2)}}const pa=function(){return{"my-list":!1}};function ua(e,t){if(1&e&&(S.\u0275\u0275elementStart(0,"div",212),S.\u0275\u0275elementStart(1,"div",21),S.\u0275\u0275template(2,ma,4,4,"ng-container",22),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd()),2&e){const e=S.\u0275\u0275nextContext();S.\u0275\u0275advance(1),S.\u0275\u0275property("ngClass",S.\u0275\u0275pureFunction0(2,pa)),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngForOf",e.thumbnailList2_2)}}function ha(e,t){1&e&&(S.\u0275\u0275elementStart(0,"p",277),S.\u0275\u0275text(1,"\u9644\u4ef6"),S.\u0275\u0275elementEnd())}function ga(e,t){1&e&&S.\u0275\u0275element(0,"img",175)}function fa(e,t){1&e&&S.\u0275\u0275element(0,"img",176)}function wa(e,t){1&e&&S.\u0275\u0275element(0,"img",177)}function va(e,t){1&e&&S.\u0275\u0275element(0,"img",178)}function xa(e,t){if(1&e){const e=S.\u0275\u0275getCurrentView();S.\u0275\u0275elementStart(0,"div",279),S.\u0275\u0275template(1,ga,1,0,"img",164),S.\u0275\u0275template(2,fa,1,0,"img",165),S.\u0275\u0275template(3,wa,1,0,"img",166),S.\u0275\u0275template(4,va,1,0,"img",167),S.\u0275\u0275elementStart(5,"div",169),S.\u0275\u0275text(6),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(7,"div",280),S.\u0275\u0275listener("click",function(){const t=S.\u0275\u0275restoreView(e).$implicit;return S.\u0275\u0275nextContext(2).downloadFile(t.annex_id)}),S.\u0275\u0275element(8,"em",181),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd()}if(2&e){const e=t.$implicit;S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf",e.annex_name&&e.annex_name.indexOf(".xls")>=0),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf",e.annex_name&&e.annex_name.indexOf(".doc")>=0),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf",e.annex_name&&e.annex_name.indexOf(".pdf")>=0),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf",e.annex_name&&e.annex_name.indexOf(".ppt")>=0),S.\u0275\u0275advance(1),S.\u0275\u0275property("title",e.annex_name),S.\u0275\u0275advance(1),S.\u0275\u0275textInterpolate(e.annex_name)}}function Ca(e,t){if(1&e&&(S.\u0275\u0275elementStart(0,"div",212),S.\u0275\u0275template(1,xa,9,6,"div",278),S.\u0275\u0275elementEnd()),2&e){const e=S.\u0275\u0275nextContext();S.\u0275\u0275advance(1),S.\u0275\u0275property("ngForOf",e.install.annexs)}}function _a(e,t){if(1&e&&(S.\u0275\u0275elementStart(0,"p"),S.\u0275\u0275elementStart(1,"span",281),S.\u0275\u0275text(2),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd()),2&e){const e=S.\u0275\u0275nextContext();S.\u0275\u0275advance(2),S.\u0275\u0275textInterpolate1("\xa0\xa0",e.remark,"")}}function ya(e,t){if(1&e&&(S.\u0275\u0275elementStart(0,"p"),S.\u0275\u0275elementStart(1,"span",281),S.\u0275\u0275text(2),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd()),2&e){const e=S.\u0275\u0275nextContext();S.\u0275\u0275advance(2),S.\u0275\u0275textInterpolate1("\xa0\xa0",e.signature,"")}}function Sa(e,t){if(1&e&&(S.\u0275\u0275elementStart(0,"p"),S.\u0275\u0275element(1,"img",282),S.\u0275\u0275elementEnd()),2&e){const e=S.\u0275\u0275nextContext();S.\u0275\u0275advance(1),S.\u0275\u0275property("src",e.signature_picture,S.\u0275\u0275sanitizeUrl)}}function ba(e,t){if(1&e){const e=S.\u0275\u0275getCurrentView();S.\u0275\u0275elementContainerStart(0),S.\u0275\u0275elementStart(1,"button",283),S.\u0275\u0275listener("click",function(){return S.\u0275\u0275restoreView(e),S.\u0275\u0275nextContext().editAmountInfo()}),S.\u0275\u0275element(2,"em",284),S.\u0275\u0275text(3," \u7f16\u8f91 "),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementContainerEnd()}}function Ia(e,t){if(1&e){const e=S.\u0275\u0275getCurrentView();S.\u0275\u0275elementContainerStart(0),S.\u0275\u0275elementStart(1,"button",285),S.\u0275\u0275listener("click",function(){return S.\u0275\u0275restoreView(e),S.\u0275\u0275nextContext().saveAmountInfo()}),S.\u0275\u0275element(2,"em",286),S.\u0275\u0275text(3," \u4fdd\u5b58 "),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementContainerEnd()}}function Ea(e,t){if(1&e){const e=S.\u0275\u0275getCurrentView();S.\u0275\u0275elementContainerStart(0),S.\u0275\u0275elementStart(1,"button",283),S.\u0275\u0275listener("click",function(){return S.\u0275\u0275restoreView(e),S.\u0275\u0275nextContext().cancelAmountInfo()}),S.\u0275\u0275element(2,"em",287),S.\u0275\u0275text(3," \u53d6\u6d88 "),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementContainerEnd()}}function Da(e,t){if(1&e){const e=S.\u0275\u0275getCurrentView();S.\u0275\u0275elementContainerStart(0),S.\u0275\u0275elementStart(1,"dw-input-number",290),S.\u0275\u0275listener("ngModelChange",function(t){return S.\u0275\u0275restoreView(e),S.\u0275\u0275nextContext().$implicit.customer_settlement_price=t})("ngModelChange",function(){return S.\u0275\u0275restoreView(e),S.\u0275\u0275nextContext(2).priceChange()}),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementContainerEnd()}if(2&e){const e=S.\u0275\u0275nextContext().$implicit;S.\u0275\u0275advance(1),S.\u0275\u0275property("ngModel",e.customer_settlement_price)("dwMin",0)("dwStep",1)("dwPrecision",2)}}function Oa(e,t){if(1&e&&(S.\u0275\u0275elementContainerStart(0),S.\u0275\u0275text(1),S.\u0275\u0275elementContainerEnd()),2&e){const e=S.\u0275\u0275nextContext().$implicit;S.\u0275\u0275advance(1),S.\u0275\u0275textInterpolate1(" ",e.customer_settlement_price.toFixed(2)," ")}}function Ma(e,t){if(1&e&&(S.\u0275\u0275elementStart(0,"tr"),S.\u0275\u0275elementStart(1,"td",288),S.\u0275\u0275text(2),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(3,"td"),S.\u0275\u0275text(4),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(5,"td"),S.\u0275\u0275text(6),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(7,"td"),S.\u0275\u0275text(8),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(9,"td",289),S.\u0275\u0275text(10),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(11,"td",289),S.\u0275\u0275template(12,Da,2,4,"ng-container",1),S.\u0275\u0275template(13,Oa,2,1,"ng-container",1),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(14,"td",289),S.\u0275\u0275text(15),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd()),2&e){const e=t.$implicit,n=S.\u0275\u0275nextContext();S.\u0275\u0275advance(2),S.\u0275\u0275textInterpolate1(" ",e.rowNum," "),S.\u0275\u0275advance(2),S.\u0275\u0275textInterpolate1(" ",e.material_code," "),S.\u0275\u0275advance(2),S.\u0275\u0275textInterpolate1(" ",e.material_name," "),S.\u0275\u0275advance(2),S.\u0275\u0275textInterpolate1(" ",e.specification," "),S.\u0275\u0275advance(2),S.\u0275\u0275textInterpolate1(" ",e.qty," "),S.\u0275\u0275advance(2),S.\u0275\u0275property("ngIf",n.inAmountEdit),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf",!n.inAmountEdit),S.\u0275\u0275advance(2),S.\u0275\u0275textInterpolate1(" ",(e.customer_settlement_price*e.qty).toFixed(2)," ")}}function Pa(e,t){if(1&e){const e=S.\u0275\u0275getCurrentView();S.\u0275\u0275elementStart(0,"button",291),S.\u0275\u0275listener("click",function(){return S.\u0275\u0275restoreView(e),S.\u0275\u0275nextContext().openServiceItem()}),S.\u0275\u0275element(1,"em",16),S.\u0275\u0275text(2," \u670d\u52a1\u9879\u76ee "),S.\u0275\u0275elementEnd()}}function ka(e,t){1&e&&(S.\u0275\u0275elementStart(0,"th",292),S.\u0275\u0275elementStart(1,"span",67),S.\u0275\u0275text(2,"\u64cd\u4f5c"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd())}function Fa(e,t){if(1&e){const e=S.\u0275\u0275getCurrentView();S.\u0275\u0275elementContainerStart(0),S.\u0275\u0275elementStart(1,"dw-input-number",290),S.\u0275\u0275listener("ngModelChange",function(t){return S.\u0275\u0275restoreView(e),S.\u0275\u0275nextContext().$implicit.customer_settlement_price=t})("ngModelChange",function(){return S.\u0275\u0275restoreView(e),S.\u0275\u0275nextContext(2).priceChange()}),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementContainerEnd()}if(2&e){const e=S.\u0275\u0275nextContext().$implicit;S.\u0275\u0275advance(1),S.\u0275\u0275property("ngModel",e.customer_settlement_price)("dwMin",0)("dwStep",1)("dwPrecision",2)}}function Va(e,t){if(1&e&&(S.\u0275\u0275elementContainerStart(0),S.\u0275\u0275text(1),S.\u0275\u0275elementContainerEnd()),2&e){const e=S.\u0275\u0275nextContext().$implicit;S.\u0275\u0275advance(1),S.\u0275\u0275textInterpolate1(" ",e.customer_settlement_price.toFixed(2)," ")}}function Ta(e,t){if(1&e){const e=S.\u0275\u0275getCurrentView();S.\u0275\u0275elementContainerStart(0),S.\u0275\u0275elementStart(1,"input",293),S.\u0275\u0275listener("ngModelChange",function(t){return S.\u0275\u0275restoreView(e),S.\u0275\u0275nextContext().$implicit.process_description=t}),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementContainerEnd()}if(2&e){const e=S.\u0275\u0275nextContext().$implicit;S.\u0275\u0275advance(1),S.\u0275\u0275property("ngModel",e.process_description)}}function La(e,t){if(1&e&&(S.\u0275\u0275elementContainerStart(0),S.\u0275\u0275text(1),S.\u0275\u0275elementContainerEnd()),2&e){const e=S.\u0275\u0275nextContext().$implicit;S.\u0275\u0275advance(1),S.\u0275\u0275textInterpolate1(" ",e.process_description," ")}}function Ra(e,t){if(1&e){const e=S.\u0275\u0275getCurrentView();S.\u0275\u0275elementStart(0,"div",295),S.\u0275\u0275listener("click",function(){S.\u0275\u0275restoreView(e);const t=S.\u0275\u0275nextContext(2).$implicit;return S.\u0275\u0275nextContext().deleteServiceItem(t.service_item_id)}),S.\u0275\u0275element(1,"img",296),S.\u0275\u0275element(2,"img",297),S.\u0275\u0275elementEnd()}}function Aa(e,t){if(1&e&&(S.\u0275\u0275elementStart(0,"td"),S.\u0275\u0275elementStart(1,"div",179),S.\u0275\u0275template(2,Ra,3,0,"div",294),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd()),2&e){const e=S.\u0275\u0275nextContext().$implicit;S.\u0275\u0275advance(2),S.\u0275\u0275property("ngIf",!e.service_doc_serviceitem_id)}}function Na(e,t){if(1&e&&(S.\u0275\u0275elementStart(0,"tr"),S.\u0275\u0275elementStart(1,"td",288),S.\u0275\u0275text(2),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(3,"td"),S.\u0275\u0275text(4),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(5,"td",289),S.\u0275\u0275template(6,Fa,2,4,"ng-container",1),S.\u0275\u0275template(7,Va,2,1,"ng-container",1),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(8,"td",289),S.\u0275\u0275text(9),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(10,"td"),S.\u0275\u0275template(11,Ta,2,1,"ng-container",1),S.\u0275\u0275template(12,La,2,1,"ng-container",1),S.\u0275\u0275elementEnd(),S.\u0275\u0275template(13,Aa,3,1,"td",1),S.\u0275\u0275elementEnd()),2&e){const e=t.$implicit,n=t.index,i=S.\u0275\u0275nextContext();S.\u0275\u0275advance(2),S.\u0275\u0275textInterpolate1(" ",n+1," "),S.\u0275\u0275advance(2),S.\u0275\u0275textInterpolate1(" ",e.service_item_name," "),S.\u0275\u0275advance(2),S.\u0275\u0275property("ngIf",i.inAmountEdit),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf",!i.inAmountEdit),S.\u0275\u0275advance(2),S.\u0275\u0275textInterpolate1(" ",e.customer_settlement_price.toFixed(2)," "),S.\u0275\u0275advance(2),S.\u0275\u0275property("ngIf",i.inAmountEdit),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf",!i.inAmountEdit),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf",i.inAmountEdit)}}function $a(e,t){1&e&&(S.\u0275\u0275elementStart(0,"strong"),S.\u0275\u0275text(1,"0.00"),S.\u0275\u0275elementEnd())}function ja(e,t){if(1&e&&(S.\u0275\u0275elementStart(0,"strong"),S.\u0275\u0275text(1),S.\u0275\u0275elementEnd()),2&e){const e=S.\u0275\u0275nextContext();S.\u0275\u0275advance(1),S.\u0275\u0275textInterpolate(e.actual_receipt_amt)}}function za(e,t){if(1&e){const e=S.\u0275\u0275getCurrentView();S.\u0275\u0275elementContainerStart(0),S.\u0275\u0275elementStart(1,"button",298),S.\u0275\u0275listener("click",function(){return S.\u0275\u0275restoreView(e),S.\u0275\u0275nextContext().openServiceCost()}),S.\u0275\u0275element(2,"em",16),S.\u0275\u0275text(3," \u670d\u52a1\u6210\u672c "),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementContainerEnd()}}function Ba(e,t){if(1&e){const e=S.\u0275\u0275getCurrentView();S.\u0275\u0275elementContainerStart(0),S.\u0275\u0275elementStart(1,"button",299),S.\u0275\u0275listener("click",function(){return S.\u0275\u0275restoreView(e),S.\u0275\u0275nextContext(2).toggleEditable()}),S.\u0275\u0275element(2,"em",284),S.\u0275\u0275text(3," \u7f16\u8f91 "),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementContainerEnd()}2&e&&(S.\u0275\u0275advance(1),S.\u0275\u0275property("dwActionId","servicecost")("dwDefaultAuthorized","disabled"))}function qa(e,t){if(1&e){const e=S.\u0275\u0275getCurrentView();S.\u0275\u0275elementContainerStart(0),S.\u0275\u0275elementStart(1,"button",300),S.\u0275\u0275listener("click",function(){S.\u0275\u0275restoreView(e);const t=S.\u0275\u0275nextContext(2);return t.toggleEditable(),t.openServiceCost()}),S.\u0275\u0275element(2,"em",284),S.\u0275\u0275text(3," \u65b0\u589e "),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementContainerEnd()}2&e&&(S.\u0275\u0275advance(1),S.\u0275\u0275property("dwActionId","servicecost")("dwDefaultAuthorized","disabled"))}function Wa(e,t){if(1&e&&(S.\u0275\u0275elementContainerStart(0),S.\u0275\u0275template(1,Ba,4,2,"ng-container",1),S.\u0275\u0275template(2,qa,4,2,"ng-container",1),S.\u0275\u0275elementContainerEnd()),2&e){const e=S.\u0275\u0275nextContext();S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf",e.serviceDocServiceCosts.activeRows.length),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf",!e.serviceDocServiceCosts.activeRows.length)}}function Ga(e,t){if(1&e){const e=S.\u0275\u0275getCurrentView();S.\u0275\u0275elementContainerStart(0),S.\u0275\u0275elementStart(1,"button",301),S.\u0275\u0275listener("click",function(){return S.\u0275\u0275restoreView(e),S.\u0275\u0275nextContext().saveServiceDocServiceCosts()}),S.\u0275\u0275element(2,"em",286),S.\u0275\u0275text(3," \u4fdd\u5b58 "),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementContainerEnd()}if(2&e){const e=S.\u0275\u0275nextContext();S.\u0275\u0275advance(1),S.\u0275\u0275property("disabled",!e.service_doc.valid)}}function Ua(e,t){if(1&e){const e=S.\u0275\u0275getCurrentView();S.\u0275\u0275elementContainerStart(0),S.\u0275\u0275elementStart(1,"button",283),S.\u0275\u0275listener("click",function(){return S.\u0275\u0275restoreView(e),S.\u0275\u0275nextContext().cancelServiceDocServiceCosts()}),S.\u0275\u0275element(2,"em",287),S.\u0275\u0275text(3," \u53d6\u6d88 "),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementContainerEnd()}}function Ha(e,t){1&e&&(S.\u0275\u0275elementContainerStart(0),S.\u0275\u0275elementStart(1,"th",302),S.\u0275\u0275text(2,"\u64cd\u4f5c"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementContainerEnd())}function Xa(e,t){if(1&e&&(S.\u0275\u0275elementContainerStart(0),S.\u0275\u0275elementStart(1,"div"),S.\u0275\u0275text(2),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementContainerEnd()),2&e){const e=S.\u0275\u0275nextContext().$implicit;S.\u0275\u0275advance(2),S.\u0275\u0275textInterpolate(e.cost_amt.toFixed(2))}}function Qa(e,t){1&e&&(S.\u0275\u0275elementContainerStart(0),S.\u0275\u0275element(1,"dw-input-number",306),S.\u0275\u0275elementContainerEnd()),2&e&&(S.\u0275\u0275advance(1),S.\u0275\u0275property("dwMin",0)("dwStep",1)("dwPrecision",2))}function Ka(e,t){if(1&e&&(S.\u0275\u0275elementContainerStart(0),S.\u0275\u0275text(1),S.\u0275\u0275elementContainerEnd()),2&e){const e=S.\u0275\u0275nextContext().$implicit;S.\u0275\u0275advance(1),S.\u0275\u0275textInterpolate1(" ",e.description," ")}}function Ja(e,t){1&e&&(S.\u0275\u0275elementContainerStart(0),S.\u0275\u0275element(1,"input",307),S.\u0275\u0275elementContainerEnd())}function Za(e,t){if(1&e){const e=S.\u0275\u0275getCurrentView();S.\u0275\u0275elementContainerStart(0),S.\u0275\u0275elementStart(1,"td",308),S.\u0275\u0275elementStart(2,"div",179),S.\u0275\u0275elementStart(3,"div",309),S.\u0275\u0275elementStart(4,"a",310),S.\u0275\u0275listener("dwOnConfirm",function(){S.\u0275\u0275restoreView(e);const t=S.\u0275\u0275nextContext(2).$implicit;return S.\u0275\u0275nextContext().deleteServiceDocServiceCost(t)}),S.\u0275\u0275elementStart(5,"a",311),S.\u0275\u0275element(6,"img",312),S.\u0275\u0275element(7,"img",312),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementContainerEnd()}if(2&e){const e=S.\u0275\u0275nextContext(3);S.\u0275\u0275advance(3),S.\u0275\u0275property("dwActionId","servicecost")("dwDefaultAuthorized","disabled"),S.\u0275\u0275advance(1),S.\u0275\u0275property("dwPopconfirmTitle","\u662f\u5426\u5220\u9664")("dwOkText","\u786e\u5b9a")("dwCancelText","\u53d6\u6d88"),S.\u0275\u0275advance(2),S.\u0275\u0275propertyInterpolate1("src","",e.imageResource,"/icon_delete.png",S.\u0275\u0275sanitizeUrl),S.\u0275\u0275advance(1),S.\u0275\u0275propertyInterpolate1("src","",e.imageResource,"/icon_delete_hover.png",S.\u0275\u0275sanitizeUrl)}}function Ya(e,t){if(1&e&&(S.\u0275\u0275elementContainerStart(0),S.\u0275\u0275elementStart(1,"tr",303),S.\u0275\u0275elementStart(2,"td",304),S.\u0275\u0275text(3),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(4,"td",305),S.\u0275\u0275template(5,Xa,3,1,"ng-container",1),S.\u0275\u0275template(6,Qa,2,3,"ng-container",1),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(7,"td",304),S.\u0275\u0275template(8,Ka,2,1,"ng-container",1),S.\u0275\u0275template(9,Ja,2,0,"ng-container",1),S.\u0275\u0275elementEnd(),S.\u0275\u0275template(10,Za,8,7,"ng-container",1),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementContainerEnd()),2&e){const e=t.$implicit,n=S.\u0275\u0275nextContext().$implicit,i=S.\u0275\u0275nextContext();S.\u0275\u0275advance(1),S.\u0275\u0275property("formGroup",n),S.\u0275\u0275advance(2),S.\u0275\u0275textInterpolate2("(",e.service_cost_code,")",e.service_cost_name,""),S.\u0275\u0275advance(1),S.\u0275\u0275property("dwAlign",i.editable?"left":"right"),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf",!i.editable),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf",i.editable),S.\u0275\u0275advance(2),S.\u0275\u0275property("ngIf",!i.editable),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf",i.editable),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf",i.editable)}}function eo(e,t){if(1&e&&(S.\u0275\u0275elementContainerStart(0),S.\u0275\u0275template(1,Ya,11,9,"ng-container",1),S.\u0275\u0275elementContainerEnd()),2&e){const e=t.$implicit;S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf",e.getRawValue())}}function to(e,t){if(1&e&&(S.\u0275\u0275elementContainerStart(0),S.\u0275\u0275element(1,"dw-extra-fields",315),S.\u0275\u0275elementContainerEnd()),2&e){const e=S.\u0275\u0275nextContext(2);S.\u0275\u0275advance(1),S.\u0275\u0275property("group",e.service_doc.controls[0])("dwDocument",e.dwDocument)}}function no(e,t){if(1&e&&(S.\u0275\u0275elementStart(0,"div"),S.\u0275\u0275text(1),S.\u0275\u0275pipe(2,"date"),S.\u0275\u0275elementEnd()),2&e){const e=S.\u0275\u0275nextContext(2).$implicit;S.\u0275\u0275advance(1),S.\u0275\u0275textInterpolate(S.\u0275\u0275pipeBind2(2,1,e.field_value,"yyyy-MM-dd"))}}function io(e,t){if(1&e&&(S.\u0275\u0275elementStart(0,"div"),S.\u0275\u0275text(1),S.\u0275\u0275elementEnd()),2&e){const e=S.\u0275\u0275nextContext(2).$implicit;S.\u0275\u0275advance(1),S.\u0275\u0275textInterpolate(e.field_value)}}function ro(e,t){if(1&e&&(S.\u0275\u0275elementContainerStart(0),S.\u0275\u0275elementStart(1,"div",148),S.\u0275\u0275elementStart(2,"div",149),S.\u0275\u0275text(3),S.\u0275\u0275elementEnd(),S.\u0275\u0275template(4,no,3,4,"div",1),S.\u0275\u0275template(5,io,2,1,"div",1),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementContainerEnd()),2&e){const e=S.\u0275\u0275nextContext().$implicit;S.\u0275\u0275advance(3),S.\u0275\u0275textInterpolate1("",e.field_label,"\uff1a"),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf","DATEPICKER"===e.field_type),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf","DATEPICKER"!==e.field_type)}}function ao(e,t){if(1&e&&(S.\u0275\u0275elementStart(0,"div"),S.\u0275\u0275template(1,ro,6,3,"ng-container",1),S.\u0275\u0275elementEnd()),2&e){const e=S.\u0275\u0275nextContext(2);S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf",!e.editable)}}function oo(e,t){if(1&e&&(S.\u0275\u0275elementStart(0,"div"),S.\u0275\u0275elementStart(1,"p",313),S.\u0275\u0275text(2,"\u9644\u52a0\u4fe1\u606f\uff1a"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(3,"div",314),S.\u0275\u0275template(4,to,2,2,"ng-container",1),S.\u0275\u0275template(5,ao,2,1,"div",22),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd()),2&e){const e=S.\u0275\u0275nextContext();S.\u0275\u0275advance(4),S.\u0275\u0275property("ngIf",e.editable),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngForOf",e.custCost)}}function lo(e,t){if(1&e){const e=S.\u0275\u0275getCurrentView();S.\u0275\u0275elementStart(0,"div"),S.\u0275\u0275elementStart(1,"p",318),S.\u0275\u0275text(2,"\u6682\u65e0\u7528\u6237\u8bc4\u4ef7\u4fe1\u606f\uff01"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(3,"div",319),S.\u0275\u0275elementStart(4,"button",320),S.\u0275\u0275listener("dwClick",function(){S.\u0275\u0275restoreView(e);const t=S.\u0275\u0275nextContext(2),n=S.\u0275\u0275reference(126);return t.evaluation(),n.initData(t.service_order_id)}),S.\u0275\u0275text(5,"\u5b8c\u5584\u8bc4\u4ef7"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd()}if(2&e){const e=S.\u0275\u0275nextContext(2);S.\u0275\u0275advance(4),S.\u0275\u0275propertyInterpolate("angularticsLabel",e.userInfo.tenantId+","+e.userInfo.userId),S.\u0275\u0275property("dwType","default")("dwActionId","evaluate")("dwDefaultAuthorized","disabled")("angularticsCategory","\u670d\u52a1\u5de5\u5355")}}function so(e,t){1&e&&(S.\u0275\u0275elementStart(0,"div",333),S.\u0275\u0275element(1,"img",334),S.\u0275\u0275text(2," \u95ee\u9898\u5df2\u89e3\u51b3 "),S.\u0275\u0275elementEnd())}function co(e,t){1&e&&(S.\u0275\u0275elementStart(0,"div",333),S.\u0275\u0275element(1,"img",335),S.\u0275\u0275text(2," \u95ee\u9898\u672a\u89e3\u51b3 "),S.\u0275\u0275elementEnd())}function mo(e,t){1&e&&S.\u0275\u0275element(0,"em",336)}function po(e,t){1&e&&(S.\u0275\u0275elementStart(0,"span",337),S.\u0275\u0275text(1,"\u5f88\u5dee"),S.\u0275\u0275elementEnd())}function uo(e,t){1&e&&(S.\u0275\u0275elementStart(0,"span",337),S.\u0275\u0275text(1,"\u5dee"),S.\u0275\u0275elementEnd())}function ho(e,t){1&e&&(S.\u0275\u0275elementStart(0,"span",337),S.\u0275\u0275text(1,"\u4e00\u822c"),S.\u0275\u0275elementEnd())}function go(e,t){1&e&&(S.\u0275\u0275elementStart(0,"span",337),S.\u0275\u0275text(1,"\u6ee1\u610f"),S.\u0275\u0275elementEnd())}function fo(e,t){1&e&&(S.\u0275\u0275elementStart(0,"span",337),S.\u0275\u0275text(1,"\u8d85\u8d5e"),S.\u0275\u0275elementEnd())}function wo(e,t){1&e&&S.\u0275\u0275element(0,"em",336)}function vo(e,t){1&e&&(S.\u0275\u0275elementStart(0,"span",337),S.\u0275\u0275text(1,"\u5f88\u5dee"),S.\u0275\u0275elementEnd())}function xo(e,t){1&e&&(S.\u0275\u0275elementStart(0,"span",337),S.\u0275\u0275text(1,"\u5dee"),S.\u0275\u0275elementEnd())}function Co(e,t){1&e&&(S.\u0275\u0275elementStart(0,"span",337),S.\u0275\u0275text(1,"\u4e00\u822c"),S.\u0275\u0275elementEnd())}function _o(e,t){1&e&&(S.\u0275\u0275elementStart(0,"span",337),S.\u0275\u0275text(1,"\u6ee1\u610f"),S.\u0275\u0275elementEnd())}function yo(e,t){1&e&&(S.\u0275\u0275elementStart(0,"span",337),S.\u0275\u0275text(1,"\u8d85\u8d5e"),S.\u0275\u0275elementEnd())}function So(e,t){1&e&&S.\u0275\u0275element(0,"em",336)}function bo(e,t){1&e&&(S.\u0275\u0275elementStart(0,"span",337),S.\u0275\u0275text(1,"\u5f88\u5dee"),S.\u0275\u0275elementEnd())}function Io(e,t){1&e&&(S.\u0275\u0275elementStart(0,"span",337),S.\u0275\u0275text(1,"\u5dee"),S.\u0275\u0275elementEnd())}function Eo(e,t){1&e&&(S.\u0275\u0275elementStart(0,"span",337),S.\u0275\u0275text(1,"\u4e00\u822c"),S.\u0275\u0275elementEnd())}function Do(e,t){1&e&&(S.\u0275\u0275elementStart(0,"span",337),S.\u0275\u0275text(1,"\u6ee1\u610f"),S.\u0275\u0275elementEnd())}function Oo(e,t){1&e&&(S.\u0275\u0275elementStart(0,"span",337),S.\u0275\u0275text(1,"\u8d85\u8d5e"),S.\u0275\u0275elementEnd())}function Mo(e,t){if(1&e){const e=S.\u0275\u0275getCurrentView();S.\u0275\u0275elementStart(0,"div"),S.\u0275\u0275elementStart(1,"dw-table",321,322),S.\u0275\u0275elementStart(3,"thead"),S.\u0275\u0275elementStart(4,"tr",65),S.\u0275\u0275elementStart(5,"th",323),S.\u0275\u0275template(6,so,3,0,"div",324),S.\u0275\u0275template(7,co,3,0,"div",324),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(8,"tbody"),S.\u0275\u0275elementStart(9,"tr"),S.\u0275\u0275elementStart(10,"td",325),S.\u0275\u0275elementStart(11,"div"),S.\u0275\u0275elementStart(12,"span",326),S.\u0275\u0275text(13,"\u670d\u52a1\u54cd\u5e94\u901f\u5ea6"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(14,"dw-rate",327),S.\u0275\u0275listener("ngModelChange",function(t){return S.\u0275\u0275restoreView(e),S.\u0275\u0275nextContext(2).serviceResponseSpeed=t}),S.\u0275\u0275elementEnd(),S.\u0275\u0275template(15,mo,1,0,"ng-template",null,328,S.\u0275\u0275templateRefExtractor),S.\u0275\u0275template(17,po,2,0,"span",329),S.\u0275\u0275template(18,uo,2,0,"span",329),S.\u0275\u0275template(19,ho,2,0,"span",329),S.\u0275\u0275template(20,go,2,0,"span",329),S.\u0275\u0275template(21,fo,2,0,"span",329),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(22,"div"),S.\u0275\u0275elementStart(23,"span",326),S.\u0275\u0275text(24,"\u670d\u52a1\u6001\u5ea6"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(25,"dw-rate",327),S.\u0275\u0275listener("ngModelChange",function(t){return S.\u0275\u0275restoreView(e),S.\u0275\u0275nextContext(2).serviceAttitude=t}),S.\u0275\u0275elementEnd(),S.\u0275\u0275template(26,wo,1,0,"ng-template",null,328,S.\u0275\u0275templateRefExtractor),S.\u0275\u0275template(28,vo,2,0,"span",329),S.\u0275\u0275template(29,xo,2,0,"span",329),S.\u0275\u0275template(30,Co,2,0,"span",329),S.\u0275\u0275template(31,_o,2,0,"span",329),S.\u0275\u0275template(32,yo,2,0,"span",329),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(33,"div"),S.\u0275\u0275elementStart(34,"span",326),S.\u0275\u0275text(35,"\u670d\u52a1\u6ee1\u610f\u5ea6"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(36,"dw-rate",327),S.\u0275\u0275listener("ngModelChange",function(t){return S.\u0275\u0275restoreView(e),S.\u0275\u0275nextContext(2).serviceSatisfaction=t}),S.\u0275\u0275elementEnd(),S.\u0275\u0275template(37,So,1,0,"ng-template",null,328,S.\u0275\u0275templateRefExtractor),S.\u0275\u0275template(39,bo,2,0,"span",329),S.\u0275\u0275template(40,Io,2,0,"span",329),S.\u0275\u0275template(41,Eo,2,0,"span",329),S.\u0275\u0275template(42,Do,2,0,"span",329),S.\u0275\u0275template(43,Oo,2,0,"span",329),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(44,"td"),S.\u0275\u0275elementStart(45,"div",330),S.\u0275\u0275elementStart(46,"div",331),S.\u0275\u0275text(47,"\u5ba2\u6237\u60f3\u8bf4"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(48,"div",332),S.\u0275\u0275text(49),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd()}if(2&e){const e=S.\u0275\u0275reference(16),t=S.\u0275\u0275nextContext(2);S.\u0275\u0275advance(1),S.\u0275\u0275property("dwData",S.\u0275\u0275pureFunction0(26,Hr))("dwFrontPagination",!1),S.\u0275\u0275advance(5),S.\u0275\u0275property("ngIf","5"==t.problemSolving),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf","0"==t.problemSolving),S.\u0275\u0275advance(7),S.\u0275\u0275property("dwCharacter",e)("ngModel",t.serviceResponseSpeed),S.\u0275\u0275advance(3),S.\u0275\u0275property("ngIf","1"==t.serviceResponseSpeed),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf","2"==t.serviceResponseSpeed),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf","3"==t.serviceResponseSpeed),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf","4"==t.serviceResponseSpeed),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf","5"==t.serviceResponseSpeed),S.\u0275\u0275advance(4),S.\u0275\u0275property("dwCharacter",e)("ngModel",t.serviceAttitude),S.\u0275\u0275advance(3),S.\u0275\u0275property("ngIf","1"==t.serviceAttitude),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf","2"==t.serviceAttitude),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf","3"==t.serviceAttitude),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf","4"==t.serviceAttitude),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf","5"==t.serviceAttitude),S.\u0275\u0275advance(4),S.\u0275\u0275property("dwCharacter",e)("ngModel",t.serviceSatisfaction),S.\u0275\u0275advance(3),S.\u0275\u0275property("ngIf","1"==t.serviceSatisfaction),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf","2"==t.serviceSatisfaction),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf","3"==t.serviceSatisfaction),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf","4"==t.serviceSatisfaction),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf","5"==t.serviceSatisfaction),S.\u0275\u0275advance(6),S.\u0275\u0275textInterpolate(t.customer_feedback)}}function Po(e,t){if(1&e){const e=S.\u0275\u0275getCurrentView();S.\u0275\u0275elementStart(0,"div"),S.\u0275\u0275elementStart(1,"p",318),S.\u0275\u0275text(2,"\u6682\u65e0\u56de\u8bbf\u8bb0\u5f55\uff01"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(3,"div",319),S.\u0275\u0275elementStart(4,"button",338),S.\u0275\u0275listener("dwClick",function(){S.\u0275\u0275restoreView(e);const t=S.\u0275\u0275nextContext(2),n=S.\u0275\u0275reference(128);return t.returnvisit(),n.initData(t.service_order_id)}),S.\u0275\u0275text(5,"\u670d\u52a1\u56de\u8bbf"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd()}if(2&e){const e=S.\u0275\u0275nextContext(2);S.\u0275\u0275advance(4),S.\u0275\u0275propertyInterpolate("angularticsLabel",e.userInfo.tenantId+","+e.userInfo.userId),S.\u0275\u0275property("dwType","default")("dwActionId","returnvisit")("dwDefaultAuthorized","allow")("angularticsCategory","\u670d\u52a1\u5de5\u5355")}}function ko(e,t){1&e&&(S.\u0275\u0275elementStart(0,"div",333),S.\u0275\u0275element(1,"img",334),S.\u0275\u0275text(2," \u95ee\u9898\u5df2\u89e3\u51b3 "),S.\u0275\u0275elementEnd())}function Fo(e,t){1&e&&(S.\u0275\u0275elementStart(0,"div",333),S.\u0275\u0275element(1,"img",335),S.\u0275\u0275text(2," \u95ee\u9898\u672a\u89e3\u51b3 "),S.\u0275\u0275elementEnd())}function Vo(e,t){1&e&&S.\u0275\u0275element(0,"em",336)}function To(e,t){1&e&&(S.\u0275\u0275elementStart(0,"span",337),S.\u0275\u0275text(1,"\u5f88\u5dee"),S.\u0275\u0275elementEnd())}function Lo(e,t){1&e&&(S.\u0275\u0275elementStart(0,"span",337),S.\u0275\u0275text(1,"\u5dee"),S.\u0275\u0275elementEnd())}function Ro(e,t){1&e&&(S.\u0275\u0275elementStart(0,"span",337),S.\u0275\u0275text(1,"\u4e00\u822c"),S.\u0275\u0275elementEnd())}function Ao(e,t){1&e&&(S.\u0275\u0275elementStart(0,"span",337),S.\u0275\u0275text(1,"\u6ee1\u610f"),S.\u0275\u0275elementEnd())}function No(e,t){1&e&&(S.\u0275\u0275elementStart(0,"span",337),S.\u0275\u0275text(1,"\u8d85\u8d5e"),S.\u0275\u0275elementEnd())}function $o(e,t){if(1&e){const e=S.\u0275\u0275getCurrentView();S.\u0275\u0275elementStart(0,"tr"),S.\u0275\u0275elementStart(1,"td"),S.\u0275\u0275elementStart(2,"span",326),S.\u0275\u0275text(3),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(4,"dw-rate",327),S.\u0275\u0275listener("ngModelChange",function(t){return S.\u0275\u0275restoreView(e),S.\u0275\u0275nextContext().$implicit.score=t}),S.\u0275\u0275elementEnd(),S.\u0275\u0275template(5,Vo,1,0,"ng-template",null,328,S.\u0275\u0275templateRefExtractor),S.\u0275\u0275template(7,To,2,0,"span",329),S.\u0275\u0275template(8,Lo,2,0,"span",329),S.\u0275\u0275template(9,Ro,2,0,"span",329),S.\u0275\u0275template(10,Ao,2,0,"span",329),S.\u0275\u0275template(11,No,2,0,"span",329),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(12,"td"),S.\u0275\u0275text(13),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd()}if(2&e){const e=S.\u0275\u0275reference(6),t=S.\u0275\u0275nextContext().$implicit;S.\u0275\u0275advance(3),S.\u0275\u0275textInterpolate(t.returnvisit_item_name),S.\u0275\u0275advance(1),S.\u0275\u0275property("dwCharacter",e)("ngModel",t.score),S.\u0275\u0275advance(3),S.\u0275\u0275property("ngIf","1"==t.score),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf","2"==t.score),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf","3"==t.score),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf","4"==t.score),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf","5"==t.score),S.\u0275\u0275advance(2),S.\u0275\u0275textInterpolate1(" ",t.explanation," ")}}function jo(e,t){if(1&e&&(S.\u0275\u0275elementContainerStart(0),S.\u0275\u0275template(1,$o,14,9,"tr",1),S.\u0275\u0275elementContainerEnd()),2&e){const e=t.$implicit;S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf","\u95ee\u9898\u89e3\u51b3\u60c5\u51b5"!==e.returnvisit_item_name)}}function zo(e,t){if(1&e&&(S.\u0275\u0275elementStart(0,"div"),S.\u0275\u0275elementStart(1,"dw-table",321,339),S.\u0275\u0275elementStart(3,"thead"),S.\u0275\u0275elementStart(4,"tr",65),S.\u0275\u0275elementStart(5,"th",323),S.\u0275\u0275template(6,ko,3,0,"div",324),S.\u0275\u0275template(7,Fo,3,0,"div",324),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(8,"tbody"),S.\u0275\u0275elementStart(9,"tr"),S.\u0275\u0275elementStart(10,"td",340),S.\u0275\u0275elementStart(11,"span",341),S.\u0275\u0275text(12,"\u56de\u8bbf\u9879\u76ee"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(13,"td"),S.\u0275\u0275elementStart(14,"span",341),S.\u0275\u0275text(15,"\u8bf4\u660e"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275template(16,jo,2,1,"ng-container",22),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd()),2&e){const e=S.\u0275\u0275reference(2),t=S.\u0275\u0275nextContext(2);S.\u0275\u0275advance(1),S.\u0275\u0275property("dwData",t.returnvisitList)("dwFrontPagination",!1),S.\u0275\u0275advance(5),S.\u0275\u0275property("ngIf",5===t.returnvisitProblemSolving),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf",0===t.returnvisitProblemSolving),S.\u0275\u0275advance(9),S.\u0275\u0275property("ngForOf",e.data)}}function Bo(e,t){if(1&e&&(S.\u0275\u0275elementStart(0,"dw-tab",316),S.\u0275\u0275elementStart(1,"div",317),S.\u0275\u0275elementStart(2,"p",277),S.\u0275\u0275text(3,"\u5ba2\u6237\u8bc4\u4ef7\uff1a"),S.\u0275\u0275elementEnd(),S.\u0275\u0275template(4,lo,6,5,"div",1),S.\u0275\u0275template(5,Mo,50,27,"div",1),S.\u0275\u0275elementStart(6,"p",62),S.\u0275\u0275text(7,"\u670d\u52a1\u56de\u8bbf\uff1a"),S.\u0275\u0275elementEnd(),S.\u0275\u0275template(8,Po,6,5,"div",1),S.\u0275\u0275template(9,zo,17,5,"div",1),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd()),2&e){const e=S.\u0275\u0275nextContext();S.\u0275\u0275advance(4),S.\u0275\u0275property("ngIf","5"==e.serviceOrderBaseInfo.state),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf","6"==e.serviceOrderBaseInfo.state),S.\u0275\u0275advance(3),S.\u0275\u0275property("ngIf","0"==e.serviceOrderBaseInfo.return_visit),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf","1"==e.serviceOrderBaseInfo.return_visit)}}function qo(e,t){if(1&e&&(S.\u0275\u0275elementStart(0,"div",344),S.\u0275\u0275element(1,"img",345),S.\u0275\u0275elementStart(2,"div",346),S.\u0275\u0275elementStart(3,"div",204),S.\u0275\u0275text(4),S.\u0275\u0275pipe(5,"date"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(6,"div",347),S.\u0275\u0275text(7),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd()),2&e){const e=t.$implicit;S.\u0275\u0275advance(4),S.\u0275\u0275textInterpolate(S.\u0275\u0275pipeBind2(5,2,e.datetime,"yyyy/MM/dd HH:mm")),S.\u0275\u0275advance(3),S.\u0275\u0275textInterpolate(e.process_record)}}function Wo(e,t){if(1&e&&(S.\u0275\u0275elementStart(0,"div",342),S.\u0275\u0275template(1,qo,8,5,"div",343),S.\u0275\u0275elementEnd()),2&e){const e=S.\u0275\u0275nextContext();S.\u0275\u0275advance(1),S.\u0275\u0275property("ngForOf",e.serviceOrderProcessrecordList)}}function Go(e,t){1&e&&S.\u0275\u0275element(0,"app-product-file-detail",null,348)}function Uo(e,t){if(1&e){const e=S.\u0275\u0275getCurrentView();S.\u0275\u0275elementStart(0,"div",349),S.\u0275\u0275text(1," \u4ea7\u54c1\u6863\u6848 "),S.\u0275\u0275elementStart(2,"img",350),S.\u0275\u0275listener("click",function(){return S.\u0275\u0275restoreView(e),S.\u0275\u0275nextContext().productFileChild.showQrcode()}),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd()}}function Ho(e,t){if(1&e&&S.\u0275\u0275element(0,"img",365),2&e){const e=S.\u0275\u0275nextContext().$implicit;S.\u0275\u0275propertyInterpolate("src",e.headImg,S.\u0275\u0275sanitizeUrl)}}function Xo(e,t){1&e&&S.\u0275\u0275element(0,"img",366)}function Qo(e,t){1&e&&(S.\u0275\u0275elementStart(0,"span"),S.\u0275\u0275text(1,"\u2014"),S.\u0275\u0275elementEnd())}function Ko(e,t){if(1&e){const e=S.\u0275\u0275getCurrentView();S.\u0275\u0275elementStart(0,"span",367),S.\u0275\u0275listener("click",function(){S.\u0275\u0275restoreView(e);const t=S.\u0275\u0275nextContext().$implicit;return S.\u0275\u0275nextContext(2).previewImageDetail(t.signature_picture)}),S.\u0275\u0275text(1,"\u70b9\u51fb\u67e5\u770b"),S.\u0275\u0275elementEnd()}}function Jo(e,t){1&e&&S.\u0275\u0275element(0,"img",373)}function Zo(e,t){1&e&&S.\u0275\u0275element(0,"img",374)}function Yo(e,t){1&e&&S.\u0275\u0275element(0,"img",375)}function el(e,t){1&e&&S.\u0275\u0275element(0,"img",376)}function tl(e,t){if(1&e){const e=S.\u0275\u0275getCurrentView();S.\u0275\u0275elementStart(0,"div",368),S.\u0275\u0275listener("click",function(){const t=S.\u0275\u0275restoreView(e).$implicit;return S.\u0275\u0275nextContext(3).downloadTechnogyFile(t.annexId)}),S.\u0275\u0275template(1,Jo,1,0,"img",369),S.\u0275\u0275template(2,Zo,1,0,"img",370),S.\u0275\u0275template(3,Yo,1,0,"img",371),S.\u0275\u0275template(4,el,1,0,"img",372),S.\u0275\u0275elementStart(5,"div",138),S.\u0275\u0275text(6),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd()}if(2&e){const e=t.$implicit;S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf",e.annexFileName.indexOf(".xls")>=0),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf",e.annexFileName.indexOf(".doc")>=0),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf",e.annexFileName.indexOf(".pdf")>=0),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf",e.annexFileName.indexOf(".ppt")>=0),S.\u0275\u0275advance(2),S.\u0275\u0275textInterpolate(e.annexFileName)}}const nl=function(){return{"0%":"#7BCAF7","100%":"#0D9DEF"}};function il(e,t){if(1&e&&(S.\u0275\u0275elementStart(0,"div",352),S.\u0275\u0275elementStart(1,"div"),S.\u0275\u0275text(2),S.\u0275\u0275pipe(3,"date"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(4,"div",353),S.\u0275\u0275template(5,Ho,1,1,"img",354),S.\u0275\u0275template(6,Xo,1,0,"img",355),S.\u0275\u0275elementStart(7,"div",356),S.\u0275\u0275elementStart(8,"div",357),S.\u0275\u0275elementStart(9,"span",138),S.\u0275\u0275text(10),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(11,"div",358),S.\u0275\u0275element(12,"dw-progress",359),S.\u0275\u0275elementEnd(),S.\u0275\u0275text(13),S.\u0275\u0275element(14,"img",360),S.\u0275\u0275text(15),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(16,"div",361),S.\u0275\u0275text(17),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(18,"div"),S.\u0275\u0275text(19," \u5ba2\u6237\u7b7e\u540d\uff1a "),S.\u0275\u0275template(20,Qo,2,0,"span",1),S.\u0275\u0275template(21,Ko,2,0,"span",362),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(22,"div",363),S.\u0275\u0275template(23,tl,7,5,"div",364),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd()),2&e){const e=t.$implicit;S.\u0275\u0275advance(2),S.\u0275\u0275textInterpolate(S.\u0275\u0275pipeBind2(3,13,e.datetime,"yyyy-MM-dd HH:mm")),S.\u0275\u0275advance(3),S.\u0275\u0275property("ngIf",e.headImg),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf",!e.headImg),S.\u0275\u0275advance(4),S.\u0275\u0275textInterpolate(e.employee_name),S.\u0275\u0275advance(2),S.\u0275\u0275property("dwShowInfo",!1)("dwPercent",e.rate_of_progress)("dwStrokeColor",S.\u0275\u0275pureFunction0(16,nl)),S.\u0275\u0275advance(1),S.\u0275\u0275textInterpolate1(" ",e.rate_of_progress,"% "),S.\u0275\u0275advance(2),S.\u0275\u0275textInterpolate1(" ",e.work_hours,"h "),S.\u0275\u0275advance(2),S.\u0275\u0275textInterpolate1(" ",e.job_content," "),S.\u0275\u0275advance(3),S.\u0275\u0275property("ngIf",!e.signature_picture),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf",e.signature_picture),S.\u0275\u0275advance(2),S.\u0275\u0275property("ngForOf",e.annexNameList)}}function rl(e,t){if(1&e&&(S.\u0275\u0275elementStart(0,"div",342),S.\u0275\u0275elementStart(1,"div",344),S.\u0275\u0275elementStart(2,"div"),S.\u0275\u0275template(3,il,24,17,"div",351),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd()),2&e){const e=S.\u0275\u0275nextContext();S.\u0275\u0275advance(3),S.\u0275\u0275property("ngForOf",e.workrecordList)}}function al(e,t){if(1&e&&S.\u0275\u0275element(0,"img",377),2&e){const e=S.\u0275\u0275nextContext();S.\u0275\u0275property("src",e.previewImage,S.\u0275\u0275sanitizeUrl)("ngStyle",S.\u0275\u0275pureFunction0(2,Qi))}}function ol(e,t){if(1&e&&S.\u0275\u0275element(0,"img",378),2&e){const e=S.\u0275\u0275nextContext();S.\u0275\u0275property("src",e.previewImage,S.\u0275\u0275sanitizeUrl)("ngStyle",S.\u0275\u0275pureFunction0(2,Qi))}}const ll=function(){return{x:"1000px"}},dl=function(){return{x:"680px"}},sl=function(){return{height:"calc(100% - 55px)",overflow:"auto","padding-bottom":"16px","padding-top":"0"}},cl=function(){return{height:"calc(100vh - 158px)",overflow:"auto",padding:"18px 24px"}};let ml=(()=>{class e{constructor(e,t,n,r,a,o,l,d,s,c,p,u,g,f,w,v,x,C,_,y,S,b,I,E,D,O){this.modalService=e,this.configService=t,this.productFileSrv=n,this.message=r,this.ssoService=a,this.dwRoutingMessageSrv=o,this.router=l,this.route=d,this.fb=s,this.serviceOrderDetailService=c,this.serviceOrderSrv=p,this.analytics=u,this.userService=g,this.dwMessageService=f,this.commonHttpService=w,this.dwDocument=v,this.dwImageViewerListService=x,this.dwImageViewerService=C,this.serviceCostOpenerService=_,this.serviceCostOpenerDataSourceService=y,this.datePipe=S,this.serviceItemSelectService=b,this.dwAuthFunctionPermissionRepository=I,this.serviceReportResource=E,this.imageResource=D,this.quantityMax=O,this.channelList=[{label:"\u5c0f\u7a0b\u5e8f",value:"1"},{label:"\u7535\u8bdd",value:"2"},{label:"QQ",value:"3"},{label:"\u90ae\u4ef6",value:"4"},{label:"\u5176\u4ed6",value:"5"}],this.routerTokbsApI="",this.reportType="",this.product_file_id="",this.service_doc_id="",this.service_mode=1,this.service_order_id="",this.currentStatusIndex=0,this.serviceDocMaterialList=[],this.showConfirmedPicture=!1,this.baseInfoFileContextList=[],this.docInfoFileContextList=[],this.calcMaterialDetailList=[],this.calcServiceItemDetailList=[],this.customerEvaluation="",this.problemSolving="5",this.serviceResponseSpeed=0,this.serviceAttitude=0,this.serviceSatisfaction=0,this.customer_feedback="",this.returnvisitList=[],this.returnvisitProblemSolving=5,this.isReviewEnable=!1,this.isReviewStamp=!1,this.review_responsible_partys=["\u5b89\u88c5","\u54c1\u8d28","\u8bbe\u8ba1","\u552e\u540e","\u5ba2\u6237","\u96f6\u4ef6\u8d28\u91cf","\u751f\u4ea7\u5236\u9020"],this.orderReviewInfo={review_date:"",review_employee_name:"",review_opinions:"",review_responsible_party:""},this.isNowUser=!1,this.isFaqChanged=!1,this.previewImage="",this.previewVisible=!1,this.previewVisibleClockIn=!1,this.userInfo={tenantId:"",userId:""},this.haveLoadReport=!1,this.haveLoadAmount=!1,this.haveLoadProcessrecord=!1,this.serviceOrderProcessrecordList=[],this.processrecordCount=0,this.distribution_all=!1,this.canEditAmount=!1,this.inAmountEdit=!1,this.isSettled=!0,this.isComponent=!1,this.product_equipment_list=[],this.custFields=[],this.custCost=[],this.serviceOrderHasCustomizeField=!1,this.serviceOrderHasCustomizeFieldCost=!1,this.service_doc=new m.DwDataTable([]),this.isClockVisible=!1,this.clockList=[],this.isCollapsed=!1,this.technologyList=[],this.technologyIds=[],this.showTechnology=!1,this.uploadatecdocs="allow",this.deletetecdocs="allow",this.actIdx=null,this.workrecordList=[],this.workrecordCount=0,this.isDownloading=!1,this.clockImgs=[{uid:"d2185cdc-d47c-41e8-a18a-a852a5d82a81",name:"img",status:"done",url:""},{uid:"d2185cdc-d47c-41e8-a18a-a852a5d82a81",name:"img",status:"done",url:""},{uid:"d2185cdc-d47c-41e8-a18a-a852a5d82a81",name:"img",status:"done",url:""}],this.isInSixMonths=!1,this.originalSn="",this.currentSn="",this.agreeChangeSn="0",this.installDebugAccept=!1,this.install={service_type_name:"",installationDateBegin:"",installationDateEnd:"",acceptanceDate:"",annexs:[],end_time:"",employee_name:""},this.signature="",this.signature_picture="",this.handlePreview=e=>(0,i.mG)(this,void 0,void 0,function*(){!e.url&&!e.preview&&(e.preview=e.thumbUrl),this.previewImage=e.url||e.preview,console.log(e),this.previewVisible=!0}),this.handlePreviewClockIn=e=>(0,i.mG)(this,void 0,void 0,function*(){this.serviceOrderDetailService.getFileById(e.uid).subscribe(e=>{this.previewImage=e.value,this.previewVisibleClockIn=!0}),console.log(e)}),this.thumbnailList2=[],this.listActionMap2={},this.handlePreview2=e=>this.dwImageViewerListService.previewModal(e,this.thumbnailList2,this.viewerAction2,this.handlePrevious2,this.handleNext2),this.handlePrevious2=e=>this.dwImageViewerListService.previous(this.thumbnailList2,e,this.viewerAction2),this.handleNext2=e=>this.dwImageViewerListService.next(this.thumbnailList2,e,this.viewerAction2),this.thumbnailList2_2=[],this.listActionMap2_2={},this.handlePreview2_2=e=>this.dwImageViewerListService.previewModal(e,this.thumbnailList2_2,this.viewerAction2_2,this.handlePrevious2_2,this.handleNext2_2),this.handlePrevious2_2=e=>this.dwImageViewerListService.previous(this.thumbnailList2_2,e,this.viewerAction2_2),this.handleNext2_2=e=>this.dwImageViewerListService.next(this.thumbnailList2_2,e,this.viewerAction2_2),this.isShowCommunication=!1,this.isShowWorksrecord=!1,this.signature_picture_visible=!1,this.beforeUploadFiles=(e,t)=>new h.Observable(t=>{console.log(e);const n=e.name.split("."),i=n[n.length-1].indexOf("xls")>=0||n[n.length-1].indexOf("doc")>=0||n[n.length-1].indexOf("ppt")>=0||n[n.length-1].indexOf("pdf")>=0;if(!i)return this.message.create("error","\u8bf7\u4e0a\u4f20\u6b63\u786e\u683c\u5f0f\u6587\u4ef6\uff01"),void t.complete();const r=e.size/1024/1024<=10;if(!r)return this.message.create("error","\u4e0a\u4f20\u6587\u4ef6\u5927\u5c0f\u8d85\u8fc710M\uff01"),void t.complete();t.next(i&&r),t.complete()}),this.getApiUrl().subscribe(e=>{this.routerTokbsApI=e}),this.route.paramMap.subscribe(e=>{this.service_order_id=e.get("id")||""}),this.route.queryParamMap.subscribe(e=>{this.queryHistory=e.get("queryHistory"),this.queryHistory&&(this.distribution_all=JSON.parse(e.get("queryHistory")).distribution_all)}),this.serviceOrderBaseInfo={type:"1",doc_date:new Date,is_under_warranty:!1,description:[""],appointment_date:new Date,picture_id:[""],contact:[""],contact_phone:[""],address:[""],latitude:null,longitude:null,delivery_date:new Date,service_type_name:[""],breakdown_name:[""],service_urgency_name:[""],doc_no:[""],customer_name:[""],product_file_code:[""],product_file_id:[""],product_file_name:[""],specification:[""],model:[""],sn:[""],state:[""],customer_settled:[""],site_settled:[""],employee_settled:[""],salesman:[""],telephone:[""],service_site_id:0,assign_to_pool:!1,remark:"",fault_phrase:"",review_employee_id:0,return_visit:"0",depot_repair_status:"0",channel:"2"},this.serviceOrderCurrentLink={state:[""],employee_name:[""],file_id:[""],employee_show:[""],state_show:[""],button_show:[""]},this.serviceDocServiceCosts=new m.DwDataTable([]),this.dwDocument.addControl("service_doc_servicecost",this.serviceDocServiceCosts)}getApiUrl(){return this.configService.get("kbsWebUrl")}getFunction(){this.dwAuthFunctionPermissionRepository.getFunctionPermissionAll().subscribe(e=>{console.log("response",e);const t=e.data.filter(e=>"service-order"===e.code)[0];this.uploadatecdocs=t.action.filter(e=>"uploadatecdocs"===e.id)[0].restriction,this.deletetecdocs=t.action.filter(e=>"deletetecdocs"===e.id)[0].restriction,console.log("\u4e0a\u4f20\u6743\u9650uploadatecdocs",this.uploadatecdocs,"\u5220\u9664\u6743\u9650deletetecdocs",this.deletetecdocs)})}initBaseData(e){var t;if(null!=e){this.service_order_id=e.service_order_id,this.serviceOrderBaseInfo.type=e.type,this.serviceOrderBaseInfo.doc_date=e.doc_date,this.serviceOrderBaseInfo.doc_no=e.doc_no,this.serviceOrderBaseInfo.customer_name=e.customer_name,this.serviceOrderBaseInfo.product_file_code=e.product_file_code,this.serviceOrderBaseInfo.product_file_id=e.product_file_id,this.serviceOrderBaseInfo.product_file_name=e.product_file_name,this.serviceOrderBaseInfo.specification=e.specification,this.serviceOrderBaseInfo.model=e.model,this.serviceOrderBaseInfo.sn=e.sn,this.serviceOrderBaseInfo.is_under_warranty=e.is_under_warranty,this.serviceOrderBaseInfo.description=e.description,this.serviceOrderBaseInfo.appointment_date=e.appointment_date,this.serviceOrderBaseInfo.channel=e.channel?e.channel:"2",this.serviceOrderBaseInfo.channelLabel=null===(t=this.channelList.filter(e=>e.value===this.serviceOrderBaseInfo.channel)[0])||void 0===t?void 0:t.label,this.serviceOrderBaseInfo.channel_explanation=e.channel_explanation,this.serviceOrderBaseInfo.picture_id=e.picture_id,this.serviceOrderBaseInfo.contact=e.contact,this.serviceOrderBaseInfo.contact_phone=e.contact_phone,this.serviceOrderBaseInfo.address=e.address,this.serviceOrderBaseInfo.latitude=e.latitude,this.serviceOrderBaseInfo.longitude=e.longitude,this.serviceOrderBaseInfo.delivery_date=e.delivery_date,this.serviceOrderBaseInfo.service_type_name=e.service_type_name,this.serviceOrderBaseInfo.breakdown_name=e.breakdown_name,this.serviceOrderBaseInfo.service_urgency_name=e.service_urgency_name,this.serviceOrderBaseInfo.customer_settled=e.customer_settled,this.serviceOrderBaseInfo.site_settled=e.site_settled,this.serviceOrderBaseInfo.employee_settled=e.employee_settled,this.serviceOrderBaseInfo.file_contexts=e.file_context,this.serviceOrderBaseInfo.salesman=e.salesman,this.serviceOrderBaseInfo.telephone=e.telephone,this.serviceOrderBaseInfo.service_site_id=e.service_site_id,this.serviceOrderBaseInfo.assign_to_pool=e.assign_to_pool,this.serviceOrderBaseInfo.remark=e.remark,this.serviceOrderBaseInfo.fault_phrase=e.fault_phrase,this.serviceOrderBaseInfo.review_employee_id=e.review_employee_id,this.serviceOrderBaseInfo.return_visit=e.return_visit,this.serviceOrderBaseInfo.depot_repair_status=e.depot_repair_status;const n=e.pictures.split(","),i=[];for(const t in this.serviceOrderBaseInfo.file_contexts)this.serviceOrderBaseInfo.file_contexts[t]&&i.push({uid:n[t],name:e.file_name[t],status:"done",url:this.serviceOrderBaseInfo.file_contexts[t]});if(this.baseInfoFileContextList=i,this.thumbnailList2=e.child.videos,this.setFileAction(this.thumbnailList2,this.listActionMap2),this.serviceOrderBaseInfo.state=e.state,this.is_under_warranty_show="\u4e0d\u5728\u4fdd",this.serviceOrderBaseInfo.is_under_warranty&&(this.is_under_warranty_show="\u5728\u4fdd"),"6"===e.state){this.customerEvaluation=e.customer_evaluation;const t=this.customerEvaluation.split(",");this.problemSolving=t[0].toString(),this.serviceResponseSpeed=Number(t[1].toString()),this.serviceAttitude=Number(t[2].toString()),this.serviceSatisfaction=Number(t[3].toString()),this.customer_feedback=e.customer_feedback}this.isReviewEnable=0===e.review_employee_id&&("5"===e.state||"6"===e.state),0!==this.serviceOrderBaseInfo.review_employee_id?(this.isReviewStamp=!0,this.serviceOrderDetailService.getServiceOrderReview(this.service_order_id).subscribe(e=>{if(e.success){const t=e.data.review_responsible_party.split(","),n=[];for(const e in t)"1"===t[e]&&n.push(this.review_responsible_partys[e]);this.orderReviewInfo={review_date:e.data.review_date,review_employee_name:e.data.review_employee_name,review_opinions:e.data.review_opinions,review_responsible_party:n.join("\u3001")}}})):this.isReviewStamp=!1,this.checkEditable()}}initLinkData(e){null!=e&&(this.serviceOrderCurrentLink.state=e.state,this.serviceOrderCurrentLink.employee_name=e.employee_name,this.serviceOrderCurrentLink.file_id=e.file_id,this.serviceOrderCurrentLink.file_context=e.file_context,this.showTechnology=this.serviceOrderCurrentLink.state<5||this.technologyList.length,this.setLinkShowInfo())}getCurrentServiceSite(){this.serviceOrderSrv.getCurrentServiceSiteInfo().subscribe(e=>{this.currentServiceSiteId=e.service_site_id,this.currentServiceSiteType=e.service_site_type})}ngOnInit(){this.userInfo=this.userService.getUserInfo(),this.getFunction(),this.getCurrentServiceSite(),this.init(""),this.service_doc=new m.DwDataTable([{}]),this.viewerAction2=this.dwImageViewerService.viewerActionDefault(),this.viewerAction2.dwDownload.disabled=!0,this.viewerAction2.dwPrevious.disabled=!1,this.viewerAction2.dwNext.disabled=!1,this.viewerAction2_2=this.dwImageViewerService.viewerActionDefault(),this.viewerAction2_2.dwDownload.disabled=!0,this.viewerAction2_2.dwPrevious.disabled=!1,this.viewerAction2_2.dwNext.disabled=!1}init(e){e?(this.service_order_id=e,this.isComponent=!0):this.isComponent=!1,this.productFileSrv.getProductFileHasCustomizeField("service_order").subscribe(e=>{this.serviceOrderHasCustomizeField="true"===e.data}),this.productFileSrv.getProductFileHasCustomizeField("service_doc").subscribe(e=>{this.serviceOrderHasCustomizeFieldCost="true"===e.data}),""!==this.service_order_id&&(this.getServiceDocServiceCosts(),this.serviceOrderDetailService.getServiceOrderBaseInfo(this.service_order_id).subscribe(e=>{var t;if(e.success){const n=[];null===(t=e.data.service_order[0].child.technologyPrograms)||void 0===t||t.forEach(e=>{e.isUpload="u",e.name=e.technology_program_name,e.id=e.technology_program_id,n.push(e.technology_program_id)}),this.technologyList=e.data.service_order[0].child.technologyPrograms||[],this.technologyIds=n||[],console.log(this.technologyList),this.clockList=e.data.coordinationPeople||[],this.service_doc=new m.DwDataTable(e.data.$custFieldsConfig&&e.data.$custFieldsConfig.service_doc&&e.data.service_doc&&e.data.service_doc.length?e.data.service_doc:[{}]),this.dwDocument.setControl("service_doc",this.service_doc),console.log("\u6392\u67e5"),console.log(this.service_doc.controls[0]),this.initBaseData(e.data.service_order[0]),this.product_equipment_list=e.data.product_equipment_list||[];const i=this.month(e.data.service_order[0].end_time,6)+" 23:59:59",r=this.datePipe.transform(new Date,"yyyy-MM-dd")+" 23:59:59";if(this.isInSixMonths=new Date(i).getTime()-new Date(r).getTime()>=0,this.product_file_id=e.data.service_order[0].product_file_id,this.agreeChangeSn=e.data.service_order[0].agree_change_sn,e.data.service_order_returnvisit&&e.data.service_order_returnvisit.length){this.returnvisitList=e.data.service_order_returnvisit;const t=this.returnvisitList.filter(e=>"\u95ee\u9898\u89e3\u51b3\u60c5\u51b5"===e.returnvisit_item_name);this.returnvisitProblemSolving=t[0].score}const a=e.data.$custFieldsConfig&&e.data.$custFieldsConfig.service_order?e.data.$custFieldsConfig.service_order:[],o=e.data.service_order[0].cust_field?JSON.parse(e.data.service_order[0].cust_field):null;if(a.length){const e=[];a.forEach(t=>{if(e.push({field_type:t.field_type,field_label:t.field_label,field_value:null}),o)for(const n in o)t.field_id===n&&(e[e.length-1].field_value=o[n])}),this.custFields=e}const l=e.data.$custFieldsConfig&&e.data.$custFieldsConfig.service_doc?e.data.$custFieldsConfig.service_doc:[],d=e.data.service_doc[0]&&e.data.service_doc[0].cust_field?JSON.parse(e.data.service_doc[0].cust_field):null;if(l.length){const e=[];l.forEach(t=>{if(e.push({field_type:t.field_type,field_label:t.field_label,field_value:null,field_id:t.field_id}),d)for(const n in d)t.field_id===n&&(e[e.length-1].field_value=d[n])}),this.custCost=e}this.serviceOrderDetailService.getServiceOrderLink(this.service_order_id).subscribe(e=>{e.success&&1===e.data.service_order_pastrecords.length&&(this.initLinkData(e.data.service_order_pastrecords[0]),this.service_doc_id=e.data.service_order_pastrecords[0].service_doc_id,this.service_mode=e.data.service_order_pastrecords[0].service_mode,console.log("this.service_mode",this.service_mode),this.service_doc_state=e.data.service_order_pastrecords[0].service_doc_state,this.getWorkrecordList(this.service_doc_id),this.serviceOrderDetailService.getUserId().subscribe(t=>{0===t.errcode&&(this.isNowUser=t.value.employeeId===e.data.service_order_pastrecords[0].service_employee_id)}))})}}),this.serviceOrderDetailService.getServiceOrderProgress(this.service_order_id).subscribe(e=>{e.success&&(this.serviceOrderProgressList=e.data.service_order_pastrecords)}),this.serviceOrderDetailService.getServiceOrderProcessrecordListCount(this.service_order_id).subscribe(e=>{e.success&&(this.processrecordCount=e.data.service_order_processrecord[0].processrecordCount)}),this.loadProcessrecord())}month(e,t){const n=new Date(e);n.setDate(n.getDate()-1);let i,r=n.getFullYear();n.getMonth()+t+1>12?(r+=1,i=n.getMonth()+t-11):i=n.getMonth()+t+1;const a=n.getDate();let o=new Date(r,i,0).getDate();return o=o<a?o:a,r+"-"+i+"-"+o}onTabChange(e){const t=e.tab.dwTitle;let n="\u8be6\u60c5-\u70b9\u51fb\u8fdb\u5ea6\u9875\u7b7e";"\u7ef4\u4fee\u62a5\u544a"===t&&(n="\u8be6\u60c5-\u70b9\u51fb\u7ef4\u4fee\u62a5\u544a\u9875\u7b7e",this.loadReport()),"\u8d39\u7528\u660e\u7ec6"===t&&(n="\u8be6\u60c5-\u70b9\u51fb\u8d39\u7528\u660e\u7ec6\u9875\u7b7e",this.loadAmount()),"\u7528\u6237\u8bc4\u4ef7"===t&&(n="\u8be6\u60c5-\u70b9\u51fb\u7528\u6237\u8bc4\u4ef7\u9875\u7b7e"),"\u5ba2\u6237\u6c9f\u901a\u8bb0\u5f55"===t&&(n="\u8be6\u60c5-\u70b9\u51fb\u5ba2\u6237\u6c9f\u901a\u8bb0\u5f55\u9875\u7b7e",this.loadProcessrecord()),this.analytics.eventTrack.next({action:n,properties:{category:"\u670d\u52a1\u5de5\u5355",label:this.userInfo.tenantId+","+this.userInfo.userId,value:0}})}loadReport(){this.haveLoadReport||this.serviceOrderDetailService.getServiceDocInfo(this.service_order_id).subscribe(e=>{if(e.success){this.haveLoadReport=!0,this.serviceDocBreakdownList=e.data.breakdown;const t=[];if(e.data.material.forEach(e=>{e.confirmed_picture_id&&t.push(new Promise((t,n)=>{this.commonHttpService.get(`restful/service/employee/Employee/File?file_id=${e.confirmed_picture_id}`).subscribe(n=>{e.confirmed_picture=n.value,t(1)})}))}),Promise.all(t).then(t=>{this.serviceDocMaterialList=e.data.material,this.showConfirmedPicture=e.data.material.some(e=>e.confirmed_picture_id)}),this.serviceDocServiceItemList=e.data.service_item,1===e.data.service_doc.length){this.originalSn=e.data.service_doc[0].original_sn,this.currentSn=e.data.service_doc[0].current_sn,this.isFaqChanged=e.data.service_doc[0].is_generated_kb,this.remark=e.data.service_doc[0].remark,this.installDebugAccept=e.data.service_order[0].install_debug_accept,this.install={service_type_name:e.data.service_order[0].service_type_name,installationDateBegin:e.data.service_doc[0].installation_date_begin,installationDateEnd:e.data.service_doc[0].installation_date_end,acceptanceDate:e.data.service_doc[0].acceptance_date,annexs:e.data.service_doc[0].child.annexs,end_time:e.data.service_order[0].end_time,employee_name:e.data.service_order[0].employee_name},this.signature=e.data.service_doc[0].signature||"",e.data.service_doc[0].signature_picture&&this.serviceOrderDetailService.getFileById(e.data.service_doc[0].signature_picture).subscribe(e=>{this.signature_picture=e.value}),this.thumbnailList2_2=e.data.service_doc[0].child.videos,this.setFileAction(this.thumbnailList2_2,this.listActionMap2_2);const t=e.data.service_doc[0].pictures.split(","),n=[];for(const i in e.data.service_doc[0].file_context)e.data.service_doc[0].file_context[i]&&n.push({uid:t[i],name:e.data.service_doc[0].file_name[i],status:"done",url:e.data.service_doc[0].file_context[i]});this.docInfoFileContextList=n}}})}searchEquipments(){this.isEquipmentsVisible=!0}equipmentsChangeVisible(e){this.isEquipmentsVisible=!1}downloadFile(e){this.serviceOrderDetailService.download({attachment_id:e}).subscribe(e=>{if(e)switch(e.type){case f.HttpEventType.Response:const t=URL.createObjectURL(e.body),n=document.createElement("a");n.href=t,n.style="visibility:hidden";const i=e.headers.get("Content-disposition").split("filename=")[1];n.download=decodeURI(i),document.body.appendChild(n),n.click(),document.body.removeChild(n)}},e=>{e.hasOwnProperty("error")&&e.error.hasOwnProperty("errorMessage")&&e.error.errorMessage&&this.message.error(e.error.errorMessage)})}loadAmount(){this.haveLoadAmount||this.serviceOrderDetailService.getServiceDocCalcDetail(this.service_order_id).subscribe(e=>{e.success&&(this.haveLoadAmount=!0,this.calcMaterialDetailList=[],this.calcServiceItemDetailList=e.data.service_item,1===e.data.service_doc_sum_temp.length&&(this.realAmount_material=e.data.service_doc_sum_temp[0].needAmount_material,this.realAmount_service_item=e.data.service_doc_sum_temp[0].needAmount_service_item,this.needAmount_all=e.data.service_doc_sum_temp[0].needAmount_all,this.realAmount_all=e.data.service_doc_sum_temp[0].realAmount_all),e.data.material.forEach(e=>{e.material_code&&this.calcMaterialDetailList.push(e)}),e.data.settlement_doc_details&&e.data.settlement_doc_details.length&&(this.isSettled=e.data.settlement_doc_details[0].settlement_doc_details_count>0),this.realAmount_material=this.realAmount_material.toFixed(2),this.realAmount_service_item=this.realAmount_service_item.toFixed(2),this.needAmount_all=this.needAmount_all.toFixed(2),this.realAmount_all=this.realAmount_all.toFixed(2),1===e.data.customer_settlement_doc.length&&(this.receivable_amt=e.data.customer_settlement_doc[0].receivable_amt.toFixed(2),this.actual_receipt_amt=e.data.customer_settlement_doc[0].actual_receipt_amt.toFixed(2)))})}openServiceItem(){this.serviceItemSelectService.setConfig([],!0),this.serviceItemSelectService.open([]).subscribe(({data:e})=>{console.log(e);const t=[],n=[];this.calcServiceItemDetailList.length&&this.calcServiceItemDetailList.forEach(e=>{t.push(e.service_item_id),n.push(e)}),e.service_item.forEach(e=>{t.indexOf(e.service_item_id)<0&&n.push(e)}),this.calcServiceItemDetailList=n,this.priceChange()})}deleteServiceItem(e){const t=[],n=[];this.calcServiceItemDetailList.forEach(e=>{t.push(e.service_item_id),n.push(e)}),n.splice(t.indexOf(e),1),this.calcServiceItemDetailList=n,this.priceChange()}loadProcessrecord(){this.haveLoadProcessrecord||this.serviceOrderDetailService.getServiceOrderProcessrecordList(this.service_order_id).subscribe(e=>{e.success&&(this.haveLoadProcessrecord=!0,this.serviceOrderProcessrecordList=e.data.service_order_processrecord)})}loadReportInfoAfterUpdate(){this.haveLoadReport=!1,this.haveLoadAmount=!1,this.loadReport(),this.loadAmount()}changeVisible(e){this.isVisible=!1,e&&(this.ngOnInit(),this.loadReportInfoAfterUpdate())}changeAddPartVisible(e){this.isAddPartVisible=!1,e&&(this.ngOnInit(),this.loadReportInfoAfterUpdate())}changeFaq(e){this.serviceOrderDetailService.getServiceDocInfo(this.service_order_id).subscribe(t=>{if(t.success){if(this.serviceDocBreakdownList=t.data.breakdown,this.serviceDocMaterialList=t.data.material,this.serviceDocServiceItemList=t.data.service_item,!this.serviceDocBreakdownList.length)return void this.message.create("error","\u65e0\u6545\u969c\u89e3\u51b3\u60c5\u51b5\uff0c\u65e0\u6cd5\u8f6c\u77e5\u8bc6\u5e93");if(1===t.data.service_doc.length){this.isFaqChanged=t.data.service_doc[0].is_generated_kb,this.remark=t.data.service_doc[0].remark;const n=t.data.service_doc[0].pictures.split(","),i=[];for(const e in t.data.service_doc[0].file_context)t.data.service_doc[0].file_context[e]&&i.push({uid:n[e],name:t.data.service_doc[0].file_name[e],status:"done",url:t.data.service_doc[0].file_context[e]});if(this.docInfoFileContextList=i,!t.data.service_doc[0].last_level)return void this.message.create("error","\u6545\u969c\u7c7b\u578b\u9009\u62e9\u6709\u8bef");this.isFaqChanged?this.message.create("error","\u5df2\u8f6c\u77e5\u8bc6\u5e93\uff01"):this.ssoService.redirectUrl(this.routerTokbsApI+"/?routerLink=kbs/faq/faq-change/"+e,!0)}}})}exportPDF(e){this.isDownloading=!0,this.serviceOrderDetailService.exportPDF({serviceDocId:e}).subscribe(e=>{if(e)switch(e.type){case f.HttpEventType.Response:const t=URL.createObjectURL(e.body),n=document.createElement("a");n.href=t,n.style="visibility:hidden";const i=e.headers.get("Content-disposition").split("filename=")[1];n.download=decodeURI(i),document.body.appendChild(n),n.click(),document.body.removeChild(n),setTimeout(()=>{this.isDownloading=!1},500)}},e=>{e.hasOwnProperty("error")&&e.error.hasOwnProperty("errorMessage")&&e.error.errorMessage&&(this.message.error(e.error.errorMessage),this.isDownloading=!1)})}getProcessStateLable(e){return"1"===e?"\u63a5\u5230\u8bf7\u6c42":"2"===e?"\u5df2\u5206\u914d":"3"===e?"\u5df2\u6d3e\u5de5":"4"===e?"\u670d\u52a1\u4e2d":"5"===e?"\u670d\u52a1\u7ed3\u675f":"6"===e?"\u5df2\u8bc4\u4ef7\u5e76\u5173\u95ed":"7"===e?"\u5df2\u53d6\u6d88":"8"===e?"\u5df2\u9000\u5355":"9"===e?"\u5df2\u6539\u6d3e":"10"===e?"\u5df2\u6302\u5355":"11"===e?"\u5ba1\u67e5\u5b8c\u6210":"12"===e?"\u8865\u5f55\u96f6\u914d\u4ef6":"13"===e?"\u5df2\u6253\u5361\u51fa\u53d1":"14"===e?"\u5df2\u6253\u5361\u5230\u8fbe":"15"===e?"\u66f4\u6539\u670d\u52a1\u62a5\u544a":"16"===e?"\u670d\u52a1\u56de\u8bbf":"17"===e?"\u66f4\u6539\u5ba1\u67e5":"18"===e?"\u62a2\u5355\u6210\u529f":"19"===e?"\u8fd4\u5382\u7ef4\u4fee":"20"===e?"\u6574\u673a\u8fd4\u5382":"21"===e?"\u6574\u673a\u53d1\u51fa":""}setLinkShowInfo(){"1"===this.serviceOrderCurrentLink.state?(this.serviceOrderCurrentLink.employee_show="\u63a5\u5355\u4eba",this.serviceOrderCurrentLink.state_show="\u5f85\u5206\u914d",this.serviceOrderCurrentLink.button_show="\u5f00\u59cb\u5206\u914d",this.currentStatusIndex=1,this.valid=!1):"2"===this.serviceOrderCurrentLink.state?(this.serviceOrderCurrentLink.employee_show="\u5206\u914d\u4eba",this.serviceOrderCurrentLink.state_show=this.serviceOrderBaseInfo.assign_to_pool?"\u5f85\u62a2\u5355":"\u5f85\u6d3e\u5de5",this.serviceOrderCurrentLink.button_show="\u5f00\u59cb\u6d3e\u5de5",this.valid=!1,this.currentStatusIndex=2):"3"===this.serviceOrderCurrentLink.state?(this.serviceOrderCurrentLink.employee_show="\u6d3e\u5de5\u5458",this.serviceOrderCurrentLink.state_show="\u5f85\u670d\u52a1",this.serviceOrderCurrentLink.button_show="\u5f00\u59cb\u670d\u52a1",this.currentStatusIndex=3,this.valid=!0):"4"===this.serviceOrderCurrentLink.state?(this.serviceOrderCurrentLink.employee_show="\u5de5\u7a0b\u5e08",this.serviceOrderCurrentLink.state_show="\u5f85\u56de\u5355",this.serviceOrderCurrentLink.button_show="\u586b\u5199\u62a5\u544a",this.currentStatusIndex=4,this.valid=!0):"5"===this.serviceOrderCurrentLink.state?(this.serviceOrderCurrentLink.employee_show="\u5904\u7406\u4eba",this.serviceOrderCurrentLink.state_show="\u5f85\u8bc4\u4ef7",this.serviceOrderCurrentLink.button_show="\u66f4\u6539\u62a5\u544a",this.valid=!0,this.currentStatusIndex=5):"6"===this.serviceOrderCurrentLink.state?(this.serviceOrderCurrentLink.employee_show="",this.serviceOrderCurrentLink.state_show="\u5df2\u5173\u95ed",this.serviceOrderCurrentLink.button_show="\u56de\u8bbf\u8bc4\u4ef7",this.valid=!0,this.currentStatusIndex=6):"7"===this.serviceOrderCurrentLink.state&&(this.serviceOrderCurrentLink.employee_show="",this.serviceOrderCurrentLink.state_show="\u5df2\u53d6\u6d88",this.serviceOrderCurrentLink.button_show="\u56de\u8bbf\u8bc4\u4ef7",this.valid=!0,this.currentStatusIndex=-1)}report(e){"1"!==this.serviceOrderBaseInfo.depot_repair_status&&"2"!==this.serviceOrderBaseInfo.depot_repair_status?(this.reportType=e,this.isVisible=!0):this.message.create("error","\u5f53\u524d\u62a5\u4fee\u8bbe\u5907\u6b63\u8fdb\u884c\u8fd4\u5382\u7ef4\u4fee\uff0c\u8bf7\u5728\u6574\u673a\u5f52\u8fd8\u540e\uff0c\u518d\u8fdb\u884c\u670d\u52a1\u62a5\u544a\u7684\u586b\u5199\uff01")}modify(){"1"===this.serviceOrderCurrentLink.state?this.distribution():"2"===this.serviceOrderCurrentLink.state&&this.dispatch()}distribution(){this.isDistributionVisible=!0}dispatch(){this.isDispatchVisible=!0}changeDistributionVisible(e){this.isDistributionVisible=e,this.ngOnInit()}changeDispatchVisible(e){this.isDispatchVisible=e,this.ngOnInit()}changeEvaluationVisible(e){this.isEvaluationVisible=e,this.ngOnInit()}changeReviewVisible(e){this.isReviewVisible=!1,e&&this.ngOnInit()}evaluation(){this.isEvaluationVisible=!0}returnvisit(){this.isReturnvisitVisible=!0}changeReturnvisitVisible(e){this.isReturnvisitVisible=!1,e&&this.ngOnInit()}review(){this.isReviewVisible=!0}returnToList(){this.router.navigate(["../../"],{relativeTo:this.route,queryParams:{queryHistory:this.queryHistory}})}openServiceCost(){this.serviceCostOpenerService.setConfig(),this.serviceCostOpenerService.open([]).subscribe(e=>{const t=e.data;if(!t||!t.length)return;const n=this.serviceDocServiceCosts.activeRows.filter(e=>t.map(e=>e.service_cost_id).includes(e.getRawValue().service_cost_id)).map(e=>e.getRawValue().service_cost_name);if(n.length>0)this.dwMessageService.warning("\u670d\u52a1\u6210\u672c\u5df2\u5b58\u5728: "+n);else for(const i of t){const e=new x;e.service_order_id=Number(this.service_order_id),e.service_doc_id=Number(this.serviceDocId),e.service_cost_id=i.service_cost_id,e.service_cost_code=i.service_cost_code,e.service_cost_name=i.service_cost_name,this.serviceDocServiceCosts.pushRow(e)}},e=>{e.hasOwnProperty("error")&&e.error.hasOwnProperty("errorMessage")&&e.error.errorMessage&&this.message.error(e.error.errorMessage)})}toggleEditable(){!this.canEdit||(this.editable=!this.editable)}saveServiceDocServiceCosts(){if(this.serviceDocServiceCosts.rows.every(e=>""===e.$state)&&this.service_doc.rows.every(e=>""===e.$state))return this.dwMessageService.warning("\u672a\u505a\u66f4\u6539"),this.toggleEditable(),void this.getBaseInfo();this.serviceDocServiceCosts.activeRows.some(e=>!e.getRawValue().cost_amt)?this.dwMessageService.error("\u4ef7\u683c\u4e0d\u80fd\u4e3a\u7a7a"):this.serviceDocServiceCosts.activeRows.some(e=>e.getRawValue().cost_amt>this.quantityMax)?this.dwMessageService.error("\u4ef7\u683c\u4e0d\u80fd\u5927\u4e8e"+this.quantityMax):(this.dwDocument._haveRead=!0,this.dwDocument.save().subscribe(e=>{this.dwMessageService.success("\u4fdd\u5b58\u6210\u529f"),this.toggleEditable(),this.getServiceDocServiceCosts(),this.getBaseInfo(),this.checkEditable()},e=>{e.hasOwnProperty("error")&&e.error.hasOwnProperty("errorMessage")&&e.error.errorMessage&&this.dwMessageService.error(e.error.errorMessage),this.toggleEditable(),this.getServiceDocServiceCosts(),this.getBaseInfo(),this.checkEditable()}))}deleteServiceDocServiceCost(e){this.serviceDocServiceCosts.deleteRow(this.serviceDocServiceCosts.rows.findIndex(t=>t===e))}cancelServiceDocServiceCosts(){this.toggleEditable(),this.getServiceDocServiceCosts(),this.getBaseInfo()}getBaseInfo(){this.serviceOrderDetailService.getServiceOrderBaseInfo(this.service_order_id).subscribe(e=>{if(e.success){e.data.$custFieldsConfig&&e.data.$custFieldsConfig.service_doc&&e.data.service_doc&&e.data.service_doc.length?(console.log(111),this.service_doc=new m.DwDataTable(e.data.service_doc)):(console.log(222),this.service_doc=new m.DwDataTable([{}])),this.dwDocument.setControl("service_doc",this.service_doc),console.log("\u6392\u67e5"),console.log(this.service_doc.controls[0]),this.initBaseData(e.data.service_order[0]);const t=e.data.$custFieldsConfig&&e.data.$custFieldsConfig.service_order?e.data.$custFieldsConfig.service_order:[],n=e.data.service_order[0].cust_field?JSON.parse(e.data.service_order[0].cust_field):null;if(t.length){const e=[];t.forEach(t=>{if(e.push({field_type:t.field_type,field_label:t.field_label,field_value:null}),n)for(const i in n)t.field_id===i&&(e[e.length-1].field_value=n[i])}),this.custFields=e}const i=e.data.$custFieldsConfig&&e.data.$custFieldsConfig.service_doc?e.data.$custFieldsConfig.service_doc:[],r=e.data.service_doc[0]&&e.data.service_doc[0].cust_field?JSON.parse(e.data.service_doc[0].cust_field):null;if(i.length){const e=[];i.forEach(t=>{if(e.push({field_type:t.field_type,field_label:t.field_label,field_value:null,field_id:t.field_id}),r)for(const n in r)t.field_id===n&&(e[e.length-1].field_value=r[n])}),this.custCost=e}}})}getServiceDocServiceCosts(){this.commonHttpService.get(`${this.serviceReportResource}/ServiceDocServiceCosts`,{serviceOrderId:String(this.service_order_id)}).subscribe(e=>{e.data&&e.data.length&&(this.serviceDocId=e.data[0].service_doc_id,e.data[0].service_doc_servicecost_id&&(this.dwDocument.clearTables(),this.serviceDocServiceCosts=new m.DwDataTable(e.data),this.dwDocument.addControl("service_doc_servicecost",this.serviceDocServiceCosts),this.dwDocument.setControl("service_doc",this.service_doc)))})}sumServiceDocServiceCosts(){return this.serviceDocServiceCosts.activeRows.map(e=>e.getRawValue().cost_amt).reduce((e,t)=>e+t,0)}checkEditable(){this.serviceOrderBaseInfo.review_employee_id?this.canEdit=!1:"5"===this.serviceOrderBaseInfo.state||"6"===this.serviceOrderBaseInfo.state?(this.canEdit=!0,this.canEditAmount="5"===this.serviceOrderBaseInfo.state&&!this.serviceOrderBaseInfo.customer_settled):this.canEdit=!1}editAmountInfo(){this.serviceOrderDetailService.getServiceOrderCustomerSettled(this.service_order_id).subscribe(e=>{e.customer_settled?(this.dwMessageService.error("\u5f53\u524d\u5de5\u5355\u5df2\u7ecf\u5ba2\u6237\u7ed3\u7b97\u5b8c\u6210\uff0c\u4e0d\u53ef\u4ee5\u4fee\u6539\uff01"),this.canEditAmount=!1,this.loadReportInfoAfterUpdate()):this.inAmountEdit=!0},e=>{e.hasOwnProperty("error")&&e.error.hasOwnProperty("errorMessage")&&e.error.errorMessage&&this.dwMessageService.error(e.error.errorMessage)})}priceChange(){let e=0;this.calcMaterialDetailList.forEach(t=>{t.customer_settlement_price=parseFloat(t.customer_settlement_price||0),t.amount=parseFloat(t.customer_settlement_price)*parseFloat(t.qty),e+=parseFloat(t.amount)});let t=0;this.calcServiceItemDetailList.forEach(e=>{e.customer_settlement_price=parseFloat(e.customer_settlement_price||0),t+=parseFloat(e.customer_settlement_price)});const n=e+t;this.realAmount_material=e.toFixed(2),this.realAmount_service_item=t.toFixed(2),this.needAmount_all=n.toFixed(2)}saveAmountInfo(){const e=[];this.calcMaterialDetailList.forEach(t=>{e.push({service_doc_partchange_id:t.service_doc_partchange_id,customer_settlement_price:t.customer_settlement_price,part_id:t.part_id,qty:t.qty,$state:"U"})});const t=[];this.calcServiceItemDetailList.forEach(e=>{t.push(e.service_doc_serviceitem_id?{service_doc_serviceitem_id:e.service_doc_serviceitem_id,service_item_id:e.service_item_id,customer_settlement_price:e.customer_settlement_price,process_description:e.process_description||"",$state:"U"}:{service_item_id:e.service_item_id,customer_settlement_price:e.customer_settlement_price,process_description:e.process_description||"",$state:"C"})}),this.serviceOrderDetailService.saveAmountInfo({dataset:{service_order:{service_order_id:this.service_order_id,service_doc_id:this.service_doc_id},service_doc_partchange:e,service_doc_serviceitem:t}}).subscribe(e=>{e.success?(this.inAmountEdit=!1,this.loadReportInfoAfterUpdate()):this.dwMessageService.error("\u6570\u636e\u4fdd\u5b58\u5931\u8d25\uff01")},e=>{e.hasOwnProperty("error")&&e.error.hasOwnProperty("errorMessage")&&e.error.errorMessage&&this.dwMessageService.error(e.error.errorMessage)})}cancelAmountInfo(){this.inAmountEdit=!1,this.loadReportInfoAfterUpdate()}setFileAction(e,t){e.forEach(e=>{t[e.uid]={dwPreview:{show:!0,title:"\u9884\u89c8"},dwCheck:{show:!0,title:"\u68c0\u67e5"},dwDownload:{show:!1,title:"\u4e0b\u8f7d"},dwRemove:{show:!1,title:"\u5220\u9664"}}})}showCommunication(){this.analytics.eventTrack.next({action:"\u8be6\u60c5-\u70b9\u51fb\u5ba2\u6237\u6c9f\u901a\u8bb0\u5f55",properties:{category:"\u670d\u52a1\u5de5\u5355",label:this.userInfo.tenantId+","+this.userInfo.userId,value:0}}),this.isShowCommunication=!0}cancelCommunication(){this.isShowCommunication=!1}getWorkrecordList(e){this.serviceOrderDetailService.getWorkrecord(e).subscribe(e=>{if(e.success){this.workrecordCount=e.data.length;const t=[];e.data.forEach(e=>{t.push(new Promise((t,n)=>{e.employee_file_id?this.serviceOrderDetailService.getFileById(e.employee_file_id).subscribe(n=>{e.headImg=n.value||"",t(1)}):(e.headImg="",t(1))}))}),Promise.all(t).then(t=>{this.workrecordList=e.data,console.log("workrecordList===>",this.workrecordList)})}})}showWorkrecord(){this.analytics.eventTrack.next({action:"\u8be6\u60c5-\u70b9\u51fb\u5de5\u4f5c\u65e5\u5fd7",properties:{category:"\u670d\u52a1\u5de5\u5355",label:this.userInfo.tenantId+","+this.userInfo.userId,value:0}}),this.isShowWorksrecord=!0}cancelWorkrecord(){this.isShowWorksrecord=!1}previewImageDetail(e){e&&this.serviceOrderDetailService.getFileById(e).subscribe(e=>{this.previewImage=e.value,this.signature_picture_visible=!0})}showEngineerClock(){this.isClockVisible=!0}changeClock(e){this.isClockVisible=e}seeDetail(e){console.log("data====>",e,e.product_file_id,e.type),this.isCollapsed=!0,console.log(this.productFileChild),setTimeout(()=>{this.productFileChild.initData(e.product_file_id,e.type)})}showDispatch(e){this.modalService.create({dwTitle:"\u6d3e\u5de5\u5907\u6ce8",dwContent:e,dwOnOk:e=>{},dwOnCancel(){},dwFooter:null})}handleFileChange(e){let t=!1;if(this.technologyList.forEach(e=>{e.isUpload=e.isUpload?"u":"c",t="c"===e.isUpload||t}),t){const t=new FormData;t.append("file",e.file.originFileObj),this.productFileSrv.saveAttachments(t).subscribe(e=>{e.success?(this.technologyIds.push(e.data),this.upLoadTechnologyList([{fileId:e.data,fileFlag:"C"}],"C")):this.message.create("error","\u6280\u672f\u65b9\u6848\u4e0a\u4f20\u5931\u8d25\uff01")},e=>{this.message.create("error","\u6280\u672f\u65b9\u6848\u4e0a\u4f20\u5931\u8d25\uff01"),this.getNewFile()})}}deleteFile(e,t){this.modalService.warning({dwTitle:"\u786e\u8ba4\u5220\u9664\u8be5\u6280\u672f\u65b9\u6848\uff1f",dwContent:"\u5220\u9664\u540e\u4e0d\u53ef\u6062\u590d",dwOkText:"\u786e\u5b9a",dwOkType:"primary",dwOnOk:n=>{const i=[{fileInfoId:t,fileFlag:"D"}];this.technologyIds.splice(e,1),this.upLoadTechnologyList(i,"D")},dwCancelText:"\u53d6\u6d88",dwOnCancel(){}})}upLoadTechnologyList(e,t){const n={serviceOrderId:this.service_order_id,technologyProgram:this.technologyIds.join(","),fileInfos:e};this.serviceOrderSrv.changeTechnologyFile(n).subscribe(e=>{console.log(e),this.message.create("success","C"===t?"\u6280\u672f\u65b9\u6848\u4e0a\u4f20\u6210\u529f":"\u6280\u672f\u65b9\u6848\u5220\u9664\u6210\u529f"),this.getNewFile()},e=>{e.hasOwnProperty("error")&&e.error.hasOwnProperty("errorMessage")&&e.error.errorMessage&&this.message.error(e.error.errorMessage),this.getNewFile()})}getNewFile(){this.serviceOrderDetailService.getServiceOrderBaseInfo(this.service_order_id).subscribe(e=>{var t;const n=[];null===(t=e.data.service_order[0].child.technologyPrograms)||void 0===t||t.forEach(e=>{e.isUpload="u",e.name=e.technology_program_name,e.id=e.technology_program_id,n.push(e.technology_program_id)}),this.technologyList=e.data.service_order[0].child.technologyPrograms||[],this.technologyIds=n||[],console.log(this.technologyList)})}downloadTechnogyFile(e){this.productFileSrv.download({attachment_id:e}).subscribe(e=>{if(e)switch(e.type){case f.HttpEventType.Response:const t=URL.createObjectURL(e.body),n=document.createElement("a");n.href=t,n.style="visibility:hidden";const i=e.headers.get("Content-disposition").split("filename=")[1];n.download=decodeURI(i),document.body.appendChild(n),n.click(),document.body.removeChild(n)}},e=>{e.hasOwnProperty("error")&&e.error.hasOwnProperty("errorMessage")&&e.error.errorMessage&&this.message.error(e.error.errorMessage)})}showActBox(e){console.log(e),this.actIdx=e}stopProp(e){e.stopPropagation()}hideActBox(){console.log(this.actIdx),this.actIdx=null}}return e.\u0275fac=function(t){return new(t||e)(S.\u0275\u0275directiveInject(P.DwModalService),S.\u0275\u0275directiveInject(u.DwSystemConfigService),S.\u0275\u0275directiveInject(M.U),S.\u0275\u0275directiveInject(s.DwMessageService),S.\u0275\u0275directiveInject(p.DwSsoService),S.\u0275\u0275directiveInject(l.DwRoutingMessageService),S.\u0275\u0275directiveInject(r.Router),S.\u0275\u0275directiveInject(r.ActivatedRoute),S.\u0275\u0275directiveInject(a.FormBuilder),S.\u0275\u0275directiveInject(o.v),S.\u0275\u0275directiveInject(g.R),S.\u0275\u0275directiveInject(w.DwAnalytics),S.\u0275\u0275directiveInject(v.DwUserService),S.\u0275\u0275directiveInject(s.DwMessageService),S.\u0275\u0275directiveInject(C.$),S.\u0275\u0275directiveInject(m.DwDocument),S.\u0275\u0275directiveInject(d.DwImageViewerListService),S.\u0275\u0275directiveInject(d.DwImageViewerService),S.\u0275\u0275directiveInject(E),S.\u0275\u0275directiveInject(b),S.\u0275\u0275directiveInject(D.DatePipe),S.\u0275\u0275directiveInject(O.y),S.\u0275\u0275directiveInject(k.DwAuthFunctionPermissionRepository),S.\u0275\u0275directiveInject("ServiceReportResource"),S.\u0275\u0275directiveInject("ImageResource"),S.\u0275\u0275directiveInject("QuantityMax"))},e.\u0275cmp=S.\u0275\u0275defineComponent({type:e,selectors:[["app-service-order-detail"]],viewQuery:function(e,t){if(1&e&&S.\u0275\u0275viewQuery(Bi,5),2&e){let e;S.\u0275\u0275queryRefresh(e=S.\u0275\u0275loadQuery())&&(t.productFileChild=e.first)}},features:[S.\u0275\u0275ProvidersFeature([m.DwDocument,E,b,O.y,{provide:"DocumentResource",useValue:"restful/service/serviceDoc/ServiceReport/ServiceDocServiceCost"},{provide:"ImageResource",useValue:"../../../../../../assets/img"}])],decls:402,vars:191,consts:[[1,"dw-f-content-list","layoutClass","sales_layout","service-order-detail-page",3,"click"],[4,"ngIf"],[2,"display","flex"],[1,"box"],[1,"my-tab",3,"dwTabPosition","dwType","dwAnimated"],["dwTitle","\u57fa\u672c\u4fe1\u606f"],[1,"wrap"],[3,"dwSm","dwXs"],[1,"flex-word"],[1,"break-word"],[1,"break-word",2,"flex","1"],[1,"break-word",2,"color","#0D9DEF","cursor","pointer",3,"click"],["class","phrase",4,"ngIf"],[2,"display","inline-block"],[1,"clearfix",2,"display","inline-block"],["dwListType","picture-card",3,"dwFileList","dwShowButton","dwShowUploadList","dwPreview","dwFileListChange"],["dw-icon","","dwType","plus"],[1,"ant-upload-text"],[3,"dwVisible","dwContent","dwFooter","dwOnCancel"],["modalContent",""],["dw-col","","dwSpan","18",2,"display","inline-block"],[1,"ant-upload-list","ant-upload-list-picture-card",3,"ngClass"],[4,"ngFor","ngForOf"],["dwTitle","\u8bbe\u5907\u4fe1\u606f",4,"ngIf"],["dwTitle","\u9644\u52a0\u4fe1\u606f",4,"ngIf"],["dwTitle","\u6280\u672f\u65b9\u6848",4,"ngIf"],[1,"divide"],[1,"box2"],[3,"isDispatchVisible","visibleChanged"],["child1",""],[3,"isDistributionVisible","visibleChanged"],["child2",""],[3,"isEvaluationVisible","visibleChanged"],["childEvaluation",""],[3,"isReturnvisitVisible","visibleChanged"],["childReturnvisit",""],[3,"isReviewVisible","visibleChanged"],["childReview",""],[3,"isClockVisible","visibleChanged","previewChange"],["childClock",""],[1,"inner-box","inner"],[1,"now"],["class","info",4,"ngIf"],[1,"inner-box","noMarginBottom"],[1,"my-tab",3,"dwTabPosition","dwType","dwAnimated","dwSelectChange"],["dwTitle","\xa0\xa0\u8fdb\u5ea6\xa0\xa0","id","service-order-detail-progress-tab"],[2,"margin-top","24px","margin-left","8px"],[1,"steps",3,"dwCurrent"],["dwTitle","\u62a5\u4fee"],["dwTitle","\u5206\u914d"],["dwTitle","\u6d3e\u5de5"],["dwTitle","\u670d\u52a1",3,"dwSubtitle"],["dwTitle","\u56de\u5355"],["dwTitle","\u8bc4\u4ef7"],["communicateTemplate",""],[1,"header"],[1,"timeline"],["class","timeItem",3,"dwColor",4,"ngFor","ngForOf"],["dwTitle","\u7ef4\u4fee\u62a5\u544a","id","service-order-detail-report-tab"],["style","position: relative;margin-top: 16px;",4,"ngIf"],["class","sub-title",4,"ngIf"],["class","service-order-detail-evaluate-tab",4,"ngIf"],[1,"sub-title"],[3,"dwData"],["dwTable1",""],["dw-tr",""],["dw-th",""],["translate",""],[3,"dwData","dwScroll"],["dwTable2",""],["dw-th","","dwAlign","right"],["dw-th","",1,"align-center"],["dw-th","","width","100",4,"ngIf"],["dw-th","","dwAlign","right","width","60"],["dwTable3",""],["dw-th","",2,"min-width","96px","max-width","240px"],["class","clearfix",4,"ngIf"],["class","sub-title","style","margin-top: 0;",4,"ngIf"],["dwTitle","\u8d39\u7528\u660e\u7ec6","id","service-order-detail-amount-tab"],[2,"float","right"],[1,"grid-title"],[2,"font-size","14px"],[2,"color","#E53333","font-size","14px"],["dwTable4",""],["dw-th","",1,"align-right"],["dw-button","","dwType","default","style","margin-bottom: 16px;",3,"click",4,"ngIf"],["dwTable5",""],["dw-th","","width","46"],["dw-th","","width","72"],["dw-th","","width","106",1,"align-right"],["dw-th","","width","46","class","align-center",4,"ngIf"],[2,"margin-top","10px","margin-bottom","20px"],[2,"color","#000000","font-size","14px"],[2,"color","#E53333"],[2,"color","#000000"],[2,"font-size","14px","color","#666"],["dwTitle","\u670d\u52a1\u6210\u672c"],[2,"display","flex","justify-content","flex-end","margin-top","16px"],[2,"margin-top","20px",3,"dwData"],["ref_data",""],["dw-thead",""],["dw-th","","dwWidth","160px"],["dw-th","","dwWidth","140px",2,"padding-right","30px",3,"dwAlign"],["dw-th","","dwWidth","240px"],["dw-tbody",""],[2,"color","red"],["dwTitle","\u8bc4\u4ef7\u56de\u8bbf","id","service-order-detail-evaluate-tab",4,"ngIf"],[3,"type","visible","visibleChanged"],["child3",""],[3,"visible","visibleChanged"],["child4",""],["dwTitle","\u5ba2\u6237\u6c9f\u901a\u8bb0\u5f55",3,"dwBodyStyle","dwMaskClosable","dwWidth","dwVisible","dwFooter","dwVisibleChange","dwOnCancel"],["dwModalContent",""],["child5",""],[3,"dwTitle","dwFooter","dwBodyStyle","dwMaskClosable","dwWidth","dwVisible","dwOnCancel","dwVisibleChange"],["detailTitle",""],["dwTitle","\u5de5\u4f5c\u65e5\u5fd7",3,"dwBodyStyle","dwMaskClosable","dwWidth","dwVisible","dwFooter","dwVisibleChange","dwOnCancel"],["signature_picture_modalContent",""],["modalContentClockIn",""],[1,"issue_layout_head"],["translate","",2,"float","left","margin-right","6px","margin-left","-5px",3,"click"],["src","../../../../../../assets/img/arrow-left.svg","alt","\u8fd4\u56de"],[1,"issue_layout_title"],[2,"margin-left","3px"],[1,"phrase"],["alt","\u76f8\u5173\u56fe\u7247",3,"src","ngStyle"],[3,"dwListType","dwFile","dwItemAction","onPreview"],["titleTpl",""],["dwTitle","\u8bbe\u5907\u4fe1\u606f"],[1,"search_equipment_btn",3,"click"],["dw-icon","","dwType","search"],[1,"equipment_list"],["class","equipment",4,"ngIf"],[1,"equipment"],[1,"left_img"],["alt","\u8bbe\u5907",3,"src",4,"ngIf"],["src","../../../../../../assets/img/equipment.png","alt","\u8bbe\u5907",4,"ngIf"],[1,"right_info"],[1,"name"],[1,"info"],[1,"lable"],[1,"quipment_text"],[1,"tip"],["alt","\u8bbe\u5907",3,"src"],["src","../../../../../../assets/img/equipment.png","alt","\u8bbe\u5907"],["dwTitle","\u9644\u52a0\u4fe1\u606f"],["dw-row","",4,"ngFor","ngForOf"],["dw-row",""],["dw-col","",1,"flex-box",2,"flex","1","padding-right","16px"],[1,"label"],["dwTitle","\u6280\u672f\u65b9\u6848"],[1,"technologyBox"],["class","uploadBox",3,"disabled",4,"ngIf"],[1,"fileList"],[1,"fileRow"],[1,"fileName"],[1,"uploadName"],[1,"uploadTime"],[1,"operate"],["class","fileRow",4,"ngFor","ngForOf"],[1,"uploadBox",3,"disabled"],[2,"margin-bottom","16px",3,"dwFileList","dwBeforeUpload","dwShowUploadList","dwAccept","dwFileListChange","dwChange"],["dw-button","",3,"disabled"],["dw-icon","","dwType","upload"],["src","../../../../../../assets/img/icon_excel.png","alt","excel",4,"ngIf"],["src","../../../../../../assets/img/icon_word.png","alt","word",4,"ngIf"],["src","../../../../../../assets/img/icon_pdf.png","alt","pdf",4,"ngIf"],["src","../../../../../../assets/img/icon_ppt.png","alt","ppt",4,"ngIf"],[1,"nameInfo"],[1,"name",3,"title"],[1,"uploadName",3,"title"],[1,"uploadTime",2,"color","rgba(0,0,0,0.65)"],[3,"click"],["dw-icon","","dwType","ellipsis"],["class","action-grid",4,"ngIf"],["src","../../../../../../assets/img/icon_excel.png","alt","excel"],["src","../../../../../../assets/img/icon_word.png","alt","word"],["src","../../../../../../assets/img/icon_pdf.png","alt","pdf"],["src","../../../../../../assets/img/icon_ppt.png","alt","ppt"],[1,"action-grid"],["dw-button","","type","button","dw-col","",1,"action-button",3,"dwType","click"],["dw-icon","","dwType","download","dwTheme","outline"],["class","action-button","dw-button","","type","button","dw-col","","dwActionAuthorized","","angularticsAction","\u8be6\u60c5-\u70b9\u51fb\u5220\u9664\u6280\u672f\u65b9\u6848","dw-analyticsOn","click",3,"dwType","dwActionId","dwDefaultAuthorized","angularticsCategory","angularticsLabel","click",4,"ngIf"],["dw-button","","type","button","dw-col","","dwActionAuthorized","","angularticsAction","\u8be6\u60c5-\u70b9\u51fb\u5220\u9664\u6280\u672f\u65b9\u6848","dw-analyticsOn","click",1,"action-button",3,"dwType","dwActionId","dwDefaultAuthorized","angularticsCategory","angularticsLabel","click"],["dw-icon","","dwType","delete","dwTheme","outline"],[1,"left"],["alt","\u5934\u50cf",3,"src",4,"ngIf"],["src","../../../../../../assets/img/user-head.png","alt","\u5934\u50cf",4,"ngIf"],["dw-button","","dwActionAuthorized","","id","service-order-detail-assign","angularticsAction","\u8be6\u60c5-\u70b9\u51fb\u5f00\u59cb\u5206\u914d","dw-analyticsOn","click",3,"dwType","dwActionId","dwDefaultAuthorized","angularticsCategory","angularticsLabel","dwClick",4,"ngIf"],["dw-button","","dwActionAuthorized","","id","service-order-detail-distribute","angularticsAction","\u8be6\u60c5-\u70b9\u51fb\u5f00\u59cb\u6d3e\u5de5","dw-analyticsOn","click",3,"dwType","dwActionId","dwDefaultAuthorized","angularticsCategory","angularticsLabel","dwClick",4,"ngIf"],["dw-button","","dwActionAuthorized","","id","service-order-detail-write-report","angularticsAction","\u8be6\u60c5-\u70b9\u51fb\u586b\u5199\u62a5\u544a","dw-analyticsOn","click",3,"dwType","dwActionId","dwDefaultAuthorized","angularticsCategory","angularticsLabel","dwClick",4,"ngIf"],["alt","\u5934\u50cf",3,"src"],["src","../../../../../../assets/img/user-head.png","alt","\u5934\u50cf"],["dw-button","","dwActionAuthorized","","id","service-order-detail-assign","angularticsAction","\u8be6\u60c5-\u70b9\u51fb\u5f00\u59cb\u5206\u914d","dw-analyticsOn","click",3,"dwType","dwActionId","dwDefaultAuthorized","angularticsCategory","angularticsLabel","dwClick"],["dw-button","","dwActionAuthorized","","id","service-order-detail-distribute","angularticsAction","\u8be6\u60c5-\u70b9\u51fb\u5f00\u59cb\u6d3e\u5de5","dw-analyticsOn","click",3,"dwType","dwActionId","dwDefaultAuthorized","angularticsCategory","angularticsLabel","dwClick"],["dw-button","","dwActionAuthorized","","id","service-order-detail-write-report","angularticsAction","\u8be6\u60c5-\u70b9\u51fb\u586b\u5199\u62a5\u544a","dw-analyticsOn","click",3,"dwType","dwActionId","dwDefaultAuthorized","angularticsCategory","angularticsLabel","dwClick"],["class","serviceBox",4,"ngIf"],[1,"serviceBox"],["src","../../../../../../assets/img/icon-web-communication.png","title","\u5ba2\u6237\u6c9f\u901a\u8bb0\u5f55","style","height: 14px;width: 16px;cursor: pointer;margin-right: 4px;","alt","\u6c9f\u901a",3,"click",4,"ngIf"],["src","../../../../../../assets/img/icon-web-workrecord.png","title","\u5de5\u4f5c\u65e5\u5fd7","style","height: 14px;width: 16px;cursor: pointer;","alt","\u5de5\u4f5c\u65e5\u5fd7",3,"click",4,"ngIf"],["src","../../../../../../assets/img/icon-web-communication.png","title","\u5ba2\u6237\u6c9f\u901a\u8bb0\u5f55","alt","\u6c9f\u901a",2,"height","14px","width","16px","cursor","pointer","margin-right","4px",3,"click"],["src","../../../../../../assets/img/icon-web-workrecord.png","title","\u5de5\u4f5c\u65e5\u5fd7","alt","\u5de5\u4f5c\u65e5\u5fd7",2,"height","14px","width","16px","cursor","pointer",3,"click"],[1,"timeItem",3,"dwColor"],[1,"process-flex-box"],[1,"time"],[1,"process_state"],[1,"remark"],["class","extraInfo",4,"ngIf"],[1,"extraInfo"],[3,"click",4,"ngIf"],["src","../../../../../../assets/img/icon_dispatch_remark.png","alt","\u6d3e\u5de5\u5907\u6ce8"],["src","../../../../../../assets/img/icon_teamwork_clock.png","alt","\u534f\u540c\u4eba\u6253\u5361"],[1,"clearfix"],[2,"position","relative","margin-top","16px"],[1,"information"],["src","../../../../../../assets/img/service-order-page.png","alt","\u7ef4\u4fee\u62a5\u544a",1,"img"],[1,"infomation-word"],[2,"margin-left","5px"],[1,"infomation-time"],["class","watermark",4,"ngIf"],[2,"position","absolute","right","12px","top","40px","display","flex"],["class","mybutton","dwActionAuthorized","","id","service-order-detail-change-report","angularticsAction","\u8be6\u60c5-\u70b9\u51fb\u66f4\u6539\u62a5\u544a","dw-analyticsOn","click",3,"dwActionId","dwDefaultAuthorized","angularticsCategory","angularticsLabel","dwClick",4,"ngIf"],["class","mybutton","dwActionAuthorized","","id","service-order-detail-review","angularticsAction","\u8be6\u60c5-\u70b9\u51fb\u5ba1\u67e5","dw-analyticsOn","click",3,"dwActionId","dwDefaultAuthorized","angularticsCategory","angularticsLabel","dwClick",4,"ngIf"],["class","mybutton","dwActionAuthorized","","angularticsAction","\u8be6\u60c5-\u70b9\u51fb\u5ba1\u67e5","dw-analyticsOn","click",3,"dwActionId","dwDefaultAuthorized","angularticsCategory","angularticsLabel","dwClick",4,"ngIf"],["class","mybutton","dwActionAuthorized","","type","button","id","service-order-detail-generatedkb","angularticsAction","\u8be6\u60c5-\u70b9\u51fb\u8f6c\u77e5\u8bc6\u5e93","dw-analyticsOn","click",3,"dwDefaultAuthorized","dwActionId","angularticsCategory","angularticsLabel","dwClick",4,"ngIf"],["class","mybutton","dw-button","","dwType","text","dwActionAuthorized","","type","button","angularticsAction","\u8be6\u60c5-\u70b9\u51fb\u5bfc\u51fa","dw-analyticsOn","click",3,"dwDefaultAuthorized","dwActionId","angularticsCategory","angularticsLabel","dwLoading","dwClick",4,"ngIf"],["class","kbs2",4,"ngIf"],[1,"watermark"],["src","../../../../../../assets/img/img_ischecked.png","alt","\u5df2\u5ba1\u67e5"],[1,"review_result"],[1,"result_title"],[1,"result_content"],["class","result_item",4,"ngIf"],[1,"result_item"],[1,"result_label"],[1,"result_info"],[1,"result_info",2,"display","flex","align-items","center","flex-wrap","wrap"],["src","../../../../../../assets/img/icon_arrow2.png","alt","\u4e0d\u540c\u610f",4,"ngIf"],["src","../../../../../../assets/img/icon_arrow1.png","alt","\u540c\u610f",4,"ngIf"],["src","../../../../../../assets/img/icon_arrow2.png","alt","\u4e0d\u540c\u610f"],["src","../../../../../../assets/img/icon_arrow1.png","alt","\u540c\u610f"],["dwActionAuthorized","","id","service-order-detail-change-report","angularticsAction","\u8be6\u60c5-\u70b9\u51fb\u66f4\u6539\u62a5\u544a","dw-analyticsOn","click",1,"mybutton",3,"dwActionId","dwDefaultAuthorized","angularticsCategory","angularticsLabel","dwClick"],["src","../../../../../../assets/img/icon_edit_blue.png","alt","\u66f4\u6539",1,"write-icon"],["dwActionAuthorized","","id","service-order-detail-review","angularticsAction","\u8be6\u60c5-\u70b9\u51fb\u5ba1\u67e5","dw-analyticsOn","click",1,"mybutton",3,"dwActionId","dwDefaultAuthorized","angularticsCategory","angularticsLabel","dwClick"],["src","../../../../../../assets/img/icon_checkout.png","alt","\u5ba1\u67e5",1,"func-icon"],["dwActionAuthorized","","angularticsAction","\u8be6\u60c5-\u70b9\u51fb\u5ba1\u67e5","dw-analyticsOn","click",1,"mybutton",3,"dwActionId","dwDefaultAuthorized","angularticsCategory","angularticsLabel","dwClick"],["dwActionAuthorized","","type","button","id","service-order-detail-generatedkb","angularticsAction","\u8be6\u60c5-\u70b9\u51fb\u8f6c\u77e5\u8bc6\u5e93","dw-analyticsOn","click",1,"mybutton",3,"dwDefaultAuthorized","dwActionId","angularticsCategory","angularticsLabel","dwClick"],["src","../../../../../../assets/img/icon_knowledge.png","alt","\u8f6c\u77e5\u8bc6\u5e93",1,"knowledge-icon"],["dw-button","","dwType","text","dwActionAuthorized","","type","button","angularticsAction","\u8be6\u60c5-\u70b9\u51fb\u5bfc\u51fa","dw-analyticsOn","click",1,"mybutton",3,"dwDefaultAuthorized","dwActionId","angularticsCategory","angularticsLabel","dwLoading","dwClick"],["class","func-icon upload","src","../../../../../../assets/img/icon_upload.png","alt","\u5bfc\u51fa",4,"ngIf"],["src","../../../../../../assets/img/icon_upload.png","alt","\u5bfc\u51fa",1,"func-icon","upload"],[1,"kbs2"],["src","../../../../../../assets/img/kbs2.png","alt","\u77e5\u8bc6\u8d44\u4ea7"],[1,"service-order-detail-evaluate-tab"],[3,"dwData","dwShowPagination"],["dwTable00",""],[2,"font-weight","bold","border-top","1px solid #e8e8e8"],[2,"border-top","1px solid #e8e8e8"],["width","64",2,"font-weight","bold","border-top","1px solid #e8e8e8"],["width","106",2,"font-weight","bold","border-top","1px solid #e8e8e8"],["width","106",2,"font-weight","bold"],["colspan","3"],[2,"font-weight","bold"],[2,"min-width","96px","max-width","136px"],[2,"min-width","96px","max-width","200px"],["dw-th","","width","100"],["dwAlign","right"],["style","color:#2E8B57;",4,"ngIf"],[1,"align-center"],["style","color:#B22222;",4,"ngIf"],[2,"min-width","96px","max-width","196px"],[2,"color","#2E8B57"],[2,"color","#B22222"],[3,"item",4,"ngIf"],[3,"item"],[2,"min-width","96px","max-width","240px"],["alt","\u670d\u52a1\u7167\u7247",3,"src","ngStyle"],[1,"sub-title",2,"margin-top","0"],["class","file",4,"ngFor","ngForOf"],[1,"file"],[1,"download",3,"click"],[2,"font-size","14px","color","#666666"],["alt","\u5ba2\u6237\u7b7e\u540d",2,"width","300px",3,"src"],["dw-button","","dwType","default",3,"click"],["dw-icon","","dwType","edit"],["dw-button","","dwType","primary",3,"click"],["dw-icon","","dwType","save"],["dw-icon","","dwType","close-circle"],[2,"text-align","center","vertical-align","middle"],[1,"align-right"],[3,"ngModel","dwMin","dwStep","dwPrecision","ngModelChange"],["dw-button","","dwType","default",2,"margin-bottom","16px",3,"click"],["dw-th","","width","46",1,"align-center"],["dw-input","","type","text","maxlength","255",3,"ngModel","ngModelChange"],["title","\u5220\u9664",3,"click",4,"ngIf"],["title","\u5220\u9664",3,"click"],["src","../../../../../../assets/img/icon_delete.png","alt","\u5220\u9664",1,"action-icon"],["src","../../../../../../assets/img/icon_delete_hover.png","alt","\u5220\u9664",1,"action-icon"],["dw-button","","dwType","default",2,"float","left","margin-top","16px",3,"click"],["dw-button","","dwType","default","dwActionAuthorized","",3,"dwActionId","dwDefaultAuthorized","click"],["dw-button","","dwType","primary","dwActionAuthorized","",3,"dwActionId","dwDefaultAuthorized","click"],["dw-button","","dwType","primary",3,"disabled","click"],["dw-th","","dwWidth","64px","dwAlign","center"],["dw-tbody-tr","",3,"formGroup"],["dw-tbody-td",""],["dw-tbody-td","",2,"padding-right","30px",3,"dwAlign"],["formControlName","cost_amt",3,"dwMin","dwStep","dwPrecision"],["dw-input","","maxlength","50","formControlName","description"],["dw-tbody-td","",1,"align-center"],["title","\u5220\u9664","dwActionAuthorized","",3,"dwActionId","dwDefaultAuthorized"],["dw-popconfirm","",3,"dwPopconfirmTitle","dwOkText","dwCancelText","dwOnConfirm"],["dw-popconfirm",""],["alt","\u5220\u9664",1,"action-icon",3,"src"],[1,"sub-title",2,"margin-top","20px"],[1,"anther-info",2,"margin-left","20px"],["cols","1","labelSpan","20","inputSpan","20","tableName","service_doc",3,"group","dwDocument"],["dwTitle","\u8bc4\u4ef7\u56de\u8bbf","id","service-order-detail-evaluate-tab"],[1,"service-order-detail-evaluate-tab",2,"margin-top","16px"],[1,"no-data-text"],[2,"text-align","center"],["dw-button","","dwActionAuthorized","","id","service-order-detail-evaluate","angularticsAction","\u8be6\u60c5-\u70b9\u51fb\u5b8c\u5584\u8bc4\u4ef7","dw-analyticsOn","click",3,"dwType","dwActionId","dwDefaultAuthorized","angularticsCategory","angularticsLabel","dwClick"],[3,"dwData","dwFrontPagination"],["dwTable0",""],["dw-th","","colspan","2",2,"background","#fafafa","padding","12px 24px"],["class","resolve-text",4,"ngIf"],["width","320"],[1,"returnvisit-label"],["dwDisabled","",3,"dwCharacter","ngModel","ngModelChange"],["characterIcon",""],["class","score-text",4,"ngIf"],[2,"min-height","94px"],[2,"color","rgba(0,0,0,0.65)"],[2,"color","rgba(0,0,0,0.85)"],[1,"resolve-text"],["src","../../../../../../assets/img/img_right.png","alt","\u95ee\u9898\u5df2\u89e3\u51b3",2,"width","40px","margin-right","16px"],["src","../../../../../../assets/img/img_wrong.png","alt","\u95ee\u9898\u672a\u89e3\u51b3",2,"width","40px","margin-right","16px"],["dw-icon","","dwTheme","fill","dwType","heart"],[1,"score-text"],["dw-button","","dwActionAuthorized","","angularticsAction","\u8be6\u60c5-\u70b9\u51fb\u670d\u52a1\u56de\u8bbf","dw-analyticsOn","click",3,"dwType","dwActionId","dwDefaultAuthorized","angularticsCategory","angularticsLabel","dwClick"],["dwTable",""],["width","320","dwAlign","center"],["translate","",2,"font-weight","bold"],[1,"processrecord-wrap"],["class","processrecord-card",4,"ngFor","ngForOf"],[1,"processrecord-card"],["src","../../../../../../assets/img/icon_communication_gray.png","alt","\u6c9f\u901a",2,"height","25px","width","28px","margin-top","4px"],[1,"detail"],[1,"record"],["productFileChild",""],[1,"detail-title"],["src","../../../../../../assets/img/qrcode.png","alt","\u4e8c\u7ef4\u7801",1,"qrcode",3,"click"],["class","workrecordBox",4,"ngFor","ngForOf"],[1,"workrecordBox"],[1,"infoBox"],["class","head","alt","",3,"src",4,"ngIf"],["class","head","src","../../../../../../assets/img/user-head.png","alt","",4,"ngIf"],[1,"infoDetail"],[1,"row"],[2,"width","100px","margin-right","10px"],["dwSize","small",3,"dwShowInfo","dwPercent","dwStrokeColor"],["src","../../../../../../assets/img/icon_clock.png","alt","",1,"clock"],[2,"word-break","break-all"],["class","blue",3,"click",4,"ngIf"],[1,"files"],["class","file","style","cursor: pointer;",3,"click",4,"ngFor","ngForOf"],["alt","",1,"head",3,"src"],["src","../../../../../../assets/img/user-head.png","alt","",1,"head"],[1,"blue",3,"click"],[1,"file",2,"cursor","pointer",3,"click"],["class","logo","src","../../../../../../assets/img/icon_excel.png","alt","excel",4,"ngIf"],["class","logo","src","../../../../../../assets/img/icon_word.png","alt","word",4,"ngIf"],["class","logo","src","../../../../../../assets/img/icon_pdf.png","alt","pdf",4,"ngIf"],["class","logo","src","../../../../../../assets/img/icon_ppt.png","alt","ppt",4,"ngIf"],["src","../../../../../../assets/img/icon_excel.png","alt","excel",1,"logo"],["src","../../../../../../assets/img/icon_word.png","alt","word",1,"logo"],["src","../../../../../../assets/img/icon_pdf.png","alt","pdf",1,"logo"],["src","../../../../../../assets/img/icon_ppt.png","alt","ppt",1,"logo"],["alt","\u5ba2\u6237\u7b7e\u540d",3,"src","ngStyle"],["alt","\u6253\u5361\u7167\u7247",3,"src","ngStyle"]],template:function(e,t){if(1&e&&(S.\u0275\u0275elementStart(0,"dw-content",0),S.\u0275\u0275listener("click",function(){return t.hideActBox()}),S.\u0275\u0275template(1,qi,8,0,"ng-container",1),S.\u0275\u0275elementStart(2,"div"),S.\u0275\u0275elementStart(3,"div",2),S.\u0275\u0275elementStart(4,"div",3),S.\u0275\u0275elementStart(5,"dw-tabset",4),S.\u0275\u0275elementStart(6,"dw-tab",5),S.\u0275\u0275elementStart(7,"div",6),S.\u0275\u0275elementStart(8,"dw-form-item"),S.\u0275\u0275elementStart(9,"dw-form-control",7),S.\u0275\u0275text(10),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(11,"dw-form-item"),S.\u0275\u0275elementStart(12,"dw-form-control",7),S.\u0275\u0275text(13),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(14,"dw-form-item"),S.\u0275\u0275elementStart(15,"dw-form-control",7),S.\u0275\u0275elementStart(16,"div",8),S.\u0275\u0275elementStart(17,"span"),S.\u0275\u0275text(18),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(19,"span",9),S.\u0275\u0275text(20),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(21,"dw-form-item"),S.\u0275\u0275elementStart(22,"dw-form-control",7),S.\u0275\u0275elementStart(23,"div",8),S.\u0275\u0275elementStart(24,"span"),S.\u0275\u0275text(25),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(26,"span",9),S.\u0275\u0275text(27),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(28,"dw-form-item"),S.\u0275\u0275elementStart(29,"dw-form-control",7),S.\u0275\u0275elementStart(30,"div",2),S.\u0275\u0275elementStart(31,"span"),S.\u0275\u0275text(32),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(33,"span",10),S.\u0275\u0275text(34),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(35,"dw-form-item"),S.\u0275\u0275elementStart(36,"dw-form-control",7),S.\u0275\u0275elementStart(37,"div",8),S.\u0275\u0275elementStart(38,"span"),S.\u0275\u0275text(39),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(40,"span",9),S.\u0275\u0275text(41),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(42,"dw-form-item"),S.\u0275\u0275elementStart(43,"dw-form-control",7),S.\u0275\u0275elementStart(44,"div",8),S.\u0275\u0275elementStart(45,"span"),S.\u0275\u0275text(46),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(47,"span",11),S.\u0275\u0275listener("click",function(){return t.seeDetail(t.serviceOrderBaseInfo)}),S.\u0275\u0275text(48),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(49,"dw-form-item"),S.\u0275\u0275elementStart(50,"dw-form-control",7),S.\u0275\u0275text(51),S.\u0275\u0275pipe(52,"date"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(53,"dw-form-item"),S.\u0275\u0275elementStart(54,"dw-form-control",7),S.\u0275\u0275text(55),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(56,"dw-form-item"),S.\u0275\u0275elementStart(57,"dw-form-control",7),S.\u0275\u0275text(58),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(59,"dw-form-item"),S.\u0275\u0275elementStart(60,"dw-form-control",7),S.\u0275\u0275text(61),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(62,"dw-form-item"),S.\u0275\u0275elementStart(63,"dw-form-control",7),S.\u0275\u0275text(64," \u95ee\u9898\u63cf\u8ff0:\xa0\xa0 "),S.\u0275\u0275template(65,Wi,2,1,"div",12),S.\u0275\u0275elementStart(66,"div",13),S.\u0275\u0275text(67),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(68,"dw-form-item"),S.\u0275\u0275elementStart(69,"dw-form-control",7),S.\u0275\u0275text(70),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(71,"dw-form-item"),S.\u0275\u0275elementStart(72,"dw-form-control",7),S.\u0275\u0275text(73),S.\u0275\u0275pipe(74,"date"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(75,"dw-form-item"),S.\u0275\u0275elementStart(76,"dw-form-control",7),S.\u0275\u0275text(77," \u9884\u7ea6\u6e20\u9053:\xa0\xa0"),S.\u0275\u0275elementStart(78,"span"),S.\u0275\u0275text(79),S.\u0275\u0275elementEnd(),S.\u0275\u0275template(80,Gi,2,1,"span",1),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275template(81,Xi,4,4,"dw-form-item",1),S.\u0275\u0275elementStart(82,"dw-form-item"),S.\u0275\u0275elementStart(83,"dw-form-control",7),S.\u0275\u0275text(84),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(85,"dw-form-item"),S.\u0275\u0275elementStart(86,"dw-form-control",7),S.\u0275\u0275text(87),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(88,"dw-form-item"),S.\u0275\u0275elementStart(89,"dw-form-control",7),S.\u0275\u0275text(90),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(91,"dw-form-item"),S.\u0275\u0275elementStart(92,"dw-form-control",7),S.\u0275\u0275text(93),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(94,"dw-form-item"),S.\u0275\u0275elementStart(95,"dw-form-control",7),S.\u0275\u0275text(96),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(97,"dw-form-item"),S.\u0275\u0275elementStart(98,"dw-form-control",7),S.\u0275\u0275text(99," \u76f8\u5173\u56fe\u7247:\xa0\xa0 "),S.\u0275\u0275elementStart(100,"div",14),S.\u0275\u0275elementStart(101,"dw-upload",15),S.\u0275\u0275listener("dwFileListChange",function(e){return t.baseInfoFileContextList=e}),S.\u0275\u0275element(102,"em",16),S.\u0275\u0275elementStart(103,"div",17),S.\u0275\u0275text(104,"\u4e0a\u4f20"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(105,"dw-modal",18),S.\u0275\u0275listener("dwOnCancel",function(){return t.previewVisible=!1}),S.\u0275\u0275template(106,Ki,1,3,"ng-template",null,19,S.\u0275\u0275templateRefExtractor),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(108,"dw-form-item"),S.\u0275\u0275text(109," \u6545\u969c\u89c6\u9891:\xa0\xa0 "),S.\u0275\u0275elementStart(110,"div",20),S.\u0275\u0275elementStart(111,"div",21),S.\u0275\u0275template(112,Zi,4,4,"ng-container",22),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(113,"dw-form-item"),S.\u0275\u0275elementStart(114,"dw-form-control",7),S.\u0275\u0275text(115),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275template(116,ir,6,1,"dw-tab",23),S.\u0275\u0275template(117,lr,3,1,"dw-tab",24),S.\u0275\u0275template(118,fr,14,2,"dw-tab",25),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275element(119,"div",26),S.\u0275\u0275elementStart(120,"div",27),S.\u0275\u0275elementStart(121,"app-service-order-dispatch",28,29),S.\u0275\u0275listener("visibleChanged",function(){return t.changeDispatchVisible(!1)}),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(123,"app-service-order-distribution",30,31),S.\u0275\u0275listener("visibleChanged",function(){return t.changeDistributionVisible(!1)}),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(125,"app-service-order-evaluation",32,33),S.\u0275\u0275listener("visibleChanged",function(){return t.changeEvaluationVisible(!1)}),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(127,"app-service-order-returnvisit",34,35),S.\u0275\u0275listener("visibleChanged",function(e){return t.changeReturnvisitVisible(e)}),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(129,"app-service-order-review",36,37),S.\u0275\u0275listener("visibleChanged",function(e){return t.changeReviewVisible(e)}),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(131,"app-service-order-clock",38,39),S.\u0275\u0275listener("visibleChanged",function(){return t.changeClock(!1)})("previewChange",function(e){return t.handlePreviewClockIn(e)}),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(133,"div",40),S.\u0275\u0275elementStart(134,"div",41),S.\u0275\u0275text(135," \u5f53\u524d\u73af\u8282 "),S.\u0275\u0275elementStart(136,"span"),S.\u0275\u0275text(137),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275template(138,yr,9,6,"div",42),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(139,"div",43),S.\u0275\u0275elementStart(140,"dw-tabset",44),S.\u0275\u0275listener("dwSelectChange",function(e){return t.onTabChange(e)}),S.\u0275\u0275elementStart(141,"dw-tab",45),S.\u0275\u0275elementStart(142,"div",46),S.\u0275\u0275elementStart(143,"dw-steps",47),S.\u0275\u0275element(144,"dw-step",48),S.\u0275\u0275element(145,"dw-step",49),S.\u0275\u0275element(146,"dw-step",50),S.\u0275\u0275element(147,"dw-step",51),S.\u0275\u0275element(148,"dw-step",52),S.\u0275\u0275element(149,"dw-step",53),S.\u0275\u0275elementEnd(),S.\u0275\u0275template(150,Er,1,1,"ng-template",null,54,S.\u0275\u0275templateRefExtractor),S.\u0275\u0275elementStart(152,"p",55),S.\u0275\u0275elementStart(153,"strong"),S.\u0275\u0275elementStart(154,"span"),S.\u0275\u0275text(155,"\u6240\u6709\u52a8\u6001"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(156,"dw-timeline",56),S.\u0275\u0275template(157,Vr,11,9,"dw-timeline-item",57),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(158,"dw-tab",58),S.\u0275\u0275template(159,Gr,19,12,"div",59),S.\u0275\u0275template(160,Ur,2,0,"p",60),S.\u0275\u0275template(161,Xr,30,21,"div",61),S.\u0275\u0275elementStart(162,"p",62),S.\u0275\u0275text(163,"\u6545\u969c\u89e3\u51b3\u60c5\u51b5"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(164,"dw-table",63,64),S.\u0275\u0275elementStart(166,"thead"),S.\u0275\u0275elementStart(167,"tr",65),S.\u0275\u0275elementStart(168,"th",66),S.\u0275\u0275elementStart(169,"span",67),S.\u0275\u0275text(170,"\u6545\u969c\u540d\u79f0"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(171,"th",66),S.\u0275\u0275elementStart(172,"span",67),S.\u0275\u0275text(173,"\u6545\u969c\u90e8\u4f4d"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(174,"th",66),S.\u0275\u0275elementStart(175,"span",67),S.\u0275\u0275text(176,"\u6545\u969c\u63cf\u8ff0"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(177,"th",66),S.\u0275\u0275elementStart(178,"span",67),S.\u0275\u0275text(179,"\u5904\u7406\u8bf4\u660e"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(180,"tbody"),S.\u0275\u0275template(181,Jr,11,6,"tr",22),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(182,"p",62),S.\u0275\u0275text(183,"\u96f6\u914d\u4ef6\u66f4\u6362"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(184,"dw-table",68,69),S.\u0275\u0275elementStart(186,"thead"),S.\u0275\u0275elementStart(187,"tr",65),S.\u0275\u0275elementStart(188,"th",66),S.\u0275\u0275elementStart(189,"span",67),S.\u0275\u0275text(190,"\u539f\u96f6\u914d\u4ef6\u4fe1\u606f"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(191,"th",66),S.\u0275\u0275elementStart(192,"span",67),S.\u0275\u0275text(193,"\u539f\u96f6\u914d\u4ef6\u5e8f\u5217\u53f7"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(194,"th",70),S.\u0275\u0275elementStart(195,"span",67),S.\u0275\u0275text(196,"\u539f\u96f6\u914d\u4ef6\u6570\u91cf"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(197,"th",71),S.\u0275\u0275elementStart(198,"span",67),S.\u0275\u0275text(199,"\u9700\u8fd4\u56de"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(200,"th",66),S.\u0275\u0275elementStart(201,"span",67),S.\u0275\u0275text(202,"\u65b0\u96f6\u914d\u4ef6\u4fe1\u606f"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(203,"th",66),S.\u0275\u0275elementStart(204,"span",67),S.\u0275\u0275text(205,"\u65b0\u96f6\u914d\u4ef6\u5e8f\u5217\u53f7"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275template(206,Zr,3,0,"th",72),S.\u0275\u0275elementStart(207,"th",73),S.\u0275\u0275elementStart(208,"span",67),S.\u0275\u0275text(209,"\u6570\u91cf"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(210,"tbody"),S.\u0275\u0275template(211,oa,17,9,"tr",22),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(212,"p",62),S.\u0275\u0275text(213,"\u670d\u52a1\u9879\u76ee"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(214,"dw-table",63,74),S.\u0275\u0275elementStart(216,"thead"),S.\u0275\u0275elementStart(217,"tr",65),S.\u0275\u0275elementStart(218,"th",66),S.\u0275\u0275elementStart(219,"span",67),S.\u0275\u0275text(220,"\u670d\u52a1\u9879\u76ee"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(221,"th",75),S.\u0275\u0275elementStart(222,"span",67),S.\u0275\u0275text(223,"\u5904\u7406\u8bf4\u660e"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(224,"tbody"),S.\u0275\u0275template(225,la,5,2,"tr",22),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(226,"p",62),S.\u0275\u0275text(227,"\u670d\u52a1\u7167\u7247"),S.\u0275\u0275elementEnd(),S.\u0275\u0275template(228,sa,8,8,"div",76),S.\u0275\u0275elementStart(229,"p",62),S.\u0275\u0275text(230,"\u670d\u52a1\u89c6\u9891"),S.\u0275\u0275elementEnd(),S.\u0275\u0275template(231,ua,3,3,"div",76),S.\u0275\u0275template(232,ha,2,0,"p",77),S.\u0275\u0275template(233,Ca,2,1,"div",76),S.\u0275\u0275elementStart(234,"p",62),S.\u0275\u0275text(235,"\u5907\u6ce8"),S.\u0275\u0275elementEnd(),S.\u0275\u0275template(236,_a,3,1,"p",1),S.\u0275\u0275elementStart(237,"p",62),S.\u0275\u0275text(238,"\u5ba2\u6237\u7b7e\u540d"),S.\u0275\u0275elementEnd(),S.\u0275\u0275template(239,ya,3,1,"p",1),S.\u0275\u0275template(240,Sa,2,1,"p",1),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(241,"dw-tab",78),S.\u0275\u0275elementStart(242,"p",62),S.\u0275\u0275text(243," \u672c\u6b21\u670d\u52a1\u7684\u7ed3\u7b97\u4fe1\u606f\u5982\u4e0b\uff1a "),S.\u0275\u0275elementStart(244,"span",79),S.\u0275\u0275template(245,ba,4,0,"ng-container",1),S.\u0275\u0275template(246,Ia,4,0,"ng-container",1),S.\u0275\u0275template(247,Ea,4,0,"ng-container",1),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(248,"div",80),S.\u0275\u0275elementStart(249,"strong"),S.\u0275\u0275elementStart(250,"span",81),S.\u0275\u0275text(251,"\u6750\u6599\u8d39"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(252,"span",81),S.\u0275\u0275text(253,"\xa0\uff08\u5408\u8ba1\uff1a"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(254,"strong"),S.\u0275\u0275elementStart(255,"span",82),S.\u0275\u0275text(256,"\uffe5"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(257,"span",82),S.\u0275\u0275elementStart(258,"strong"),S.\u0275\u0275text(259),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(260,"span",81),S.\u0275\u0275text(261,"\uff09"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(262,"dw-table",68,83),S.\u0275\u0275elementStart(264,"thead"),S.\u0275\u0275elementStart(265,"tr",65),S.\u0275\u0275elementStart(266,"th",66),S.\u0275\u0275elementStart(267,"span",67),S.\u0275\u0275text(268,"\u5e8f\u53f7"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(269,"th",66),S.\u0275\u0275elementStart(270,"span",67),S.\u0275\u0275text(271,"\u914d\u4ef6\u7f16\u53f7"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(272,"th",66),S.\u0275\u0275elementStart(273,"span",67),S.\u0275\u0275text(274,"\u914d\u4ef6\u540d\u79f0"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(275,"th",66),S.\u0275\u0275elementStart(276,"span",67),S.\u0275\u0275text(277,"\u914d\u4ef6\u89c4\u683c"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(278,"th",84),S.\u0275\u0275elementStart(279,"span",67),S.\u0275\u0275text(280,"\u4f7f\u7528\u6570\u91cf"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(281,"th",84),S.\u0275\u0275elementStart(282,"span",67),S.\u0275\u0275text(283,"\u914d\u4ef6\u5355\u4ef7(\u5143)"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(284,"th",84),S.\u0275\u0275elementStart(285,"span",67),S.\u0275\u0275text(286,"\u5e94\u6536\u91d1\u989d(\u5143)"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(287,"tbody"),S.\u0275\u0275template(288,Ma,16,8,"tr",22),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(289,"div",80),S.\u0275\u0275elementStart(290,"strong"),S.\u0275\u0275elementStart(291,"span",81),S.\u0275\u0275text(292,"\u670d\u52a1\u8d39"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(293,"span",81),S.\u0275\u0275text(294,"\xa0\uff08\u5408\u8ba1\uff1a"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(295,"strong"),S.\u0275\u0275elementStart(296,"span",82),S.\u0275\u0275text(297,"\uffe5"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(298,"span",82),S.\u0275\u0275elementStart(299,"strong"),S.\u0275\u0275text(300),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(301,"span",81),S.\u0275\u0275text(302,"\uff09"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275template(303,Pa,3,0,"button",85),S.\u0275\u0275elementStart(304,"dw-table",63,86),S.\u0275\u0275elementStart(306,"thead"),S.\u0275\u0275elementStart(307,"tr",65),S.\u0275\u0275elementStart(308,"th",87),S.\u0275\u0275elementStart(309,"span",67),S.\u0275\u0275text(310,"\u5e8f\u53f7"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(311,"th",88),S.\u0275\u0275elementStart(312,"span",67),S.\u0275\u0275text(313,"\u9879\u76ee\u540d\u79f0"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(314,"th",89),S.\u0275\u0275elementStart(315,"span",67),S.\u0275\u0275text(316,"\u9879\u76ee\u4ef7\u683c(\u5143)"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(317,"th",89),S.\u0275\u0275elementStart(318,"span",67),S.\u0275\u0275text(319,"\u5e94\u6536\u91d1\u989d(\u5143)"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(320,"th",66),S.\u0275\u0275elementStart(321,"span",67),S.\u0275\u0275text(322,"\u5904\u7406\u8bf4\u660e"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275template(323,ka,3,0,"th",90),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(324,"tbody"),S.\u0275\u0275template(325,Na,14,8,"tr",22),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(326,"p",91),S.\u0275\u0275elementStart(327,"strong",92),S.\u0275\u0275text(328,"\u5e94\u6536\u91d1\u989d\uff1a"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(329,"strong"),S.\u0275\u0275elementStart(330,"span",92),S.\u0275\u0275text(331,"\uffe5"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(332,"span",93),S.\u0275\u0275elementStart(333,"strong"),S.\u0275\u0275elementStart(334,"span",92),S.\u0275\u0275text(335),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(336,"span",81),S.\u0275\u0275text(337,"\xa0 "),S.\u0275\u0275elementStart(338,"span",94),S.\u0275\u0275text(339,"\xa0"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(340,"strong",92),S.\u0275\u0275text(341,"|\xa0 \u5b9e\u6536\u91d1\u989d\uff1a"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(342,"strong"),S.\u0275\u0275elementStart(343,"strong"),S.\u0275\u0275elementStart(344,"span",82),S.\u0275\u0275text(345,"\uffe5"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(346,"span",82),S.\u0275\u0275template(347,$a,2,0,"strong",1),S.\u0275\u0275template(348,ja,2,1,"strong",1),S.\u0275\u0275elementEnd(),S.\u0275\u0275element(349,"span",81),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(350,"p",62),S.\u0275\u0275text(351,"\u5907\u6ce8\uff1a"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(352,"p"),S.\u0275\u0275elementStart(353,"span",95),S.\u0275\u0275text(354),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(355,"dw-tab",96),S.\u0275\u0275template(356,za,4,0,"ng-container",1),S.\u0275\u0275elementStart(357,"div",97),S.\u0275\u0275template(358,Wa,3,2,"ng-container",1),S.\u0275\u0275template(359,Ga,4,1,"ng-container",1),S.\u0275\u0275template(360,Ua,4,0,"ng-container",1),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(361,"p",62),S.\u0275\u0275text(362,"\u6210\u672c\u660e\u7ec6\uff1a"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(363,"dw-table",98,99),S.\u0275\u0275elementStart(365,"thead",100),S.\u0275\u0275elementStart(366,"tr",65),S.\u0275\u0275elementStart(367,"th",101),S.\u0275\u0275text(368,"\u670d\u52a1\u6210\u672c"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(369,"th",102),S.\u0275\u0275text(370,"\u6210\u672c(\u5143)"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(371,"th",103),S.\u0275\u0275text(372,"\u8bf4\u660e"),S.\u0275\u0275elementEnd(),S.\u0275\u0275template(373,Ha,3,0,"ng-container",1),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(374,"tbody",104),S.\u0275\u0275template(375,eo,2,1,"ng-container",22),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(376,"div"),S.\u0275\u0275text(377,"\u5408\u8ba1 : "),S.\u0275\u0275elementStart(378,"strong",105),S.\u0275\u0275text(379),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275template(380,oo,6,2,"div",1),S.\u0275\u0275elementEnd(),S.\u0275\u0275template(381,Bo,10,4,"dw-tab",106),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(382,"app-service-report",107,108),S.\u0275\u0275listener("visibleChanged",function(e){return t.changeVisible(e)}),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(384,"app-add-partchange-record",109,110),S.\u0275\u0275listener("visibleChanged",function(e){return t.changeAddPartVisible(e)}),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(386,"dw-modal",111),S.\u0275\u0275listener("dwVisibleChange",function(e){return t.isShowCommunication=e})("dwOnCancel",function(){return t.cancelCommunication()}),S.\u0275\u0275template(387,Wo,2,1,"ng-template",112),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(388,"app-product-equipments",109,113),S.\u0275\u0275listener("visibleChanged",function(e){return t.equipmentsChangeVisible(e)}),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(390,"dw-modal",114),S.\u0275\u0275listener("dwOnCancel",function(){return t.isCollapsed=!1})("dwVisibleChange",function(e){return t.isCollapsed=e}),S.\u0275\u0275template(391,Go,2,0,"ng-template",112),S.\u0275\u0275elementEnd(),S.\u0275\u0275template(392,Uo,3,0,"ng-template",null,115,S.\u0275\u0275templateRefExtractor),S.\u0275\u0275elementStart(394,"dw-modal",116),S.\u0275\u0275listener("dwVisibleChange",function(e){return t.isShowWorksrecord=e})("dwOnCancel",function(){return t.cancelWorkrecord()}),S.\u0275\u0275template(395,rl,4,1,"ng-template",112),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(396,"dw-modal",18),S.\u0275\u0275listener("dwOnCancel",function(){return t.signature_picture_visible=!1}),S.\u0275\u0275template(397,al,1,3,"ng-template",null,117,S.\u0275\u0275templateRefExtractor),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(399,"dw-modal",18),S.\u0275\u0275listener("dwOnCancel",function(){return t.previewVisibleClockIn=!1}),S.\u0275\u0275template(400,ol,1,3,"ng-template",null,118,S.\u0275\u0275templateRefExtractor),S.\u0275\u0275elementEnd()),2&e){const e=S.\u0275\u0275reference(107),n=S.\u0275\u0275reference(151),i=S.\u0275\u0275reference(165),r=S.\u0275\u0275reference(185),a=S.\u0275\u0275reference(215),o=S.\u0275\u0275reference(263),l=S.\u0275\u0275reference(305),d=S.\u0275\u0275reference(364),s=S.\u0275\u0275reference(393),c=S.\u0275\u0275reference(398),m=S.\u0275\u0275reference(401);S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf",!t.isComponent),S.\u0275\u0275advance(1),S.\u0275\u0275classMap(t.isComponent?"":"content-box"),S.\u0275\u0275advance(3),S.\u0275\u0275property("dwTabPosition","top")("dwType","line")("dwAnimated",!1),S.\u0275\u0275advance(4),S.\u0275\u0275property("dwSm",18)("dwXs",24),S.\u0275\u0275advance(1),S.\u0275\u0275textInterpolate1(" \u5355\u53f7: \xa0\xa0",t.serviceOrderBaseInfo.doc_no," "),S.\u0275\u0275advance(2),S.\u0275\u0275property("dwSm",18)("dwXs",24),S.\u0275\u0275advance(1),S.\u0275\u0275textInterpolate1(" \u5ba2\u6237: \xa0\xa0",t.serviceOrderBaseInfo.customer_name," "),S.\u0275\u0275advance(2),S.\u0275\u0275property("dwSm",18)("dwXs",24),S.\u0275\u0275advance(3),S.\u0275\u0275textInterpolate1("","1"===t.serviceOrderBaseInfo.type?"\u8bbe\u5907\u7f16\u53f7:":"\u4ea7\u7ebf/\u9879\u76ee\u7f16\u53f7:","\xa0\xa0"),S.\u0275\u0275advance(2),S.\u0275\u0275textInterpolate(t.serviceOrderBaseInfo.product_file_code),S.\u0275\u0275advance(2),S.\u0275\u0275property("dwSm",18)("dwXs",24),S.\u0275\u0275advance(3),S.\u0275\u0275textInterpolate1("","1"===t.serviceOrderBaseInfo.type?"\u8bbe\u5907\u540d\u79f0:":"\u4ea7\u7ebf/\u9879\u76ee\u540d\u79f0:","\xa0\xa0"),S.\u0275\u0275advance(2),S.\u0275\u0275textInterpolate(t.serviceOrderBaseInfo.product_file_name),S.\u0275\u0275advance(2),S.\u0275\u0275property("dwSm",18)("dwXs",24),S.\u0275\u0275advance(3),S.\u0275\u0275textInterpolate1("","1"===t.serviceOrderBaseInfo.type?"\u8bbe\u5907\u89c4\u683c:":"\u4ea7\u7ebf/\u9879\u76ee\u89c4\u683c:"," \xa0\xa0"),S.\u0275\u0275advance(2),S.\u0275\u0275textInterpolate(t.serviceOrderBaseInfo.specification),S.\u0275\u0275advance(2),S.\u0275\u0275property("dwSm",18)("dwXs",24),S.\u0275\u0275advance(3),S.\u0275\u0275textInterpolate1("","1"===t.serviceOrderBaseInfo.type?"\u8bbe\u5907\u578b\u53f7:":"\u4ea7\u7ebf/\u9879\u76ee\u578b\u53f7:","\xa0\xa0"),S.\u0275\u0275advance(2),S.\u0275\u0275textInterpolate(t.serviceOrderBaseInfo.model),S.\u0275\u0275advance(2),S.\u0275\u0275property("dwSm",18)("dwXs",24),S.\u0275\u0275advance(3),S.\u0275\u0275textInterpolate1("","1"===t.serviceOrderBaseInfo.type?"\u5e8f\u5217\u53f7:":"\u9879\u76ee\u53f7:","\xa0\xa0"),S.\u0275\u0275advance(2),S.\u0275\u0275textInterpolate(t.serviceOrderBaseInfo.sn),S.\u0275\u0275advance(2),S.\u0275\u0275property("dwSm",18)("dwXs",24),S.\u0275\u0275advance(1),S.\u0275\u0275textInterpolate1(" \u51fa\u5e93\u65e5\u671f:\xa0\xa0",S.\u0275\u0275pipeBind2(52,178,t.serviceOrderBaseInfo.delivery_date,"yyyy/MM/dd")," "),S.\u0275\u0275advance(3),S.\u0275\u0275property("dwSm",18)("dwXs",24),S.\u0275\u0275advance(1),S.\u0275\u0275textInterpolate1(" \u662f\u5426\u5728\u4fdd:\xa0\xa0",t.is_under_warranty_show," "),S.\u0275\u0275advance(2),S.\u0275\u0275property("dwSm",18)("dwXs",24),S.\u0275\u0275advance(1),S.\u0275\u0275textInterpolate1(" \u670d\u52a1\u7c7b\u578b:\xa0\xa0",t.serviceOrderBaseInfo.service_type_name," "),S.\u0275\u0275advance(2),S.\u0275\u0275property("dwSm",18)("dwXs",24),S.\u0275\u0275advance(1),S.\u0275\u0275textInterpolate1(" \u6545\u969c\u7c7b\u578b:\xa0\xa0",t.serviceOrderBaseInfo.breakdown_name," "),S.\u0275\u0275advance(2),S.\u0275\u0275property("dwSm",18)("dwXs",24),S.\u0275\u0275advance(2),S.\u0275\u0275property("ngIf",t.serviceOrderBaseInfo.fault_phrase),S.\u0275\u0275advance(2),S.\u0275\u0275textInterpolate(t.serviceOrderBaseInfo.description),S.\u0275\u0275advance(2),S.\u0275\u0275property("dwSm",18)("dwXs",24),S.\u0275\u0275advance(1),S.\u0275\u0275textInterpolate1(" \u7d27\u6025\u7a0b\u5ea6:\xa0\xa0",t.serviceOrderBaseInfo.service_urgency_name," "),S.\u0275\u0275advance(2),S.\u0275\u0275property("dwSm",18)("dwXs",24),S.\u0275\u0275advance(1),S.\u0275\u0275textInterpolate1(" \u9884\u7ea6\u65f6\u95f4:\xa0\xa0",S.\u0275\u0275pipeBind2(74,181,t.serviceOrderBaseInfo.appointment_date,"yyyy/MM/dd")," "),S.\u0275\u0275advance(3),S.\u0275\u0275property("dwSm",18)("dwXs",24),S.\u0275\u0275advance(3),S.\u0275\u0275textInterpolate(t.serviceOrderBaseInfo.channelLabel),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf","5"===t.serviceOrderBaseInfo.channel&&t.serviceOrderBaseInfo.channel_explanation),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf",1===t.service_mode||2===t.service_mode),S.\u0275\u0275advance(2),S.\u0275\u0275property("dwSm",18)("dwXs",24),S.\u0275\u0275advance(1),S.\u0275\u0275textInterpolate1(" \u4e1a\u52a1\u5458:\xa0\xa0",t.serviceOrderBaseInfo.salesman," "),S.\u0275\u0275advance(2),S.\u0275\u0275property("dwSm",18)("dwXs",24),S.\u0275\u0275advance(1),S.\u0275\u0275textInterpolate1(" \u624b\u673a\u53f7:\xa0\xa0",t.serviceOrderBaseInfo.telephone," "),S.\u0275\u0275advance(2),S.\u0275\u0275property("dwSm",18)("dwXs",24),S.\u0275\u0275advance(1),S.\u0275\u0275textInterpolate1(" \u8054\u7cfb\u4eba:\xa0\xa0",t.serviceOrderBaseInfo.contact," "),S.\u0275\u0275advance(2),S.\u0275\u0275property("dwSm",18)("dwXs",24),S.\u0275\u0275advance(1),S.\u0275\u0275textInterpolate1(" \u8054\u7cfb\u7535\u8bdd:\xa0\xa0",t.serviceOrderBaseInfo.contact_phone," "),S.\u0275\u0275advance(2),S.\u0275\u0275property("dwSm",18)("dwXs",24),S.\u0275\u0275advance(1),S.\u0275\u0275textInterpolate1(" \u5730\u5740:\xa0\xa0",t.serviceOrderBaseInfo.address," "),S.\u0275\u0275advance(2),S.\u0275\u0275property("dwSm",18)("dwXs",24),S.\u0275\u0275advance(3),S.\u0275\u0275property("dwFileList",t.baseInfoFileContextList)("dwShowButton",t.baseInfoFileContextList.length<0)("dwShowUploadList",S.\u0275\u0275pureFunction0(184,kr))("dwPreview",t.handlePreview),S.\u0275\u0275advance(4),S.\u0275\u0275property("dwVisible",t.previewVisible)("dwContent",e)("dwFooter",null),S.\u0275\u0275advance(6),S.\u0275\u0275property("ngClass",S.\u0275\u0275pureFunction0(185,pa)),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngForOf",t.thumbnailList2),S.\u0275\u0275advance(2),S.\u0275\u0275property("dwSm",18)("dwXs",24),S.\u0275\u0275advance(1),S.\u0275\u0275textInterpolate1(" \u5907\u6ce8:\xa0\xa0",t.serviceOrderBaseInfo.remark," "),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf","2"===t.serviceOrderBaseInfo.type),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf",t.serviceOrderHasCustomizeField),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf",t.showTechnology),S.\u0275\u0275advance(3),S.\u0275\u0275property("isDispatchVisible",t.isDispatchVisible),S.\u0275\u0275advance(2),S.\u0275\u0275property("isDistributionVisible",t.isDistributionVisible),S.\u0275\u0275advance(2),S.\u0275\u0275property("isEvaluationVisible",t.isEvaluationVisible),S.\u0275\u0275advance(2),S.\u0275\u0275property("isReturnvisitVisible",t.isReturnvisitVisible),S.\u0275\u0275advance(2),S.\u0275\u0275property("isReviewVisible",t.isReviewVisible),S.\u0275\u0275advance(2),S.\u0275\u0275property("isClockVisible",t.isClockVisible),S.\u0275\u0275advance(6),S.\u0275\u0275textInterpolate(t.serviceOrderCurrentLink.state_show),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf","\u5df2\u5173\u95ed"!==t.serviceOrderCurrentLink.state_show&&"\u5df2\u53d6\u6d88"!==t.serviceOrderCurrentLink.state_show),S.\u0275\u0275advance(2),S.\u0275\u0275property("dwTabPosition","top")("dwType","line")("dwAnimated",!1),S.\u0275\u0275advance(3),S.\u0275\u0275property("dwCurrent",t.currentStatusIndex),S.\u0275\u0275advance(4),S.\u0275\u0275property("dwSubtitle",n),S.\u0275\u0275advance(10),S.\u0275\u0275property("ngForOf",t.serviceOrderProgressList),S.\u0275\u0275advance(2),S.\u0275\u0275property("ngIf",t.install.employee_name),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf",t.installDebugAccept),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf",t.installDebugAccept),S.\u0275\u0275advance(3),S.\u0275\u0275property("dwData",t.serviceDocBreakdownList),S.\u0275\u0275advance(17),S.\u0275\u0275property("ngForOf",i.data),S.\u0275\u0275advance(3),S.\u0275\u0275property("dwData",t.serviceDocMaterialList)("dwScroll",S.\u0275\u0275pureFunction0(186,ll)),S.\u0275\u0275advance(22),S.\u0275\u0275property("ngIf",t.showConfirmedPicture),S.\u0275\u0275advance(5),S.\u0275\u0275property("ngForOf",r.data),S.\u0275\u0275advance(3),S.\u0275\u0275property("dwData",t.serviceDocServiceItemList),S.\u0275\u0275advance(11),S.\u0275\u0275property("ngForOf",a.data),S.\u0275\u0275advance(3),S.\u0275\u0275property("ngIf",t.docInfoFileContextList.length),S.\u0275\u0275advance(3),S.\u0275\u0275property("ngIf",t.thumbnailList2_2.length),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf",t.installDebugAccept),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf",t.installDebugAccept&&t.install.annexs.length),S.\u0275\u0275advance(3),S.\u0275\u0275property("ngIf",t.remark),S.\u0275\u0275advance(3),S.\u0275\u0275property("ngIf",t.signature),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf",t.signature_picture),S.\u0275\u0275advance(5),S.\u0275\u0275property("ngIf",t.canEditAmount&&!t.inAmountEdit&&!t.isSettled),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf",t.inAmountEdit),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf",t.inAmountEdit),S.\u0275\u0275advance(12),S.\u0275\u0275textInterpolate(t.realAmount_material),S.\u0275\u0275advance(3),S.\u0275\u0275property("dwData",t.calcMaterialDetailList)("dwScroll",S.\u0275\u0275pureFunction0(187,dl)),S.\u0275\u0275advance(26),S.\u0275\u0275property("ngForOf",o.data),S.\u0275\u0275advance(12),S.\u0275\u0275textInterpolate(t.realAmount_service_item),S.\u0275\u0275advance(3),S.\u0275\u0275property("ngIf",t.inAmountEdit),S.\u0275\u0275advance(1),S.\u0275\u0275property("dwData",t.calcServiceItemDetailList),S.\u0275\u0275advance(19),S.\u0275\u0275property("ngIf",t.inAmountEdit),S.\u0275\u0275advance(2),S.\u0275\u0275property("ngForOf",l.data),S.\u0275\u0275advance(10),S.\u0275\u0275textInterpolate(t.needAmount_all),S.\u0275\u0275advance(12),S.\u0275\u0275property("ngIf",null==t.actual_receipt_amt),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf",null!=t.actual_receipt_amt),S.\u0275\u0275advance(6),S.\u0275\u0275textInterpolate1("\xa0\xa0",t.remark,""),S.\u0275\u0275advance(2),S.\u0275\u0275property("ngIf",t.editable),S.\u0275\u0275advance(2),S.\u0275\u0275property("ngIf",!t.editable&&t.canEdit),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf",t.editable),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf",t.editable),S.\u0275\u0275advance(1),S.\u0275\u0275styleMap(t.editable?"margin-top: 20px;":"margin-top: 0px;"),S.\u0275\u0275advance(2),S.\u0275\u0275property("dwData",t.serviceDocServiceCosts.activeRows),S.\u0275\u0275advance(6),S.\u0275\u0275property("dwAlign",t.editable?"left":"right"),S.\u0275\u0275advance(4),S.\u0275\u0275property("ngIf",t.editable),S.\u0275\u0275advance(2),S.\u0275\u0275property("ngForOf",d.data),S.\u0275\u0275advance(4),S.\u0275\u0275textInterpolate1("\xa5",t.sumServiceDocServiceCosts().toFixed(2),""),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf",t.serviceOrderHasCustomizeFieldCost),S.\u0275\u0275advance(1),S.\u0275\u0275property("ngIf","5"==t.serviceOrderBaseInfo.state||"6"==t.serviceOrderBaseInfo.state),S.\u0275\u0275advance(1),S.\u0275\u0275property("type",t.reportType)("visible",t.isVisible),S.\u0275\u0275advance(2),S.\u0275\u0275property("visible",t.isAddPartVisible),S.\u0275\u0275advance(2),S.\u0275\u0275property("dwBodyStyle",S.\u0275\u0275pureFunction0(188,sl))("dwMaskClosable",!1)("dwWidth",420)("dwVisible",t.isShowCommunication)("dwFooter",null),S.\u0275\u0275advance(2),S.\u0275\u0275property("visible",t.isEquipmentsVisible),S.\u0275\u0275advance(2),S.\u0275\u0275property("dwTitle",s)("dwFooter",null)("dwBodyStyle",S.\u0275\u0275pureFunction0(189,cl))("dwMaskClosable",!0)("dwWidth",900)("dwVisible",t.isCollapsed),S.\u0275\u0275advance(4),S.\u0275\u0275property("dwBodyStyle",S.\u0275\u0275pureFunction0(190,sl))("dwMaskClosable",!1)("dwWidth",600)("dwVisible",t.isShowWorksrecord)("dwFooter",null),S.\u0275\u0275advance(2),S.\u0275\u0275property("dwVisible",t.signature_picture_visible)("dwContent",c)("dwFooter",null),S.\u0275\u0275advance(3),S.\u0275\u0275property("dwVisible",t.previewVisibleClockIn)("dwContent",m)("dwFooter",null)}},directives:[F.DwContentComponent,D.NgIf,V.DwTabSetComponent,V.DwTabComponent,T.DwRowDirective,L.DwFormItemComponent,T.DwColDirective,L.DwFormControlComponent,c.DwUploadComponent,R.u,A.DwIconDirective,P.DwModalComponent,D.NgClass,D.NgForOf,N.H,$.C,ce,be,ze,it,rt.DwStepsComponent,rt.DwStepComponent,Be.DwTimelineComponent,me.DwTableComponent,pe.Ct,me.DwTheadComponent,me.DwTrDirective,me.DwTableCellDirective,me.DwThMeasureDirective,pe.BL,ue.TranslateDirective,me.DwTbodyComponent,me.DwCellAlignDirective,yi,ki,P.DwModalContentDirective,Li,Ri.DwDividerComponent,D.NgStyle,d.DwImageViewerListItemComponent,En.DwButtonComponent,Dn.uG,Ai.DwActionAuthorizedDirective,w.DwAnalyticsOn,Be.DwTimelineItemComponent,pt.a,Pn.DwInputNumberComponent,a.NgControlStatus,a.NgModel,B.DwInputDirective,a.DefaultValueAccessor,a.MaxLengthValidator,a.NgControlStatusGroup,a.FormGroupDirective,a.FormControlName,Ni.DwPopconfirmDirective,$i.DwExtraFieldsComponent,z.DwRateComponent,ji.w,zi.DwProgressComponent],pipes:[D.DatePipe],styles:[".content-box[_ngcontent-%COMP%]{padding-top:0}.lessons-list[_ngcontent-%COMP%]{border-top:1px solid #e8e8e8}.divide[_ngcontent-%COMP%]{width:1px;background:#e8e8e8}.box[_ngcontent-%COMP%]{width:40%}.wrap[_ngcontent-%COMP%]{width:100%;margin-top:-4px}.box2[_ngcontent-%COMP%]{width:calc(60% - 1px);padding:24px 0 24px 24px}.text[_ngcontent-%COMP%]{font-size:16px;color:#666}.text[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#000}.inner-box[_ngcontent-%COMP%]{width:100%}.inner[_ngcontent-%COMP%]{background:#f7f7f7;padding:10px 24px;margin-bottom:12px}.inner-box[_ngcontent-%COMP%]   .now[_ngcontent-%COMP%]{width:100%;height:40px;display:flex;align-items:center;color:#000000d9;font-size:16px;font-weight:bold}.inner-box[_ngcontent-%COMP%]   .now[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#0d9def;font-size:12px;padding:3px 8px;margin-left:10px;background:#dbf2ff;border-width:1px;border-color:#0d9def;border-style:solid}.inner-box[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{width:100%;height:80px;display:flex;align-items:center;justify-content:space-between;position:relative}.inner-box[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]{height:100%;display:flex;align-items:center}.inner-box[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%}.inner-box[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{color:#000000d9;font-size:14px;margin-left:12px}  .noMarginBottom .my-tab .ant-tabs-nav{margin-bottom:0!important}.img-wrap[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}.img-wrap[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{width:90px;height:90px;margin:10px;font-size:0}.img-wrap[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%}.sub-title[_ngcontent-%COMP%]{font-size:14px;padding-left:16px;color:#000000d9;font-weight:normal;border-left:4px solid #1890ff;margin:16px 0 20px}.my-tab[_ngcontent-%COMP%]{position:relative}.watermark[_ngcontent-%COMP%]{position:relative;width:101px;height:92px}.watermark[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%}.watermark[_ngcontent-%COMP%]:hover   .review_result[_ngcontent-%COMP%]{display:block}.information[_ngcontent-%COMP%]{background:#F7F7F7;width:100%;height:80px;display:flex;align-items:center;padding:17px 12px 12px 21px}.information[_ngcontent-%COMP%]   .img[_ngcontent-%COMP%]{height:47px;width:37px;margin-bottom:5px;margin-right:14px}.information[_ngcontent-%COMP%]   .information-word[_ngcontent-%COMP%]{height:19px;font-size:14px;color:#000000d9;line-height:19px}.information[_ngcontent-%COMP%]   .infomation-time[_ngcontent-%COMP%]{height:16px;font-size:12px;color:#00000073;line-height:16px}.kbs2[_ngcontent-%COMP%]{width:96px;height:32px;position:absolute;top:0;right:0}.mybutton[_ngcontent-%COMP%]{display:flex;height:40px;line-height:40px;align-items:center;padding-left:14px;color:#0d9ef0;font-weight:bold;background:none;border:none;cursor:pointer}  .ant-btn::before{background-color:#f7f7f7!important}.func-icon[_ngcontent-%COMP%]{display:block;width:17px;height:19px;margin-right:5px}.knowledge-icon[_ngcontent-%COMP%]{display:block;width:23px;height:24px;margin-right:5px}.write-icon[_ngcontent-%COMP%]{display:block;width:18px;height:18px;margin-right:5px}.upload[_ngcontent-%COMP%]{display:block;width:18px;height:17px}.review_result[_ngcontent-%COMP%]{display:none;position:absolute;top:92px;left:0px;z-index:4;width:340px;background:#fff;box-shadow:0 0 6px 6px #9393931a}.review_result[_ngcontent-%COMP%]   .result_title[_ngcontent-%COMP%]{color:#000000d9;font-weight:bold;line-height:36px;background:#f7f7f7;border-bottom:1px solid #ddd;padding:0 16px}.review_result[_ngcontent-%COMP%]   .result_content[_ngcontent-%COMP%]{padding:18px 16px}.review_result[_ngcontent-%COMP%]   .result_content[_ngcontent-%COMP%]   .result_item[_ngcontent-%COMP%]{display:flex;margin-bottom:8px}.review_result[_ngcontent-%COMP%]   .result_content[_ngcontent-%COMP%]   .result_item[_ngcontent-%COMP%]   .result_label[_ngcontent-%COMP%]{width:76px;font-weight:bold}.review_result[_ngcontent-%COMP%]   .result_content[_ngcontent-%COMP%]   .result_item[_ngcontent-%COMP%]   .result_info[_ngcontent-%COMP%]{flex:1}.review_result[_ngcontent-%COMP%]   .result_content[_ngcontent-%COMP%]   .result_item[_ngcontent-%COMP%]   .result_info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 5px 0 0}.review_result[_ngcontent-%COMP%]   .result_content[_ngcontent-%COMP%]   .result_item[_ngcontent-%COMP%]   .result_info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#999;font-size:12px;display:flex;align-items:center}.review_result[_ngcontent-%COMP%]   .result_content[_ngcontent-%COMP%]   .result_item[_ngcontent-%COMP%]   .result_info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:14px;margin:0 5px}.review_result[_ngcontent-%COMP%]   .result_content[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{color:#000000a6;text-align:right;margin-bottom:4px}.review_result[_ngcontent-%COMP%]   .result_content[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]{color:#00000073;text-align:right}.grid-title[_ngcontent-%COMP%]{margin:18px 0 10px}.ant-table-placeholder[_ngcontent-%COMP%]{margin-bottom:16px}.steps[_ngcontent-%COMP%]{margin-top:32px}.inner-box[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{margin-top:28px;margin-bottom:18px}.inner-box[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#000000d9}.timeItem[_ngcontent-%COMP%]{color:#00000073;display:flex}.process-flex-box[_ngcontent-%COMP%]{display:flex}.process-flex-box[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]{width:120px}.process-flex-box[_ngcontent-%COMP%]   .remark[_ngcontent-%COMP%]{flex:1}.process_state[_ngcontent-%COMP%]{color:#000;padding:0 20px;display:inline-block;width:125px}.timeItem-remark[_ngcontent-%COMP%]{display:inline-block;margin-left:8px;cursor:pointer;position:relative}.timeItem-remark[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:16px;height:16px}.distribute-remark[_ngcontent-%COMP%]{display:none;position:absolute;top:28px;left:50%;transform:translate(-50%);padding:8px 14px;color:#fff;font-size:12px;z-index:4;white-space:nowrap;background:rgba(0,0,0,.75);border-radius:4px}.distribute-remark.word-wrap[_ngcontent-%COMP%]{width:210px;white-space:normal}.timeItem-remark[_ngcontent-%COMP%]:hover   .distribute-remark[_ngcontent-%COMP%]{display:block}.kbs[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:80px;margin-left:16px;margin-top:-2px}.phrase[_ngcontent-%COMP%]{display:inline-block;height:24px;line-height:22px;padding:0 10px;background:#f6f6f6;font-size:12px;margin-bottom:10px;border-radius:12px;border:#e7eaec solid 1px}.processrecord-count[_ngcontent-%COMP%]{color:#000000d9;font-size:14px;font-weight:bold;text-align:left}.processrecord-wrap[_ngcontent-%COMP%]{max-height:440px}.processrecord-card[_ngcontent-%COMP%]{border:rgba(0,0,0,.05) 1px;display:flex;margin-top:16px;margin-bottom:13px}.processrecord-card[_ngcontent-%COMP%]   .detail[_ngcontent-%COMP%]{flex:1;margin-left:16px;padding-bottom:8px;border-bottom:1px solid rgba(0,0,0,.05)}.processrecord-card[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]{color:#00000073;text-align:left;font-size:14px}.processrecord-card[_ngcontent-%COMP%]   .record[_ngcontent-%COMP%]{color:#000000d9;text-align:left;font-size:14px;white-space:wrap}.no-data-text[_ngcontent-%COMP%]{text-align:center;font-weight:bold;margin-bottom:12px;padding-top:20px}.returnvisit-label[_ngcontent-%COMP%]{display:inline-block;width:120px;padding-right:20px;padding-left:12px;text-align:right}.resolve-text[_ngcontent-%COMP%]{display:flex;align-items:center;color:#333;font-size:20px;font-weight:bold}.score-text[_ngcontent-%COMP%]{color:#00000073;font-size:12px;margin-left:12px;vertical-align:1px}.file[_ngcontent-%COMP%]{width:336px;height:34px;display:flex;align-items:center;padding:0 10px;margin-top:4px;margin-bottom:10px;border:1px solid #dadada;border-radius:3px}.file[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:26px;height:26px;margin-right:6px}.file[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{flex:1;color:#333;font-size:14px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.file[_ngcontent-%COMP%]   .download[_ngcontent-%COMP%]{width:22px;text-align:right;color:#999;font-size:14px;cursor:pointer}.file[_ngcontent-%COMP%]   .download[_ngcontent-%COMP%]:hover{color:#40a9ff}.file[_ngcontent-%COMP%]   .download[_ngcontent-%COMP%]   em[_ngcontent-%COMP%]{font-size:22px}.search_equipment_btn[_ngcontent-%COMP%]{display:flex;align-items:center;color:#0d9def;font-size:14px;margin:-8px 0 10px;cursor:pointer}.search_equipment_btn[_ngcontent-%COMP%]   em[_ngcontent-%COMP%]{margin-right:5px}.equipment_list[_ngcontent-%COMP%]{padding-right:8px}.equipment[_ngcontent-%COMP%]{background:#f7f7f7;margin-bottom:12px;padding:12px;display:flex;position:relative}.equipment[_ngcontent-%COMP%]   .left_img[_ngcontent-%COMP%]{width:68px;height:68px;border:2px solid #cccccc;margin-right:10px}.equipment[_ngcontent-%COMP%]   .left_img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%}.equipment[_ngcontent-%COMP%]   .right_info[_ngcontent-%COMP%]{flex:1}.equipment[_ngcontent-%COMP%]   .right_info[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{color:#000;font-size:16px;font-weight:bold;line-height:16px;margin-bottom:8px}.equipment[_ngcontent-%COMP%]   .right_info[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#333;font-size:12px;font-weight:normal;white-space:nowrap;margin-left:4px}.equipment[_ngcontent-%COMP%]   .right_info[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{width:100%;display:flex;color:#666;font-size:12px;line-height:18px}.equipment[_ngcontent-%COMP%]   .right_info[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .lable[_ngcontent-%COMP%]{white-space:nowrap}.equipment[_ngcontent-%COMP%]   .right_info[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .quipment_text[_ngcontent-%COMP%]{color:#333;word-break:break-all}.equipment[_ngcontent-%COMP%]   .tip[_ngcontent-%COMP%]{width:40px;height:18px;line-height:18px;text-align:center;color:#fff;font-size:12px;background:#a375d5;border-top-left-radius:10px;position:absolute;right:0;bottom:0}.anther-info[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{margin-bottom:12px}.anther-info[_ngcontent-%COMP%]   .ant-input[_ngcontent-%COMP%]{width:200px}  .anther-info .ant-form-item-label{text-align:left!important}.flex-box[_ngcontent-%COMP%]{display:flex;align-items:center}.flex-word[_ngcontent-%COMP%]{display:flex;align-items:baseline}.break-word[_ngcontent-%COMP%]{flex:1;word-break:break-all}.technologyBox[_ngcontent-%COMP%]{padding-right:24px}.uploadBox[_ngcontent-%COMP%]{background-color:#f7f7f7;height:74px;width:100%;text-align:center;padding-top:10px}.uploadBox[_ngcontent-%COMP%]   .tip[_ngcontent-%COMP%]{color:#00000073;font-size:14px;white-space:nowrap;margin-top:4px}.fileList[_ngcontent-%COMP%]{margin-top:10px}.fileList[_ngcontent-%COMP%]   .fileRow[_ngcontent-%COMP%]{font-size:14px;display:flex;align-items:center;border-bottom:1px solid #f2f2f2;padding-bottom:4px;padding-top:2px}.fileList[_ngcontent-%COMP%]   .fileName[_ngcontent-%COMP%]{width:40%;display:flex;align-items:center}.fileList[_ngcontent-%COMP%]   .fileName[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:30px;height:30px;margin-right:6px}.fileList[_ngcontent-%COMP%]   .fileName[_ngcontent-%COMP%]   .nameInfo[_ngcontent-%COMP%]{width:calc(100% - 45px)}.fileList[_ngcontent-%COMP%]   .fileName[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.fileList[_ngcontent-%COMP%]   .fileName[_ngcontent-%COMP%]   .size[_ngcontent-%COMP%]{font-size:12px;color:#00000073;line-height:12px}.fileList[_ngcontent-%COMP%]   .uploadName[_ngcontent-%COMP%]{width:20%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.fileList[_ngcontent-%COMP%]   .uploadTime[_ngcontent-%COMP%]{width:30%;font-size:12px}.fileList[_ngcontent-%COMP%]   .fileRow[_ngcontent-%COMP%]:first-child{font-size:12px;color:#000000a6}.fileList[_ngcontent-%COMP%]   .operate[_ngcontent-%COMP%]{width:10%;text-align:center;position:relative;z-index:999}.fileList[_ngcontent-%COMP%]   .static[_ngcontent-%COMP%]{position:static;z-index:0}.fileList[_ngcontent-%COMP%]   .action-grid[_ngcontent-%COMP%]{width:88px;box-shadow:0 2px 4px #0000000f;border-radius:4px;position:absolute;top:20px;left:-44px;z-index:1999;background:#fff;border:1px solid #e9e9e9;display:flex;flex-direction:column}.fileList[_ngcontent-%COMP%]   .action-button[_ngcontent-%COMP%]{border:0;border-bottom:1px solid #e9e9e9;margin:0;width:100%;position:relative;z-index:2999}.fileList[_ngcontent-%COMP%]   .action-button[_ngcontent-%COMP%]:last-child{border:none}.extraInfo[_ngcontent-%COMP%]{display:flex;align-items:center}.extraInfo[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{color:#ccc;margin:0 5px}.extraInfo[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{cursor:pointer;color:#0d9def;font-size:12px;white-space:nowrap;display:flex;align-items:center}.extraInfo[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:12px;width:auto;margin-right:4px}.serviceBox[_ngcontent-%COMP%]{border:1px solid rgba(13,157,239,.96);border-radius:7px;display:flex;align-items:center;padding:3px 3px 3px 5px}.workrecordBox[_ngcontent-%COMP%]{margin-bottom:24px}.workrecordBox[_ngcontent-%COMP%]   .infoBox[_ngcontent-%COMP%]{display:flex;align-self:start;margin-top:5px}.workrecordBox[_ngcontent-%COMP%]   .infoBox[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]{width:30px;height:30px;border-radius:50%;margin-right:20px}.workrecordBox[_ngcontent-%COMP%]   .infoBox[_ngcontent-%COMP%]   .infoDetail[_ngcontent-%COMP%]{flex:1}.workrecordBox[_ngcontent-%COMP%]   .infoBox[_ngcontent-%COMP%]   .infoDetail[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{display:flex;align-items:center}.workrecordBox[_ngcontent-%COMP%]   .infoBox[_ngcontent-%COMP%]   .infoDetail[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]     .ant-progress-inner{background-color:#d9f0fe}.workrecordBox[_ngcontent-%COMP%]   .infoBox[_ngcontent-%COMP%]   .infoDetail[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-weight:600;margin-right:10px}.workrecordBox[_ngcontent-%COMP%]   .infoBox[_ngcontent-%COMP%]   .infoDetail[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .clock[_ngcontent-%COMP%]{width:14px;height:14px;margin-left:10px;margin-right:2px}.workrecordBox[_ngcontent-%COMP%]   .infoBox[_ngcontent-%COMP%]   .infoDetail[_ngcontent-%COMP%]   .blue[_ngcontent-%COMP%]{color:#0d9def;cursor:pointer}"]}),e})()},10332:function(e,t,n){n.d(t,{H:function(){return ie}});var i=n(64762),r=n(42746),a=n(1020),o=n(51156),l=n(9682),d=n(47372);class s extends l.DwClientPagingDataSource{constructor(e,t){super(),this.dwHttp=e,this.url=t}getDataList(e,t){return this.dwHttp.get(this.url).pipe((0,d.map)(n=>(this._result={currentPage:e,datas:Object.assign([],n.data.employee),pageCount:Math.ceil(n.length/t),pageSize:t,rowCount:n.length},this._result)))}}let c=(()=>{class e{constructor(e,t){this.selectModalService=e,this.dwHttp=t}setConfig(e,t,n){this.config={modalTitle:"\u9009\u62e9\u5de5\u7a0b\u5e08",modalWidth:"50%",tableMultiSelect:n,tableIdField:"employee_id",tableNameField:"employee_name",tablePageSize:10,tableColDefs:[{title:"\u59d3\u540d",field:"employee_name",width:""},{title:"\u5f85\u5904\u7406\u5de5\u5355\u6570",field:"ecount",width:""}],tableCustomTag:e=>e.employee_name,dataSource:new s(this.dwHttp,`restful/service/serviceOrder/ServiceOrder/EmployeeForServiceOrder?service_order_id=${e}&selected_employee_id=${t}&employee_name=`)}}open(e){return this.selectModalService.open(this.config,e).pipe((0,d.switchMap)(e=>this.dwHttp.get(`restful/service/serviceOrder/ServiceOrder/Employee?ids=${e}`)))}}return e.\u0275fac=function(t){return new(t||e)(r.\u0275\u0275inject(l.DwSelectModalService),r.\u0275\u0275inject(o.DwDapHttpClient))},e.\u0275prov=r.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e})();var m=n(83237),p=n(97981),u=n(91970),h=n(45890),g=n(31441),f=n(8852),w=n(85277),v=n(67280),x=n(55245),C=n(29872),_=n(74591),y=n(62695),S=n(71452),b=n(83522);function I(e,t){if(1&e){const e=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"div",13),r.\u0275\u0275listener("click",function(){return r.\u0275\u0275restoreView(e),r.\u0275\u0275nextContext(2).clearInput()}),r.\u0275\u0275element(1,"em",14),r.\u0275\u0275elementEnd()}}function E(e,t){if(1&e){const e=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"div",15),r.\u0275\u0275listener("click",function(){const t=r.\u0275\u0275restoreView(e).index;return r.\u0275\u0275nextContext(2).swichNav(t)}),r.\u0275\u0275text(1),r.\u0275\u0275elementEnd()}if(2&e){const e=t.$implicit,n=t.index,i=r.\u0275\u0275nextContext(2);r.\u0275\u0275classMap(n==i.currTab?"break-tab-on group":"group"),r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate1(" ",e.service_site_name," ")}}function D(e,t){1&e&&(r.\u0275\u0275elementStart(0,"div",27),r.\u0275\u0275text(1,"\u5df2\u9009\u4e3a\u672c\u5355\u8d1f\u8d23\u4eba"),r.\u0275\u0275elementEnd())}function O(e,t){if(1&e){const e=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"tr"),r.\u0275\u0275elementStart(1,"td"),r.\u0275\u0275elementStart(2,"label",24),r.\u0275\u0275listener("ngModelChange",function(t){return r.\u0275\u0275restoreView(e).$implicit.check=t}),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(3,"td"),r.\u0275\u0275text(4),r.\u0275\u0275template(5,D,2,0,"div",25),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(6,"td",26),r.\u0275\u0275text(7),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd()}if(2&e){const e=t.$implicit,n=r.\u0275\u0275nextContext(3);r.\u0275\u0275advance(2),r.\u0275\u0275propertyInterpolate("dwValue",e.employee_id),r.\u0275\u0275property("ngModel",e.check)("dwDisabled",e.employee_id===n.selected_employee_id),r.\u0275\u0275advance(2),r.\u0275\u0275textInterpolate1(" ",e.employee_name," "),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",e.employee_id===n.selected_employee_id),r.\u0275\u0275advance(2),r.\u0275\u0275textInterpolate1(" ",e.ecount," ")}}function M(e,t){if(1&e&&(r.\u0275\u0275elementStart(0,"div"),r.\u0275\u0275elementStart(1,"dw-table",16,17),r.\u0275\u0275elementStart(3,"thead"),r.\u0275\u0275elementStart(4,"tr",18),r.\u0275\u0275element(5,"th",19),r.\u0275\u0275elementStart(6,"th",20),r.\u0275\u0275elementStart(7,"span",21),r.\u0275\u0275text(8,"\u59d3\u540d"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(9,"th",22),r.\u0275\u0275elementStart(10,"span",21),r.\u0275\u0275text(11,"\u5f85\u5904\u7406\u5de5\u5355\u6570"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(12,"tbody"),r.\u0275\u0275template(13,O,8,6,"tr",23),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd()),2&e){const e=t.index,n=r.\u0275\u0275reference(2),i=r.\u0275\u0275nextContext(2);r.\u0275\u0275classMap(e==i.currTab?"r-wrap":"r-wrap hide"),r.\u0275\u0275advance(1),r.\u0275\u0275property("dwData",i.serviceSites[e].employees)("dwFrontPagination",!1),r.\u0275\u0275advance(12),r.\u0275\u0275property("ngForOf",n.data)}}function P(e,t){if(1&e){const e=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"div",2),r.\u0275\u0275elementStart(1,"div",3),r.\u0275\u0275listener("click",function(){return r.\u0275\u0275restoreView(e),r.\u0275\u0275nextContext().searchServiceSites()}),r.\u0275\u0275element(2,"em",4),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(3,"input",5),r.\u0275\u0275listener("ngModelChange",function(t){return r.\u0275\u0275restoreView(e),r.\u0275\u0275nextContext().searchValue=t})("keydown",function(t){return r.\u0275\u0275restoreView(e),r.\u0275\u0275nextContext().onKeydown(t)}),r.\u0275\u0275elementEnd(),r.\u0275\u0275template(4,I,2,0,"div",6),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(5,"div",7),r.\u0275\u0275elementStart(6,"div",8),r.\u0275\u0275template(7,E,2,3,"div",9),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(8,"div",10),r.\u0275\u0275elementStart(9,"dw-checkbox-wrapper",11),r.\u0275\u0275listener("dwOnChange",function(t){return r.\u0275\u0275restoreView(e),r.\u0275\u0275nextContext().breakdownChecked(t)}),r.\u0275\u0275template(10,M,14,5,"div",12),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd()}if(2&e){const e=r.\u0275\u0275nextContext();r.\u0275\u0275advance(3),r.\u0275\u0275property("ngModel",e.searchValue),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",e.searchValue),r.\u0275\u0275advance(2),r.\u0275\u0275property("dwSpan",6),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngForOf",e.serviceSites),r.\u0275\u0275advance(1),r.\u0275\u0275property("dwSpan",18),r.\u0275\u0275advance(2),r.\u0275\u0275property("ngForOf",e.serviceSites)}}const k=function(){return{height:"450px",overflow:"auto","padding-bottom":"24px"}};let F=(()=>{class e{constructor(e){this.commonHttpService=e,this.assistantVisibleChanged=new r.EventEmitter,this.service_order_id="",this.selected_employee_id="",this.searchValue="",this.currTab=0,this.serviceSites=[],this.checkValues=[]}initData(e,t){this.service_order_id=e,this.selected_employee_id=t,this.searchValue="",this.currTab=0,this.getServiceSites()}getServiceSites(){this.commonHttpService.get(`restful/service/serviceOrder/ServiceOrder/EmployeeOfAllServiceSite?service_order_id=${this.service_order_id}&selected_employee_id=${this.selected_employee_id}&employee_name=${this.searchValue}`).subscribe(e=>{this.serviceSites=e.data.serviceSites})}searchServiceSites(){this.currTab=0,this.getServiceSites()}clearInput(){this.searchValue="",this.searchServiceSites()}swichNav(e){this.currTab=e}breakdownChecked(e){console.log(e),this.checkValues=e}close(){this.assistantVisibleChanged.emit(null)}chooseOk(){this.chooseMultyOk()}chooseMultyOk(){if(this.checkValues.length){const e=[];for(let t=0;t<this.serviceSites.length;t++)this.serviceSites[t].employees.forEach(n=>{n.check&&e.push({service_site_id:this.serviceSites[t].service_site_id,employee_id:n.employee_id,employee_name:n.employee_name})});this.assistantVisibleChanged.emit(e.length?e:null)}else this.assistantVisibleChanged.emit(null)}ngOnInit(){}onKeydown(e){13===e.keyCode&&this.searchServiceSites()}}return e.\u0275fac=function(t){return new(t||e)(r.\u0275\u0275directiveInject(h.$))},e.\u0275cmp=r.\u0275\u0275defineComponent({type:e,selectors:[["app-cross-site-assistant-opener"]],inputs:{visible:"visible"},outputs:{assistantVisibleChanged:"assistantVisibleChanged"},decls:2,vars:5,consts:[["dwTitle","\u9009\u62e9\u534f\u540c\u5de5\u7a0b\u5e08",3,"dwBodyStyle","dwMaskClosable","dwWidth","dwVisible","dwVisibleChange","dwOnCancel","dwOnOk"],["dwModalContent",""],[1,"search-box-opener"],[1,"search",3,"click"],["dw-icon","","dwType","search","dwTheme","outline"],["dw-input","","type","text","placeholder","\u641c\u7d22",3,"ngModel","ngModelChange","keydown"],["class","close",3,"click",4,"ngIf"],["dw-row","",1,"wrapper"],["dw-col","",1,"left",3,"dwSpan"],[3,"class","click",4,"ngFor","ngForOf"],["dw-col","",1,"right",3,"dwSpan"],[1,"dw-f-checkbox-list",3,"dwOnChange"],[3,"class",4,"ngFor","ngForOf"],[1,"close",3,"click"],["dw-icon","","dwTheme","fill","dwType","close-circle",1,"ant-input-clear-icon"],[3,"click"],[3,"dwData","dwFrontPagination"],["dwTable",""],["dw-tr",""],["dw-th","","dwWidth","40px"],["dw-th",""],["translate",""],["dw-th","","dwAlign","right"],[4,"ngFor","ngForOf"],["dw-checkbox","",3,"dwValue","ngModel","dwDisabled","ngModelChange"],["style","color: #0d9def;font-size: 12px;",4,"ngIf"],["dwAlign","right"],[2,"color","#0d9def","font-size","12px"]],template:function(e,t){1&e&&(r.\u0275\u0275elementStart(0,"dw-modal",0),r.\u0275\u0275listener("dwVisibleChange",function(e){return t.visible=e})("dwOnCancel",function(){return t.close()})("dwOnOk",function(){return t.chooseOk()}),r.\u0275\u0275template(1,P,11,6,"ng-template",1),r.\u0275\u0275elementEnd()),2&e&&r.\u0275\u0275property("dwBodyStyle",r.\u0275\u0275pureFunction0(4,k))("dwMaskClosable",!0)("dwWidth",710)("dwVisible",t.visible)},directives:[g.DwModalComponent,g.DwModalContentDirective,f.u,w.DwIconDirective,v.DwInputDirective,a.DefaultValueAccessor,a.NgControlStatus,a.NgModel,x.NgIf,C.DwRowDirective,C.DwColDirective,x.NgForOf,_.DwCheckboxWrapperComponent,y.DwTableComponent,S.Ct,y.DwTheadComponent,y.DwTrDirective,y.DwTableCellDirective,y.DwThMeasureDirective,S.BL,b.TranslateDirective,y.DwCellAlignDirective,y.DwTbodyComponent,_.DwCheckboxComponent],styles:['.wrapper[_ngcontent-%COMP%]{width:100%;height:calc(100% - 32px - 16px);border:1px solid #d9d9d9}.wrapper[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]{height:100%;overflow-y:auto;background:#fbfbfb;border-right:1px solid #d9d9d9}.wrapper[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]{min-height:48px;padding:4px 8px 4px 24px;color:#00000073;font-size:14px;display:flex;align-items:center;word-break:break-all;cursor:pointer;position:relative}.wrapper[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .group.break-tab-on[_ngcontent-%COMP%]{color:#009bf2;font-weight:bold;background:#fff}.wrapper[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .group.break-tab-on[_ngcontent-%COMP%]:before{content:"";width:6px;height:100%;background:#009bf2;position:absolute;top:0;left:0}.wrapper[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{height:100%}.wrapper[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .dw-f-checkbox-list[_ngcontent-%COMP%]{width:100%;height:100%;overflow-y:auto;position:relative}.wrapper[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .dw-f-checkbox-list[_ngcontent-%COMP%]   .r-wrap.hide[_ngcontent-%COMP%]{position:absolute;left:-9999px}.wrapper[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .dw-f-checkbox-list[_ngcontent-%COMP%]   .r-wrap[_ngcontent-%COMP%]   .dw-f-checkbox-list-li[_ngcontent-%COMP%]{height:34px;line-height:34px;display:flex}.wrapper[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .dw-f-checkbox-list[_ngcontent-%COMP%]   .r-wrap[_ngcontent-%COMP%]   .dw-f-checkbox-list-li[_ngcontent-%COMP%]   .check[_ngcontent-%COMP%]{width:20px;margin-right:8px}.wrapper[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .dw-f-checkbox-list[_ngcontent-%COMP%]   .r-wrap[_ngcontent-%COMP%]   .dw-f-checkbox-list-li[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{flex:1}.search-box-opener[_ngcontent-%COMP%]{margin-bottom:16px;position:relative}.search-box-opener[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]{width:30px;height:100%;display:flex;align-items:center;justify-content:center;position:absolute;top:0;left:0;z-index:2}.search-box-opener[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]   em[_ngcontent-%COMP%]{font-size:16px;color:#999}.search-box-opener[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{position:absolute;top:0;right:8px;font-size:20px}.search-box-opener[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]   .ant-input-clear-icon[_ngcontent-%COMP%]:last-child{font-size:16px}.search-box-opener[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;height:32px;background:#fff;border-radius:4px;padding:0 30px}']}),e})();var V=n(71049),T=n(33795),L=n(32276),R=n(66800),A=n(85773),N=n(82542),$=n(93761),j=n(96670),z=n(67733),B=n(37568),q=n(17494);const W=["assistantOpener"];function G(e,t){if(1&e){const e=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"em",20),r.\u0275\u0275listener("click",function(){return r.\u0275\u0275restoreView(e),r.\u0275\u0275nextContext(3).clearServiceEmployee()}),r.\u0275\u0275elementEnd()}}function U(e,t){if(1&e){const e=r.\u0275\u0275getCurrentView();r.\u0275\u0275template(0,G,1,0,"em",17),r.\u0275\u0275elementStart(1,"button",18),r.\u0275\u0275listener("click",function(t){return r.\u0275\u0275restoreView(e),r.\u0275\u0275nextContext(2).openServiceEmployeeWin(t)}),r.\u0275\u0275element(2,"em",19),r.\u0275\u0275elementEnd()}if(2&e){const e=r.\u0275\u0275nextContext(2);r.\u0275\u0275property("ngIf",e.form.value.service_employee_name)}}function H(e,t){if(1&e){const e=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"em",20),r.\u0275\u0275listener("click",function(){return r.\u0275\u0275restoreView(e),r.\u0275\u0275nextContext(3).clearAssistant()}),r.\u0275\u0275elementEnd()}}function X(e,t){if(1&e){const e=r.\u0275\u0275getCurrentView();r.\u0275\u0275template(0,H,1,0,"em",17),r.\u0275\u0275elementStart(1,"button",18),r.\u0275\u0275listener("click",function(t){return r.\u0275\u0275restoreView(e),r.\u0275\u0275nextContext(2).openAssistantEmployeeWin(t)}),r.\u0275\u0275element(2,"em",19),r.\u0275\u0275elementEnd()}if(2&e){const e=r.\u0275\u0275nextContext(2);r.\u0275\u0275property("ngIf",e.form.value.assistant_name)}}function Q(e,t){if(1&e){const e=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"dw-upload",26),r.\u0275\u0275listener("dwFileListChange",function(t){return r.\u0275\u0275restoreView(e),r.\u0275\u0275nextContext(3).technologyList=t})("dwChange",function(t){return r.\u0275\u0275restoreView(e),r.\u0275\u0275nextContext(3).handleFileChange(t)}),r.\u0275\u0275elementStart(1,"button",27),r.\u0275\u0275element(2,"em",28),r.\u0275\u0275text(3,"\u4e0a\u4f20\u6587\u4ef6"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd()}if(2&e){const e=r.\u0275\u0275nextContext(3);r.\u0275\u0275property("dwFileList",e.technologyList)("dwBeforeUpload",e.beforeUploadFiles)("dwShowUploadList",!1)("dwAccept",".doc,.docx,.pdf,.xls,.xlsx,.ppt"),r.\u0275\u0275advance(1),r.\u0275\u0275property("disabled",e.technologyList.length>=5||"disabled"===e.uploadatecdocs)}}function K(e,t){if(1&e){const e=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"div",30),r.\u0275\u0275elementStart(1,"div",31),r.\u0275\u0275element(2,"em",32),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(3,"div",33),r.\u0275\u0275text(4),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(5,"button",34),r.\u0275\u0275listener("click",function(){r.\u0275\u0275restoreView(e);const t=r.\u0275\u0275nextContext().index;return r.\u0275\u0275nextContext(3).deleteFile(t)}),r.\u0275\u0275element(6,"em",35),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd()}if(2&e){const e=r.\u0275\u0275nextContext().$implicit,t=r.\u0275\u0275nextContext(3);r.\u0275\u0275advance(4),r.\u0275\u0275textInterpolate(e.name),r.\u0275\u0275advance(1),r.\u0275\u0275propertyInterpolate("angularticsLabel",t.userInfo.tenantId+","+t.userInfo.userId),r.\u0275\u0275property("dwType","defult")("dwActionId","deletetecdocs")("dwDefaultAuthorized","disabled")("angularticsCategory","\u670d\u52a1\u5de5\u5355")}}function J(e,t){if(1&e&&(r.\u0275\u0275elementStart(0,"div"),r.\u0275\u0275template(1,K,7,6,"div",29),r.\u0275\u0275elementEnd()),2&e){const e=t.$implicit;r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf","D"!==e.state)}}function Z(e,t){1&e&&(r.\u0275\u0275elementStart(0,"div",36),r.\u0275\u0275text(1,"\u652f\u6301\u6269\u5c55\u540d\uff1a.doc .docx .pdf .xlsx .xls .ppt .pptx"),r.\u0275\u0275elementEnd())}function Y(e,t){if(1&e&&(r.\u0275\u0275elementStart(0,"dw-form-item"),r.\u0275\u0275elementStart(1,"dw-form-label",6),r.\u0275\u0275text(2,"\u6280\u672f\u65b9\u6848"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(3,"dw-form-control",6),r.\u0275\u0275elementStart(4,"div",21),r.\u0275\u0275elementStart(5,"div",22),r.\u0275\u0275template(6,Q,4,5,"dw-upload",23),r.\u0275\u0275template(7,J,2,1,"div",24),r.\u0275\u0275template(8,Z,2,0,"div",25),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd()),2&e){const e=r.\u0275\u0275nextContext(2);r.\u0275\u0275advance(1),r.\u0275\u0275property("dwSm",6)("dwXs",24),r.\u0275\u0275advance(2),r.\u0275\u0275property("dwSm",16)("dwXs",24),r.\u0275\u0275advance(3),r.\u0275\u0275property("ngIf","hidden"!==e.uploadatecdocs),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngForOf",e.technologyList),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf","hidden"!==e.uploadatecdocs)}}const ee=function(){return{minRows:3,maxRows:3}};function te(e,t){if(1&e&&(r.\u0275\u0275elementStart(0,"form",4),r.\u0275\u0275elementStart(1,"dw-form-item"),r.\u0275\u0275elementStart(2,"dw-form-label",5),r.\u0275\u0275text(3,"\u670d\u52a1\u65b9\u5f0f"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(4,"dw-form-control",6),r.\u0275\u0275elementStart(5,"dw-radio-group",7),r.\u0275\u0275elementStart(6,"label",8),r.\u0275\u0275text(7,"\u4e0a\u95e8\u670d\u52a1"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(8,"label",9),r.\u0275\u0275text(9,"\u8fdc\u7a0b\u670d\u52a1"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(10,"dw-form-item"),r.\u0275\u0275elementStart(11,"dw-form-label",5),r.\u0275\u0275text(12,"\u8d1f\u8d23\u4eba"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(13,"dw-form-control",6),r.\u0275\u0275elementStart(14,"dw-input-group",10),r.\u0275\u0275element(15,"input",11),r.\u0275\u0275elementEnd(),r.\u0275\u0275template(16,U,3,1,"ng-template",null,12,r.\u0275\u0275templateRefExtractor),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(18,"dw-form-item"),r.\u0275\u0275elementStart(19,"dw-form-label",6),r.\u0275\u0275text(20,"\u534f\u540c\u4eba"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(21,"dw-form-control",6),r.\u0275\u0275elementStart(22,"dw-input-group",10),r.\u0275\u0275element(23,"input",13),r.\u0275\u0275elementEnd(),r.\u0275\u0275template(24,X,3,1,"ng-template",null,14,r.\u0275\u0275templateRefExtractor),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd(),r.\u0275\u0275template(26,Y,9,7,"dw-form-item",15),r.\u0275\u0275elementStart(27,"dw-form-item"),r.\u0275\u0275elementStart(28,"dw-form-label",6),r.\u0275\u0275text(29,"\u5907\u6ce8"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(30,"dw-form-control",6),r.\u0275\u0275element(31,"textarea",16),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd()),2&e){const e=r.\u0275\u0275reference(17),t=r.\u0275\u0275reference(25),n=r.\u0275\u0275nextContext();r.\u0275\u0275property("formGroup",n.form),r.\u0275\u0275advance(2),r.\u0275\u0275property("dwSm",6)("dwXs",24),r.\u0275\u0275advance(2),r.\u0275\u0275property("dwSm",14)("dwXs",24),r.\u0275\u0275advance(7),r.\u0275\u0275property("dwSm",6)("dwXs",24),r.\u0275\u0275advance(2),r.\u0275\u0275property("dwSm",14)("dwXs",24),r.\u0275\u0275advance(1),r.\u0275\u0275property("dwSuffix",e),r.\u0275\u0275advance(5),r.\u0275\u0275property("dwSm",6)("dwXs",24),r.\u0275\u0275advance(2),r.\u0275\u0275property("dwSm",14)("dwXs",24),r.\u0275\u0275advance(1),r.\u0275\u0275property("dwSuffix",t),r.\u0275\u0275advance(4),r.\u0275\u0275property("ngIf",n.isOnly&&("hidden"!==n.uploadatecdocs||n.technologyList.length>0)),r.\u0275\u0275advance(2),r.\u0275\u0275property("dwSm",6)("dwXs",24),r.\u0275\u0275advance(2),r.\u0275\u0275property("dwSm",16)("dwXs",24),r.\u0275\u0275advance(1),r.\u0275\u0275property("dwAutosize",r.\u0275\u0275pureFunction0(21,ee))}}const ne=function(){return{height:"calc(100% - 55px)",overflow:"auto","padding-bottom":"24px"}};let ie=(()=>{class e{constructor(e,t,n,i,o,l,d,s){this.employeeSelectService=e,this.serviceOrderSrv=t,this.serviceOrderDetailSrv=n,this.fb=i,this.productFileSrv=o,this.userService=l,this.dwAuthFunctionPermissionRepository=d,this.message=s,this.service_order_site_id="",this.currentServiceSite={service_site_id:"",service_site_code:"",service_site_name:"",service_site_type:""},this.isCrossSite=!1,this.assign_collaborator_cross_site=!1,this.showCrossSiteOpener=!1,this.uploadatecdocs="allow",this.deletetecdocs="allow",this.technologyList=[],this.technologyIds=[],this.isOnly=!1,this.userInfo={tenantId:"",userId:""},this.beforeIds=[],this.beforeTechnologyList=[],this.isDispatchVisible=!1,this.visibleChanged=new r.EventEmitter,this.service_order_id=[],this.assistant_name="",this.assistant_id="",this.beforeUploadFiles=(e,t)=>new V.Observable(t=>{console.log(e);const n=e.name.split("."),i=n[n.length-1].indexOf("xls")>=0||n[n.length-1].indexOf("doc")>=0||n[n.length-1].indexOf("ppt")>=0||n[n.length-1].indexOf("pdf")>=0;if(!i)return this.message.create("error","\u8bf7\u4e0a\u4f20\u6b63\u786e\u683c\u5f0f\u6587\u4ef6\uff01"),void t.complete();const r=e.size/1024/1024<=10;if(!r)return this.message.create("error","\u4e0a\u4f20\u6587\u4ef6\u5927\u5c0f\u8d85\u8fc710M\uff01"),void t.complete();t.next(i&&r),t.complete()}),this.form=i.group({service_order_id:0,service_employee_name:["",a.Validators.required],service_employee_id:0,assistant_name:[""],assistant_id:[""],remark:[""],service_mode:["",a.Validators.required]})}getFunction(){this.dwAuthFunctionPermissionRepository.getFunctionPermissionAll().subscribe(e=>{console.log("response",e);const t=e.data.filter(e=>"service-order"===e.code)[0];this.uploadatecdocs=t.action.filter(e=>"uploadatecdocs"===e.id)[0].restriction,this.deletetecdocs=t.action.filter(e=>"deletetecdocs"===e.id)[0].restriction,console.log("\u4e0a\u4f20\u6743\u9650uploadatecdocs",this.uploadatecdocs,"\u5220\u9664\u6743\u9650deletetecdocs",this.deletetecdocs)})}ngOnInit(){this.getFunction(),this.userInfo=this.userService.getUserInfo(),this.serviceOrderSrv.getCurrentServiceSiteInfo().subscribe(e=>{this.currentServiceSite=e}),this.serviceOrderDetailSrv.getAutoSettings().subscribe(e=>{this.assign_collaborator_cross_site=e.assign_collaborator_cross_site})}initData(e,t){if(this.service_order_id="number"==typeof e?[e.toString()]:e.split(","),this.form.setValue({service_order_id:this.service_order_id[0],service_employee_name:"",service_employee_id:0,assistant_name:"",assistant_id:"",remark:"",service_mode:"1"}),this.serviceOrderSrv.getOrderServiceSites(this.service_order_id).subscribe(e=>{this.service_order_site_id=e.data.service_order[0].service_site_id}),"number"==typeof e){this.isOnly=!0,this.technologyList=JSON.parse(JSON.stringify(t))||[];const e=[];this.technologyList.forEach(t=>{e.push(t.id)}),this.technologyIds=e,this.beforeIds=JSON.parse(JSON.stringify(e)),this.beforeTechnologyList=JSON.parse(JSON.stringify(t))}}close(e){this.form.reset({service_site_id:0,service_site_name:"",remark:""}),this.isDispatchVisible=!1,this.visibleChanged.emit(e)}submit(){var e;const t=[];this.isOnly?(console.log(this.service_order_id[0],this.technologyList),null===(e=this.technologyList)||void 0===e||e.forEach(e=>(0,i.mG)(this,void 0,void 0,function*(){if("c"===e.isUpload){const n=new FormData;n.append("file",e.originFileObj),t.push(new Promise((e,t)=>{this.productFileSrv.saveAttachments(n).subscribe(n=>{n.success?(this.technologyIds.push(n.data),e()):(this.message.create("error","\u6280\u672f\u65b9\u6848\u4e0a\u4f20\u5931\u8d25\uff01"),t())},e=>{e.hasOwnProperty("error")&&e.error.hasOwnProperty("errorMessage")&&e.error.errorMessage&&this.message.error(e.error.errorMessage)})}))}})),Promise.all(t).then(e=>{console.log(this.beforeIds,this.technologyIds);const t=[];this.beforeTechnologyList.forEach(e=>{this.technologyIds.indexOf(e.id)<0&&t.push({fileInfoId:e.file_info_id,fileFlag:"D"})}),this.technologyIds.forEach(e=>{this.beforeIds.indexOf(e)<0&&t.push({fileId:e,fileFlag:"C"})}),console.log("fileInfoIds",t);const n={serviceOrderId:this.service_order_id[0],technologyProgram:this.technologyIds.join(","),fileInfos:t};this.serviceOrderSrv.changeTechnologyFile(n).subscribe(e=>{console.log(this.service_order_id[0],this.technologyIds),this.continueSubmit()},e=>{e.hasOwnProperty("error")&&e.error.hasOwnProperty("errorMessage")&&e.error.errorMessage&&this.message.error(e.error.errorMessage),this.technologyList.forEach(e=>e.isUpload="u")})})):this.continueSubmit()}continueSubmit(){const e=[];for(const t in this.service_order_id)this.service_order_id[t]&&e.push(new Promise((e,n)=>{this.form.get("service_order_id").setValue(this.service_order_id[t]);const i=this.form.value;i.service_mode=Number(i.service_mode),i.assist_cross_site=this.isCrossSite,this.serviceOrderSrv.DispatchServiceOrder(i).subscribe(n=>{e(Number(this.service_order_id[t]))},t=>{e("0")})}));Promise.all(e).then(e=>{const t=e.filter(e=>"0"!==e).length;t===e.length?this.message.create("success",`\u6d3e\u5de5\u6210\u529f${t}\u7b14`):this.message.create(0===t?"error":"success",`\u6d3e\u5de5\u6210\u529f${t}\u7b14\uff0c\u5931\u8d25${e.length-t}\u7b14`),this.close(e.filter(e=>"0"!==e))})}openServiceEmployeeWin(e){e.preventDefault(),this.employeeSelectService.setConfig(this.service_order_id[0],"",!1),this.employeeSelectService.open([]).subscribe(e=>{this.form.get("service_employee_name").setValue(e.data.employee[0].employee_name),this.form.get("service_employee_id").setValue(e.data.employee[0].employee_id),this.checkEmpolyee()})}openAssistantEmployeeWin(e){e.preventDefault(),this.isCrossSite=!1,"1"===this.currentServiceSite.service_site_type&&this.assign_collaborator_cross_site?(this.showCrossSiteOpener=!0,this.assistantOpener.initData(this.service_order_id[0],this.form.value.service_employee_id)):(this.employeeSelectService.setConfig(this.service_order_id[0],this.form.value.service_employee_id,!0),this.employeeSelectService.open([]).subscribe(e=>{this.assistant_name="",this.assistant_id="",e.data.employee.forEach(e=>{this.assistant_name+=e.employee_name+",",this.assistant_id+=e.employee_id+","}),0!==this.assistant_name.length&&(this.assistant_name=this.assistant_name.substr(0,this.assistant_name.length-1)),0!==this.assistant_id.length&&(this.assistant_id=this.assistant_id.substr(0,this.assistant_id.length-1)),this.form.get("assistant_name").setValue(this.assistant_name),this.form.get("assistant_id").setValue(this.assistant_id),this.checkEmpolyee()}))}assistantChangeVisible(e){if(e){let t=!1;const n=[],i=[];e.forEach(e=>{n.push(e.employee_id),i.push(e.employee_name),e.service_site_id!==this.service_order_site_id&&(t=!0)}),this.form.get("assistant_name").setValue(i.join(",")),this.form.get("assistant_id").setValue(n.join(",")),this.isCrossSite=t,this.checkEmpolyee()}this.showCrossSiteOpener=!1}checkEmpolyee(){this.form.value.assistant_id.indexOf(this.form.value.service_employee_id)>=0&&0!==this.form.value.service_employee_id&&this.message.create("info","\u5f53\u524d\u8d1f\u8d23\u4eba\u548c\u534f\u540c\u4eba\u4e3a\u540c\u4e00\u4eba\uff01")}clearServiceEmployee(){this.form.get("service_employee_name").setValue(""),this.form.get("service_employee_id").setValue(0)}clearAssistant(){this.form.get("assistant_name").setValue(""),this.form.get("assistant_id").setValue("")}handleFileChange(e){this.technologyList.forEach(e=>{e.isUpload=e.isUpload?e.isUpload:"c"})}deleteFile(e){this.technologyList.splice(e,1),this.technologyIds.splice(e,1),console.log("\u5220\u9664technologyList",this.technologyList,this.technologyIds)}}return e.\u0275fac=function(t){return new(t||e)(r.\u0275\u0275directiveInject(c),r.\u0275\u0275directiveInject(p.R),r.\u0275\u0275directiveInject(u.v),r.\u0275\u0275directiveInject(a.FormBuilder),r.\u0275\u0275directiveInject(T.U),r.\u0275\u0275directiveInject(R.DwUserService),r.\u0275\u0275directiveInject(L.DwAuthFunctionPermissionRepository),r.\u0275\u0275directiveInject(m.DwMessageService))},e.\u0275cmp=r.\u0275\u0275defineComponent({type:e,selectors:[["app-service-order-dispatch"]],viewQuery:function(e,t){if(1&e&&r.\u0275\u0275viewQuery(W,5),2&e){let e;r.\u0275\u0275queryRefresh(e=r.\u0275\u0275loadQuery())&&(t.assistantOpener=e.first)}},inputs:{isDispatchVisible:"isDispatchVisible"},outputs:{visibleChanged:"visibleChanged"},features:[r.\u0275\u0275ProvidersFeature([c])],decls:4,vars:7,consts:[["dwTitle","\u670d\u52a1\u5de5\u5355\u6d3e\u5de5",3,"dwBodyStyle","dwMaskClosable","dwWidth","dwVisible","dwOkDisabled","dwVisibleChange","dwOnCancel","dwOnOk"],["dwModalContent",""],[3,"visible","assistantVisibleChanged"],["assistantOpener",""],["dw-form","",3,"formGroup"],["dwRequired","",3,"dwSm","dwXs"],[3,"dwSm","dwXs"],["formControlName","service_mode"],["dw-radio","","dwValue","1"],["dw-radio","","dwValue","2"],["dwSearch","",3,"dwSuffix"],["dw-input","","type","text","readonly","","dw-input","","formControlName","service_employee_name"],["suffixServiceEmployeeData",""],["dw-input","","type","text","readonly","","dw-input","","formControlName","assistant_name"],["suffixAssistantData",""],[4,"ngIf"],["dw-input","","maxlength","100","placeholder","\u8bf7\u8f93\u5165\u5907\u6ce8","formControlName","remark",3,"dwAutosize"],["dw-icon","","class","ant-input-clear-icon","dwTheme","fill","dwType","close-circle",3,"click",4,"ngIf"],["dw-button","","dwType","primary","dwSearch","",3,"click"],["dw-icon","","dwType","search","dwTheme","outline"],["dw-icon","","dwTheme","fill","dwType","close-circle",1,"ant-input-clear-icon",3,"click"],[1,"upFiles"],[1,"upload"],["style","margin-bottom: 8px;",3,"dwFileList","dwBeforeUpload","dwShowUploadList","dwAccept","dwFileListChange","dwChange",4,"ngIf"],[4,"ngFor","ngForOf"],["class","tip",4,"ngIf"],[2,"margin-bottom","8px",3,"dwFileList","dwBeforeUpload","dwShowUploadList","dwAccept","dwFileListChange","dwChange"],["dw-button","",3,"disabled"],["dw-icon","","dwType","upload"],["class","chosen-file","dw-row","",4,"ngIf"],["dw-row","",1,"chosen-file"],["dw-col","",1,"type-icon"],["dw-icon","","dwType","paper-clip","dwTheme","outline"],["dw-col","",1,"file-name"],["dw-button","","type","button","dwActionAuthorized","","angularticsAction","\u8be6\u60c5-\u70b9\u51fb\u5220\u9664\u6280\u672f\u65b9\u6848","dw-analyticsOn","click","dw-col","",1,"del",3,"dwType","dwActionId","dwDefaultAuthorized","angularticsCategory","angularticsLabel","click"],["dw-icon","","dwType","delete","dwTheme","outline"],[1,"tip"]],template:function(e,t){1&e&&(r.\u0275\u0275elementStart(0,"dw-modal",0),r.\u0275\u0275listener("dwVisibleChange",function(e){return t.isDispatchVisible=e})("dwOnCancel",function(){return t.close([])})("dwOnOk",function(){return t.submit()}),r.\u0275\u0275template(1,te,32,22,"ng-template",1),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(2,"app-cross-site-assistant-opener",2,3),r.\u0275\u0275listener("assistantVisibleChanged",function(e){return t.assistantChangeVisible(e)}),r.\u0275\u0275elementEnd()),2&e&&(r.\u0275\u0275property("dwBodyStyle",r.\u0275\u0275pureFunction0(6,ne))("dwMaskClosable",!1)("dwWidth",520)("dwVisible",t.isDispatchVisible)("dwOkDisabled",!t.form.valid),r.\u0275\u0275advance(2),r.\u0275\u0275property("visible",t.showCrossSiteOpener))},directives:[g.DwModalComponent,g.DwModalContentDirective,F,a.\u0275NgNoValidate,a.NgControlStatusGroup,A.DwFormDirective,a.FormGroupDirective,C.DwRowDirective,A.DwFormItemComponent,C.DwColDirective,A.DwFormLabelComponent,A.DwFormControlComponent,N.DwRadioGroupComponent,a.NgControlStatus,a.FormControlName,N.DwRadioComponent,f.u,v.DwInputGroupComponent,v.DwInputGroupWhitSuffixOrPrefixDirective,v.DwInputDirective,a.DefaultValueAccessor,x.NgIf,v.DwAutosizeDirective,a.MaxLengthValidator,$.DwButtonComponent,j.uG,w.DwIconDirective,x.NgForOf,z.DwUploadComponent,B.DwActionAuthorizedDirective,q.DwAnalyticsOn],styles:[".upFiles[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{color:#000000d9;font-size:18px;margin-bottom:12px}.upFiles[_ngcontent-%COMP%]   .chosen-file[_ngcontent-%COMP%]{margin:8px 0}.upFiles[_ngcontent-%COMP%]   .tip[_ngcontent-%COMP%]{color:#00000073;font-size:14px;margin-top:8px;white-space:nowrap}.upFiles[_ngcontent-%COMP%]   .file-name[_ngcontent-%COMP%]{width:200px;margin-left:5px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.upFiles[_ngcontent-%COMP%]   .del[_ngcontent-%COMP%]{display:none}.upFiles[_ngcontent-%COMP%]   .chosen-file[_ngcontent-%COMP%]:hover   .del[_ngcontent-%COMP%]{display:block;border:none;box-shadow:none;padding:0;height:0;background-color:#fff}.upFiles[_ngcontent-%COMP%]   .chosen-file[_ngcontent-%COMP%]:hover   .del[_ngcontent-%COMP%]:hover   em[_ngcontent-%COMP%]{color:#40a9ff;cursor:pointer}"]}),e})()},90395:function(e,t,n){n.d(t,{C:function(){return O}});var i=n(42746),r=n(1020),a=n(51156),o=n(53524),l=n(9682);let d=(()=>{class e{constructor(e,t){this.selectModalService=e,this.dwHttp=t}setConfig(e,t){this.config={modalTitle:"\u9009\u62e9\u670d\u52a1\u7ad9\u70b9",modalWidth:"50%",tableMultiSelect:!1,tableIdField:"service_site_id",tableNameField:"service_site_name",tablePageSize:10,tableColDefs:[{title:"\u7ad9\u70b9\u7f16\u53f7",field:"service_site_code",width:""},{title:"\u7ad9\u70b9\u540d\u79f0",field:"service_site_name",width:""}],returnFields:["service_site_id","service_site_name"],dataSource:new l.ApiServerPagingService(this.dwHttp,"restful/service/serviceSite/ServiceSite/List","service_site",["service_site_code","service_site_name"]),initParams:this.getQueryCondition(e,t)}}open(e){return this.selectModalService.open(this.config,e)}getQueryCondition(e,t){const n=new o.DwQueryCondition;return"1"!==t?(n.addCondition(new o.DwQueryConditionInfo("service_site_id",String(e),o.DwQueryConditionOperator.EQUAL)),n):null}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(l.DwSelectModalService),i.\u0275\u0275inject(a.DwDapHttpClient))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e})();var s=n(83237),c=n(31441),m=n(97981),p=n(45890),u=n(85773),h=n(55245),g=n(29872),f=n(82542),w=n(8852),v=n(67280),x=n(93761),C=n(96670),_=n(85277);function y(e,t){1&e&&(i.\u0275\u0275elementStart(0,"dw-form-item"),i.\u0275\u0275elementStart(1,"dw-form-control",4),i.\u0275\u0275elementStart(2,"dw-radio-group",5),i.\u0275\u0275elementStart(3,"label",6),i.\u0275\u0275text(4,"\u5206\u914d\u81f3\u7ad9\u70b9"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(5,"label",6),i.\u0275\u0275text(6,"\u5206\u914d\u81f3\u5de5\u5355\u6c60"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()),2&e&&(i.\u0275\u0275advance(1),i.\u0275\u0275property("dwSm",20)("dwXs",24),i.\u0275\u0275advance(2),i.\u0275\u0275property("dwValue",0),i.\u0275\u0275advance(2),i.\u0275\u0275property("dwValue",1))}function S(e,t){if(1&e){const e=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"em",14),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(e),i.\u0275\u0275nextContext(4).clear()}),i.\u0275\u0275elementEnd()}}function b(e,t){if(1&e){const e=i.\u0275\u0275getCurrentView();i.\u0275\u0275template(0,S,1,0,"em",11),i.\u0275\u0275elementStart(1,"button",12),i.\u0275\u0275listener("click",function(t){return i.\u0275\u0275restoreView(e),i.\u0275\u0275nextContext(3).openServiceSiteWin(t,"service_site_name")}),i.\u0275\u0275element(2,"em",13),i.\u0275\u0275elementEnd()}if(2&e){const e=i.\u0275\u0275nextContext(3);i.\u0275\u0275property("ngIf",e.form.value.service_site_name)}}function I(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"dw-form-item"),i.\u0275\u0275elementStart(1,"dw-form-label",7),i.\u0275\u0275text(2,"\u6307\u6d3e\u7ad9\u70b9"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(3,"dw-form-control",4),i.\u0275\u0275elementStart(4,"dw-input-group",8),i.\u0275\u0275element(5,"input",9),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(6,b,3,1,"ng-template",null,10,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()),2&e){const e=i.\u0275\u0275reference(7);i.\u0275\u0275advance(3),i.\u0275\u0275property("dwSm",14)("dwXs",24),i.\u0275\u0275advance(1),i.\u0275\u0275property("dwSuffix",e)}}function E(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"form",2),i.\u0275\u0275template(1,y,7,4,"dw-form-item",3),i.\u0275\u0275template(2,I,8,3,"dw-form-item",3),i.\u0275\u0275elementEnd()),2&e){const e=i.\u0275\u0275nextContext();i.\u0275\u0275property("formGroup",e.form),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",e.enable_so_pool),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",!e.enable_so_pool||e.enable_so_pool&&!e.form.value.assign_to_pool)}}const D=function(){return{height:"calc(100% - 55px)",overflow:"auto",padding:"12px 24px"}};let O=(()=>{class e{constructor(e,t,n,r,a,o,l){this.siteSelectService=e,this.serviceOrderSrv=t,this.fb=n,this.commonHttpService=r,this.message=a,this.dwModalService=o,this.serviceSiteResource=l,this.enable_so_pool=!1,this.isDistributionVisible=!1,this.visibleChanged=new i.EventEmitter,this.service_order_id="",this.form=n.group({service_order_id:0,service_site_name:"",service_site_id:0,assign_to_pool:0})}ngOnInit(){this.commonHttpService.get(`${this.serviceSiteResource}/UserSite`).subscribe(e=>{this.user_service_site_id=e.service_site_id,this.user_service_site_type=e.service_site_type})}initData(e,t){this.service_order_id=e,this.latitude=t,this.form.setValue({service_order_id:e,service_site_name:"",service_site_id:0,assign_to_pool:0}),this.commonHttpService.get("restful/service/autoSettings/AutoSettings/AutoSettings").subscribe(e=>{this.enable_so_pool=e.enable_so_pool})}close(){this.form.reset({service_site_id:0,service_site_name:"",assign_to_pool:0}),this.isDistributionVisible=!1,this.visibleChanged.emit(this.isDistributionVisible)}submit(){this.form.value.service_site_name||this.form.value.assign_to_pool?!this.latitude&&this.form.value.assign_to_pool?this.dwModalService.confirm({dwTitle:"\u63d0\u793a",dwContent:"\u672a\u83b7\u53d6\u5230\u7ef4\u4fee\u5730\u5740\u7684\u7ecf\u7eac\u5ea6\uff0c\u65e0\u6cd5\u5224\u5b9a\u548c\u5de5\u7a0b\u5e08\u7684\u8ddd\u79bb\uff0c\u786e\u5b9a\u5206\u914d\u81f3\u5de5\u5355\u6c60\u5417\uff1f",dwWidth:"420px",dwOnOk:()=>{this.onSure()}}):this.onSure():this.message.create("error","\u8bf7\u9009\u62e9\u670d\u52a1\u7ad9\u70b9")}onSure(){this.form.value.assign_to_pool&&this.clear(),this.serviceOrderSrv.DistributionServiceOrder(this.form.value).subscribe(e=>{this.close(),this.message.create("success","\u64cd\u4f5c\u6210\u529f\uff01")},e=>{e.hasOwnProperty("error")&&e.error.hasOwnProperty("errorMessage")&&e.error.errorMessage&&this.message.error(e.error.errorMessage)})}openServiceSiteWin(e,t){e.preventDefault(),this.siteSelectService.setConfig(this.user_service_site_id,this.user_service_site_type),this.siteSelectService.open([]).subscribe(e=>{!e.length||(this.form.get("service_site_id").setValue(e[0].service_site_id),this.form.get("service_site_name").setValue(e[0].service_site_name))})}clear(){this.form.get("service_site_id").setValue(0),this.form.get("service_site_name").setValue("")}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(d),i.\u0275\u0275directiveInject(m.R),i.\u0275\u0275directiveInject(r.FormBuilder),i.\u0275\u0275directiveInject(p.$),i.\u0275\u0275directiveInject(s.DwMessageService),i.\u0275\u0275directiveInject(c.DwModalService),i.\u0275\u0275directiveInject("ServiceSiteResource"))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["app-service-order-distribution"]],inputs:{isDistributionVisible:"isDistributionVisible"},outputs:{visibleChanged:"visibleChanged"},features:[i.\u0275\u0275ProvidersFeature([m.R,d])],decls:2,vars:6,consts:[["dwTitle","\u670d\u52a1\u5de5\u5355\u5206\u914d",3,"dwBodyStyle","dwMaskClosable","dwWidth","dwVisible","dwOkDisabled","dwVisibleChange","dwOnCancel","dwOnOk"],["dwModalContent",""],["dw-form","",3,"formGroup"],[4,"ngIf"],[3,"dwSm","dwXs"],["dwName","radiogroup","formControlName","assign_to_pool",2,"display","flex"],["dw-radio","",3,"dwValue"],["dwRequired",""],["dwSearch","",3,"dwSuffix"],["dw-input","","type","text","readonly","","dw-input","","formControlName","service_site_name"],["suffixServiceSiteData",""],["dw-icon","","class","ant-input-clear-icon","dwTheme","fill","dwType","close-circle",3,"click",4,"ngIf"],["dw-button","","dwType","primary","dwSearch","",3,"click"],["dw-icon","","dwType","search","dwTheme","outline"],["dw-icon","","dwTheme","fill","dwType","close-circle",1,"ant-input-clear-icon",3,"click"]],template:function(e,t){1&e&&(i.\u0275\u0275elementStart(0,"dw-modal",0),i.\u0275\u0275listener("dwVisibleChange",function(e){return t.isDistributionVisible=e})("dwOnCancel",function(){return t.close()})("dwOnOk",function(){return t.submit()}),i.\u0275\u0275template(1,E,3,3,"ng-template",1),i.\u0275\u0275elementEnd()),2&e&&i.\u0275\u0275property("dwBodyStyle",i.\u0275\u0275pureFunction0(5,D))("dwMaskClosable",!1)("dwWidth",420)("dwVisible",t.isDistributionVisible)("dwOkDisabled",!t.form.valid)},directives:[c.DwModalComponent,c.DwModalContentDirective,r.\u0275NgNoValidate,r.NgControlStatusGroup,u.DwFormDirective,r.FormGroupDirective,h.NgIf,g.DwRowDirective,u.DwFormItemComponent,g.DwColDirective,u.DwFormControlComponent,f.DwRadioGroupComponent,r.NgControlStatus,r.FormControlName,f.DwRadioComponent,u.DwFormLabelComponent,w.u,v.DwInputGroupComponent,v.DwInputGroupWhitSuffixOrPrefixDirective,v.DwInputDirective,r.DefaultValueAccessor,x.DwButtonComponent,C.uG,_.DwIconDirective],styles:[""]}),e})()},93206:function(e,t,n){n.r(t),n.d(t,{ServiceOrderModule:function(){return qi}});var i=n(55245),r=n(87974),a=n(42746);let o=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=a.\u0275\u0275defineComponent({type:e,selectors:[["app-service-order"]],decls:1,vars:0,template:function(e,t){1&e&&a.\u0275\u0275element(0,"router-outlet")},directives:[r.RouterOutlet],styles:[""]}),e})();var l=n(1020),d=n(83237),s=n(31441),c=n(97981);let m=(()=>{class e{constructor(){}getServiceOrderStateLabel(e){return"1"===e.state?"\u5f85\u5206\u914d":"2"===e.state?e.assign_to_pool?"\u5f85\u62a2\u5355":"\u5f85\u6d3e\u5de5":"3"===e.state?"\u5f85\u670d\u52a1":"4"===e.state?"\u5f85\u56de\u5355":"5"===e.state?"\u5f85\u8bc4\u4ef7":"6"===e.state?"\u5df2\u5173\u95ed":"7"===e.state?"\u5df2\u53d6\u6d88":"\u672a\u77e5\u72b6\u6001"}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=a.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var p=n(51156),u=n(9682);let h=(()=>{class e{constructor(e,t){this.dwHttp=e,this.selectModalService=t,this.config={modalTitle:"\u9009\u62e9\u5ba2\u6237",modalWidth:"50%",tableMultiSelect:!1,tableIdField:"customer_id",tableNameField:"customer_name",tablePageSize:10,returnFields:["customer_id","customer_code","customer_name","contact","contact_number","address"],tableColDefs:[{title:"\u5ba2\u6237\u7f16\u53f7",field:"customer_code"},{title:"\u5ba2\u6237\u540d\u79f0",field:"customer_name"}],dataSource:new u.ApiServerPagingService(this.dwHttp,"restful/service/customer/Customer/ListByCurrentSite","customer",["customer_code","customer_name"])}}open(e){return this.selectModalService.open(this.config,e)}}return e.\u0275fac=function(t){return new(t||e)(a.\u0275\u0275inject(p.DwDapHttpClient),a.\u0275\u0275inject(u.DwSelectModalService))},e.\u0275prov=a.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e})();var g=n(53524);let f=(()=>{class e{constructor(e,t){this.dwHttp=e,this.selectModalService=t}setConfig(e,t){this.config={modalTitle:"\u9009\u62e9\u670d\u52a1\u7ad9\u70b9",modalWidth:"50%",tableMultiSelect:!1,tableIdField:"service_site_id",tableNameField:"service_site_name",tablePageSize:10,tableColDefs:[{title:"\u7ad9\u70b9\u7f16\u53f7",field:"service_site_code"},{title:"\u7ad9\u70b9\u540d\u79f0",field:"service_site_name"},{title:"\u7ad9\u70b9\u7c7b\u578b",field:"service_site_type",dataPipe:"i18nSelect",dataEnum:{1:"\u603b\u90e8",2:"\u7f51\u70b9",3:"\u7ecf\u9500\u5546"}}],returnFields:["service_site_id","service_site_name"],dataSource:new u.ApiServerPagingService(this.dwHttp,"restful/service/serviceSite/ServiceSite/List","service_site",["service_site_code","service_site_name"]),initParams:this.getQueryCondition(e,t)}}open(e){return this.selectModalService.open(this.config,e)}getQueryCondition(e,t){const n=new g.DwQueryCondition;return"1"!==t?(n.addCondition(new g.DwQueryConditionInfo("service_site_id",String(e),g.DwQueryConditionOperator.EQUAL)),n):null}}return e.\u0275fac=function(t){return new(t||e)(a.\u0275\u0275inject(p.DwDapHttpClient),a.\u0275\u0275inject(u.DwSelectModalService))},e.\u0275prov=a.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e})();var w=n(61937),v=n(47372);class x extends u.DwClientPagingDataSource{constructor(e,t){super(),this.dwHttp=e,this.url=t}getDataList(e,t){return this.dwHttp.get(this.url).pipe((0,v.map)(n=>(this._result={currentPage:e,datas:Object.assign([],n),pageCount:Math.ceil(n.length/t),pageSize:t,rowCount:n.length},this._result)))}}let C=(()=>{class e{constructor(e,t){this.dwHttp=e,this.selectModalService=t,this.config={modalTitle:"\u9009\u62e9\u4ea7\u54c1\u5206\u7c7b",modalWidth:"50%",tableMultiSelect:!0,tableIdField:"item_group_id",tableNameField:"item_group_name",tablePageSize:10,tableColDefs:[{title:"\u4ea7\u54c1\u5206\u7c7b\u7f16\u53f7",field:"item_group_code"},{title:"\u4ea7\u54c1\u5206\u7c7b\u540d\u79f0",field:"item_group_name"}],tableCustomTag:e=>"("+e.item_group_code+")"+e.item_group_name,dataSource:new x(this.dwHttp,"restful/service/itemGroup/ItemGroup/ItemGroup?code=&name=&type=1")}}open(e){return this.selectModalService.open(this.config,e).pipe((0,v.switchMap)(e=>this.dwHttp.get(`restful/service/itemGroup/ItemGroup/ItemGroupByIds?ids=${e}`)))}}return e.\u0275fac=function(t){return new(t||e)(a.\u0275\u0275inject(p.DwDapHttpClient),a.\u0275\u0275inject(u.DwSelectModalService))},e.\u0275prov=a.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e})();var _=n(17494),y=n(66800),S=n(45890),b=n(32276),I=n(91970),E=n(80677),D=n(80419),O=n(10332),M=n(90395),P=n(85773),k=n(29872),F=n(67280);const V=function(){return{minRows:3,maxRows:3}};function T(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"form",2),a.\u0275\u0275elementStart(1,"dw-form-item"),a.\u0275\u0275elementStart(2,"dw-form-label",3),a.\u0275\u0275text(3,"\u53d6\u6d88\u539f\u56e0"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(4,"dw-form-control",4),a.\u0275\u0275element(5,"textarea",5),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd()),2&e){const e=a.\u0275\u0275nextContext();a.\u0275\u0275property("formGroup",e.form),a.\u0275\u0275advance(2),a.\u0275\u0275property("dwSm",6)("dwXs",24),a.\u0275\u0275advance(2),a.\u0275\u0275property("dwSm",16)("dwXs",24),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwAutosize",a.\u0275\u0275pureFunction0(6,V))}}const L=function(){return{height:"calc(100% - 55px)",overflow:"auto","padding-bottom":"24px"}};let R=(()=>{class e{constructor(e,t,n){this.serviceOrderSrv=e,this.fb=t,this.message=n,this.isCancelVisible=!1,this.visibleChanged=new a.EventEmitter,this.service_order_id="",this.form=t.group({service_order_id:0,cancel_reason:["",l.Validators.required]})}ngOnInit(){}initData(e){this.service_order_id=e,this.form.setValue({service_order_id:e,cancel_reason:""})}close(){this.isCancelVisible=!1,this.visibleChanged.emit(this.isCancelVisible)}submit(){this.serviceOrderSrv.CancelServiceOrder(this.form.value).subscribe(e=>{"success"===e?this.message.create("success","\u53d6\u6d88\u6210\u529f\uff01"):this.message.create("error",e)}),this.close()}}return e.\u0275fac=function(t){return new(t||e)(a.\u0275\u0275directiveInject(c.R),a.\u0275\u0275directiveInject(l.FormBuilder),a.\u0275\u0275directiveInject(d.DwMessageService))},e.\u0275cmp=a.\u0275\u0275defineComponent({type:e,selectors:[["app-service-order-cancel"]],inputs:{isCancelVisible:"isCancelVisible"},outputs:{visibleChanged:"visibleChanged"},decls:2,vars:6,consts:[["dwTitle","\u53d6\u6d88\u5de5\u5355",3,"dwBodyStyle","dwMaskClosable","dwWidth","dwVisible","dwOkDisabled","dwVisibleChange","dwOnCancel","dwOnOk"],["dwModalContent",""],["dw-form","",3,"formGroup"],["dwRequired","",3,"dwSm","dwXs"],[3,"dwSm","dwXs"],["required","","dw-input","","maxlength","50","placeholder","\u8bf7\u8f93\u5165\u53d6\u6d88\u539f\u56e0,50\u5b57\u4ee5\u5185","formControlName","cancel_reason",3,"dwAutosize"]],template:function(e,t){1&e&&(a.\u0275\u0275elementStart(0,"dw-modal",0),a.\u0275\u0275listener("dwVisibleChange",function(e){return t.isCancelVisible=e})("dwOnCancel",function(){return t.close()})("dwOnOk",function(){return t.submit()}),a.\u0275\u0275template(1,T,6,7,"ng-template",1),a.\u0275\u0275elementEnd()),2&e&&a.\u0275\u0275property("dwBodyStyle",a.\u0275\u0275pureFunction0(5,L))("dwMaskClosable",!1)("dwWidth",420)("dwVisible",t.isCancelVisible)("dwOkDisabled",!t.form.valid)},directives:[s.DwModalComponent,s.DwModalContentDirective,l.\u0275NgNoValidate,l.NgControlStatusGroup,P.DwFormDirective,l.FormGroupDirective,k.DwRowDirective,P.DwFormItemComponent,k.DwColDirective,P.DwFormLabelComponent,P.DwFormControlComponent,F.DwInputDirective,l.DefaultValueAccessor,F.DwAutosizeDirective,l.RequiredValidator,l.MaxLengthValidator,l.NgControlStatus,l.FormControlName],styles:[""]}),e})();var A=n(99487),N=n(14025),$=n(93761),j=n(96670),z=n(8852),B=n(41937),q=n(74591);function W(e,t){if(1&e){const e=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"button",3),a.\u0275\u0275listener("click",function(){return a.\u0275\u0275restoreView(e),a.\u0275\u0275nextContext().close()}),a.\u0275\u0275text(1,"\u53d6\u6d88"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(2,"button",4),a.\u0275\u0275listener("click",function(){return a.\u0275\u0275restoreView(e),a.\u0275\u0275nextContext().submit()}),a.\u0275\u0275text(3,"\u5bfc\u51fa"),a.\u0275\u0275elementEnd()}if(2&e){const e=a.\u0275\u0275nextContext();a.\u0275\u0275advance(2),a.\u0275\u0275property("dwLoading",e.isLoading)("disabled",!e.dateRange.length)}}function G(e,t){if(1&e){const e=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"div",5),a.\u0275\u0275elementStart(1,"div",6),a.\u0275\u0275text(2,"\u65e5\u671f\uff1a"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(3,"dw-range-picker",7),a.\u0275\u0275listener("ngModelChange",function(t){return a.\u0275\u0275restoreView(e),a.\u0275\u0275nextContext().dateRange=t})("ngModelChange",function(t){return a.\u0275\u0275restoreView(e),a.\u0275\u0275nextContext().onChange(t)}),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(4,"div",8),a.\u0275\u0275element(5,"div",9),a.\u0275\u0275elementStart(6,"label",10),a.\u0275\u0275listener("ngModelChange",function(t){return a.\u0275\u0275restoreView(e),a.\u0275\u0275nextContext().isIncludleUnfinish=t}),a.\u0275\u0275text(7," \u5305\u542b\u672a\u5b8c\u6210\u670d\u52a1\u7684\u5de5\u5355 "),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd()}if(2&e){const e=a.\u0275\u0275nextContext();a.\u0275\u0275advance(3),a.\u0275\u0275property("ngModel",e.dateRange)("dwDisabledDate",e.disabledDate),a.\u0275\u0275advance(3),a.\u0275\u0275property("ngModel",e.isIncludleUnfinish)}}const U=function(){return{height:"calc(100% - 55px)",overflow:"auto","padding-bottom":"24px"}};let H=(()=>{class e{constructor(e,t){this.serviceOrderSrv=e,this.message=t,this.dateRange=[],this.isIncludleUnfinish=!0,this.isLoading=!1,this.isExportVisible=!1,this.visibleChanged=new a.EventEmitter,this.disabledDate=e=>(0,N.differenceInCalendarDays)(new Date,e)<0}ngOnInit(){}initData(){const e=new Date,t=e.getFullYear(),n=e.getMonth();this.dateRange=[new Date(t,Number(n),1),new Date]}onChange(e){console.log("onChange: ",e)}close(){this.dateRange=[],this.isIncludleUnfinish=!0,this.isLoading=!1,this.visibleChanged.emit()}submit(){if(!this.checkIsOneYear())return void this.message.create("error","\u65e5\u671f\u533a\u95f4\u8303\u56f4\u4e0d\u53ef\u8d85\u8fc7\u4e00\u5e74");this.isLoading=!0;const e=[...this.dateRange],t=sessionStorage.getItem("salesman_id")?sessionStorage.getItem("salesman_id"):JSON.parse(sessionStorage.getItem("employeeInfo")).is_salesman?JSON.parse(sessionStorage.getItem("employeeInfo")).employee_id:"";this.serviceOrderSrv.exportReport(e,this.isIncludleUnfinish,t).subscribe(e=>{if(e)switch(e.type){case A.HttpEventType.Response:const t=URL.createObjectURL(e.body),n=document.createElement("a");n.href=t,n.style="visibility:hidden";const i=e.headers.get("Content-disposition").split("filename=")[1];n.download=decodeURI(i),document.body.appendChild(n),n.click(),document.body.removeChild(n),setTimeout(()=>{this.close()},700)}},e=>{const t=new FileReader;t.onload=e=>{const t=JSON.parse(e.target.result);this.message.create("error",t.errorMessage)},t.readAsText(e.error)})}checkIsOneYear(){const e=this.dateRange[1].getTime()-this.dateRange[0].getTime();if(e>316224e5)return!1;let t=31536e6;const n=this.dateRange[0].getFullYear(),i=this.dateRange[0].getMonth()+1,r=this.dateRange[1].getFullYear(),a=this.dateRange[1].getMonth()+1;return(this.isLeapYear(n)&&i<=2||this.isLeapYear(r)&&a>=2)&&(t+=864e5),e<=t}isLeapYear(e){if(e%100==0){if(e%400==0)return!0}else if(e%4==0)return!0;return!1}}return e.\u0275fac=function(t){return new(t||e)(a.\u0275\u0275directiveInject(c.R),a.\u0275\u0275directiveInject(d.DwMessageService))},e.\u0275cmp=a.\u0275\u0275defineComponent({type:e,selectors:[["app-export"]],inputs:{isExportVisible:"isExportVisible"},outputs:{visibleChanged:"visibleChanged"},decls:4,vars:6,consts:[["dwTitle","\u5bfc\u51fa\u7ef4\u4fee\u8bb0\u5f55\u660e\u7ec6",3,"dwBodyStyle","dwMaskClosable","dwWidth","dwVisible","dwFooter","dwVisibleChange","dwOnCancel"],["modalFooter",""],["dwModalContent",""],["dw-button","","dwType","default",3,"click"],["dw-button","","dwType","primary",3,"dwLoading","disabled","click"],[1,"date-range",2,"margin-bottom","12px"],[2,"width","56px"],[2,"width","100%",3,"ngModel","dwDisabledDate","ngModelChange"],[1,"date-range"],[2,"width","48px"],["dw-checkbox","",3,"ngModel","ngModelChange"]],template:function(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"dw-modal",0),a.\u0275\u0275listener("dwVisibleChange",function(e){return t.isExportVisible=e})("dwOnCancel",function(){return t.close()}),a.\u0275\u0275template(1,W,4,2,"ng-template",null,1,a.\u0275\u0275templateRefExtractor),a.\u0275\u0275template(3,G,8,3,"ng-template",2),a.\u0275\u0275elementEnd()),2&e){const e=a.\u0275\u0275reference(2);a.\u0275\u0275property("dwBodyStyle",a.\u0275\u0275pureFunction0(5,U))("dwMaskClosable",!1)("dwWidth",360)("dwVisible",t.isExportVisible)("dwFooter",e)}},directives:[s.DwModalComponent,s.DwModalContentDirective,$.DwButtonComponent,j.uG,z.u,B.DwDatePickerComponent,B.DwRangePickerComponent,l.NgControlStatus,l.NgModel,q.DwCheckboxComponent],styles:[".date-range[_ngcontent-%COMP%]{display:flex;align-items:center}"]}),e})();var X=n(16972),Q=n(59748),K=n(83522);function J(e,t){if(1&e){const e=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"div",2),a.\u0275\u0275element(1,"img",3),a.\u0275\u0275text(2," \u8bf7\u5148\u5b8c\u6210\u4e1a\u52a1\u5458\u4e2a\u4eba\u8ba4\u8bc1\uff0c\u624d\u53ef\u8fdb\u884c\u62a5\u4fee\u548c\u67e5\u8be2 "),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(3,"form",4),a.\u0275\u0275elementStart(4,"dw-form-item"),a.\u0275\u0275elementStart(5,"dw-form-label",5),a.\u0275\u0275text(6,"\u624b\u673a\u53f7"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(7,"dw-form-control",6),a.\u0275\u0275elementStart(8,"input",7),a.\u0275\u0275listener("blur",function(){return a.\u0275\u0275restoreView(e),a.\u0275\u0275reference(10).validInput()}),a.\u0275\u0275elementEnd(),a.\u0275\u0275element(9,"app-valid-input",8,9),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(11,"dw-form-item"),a.\u0275\u0275elementStart(12,"dw-form-label",5),a.\u0275\u0275text(13,"\u9a8c\u8bc1\u7801"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(14,"dw-form-control",10),a.\u0275\u0275elementStart(15,"div",11),a.\u0275\u0275element(16,"input",12),a.\u0275\u0275elementStart(17,"button",13),a.\u0275\u0275listener("click",function(){return a.\u0275\u0275restoreView(e),a.\u0275\u0275nextContext().getVerificationCode()}),a.\u0275\u0275text(18),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(19,"dw-form-item",14),a.\u0275\u0275element(20,"dw-form-label",15),a.\u0275\u0275elementStart(21,"dw-form-control",10),a.\u0275\u0275elementStart(22,"button",16),a.\u0275\u0275listener("click",function(){return a.\u0275\u0275restoreView(e),a.\u0275\u0275nextContext().handleOk()}),a.\u0275\u0275elementStart(23,"span",17),a.\u0275\u0275text(24,"\u8ba4\u8bc1"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd()}if(2&e){const e=a.\u0275\u0275reference(10),t=a.\u0275\u0275nextContext();a.\u0275\u0275advance(3),a.\u0275\u0275property("formGroup",t.form),a.\u0275\u0275advance(2),a.\u0275\u0275property("dwSm",4)("dwXs",24),a.\u0275\u0275advance(2),a.\u0275\u0275property("dwSpan",17)("dwValidateStatus",e.warnType),a.\u0275\u0275advance(2),a.\u0275\u0275property("value",t.form.value.telephone)("type","mobile"),a.\u0275\u0275advance(3),a.\u0275\u0275property("dwSm",4)("dwXs",24),a.\u0275\u0275advance(2),a.\u0275\u0275property("dwSpan",17),a.\u0275\u0275advance(3),a.\u0275\u0275property("dwType","default")("disabled",t.isSending),a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate1(" ",t.time," "),a.\u0275\u0275advance(2),a.\u0275\u0275property("dwSm",4)("dwXs",24),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwSpan",17),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwType","primary")("disabled",!t.form.valid)}}const Z=function(){return{height:"calc(100% - 55px)",overflow:"auto","padding-bottom":"24px"}};let Y=(()=>{class e{constructor(e,t,n){this.fb=e,this.http=t,this.message=n,this.interval=null,this.isSalesmanVisible=!1,this.visibleChanged=new a.EventEmitter,this.time="\u83b7\u53d6\u9a8c\u8bc1\u7801",this.isSending=!1,this.currentTime=61,this.form=this.fb.group({telephone:["",l.Validators.pattern(X.K.MOBILE)],smsCode:["",l.Validators.required]})}ngOnInit(){}getVerificationCode(){this.form.value.telephone?/^1[3456789]\d{9}$/.test(this.form.value.telephone)?this.isSending||(this.isSending=!0,this.http.get(`restful/service/serviceOrder/EmcAnonymous/CommonAccountAuthentication?phoneNumber=${this.form.value.telephone}`).subscribe(e=>{this.currentTime--,this.time=this.currentTime+"S",this.interval=setInterval(()=>{this.currentTime--,this.time=this.currentTime+"S",this.currentTime<=0&&(clearInterval(this.interval),this.time="\u91cd\u65b0\u53d1\u9001",this.currentTime=61,this.isSending=!1)},1e3)},e=>{this.isSending=!1,e.hasOwnProperty("error")&&e.error.hasOwnProperty("errorMessage")&&e.error.errorMessage&&this.message.error(e.error.errorMessage)})):this.message.error("\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u624b\u673a\u53f7"):this.message.error("\u8bf7\u8f93\u5165\u624b\u673a\u53f7")}close(){this.visibleChanged.emit(null)}handleOk(){this.http.get(`restful/service/serviceOrder/EmcAnonymous/CheckCode?telephone=${this.form.value.telephone}&code=${this.form.value.smsCode}`).subscribe(e=>{this.interval&&clearInterval(this.interval),sessionStorage.setItem("salesman_id",e.data?e.data.data.employee_id:0),sessionStorage.setItem("salesman_name",e.data?e.data.data.employee_name:""),this.visibleChanged.emit(!0)},e=>{e.hasOwnProperty("error")&&e.error.hasOwnProperty("errorMessage")&&e.error.errorMessage&&this.message.error(e.error.errorMessage)})}}return e.\u0275fac=function(t){return new(t||e)(a.\u0275\u0275directiveInject(l.FormBuilder),a.\u0275\u0275directiveInject(p.DwDapHttpClient),a.\u0275\u0275directiveInject(d.DwMessageService))},e.\u0275cmp=a.\u0275\u0275defineComponent({type:e,selectors:[["app-salesman-certificate"]],inputs:{isSalesmanVisible:"isSalesmanVisible"},outputs:{visibleChanged:"visibleChanged"},decls:2,vars:6,consts:[["dwTitle","\u4e1a\u52a1\u5458\u8ba4\u8bc1",3,"dwBodyStyle","dwMaskClosable","dwWidth","dwVisible","dwFooter","dwVisibleChange","dwOnCancel"],["dwModalContent",""],[1,"information"],["src","../../../../../../assets/img/icon_information.png","alt","\u6ce8\u610f"],["dw-form","",3,"formGroup"],["dwRequired","",3,"dwSm","dwXs"],[3,"dwSpan","dwValidateStatus"],["dw-input","","formControlName","telephone","required","","placeholder","\u8bf7\u8f93\u5165\u624b\u673a\u53f7","maxlength","20",3,"blur"],[3,"value","type"],["telephone_tip",""],[3,"dwSpan"],[2,"display","flex"],["dw-input","","formControlName","smsCode","required","","placeholder","\u8bf7\u8f93\u51656\u4f4d\u9a8c\u8bc1\u7801","maxlength","6",2,"flex","1"],["dw-button","","type","button",2,"width","100px","margin-left","16px",3,"dwType","disabled","click"],[2,"margin-top","24px","margin-bottom","0"],[3,"dwSm","dwXs"],["dw-button","","type","submit",2,"width","100%",3,"dwType","disabled","click"],["translate",""]],template:function(e,t){1&e&&(a.\u0275\u0275elementStart(0,"dw-modal",0),a.\u0275\u0275listener("dwVisibleChange",function(e){return t.isSalesmanVisible=e})("dwOnCancel",function(){return t.close()}),a.\u0275\u0275template(1,J,25,18,"ng-template",1),a.\u0275\u0275elementEnd()),2&e&&a.\u0275\u0275property("dwBodyStyle",a.\u0275\u0275pureFunction0(5,Z))("dwMaskClosable",!1)("dwWidth",450)("dwVisible",t.isSalesmanVisible)("dwFooter",null)},directives:[s.DwModalComponent,s.DwModalContentDirective,l.\u0275NgNoValidate,l.NgControlStatusGroup,P.DwFormDirective,l.FormGroupDirective,k.DwRowDirective,P.DwFormItemComponent,k.DwColDirective,P.DwFormLabelComponent,P.DwFormControlComponent,F.DwInputDirective,l.DefaultValueAccessor,l.NgControlStatus,l.FormControlName,l.RequiredValidator,l.MaxLengthValidator,Q.l,$.DwButtonComponent,j.uG,z.u,K.TranslateDirective],styles:[".information[_ngcontent-%COMP%]{height:16px;line-height:16px;color:#333;font-size:13px;display:flex;margin-bottom:16px;padding-left:4px}.information[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:16px;margin-right:6px}.one_btn[_ngcontent-%COMP%]{height:32px;padding:0 8px 0 4px;margin-left:8px;color:#fff;background:#1890ff;border-radius:4px;display:flex;align-items:center;box-shadow:0 2px #00000004;cursor:pointer}.one_btn[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{display:block;width:24px;margin-right:2px}.one_btn[_ngcontent-%COMP%]   img.hover[_ngcontent-%COMP%]{display:none}.one_btn[_ngcontent-%COMP%]:hover{background:#40a9ff}.one_btn[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%]{display:none}.one_btn[_ngcontent-%COMP%]:hover   img.hover[_ngcontent-%COMP%]{display:block}.one_btn[_ngcontent-%COMP%]:active{background:#096dd9}"]}),e})();var ee=n(85277),te=n(37568),ne=n(82542),ie=n(62695),re=n(71452);function ae(e,t){if(1&e){const e=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"div",20),a.\u0275\u0275listener("click",function(){return a.\u0275\u0275restoreView(e),a.\u0275\u0275nextContext(2).clearInput()}),a.\u0275\u0275element(1,"em",21),a.\u0275\u0275elementEnd()}}function oe(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"tr"),a.\u0275\u0275elementStart(1,"td",22),a.\u0275\u0275element(2,"label",23),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(3,"td"),a.\u0275\u0275text(4),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(5,"td"),a.\u0275\u0275text(6),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd()),2&e){const e=t.$implicit;a.\u0275\u0275advance(1),a.\u0275\u0275property("dwAlign","center"),a.\u0275\u0275advance(1),a.\u0275\u0275propertyInterpolate("dwValue",e.customer_id),a.\u0275\u0275advance(2),a.\u0275\u0275textInterpolate1(" ",e.customer_code," "),a.\u0275\u0275advance(2),a.\u0275\u0275textInterpolate1(" ",e.customer_name," ")}}function le(e,t){if(1&e){const e=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"div",2),a.\u0275\u0275elementStart(1,"div",3),a.\u0275\u0275elementStart(2,"div",4),a.\u0275\u0275elementStart(3,"div",5),a.\u0275\u0275listener("click",function(){return a.\u0275\u0275restoreView(e),a.\u0275\u0275nextContext().getList()}),a.\u0275\u0275element(4,"em",6),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(5,"input",7),a.\u0275\u0275listener("ngModelChange",function(t){return a.\u0275\u0275restoreView(e),a.\u0275\u0275nextContext().searchValue=t})("keydown",function(t){return a.\u0275\u0275restoreView(e),a.\u0275\u0275nextContext().onKeydown(t)}),a.\u0275\u0275elementEnd(),a.\u0275\u0275template(6,ae,2,0,"div",8),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(7,"div",9),a.\u0275\u0275elementStart(8,"dw-radio-group",10),a.\u0275\u0275listener("ngModelChange",function(t){return a.\u0275\u0275restoreView(e),a.\u0275\u0275nextContext().customer_id=t}),a.\u0275\u0275elementStart(9,"div"),a.\u0275\u0275elementStart(10,"dw-table",11,12),a.\u0275\u0275elementStart(12,"thead",13),a.\u0275\u0275listener("dwSortOrderChange",function(t){return a.\u0275\u0275restoreView(e),a.\u0275\u0275nextContext().order(t)}),a.\u0275\u0275elementStart(13,"tr",14),a.\u0275\u0275elementStart(14,"th",15),a.\u0275\u0275element(15,"span",16),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(16,"th",17),a.\u0275\u0275elementStart(17,"span",16),a.\u0275\u0275text(18,"\u5ba2\u6237\u7f16\u53f7"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(19,"th",18),a.\u0275\u0275elementStart(20,"span",16),a.\u0275\u0275text(21,"\u5ba2\u6237\u540d\u79f0"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(22,"tbody"),a.\u0275\u0275template(23,oe,7,4,"tr",19),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd()}if(2&e){const e=a.\u0275\u0275reference(11),t=a.\u0275\u0275nextContext();a.\u0275\u0275advance(5),a.\u0275\u0275property("ngModel",t.searchValue),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",t.searchValue),a.\u0275\u0275advance(2),a.\u0275\u0275property("ngModel",t.customer_id),a.\u0275\u0275advance(2),a.\u0275\u0275property("dwData",t.customerList),a.\u0275\u0275advance(13),a.\u0275\u0275property("ngForOf",e.data)}}const de=function(){return{"padding-bottom":"8px"}};let se=(()=>{class e{constructor(e,t){this.message=e,this.http=t,this.customerVisibleChanged=new a.EventEmitter,this.search={pageNumber:1,pageSize:10},this.customer_id=0,this.searchValue="",this.onlyNotComplete=!0,this.customerList=[]}initData(){this.customer_id=0,this.searchValue="",this.getList()}getList(){const e=sessionStorage.getItem("salesman_id")||JSON.parse(sessionStorage.getItem("employeeInfo")).employee_id;this.http.get(`restful/service/customer/Customer/ListBySalesman?employeeId=${e}&str=${this.searchValue}`).subscribe(e=>{this.customerList=e.data?e.data.customer:[]},e=>{e.hasOwnProperty("error")&&e.error.hasOwnProperty("errorMessage")&&e.error.errorMessage&&this.message.error(e.error.errorMessage)})}clearInput(){this.searchValue="",this.customer_id=0,this.customerList=[]}close(){this.clearInput(),this.customerVisibleChanged.emit(null)}chooseOk(){const e=this.customerList.filter(e=>e.customer_id.toString()===this.customer_id);this.customerVisibleChanged.emit(e),this.clearInput()}onKeydown(e){13===e.keyCode&&(this.customer_id=0,this.getList())}ngOnInit(){}order(e){const t=e.key;switch(e.value){case"ascend":this.customerList=w.l.order(this.customerList,[t]);break;case"descend":this.customerList=w.l.order(this.customerList,[t,-1])}}}return e.\u0275fac=function(t){return new(t||e)(a.\u0275\u0275directiveInject(d.DwMessageService),a.\u0275\u0275directiveInject(p.DwDapHttpClient))},e.\u0275cmp=a.\u0275\u0275defineComponent({type:e,selectors:[["app-customer-for-salesman-opener"]],inputs:{visible:"visible"},outputs:{customerVisibleChanged:"customerVisibleChanged"},decls:2,vars:5,consts:[["dwTitle","\u9009\u62e9\u5ba2\u6237",3,"dwBodyStyle","dwMaskClosable","dwWidth","dwVisible","dwVisibleChange","dwOnCancel","dwOnOk"],["dwModalContent",""],[1,"wrapper"],[1,"top-box"],[1,"search-box"],[1,"search",3,"click"],["dw-icon","","dwType","search","dwTheme","outline"],["dw-input","","type","text","placeholder","\u641c\u7d22",3,"ngModel","ngModelChange","keydown"],["class","close",3,"click",4,"ngIf"],[1,"choose-wrap"],[1,"radio-group",3,"ngModel","ngModelChange"],[3,"dwData"],["dwTable",""],[3,"dwSortOrderChange"],["dw-tr",""],["dw-th","","dwWidth","40px"],["translate",""],["dw-th","","dwWidth","160px","dwShowSort","","dwColumnKey","doc_no"],["dw-th","","dwWidth","160px","dwShowSort","","dwColumnKey","customer_name"],[4,"ngFor","ngForOf"],[1,"close",3,"click"],["dw-icon","","dwTheme","fill","dwType","close-circle",1,"ant-input-clear-icon"],[3,"dwAlign"],["dw-radio","",3,"dwValue"]],template:function(e,t){1&e&&(a.\u0275\u0275elementStart(0,"dw-modal",0),a.\u0275\u0275listener("dwVisibleChange",function(e){return t.visible=e})("dwOnCancel",function(){return t.close()})("dwOnOk",function(){return t.chooseOk()}),a.\u0275\u0275template(1,le,24,5,"ng-template",1),a.\u0275\u0275elementEnd()),2&e&&a.\u0275\u0275property("dwBodyStyle",a.\u0275\u0275pureFunction0(4,de))("dwMaskClosable",!0)("dwWidth",890)("dwVisible",t.visible)},directives:[s.DwModalComponent,s.DwModalContentDirective,z.u,ee.DwIconDirective,F.DwInputDirective,l.DefaultValueAccessor,l.NgControlStatus,l.NgModel,i.NgIf,ne.DwRadioGroupComponent,ie.DwTableComponent,re.Ct,ie.DwTheadComponent,ie.DwTrDirective,ie.DwTableCellDirective,ie.DwThMeasureDirective,re.BL,K.TranslateDirective,ie.DwThAddOnComponent,ie.DwTbodyComponent,i.NgForOf,ie.DwCellAlignDirective,ne.DwRadioComponent],styles:[".top-box[_ngcontent-%COMP%]{width:100%;height:32px;display:flex;margin-bottom:24px}.checkbox-wrap[_ngcontent-%COMP%]{display:flex;align-items:center;margin-left:16px}.search-box[_ngcontent-%COMP%]{flex:1;height:100%;position:relative}.search-box[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]{width:30px;height:100%;display:flex;align-items:center;justify-content:center;position:absolute;top:0;left:0;z-index:2}.search-box[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]   em[_ngcontent-%COMP%]{font-size:16px;color:#999}.search-box[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{position:absolute;top:0;right:8px;font-size:20px}.search-box[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]   .ant-input-clear-icon[_ngcontent-%COMP%]:last-child{font-size:16px}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;height:32px;background:#fff;border-radius:4px;padding:0 30px}.choose-wrap[_ngcontent-%COMP%]{flex:1;display:flex}.radio-group[_ngcontent-%COMP%]{flex:1;height:100%;position:relative;overflow:auto}.ant-radio-wrapper[_ngcontent-%COMP%]{margin-right:0}"]}),e})();var ce=n(89842),me=n(64840);function pe(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"div",51),a.\u0275\u0275text(1,"\u6b22\u8fce\u60a8\uff0c"),a.\u0275\u0275elementStart(2,"span"),a.\u0275\u0275text(3),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd()),2&e){const e=a.\u0275\u0275nextContext();a.\u0275\u0275advance(3),a.\u0275\u0275textInterpolate(e.salesman_name)}}function ue(e,t){if(1&e){const e=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"em",55),a.\u0275\u0275listener("click",function(){return a.\u0275\u0275restoreView(e),a.\u0275\u0275nextContext(2).clear("customer")}),a.\u0275\u0275elementEnd()}}function he(e,t){if(1&e){const e=a.\u0275\u0275getCurrentView();a.\u0275\u0275template(0,ue,1,0,"em",52),a.\u0275\u0275elementStart(1,"button",53),a.\u0275\u0275listener("click",function(){return a.\u0275\u0275restoreView(e),a.\u0275\u0275nextContext().openCustomer()}),a.\u0275\u0275element(2,"em",54),a.\u0275\u0275elementEnd()}if(2&e){const e=a.\u0275\u0275nextContext();a.\u0275\u0275property("ngIf",e.searchForm.value.customer_name),a.\u0275\u0275advance(1),a.\u0275\u0275propertyInterpolate("angularticsLabel",e.userInfo.tenantId+","+e.userInfo.userId),a.\u0275\u0275property("angularticsCategory","\u670d\u52a1\u5de5\u5355")}}function ge(e,t){1&e&&(a.\u0275\u0275elementStart(0,"div",18),a.\u0275\u0275text(1,"\u5e8f\xa0\xa0\u5217\xa0\xa0\u53f7"),a.\u0275\u0275elementEnd())}function fe(e,t){1&e&&(a.\u0275\u0275elementStart(0,"div",18),a.\u0275\u0275text(1,"\u9879\xa0\xa0\u76ee\xa0\xa0\u53f7"),a.\u0275\u0275elementEnd())}function we(e,t){1&e&&(a.\u0275\u0275elementStart(0,"div",18),a.\u0275\u0275text(1,"\u5e8f\u5217\u53f7/\u9879\u76ee\u53f7"),a.\u0275\u0275elementEnd())}function ve(e,t){if(1&e){const e=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"em",55),a.\u0275\u0275listener("click",function(){return a.\u0275\u0275restoreView(e),a.\u0275\u0275nextContext(2).clear("sn")}),a.\u0275\u0275elementEnd()}}function xe(e,t){if(1&e&&a.\u0275\u0275template(0,ve,1,0,"em",52),2&e){const e=a.\u0275\u0275nextContext();a.\u0275\u0275property("ngIf",e.searchForm.value.sn)}}function Ce(e,t){if(1&e){const e=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"em",55),a.\u0275\u0275listener("click",function(){return a.\u0275\u0275restoreView(e),a.\u0275\u0275nextContext(3).clear("item_group")}),a.\u0275\u0275elementEnd()}}function _e(e,t){if(1&e){const e=a.\u0275\u0275getCurrentView();a.\u0275\u0275template(0,Ce,1,0,"em",52),a.\u0275\u0275elementStart(1,"button",66),a.\u0275\u0275listener("click",function(){return a.\u0275\u0275restoreView(e),a.\u0275\u0275nextContext(2).openItemGroup()}),a.\u0275\u0275element(2,"em",54),a.\u0275\u0275elementEnd()}if(2&e){const e=a.\u0275\u0275nextContext(2);a.\u0275\u0275property("ngIf",e.searchForm.value.item_group_name),a.\u0275\u0275advance(1),a.\u0275\u0275propertyInterpolate("angularticsLabel",e.userInfo.tenantId+","+e.userInfo.userId),a.\u0275\u0275property("angularticsCategory","\u670d\u52a1\u5de5\u5355")}}function ye(e,t){if(1&e){const e=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"em",55),a.\u0275\u0275listener("click",function(){return a.\u0275\u0275restoreView(e),a.\u0275\u0275nextContext(3).clear("service_site")}),a.\u0275\u0275elementEnd()}}function Se(e,t){if(1&e){const e=a.\u0275\u0275getCurrentView();a.\u0275\u0275template(0,ye,1,0,"em",52),a.\u0275\u0275elementStart(1,"button",67),a.\u0275\u0275listener("click",function(){return a.\u0275\u0275restoreView(e),a.\u0275\u0275nextContext(2).openServiceSite()}),a.\u0275\u0275element(2,"em",54),a.\u0275\u0275elementEnd()}if(2&e){const e=a.\u0275\u0275nextContext(2);a.\u0275\u0275property("ngIf",e.searchForm.value.service_site_name),a.\u0275\u0275advance(1),a.\u0275\u0275propertyInterpolate("angularticsLabel",e.userInfo.tenantId+","+e.userInfo.userId),a.\u0275\u0275property("angularticsCategory","\u670d\u52a1\u5de5\u5355")}}function be(e,t){1&e&&(a.\u0275\u0275elementStart(0,"span"),a.\u0275\u0275text(1,"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0"),a.\u0275\u0275elementEnd())}function Ie(e,t){if(1&e){const e=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"em",55),a.\u0275\u0275listener("click",function(){return a.\u0275\u0275restoreView(e),a.\u0275\u0275nextContext(3).clear("remark")}),a.\u0275\u0275elementEnd()}}function Ee(e,t){if(1&e&&a.\u0275\u0275template(0,Ie,1,0,"em",52),2&e){const e=a.\u0275\u0275nextContext(2);a.\u0275\u0275property("ngIf",e.searchForm.value.remark)}}function De(e,t){if(1&e){const e=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"em",55),a.\u0275\u0275listener("click",function(){return a.\u0275\u0275restoreView(e),a.\u0275\u0275nextContext(3).clear("doc_no")}),a.\u0275\u0275elementEnd()}}function Oe(e,t){if(1&e&&a.\u0275\u0275template(0,De,1,0,"em",52),2&e){const e=a.\u0275\u0275nextContext(2);a.\u0275\u0275property("ngIf",e.searchForm.value.doc_no)}}function Me(e,t){if(1&e){const e=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275elementStart(1,"div",16),a.\u0275\u0275elementStart(2,"div",17),a.\u0275\u0275elementStart(3,"div",18),a.\u0275\u0275text(4,"\u4ea7\u54c1\u5206\u7c7b"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(5,"dw-form-item",19),a.\u0275\u0275elementStart(6,"dw-form-control"),a.\u0275\u0275elementStart(7,"dw-input-group",22),a.\u0275\u0275element(8,"input",56),a.\u0275\u0275elementEnd(),a.\u0275\u0275template(9,_e,3,3,"ng-template",null,57,a.\u0275\u0275templateRefExtractor),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(11,"div",17),a.\u0275\u0275elementStart(12,"div",18),a.\u0275\u0275text(13,"\u670d\u52a1\u7ad9\u70b9"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(14,"dw-form-item",21),a.\u0275\u0275elementStart(15,"dw-form-control"),a.\u0275\u0275elementStart(16,"dw-input-group",22),a.\u0275\u0275element(17,"input",58),a.\u0275\u0275elementEnd(),a.\u0275\u0275template(18,Se,3,3,"ng-template",null,59,a.\u0275\u0275templateRefExtractor),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(20,"div",17),a.\u0275\u0275elementStart(21,"div",18),a.\u0275\u0275text(22,"\u5907"),a.\u0275\u0275template(23,be,2,0,"span",34),a.\u0275\u0275text(24,"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\u6ce8 "),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(25,"dw-form-item",21),a.\u0275\u0275elementStart(26,"dw-form-control"),a.\u0275\u0275elementStart(27,"dw-input-group",26),a.\u0275\u0275element(28,"input",60),a.\u0275\u0275elementEnd(),a.\u0275\u0275template(29,Ee,1,1,"ng-template",null,61,a.\u0275\u0275templateRefExtractor),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(31,"div",16),a.\u0275\u0275elementStart(32,"div",17),a.\u0275\u0275elementStart(33,"div",18),a.\u0275\u0275text(34,"\u5355\xa0\xa0\xa0\xa0\xa0\xa0\xa0\u53f7"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(35,"dw-form-item",21),a.\u0275\u0275elementStart(36,"dw-form-control"),a.\u0275\u0275elementStart(37,"dw-input-group",26),a.\u0275\u0275element(38,"input",62),a.\u0275\u0275elementEnd(),a.\u0275\u0275template(39,Oe,1,1,"ng-template",null,63,a.\u0275\u0275templateRefExtractor),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(41,"div",17),a.\u0275\u0275elementStart(42,"div",18),a.\u0275\u0275text(43,"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0 "),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(44,"dw-form-item",21),a.\u0275\u0275elementStart(45,"dw-form-control"),a.\u0275\u0275elementStart(46,"dw-input-group"),a.\u0275\u0275elementStart(47,"label",64),a.\u0275\u0275listener("ngModelChange",function(t){return a.\u0275\u0275restoreView(e),a.\u0275\u0275nextContext().checkboxChange(t,"1")}),a.\u0275\u0275text(48," \u670d\u52a1\u62a5\u544a\u65e0\u96f6\u914d\u4ef6\u66f4\u6362 "),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(49,"div",17),a.\u0275\u0275elementStart(50,"div",18),a.\u0275\u0275text(51,"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0 "),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(52,"dw-form-item",21),a.\u0275\u0275elementStart(53,"dw-form-control"),a.\u0275\u0275elementStart(54,"dw-input-group"),a.\u0275\u0275elementStart(55,"label",65),a.\u0275\u0275listener("ngModelChange",function(t){return a.\u0275\u0275restoreView(e),a.\u0275\u0275nextContext().checkboxChange(t,"2")}),a.\u0275\u0275text(56," \u95ee\u9898\u672a\u89e3\u51b3 "),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementContainerEnd()}if(2&e){const e=a.\u0275\u0275reference(10),t=a.\u0275\u0275reference(19),n=a.\u0275\u0275reference(30),i=a.\u0275\u0275reference(40),r=a.\u0275\u0275nextContext();a.\u0275\u0275advance(7),a.\u0275\u0275property("dwSuffix",e),a.\u0275\u0275advance(9),a.\u0275\u0275property("dwSuffix",t),a.\u0275\u0275advance(7),a.\u0275\u0275property("ngIf","0"===r.fileType),a.\u0275\u0275advance(4),a.\u0275\u0275property("dwSuffix",n),a.\u0275\u0275advance(10),a.\u0275\u0275property("dwSuffix",i)}}function Pe(e,t){if(1&e){const e=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"dw-tag",68),a.\u0275\u0275listener("dwCheckedChange",function(t){return a.\u0275\u0275restoreView(e).$implicit.checked=t})("dwCheckedChange",function(t){const n=a.\u0275\u0275restoreView(e).$implicit;return a.\u0275\u0275nextContext().handleChange(t,n)}),a.\u0275\u0275text(1),a.\u0275\u0275elementEnd()}if(2&e){const e=t.$implicit,n=t.index;a.\u0275\u0275property("dwChecked",e.checked)("id","service-order-list-ststus-tag"+n),a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate1(" ",e.text," ")}}function ke(e,t){if(1&e){const e=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"button",69),a.\u0275\u0275listener("dwClick",function(){a.\u0275\u0275restoreView(e);const t=a.\u0275\u0275nextContext(),n=a.\u0275\u0275reference(8);return t.multyDistribute(),n.initData(t.distribute_service_order_ids,[])}),a.\u0275\u0275elementStart(1,"span",44),a.\u0275\u0275text(2,"\u6279\u91cf\u6d3e\u5de5"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd()}if(2&e){const e=a.\u0275\u0275nextContext();a.\u0275\u0275propertyInterpolate("angularticsLabel",e.userInfo.tenantId+","+e.userInfo.userId),a.\u0275\u0275property("dwType","defult")("dwActionId","distribute")("dwDefaultAuthorized","disabled")("angularticsCategory","\u670d\u52a1\u5de5\u5355")}}function Fe(e,t){if(1&e){const e=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"th",76),a.\u0275\u0275listener("dwCheckedChange",function(t){return a.\u0275\u0275restoreView(e),a.\u0275\u0275nextContext(3).onAllChecked(t)}),a.\u0275\u0275elementEnd()}if(2&e){const e=a.\u0275\u0275nextContext(3);a.\u0275\u0275property("dwChecked",e.checked)("dwIndeterminate",e.indeterminate)}}function Ve(e,t){1&e&&(a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275template(1,Fe,1,2,"th",75),a.\u0275\u0275elementContainerEnd()),2&e&&(a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","checked"))}function Te(e,t){1&e&&(a.\u0275\u0275elementStart(0,"th",78),a.\u0275\u0275elementStart(1,"span",44),a.\u0275\u0275text(2,"\u63d0\u4ea4\u65f6\u95f4"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd())}function Le(e,t){1&e&&(a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275template(1,Te,3,0,"th",77),a.\u0275\u0275elementContainerEnd()),2&e&&(a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","receive_time"))}function Re(e,t){1&e&&(a.\u0275\u0275elementStart(0,"th",80),a.\u0275\u0275elementStart(1,"span",44),a.\u0275\u0275text(2,"\u5355\u53f7"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd())}function Ae(e,t){1&e&&(a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275template(1,Re,3,0,"th",79),a.\u0275\u0275elementContainerEnd()),2&e&&(a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","doc_no"))}function Ne(e,t){1&e&&(a.\u0275\u0275elementStart(0,"th",82),a.\u0275\u0275elementStart(1,"span",44),a.\u0275\u0275text(2,"\u5ba2\u6237\u540d\u79f0"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd())}function $e(e,t){1&e&&(a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275template(1,Ne,3,0,"th",81),a.\u0275\u0275elementContainerEnd()),2&e&&(a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","customer_name"))}function je(e,t){1&e&&(a.\u0275\u0275elementStart(0,"th",84),a.\u0275\u0275elementStart(1,"span",44),a.\u0275\u0275text(2,"\u7c7b\u578b"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd())}function ze(e,t){1&e&&(a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275template(1,je,3,0,"th",83),a.\u0275\u0275elementContainerEnd()),2&e&&(a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","file_type_name"))}function Be(e,t){1&e&&(a.\u0275\u0275elementStart(0,"th",86),a.\u0275\u0275elementStart(1,"span",44),a.\u0275\u0275text(2,"\u540d\u79f0"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd())}function qe(e,t){1&e&&(a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275template(1,Be,3,0,"th",85),a.\u0275\u0275elementContainerEnd()),2&e&&(a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","product_file_name"))}function We(e,t){1&e&&(a.\u0275\u0275elementStart(0,"span",44),a.\u0275\u0275text(1,"\u5e8f\u5217\u53f7"),a.\u0275\u0275elementEnd())}function Ge(e,t){1&e&&(a.\u0275\u0275elementStart(0,"span",44),a.\u0275\u0275text(1,"\u9879\u76ee\u53f7"),a.\u0275\u0275elementEnd())}function Ue(e,t){1&e&&(a.\u0275\u0275elementStart(0,"span",44),a.\u0275\u0275text(1,"\u5e8f\u5217\u53f7/\u9879\u76ee\u53f7"),a.\u0275\u0275elementEnd())}function He(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"th",88),a.\u0275\u0275template(1,We,2,0,"span",89),a.\u0275\u0275template(2,Ge,2,0,"span",89),a.\u0275\u0275template(3,Ue,2,0,"span",89),a.\u0275\u0275elementEnd()),2&e){const e=a.\u0275\u0275nextContext(3);a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf","1"===e.fileType),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf","2"===e.fileType),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf","0"===e.fileType)}}function Xe(e,t){1&e&&(a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275template(1,He,4,3,"th",87),a.\u0275\u0275elementContainerEnd()),2&e&&(a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","sn"))}function Qe(e,t){1&e&&(a.\u0275\u0275elementStart(0,"th",86),a.\u0275\u0275elementStart(1,"span",44),a.\u0275\u0275text(2,"\u89c4\u683c"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd())}function Ke(e,t){1&e&&(a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275template(1,Qe,3,0,"th",85),a.\u0275\u0275elementContainerEnd()),2&e&&(a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","specification"))}function Je(e,t){1&e&&(a.\u0275\u0275elementStart(0,"th",86),a.\u0275\u0275elementStart(1,"span",44),a.\u0275\u0275text(2,"\u578b\u53f7"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd())}function Ze(e,t){1&e&&(a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275template(1,Je,3,0,"th",85),a.\u0275\u0275elementContainerEnd()),2&e&&(a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","model"))}function Ye(e,t){1&e&&(a.\u0275\u0275elementStart(0,"th",82),a.\u0275\u0275elementStart(1,"span",44),a.\u0275\u0275text(2,"\u670d\u52a1\u7ad9\u70b9"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd())}function et(e,t){1&e&&(a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275template(1,Ye,3,0,"th",81),a.\u0275\u0275elementContainerEnd()),2&e&&(a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","service_site_name"))}function tt(e,t){1&e&&(a.\u0275\u0275elementStart(0,"th",86),a.\u0275\u0275elementStart(1,"span",44),a.\u0275\u0275text(2,"\u5de5\u7a0b\u5e08"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd())}function nt(e,t){1&e&&(a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275template(1,tt,3,0,"th",85),a.\u0275\u0275elementContainerEnd()),2&e&&(a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","employee_name"))}function it(e,t){1&e&&(a.\u0275\u0275elementStart(0,"th",82),a.\u0275\u0275elementStart(1,"span",44),a.\u0275\u0275text(2,"\u670d\u52a1\u7c7b\u578b"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd())}function rt(e,t){1&e&&(a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275template(1,it,3,0,"th",81),a.\u0275\u0275elementContainerEnd()),2&e&&(a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","service_type_name"))}function at(e,t){1&e&&(a.\u0275\u0275elementStart(0,"th",82),a.\u0275\u0275elementStart(1,"span",44),a.\u0275\u0275text(2,"\u95ee\u9898\u63cf\u8ff0"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd())}function ot(e,t){1&e&&(a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275template(1,at,3,0,"th",81),a.\u0275\u0275elementContainerEnd()),2&e&&(a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","description"))}function lt(e,t){1&e&&(a.\u0275\u0275elementStart(0,"th",91),a.\u0275\u0275elementStart(1,"span",44),a.\u0275\u0275text(2,"\u5206\u914d\u81f3\u5de5\u5355\u6c60"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd())}function dt(e,t){1&e&&(a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275template(1,lt,3,0,"th",90),a.\u0275\u0275elementContainerEnd()),2&e&&(a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","assign_to_pool"))}function st(e,t){1&e&&(a.\u0275\u0275elementStart(0,"th",82),a.\u0275\u0275elementStart(1,"span",44),a.\u0275\u0275text(2,"\u62a5\u4fee\u6e20\u9053"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd())}function ct(e,t){1&e&&(a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275template(1,st,3,0,"th",81),a.\u0275\u0275elementContainerEnd()),2&e&&(a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","channel"))}function mt(e,t){1&e&&(a.\u0275\u0275elementStart(0,"th",86),a.\u0275\u0275elementStart(1,"span",44),a.\u0275\u0275text(2,"\u5907\u6ce8"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd())}function pt(e,t){1&e&&(a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275template(1,mt,3,0,"th",85),a.\u0275\u0275elementContainerEnd()),2&e&&(a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","remark"))}function ut(e,t){1&e&&(a.\u0275\u0275elementStart(0,"th",93),a.\u0275\u0275elementStart(1,"span",44),a.\u0275\u0275text(2,"\u72b6\u6001"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd())}function ht(e,t){1&e&&(a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275template(1,ut,3,0,"th",92),a.\u0275\u0275elementContainerEnd()),2&e&&(a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","state"))}function gt(e,t){1&e&&(a.\u0275\u0275elementStart(0,"th",95),a.\u0275\u0275elementStart(1,"span",44),a.\u0275\u0275text(2,"\u64cd\u4f5c"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd())}function ft(e,t){1&e&&(a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275template(1,gt,3,0,"th",94),a.\u0275\u0275elementContainerEnd()),2&e&&(a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","operation"))}function wt(e,t){if(1&e){const e=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"td",98),a.\u0275\u0275listener("dwCheckedChange",function(t){a.\u0275\u0275restoreView(e);const n=a.\u0275\u0275nextContext(2).$implicit;return a.\u0275\u0275nextContext(2).onItemChecked(n.service_order_id,t)}),a.\u0275\u0275elementEnd()}if(2&e){const e=a.\u0275\u0275nextContext(2).$implicit,t=a.\u0275\u0275nextContext(2);a.\u0275\u0275property("dwChecked",t.setOfCheckedId.has(e.service_order_id))("dwDisabled",e.disabled)}}function vt(e,t){1&e&&(a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275template(1,wt,1,2,"td",97),a.\u0275\u0275elementContainerEnd()),2&e&&(a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","checked"))}function xt(e,t){1&e&&(a.\u0275\u0275elementStart(0,"div",102),a.\u0275\u0275text(1,"\u8d85\u65f6\u65e0\u4eba\u62a2\u5355"),a.\u0275\u0275elementEnd())}function Ct(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"td",100),a.\u0275\u0275text(1),a.\u0275\u0275pipe(2,"date"),a.\u0275\u0275template(3,xt,2,0,"div",101),a.\u0275\u0275elementEnd()),2&e){const e=a.\u0275\u0275nextContext(2).$implicit;a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate1(" ",a.\u0275\u0275pipeBind2(2,2,e.receive_time,"yyyy-MM-dd HH:mm")," "),a.\u0275\u0275advance(2),a.\u0275\u0275property("ngIf",1==e.flag&&"2"===e.state&&e.assign_to_pool)}}function _t(e,t){1&e&&(a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275template(1,Ct,4,5,"td",99),a.\u0275\u0275elementContainerEnd()),2&e&&(a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","receive_time"))}function yt(e,t){if(1&e){const e=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"td",100),a.\u0275\u0275elementStart(1,"a",103),a.\u0275\u0275listener("click",function(){a.\u0275\u0275restoreView(e);const t=a.\u0275\u0275nextContext(2).$implicit;return a.\u0275\u0275nextContext(2).detail(t.service_order_id)}),a.\u0275\u0275text(2),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd()}if(2&e){const e=a.\u0275\u0275nextContext(2).$implicit,t=a.\u0275\u0275nextContext(2);a.\u0275\u0275advance(1),a.\u0275\u0275propertyInterpolate("angularticsLabel",t.userInfo.tenantId+","+t.userInfo.userId),a.\u0275\u0275property("angularticsCategory","\u670d\u52a1\u5de5\u5355"),a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate(e.doc_no)}}function St(e,t){1&e&&(a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275template(1,yt,3,3,"td",99),a.\u0275\u0275elementContainerEnd()),2&e&&(a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","doc_no"))}function bt(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"td",100),a.\u0275\u0275text(1),a.\u0275\u0275elementEnd()),2&e){const e=a.\u0275\u0275nextContext(2).$implicit;a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate1(" ",e.customer_name," ")}}function It(e,t){1&e&&(a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275template(1,bt,2,1,"td",99),a.\u0275\u0275elementContainerEnd()),2&e&&(a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","customer_name"))}function Et(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"td",100),a.\u0275\u0275text(1),a.\u0275\u0275elementEnd()),2&e){const e=a.\u0275\u0275nextContext(2).$implicit;a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate1(" ","1"===e.type?"\u5355\u673a":"\u4ea7\u7ebf/\u9879\u76ee"," ")}}function Dt(e,t){1&e&&(a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275template(1,Et,2,1,"td",99),a.\u0275\u0275elementContainerEnd()),2&e&&(a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","file_type_name"))}function Ot(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"td",100),a.\u0275\u0275text(1),a.\u0275\u0275elementEnd()),2&e){const e=a.\u0275\u0275nextContext(2).$implicit;a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate1(" ",e.product_file_name," ")}}function Mt(e,t){1&e&&(a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275template(1,Ot,2,1,"td",99),a.\u0275\u0275elementContainerEnd()),2&e&&(a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","product_file_name"))}function Pt(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"td",100),a.\u0275\u0275text(1),a.\u0275\u0275elementEnd()),2&e){const e=a.\u0275\u0275nextContext(2).$implicit;a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate1(" ",e.sn," ")}}function kt(e,t){1&e&&(a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275template(1,Pt,2,1,"td",99),a.\u0275\u0275elementContainerEnd()),2&e&&(a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","sn"))}function Ft(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"td",100),a.\u0275\u0275text(1),a.\u0275\u0275elementEnd()),2&e){const e=a.\u0275\u0275nextContext(2).$implicit;a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate1(" ",e.specification," ")}}function Vt(e,t){1&e&&(a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275template(1,Ft,2,1,"td",99),a.\u0275\u0275elementContainerEnd()),2&e&&(a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","specification"))}function Tt(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"td",100),a.\u0275\u0275text(1),a.\u0275\u0275elementEnd()),2&e){const e=a.\u0275\u0275nextContext(2).$implicit;a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate1(" ",e.model," ")}}function Lt(e,t){1&e&&(a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275template(1,Tt,2,1,"td",99),a.\u0275\u0275elementContainerEnd()),2&e&&(a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","model"))}function Rt(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"td",100),a.\u0275\u0275text(1),a.\u0275\u0275elementEnd()),2&e){const e=a.\u0275\u0275nextContext(2).$implicit;a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate1(" ",e.service_site_name," ")}}function At(e,t){1&e&&(a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275template(1,Rt,2,1,"td",99),a.\u0275\u0275elementContainerEnd()),2&e&&(a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","service_site_name"))}function Nt(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"td",100),a.\u0275\u0275text(1),a.\u0275\u0275elementEnd()),2&e){const e=a.\u0275\u0275nextContext(2).$implicit;a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate1(" ",e.employee_name," ")}}function $t(e,t){1&e&&(a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275template(1,Nt,2,1,"td",99),a.\u0275\u0275elementContainerEnd()),2&e&&(a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","employee_name"))}function jt(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"td",100),a.\u0275\u0275text(1),a.\u0275\u0275elementEnd()),2&e){const e=a.\u0275\u0275nextContext(2).$implicit;a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate1(" ",e.service_type_name," ")}}function zt(e,t){1&e&&(a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275template(1,jt,2,1,"td",99),a.\u0275\u0275elementContainerEnd()),2&e&&(a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","service_type_name"))}function Bt(e,t){1&e&&(a.\u0275\u0275elementStart(0,"span"),a.\u0275\u0275text(1,"/"),a.\u0275\u0275elementEnd())}function qt(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"td",105),a.\u0275\u0275text(1),a.\u0275\u0275template(2,Bt,2,0,"span",34),a.\u0275\u0275text(3),a.\u0275\u0275elementEnd()),2&e){const e=a.\u0275\u0275nextContext(2).$implicit;a.\u0275\u0275propertyInterpolate3("title","",e.fault_phrase,"",e.fault_phrase&&e.description?"/":"","",e.description,""),a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate1(" ",e.fault_phrase,""),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",e.fault_phrase&&e.description),a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate1("",e.description," ")}}function Wt(e,t){1&e&&(a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275template(1,qt,4,6,"td",104),a.\u0275\u0275elementContainerEnd()),2&e&&(a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","description"))}function Gt(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"td",107),a.\u0275\u0275text(1),a.\u0275\u0275elementEnd()),2&e){const e=a.\u0275\u0275nextContext(2).$implicit;a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate1(" ",e.assign_to_pool?"\u662f":"\u5426"," ")}}function Ut(e,t){1&e&&(a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275template(1,Gt,2,1,"td",106),a.\u0275\u0275elementContainerEnd()),2&e&&(a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","assign_to_pool"))}function Ht(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"td",100),a.\u0275\u0275text(1),a.\u0275\u0275elementEnd()),2&e){const e=a.\u0275\u0275nextContext(2).$implicit,t=a.\u0275\u0275nextContext(2);a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate2(" ",e.channel?t.getChannel(e.channel):"\u7535\u8bdd"," ","5"===e.channel&&e.channel_explanation?"("+e.channel_explanation+")":""," ")}}function Xt(e,t){1&e&&(a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275template(1,Ht,2,2,"td",99),a.\u0275\u0275elementContainerEnd()),2&e&&(a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","channel"))}function Qt(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"td",105),a.\u0275\u0275text(1),a.\u0275\u0275elementEnd()),2&e){const e=a.\u0275\u0275nextContext(2).$implicit;a.\u0275\u0275property("title",e.remark),a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate1(" ",e.remark," ")}}function Kt(e,t){1&e&&(a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275template(1,Qt,2,2,"td",104),a.\u0275\u0275elementContainerEnd()),2&e&&(a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","remark"))}function Jt(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"td",100),a.\u0275\u0275text(1),a.\u0275\u0275elementEnd()),2&e){const e=a.\u0275\u0275nextContext(2).$implicit,t=a.\u0275\u0275nextContext(2);a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate1(" ",t.serviceOrderStateSrv.getServiceOrderStateLabel(e)," ")}}function Zt(e,t){1&e&&(a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275template(1,Jt,2,1,"td",99),a.\u0275\u0275elementContainerEnd()),2&e&&(a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","state"))}function Yt(e,t){if(1&e){const e=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275elementStart(1,"div",118),a.\u0275\u0275listener("dwClick",function(){a.\u0275\u0275restoreView(e);const t=a.\u0275\u0275nextContext(5).$implicit,n=a.\u0275\u0275nextContext(2),i=a.\u0275\u0275reference(10);return n.modifyForChild("Distribution"),i.initData(t.service_order_id,t.latitude)}),a.\u0275\u0275element(2,"img",119),a.\u0275\u0275element(3,"img",120),a.\u0275\u0275text(4),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementContainerEnd()}if(2&e){const e=a.\u0275\u0275nextContext(7);a.\u0275\u0275advance(1),a.\u0275\u0275propertyInterpolate("angularticsLabel",e.userInfo.tenantId+","+e.userInfo.userId),a.\u0275\u0275property("dwActionId","assign")("dwDefaultAuthorized","disabled")("angularticsCategory","\u670d\u52a1\u5de5\u5355"),a.\u0275\u0275advance(3),a.\u0275\u0275textInterpolate1(" ","\u5f00\u59cb\u5206\u914d"," ")}}function en(e,t){if(1&e){const e=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275elementStart(1,"div",118),a.\u0275\u0275listener("dwClick",function(){a.\u0275\u0275restoreView(e);const t=a.\u0275\u0275nextContext(5).$implicit,n=a.\u0275\u0275nextContext(2),i=a.\u0275\u0275reference(10);return n.modifyForChild("Distribution"),i.initData(t.service_order_id,t.latitude)}),a.\u0275\u0275element(2,"img",119),a.\u0275\u0275element(3,"img",120),a.\u0275\u0275text(4),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementContainerEnd()}if(2&e){const e=a.\u0275\u0275nextContext(7);a.\u0275\u0275advance(1),a.\u0275\u0275propertyInterpolate("angularticsLabel",e.userInfo.tenantId+","+e.userInfo.userId),a.\u0275\u0275property("dwActionId","assign")("dwDefaultAuthorized","disabled")("angularticsCategory","\u670d\u52a1\u5de5\u5355"),a.\u0275\u0275advance(3),a.\u0275\u0275textInterpolate1(" ","\u91cd\u65b0\u5206\u914d"," ")}}function tn(e,t){if(1&e){const e=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275elementStart(1,"div",121),a.\u0275\u0275listener("dwClick",function(){a.\u0275\u0275restoreView(e);const t=a.\u0275\u0275nextContext(5).$implicit,n=a.\u0275\u0275nextContext(2),i=a.\u0275\u0275reference(8);return n.modifyForChild("Dispatch"),i.initData(t.service_order_id)}),a.\u0275\u0275element(2,"img",122),a.\u0275\u0275element(3,"img",123),a.\u0275\u0275text(4),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementContainerEnd()}if(2&e){const e=a.\u0275\u0275nextContext(7);a.\u0275\u0275advance(1),a.\u0275\u0275propertyInterpolate("angularticsLabel",e.userInfo.tenantId+","+e.userInfo.userId),a.\u0275\u0275property("dwActionId","distribute")("dwDefaultAuthorized","disabled")("angularticsCategory","\u670d\u52a1\u5de5\u5355"),a.\u0275\u0275advance(3),a.\u0275\u0275textInterpolate1(" ","\u5f00\u59cb\u6d3e\u5de5"," ")}}function nn(e,t){if(1&e){const e=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"div",124),a.\u0275\u0275listener("click",function(){a.\u0275\u0275restoreView(e);const t=a.\u0275\u0275nextContext(5).$implicit;return a.\u0275\u0275nextContext(2).modify(t.service_order_id,"modify")}),a.\u0275\u0275element(1,"img",125),a.\u0275\u0275element(2,"img",126),a.\u0275\u0275text(3," \u7f16\u8f91 "),a.\u0275\u0275elementEnd()}if(2&e){const e=a.\u0275\u0275nextContext(7);a.\u0275\u0275propertyInterpolate("angularticsLabel",e.userInfo.tenantId+","+e.userInfo.userId),a.\u0275\u0275property("dwActionId","modify")("dwDefaultAuthorized","disabled")("angularticsCategory","\u670d\u52a1\u5de5\u5355")}}function rn(e,t){if(1&e){const e=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"div",127),a.\u0275\u0275listener("dwClick",function(){a.\u0275\u0275restoreView(e);const t=a.\u0275\u0275nextContext(5).$implicit,n=a.\u0275\u0275nextContext(2),i=a.\u0275\u0275reference(12);return n.modifyForChild("Cancel"),i.initData(t.service_order_id)}),a.\u0275\u0275element(1,"img",128),a.\u0275\u0275element(2,"img",129),a.\u0275\u0275text(3," \u53d6\u6d88 "),a.\u0275\u0275elementEnd()}if(2&e){const e=a.\u0275\u0275nextContext(7);a.\u0275\u0275propertyInterpolate("angularticsLabel",e.userInfo.tenantId+","+e.userInfo.userId),a.\u0275\u0275property("dwActionId","cancel")("dwDefaultAuthorized","disabled")("angularticsCategory","\u670d\u52a1\u5de5\u5355")}}function an(e,t){if(1&e){const e=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"div",130),a.\u0275\u0275elementStart(1,"div",131),a.\u0275\u0275listener("dwOnConfirm",function(){a.\u0275\u0275restoreView(e);const t=a.\u0275\u0275nextContext(5).$implicit;return a.\u0275\u0275nextContext(2).delete(t.service_order_id)}),a.\u0275\u0275pipe(2,"translate"),a.\u0275\u0275pipe(3,"translate"),a.\u0275\u0275pipe(4,"translate"),a.\u0275\u0275elementStart(5,"div",132),a.\u0275\u0275element(6,"img",133),a.\u0275\u0275element(7,"img",134),a.\u0275\u0275text(8," \u5220\u9664 "),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd()}2&e&&(a.\u0275\u0275property("dwActionId","delete")("dwDefaultAuthorized","disabled"),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwPopconfirmTitle",a.\u0275\u0275pipeBind1(2,6,"\u662f\u5426\u5220\u9664"))("dwOkText",a.\u0275\u0275pipeBind1(3,8,"dw-determine"))("dwCancelText",a.\u0275\u0275pipeBind1(4,10,"dw-cancel"))("dwPopconfirmPlacement","topRight"))}function on(e,t){if(1&e){const e=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"div",114),a.\u0275\u0275listener("click",function(t){return a.\u0275\u0275restoreView(e),a.\u0275\u0275nextContext(6).stopProp(t)}),a.\u0275\u0275template(1,Yt,5,5,"ng-container",34),a.\u0275\u0275template(2,en,5,5,"ng-container",34),a.\u0275\u0275template(3,tn,5,5,"ng-container",34),a.\u0275\u0275template(4,nn,4,4,"div",115),a.\u0275\u0275template(5,rn,4,4,"div",116),a.\u0275\u0275template(6,an,9,12,"div",117),a.\u0275\u0275elementEnd()}if(2&e){const e=a.\u0275\u0275nextContext(4).$implicit,t=a.\u0275\u0275nextContext(2);a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf","1"==e.state),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf","2"==e.state),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf","2"==e.state&&!e.assign_to_pool&&(e.service_site_id==t.currentServiceSiteId||t.distribution_all&&"1"===t.service_site_type)),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf","1"==e.state),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf","1"==e.state||"2"==e.state),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf","1"==e.state||"2"==e.state)}}function ln(e,t){if(1&e){const e=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"div"),a.\u0275\u0275elementStart(1,"div",110),a.\u0275\u0275elementStart(2,"a",111),a.\u0275\u0275listener("click",function(){a.\u0275\u0275restoreView(e);const t=a.\u0275\u0275nextContext(3).index;return a.\u0275\u0275nextContext(2).showActBox(t)}),a.\u0275\u0275element(3,"em",112),a.\u0275\u0275elementEnd(),a.\u0275\u0275template(4,on,7,6,"div",113),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd()}if(2&e){const e=a.\u0275\u0275nextContext(3).index,t=a.\u0275\u0275nextContext(2);a.\u0275\u0275advance(1),a.\u0275\u0275styleProp("position",t.actIdx==e?"":"static"),a.\u0275\u0275advance(3),a.\u0275\u0275property("ngIf",t.actIdx==e)}}function dn(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"td",109),a.\u0275\u0275template(1,ln,5,3,"div",34),a.\u0275\u0275elementEnd()),2&e){const e=a.\u0275\u0275nextContext(2).$implicit;a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf","1"==e.state||"2"==e.state)}}function sn(e,t){1&e&&(a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275template(1,dn,2,1,"td",108),a.\u0275\u0275elementContainerEnd()),2&e&&(a.\u0275\u0275advance(1),a.\u0275\u0275property("dwColumnId","operation"))}function cn(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"tr",96),a.\u0275\u0275template(1,vt,2,1,"ng-container",34),a.\u0275\u0275template(2,_t,2,1,"ng-container",34),a.\u0275\u0275template(3,St,2,1,"ng-container",34),a.\u0275\u0275template(4,It,2,1,"ng-container",34),a.\u0275\u0275template(5,Dt,2,1,"ng-container",34),a.\u0275\u0275template(6,Mt,2,1,"ng-container",34),a.\u0275\u0275template(7,kt,2,1,"ng-container",34),a.\u0275\u0275template(8,Vt,2,1,"ng-container",34),a.\u0275\u0275template(9,Lt,2,1,"ng-container",34),a.\u0275\u0275template(10,At,2,1,"ng-container",34),a.\u0275\u0275template(11,$t,2,1,"ng-container",34),a.\u0275\u0275template(12,zt,2,1,"ng-container",34),a.\u0275\u0275template(13,Wt,2,1,"ng-container",34),a.\u0275\u0275template(14,Ut,2,1,"ng-container",34),a.\u0275\u0275template(15,Xt,2,1,"ng-container",34),a.\u0275\u0275template(16,Kt,2,1,"ng-container",34),a.\u0275\u0275template(17,Zt,2,1,"ng-container",34),a.\u0275\u0275template(18,sn,2,1,"ng-container",34),a.\u0275\u0275elementEnd()),2&e){const e=a.\u0275\u0275nextContext(2);a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf","2"===e.state),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",e.showTable),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",e.showTable),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",e.showTable),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf","0"===e.fileType),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",e.showTable),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",e.showTable),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",e.showTable),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",e.showTable),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",e.showTable),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf","3"===e.state||"4"===e.state),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",e.showTable),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",e.showTable),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",e.enable_so_pool&&""===e.state),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",e.showTable),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",e.showTable),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",e.showTable),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",e.showTable)}}const mn=function(){return{x:"1500px",y:"calc(100vh - 171px - 140px)"}};function pn(e,t){if(1&e){const e=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275elementStart(1,"dw-table",70,71),a.\u0275\u0275listener("dwPageIndexChange",function(t){return a.\u0275\u0275restoreView(e),a.\u0275\u0275nextContext().search.pageIndex=t})("dwPageSizeChange",function(t){return a.\u0275\u0275restoreView(e),a.\u0275\u0275nextContext().search.pageSize=t})("dwCurrentPageDataChange",function(t){return a.\u0275\u0275restoreView(e),a.\u0275\u0275nextContext().onCurrentPageDataChange(t)}),a.\u0275\u0275elementStart(3,"thead",72),a.\u0275\u0275listener("dwSortOrderChange",function(t){return a.\u0275\u0275restoreView(e),a.\u0275\u0275nextContext().order(t)}),a.\u0275\u0275elementStart(4,"tr",73),a.\u0275\u0275template(5,Ve,2,1,"ng-container",34),a.\u0275\u0275template(6,Le,2,1,"ng-container",34),a.\u0275\u0275template(7,Ae,2,1,"ng-container",34),a.\u0275\u0275template(8,$e,2,1,"ng-container",34),a.\u0275\u0275template(9,ze,2,1,"ng-container",34),a.\u0275\u0275template(10,qe,2,1,"ng-container",34),a.\u0275\u0275template(11,Xe,2,1,"ng-container",34),a.\u0275\u0275template(12,Ke,2,1,"ng-container",34),a.\u0275\u0275template(13,Ze,2,1,"ng-container",34),a.\u0275\u0275template(14,et,2,1,"ng-container",34),a.\u0275\u0275template(15,nt,2,1,"ng-container",34),a.\u0275\u0275template(16,rt,2,1,"ng-container",34),a.\u0275\u0275template(17,ot,2,1,"ng-container",34),a.\u0275\u0275template(18,dt,2,1,"ng-container",34),a.\u0275\u0275template(19,ct,2,1,"ng-container",34),a.\u0275\u0275template(20,pt,2,1,"ng-container",34),a.\u0275\u0275template(21,ht,2,1,"ng-container",34),a.\u0275\u0275template(22,ft,2,1,"ng-container",34),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(23,"tbody"),a.\u0275\u0275template(24,cn,19,18,"tr",74),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementContainerEnd()}if(2&e){const e=a.\u0275\u0275reference(2),t=a.\u0275\u0275nextContext(),n=a.\u0275\u0275reference(75);a.\u0275\u0275advance(1),a.\u0275\u0275property("dwTableId","service-order-list"+t.state)("dwData",t.dataList)("dwScroll",a.\u0275\u0275pureFunction0(25,mn))("dwPageIndex",t.search.pageIndex)("dwPageSize",t.search.pageSize)("dwShowTotal",n),a.\u0275\u0275advance(4),a.\u0275\u0275property("ngIf","2"===t.state),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",t.showTable),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",t.showTable),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",t.showTable),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf","0"===t.fileType),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",t.showTable),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",t.showTable),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",t.showTable),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",t.showTable),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",t.showTable),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf","3"===t.state||"4"===t.state),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",t.showTable),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",t.showTable),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",t.enable_so_pool&&""===t.state),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",t.showTable),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",t.showTable),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",t.showTable),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",t.showTable),a.\u0275\u0275advance(2),a.\u0275\u0275property("ngForOf",e.data)}}function un(e,t){if(1&e&&a.\u0275\u0275text(0),2&e){const e=a.\u0275\u0275nextContext();a.\u0275\u0275textInterpolate1("\u5171 ",e.dataList.length," \u6761")}}let hn=(()=>{class e{constructor(e,t,n,i,r,a,o,l,d,s,c,m,p,u,h,g){this.commonHttpService=e,this.serviceOrderStateSrv=t,this.serviceOrderSrv=n,this.message=i,this.modalService=r,this.fb=a,this.router=o,this.customerOpenerService=l,this.serviceSiteOpenerService=d,this.itemGroupOpenerService=s,this.analytics=c,this.userService=m,this.dwAuthFunctionPermissionRepository=p,this._route=u,this.serviceOrderDetailSrv=h,this.serviceSiteResource=g,this.queryHistory={date_range:"",customer_id:"",customer_name:"",service_site_id:"",service_site_name:"",item_group_id:"",item_group_name:"",state:"",sn:"",remark:"",doc_no:"",pageIndex:1,pageSize:10,distribution_all:!1,isNoPartsReplacement:!1,isNotSolvedDocuments:!1,return_visit:"",isSearchExpand:!1},this.channelList=[{label:"\u5c0f\u7a0b\u5e8f",value:"1"},{label:"\u7535\u8bdd",value:"2"},{label:"QQ",value:"3"},{label:"\u90ae\u4ef6",value:"4"},{label:"\u5176\u4ed6",value:"5"}],this.search={pageIndex:1,pageSize:10,pageSizeOptions:[10,20,30]},this.fileType="0",this.isSearchExpand=!1,this.orgDataList=[],this.dataList=[],this.displayData=[],this.sortName=null,this.sortValue=null,this.listOfSearch=[],this.state="",this.distribution_all=!1,this.enable_so_pool=!1,this.salesman_name="",this.showTable=!1,this.fiterTags=[{text:"\u5168\u90e8",checked:!0,value:""},{text:"\u5f85\u5206\u914d",checked:!1,value:"1"},{text:"\u5f85\u6d3e\u5de5",checked:!1,value:"2"},{text:"\u5f85\u670d\u52a1",checked:!1,value:"3"},{text:"\u5f85\u56de\u5355",checked:!1,value:"4"},{text:"\u5f85\u8bc4\u4ef7",checked:!1,value:"5"},{text:"\u5f85\u56de\u8bbf",checked:!1,value:"0"},{text:"\u5f85\u5ba1\u67e5",checked:!1,value:"5,6"},{text:"\u5df2\u5173\u95ed",checked:!1,value:"6"},{text:"\u5df2\u53d6\u6d88",checked:!1,value:"7"}],this.isCustomerVisible=!1,this.isDownloading=!1,this.userInfo={tenantId:"",userId:""},this.checked=!1,this.loading=!1,this.indeterminate=!1,this.listOfCurrentPageData=[],this.setOfCheckedId=new Set,this.distribute_service_order_ids=""}ngOnInit(){this.userInfo=this.userService.getUserInfo(),this.searchForm=this.fb.group({}),this.searchForm.addControl("date_range",new l.FormControl("")),this.searchForm.addControl("customer_id",new l.FormControl("")),this.searchForm.addControl("customer_name",new l.FormControl("")),this.searchForm.addControl("service_site_id",new l.FormControl("")),this.searchForm.addControl("service_site_name",new l.FormControl("")),this.searchForm.addControl("item_group_id",new l.FormControl("")),this.searchForm.addControl("item_group_name",new l.FormControl("")),this.searchForm.addControl("state",new l.FormControl("")),this.searchForm.addControl("sn",new l.FormControl("")),this.searchForm.addControl("remark",new l.FormControl("")),this.searchForm.addControl("doc_no",new l.FormControl("")),this.searchForm.addControl("isNoPartsReplacement",new l.FormControl(!1)),this.searchForm.addControl("isNotSolvedDocuments",new l.FormControl(!1)),this.searchForm.addControl("return_visit",new l.FormControl("")),this.getCurrentServiceSite(),JSON.parse(sessionStorage.getItem("employeeInfo")).salesman_universal_account&&sessionStorage.getItem("salesman_id")&&(this.salesman_name=sessionStorage.getItem("salesman_name")),this.commonHttpService.get("restful/service/serviceOrder/ServiceOrder/IsShowTypeOption").subscribe(e=>{this.fileType=e.data},e=>{e.hasOwnProperty("error")&&e.error.hasOwnProperty("errorMessage")&&e.error.errorMessage&&this.message.error(e.error.errorMessage)})}setHistoryData(){this._route.queryParamMap.subscribe(e=>{if(e.get("queryHistory")){this.queryHistory=JSON.parse(e.get("queryHistory")),this.queryHistory.date_range.length>0&&null!=this.queryHistory.date_range[0]&&this.searchForm.get("date_range").setValue(this.queryHistory.date_range),this.searchForm.get("customer_id").setValue(this.queryHistory.customer_id),this.searchForm.get("customer_name").setValue(this.queryHistory.customer_name),this.searchForm.get("service_site_id").setValue(this.queryHistory.service_site_id),this.searchForm.get("service_site_name").setValue(this.queryHistory.service_site_name),this.searchForm.get("item_group_id").setValue(this.queryHistory.item_group_id),this.searchForm.get("item_group_name").setValue(this.queryHistory.item_group_name),this.searchForm.get("sn").setValue(this.queryHistory.sn),this.searchForm.get("remark").setValue(this.queryHistory.remark),this.searchForm.get("doc_no").setValue(this.queryHistory.doc_no),this.searchForm.get("isNoPartsReplacement").setValue(this.queryHistory.isNoPartsReplacement),this.searchForm.get("isNotSolvedDocuments").setValue(this.queryHistory.isNotSolvedDocuments),this.searchForm.get("return_visit").setValue(this.queryHistory.return_visit),this.state=this.queryHistory.state,this.isSearchExpand=this.queryHistory.isSearchExpand;for(const e of this.fiterTags)e.checked=e.value===this.state;this.search.pageIndex=this.queryHistory.pageIndex,this.search.pageSize=this.queryHistory.pageSize}})}getCurrentServiceSite(){this.serviceOrderDetailSrv.getAutoSettings().subscribe(e=>{this.distribution_all=e.distribution_all,this.enable_so_pool=e.enable_so_pool,this.enable_so_pool&&(this.fiterTags=[{text:"\u5168\u90e8",checked:!0,value:""},{text:"\u5f85\u5206\u914d",checked:!1,value:"1"},{text:"\u5f85\u62a2\u5355",checked:!1,value:"grabOrder"},{text:"\u5f85\u6d3e\u5de5",checked:!1,value:"2"},{text:"\u5f85\u670d\u52a1",checked:!1,value:"3"},{text:"\u5f85\u56de\u5355",checked:!1,value:"4"},{text:"\u5f85\u8bc4\u4ef7",checked:!1,value:"5"},{text:"\u5f85\u56de\u8bbf",checked:!1,value:"0"},{text:"\u5f85\u5ba1\u67e5",checked:!1,value:"5,6"},{text:"\u5df2\u5173\u95ed",checked:!1,value:"6"},{text:"\u5df2\u53d6\u6d88",checked:!1,value:"7"}]),this.setHistoryData(),this.commonHttpService.get(`${this.serviceSiteResource}/UserSite`).subscribe(e=>{this.service_site_id=e.service_site_id,this.service_site_type=e.service_site_type,this.currentServiceSiteId=e.service_site_id,this.loadData()})})}loadData(){if(JSON.parse(sessionStorage.getItem("employeeInfo")).salesman_universal_account&&!sessionStorage.getItem("salesman_id"))this.isSalesmanVisible=!0;else{this.hideActBox(),this.searchForm.value.state="0"===this.state?"5,6":this.state;const e=sessionStorage.getItem("salesman_id")?sessionStorage.getItem("salesman_id"):JSON.parse(sessionStorage.getItem("employeeInfo")).is_salesman?JSON.parse(sessionStorage.getItem("employeeInfo")).employee_id:"",t=Object.assign(Object.assign({},this.searchForm.value),{receive_employee_id:e});this.serviceOrderSrv.getServiceOrderList(t).subscribe(e=>{this.dwAuthFunctionPermissionRepository.getFunctionPermissionAll().subscribe(t=>{const n=t.data.filter(e=>"service-order"===e.code)[0].action.filter(e=>"distribute"===e.id);if(e.data.service_order.forEach((t,i)=>{e.data.service_order[i].disabled="2"!==t.state||t.service_site_id!==this.currentServiceSiteId&&!this.distribution_all&&"1"===this.service_site_type||"allow"!==n[0].restriction}),this.orgDataList=this.dataList=e.data.service_order||[],e.data.service_order.filter(e=>"1"===e.type),"5,6"===this.state)this.dataList=w.l.order(this.orgDataList,["end_time"]);else if(this.dataList=w.l.order(this.orgDataList,["receive_time",-1]),this.enable_so_pool&&(""===this.state||"grabOrder"===this.state)){const e=[...this.dataList].sort((e,t)=>e.flag<=t.flag?1:-1);this.dataList=e}this.search.pageIndex=this.dataList.length/this.search.pageSize+1>=this.queryHistory.pageIndex?this.queryHistory.pageIndex:1,this.queryHistory.pageIndex=1,this.showTable=!0},e=>{e.hasOwnProperty("error")&&e.error.hasOwnProperty("errorMessage")&&e.error.errorMessage&&this.message.error(e.error.errorMessage)})},e=>{e.hasOwnProperty("error")&&e.error.hasOwnProperty("errorMessage")&&e.error.errorMessage&&this.message.error(e.error.errorMessage)})}}isShowSearchExpand(){this.isSearchExpand=!this.isSearchExpand}reset(){this.search.pageIndex=1,this.searchForm.get("date_range").setValue(""),this.searchForm.get("customer_id").setValue(""),this.searchForm.get("customer_name").setValue(""),this.searchForm.get("service_site_id").setValue(""),this.searchForm.get("service_site_name").setValue(""),this.searchForm.get("item_group_id").setValue(""),this.searchForm.get("item_group_name").setValue(""),this.searchForm.get("sn").setValue(""),this.searchForm.get("remark").setValue(""),this.searchForm.get("doc_no").setValue(""),this.searchForm.get("isNoPartsReplacement").setValue(!1),this.searchForm.get("isNotSolvedDocuments").setValue(!1),this.loadData()}onOpenRange(e){console.log(e),e&&this.analytics.eventTrack.next({action:"\u67e5\u8be2\u6761\u4ef6-\u70b9\u51fb\u9009\u62e9\u65e5\u671f",properties:{category:"\u670d\u52a1\u5de5\u5355",label:this.userInfo.tenantId+","+this.userInfo.userId,value:0}})}updateCheckedSet(e,t){t?this.setOfCheckedId.add(e):this.setOfCheckedId.delete(e)}onCurrentPageDataChange(e){this.listOfCurrentPageData=e,this.refreshCheckedStatus()}refreshCheckedStatus(){const e=this.listOfCurrentPageData.filter(({disabled:e})=>!e);this.checked=!!e.length&&e.every(({service_order_id:e})=>this.setOfCheckedId.has(e)),this.indeterminate=e.some(({service_order_id:e})=>this.setOfCheckedId.has(e))&&!this.checked}onItemChecked(e,t){this.updateCheckedSet(e,t),this.refreshCheckedStatus()}onAllChecked(e){this.listOfCurrentPageData.filter(({disabled:e})=>!e).forEach(({service_order_id:t})=>this.updateCheckedSet(t,e)),this.refreshCheckedStatus()}multyDistribute(){this.setOfCheckedId.size?(console.log([...this.setOfCheckedId]),this.distribute_service_order_ids=[...this.setOfCheckedId].join(","),this.serviceOrderSrv.getOrderServiceSites(this.distribute_service_order_ids).subscribe(e=>{e.data.service_order.length>=2?this.message.create("error","\u8bf7\u9009\u62e9\u76f8\u540c\u670d\u52a1\u7ad9\u70b9\u7684\u5de5\u5355\u8fdb\u884c\u6d3e\u5de5\uff01"):this.isDispatchVisible=!0})):this.message.create("error","\u8bf7\u81f3\u5c11\u9009\u62e9\u4e00\u7b14\u9700\u8981\u6d3e\u5de5\u7684\u670d\u52a1\u5de5\u5355\uff01")}exportRecord(){!JSON.parse(sessionStorage.getItem("employeeInfo")).salesman_universal_account||sessionStorage.getItem("salesman_id")?(this.isDownloading=!0,this.isExportVisible=!0):this.isSalesmanVisible=!0}showActBox(e){this.actIdx=e}hideActBox(){this.actIdx=null}stopProp(e){e.stopPropagation()}handleChange(e,t){if(e){for(const e of this.fiterTags)e.text!==t.text&&(e.checked=!1);this.showTable=!1,this.searchForm.get("return_visit").setValue("\u5f85\u56de\u8bbf"===t.text?"0":""),this.state=t.value,this.loadData()}this.analytics.eventTrack.next({action:"\u4e3b\u9875\u72b6\u6001\u680f\u5207\u6362-\u70b9\u51fb"+t.text+"\u9875\u7b7e",properties:{category:"\u670d\u52a1\u5de5\u5355",label:this.userInfo.tenantId+","+this.userInfo.userId,value:0}})}checkboxChange(e,t){console.log(e),this.analytics.eventTrack.next({action:`\u67e5\u8be2\u6761\u4ef6-\u70b9\u51fb${e?"":"\u53d6\u6d88"}\u52fe\u9009${"1"===t?"\u670d\u52a1\u62a5\u544a\u65e0\u914d\u4ef6\u66f4\u6362":"\u95ee\u9898\u672a\u89e3\u51b3"}`,properties:{category:"\u670d\u52a1\u5de5\u5355",label:this.userInfo.tenantId+","+this.userInfo.userId,value:0}})}create(){!JSON.parse(sessionStorage.getItem("employeeInfo")).salesman_universal_account||sessionStorage.getItem("salesman_id")?this.router.navigate(["../service-order-create"],{relativeTo:this._route}):this.isSalesmanVisible=!0}modifyForChild(e){"Dispatch"===e?this.isDispatchVisible=!0:"Distribution"===e?this.isDistributionVisible=!0:"Cancel"===e&&(this.isCancelVisible=!0)}modify(e,t){"modify"===t&&this.router.navigate(["../service-order-modify",e],{relativeTo:this._route})}detail(e){const t={relativeTo:this._route,queryParams:{queryHistory:JSON.stringify({date_range:this.searchForm.value.date_range,customer_id:this.searchForm.value.customer_id,customer_name:this.searchForm.value.customer_name,service_site_id:this.searchForm.value.service_site_id,service_site_name:this.searchForm.value.service_site_name,item_group_id:this.searchForm.value.item_group_id,item_group_name:this.searchForm.value.item_group_name,state:this.state,sn:this.searchForm.value.sn,remark:this.searchForm.value.remark,doc_no:this.searchForm.value.doc_no,pageIndex:this.search.pageIndex,pageSize:this.search.pageSize,distribution_all:this.distribution_all,isNoPartsReplacement:this.searchForm.value.isNoPartsReplacement,isNotSolvedDocuments:this.searchForm.value.isNotSolvedDocuments,return_visit:this.searchForm.value.return_visit,isSearchExpand:this.isSearchExpand})}};this.router.navigate(["../service-order-detail",e],t)}changeDistributionVisible(e){this.isDistributionVisible=e,this.ngOnInit()}changeDispatchVisible(e){this.isDispatchVisible=!1,e.length&&(e.forEach(e=>{this.setOfCheckedId.delete(e)}),this.ngOnInit())}changeCancelVisible(e){this.isCancelVisible=e,this.ngOnInit()}changeExportVisible(){this.isExportVisible=!1,this.isDownloading=!1}changeSalesmanVisible(e){this.isSalesmanVisible=!1,e&&this.ngOnInit()}delete(e){this.deleteMul([e])}deleteMul(e){e.length>0&&this.serviceOrderSrv.deleteServiceOrder(e).subscribe(e=>{!0===e.success?(this.message.create("success","\u5220\u9664\u6210\u529f\uff01"),this.loadData()):e.message?(this.message.create("error",e.message),this.loadData()):this.message.create("error","\u5220\u9664\u5931\u8d25\uff01")},e=>{e.hasOwnProperty("error")&&e.error.hasOwnProperty("errorMessage")&&e.error.errorMessage&&this.message.error(e.error.errorMessage)})}currentPageDataChange(e){this.displayData=e}openCustomer(){JSON.parse(sessionStorage.getItem("employeeInfo")).is_salesman?this.isCustomerVisible=!0:this.customerOpenerService.open([]).subscribe(e=>{if(null==e||0===e.length)return;const t=e[0];this.searchForm.get("customer_id").setValue(t.customer_id),this.searchForm.get("customer_name").setValue(t.customer_name)})}customerChangeVisible(e){e&&e.length&&(this.searchForm.get("customer_id").setValue(e[0].customer_id),this.searchForm.get("customer_name").setValue(e[0].customer_name)),this.isCustomerVisible=!1}openServiceSite(){this.serviceSiteOpenerService.setConfig(this.service_site_id,this.service_site_type),this.serviceSiteOpenerService.open([]).subscribe(e=>{if(!e.length)return;const t=e[0];this.searchForm.get("service_site_id").setValue(t.service_site_id),this.searchForm.get("service_site_name").setValue(t.service_site_name)})}openItemGroup(){this.itemGroupOpenerService.open([]).subscribe(e=>{let t="",n="";e.data.item_group.forEach(e=>{t+=e.item_group_id+",",n+=e.item_group_name+","}),0!==t.length&&(t=t.substr(0,t.length-1)),0!==n.length&&(n=n.substr(0,n.length-1)),this.searchForm.get("item_group_id").setValue(t),this.searchForm.get("item_group_name").setValue(n)})}clear(e){"customer"===e||"service_site"===e||"item_group"===e?(this.searchForm.get(e+"_id").setValue(""),this.searchForm.get(e+"_name").setValue("")):"sn"===e?this.searchForm.get("sn").setValue(""):"remark"===e?this.searchForm.get("remark").setValue(""):"doc_no"===e&&this.searchForm.get("doc_no").setValue("")}order(e){const t=e.key;switch(e.value){case"ascend":this.dataList=w.l.order(this.dataList,[t]);break;case"descend":this.dataList=w.l.order(this.dataList,[t,-1])}}getChannel(e){return this.channelList.filter(t=>t.value===e)[0].label}}return e.\u0275fac=function(t){return new(t||e)(a.\u0275\u0275directiveInject(S.$),a.\u0275\u0275directiveInject(m),a.\u0275\u0275directiveInject(c.R),a.\u0275\u0275directiveInject(d.DwMessageService),a.\u0275\u0275directiveInject(s.DwModalService),a.\u0275\u0275directiveInject(l.FormBuilder),a.\u0275\u0275directiveInject(r.Router),a.\u0275\u0275directiveInject(h),a.\u0275\u0275directiveInject(f),a.\u0275\u0275directiveInject(C),a.\u0275\u0275directiveInject(_.DwAnalytics),a.\u0275\u0275directiveInject(y.DwUserService),a.\u0275\u0275directiveInject(b.DwAuthFunctionPermissionRepository),a.\u0275\u0275directiveInject(r.ActivatedRoute),a.\u0275\u0275directiveInject(I.v),a.\u0275\u0275directiveInject("ServiceSiteResource"))},e.\u0275cmp=a.\u0275\u0275defineComponent({type:e,selectors:[["app-service-order-list"]],features:[a.\u0275\u0275ProvidersFeature([h,f,C])],decls:78,vars:50,consts:[[3,"click"],["class","welcome",4,"ngIf"],[1,"issue_layout_head"],[1,"issue_layout_title"],[2,"margin-left","3px"],[3,"isDispatchVisible","visibleChanged"],["childDispatch",""],[3,"isDistributionVisible","visibleChanged"],["childDistribution",""],[3,"isCancelVisible","visibleChanged"],["childCancel",""],[3,"isExportVisible","visibleChanged"],["childExport",""],[3,"isSalesmanVisible","visibleChanged"],["childSalesman",""],[1,"sales_issue_form","sales_form","sales_shadow",3,"formGroup"],["dw-row","",1,"search-form-box"],[1,"search-input"],[1,"label"],[1,"form-input","date-picker"],["formControlName","date_range","id","service-order-list-query-date",2,"width","100%",3,"dwOnOpenChange"],[1,"form-input"],["dwSearch","",3,"dwSuffix"],["type","text","dw-input","","readonly","","dwMode","multiple","formControlName","customer_name",2,"width","100%"],["customerData",""],["class","label",4,"ngIf"],[3,"dwSuffix"],["type","text","dw-input","","formControlName","sn",2,"width","100%"],["SNSeachData",""],[1,"search-input",2,"width","172px"],["dw-button","","angularticsAction","\u67e5\u8be2\u6761\u4ef6-\u70b9\u51fb\u67e5\u8be2\u6309\u94ae","dw-analyticsOn","click",3,"dwType","angularticsCategory","angularticsLabel","click"],["dw-button","","angularticsAction","\u67e5\u8be2\u6761\u4ef6-\u70b9\u51fb\u91cd\u7f6e\u6309\u94ae","dw-analyticsOn","click",3,"dwType","angularticsCategory","angularticsLabel","click"],[1,"isExpand",3,"click"],["dw-icon","","dwTheme","outline",3,"dwType"],[4,"ngIf"],[1,"tag-wrap"],[1,"tag-label"],[1,"tags"],["dwMode","checkable","style","font-size: 15px;line-height: 28px;",3,"dwChecked","id","dwCheckedChange",4,"ngFor","ngForOf"],[1,"service_order_list","dw-f-table","sales_table"],["dw-row","","dwActionAuthorized","",1,"dw-f-btn-bar-action",3,"dwActionId","dwDefaultAuthorized"],["dw-col",""],["dw-button","","type","button","dwActionAuthorized","","id","service-order-list-create-in","angularticsAction","\u65b0\u5efa-\u8fdb\u5165\u65b0\u5efa\u9875\u9762","dw-analyticsOn","click",3,"dwType","dwActionId","dwDefaultAuthorized","angularticsCategory","angularticsLabel","dwClick"],["dw-icon","","dwType","plus"],["translate",""],["dw-button","","type","button","dwActionAuthorized","","angularticsAction","\u6d4f\u89c8\u9875\u64cd\u4f5c-\u70b9\u51fb\u6279\u91cf\u6d3e\u5de5","dw-analyticsOn","click",3,"dwType","dwActionId","dwDefaultAuthorized","angularticsCategory","angularticsLabel","dwClick",4,"ngIf"],["dw-button","","type","button","dwActionAuthorized","","angularticsAction","\u6d4f\u89c8\u9875\u64cd\u4f5c-\u70b9\u51fb\u5bfc\u51fa\u7ef4\u4fee\u8bb0\u5f55\u660e\u7ec6","dw-analyticsOn","click",3,"dwType","dwActionId","dwLoading","dwDefaultAuthorized","angularticsCategory","angularticsLabel","dwClick"],["dw-icon","","dwType","upload"],["totalTemplate",""],[3,"visible","customerVisibleChanged"],["child3",""],[1,"welcome"],["dw-icon","","class","ant-input-clear-icon","dwTheme","fill","dwType","close-circle",3,"click",4,"ngIf"],["dw-button","","dwType","primary","dwSearch","","dw-analyticsOn","click","id","service-order-list-query-customer","type","button","angularticsAction","\u67e5\u8be2\u6761\u4ef6-\u70b9\u51fb\u9009\u62e9\u5ba2\u6237\u540d\u79f0",3,"angularticsCategory","angularticsLabel","click"],["dw-icon","","dwType","search"],["dw-icon","","dwTheme","fill","dwType","close-circle",1,"ant-input-clear-icon",3,"click"],["type","text","dw-input","","readonly","","dwMode","multiple","formControlName","item_group_name",2,"width","100%"],["itemGroupData",""],["type","text","dw-input","","readonly","","dwMode","multiple","formControlName","service_site_name",2,"width","100%"],["serviceSiteData",""],["type","text","dw-input","","formControlName","remark",2,"width","100%"],["remarkSeachData",""],["type","text","dw-input","","formControlName","doc_no",2,"width","100%"],["docNoSeachData",""],["dw-checkbox","","formControlName","isNoPartsReplacement",2,"white-space","nowrap",3,"ngModelChange"],["dw-checkbox","","formControlName","isNotSolvedDocuments",3,"ngModelChange"],["dw-button","","dwType","primary","dwSearch","","dw-analyticsOn","click","id","service-order-list-query-group","angularticsAction","\u67e5\u8be2\u6761\u4ef6-\u70b9\u51fb\u9009\u62e9\u4ea7\u54c1\u5206\u7c7b","type","button",3,"angularticsCategory","angularticsLabel","click"],["dw-button","","dwType","primary","dwSearch","","dw-analyticsOn","click","id","service-order-list-query-site","angularticsAction","\u67e5\u8be2\u6761\u4ef6-\u70b9\u51fb\u9009\u62e9\u670d\u52a1\u7ad9\u70b9","type","button",3,"angularticsCategory","angularticsLabel","click"],["dwMode","checkable",2,"font-size","15px","line-height","28px",3,"dwChecked","id","dwCheckedChange"],["dw-button","","type","button","dwActionAuthorized","","angularticsAction","\u6d4f\u89c8\u9875\u64cd\u4f5c-\u70b9\u51fb\u6279\u91cf\u6d3e\u5de5","dw-analyticsOn","click",3,"dwType","dwActionId","dwDefaultAuthorized","angularticsCategory","angularticsLabel","dwClick"],["dwShowSizeChanger","",3,"dwTableId","dwData","dwScroll","dwPageIndex","dwPageSize","dwShowTotal","dwPageIndexChange","dwPageSizeChange","dwCurrentPageDataChange"],["dwTable",""],[3,"dwSortOrderChange"],["dw-tr","","dwDropColumns",""],["dwReorderColumns","",4,"ngFor","ngForOf"],["dwLeft","","dwWidth","40px",3,"dwChecked","dwIndeterminate","dwCheckedChange",4,"dwColumnId"],["dwLeft","","dwWidth","40px",3,"dwChecked","dwIndeterminate","dwCheckedChange"],["dwWidth","144px","dwDragDrop","",4,"dwColumnId"],["dwWidth","144px","dwDragDrop",""],["dwWidth","152px","dwDragDrop","",4,"dwColumnId"],["dwWidth","152px","dwDragDrop",""],["dwWidth","100px","dwDragDrop","",4,"dwColumnId"],["dwWidth","100px","dwDragDrop",""],["dw-th","","dwDragDrop","",4,"dwColumnId"],["dw-th","","dwDragDrop",""],["dwDragDrop","",4,"dwColumnId"],["dwDragDrop",""],["dwWidth","120px","dwDragDrop","",4,"dwColumnId"],["dwWidth","120px","dwDragDrop",""],["translate","",4,"ngIf"],["dwWidth","108px","dwAlign","center","dwDragDrop","",4,"dwColumnId"],["dwWidth","108px","dwAlign","center","dwDragDrop",""],["dwWidth","72px","dwDragDrop","",4,"dwColumnId"],["dwWidth","72px","dwDragDrop",""],["dwWidth","120px","class","align-center",4,"dwColumnId"],["dwWidth","120px",1,"align-center"],["dwReorderColumns",""],["dwLeft","","dwWidth","40",3,"dwChecked","dwDisabled","dwCheckedChange",4,"dwColumnId"],["dwLeft","","dwWidth","40",3,"dwChecked","dwDisabled","dwCheckedChange"],["dwEllipsis","",4,"dwColumnId"],["dwEllipsis",""],["class","overtime",4,"ngIf"],[1,"overtime"],["id","service-order-list-detail","angularticsAction","\u8be6\u60c5-\u70b9\u51fb\u67e5\u770b\u8be6\u60c5","dw-analyticsOn","click",3,"angularticsCategory","angularticsLabel","click"],["dwEllipsis","",3,"title",4,"dwColumnId"],["dwEllipsis","",3,"title"],["dwEllipsis","","dwAlign","center",4,"dwColumnId"],["dwEllipsis","","dwAlign","center"],["class","action-td","class","align-center",4,"dwColumnId"],[1,"align-center"],[1,"act-more"],["dwActionAuthorized","","translate","",3,"click"],["dw-icon","","dwType","ellipsis"],["class","action-grid",3,"click",4,"ngIf"],[1,"action-grid",3,"click"],["class","act-item","dwActionAuthorized","","title","\u7f16\u8f91","angularticsAction","\u4fee\u6539-\u8fdb\u5165\u4fee\u6539\u9875\u9762","dw-analyticsOn","click","id","service-order-list-modify-in",3,"dwActionId","dwDefaultAuthorized","angularticsCategory","angularticsLabel","click",4,"ngIf"],["class","act-item","dwActionAuthorized","","angularticsAction","\u6d4f\u89c8\u9875\u64cd\u4f5c-\u70b9\u51fb\u53d6\u6d88","dw-analyticsOn","click","id","service-order-list-cancel",3,"dwActionId","dwDefaultAuthorized","angularticsCategory","angularticsLabel","dwClick",4,"ngIf"],["class","act-item","dwActionAuthorized","","title","\u5220\u9664",3,"dwActionId","dwDefaultAuthorized",4,"ngIf"],["dwActionAuthorized","","angularticsAction","\u6d4f\u89c8\u9875\u64cd\u4f5c-\u70b9\u51fb\u5206\u914d","dw-analyticsOn","click","id","service-order-list-assign",1,"act-item",3,"dwActionId","dwDefaultAuthorized","angularticsCategory","angularticsLabel","dwClick"],["src","../../../../../../assets/img/icon_assign_nor.png","alt","\u5206\u914d",1,"action-icon"],["src","../../../../../../assets/img/icon_assign_pre.png","alt","\u5206\u914d",1,"action-icon"],["dwActionAuthorized","","angularticsAction","\u6d4f\u89c8\u9875\u64cd\u4f5c-\u70b9\u51fb\u6d3e\u5de5","dw-analyticsOn","click","id","service-order-list-distribute",1,"act-item",3,"dwActionId","dwDefaultAuthorized","angularticsCategory","angularticsLabel","dwClick"],["src","../../../../../../assets/img/icon_distribute_nor.png","alt","\u6d3e\u5de5",1,"action-icon"],["src","../../../../../../assets/img/icon_distribute_pre.png","alt","\u6d3e\u5de5",1,"action-icon"],["dwActionAuthorized","","title","\u7f16\u8f91","angularticsAction","\u4fee\u6539-\u8fdb\u5165\u4fee\u6539\u9875\u9762","dw-analyticsOn","click","id","service-order-list-modify-in",1,"act-item",3,"dwActionId","dwDefaultAuthorized","angularticsCategory","angularticsLabel","click"],["src","../../../../../../assets/img/icon_edit.png","alt","\u7f16\u8f91",1,"action-icon"],["src","../../../../../../assets/img/icon_edit_hover.png","alt","\u7f16\u8f91",1,"action-icon"],["dwActionAuthorized","","angularticsAction","\u6d4f\u89c8\u9875\u64cd\u4f5c-\u70b9\u51fb\u53d6\u6d88","dw-analyticsOn","click","id","service-order-list-cancel",1,"act-item",3,"dwActionId","dwDefaultAuthorized","angularticsCategory","angularticsLabel","dwClick"],["src","../../../../../../assets/img/icon_cancel_nor.png","alt","\u53d6\u6d88",1,"action-icon"],["src","../../../../../../assets/img/icon_cancel_pre.png","alt","\u53d6\u6d88",1,"action-icon"],["dwActionAuthorized","","title","\u5220\u9664",1,"act-item",3,"dwActionId","dwDefaultAuthorized"],["dw-popconfirm","",3,"dwPopconfirmTitle","dwOkText","dwCancelText","dwPopconfirmPlacement","dwOnConfirm"],["dw-popconfirm","","translate",""],["src","../../../../../../assets/img/icon_delete.png","alt","\u5220\u9664",1,"action-icon",2,"margin-top","-2px"],["src","../../../../../../assets/img/icon_delete_hover.png","alt","\u5220\u9664",1,"action-icon",2,"margin-top","-2px"]],template:function(e,t){if(1&e){const e=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"dw-content",0),a.\u0275\u0275listener("click",function(){return t.hideActBox()}),a.\u0275\u0275template(1,pe,4,1,"div",1),a.\u0275\u0275elementStart(2,"div",2),a.\u0275\u0275elementStart(3,"h2",3),a.\u0275\u0275elementStart(4,"span",4),a.\u0275\u0275text(5,"\u670d\u52a1\u5de5\u5355"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275element(6,"dw-divider"),a.\u0275\u0275elementStart(7,"app-service-order-dispatch",5,6),a.\u0275\u0275listener("visibleChanged",function(e){return t.changeDispatchVisible(e)}),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(9,"app-service-order-distribution",7,8),a.\u0275\u0275listener("visibleChanged",function(){return t.changeDistributionVisible(!1)}),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(11,"app-service-order-cancel",9,10),a.\u0275\u0275listener("visibleChanged",function(){return t.changeCancelVisible(!1)}),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(13,"app-export",11,12),a.\u0275\u0275listener("visibleChanged",function(){return t.changeExportVisible()}),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(15,"app-salesman-certificate",13,14),a.\u0275\u0275listener("visibleChanged",function(e){return t.changeSalesmanVisible(e)}),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(17,"div"),a.\u0275\u0275elementStart(18,"form",15),a.\u0275\u0275elementStart(19,"div",16),a.\u0275\u0275elementStart(20,"div",17),a.\u0275\u0275elementStart(21,"div",18),a.\u0275\u0275text(22,"\u65e5\xa0\xa0\xa0\xa0\xa0\xa0\xa0\u671f"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(23,"dw-form-item",19),a.\u0275\u0275elementStart(24,"dw-form-control"),a.\u0275\u0275elementStart(25,"dw-range-picker",20),a.\u0275\u0275listener("dwOnOpenChange",function(e){return t.onOpenRange(e)}),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(26,"div",17),a.\u0275\u0275elementStart(27,"div",18),a.\u0275\u0275text(28,"\u5ba2\u6237\u540d\u79f0"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(29,"dw-form-item",21),a.\u0275\u0275elementStart(30,"dw-form-control"),a.\u0275\u0275elementStart(31,"dw-input-group",22),a.\u0275\u0275element(32,"input",23),a.\u0275\u0275elementEnd(),a.\u0275\u0275template(33,he,3,3,"ng-template",null,24,a.\u0275\u0275templateRefExtractor),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(35,"div",17),a.\u0275\u0275template(36,ge,2,0,"div",25),a.\u0275\u0275template(37,fe,2,0,"div",25),a.\u0275\u0275template(38,we,2,0,"div",25),a.\u0275\u0275elementStart(39,"dw-form-item",21),a.\u0275\u0275elementStart(40,"dw-form-control"),a.\u0275\u0275elementStart(41,"dw-input-group",26),a.\u0275\u0275element(42,"input",27),a.\u0275\u0275elementEnd(),a.\u0275\u0275template(43,xe,1,1,"ng-template",null,28,a.\u0275\u0275templateRefExtractor),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(45,"div",29),a.\u0275\u0275elementStart(46,"button",30),a.\u0275\u0275listener("click",function(){return t.search.pageIndex=1,t.loadData()}),a.\u0275\u0275text(47),a.\u0275\u0275pipe(48,"translate"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(49,"button",31),a.\u0275\u0275listener("click",function(){return t.reset()}),a.\u0275\u0275text(50),a.\u0275\u0275pipe(51,"translate"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(52,"div",32),a.\u0275\u0275listener("click",function(){return t.isShowSearchExpand()}),a.\u0275\u0275text(53),a.\u0275\u0275element(54,"em",33),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275template(55,Me,57,5,"ng-container",34),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(56,"div",35),a.\u0275\u0275elementStart(57,"div",36),a.\u0275\u0275text(58,"\u72b6\u6001\uff1a"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(59,"div",37),a.\u0275\u0275template(60,Pe,2,3,"dw-tag",38),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(61,"div",39),a.\u0275\u0275elementStart(62,"div",40),a.\u0275\u0275elementStart(63,"div",41),a.\u0275\u0275elementStart(64,"button",42),a.\u0275\u0275listener("dwClick",function(){return t.create()}),a.\u0275\u0275element(65,"em",43),a.\u0275\u0275elementStart(66,"span",44),a.\u0275\u0275text(67,"\u65b0\u5efa"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275template(68,ke,3,5,"button",45),a.\u0275\u0275elementStart(69,"button",46),a.\u0275\u0275listener("dwClick",function(){a.\u0275\u0275restoreView(e);const n=a.\u0275\u0275reference(14);return t.exportRecord(),n.initData()}),a.\u0275\u0275element(70,"em",47),a.\u0275\u0275elementStart(71,"span",44),a.\u0275\u0275text(72,"\u5bfc\u51fa\u7ef4\u4fee\u8bb0\u5f55\u660e\u7ec6"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275template(73,pn,25,26,"ng-container",34),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275template(74,un,1,1,"ng-template",null,48,a.\u0275\u0275templateRefExtractor),a.\u0275\u0275elementStart(76,"app-customer-for-salesman-opener",49,50),a.\u0275\u0275listener("customerVisibleChanged",function(e){return t.customerChangeVisible(e)}),a.\u0275\u0275elementEnd()}if(2&e){const e=a.\u0275\u0275reference(34),n=a.\u0275\u0275reference(44);a.\u0275\u0275classMap(t.salesman_name?"has_salesman dw-f-content-list layoutClass sales_layout":"dw-f-content-list layoutClass sales_layout"),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",t.salesman_name),a.\u0275\u0275advance(6),a.\u0275\u0275property("isDispatchVisible",t.isDispatchVisible),a.\u0275\u0275advance(2),a.\u0275\u0275property("isDistributionVisible",t.isDistributionVisible),a.\u0275\u0275advance(2),a.\u0275\u0275property("isCancelVisible",t.isCancelVisible),a.\u0275\u0275advance(2),a.\u0275\u0275property("isExportVisible",t.isExportVisible),a.\u0275\u0275advance(2),a.\u0275\u0275property("isSalesmanVisible",t.isSalesmanVisible),a.\u0275\u0275advance(2),a.\u0275\u0275classMap(t.salesman_name?"content-box content-box2":"content-box"),a.\u0275\u0275advance(1),a.\u0275\u0275property("formGroup",t.searchForm),a.\u0275\u0275advance(13),a.\u0275\u0275property("dwSuffix",e),a.\u0275\u0275advance(5),a.\u0275\u0275property("ngIf","1"===t.fileType),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf","2"===t.fileType),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf","0"===t.fileType),a.\u0275\u0275advance(3),a.\u0275\u0275property("dwSuffix",n),a.\u0275\u0275advance(5),a.\u0275\u0275propertyInterpolate("angularticsLabel",t.userInfo.tenantId+","+t.userInfo.userId),a.\u0275\u0275property("dwType","primary")("angularticsCategory","\u670d\u52a1\u5de5\u5355"),a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate1(" ",a.\u0275\u0275pipeBind1(48,46,"\u67e5\u8be2")," "),a.\u0275\u0275advance(2),a.\u0275\u0275propertyInterpolate("angularticsLabel",t.userInfo.tenantId+","+t.userInfo.userId),a.\u0275\u0275property("dwType","defult")("angularticsCategory","\u670d\u52a1\u5de5\u5355"),a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate1(" ",a.\u0275\u0275pipeBind1(51,48,"\u91cd\u7f6e")," "),a.\u0275\u0275advance(3),a.\u0275\u0275textInterpolate1(" ",t.isSearchExpand?"\u6536\u8d77":"\u5c55\u5f00"," "),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwType",t.isSearchExpand?"up":"down"),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",t.isSearchExpand),a.\u0275\u0275advance(5),a.\u0275\u0275property("ngForOf",t.fiterTags),a.\u0275\u0275advance(2),a.\u0275\u0275property("dwActionId","add")("dwDefaultAuthorized","disabled"),a.\u0275\u0275advance(2),a.\u0275\u0275propertyInterpolate("angularticsLabel",t.userInfo.tenantId+","+t.userInfo.userId),a.\u0275\u0275property("dwType","primary")("dwActionId","add")("dwDefaultAuthorized","disabled")("angularticsCategory","\u670d\u52a1\u5de5\u5355"),a.\u0275\u0275advance(4),a.\u0275\u0275property("ngIf","2"===t.state),a.\u0275\u0275advance(1),a.\u0275\u0275propertyInterpolate("angularticsLabel",t.userInfo.tenantId+","+t.userInfo.userId),a.\u0275\u0275property("dwType","defult")("dwActionId","export")("dwLoading",t.isDownloading)("dwDefaultAuthorized","disabled")("angularticsCategory","\u670d\u52a1\u5de5\u5355"),a.\u0275\u0275advance(4),a.\u0275\u0275property("ngIf",t.showTable),a.\u0275\u0275advance(3),a.\u0275\u0275property("visible",t.isCustomerVisible)}},directives:[E.DwContentComponent,i.NgIf,D.DwDividerComponent,O.H,M.C,R,H,Y,l.\u0275NgNoValidate,l.NgControlStatusGroup,l.FormGroupDirective,k.DwRowDirective,P.DwFormItemComponent,k.DwColDirective,P.DwFormControlComponent,B.DwDatePickerComponent,B.DwRangePickerComponent,l.NgControlStatus,l.FormControlName,z.u,F.DwInputGroupComponent,F.DwInputGroupWhitSuffixOrPrefixDirective,F.DwInputDirective,l.DefaultValueAccessor,$.DwButtonComponent,j.uG,_.DwAnalyticsOn,ee.DwIconDirective,i.NgForOf,te.DwActionAuthorizedDirective,K.TranslateDirective,se,q.DwCheckboxComponent,ce.DwTagComponent,ie.DwTableComponent,re.Ct,ie.DwTheadComponent,ie.DwTrDirective,re.Y9,ie.DwTbodyComponent,re.b,ie.DwTableCellDirective,ie.DwThMeasureDirective,re.BL,ie.DwCellFixedDirective,ie.DwThSelectionComponent,re.$2,ie.DwCellAlignDirective,re.at,ie.DwTdAddOnComponent,ie.DwCellEllipsisDirective,me.DwPopconfirmDirective],pipes:[K.TranslatePipe,i.DatePipe],styles:[".dw-f-content-list[_ngcontent-%COMP%]{position:relative}.dw-f-content-list.has_salesman[_ngcontent-%COMP%]{padding-top:30px}.search-form-box[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]{width:calc((100% - 3 * 24px - 172px) / 3)}.search-form-box[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]   .form-input[_ngcontent-%COMP%]{flex:1}.isExpand[_ngcontent-%COMP%]{width:46px;white-space:nowrap;color:#1890ff;margin-left:16px;cursor:pointer}.tag-wrap[_ngcontent-%COMP%]{display:flex;align-items:center;height:55px;border-bottom:1px solid #e5e5e5;margin-bottom:24px;padding-bottom:22px}.tag-label[_ngcontent-%COMP%]{color:#000000d9;font-size:14px;font-weight:bold;margin-right:14px;white-space:nowrap}.tags[_ngcontent-%COMP%]{color:#000000d9;white-space:nowrap}.ant-tag[_ngcontent-%COMP%]{height:32px;line-height:32px;padding:0 16px}.ant-tag[_ngcontent-%COMP%]:last-child{margin-right:0}.ant-tag-checkable-checked[_ngcontent-%COMP%], .ant-tag[_ngcontent-%COMP%]:hover{background:#f2f2f2;border-radius:16px;color:#000000d9}.act-more[_ngcontent-%COMP%]{width:50px;height:20px;text-align:center;margin:0 auto;position:relative;z-index:999}.act-more.static[_ngcontent-%COMP%]{position:static}.act-more[_ngcontent-%COMP%]   .action-grid[_ngcontent-%COMP%]{width:120px;position:absolute;top:20px;left:-52px;z-index:1999;background:#fff;border:1px solid #e9e9e9;display:flex;flex-direction:column}.act-more[_ngcontent-%COMP%]   .action-grid[_ngcontent-%COMP%]   .act-item[_ngcontent-%COMP%]{display:block;width:120px;height:40px;line-height:40px;text-align:left;border-bottom:1px solid #e9e9e9;padding-left:14px;position:relative;z-index:2999}.act-more[_ngcontent-%COMP%]   .action-grid[_ngcontent-%COMP%]   .act-item[_ngcontent-%COMP%]:last-child{border-bottom:0}.act-more[_ngcontent-%COMP%]   .action-grid[_ngcontent-%COMP%]   .act-item[_ngcontent-%COMP%]:hover{color:#0d9ef0;font-weight:bold}.action-grid[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:hover   .action-icon[_ngcontent-%COMP%]:last-of-type{display:inline-block}.overtime[_ngcontent-%COMP%]{width:88px;height:20px;line-height:20px;text-align:center;background:#ea3e28;border-radius:2px;color:#fff;font-size:12px}.welcome[_ngcontent-%COMP%]{width:100%;background:#f2f2f2;position:absolute;top:0;left:0;z-index:3;height:30px;line-height:30px}.welcome[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:bold}"]}),e})();var gn=n(64762),fn=n(71049),wn=n(32126);let vn=(()=>{class e{constructor(e,t){this.dwHttp=e,this.selectModalService=t}setConfig(e,t,n){this.config={modalTitle:"1"===n?"\u9009\u62e9\u8bbe\u5907\u4fe1\u606f":"\u9009\u62e9\u4ea7\u7ebf/\u9879\u76ee",modalWidth:"70%",tableMultiSelect:!1,tableIdField:"product_file_id",tableNameField:"product_file_name",tablePageSize:10,tableColDefs:[{title:"\u7f16\u53f7",field:"product_file_code",width:"140px"},{title:"\u540d\u79f0",field:"product_file_name",width:"140px"},{title:"1"===n?"\u5e8f\u5217\u53f7":"\u9879\u76ee\u53f7",field:"sn",width:"220px"},{title:"\u89c4\u683c",field:"specification",width:"140px"},{title:"\u578b\u53f7",field:"model",width:"140px"}],tableCustomTag:e=>"("+e.product_file_code+")"+e.product_file_name,dataSource:new u.ApiServerPagingService(this.dwHttp,"restful/service/productFile/ProductFile/"+t,"product_file",["product_file_code","product_file_name","sn"]),initParams:this.getQueryCondition(e,n)}}open(e){return this.selectModalService.open(this.config,e).pipe((0,v.switchMap)(e=>e.length?this.dwHttp.get(`restful/service/productFile/ProductFile/ProductFileById?id=${e[0]}`):(0,fn.of)(null)))}getQueryCondition(e,t){const n=new g.DwQueryCondition;return n.addCondition(new g.DwQueryConditionInfo("customer_id",e,g.DwQueryConditionOperator.EQUAL)),n.addCondition(new g.DwQueryConditionInfo("file_type",t,g.DwQueryConditionOperator.EQUAL)),n}}return e.\u0275fac=function(t){return new(t||e)(a.\u0275\u0275inject(p.DwDapHttpClient),a.\u0275\u0275inject(u.DwSelectModalService))},e.\u0275prov=a.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e})();class xn extends u.DwClientPagingDataSource{constructor(e,t){super(),this.dwDapHttp=e,this.url=t}getDataList(e,t){return this.dwDapHttp.get(this.url).pipe((0,v.map)(n=>(this._result={currentPage:e,datas:Object.assign([],n),pageCount:Math.ceil(n.length/t),pageSize:t,rowCount:n.length},this._result)))}}let Cn=(()=>{class e{constructor(e,t){this.dwHttp=e,this.selectModalService=t,this.config={modalTitle:"\u9009\u62e9\u6545\u969c\u7c7b\u578b",modalWidth:"60%",tableMultiSelect:!1,tableIdField:"breakdown_id",tableNameField:"breakdown_name",tablePageSize:10,tableColDefs:[{title:"\u6545\u969c\u7c7b\u578b\u7f16\u53f7",field:"breakdown_code"},{title:"\u6545\u969c\u7c7b\u578b\u540d\u79f0",field:"breakdown_name"},{title:"\u4e0a\u7ea7\u6545\u969c\u7c7b\u578b\u7f16\u53f7",field:"parent_code"},{title:"\u4e0a\u7ea7\u6545\u969c\u7c7b\u578b\u540d\u79f0",field:"parent_name"}],tableCustomTag:e=>"("+e.breakdown_code+")"+e.breakdown_name,dataSource:new xn(this.dwHttp,"restful/service/breakdown/Breakdown/LastBreakdown")}}open(e){return this.selectModalService.open(this.config,e).pipe((0,v.switchMap)(e=>this.dwHttp.get(`restful/service/breakdown/Breakdown/BreakdownById?id=${e[0]}`)))}}return e.\u0275fac=function(t){return new(t||e)(a.\u0275\u0275inject(p.DwDapHttpClient),a.\u0275\u0275inject(u.DwSelectModalService))},e.\u0275prov=a.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e})(),_n=(()=>{class e{constructor(e,t){this.dwHttp=e,this.selectModalService=t}setConfig(){this.config={modalTitle:"\u9009\u62e9\u670d\u52a1\u7c7b\u578b",modalWidth:"50%",tableMultiSelect:!1,tableIdField:"service_type_id",tableNameField:"service_type_name",tablePageSize:10,tableColDefs:[{title:"\u670d\u52a1\u7c7b\u578b\u7f16\u53f7",field:"service_type_code"},{title:"\u670d\u52a1\u7c7b\u578b\u540d\u79f0",field:"service_type_name"}],returnFields:["service_type_id","service_type_name"],dataSource:new u.ApiServerPagingService(this.dwHttp,"restful/service/serviceType/ServiceType/List","service_type",["service_type_code","service_type_name"])}}open(e){return this.selectModalService.open(this.config,e)}}return e.\u0275fac=function(t){return new(t||e)(a.\u0275\u0275inject(p.DwDapHttpClient),a.\u0275\u0275inject(u.DwSelectModalService))},e.\u0275prov=a.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e})();var yn=n(31969),Sn=n(18843),bn=n(31371),In=n(39288),En=n(33795),Dn=n(96344),On=n(88531),Mn=n(35626),Pn=n(67733),kn=n(45907);const Fn=["selectOpener"],Vn=["child"],Tn=["exm"];function Ln(e,t){1&e&&(a.\u0275\u0275elementStart(0,"span",17),a.\u0275\u0275text(1,"\u65b0\u5efa\u670d\u52a1\u5de5\u5355"),a.\u0275\u0275elementEnd())}function Rn(e,t){1&e&&(a.\u0275\u0275elementStart(0,"span",17),a.\u0275\u0275text(1,"\u4fee\u6539\u670d\u52a1\u5de5\u5355"),a.\u0275\u0275elementEnd())}function An(e,t){if(1&e){const e=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"em",76),a.\u0275\u0275listener("click",function(){return a.\u0275\u0275restoreView(e),a.\u0275\u0275nextContext(3).clear("customer")}),a.\u0275\u0275elementEnd()}}function Nn(e,t){if(1&e){const e=a.\u0275\u0275getCurrentView();a.\u0275\u0275template(0,An,1,0,"em",73),a.\u0275\u0275elementStart(1,"button",74),a.\u0275\u0275listener("click",function(){return a.\u0275\u0275restoreView(e),a.\u0275\u0275nextContext(2).openCustomer()}),a.\u0275\u0275element(2,"em",75),a.\u0275\u0275elementEnd()}if(2&e){const e=a.\u0275\u0275nextContext(2);a.\u0275\u0275property("ngIf",e.service_order.controls[0].controls.customer_name.value&&!e.id),a.\u0275\u0275advance(1),a.\u0275\u0275property("disabled",!!e.id)}}function $n(e,t){1&e&&(a.\u0275\u0275elementStart(0,"span",77),a.\u0275\u0275text(1,"*\xa0"),a.\u0275\u0275elementEnd())}function jn(e,t){1&e&&(a.\u0275\u0275elementStart(0,"span",77),a.\u0275\u0275text(1,"*\xa0"),a.\u0275\u0275elementEnd())}function zn(e,t){1&e&&(a.\u0275\u0275elementStart(0,"span",77),a.\u0275\u0275text(1,"*\xa0"),a.\u0275\u0275elementEnd())}function Bn(e,t){1&e&&(a.\u0275\u0275elementStart(0,"dw-form-label",20),a.\u0275\u0275text(1,"\u8bbe\u5907\u7f16\u53f7"),a.\u0275\u0275elementEnd()),2&e&&a.\u0275\u0275property("dwSpan",4)}function qn(e,t){1&e&&(a.\u0275\u0275elementStart(0,"dw-form-label",20),a.\u0275\u0275text(1,"\u4ea7\u7ebf/\u9879\u76ee\u7f16\u53f7"),a.\u0275\u0275elementEnd()),2&e&&a.\u0275\u0275property("dwSpan",4)}function Wn(e,t){if(1&e){const e=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"em",76),a.\u0275\u0275listener("click",function(){return a.\u0275\u0275restoreView(e),a.\u0275\u0275nextContext(3).clear("product_file")}),a.\u0275\u0275elementEnd()}}function Gn(e,t){if(1&e){const e=a.\u0275\u0275getCurrentView();a.\u0275\u0275template(0,Wn,1,0,"em",73),a.\u0275\u0275elementStart(1,"button",74),a.\u0275\u0275listener("click",function(){return a.\u0275\u0275restoreView(e),a.\u0275\u0275nextContext(2).openProductFile()}),a.\u0275\u0275element(2,"em",75),a.\u0275\u0275elementEnd()}if(2&e){const e=a.\u0275\u0275nextContext(2);a.\u0275\u0275property("ngIf",e.service_order.controls[0].controls.product_file_code.value),a.\u0275\u0275advance(1),a.\u0275\u0275property("disabled",!e.service_order.controls[0].get("customer_name").value)}}function Un(e,t){1&e&&(a.\u0275\u0275elementStart(0,"dw-form-label",21),a.\u0275\u0275text(1,"\u8bbe\u5907\u540d\u79f0"),a.\u0275\u0275elementEnd()),2&e&&a.\u0275\u0275property("dwSpan",4)}function Hn(e,t){1&e&&(a.\u0275\u0275elementStart(0,"dw-form-label",21),a.\u0275\u0275text(1,"\u4ea7\u7ebf/\u9879\u76ee\u540d\u79f0"),a.\u0275\u0275elementEnd()),2&e&&a.\u0275\u0275property("dwSpan",4)}function Xn(e,t){1&e&&(a.\u0275\u0275elementStart(0,"dw-form-label",21),a.\u0275\u0275text(1,"\u8bbe\u5907\u89c4\u683c"),a.\u0275\u0275elementEnd()),2&e&&a.\u0275\u0275property("dwSpan",4)}function Qn(e,t){1&e&&(a.\u0275\u0275elementStart(0,"dw-form-label",21),a.\u0275\u0275text(1,"\u4ea7\u7ebf/\u9879\u76ee\u89c4\u683c"),a.\u0275\u0275elementEnd()),2&e&&a.\u0275\u0275property("dwSpan",4)}function Kn(e,t){1&e&&(a.\u0275\u0275elementStart(0,"dw-form-label",21),a.\u0275\u0275text(1,"\u8bbe\u5907\u578b\u53f7"),a.\u0275\u0275elementEnd()),2&e&&a.\u0275\u0275property("dwSpan",4)}function Jn(e,t){1&e&&(a.\u0275\u0275elementStart(0,"dw-form-label",21),a.\u0275\u0275text(1,"\u4ea7\u7ebf/\u9879\u76ee\u578b\u53f7"),a.\u0275\u0275elementEnd()),2&e&&a.\u0275\u0275property("dwSpan",4)}function Zn(e,t){1&e&&(a.\u0275\u0275elementStart(0,"dw-form-label",20),a.\u0275\u0275text(1,"\u5e8f\u5217\u53f7"),a.\u0275\u0275elementEnd()),2&e&&a.\u0275\u0275property("dwSpan",4)}function Yn(e,t){1&e&&(a.\u0275\u0275elementStart(0,"dw-form-label",20),a.\u0275\u0275text(1,"\u9879\u76ee\u53f7"),a.\u0275\u0275elementEnd()),2&e&&a.\u0275\u0275property("dwSpan",4)}function ei(e,t){if(1&e){const e=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"dw-form-item"),a.\u0275\u0275element(1,"dw-form-control",21),a.\u0275\u0275elementStart(2,"dw-form-control",21),a.\u0275\u0275elementStart(3,"button",7),a.\u0275\u0275listener("click",function(){return a.\u0275\u0275restoreView(e),a.\u0275\u0275nextContext(2).openEquipments()}),a.\u0275\u0275element(4,"em",60),a.\u0275\u0275elementStart(5,"span",6),a.\u0275\u0275text(6,"\u6dfb\u52a0\u62a5\u4fee\u8bbe\u5907"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(7,"app-opener-frontend",78,79),a.\u0275\u0275listener("selectedChanged",function(t){return a.\u0275\u0275restoreView(e),a.\u0275\u0275nextContext(2).openSelect(t)}),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd()}2&e&&(a.\u0275\u0275advance(1),a.\u0275\u0275property("dwSpan",4),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwSpan",10),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwType","default"))}function ti(e,t){if(1&e){const e=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"tr"),a.\u0275\u0275elementStart(1,"td"),a.\u0275\u0275text(2),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(3,"td"),a.\u0275\u0275text(4),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(5,"td"),a.\u0275\u0275text(6),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(7,"td"),a.\u0275\u0275text(8),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(9,"td"),a.\u0275\u0275text(10),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(11,"td",86),a.\u0275\u0275elementStart(12,"div",87),a.\u0275\u0275elementStart(13,"div",88),a.\u0275\u0275listener("click",function(){const t=a.\u0275\u0275restoreView(e).$implicit;return a.\u0275\u0275nextContext(3).deleteEquipment(t.index)}),a.\u0275\u0275element(14,"img",89),a.\u0275\u0275element(15,"img",90),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd()}if(2&e){const e=t.$implicit;a.\u0275\u0275advance(2),a.\u0275\u0275textInterpolate1(" ",e.code," "),a.\u0275\u0275advance(2),a.\u0275\u0275textInterpolate1(" ",e.name," "),a.\u0275\u0275advance(2),a.\u0275\u0275textInterpolate1(" ",e.sn," "),a.\u0275\u0275advance(2),a.\u0275\u0275textInterpolate1(" ",e.specification," "),a.\u0275\u0275advance(2),a.\u0275\u0275textInterpolate1(" ",e.model," ")}}function ni(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"dw-form-item"),a.\u0275\u0275element(1,"dw-form-control",21),a.\u0275\u0275elementStart(2,"dw-form-control",21),a.\u0275\u0275elementStart(3,"dw-table",80,81),a.\u0275\u0275elementStart(5,"thead"),a.\u0275\u0275elementStart(6,"tr",82),a.\u0275\u0275elementStart(7,"th",83),a.\u0275\u0275elementStart(8,"span",6),a.\u0275\u0275text(9,"\u8bbe\u5907\u7f16\u53f7"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(10,"th",83),a.\u0275\u0275elementStart(11,"span",6),a.\u0275\u0275text(12,"\u8bbe\u5907\u540d\u79f0"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(13,"th",83),a.\u0275\u0275elementStart(14,"span",6),a.\u0275\u0275text(15,"\u8bbe\u5907\u5e8f\u5217\u53f7"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(16,"th",83),a.\u0275\u0275elementStart(17,"span",6),a.\u0275\u0275text(18,"\u8bbe\u5907\u89c4\u683c"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(19,"th",83),a.\u0275\u0275elementStart(20,"span",6),a.\u0275\u0275text(21,"\u8bbe\u5907\u578b\u53f7"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(22,"th",84),a.\u0275\u0275elementStart(23,"span",6),a.\u0275\u0275text(24,"\u64cd\u4f5c"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(25,"tbody"),a.\u0275\u0275template(26,ti,16,5,"tr",85),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd()),2&e){const e=a.\u0275\u0275reference(4),t=a.\u0275\u0275nextContext(2);a.\u0275\u0275advance(1),a.\u0275\u0275property("dwSpan",4),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwSpan",15),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwData",t.equipments_for_show)("dwFrontPagination",!1)("dwShowPagination",!1),a.\u0275\u0275advance(23),a.\u0275\u0275property("ngForOf",e.data)}}function ii(e,t){if(1&e){const e=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"em",76),a.\u0275\u0275listener("click",function(){return a.\u0275\u0275restoreView(e),a.\u0275\u0275nextContext(3).clear("service_type")}),a.\u0275\u0275elementEnd()}}function ri(e,t){if(1&e){const e=a.\u0275\u0275getCurrentView();a.\u0275\u0275template(0,ii,1,0,"em",73),a.\u0275\u0275elementStart(1,"button",91),a.\u0275\u0275listener("click",function(){return a.\u0275\u0275restoreView(e),a.\u0275\u0275nextContext(2).openServiceType()}),a.\u0275\u0275element(2,"em",75),a.\u0275\u0275elementEnd()}if(2&e){const e=a.\u0275\u0275nextContext(2);a.\u0275\u0275property("ngIf",e.service_order.controls[0].controls.service_type_name.value)}}function ai(e,t){if(1&e){const e=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"em",76),a.\u0275\u0275listener("click",function(){return a.\u0275\u0275restoreView(e),a.\u0275\u0275nextContext(3).clear("breakdown")}),a.\u0275\u0275elementEnd()}}function oi(e,t){if(1&e){const e=a.\u0275\u0275getCurrentView();a.\u0275\u0275template(0,ai,1,0,"em",73),a.\u0275\u0275elementStart(1,"button",91),a.\u0275\u0275listener("click",function(){a.\u0275\u0275restoreView(e);const t=a.\u0275\u0275nextContext(2);return a.\u0275\u0275reference(16).initData(),t.isBreakdownVisible=!0}),a.\u0275\u0275element(2,"em",75),a.\u0275\u0275elementEnd()}if(2&e){const e=a.\u0275\u0275nextContext(2);a.\u0275\u0275property("ngIf",e.service_order.controls[0].controls.breakdown_name.value)}}function li(e,t){if(1&e){const e=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"div",92),a.\u0275\u0275listener("click",function(){return a.\u0275\u0275restoreView(e),a.\u0275\u0275nextContext(2).openPhrase()}),a.\u0275\u0275text(1,"+ \u5e38\u7528\u8bed"),a.\u0275\u0275elementEnd()}}function di(e,t){if(1&e){const e=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"div",93),a.\u0275\u0275text(1),a.\u0275\u0275elementStart(2,"img",94),a.\u0275\u0275listener("click",function(){return a.\u0275\u0275restoreView(e),a.\u0275\u0275nextContext(2).delPhrase()}),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd()}if(2&e){const e=a.\u0275\u0275nextContext(2);a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate1(" ",e.service_order.controls[0].controls.fault_phrase.value," ")}}function si(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"label",34),a.\u0275\u0275text(1),a.\u0275\u0275elementEnd()),2&e){const e=t.$implicit;a.\u0275\u0275property("dwValue",e.service_urgency_id),a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate(e.service_urgency_name)}}function ci(e,t){if(1&e&&a.\u0275\u0275element(0,"dw-option",95),2&e){const e=t.$implicit;a.\u0275\u0275property("dwLabel",e.label)("dwValue",e.value)}}function mi(e,t){1&e&&(a.\u0275\u0275elementStart(0,"dw-form-item"),a.\u0275\u0275element(1,"dw-form-label",21),a.\u0275\u0275elementStart(2,"dw-form-control",21),a.\u0275\u0275element(3,"input",96),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd()),2&e&&(a.\u0275\u0275advance(1),a.\u0275\u0275property("dwSpan",4),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwSpan",10))}const pi=function(){return{width:"100%"}};function ui(e,t){if(1&e&&a.\u0275\u0275element(0,"img",97),2&e){const e=a.\u0275\u0275nextContext(2);a.\u0275\u0275property("src",e.previewImage,a.\u0275\u0275sanitizeUrl)("ngStyle",a.\u0275\u0275pureFunction0(2,pi))}}function hi(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"div"),a.\u0275\u0275elementStart(1,"a"),a.\u0275\u0275text(2),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd()),2&e){const e=a.\u0275\u0275nextContext().$implicit;a.\u0275\u0275advance(2),a.\u0275\u0275textInterpolate(e.title)}}function gi(e,t){1&e&&(a.\u0275\u0275elementStart(0,"div",102),a.\u0275\u0275text(1),a.\u0275\u0275pipe(2,"translate"),a.\u0275\u0275elementEnd()),2&e&&(a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate(a.\u0275\u0275pipeBind1(2,1,"dw-demo-image-viewer-audit")))}function fi(e,t){if(1&e&&a.\u0275\u0275template(0,gi,3,3,"div",101),2&e){const e=a.\u0275\u0275nextContext().$implicit;a.\u0275\u0275property("ngIf",e.isAudit)}}function wi(e,t){if(1&e&&(a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275elementStart(1,"dw-image-viewer-list-item",98),a.\u0275\u0275template(2,hi,3,1,"ng-template",null,99,a.\u0275\u0275templateRefExtractor),a.\u0275\u0275template(4,fi,1,1,"ng-template",null,100,a.\u0275\u0275templateRefExtractor),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementContainerEnd()),2&e){const e=t.$implicit,n=a.\u0275\u0275reference(5),i=a.\u0275\u0275nextContext(2);a.\u0275\u0275advance(1),a.\u0275\u0275property("dwListType","picture-card")("dwFile",e)("dwItemAction",i.listActionMap2[e.uid])("dwDesignTpl",n)("onPreview",i.handlePreview2)("onRemove",i.handleRemove2)("onCheck",i.handleCheck)("onOtherAction",i.handleOtherAction)}}function vi(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"div",103),a.\u0275\u0275elementStart(1,"p",70),a.\u0275\u0275text(2,"\u9644\u52a0\u4fe1\u606f"),a.\u0275\u0275elementEnd(),a.\u0275\u0275element(3,"dw-extra-fields",104),a.\u0275\u0275elementEnd()),2&e){const e=a.\u0275\u0275nextContext(2);a.\u0275\u0275advance(3),a.\u0275\u0275property("group",e.service_order.controls[0])("dwDocument",e.doc)}}const xi=function(){return{minRows:8,maxRows:8}},Ci=function(){return{showPreviewIcon:!0,showRemoveIcon:!0}},_i=function(e){return{"my-list":e}},yi=function(){return{minRows:4,maxRows:4}};function Si(e,t){if(1&e){const e=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"form",18),a.\u0275\u0275elementStart(1,"p",19),a.\u0275\u0275text(2,"\u5ba2\u6237\u4fe1\u606f"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(3,"dw-form-item"),a.\u0275\u0275elementStart(4,"dw-form-label",20),a.\u0275\u0275text(5,"\u5ba2\u6237"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(6,"dw-form-control",21),a.\u0275\u0275elementStart(7,"dw-input-group",22),a.\u0275\u0275element(8,"input",23),a.\u0275\u0275elementEnd(),a.\u0275\u0275template(9,Nn,3,2,"ng-template",null,24,a.\u0275\u0275templateRefExtractor),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(11,"dw-form-item"),a.\u0275\u0275elementStart(12,"dw-form-label",21),a.\u0275\u0275template(13,$n,2,0,"span",25),a.\u0275\u0275text(14,"\u8054\u7cfb\u4eba"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(15,"dw-form-control",21),a.\u0275\u0275element(16,"input",26),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(17,"dw-form-item"),a.\u0275\u0275elementStart(18,"dw-form-label",21),a.\u0275\u0275template(19,jn,2,0,"span",25),a.\u0275\u0275text(20,"\u8054\u7cfb\u7535\u8bdd"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(21,"dw-form-control",27),a.\u0275\u0275elementStart(22,"input",28),a.\u0275\u0275listener("blur",function(){return a.\u0275\u0275restoreView(e),a.\u0275\u0275reference(24).validInput()}),a.\u0275\u0275elementEnd(),a.\u0275\u0275element(23,"app-valid-input",29,30),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(25,"dw-form-item"),a.\u0275\u0275elementStart(26,"dw-form-label",21),a.\u0275\u0275template(27,zn,2,0,"span",25),a.\u0275\u0275text(28,"\u5730\u5740"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(29,"dw-form-control",21),a.\u0275\u0275element(30,"input",31),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(31,"p",19),a.\u0275\u0275text(32,"\u8bbe\u5907\u4fe1\u606f"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(33,"dw-form-item"),a.\u0275\u0275elementStart(34,"dw-form-label",20),a.\u0275\u0275text(35,"\u7c7b\u578b"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(36,"dw-form-control",32),a.\u0275\u0275elementStart(37,"dw-radio-group",33),a.\u0275\u0275listener("ngModelChange",function(t){return a.\u0275\u0275restoreView(e),a.\u0275\u0275nextContext().typeRadioChange(t)}),a.\u0275\u0275elementStart(38,"label",34),a.\u0275\u0275text(39,"\u5355\u673a"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(40,"label",34),a.\u0275\u0275text(41,"\u4ea7\u7ebf/\u9879\u76ee"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(42,"dw-form-item"),a.\u0275\u0275template(43,Bn,2,1,"dw-form-label",35),a.\u0275\u0275template(44,qn,2,1,"dw-form-label",35),a.\u0275\u0275elementStart(45,"dw-form-control",32),a.\u0275\u0275elementStart(46,"dw-input-group",22),a.\u0275\u0275element(47,"input",36),a.\u0275\u0275elementEnd(),a.\u0275\u0275template(48,Gn,3,2,"ng-template",null,37,a.\u0275\u0275templateRefExtractor),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(50,"dw-form-item"),a.\u0275\u0275template(51,Un,2,1,"dw-form-label",38),a.\u0275\u0275template(52,Hn,2,1,"dw-form-label",38),a.\u0275\u0275elementStart(53,"dw-form-control",21),a.\u0275\u0275element(54,"input",39),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(55,"dw-form-item"),a.\u0275\u0275template(56,Xn,2,1,"dw-form-label",38),a.\u0275\u0275template(57,Qn,2,1,"dw-form-label",38),a.\u0275\u0275elementStart(58,"dw-form-control",21),a.\u0275\u0275element(59,"input",40),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(60,"dw-form-item"),a.\u0275\u0275template(61,Kn,2,1,"dw-form-label",38),a.\u0275\u0275template(62,Jn,2,1,"dw-form-label",38),a.\u0275\u0275elementStart(63,"dw-form-control",21),a.\u0275\u0275element(64,"input",41),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(65,"dw-form-item"),a.\u0275\u0275template(66,Zn,2,1,"dw-form-label",35),a.\u0275\u0275template(67,Yn,2,1,"dw-form-label",35),a.\u0275\u0275elementStart(68,"dw-form-control",21),a.\u0275\u0275elementStart(69,"input",42),a.\u0275\u0275listener("keydown",function(t){return a.\u0275\u0275restoreView(e),a.\u0275\u0275nextContext().chkSNchg("keydown",t)})("focus",function(t){return a.\u0275\u0275restoreView(e),a.\u0275\u0275nextContext().chkSNchg("focus",t)})("blur",function(t){return a.\u0275\u0275restoreView(e),a.\u0275\u0275nextContext().chkSNchg("focusout",t)}),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(70,"dw-form-item"),a.\u0275\u0275elementStart(71,"dw-form-label",21),a.\u0275\u0275text(72,"\u51fa\u5e93\u65e5\u671f"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(73,"dw-form-control",21),a.\u0275\u0275element(74,"input",43),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(75,"dw-form-item"),a.\u0275\u0275element(76,"dw-form-control",21),a.\u0275\u0275elementStart(77,"dw-form-control",21),a.\u0275\u0275elementStart(78,"label",44),a.\u0275\u0275text(79,"\u5728\u4fdd"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275template(80,ei,9,3,"dw-form-item",45),a.\u0275\u0275template(81,ni,27,6,"dw-form-item",45),a.\u0275\u0275elementStart(82,"p",19),a.\u0275\u0275text(83,"\u6545\u969c\u4fe1\u606f"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(84,"dw-form-item"),a.\u0275\u0275elementStart(85,"dw-form-label",20),a.\u0275\u0275text(86,"\u670d\u52a1\u7c7b\u578b"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(87,"dw-form-control",21),a.\u0275\u0275elementStart(88,"dw-input-group",22),a.\u0275\u0275element(89,"input",46),a.\u0275\u0275elementEnd(),a.\u0275\u0275template(90,ri,3,1,"ng-template",null,47,a.\u0275\u0275templateRefExtractor),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(92,"dw-form-item"),a.\u0275\u0275elementStart(93,"dw-form-label",20),a.\u0275\u0275text(94,"\u6545\u969c\u7c7b\u578b"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(95,"dw-form-control",21),a.\u0275\u0275elementStart(96,"dw-input-group",22),a.\u0275\u0275element(97,"input",48),a.\u0275\u0275elementEnd(),a.\u0275\u0275template(98,oi,3,1,"ng-template",null,49,a.\u0275\u0275templateRefExtractor),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(100,"dw-form-item"),a.\u0275\u0275elementStart(101,"dw-form-label",20),a.\u0275\u0275text(102,"\u95ee\u9898\u63cf\u8ff0"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(103,"dw-form-control",21),a.\u0275\u0275template(104,li,2,0,"div",50),a.\u0275\u0275template(105,di,3,1,"div",51),a.\u0275\u0275element(106,"textarea",52),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(107,"dw-form-item"),a.\u0275\u0275elementStart(108,"dw-form-label",21),a.\u0275\u0275text(109,"\u7d27\u6025\u7a0b\u5ea6"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(110,"dw-form-control",21),a.\u0275\u0275elementStart(111,"dw-radio-group",53),a.\u0275\u0275listener("ngModelChange",function(){return a.\u0275\u0275restoreView(e),a.\u0275\u0275nextContext().radioChange()}),a.\u0275\u0275template(112,si,2,2,"label",54),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(113,"dw-form-item"),a.\u0275\u0275elementStart(114,"dw-form-label",20),a.\u0275\u0275text(115,"\u9884\u7ea6\u65e5\u671f"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(116,"dw-form-control",21),a.\u0275\u0275element(117,"dw-date-picker",55),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(118,"dw-form-item"),a.\u0275\u0275elementStart(119,"dw-form-label",20),a.\u0275\u0275text(120,"\u6e20\u9053"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(121,"dw-form-control",21),a.\u0275\u0275elementStart(122,"dw-select",56),a.\u0275\u0275listener("ngModelChange",function(t){return a.\u0275\u0275restoreView(e),a.\u0275\u0275nextContext().onOpenRange(t)}),a.\u0275\u0275template(123,ci,1,2,"dw-option",57),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275template(124,mi,4,2,"dw-form-item",45),a.\u0275\u0275elementStart(125,"dw-form-item"),a.\u0275\u0275elementStart(126,"dw-form-label",21),a.\u0275\u0275text(127,"\u6545\u969c\u56fe\u7247"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(128,"dw-form-control",21),a.\u0275\u0275elementStart(129,"div",58),a.\u0275\u0275elementStart(130,"dw-upload",59),a.\u0275\u0275listener("dwFileListChange",function(t){return a.\u0275\u0275restoreView(e),a.\u0275\u0275nextContext().fileList=t})("dwChange",function(){return a.\u0275\u0275restoreView(e),a.\u0275\u0275nextContext().onUploadChange()}),a.\u0275\u0275element(131,"em",60),a.\u0275\u0275elementStart(132,"div",61),a.\u0275\u0275text(133,"\u4e0a\u4f20\u56fe\u7247"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(134,"dw-modal",62),a.\u0275\u0275listener("dwOnCancel",function(){return a.\u0275\u0275restoreView(e),a.\u0275\u0275nextContext().previewVisible=!1}),a.\u0275\u0275template(135,ui,1,3,"ng-template",null,63,a.\u0275\u0275templateRefExtractor),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(137,"dw-form-item"),a.\u0275\u0275elementStart(138,"dw-form-label",21),a.\u0275\u0275text(139,"\u6545\u969c\u89c6\u9891"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(140,"dw-form-control",21),a.\u0275\u0275elementStart(141,"div",64),a.\u0275\u0275elementStart(142,"div",65),a.\u0275\u0275template(143,wi,6,8,"ng-container",66),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(144,"dw-upload",67),a.\u0275\u0275listener("dwFileListChange",function(t){return a.\u0275\u0275restoreView(e),a.\u0275\u0275nextContext().thumbnailList2=t})("dwChange",function(t){return a.\u0275\u0275restoreView(e),a.\u0275\u0275nextContext().uploadChange(t)}),a.\u0275\u0275elementStart(145,"button",68),a.\u0275\u0275element(146,"em",69),a.\u0275\u0275elementStart(147,"span"),a.\u0275\u0275text(148,"\u4e0a\u4f20\u89c6\u9891"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(149,"p",70),a.\u0275\u0275text(150,"\u5907\u6ce8"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(151,"dw-form-item"),a.\u0275\u0275element(152,"dw-form-label",21),a.\u0275\u0275elementStart(153,"dw-form-control",21),a.\u0275\u0275element(154,"textarea",71),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275template(155,vi,4,2,"div",72),a.\u0275\u0275elementEnd()}if(2&e){const e=a.\u0275\u0275reference(10),t=a.\u0275\u0275reference(24),n=a.\u0275\u0275reference(49),i=a.\u0275\u0275reference(91),r=a.\u0275\u0275reference(99),o=a.\u0275\u0275reference(136),l=a.\u0275\u0275nextContext();a.\u0275\u0275property("formGroup",l.service_order.controls[0]),a.\u0275\u0275advance(4),a.\u0275\u0275property("dwSpan",4),a.\u0275\u0275advance(2),a.\u0275\u0275property("dwSpan",10),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwSuffix",e),a.\u0275\u0275advance(5),a.\u0275\u0275property("dwSpan",4),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",!l.isServiceMan),a.\u0275\u0275advance(2),a.\u0275\u0275property("dwSpan",10),a.\u0275\u0275advance(3),a.\u0275\u0275property("dwSpan",4),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",!l.isServiceMan),a.\u0275\u0275advance(2),a.\u0275\u0275property("dwSpan",10)("dwValidateStatus",t.warnType),a.\u0275\u0275advance(1),a.\u0275\u0275property("required",!l.isServiceMan),a.\u0275\u0275advance(1),a.\u0275\u0275property("value",l.service_order.controls[0].value.contact_phone)("type","mobileOrTele"),a.\u0275\u0275advance(3),a.\u0275\u0275property("dwSpan",4),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",!l.isServiceMan),a.\u0275\u0275advance(2),a.\u0275\u0275property("dwSpan",10),a.\u0275\u0275advance(5),a.\u0275\u0275property("dwSpan",4),a.\u0275\u0275advance(2),a.\u0275\u0275property("dwSpan",10),a.\u0275\u0275advance(2),a.\u0275\u0275property("dwValue","1"),a.\u0275\u0275advance(2),a.\u0275\u0275property("dwValue","2"),a.\u0275\u0275advance(3),a.\u0275\u0275property("ngIf","1"===l.service_order.controls[0].value.type),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf","2"===l.service_order.controls[0].value.type),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwSpan",10),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwSuffix",n),a.\u0275\u0275advance(5),a.\u0275\u0275property("ngIf","1"===l.service_order.controls[0].value.type),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf","2"===l.service_order.controls[0].value.type),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwSpan",10),a.\u0275\u0275advance(3),a.\u0275\u0275property("ngIf","1"===l.service_order.controls[0].value.type),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf","2"===l.service_order.controls[0].value.type),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwSpan",10),a.\u0275\u0275advance(3),a.\u0275\u0275property("ngIf","1"===l.service_order.controls[0].value.type),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf","2"===l.service_order.controls[0].value.type),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwSpan",10),a.\u0275\u0275advance(3),a.\u0275\u0275property("ngIf","1"===l.service_order.controls[0].value.type),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf","2"===l.service_order.controls[0].value.type),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwSpan",10),a.\u0275\u0275advance(3),a.\u0275\u0275property("dwSpan",4),a.\u0275\u0275advance(2),a.\u0275\u0275property("dwSpan",10),a.\u0275\u0275advance(3),a.\u0275\u0275property("dwSpan",4),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwSpan",10),a.\u0275\u0275advance(3),a.\u0275\u0275property("ngIf","2"===l.service_order.controls[0].value.type),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf","2"===l.service_order.controls[0].value.type),a.\u0275\u0275advance(4),a.\u0275\u0275property("dwSpan",4),a.\u0275\u0275advance(2),a.\u0275\u0275property("dwSpan",10),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwSuffix",i),a.\u0275\u0275advance(5),a.\u0275\u0275property("dwSpan",4),a.\u0275\u0275advance(2),a.\u0275\u0275property("dwSpan",10),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwSuffix",r),a.\u0275\u0275advance(5),a.\u0275\u0275property("dwSpan",4),a.\u0275\u0275advance(2),a.\u0275\u0275property("dwSpan",10),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",!l.service_order.controls[0].controls.fault_phrase.value),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",l.service_order.controls[0].controls.fault_phrase.value),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwAutosize",a.\u0275\u0275pureFunction0(92,xi)),a.\u0275\u0275advance(2),a.\u0275\u0275property("dwSpan",4),a.\u0275\u0275advance(2),a.\u0275\u0275property("dwSpan",10),a.\u0275\u0275advance(2),a.\u0275\u0275property("ngForOf",l.urgencyList),a.\u0275\u0275advance(2),a.\u0275\u0275property("dwSpan",4),a.\u0275\u0275advance(2),a.\u0275\u0275property("dwSpan",10),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwFormat",l.yyyy-l.MM-l.dd)("dwDisabledDate",l.disabledAppointmentDate),a.\u0275\u0275advance(2),a.\u0275\u0275property("dwSpan",4),a.\u0275\u0275advance(2),a.\u0275\u0275property("dwSpan",10),a.\u0275\u0275advance(2),a.\u0275\u0275property("ngForOf",l.channelList),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf","5"===l.service_order.controls[0].controls.channel.value),a.\u0275\u0275advance(2),a.\u0275\u0275property("dwSpan",4),a.\u0275\u0275advance(2),a.\u0275\u0275property("dwSpan",10),a.\u0275\u0275advance(2),a.\u0275\u0275property("dwFileList",l.fileList)("dwShowButton",l.fileList.length<5)("dwPreview",l.handlePreview)("dwBeforeUpload",l.beforeUpload)("dwShowUploadList",a.\u0275\u0275pureFunction0(93,Ci))("dwAccept",".png,.jpg"),a.\u0275\u0275advance(4),a.\u0275\u0275property("dwVisible",l.previewVisible)("dwContent",o)("dwFooter",null),a.\u0275\u0275advance(4),a.\u0275\u0275property("dwSpan",4),a.\u0275\u0275advance(2),a.\u0275\u0275property("dwSpan",10),a.\u0275\u0275advance(2),a.\u0275\u0275property("ngClass",a.\u0275\u0275pureFunction1(94,_i,l.isDemoStyle)),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngForOf",l.thumbnailList2)("ngForTrackBy",l.trackByUid),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwCustomRequest",l.customReq)("dwFileList",l.thumbnailList2)("dwShowUploadList",!1)("dwMultiple",!0)("dwDisabled",l.isCheckShow2||l.fileUploadingCount>0)("dwAccept",".mp4"),a.\u0275\u0275advance(1),a.\u0275\u0275property("disabled",l.isCheckShow2||l.fileUploadingCount>0||3==l.thumbnailList2.length),a.\u0275\u0275advance(7),a.\u0275\u0275property("dwSpan",4),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwSpan",10),a.\u0275\u0275advance(1),a.\u0275\u0275property("dwAutosize",a.\u0275\u0275pureFunction0(96,yi)),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",l.serviceOrderHasCustomizeField)}}function bi(e,t){if(1&e){const e=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"div"),a.\u0275\u0275elementStart(1,"a",106),a.\u0275\u0275listener("click",function(){const t=a.\u0275\u0275restoreView(e).$implicit;return a.\u0275\u0275nextContext(2).seeDetail(t)}),a.\u0275\u0275text(2),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd()}if(2&e){const e=t.$implicit;a.\u0275\u0275advance(2),a.\u0275\u0275textInterpolate(e.doc_no)}}function Ii(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"div",105),a.\u0275\u0275elementStart(1,"div"),a.\u0275\u0275text(2,"\u8be5\u62a5\u4fee\u4ea7\u54c1\u4ecd\u6709\u5de5\u5355\u5904\u4e8e\u672a\u5b8c\u5de5\u72b6\u6001\uff0c\u5de5\u5355\u5355\u53f7\uff1a"),a.\u0275\u0275elementEnd(),a.\u0275\u0275template(3,bi,3,1,"div",85),a.\u0275\u0275elementStart(4,"div"),a.\u0275\u0275text(5,"\u786e\u5b9a\u8981\u518d\u6b21\u62a5\u4fee\u5417\uff1f"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd()),2&e){const e=a.\u0275\u0275nextContext();a.\u0275\u0275advance(3),a.\u0275\u0275property("ngForOf",e.exmMsg)}}function Ei(e,t){1&e&&a.\u0275\u0275element(0,"app-service-order-detail",null,107)}const Di=function(){return{height:"calc(100vh - 48px)",overflow:"auto",padding:"0 24px"}};let Oi=(()=>{class e{constructor(e,t,n,i,r,a,o,l,d,s,c,m,p,u,h,g,f,w,v,x,C){this.http=e,this.productFileSrv=t,this.fb=n,this.dwRoutingMessageSrv=i,this.dwModalService=r,this.serviceOrderSrv=a,this.doc=o,this.message=l,this.translateService=d,this.datePipe=s,this.customerOpenerService=c,this.productFileOpenerService=m,this.serviceTypeOpenerService=p,this.breakDownOpenerService=u,this.phraseOpenerService=h,this.analytics=g,this.userService=f,this.dwUploadFileMangementService=w,this.dwImageViewerListService=v,this.router=x,this.route=C,this.search={pageIndex:1,pageSize:10,pageSizeOptions:[10,20,30]},this.channelList=[{label:"\u5c0f\u7a0b\u5e8f",value:"1"},{label:"\u7535\u8bdd",value:"2"},{label:"QQ",value:"3"},{label:"\u90ae\u4ef6",value:"4"},{label:"\u5176\u4ed6",value:"5"}],this.urgencyList=[],this.service_order_equipment=[],this.equipments_for_show=[],this.id="",this.userInfo={tenantId:"",userId:""},this.isBreakdownVisible=!1,this.isCustomerVisible=!1,this.funcString="",this.isServiceMan=!1,this.isCollapsed=!1,this.serviceOrderHasCustomizeField=!1,this.disabledAppointmentDate=e=>!!e&&this.changeZero(e)<this.changeZero(new Date),this.beforeUpload=(e,t)=>new fn.Observable(t=>{const n="image/jpeg"===e.type||"image/png"===e.type;if(!n)return this.message.create("error","\u8bf7\u4e0a\u4f20jpg\u6216png\u683c\u5f0f\u56fe\u7247\uff01"),void t.complete();const i=e.size/1024/1024<=5;if(!i)return this.message.create("error","\u4e0a\u4f20\u6587\u4ef6\u5927\u5c0f\u8d85\u8fc75M\uff01"),void t.complete();t.next(n&&i),t.complete()}),this.picture_id="",this.fileList=[],this.parafileList=[],this.previewImage="",this.previewVisible=!1,this.handlePreview=e=>(0,gn.mG)(this,void 0,void 0,function*(){!e.url&&!e.preview&&(e.preview=yield this.getBase64(e.originFileObj)),console.log("handlePreview",e),this.previewImage=e.url||e.preview,this.previewVisible=!0}),this.thumbnailList2=[],this.deleteVideoIds=[],this.listActionMap2={},this.isCheckShow2=!1,this.isDemoStyle=!1,this.customReq=e=>{const t=e.file;if(!("video/mp4"!==t.type&&"video/avi"!==t.type&&"video/rmvb"!==t.type&&"video/3gp"!==t.type&&"video/flv"!==t.type||t.size/1024/1024>10))return this.serviceOrderSrv.uploadFile(t,!0,null,"",{shrink:"100000",width:"200"}).subscribe(t=>{"success"===t.status?(t.primaryKey="id-"+Math.random().toString(36).substring(2),e.onSuccess(t,e.file,null)):"error"===t.status?e.onError(t,e.file):e.onProgress(t,e.file)},t=>{e.onError(t,e.file)})},this.handlePreview2=e=>this.dwImageViewerListService.previewModal(e,this.thumbnailList2,this.viewerAction2,this.handlePrevious2,this.handleNext2),this.handlePrevious2=e=>this.dwImageViewerListService.previous(this.thumbnailList2,e,this.viewerAction2),this.handleNext2=e=>this.dwImageViewerListService.next(this.thumbnailList2,e,this.viewerAction2),this.handleRemove2=e=>fn.Observable.create(t=>{"uploading"===e.status?(this.dwUploadFileMangementService.cancelUploading(e.uid),this.listRemove2(e.uid),t.next("ok"),t.complete()):"error"===e.status?(this.listRemove2(e.uid),t.next("ok"),t.complete()):(this.deleteVideoIds.push(e.dmcFileId),this.listRemove2(e.uid),t.next("ok"),t.complete())}),this.handleCheck=e=>fn.Observable.create(t=>{const n=this.thumbnailList2.length;for(let i=0;i<n;i++)this.thumbnailList2[i].uid===e.uid&&(this.thumbnailList2[i].check=!this.thumbnailList2[i].check);t.next("ok"),t.complete()}),this.handleOtherAction=(e,t)=>fn.Observable.create(n=>{switch(t){case"my-action-0":this.message.create("success","uid:"+e.uid+"<br>"+e.name),n.next("ok"),n.complete();break;default:this.message.create("success","uid:"+e.uid+"<br>actionId:"+t),n.next("ok"),n.complete()}}),this.doc.registerEvent(this),this.route.paramMap.subscribe(e=>{this.id=e.get("id")||""})}ngOnInit(){this.userInfo=this.userService.getUserInfo();const e=new Date,t=e.getDate(),n=new Date(e.getFullYear(),e.getMonth(),t);""===this.id?(this.service_order=new g.DwDataTable([{doc_date:new Date,receive_time:"",customer_id:"",customer_name:"",contact:"",contact_phone:"",address:"",product_file_id:"",product_file_code:"",product_file_name:"",specification:"",model:"",type:"1",sn:"",delivery_date:"",is_under_warranty:!1,quantity:0,service_type_id:"",service_type_name:"",breakdown_id:"",breakdown_name:"",description:"",service_urgency_id:this.defaultUrgencyId,task_time:this.defaultTaskTime,channel:"2",channel_explanation:"",appointment_date:n,remark:"",fault_phrase:""}]),this.loadServiceUrgency(),this.service_order.controls[0].get("contact_phone").setValidators([l.Validators.pattern(X.K.MOBILE_TEL)]),this.changeDescriptionRequired(),this.getServiceManControl()):this.service_order=new g.DwDataTable([]),this.id?this.doc.read({id:this.id}).subscribe(e=>{this.service_order=e.service_order,this.service_order_equipment=e.service_order_equipment.value,this.service_order_equipment.forEach(e=>{e.$state="U"}),this.getEquipmentsForShow();const t=this.datePipe.transform(this.service_order.controls[0].value.delivery_date,"yyyy-MM-dd");this.service_order.controls[0].get("delivery_date").setValue(t),this.loadServiceUrgency(),this.picture_id=this.service_order.controls[0].value.pictures,this.initVideoData(e.videos),this.picture_id?this.serviceOrderSrv.getFileById(this.picture_id).subscribe(e=>{this.fileList=[];for(const t of e)this.fileList.push({uid:t.id,name:t.name,status:"done",url:t.value})}):(this.fileList=[],this.previewImage=""),this.service_order.controls[0].get("contact_phone").setValidators([l.Validators.pattern(X.K.MOBILE_TEL)]),this.changeDescriptionRequired(),this.getServiceManControl()}):this.doc.setControl("service_order",this.service_order),this.productFileSrv.getProductFileHasCustomizeField("service_order").subscribe(e=>{this.serviceOrderHasCustomizeField="true"===e.data})}getServiceManControl(){this.serviceOrderSrv.getCurrentEmployee().subscribe(e=>{this.funcString=e.value.function,this.funcString&&this.funcString.length>=2&&(this.isServiceMan="1"===this.funcString.substring(1,2),this.isServiceMan?(this.service_order.controls[0].get("contact").setErrors(null),this.service_order.controls[0].get("contact").clearValidators(),this.service_order.controls[0].get("contact_phone").setErrors(null),this.service_order.controls[0].get("address").setErrors(null),this.service_order.controls[0].get("address").clearValidators()):(this.service_order.controls[0].get("contact").setValidators(l.Validators.required),this.service_order.controls[0].get("address").setValidators(l.Validators.required)),this.service_order.controls[0].get("contact").updateValueAndValidity(),this.service_order.controls[0].get("contact_phone").updateValueAndValidity(),this.service_order.controls[0].get("address").updateValueAndValidity())})}changeDescriptionRequired(){this.service_order.controls[0].get("fault_phrase").value?(this.service_order.controls[0].get("description").setErrors(null),this.service_order.controls[0].get("description").clearValidators()):this.service_order.controls[0].get("description").setValidators(l.Validators.required),this.service_order.controls[0].get("description").updateValueAndValidity()}changeZero(e){return new Date(e).setHours(0,0,0,0)}loadServiceUrgency(){return(0,gn.mG)(this,void 0,void 0,function*(){yield this.serviceOrderSrv.getServiceUrgencyList("").subscribe(e=>{this.urgencyList=e,this.id||this.urgencyList.length>0&&(this.service_order.controls[0].get("service_urgency_id").setValue(this.urgencyList[0].service_urgency_id),this.service_order.controls[0].get("task_time").setValue(this.urgencyList[0].process_hours),this.urgencyList.forEach(e=>{if(!0===e.is_default)return this.service_order.controls[0].get("service_urgency_id").setValue(e.service_urgency_id),void this.service_order.controls[0].get("task_time").setValue(e.process_hours)}))})})}typeRadioChange(e){this.clear("product_file")}radioChange(){this.urgencyList.forEach(e=>{e.service_urgency_id!==this.service_order.controls[0].value.service_urgency_id||this.service_order.controls[0].get("task_time").setValue(e.process_hours)})}openEquipments(){this.service_order.controls[0].value.product_file_id?this.selectOpener.initData(this.getConfigValue()):this.message.create("error","\u8bf7\u5148\u9009\u62e9\u4ea7\u7ebf/\u9879\u76ee\uff01")}getConfigValue(){return{modalTitle:"\u9009\u62e9\u8bbe\u5907",modalWidth:"50%",multiSelect:!0,tableIdField:"product_equipment_list_id",tableNameField:"name",returnFields:["product_equipment_list_id","code","name","model","sn","specification"],tablePageSize:10,tableColDefs:[{title:"\u8bbe\u5907\u7f16\u53f7",field:"code"},{title:"\u8bbe\u5907\u540d\u79f0",field:"name"},{title:"\u8bbe\u5907\u578b\u53f7",field:"model"},{title:"\u5e8f\u5217\u53f7",field:"sn"},{title:"\u89c4\u683c",field:"specification"}],tableCustomTag:e=>"("+e.code+")"+e.name,dataSourceUrl:`restful/service/productFile/ProductFile/ProductEquipmentList?productFileId=${this.service_order.controls[0].value.product_file_id}`,dwHttp:this.http}}openSelect(e){e.forEach(e=>{this.equipments_for_show.filter(t=>e.product_equipment_list_id===t.product_equipment_list_id).length||this.service_order_equipment.push(Object.assign({$state:"C"},e))}),this.getEquipmentsForShow()}deleteEquipment(e){"C"===this.service_order_equipment[e].$state?this.service_order_equipment.splice(e,1):this.service_order_equipment[e].$state="D",this.getEquipmentsForShow()}getEquipmentsForShow(){const e=[];this.service_order_equipment.forEach((t,n)=>{"D"!==t.$state&&e.push(Object.assign({index:n},t))}),this.equipments_for_show=e}returnServiceOrderList(){this.router.navigate(""===this.id?["../"]:["../../"],{relativeTo:this.route})}cancel(){this.returnServiceOrderList()}onUploadChange(){this.fileList.forEach(e=>{e.status="done"}),console.log("\u4e0a\u4f20\u4ee5\u540e",this.fileList)}onOpenRange(e){console.log(e,this.service_order)}save(e){return(0,gn.mG)(this,void 0,void 0,function*(){const e=this.service_order.controls[0];this.serviceOrderSrv.getInfoBySN(e.get("sn").value,this.id?e.get("service_order_id").value:"").subscribe(e=>{const t=e.data.product_file;!t||(e.data.service_order&&e.data.service_order.length?(this.exmMsg=e.data.service_order,this.dwModalService.confirm({dwTitle:"",dwContent:this.exm,dwWidth:"420px",dwOkText:"\u786e\u5b9a",dwOnOk:()=>{this.setInfoBySNOnSave(t)}})):this.setInfoBySNOnSave(t))},e=>{e.hasOwnProperty("error")&&e.error.hasOwnProperty("errorMessage")&&e.error.errorMessage&&this.message.error(e.error.errorMessage)})})}setInfoBySNOnSave(e){if(this.service_order.controls[0].get("customer_id").value){if(this.service_order.controls[0].get("customer_id").value!==e.customer_id)return void this.message.create("error",`\u8be5${"1"===this.service_order.controls[0].value.type?"\u5e8f\u5217\u53f7\u8bbe\u5907":"\u9879\u76ee\u53f7\u4ea7\u7ebf/\u9879\u76ee"}\u4e0d\u5c5e\u4e8e${this.service_order.controls[0].get("customer_name").value},\u8bf7\u786e\u8ba4\uff01`);this.setFormInfo(e,"product_file")}else this.setFormInfo(e,"customer");this.fileList.length&&this.fileList.forEach(e=>(0,gn.mG)(this,void 0,void 0,function*(){e.url=yield e.thumbUrl})),this.parafileList=[],this.fileList.forEach(e=>(0,gn.mG)(this,void 0,void 0,function*(){if(console.log(this.fileList),e.thumbUrl){const t=yield this.getBase64(e.originFileObj);yield this.parafileList.push({pictureId:e.uid,fileContext:t,fileName:e.name,state:"new"}),console.log("this.parafileList",this.parafileList)}else yield this.parafileList.push({pictureId:e.uid,fileContext:e.url,fileName:e.name,state:"old"})})),this.id?setTimeout(()=>{console.log("this.parafileList Save",this.parafileList),this.modify()},500):setTimeout(()=>{console.log("this.parafileList Save",this.parafileList),this.create()},500)}seeDetail(e){this.isCollapsed=!0,setTimeout(()=>{this.child.init(e.service_order_id)})}create(){const e=sessionStorage.getItem("salesman_id")?sessionStorage.getItem("salesman_id"):JSON.parse(sessionStorage.getItem("employeeInfo")).is_salesman?JSON.parse(sessionStorage.getItem("employeeInfo")).employee_id:"",t=[];this.service_order_equipment.forEach(e=>{t.push({equipment_id:e.product_equipment_list_id,equipment_sn:e.sn})});const n=Object.assign(Object.assign({},this.service_order.controls[0].value),{fileList:this.parafileList,fault_video:this.videos,receive_employee_id:e,service_order_equipment:t,channel_explanation:"5"===this.service_order.controls[0].value.channel?this.service_order.controls[0].value.channel_explanation:""});console.log("create param",n),this.serviceOrderSrv.createServiceOrder(n).subscribe(e=>{e.success?(this.dwRoutingMessageSrv.success(e.message),this.router.navigate(["../../"],{relativeTo:this.route}),this.deleteVideoIds.forEach(e=>{this.serviceOrderSrv.deleteFile(e).subscribe(e=>{})})):this.dwRoutingMessageSrv.error("\u65b0\u5efa\u5931\u8d25\uff01")},e=>{e.hasOwnProperty("error")&&e.error.hasOwnProperty("errorMessage")&&e.error.errorMessage&&this.message.error(e.error.errorMessage)})}modify(){const e=[];this.service_order_equipment.forEach(t=>{const n={service_order_id:this.service_order.controls[0].value.service_order_id,product_file_id:this.service_order.controls[0].value.product_file_id,product_file_sn:this.service_order.controls[0].value.sn,equipment_id:t.product_equipment_list_id,equipment_sn:t.sn};Object.assign(n,t),e.push(n)});const t=Object.assign(Object.assign({},this.service_order.controls[0].value),{fileList:this.parafileList,fault_video:this.videos,service_order_equipment:e,channel_explanation:"5"===this.service_order.controls[0].value.channel?this.service_order.controls[0].value.channel_explanation:""});this.serviceOrderSrv.modifyServiceOrder(t,this.id).subscribe(e=>{e.success?(this.dwRoutingMessageSrv.success("\u4fee\u6539\u6210\u529f\uff01"),this.returnServiceOrderList(),this.deleteVideoIds.forEach(e=>{this.serviceOrderSrv.deleteFile(e).subscribe(e=>{})})):e.message?(this.dwRoutingMessageSrv.error(e.message),this.returnServiceOrderList()):this.dwRoutingMessageSrv.error("\u4fee\u6539\u5931\u8d25\uff01")},e=>{e.hasOwnProperty("error")&&e.error.hasOwnProperty("errorMessage")&&e.error.errorMessage&&this.message.error(e.error.errorMessage)})}saving(){return console.log(this.service_order.controls[0]),!0}saved(e){const t=e.message;e.success?(this.dwRoutingMessageSrv.success(t||"\u64cd\u4f5c\u6210\u529f\uff01"),this.returnServiceOrderList()):t&&this.dwRoutingMessageSrv.error(t)}openCustomer(){JSON.parse(sessionStorage.getItem("employeeInfo")).is_salesman?this.isCustomerVisible=!0:this.customerOpenerService.open([]).subscribe(e=>{null!=e&&0!==e.length&&this.setCustomerInfo(e[0])})}customerChangeVisible(e){e&&e.length&&this.setCustomerInfo(e[0]),this.isCustomerVisible=!1}setCustomerInfo(e){this.service_order.controls[0].get("customer_id").setValue(e.customer_id),this.service_order.controls[0].get("customer_name").setValue(e.customer_name),this.service_order.controls[0].get("contact").setValue(e.contact),this.service_order.controls[0].get("contact_phone").setValue(e.contact_number),this.service_order.controls[0].get("address").setValue(e.address),this.clear("product_file")}openProductFile(){const e=this.service_order.controls[0].value;JSON.parse(sessionStorage.getItem("employeeInfo")).is_salesman?this.productFileOpenerService.setConfig(e.customer_id,"CommonAccountProductList",e.type):this.productFileOpenerService.setConfig(e.customer_id,"List",e.type),this.productFileOpenerService.open([]).subscribe(e=>{if(null==e||0===e.length)return;const t=e.data.product_file[0];this.service_order.controls[0].get("product_file_id").setValue(t.product_file_id),this.service_order.controls[0].get("product_file_code").setValue(t.product_file_code),this.service_order.controls[0].get("product_file_name").setValue(t.product_file_name),this.service_order.controls[0].get("specification").setValue(t.specification),this.service_order.controls[0].get("model").setValue(t.model),this.service_order.controls[0].get("sn").setValue(t.sn);const n=this.datePipe.transform(t.delivery_date,"yyyy-MM-dd");this.service_order.controls[0].get("delivery_date").setValue(n);const i=this.datePipe.transform(t.expiry_date,"yyyy-MM-dd"),r=this.datePipe.transform(new Date,"yyyy-MM-dd");this.service_order.controls[0].get("is_under_warranty").setValue(i>=r)})}openServiceType(){this.serviceTypeOpenerService.setConfig(),this.serviceTypeOpenerService.open([]).subscribe(e=>{if(!e.length)return;const t=e[0];this.service_order.controls[0].get("service_type_id").setValue(t.service_type_id),this.service_order.controls[0].get("service_type_name").setValue(t.service_type_name)})}openBreakdown(){this.breakDownOpenerService.open([]).subscribe(e=>{const t=e.data.breakdown[0];this.service_order.controls[0].get("breakdown_id").setValue(t.breakdown_id),this.service_order.controls[0].get("breakdown_name").setValue(t.breakdown_name)})}openPhrase(){this.phraseOpenerService.open([]).subscribe(e=>{this.service_order.controls[0].get("fault_phrase").setValue(e.data.common_phrase[0].phrase),this.changeDescriptionRequired()})}delPhrase(){this.service_order.controls[0].get("fault_phrase").setValue(""),this.changeDescriptionRequired()}clear(e){"customer"===e?(this.service_order.controls[0].get("customer_id").setValue(""),this.service_order.controls[0].get("customer_name").setValue(""),this.service_order.controls[0].get("contact").setValue(""),this.service_order.controls[0].get("contact_phone").setValue(""),this.service_order.controls[0].get("address").setValue(""),this.service_order.controls[0].get("product_file_id").setValue(""),this.service_order.controls[0].get("product_file_code").setValue(""),this.service_order.controls[0].get("product_file_name").setValue(""),this.service_order.controls[0].get("specification").setValue(""),this.service_order.controls[0].get("model").setValue(""),this.service_order.controls[0].get("sn").setValue(""),this.service_order.controls[0].get("delivery_date").setValue(""),this.service_order.controls[0].get("is_under_warranty").setValue(!1),this.service_order_equipment.forEach(e=>{e.$state=e.service_order_equipment_id?"D":e.$state}),this.service_order_equipment=this.service_order_equipment.filter(e=>"D"===e.$state),this.getEquipmentsForShow()):"product_file"===e?(this.service_order.controls[0].get("product_file_id").setValue(""),this.service_order.controls[0].get("product_file_code").setValue(""),this.service_order.controls[0].get("product_file_name").setValue(""),this.service_order.controls[0].get("specification").setValue(""),this.service_order.controls[0].get("model").setValue(""),this.service_order.controls[0].get("sn").setValue(""),this.service_order.controls[0].get("delivery_date").setValue(""),this.service_order.controls[0].get("is_under_warranty").setValue(!1),this.service_order_equipment.forEach(e=>{e.$state=e.service_order_equipment_id?"D":e.$state}),this.service_order_equipment=this.service_order_equipment.filter(e=>"D"===e.$state),this.getEquipmentsForShow()):(this.service_order.controls[0].get(e+"_id").setValue(""),this.service_order.controls[0].get(e+"_name").setValue(""))}getBase64(e){return new Promise((t,n)=>{const i=new FileReader;i.readAsDataURL(e),i.onload=()=>t(i.result),i.onerror=e=>n(e)})}setFormInfo(e,t){const n=this.service_order.controls[0];e.file_type!==n.get("type").value?n.get("type").setValue(e.file_type):("customer"===t&&e.customer_id!==n.get("customer_id").value||"product_file"===t&&e.product_file_id!==n.get("product_file_id").value)&&this.clear(t),n.get("customer_id").setValue(e.customer_id),e.customer&&"customer"===t&&(n.get("customer_name").setValue(e.customer.customer_name),n.get("contact").setValue(e.customer.contact),n.get("contact_phone").setValue(e.customer.contact_number),n.get("address").setValue(e.customer.address)),n.get("product_file_id").setValue(e.product_file_id),n.get("product_file_code").setValue(e.product_file_code),n.get("product_file_name").setValue(e.product_file_name),n.get("specification").setValue(e.specification),n.get("model").setValue(e.model),n.get("sn").setValue(e.sn);const i=this.datePipe.transform(e.delivery_date,"yyyy-MM-dd");n.get("delivery_date").setValue(i);const r=this.datePipe.transform(e.expiry_date,"yyyy-MM-dd"),a=this.datePipe.transform(new Date,"yyyy-MM-dd");n.get("is_under_warranty").setValue(r>=a),this.olderSN=e.sn}setInfoBySN(){const e=this.service_order.controls[0].get("sn").value;if(null==e||e.length<=0)return;const t=this.service_order.controls[0];t.get("sn").value!==this.olderSN&&this.serviceOrderSrv.getInfoBySN(e,this.id?t.get("service_order_id").value:"").subscribe(e=>{const t=e.data.product_file;e.data.service_order&&e.data.service_order.length?(this.exmMsg=e.data.service_order,this.dwModalService.confirm({dwTitle:"",dwContent:this.exm,dwWidth:"420px",dwOkText:"\u786e\u5b9a",dwOnOk:()=>{this.setInfoBySn(t)}})):this.setInfoBySn(t)},e=>{e.hasOwnProperty("error")&&e.error.hasOwnProperty("errorMessage")&&e.error.errorMessage&&this.message.error(e.error.errorMessage)})}setInfoBySn(e){const t=this.service_order.controls[0];if(e){if(!t.get("customer_id").value)return void this.setFormInfo(e,"customer");if(t.get("customer_id").value!==e.customer_id){const n=`\u8be5${"1"===this.service_order.controls[0].value.type?"\u5e8f\u5217\u53f7\u8bbe\u5907":"\u9879\u76ee\u53f7\u4ea7\u7ebf/\u9879\u76ee"}\u4e0d\u5c5e\u4e8e${t.get("customer_name").value},\u662f\u5426\u786e\u8ba4\u91cd\u53d6\u5ba2\u6237\u4fe1\u606f\uff1f`,i=this;JSON.parse(sessionStorage.getItem("employeeInfo")).is_salesman?this.dwModalService.warning({dwTitle:"\u63d0\u793a",dwContent:`\u8be5${"1"===this.service_order.controls[0].value.type?"\u5e8f\u5217\u53f7\u8bbe\u5907":"\u9879\u76ee\u53f7\u4ea7\u7ebf/\u9879\u76ee"}\u4e0d\u5c5e\u4e8e${t.get("customer_name").value}\uff0c\u8bf7\u786e\u8ba4\u540e\u91cd\u65b0\u8f93\u5165\uff01`,dwWidth:"400px",dwOnOk:()=>{i.clear("product_file")}}):this.dwModalService.confirm({dwTitle:n,dwIconType:"exclamation-circle",dwOnOk:()=>{this.setFormInfo(e,"customer")},dwOnCancel(){i.clear("product_file")}})}else this.setFormInfo(e,"product_file")}else this.message.create("error",("1"===this.service_order.controls[0].value.type?"\u5e8f\u5217\u53f7":"\u9879\u76ee\u53f7")+"\u4e0d\u5b58\u5728\uff0c\u8bf7\u786e\u8ba4\u540e\u91cd\u65b0\u8f93\u5165\uff01"),this.service_order.controls[0].get("product_file_id").setValue(""),this.service_order.controls[0].get("product_file_code").setValue(""),this.service_order.controls[0].get("product_file_name").setValue(""),this.service_order.controls[0].get("specification").setValue(""),this.service_order.controls[0].get("model").setValue(""),this.service_order.controls[0].get("delivery_date").setValue(""),this.service_order.controls[0].get("is_under_warranty").setValue(!1)}chkSNchg(e,t){if("focus"===e)this.olderSN=this.service_order.controls[0].get("sn").value;else if("keydown"===e){if(13===t.keyCode)return document.getElementById("snInput").blur(),!1}else if("focusout"===e)return this.setInfoBySN(),!1;return!0}breakChangeVisible(e){this.isBreakdownVisible=!1,e&&(this.service_order.controls[0].get("breakdown_id").setValue(e.id),this.service_order.controls[0].get("breakdown_name").setValue(e.name))}get fileUploadingCount(){let e=0;return this.thumbnailList2.forEach(t=>{"uploading"===t.status&&(e+=1)}),e}get videos(){const e=[];return this.thumbnailList2.forEach(t=>{e.push(t.response.fileId)}),e.join(",")}uploadChange(e){const t=e.file;if(t.title=t.name,t.dmcFileId=null,t.isAudit=!1,e.event&&e.event.hasOwnProperty("percent")&&(t.percent=e.event.percent),t.response&&(t.url=t.response.shareUrl?t.response.shareUrl:null,t.thumbUrl=t.response.shrinkUrl?t.response.shrinkUrl:null,t.percent=t.response.percent,t.dmcFileId=t.response.fileId),"done"===t.status){t.message="";const e=t.name.split(".");e.length>0&&(t.title=e[0]),this.listActionMap2[t.uid]=Object.assign({},this.listActionDefault2)}const n=this.thumbnailList2.length;for(let i=0;i<n;i++)if(t.uid===this.thumbnailList2[i].uid){this.thumbnailList2[i]=Object.assign({},t);break}if("video/mp4"!==t.type&&"video/avi"!==t.type&&"video/rmvb"!==t.type&&"video/3gp"!==t.type&&"video/flv"!==t.type)return this.message.create("error","\u8bf7\u4e0a\u4f20avi\u30013gp\u3001mp4\u3001flv\u3001rmvb\u683c\u5f0f\u89c6\u9891\uff01"),void this.thumbnailList2.splice(this.thumbnailList2.length-1);t.size/1024/1024>10&&(this.message.create("error","\u4e0a\u4f20\u6587\u4ef6\u5927\u5c0f\u8d85\u8fc710M\uff01"),this.thumbnailList2.splice(this.thumbnailList2.length-1))}cancelUploading(){const e=[];this.thumbnailList2.forEach(t=>{"uploading"===t.status&&(this.dwUploadFileMangementService.cancelUploading(t.uid),e.push(t.uid))})}listRemove2(e){delete this.listActionMap2[e];this.dwImageViewerListService.listRemove(this.thumbnailList2,e)}initVideoData(e){e.rows.forEach(e=>{this.thumbnailList2.push({uid:e.get("uid").value,type:e.get("type").value,title:e.get("title").value,name:e.get("name").value,size:e.get("size").value,url:e.get("url").value,status:"done",dmcFileId:e.get("uid").value,response:{fileId:e.get("uid").value}})})}}return e.\u0275fac=function(t){return new(t||e)(a.\u0275\u0275directiveInject(p.DwDapHttpClient),a.\u0275\u0275directiveInject(En.U),a.\u0275\u0275directiveInject(l.FormBuilder),a.\u0275\u0275directiveInject(Sn.DwRoutingMessageService),a.\u0275\u0275directiveInject(s.DwModalService),a.\u0275\u0275directiveInject(c.R),a.\u0275\u0275directiveInject(g.DwDocument),a.\u0275\u0275directiveInject(d.DwMessageService),a.\u0275\u0275directiveInject(K.TranslateService),a.\u0275\u0275directiveInject(i.DatePipe),a.\u0275\u0275directiveInject(h),a.\u0275\u0275directiveInject(vn),a.\u0275\u0275directiveInject(_n),a.\u0275\u0275directiveInject(Cn),a.\u0275\u0275directiveInject(yn.M),a.\u0275\u0275directiveInject(_.DwAnalytics),a.\u0275\u0275directiveInject(y.DwUserService),a.\u0275\u0275directiveInject(wn.DwUploadFileMangementService),a.\u0275\u0275directiveInject(bn.DwImageViewerListService),a.\u0275\u0275directiveInject(r.Router),a.\u0275\u0275directiveInject(r.ActivatedRoute))},e.\u0275cmp=a.\u0275\u0275defineComponent({type:e,selectors:[["app-service-order-modify"]],viewQuery:function(e,t){if(1&e&&(a.\u0275\u0275viewQuery(Fn,5),a.\u0275\u0275viewQuery(Vn,5),a.\u0275\u0275viewQuery(Tn,5)),2&e){let e;a.\u0275\u0275queryRefresh(e=a.\u0275\u0275loadQuery())&&(t.selectOpener=e.first),a.\u0275\u0275queryRefresh(e=a.\u0275\u0275loadQuery())&&(t.child=e.first),a.\u0275\u0275queryRefresh(e=a.\u0275\u0275loadQuery())&&(t.exm=e.first)}},features:[a.\u0275\u0275ProvidersFeature([g.DwDocument,h,vn,_n,Cn,yn.M])],decls:23,vars:20,consts:[[1,"dw-f-content-list","layoutClass","sales_layout"],[1,"issue_layout_head"],[1,"issue_layout_title"],["style","margin-left: 3px;",4,"ngIf"],[2,"float","right"],["dw-button","","dw-analyticsOn","click",3,"dwType","disabled","angularticsAction","angularticsCategory","angularticsLabel","id","click"],["translate",""],["dw-button","","type","button",3,"dwType","click"],[1,"content-box"],["dw-form","",3,"formGroup",4,"ngIf"],[3,"visible","isMultyChoose","breakVisibleChanged"],["breakOpener",""],["exm",""],[3,"dwBodyStyle","dwMaskClosable","dwWidth","dwVisible","dwTitle","dwFooter","dwVisibleChange","dwOnCancel"],["dwModalContent",""],[3,"visible","customerVisibleChanged"],["child3",""],[2,"margin-left","3px"],["dw-form","",3,"formGroup"],[1,"sub-title"],["dwRequired","",3,"dwSpan"],[3,"dwSpan"],["dwSearch","",3,"dwSuffix"],["dw-input","","type","text","required","","readonly","","dw-input","","formControlName","customer_name"],["suffixcustomerData",""],["style","color: red;",4,"ngIf"],["dw-input","","placeholder","\u8bf7\u8f93\u5165\u8054\u7cfb\u4eba","maxlength","60","formControlName","contact"],[3,"dwSpan","dwValidateStatus"],["dw-input","","placeholder","\u8bf7\u8f93\u5165\u8054\u7cfb\u7535\u8bdd","formControlName","contact_phone","maxlength","50",3,"required","blur"],[3,"value","type"],["contact_phone_tip",""],["dw-input","","placeholder","\u8bf7\u8f93\u5165\u5730\u5740","maxlength","100","formControlName","address"],["dw-col","",3,"dwSpan"],["formControlName","type",3,"ngModelChange"],["dw-radio","",3,"dwValue"],["dwRequired","",3,"dwSpan",4,"ngIf"],["dw-input","","type","text","readonly","","required","","formControlName","product_file_code"],["suffixProductFileData",""],[3,"dwSpan",4,"ngIf"],["dw-input","","readonly","","formControlName","product_file_name"],["dw-input","","readonly","","formControlName","specification"],["dw-input","","readonly","","formControlName","model"],["dw-input","","formControlName","sn","id","snInput","required","",3,"keydown","focus","blur"],["dw-input","","readonly","","formControlName","delivery_date"],["dw-checkbox","","dwDisabled","true","formControlName","is_under_warranty"],[4,"ngIf"],["dw-input","","type","text","required","","readonly","","dw-input","","formControlName","service_type_name"],["suffixServiceTypeData",""],["dw-input","","type","text","required","","readonly","","dw-input","","formControlName","breakdown_name"],["suffixBreakDownData",""],["class","choose-phrase",3,"click",4,"ngIf"],["class","phrase",4,"ngIf"],["maxlength","200","dw-input","","placeholder","200\u5b57\u4ee5\u5185","formControlName","description",3,"dwAutosize"],["formControlName","service_urgency_id",3,"ngModelChange"],["dw-radio","",3,"dwValue",4,"ngFor","ngForOf"],["required","","formControlName","appointment_date",3,"dwFormat","dwDisabledDate"],["formControlName","channel",2,"width","100%",3,"ngModelChange"],[3,"dwLabel","dwValue",4,"ngFor","ngForOf"],[1,"clearfix"],["dwAction","https://www.mocky.io/v2/5cc8019d300000980a055e76","dwListType","picture-card",3,"dwFileList","dwShowButton","dwPreview","dwBeforeUpload","dwShowUploadList","dwAccept","dwFileListChange","dwChange"],["dw-icon","","dwType","plus"],[1,"ant-upload-text"],[3,"dwVisible","dwContent","dwFooter","dwOnCancel"],["modalContent",""],["dw-col","","dwSpan","24"],[1,"ant-upload-list","ant-upload-list-picture-card",2,"margin-left","-8px",3,"ngClass"],[4,"ngFor","ngForOf","ngForTrackBy"],["dwAction","",3,"dwCustomRequest","dwFileList","dwShowUploadList","dwMultiple","dwDisabled","dwAccept","dwFileListChange","dwChange"],["dw-button","","type","button",2,"margin-top","8px",3,"disabled"],["dw-icon","","dwType","upload"],[1,"sub-title",2,"margin-top","-8px"],["maxlength","50","dw-input","","placeholder","50\u5b57\u4ee5\u5185","formControlName","remark",3,"dwAutosize"],["class","cust-field",4,"ngIf"],["dw-icon","","class","ant-input-clear-icon","dwTheme","fill","dwType","close-circle",3,"click",4,"ngIf"],["dw-button","","dwType","primary","dwSearch","","type","button",3,"disabled","click"],["dw-icon","","dwType","search","dwTheme","outline"],["dw-icon","","dwTheme","fill","dwType","close-circle",1,"ant-input-clear-icon",3,"click"],[2,"color","red"],[3,"selectedChanged"],["selectOpener",""],[3,"dwData","dwFrontPagination","dwShowPagination"],["dwTable",""],["dw-tr",""],["dw-th",""],["dw-th","","dwRight","",1,"align-center"],[4,"ngFor","ngForOf"],[1,"align-center"],[1,"action-grid"],["title","\u5220\u9664",3,"click"],["src","../../../../../../assets/img/icon_delete.png","alt","\u5220\u9664",1,"action-icon"],["src","../../../../../../assets/img/icon_delete_hover.png","alt","\u5220\u9664",1,"action-icon"],["dw-button","","dwType","primary","dwSearch","","type","button",3,"click"],[1,"choose-phrase",3,"click"],[1,"phrase"],["src","../../../../../../assets/img/icon_cancel.png","alt","\u5220\u9664",3,"click"],[3,"dwLabel","dwValue"],["dw-input","","placeholder","\u8bf7\u8bf4\u660e","maxlength","60","formControlName","channel_explanation"],["alt","\u6545\u969c\u56fe\u7247",3,"src","ngStyle"],[3,"dwListType","dwFile","dwItemAction","dwDesignTpl","onPreview","onRemove","onCheck","onOtherAction"],["titleTpl",""],["designTpl",""],["class","myTitleTag",4,"ngIf"],[1,"myTitleTag"],[1,"cust-field"],["cols","1","labelSpan","4","inputSpan","10","tableName","service_order",3,"group","dwDocument"],[2,"max-height","340px","overflow-y","auto","margin-top","-8px"],[3,"click"],["child",""]],template:function(e,t){1&e&&(a.\u0275\u0275elementStart(0,"dw-content",0),a.\u0275\u0275elementStart(1,"div",1),a.\u0275\u0275elementStart(2,"h2",2),a.\u0275\u0275template(3,Ln,2,0,"span",3),a.\u0275\u0275template(4,Rn,2,0,"span",3),a.\u0275\u0275elementStart(5,"div",4),a.\u0275\u0275elementStart(6,"button",5),a.\u0275\u0275listener("click",function(){return t.save(null)}),a.\u0275\u0275elementStart(7,"span",6),a.\u0275\u0275text(8,"\u4fdd\u5b58"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(9,"button",7),a.\u0275\u0275listener("click",function(){return t.cancel()}),a.\u0275\u0275elementStart(10,"span",6),a.\u0275\u0275text(11,"\u53d6\u6d88"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275element(12,"dw-divider"),a.\u0275\u0275elementStart(13,"div",8),a.\u0275\u0275template(14,Si,156,97,"form",9),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(15,"app-breakdown-opener",10,11),a.\u0275\u0275listener("breakVisibleChanged",function(e){return t.breakChangeVisible(e)}),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275template(17,Ii,6,1,"ng-template",null,12,a.\u0275\u0275templateRefExtractor),a.\u0275\u0275elementStart(19,"dw-modal",13),a.\u0275\u0275listener("dwVisibleChange",function(e){return t.isCollapsed=e})("dwOnCancel",function(){return t.isCollapsed=!1}),a.\u0275\u0275template(20,Ei,2,0,"ng-template",14),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(21,"app-customer-for-salesman-opener",15,16),a.\u0275\u0275listener("customerVisibleChanged",function(e){return t.customerChangeVisible(e)}),a.\u0275\u0275elementEnd()),2&e&&(a.\u0275\u0275advance(3),a.\u0275\u0275property("ngIf",!t.id),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",!!t.id),a.\u0275\u0275advance(2),a.\u0275\u0275propertyInterpolate("angularticsLabel",t.userInfo.tenantId+","+t.userInfo.userId),a.\u0275\u0275property("dwType","primary")("disabled",!t.doc.valid)("angularticsAction",t.id?"\u4fee\u6539-\u70b9\u51fb\u786e\u5b9a\u4fee\u6539":"\u65b0\u5efa-\u70b9\u51fb\u786e\u5b9a\u65b0\u5efa")("angularticsCategory","\u670d\u52a1\u5de5\u5355")("id",t.id?"sure-modify-service-order":"sure-create-service-order"),a.\u0275\u0275advance(3),a.\u0275\u0275property("dwType","default"),a.\u0275\u0275advance(5),a.\u0275\u0275property("ngIf",t.service_order.controls[0]),a.\u0275\u0275advance(1),a.\u0275\u0275property("visible",t.isBreakdownVisible)("isMultyChoose",!1),a.\u0275\u0275advance(4),a.\u0275\u0275property("dwBodyStyle",a.\u0275\u0275pureFunction0(19,Di))("dwMaskClosable",!0)("dwWidth",1120)("dwVisible",t.isCollapsed)("dwTitle","\u670d\u52a1\u5de5\u5355\u8be6\u60c5")("dwFooter",null),a.\u0275\u0275advance(2),a.\u0275\u0275property("visible",t.isCustomerVisible))},directives:[E.DwContentComponent,i.NgIf,$.DwButtonComponent,j.uG,z.u,_.DwAnalyticsOn,K.TranslateDirective,D.DwDividerComponent,On.Y,s.DwModalComponent,s.DwModalContentDirective,se,l.\u0275NgNoValidate,l.NgControlStatusGroup,P.DwFormDirective,l.FormGroupDirective,k.DwRowDirective,P.DwFormItemComponent,k.DwColDirective,P.DwFormLabelComponent,P.DwFormControlComponent,F.DwInputGroupComponent,F.DwInputGroupWhitSuffixOrPrefixDirective,F.DwInputDirective,l.DefaultValueAccessor,l.RequiredValidator,l.NgControlStatus,l.FormControlName,l.MaxLengthValidator,Q.l,ne.DwRadioGroupComponent,ne.DwRadioComponent,q.DwCheckboxComponent,F.DwAutosizeDirective,i.NgForOf,B.DwDatePickerComponent,Mn.DwSelectComponent,Pn.DwUploadComponent,ee.DwIconDirective,i.NgClass,In.R,ie.DwTableComponent,re.Ct,ie.DwTheadComponent,ie.DwTrDirective,ie.DwTableCellDirective,ie.DwThMeasureDirective,re.BL,ie.DwCellFixedDirective,ie.DwTbodyComponent,Mn.DwOptionComponent,i.NgStyle,bn.DwImageViewerListItemComponent,kn.DwExtraFieldsComponent,Dn.h],pipes:[K.TranslatePipe],styles:[".choose-phrase[_ngcontent-%COMP%]{display:inline-block;height:32px;line-height:32px;padding:0 10px;color:#666;background:#eaeaea;font-size:13px;margin-bottom:10px;cursor:pointer}.phrase[_ngcontent-%COMP%]{display:inline-block;height:32px;line-height:32px;padding:0 10px;color:#fff;background:#5ebaef;font-size:13px;margin-bottom:10px}.phrase[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:14px;height:14px;margin-left:5px;vertical-align:-2px;cursor:pointer}.ant-upload-list-picture-card[_ngcontent-%COMP%]{margin-top:-8px!important}"]}),e})();var Mi=n(32245),Pi=n(51033);const ki=[{path:"",pathMatch:"prefix",component:o,data:{dwRouteData:{programId:"service-order"}},resolve:{transaction:Mi.DwLanguageService},children:[{path:"",component:hn,canActivate:[b.DwAuthGuardService,Pi.L],data:{dwRouteData:{programId:"service-order",dwAuthId:"service-order"},reload:!0}},{path:"service-order-create",component:Oi,canActivate:[b.DwAuthGuardService,Pi.L],data:{dwRouteData:{programId:"service-order",dwAuthId:"service-order"},reload:!0}},{path:"service-order-modify/:id",component:Oi,canActivate:[b.DwAuthGuardService,Pi.L],data:{dwRouteData:{programId:"service-order",dwAuthId:"service-order"},reload:!0}},{path:"service-order-detail/:id",component:Dn.h,canActivate:[b.DwAuthGuardService,Pi.L],data:{dwRouteData:{programId:"service-order",dwAuthId:"service-order"},reload:!0}},{path:"service-order-distribution",component:M.C,canActivate:[b.DwAuthGuardService,Pi.L],data:{dwRouteData:{programId:"service-order",dwAuthId:"service-order"},reload:!0}},{path:"service-order-dispatch",component:O.H,canActivate:[b.DwAuthGuardService,Pi.L],data:{dwRouteData:{programId:"service-order",dwAuthId:"service-order"},reload:!0}}]}];let Fi=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=a.\u0275\u0275defineInjector({imports:[[r.RouterModule.forChild(ki)],r.RouterModule]}),e})();var Vi=n(23938),Ti=n(119),Li=n(92323),Ri=n(88680),Ai=n(78169),Ni=n(74913),$i=n(59970),ji=n(41430),zi=n(6769),Bi=n(57252);let qi=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=a.\u0275\u0275defineInjector({providers:[{provide:"DocumentResource",useValue:"restful/service/serviceOrder/ServiceOrder/Curd"},{provide:"ServiceSiteResource",useValue:"restful/service/serviceSite/ServiceSite"},{provide:"ServiceCostResource",useValue:"restful/service/serviceCost/ServiceCost"},{provide:"ServiceReportResource",useValue:"restful/service/serviceDoc/ServiceReport"},{provide:"QuantityMax",useValue:9999999999}],imports:[[i.CommonModule,Vi.m,g.DwDocumentModule,bn.DwImageViewerModule,Fi,d.DwMessageModule,s.DwModalModule,$.DwButtonModule,E.DwLayoutModule,B.DwDatePickerModule,D.DwDividerModule,P.DwFormModule,F.DwInputModule,ie.DwTableModule,ce.DwTagModule,k.DwGridModule,ee.DwIconModule,me.DwPopconfirmModule,q.DwCheckboxModule,te.DwActionModule,l.ReactiveFormsModule,K.TranslateModule,ne.DwRadioModule,Pn.DwUploadModule,Ti.DwInputNumberModule,Li.DwRateModule,Ri.DwStepsModule,Ai.DwTabsModule,Ni.DwTimelineModule,kn.DwExtraFieldsModule,Mn.DwSelectModule,zi.ProductFileModule,$i.DwTableConfigModule,ji.DwToolTipModule,Bi.DwProgressModule]]}),e})()},91970:function(e,t,n){n.d(t,{v:function(){return d}});var i=n(51156),r=n(66800),a=n(47372),o=n(99487),l=n(42746);let d=(()=>{class e{constructor(e,t){this.dapHttp=e,this.userService=t}emptyServiceOrder(){return{doc_date:new Date,is_under_warranty:!1,description:"",appointment_date:new Date,picture_id:"",contact:"",contact_phone:"",address:"",delivery_date:new Date,service_type_name:"",breakdown_name:"",service_urgency_name:""}}emptyServiceOrderCurrentLink(){return{state:"",employee_name:"",file_id:"",employee_show:"",state_show:"",button_show:""}}getServiceOrderBaseInfo(e){return this.dapHttp.get(`restful/service/serviceOrder/ServiceOrder/ServiceOrderBaseInfo?id=${e}`)}getServiceOrderLink(e){return this.dapHttp.get(`restful/service/serviceOrder/ServiceOrder/ServiceOrderLink?id=${e}`)}getServiceOrderProgress(e){return this.dapHttp.get(`restful/service/serviceOrder/ServiceOrder/ServiceOrderProgress?id=${e}`).pipe((0,a.map)(e=>e))}getServiceDocInfo(e){return this.dapHttp.get(`restful/service/serviceOrder/ServiceOrder/ServiceDocInfo?id=${e}`).pipe((0,a.map)(e=>e))}getServiceDocCalcDetail(e){return this.dapHttp.get(`restful/service/serviceOrder/ServiceOrder/ServiceDocCalcDetail?id=${e}`).pipe((0,a.map)(e=>e))}getServiceOrderProcessrecordListCount(e){return this.dapHttp.get(`restful/service/serviceDoc/ServiceDoc/ServiceOrderProcessrecordListCount?serviceOrderId=${e}`)}getServiceOrderProcessrecordList(e){return this.dapHttp.get(`restful/service/serviceDoc/ServiceDoc/ServiceOrderProcessrecordList?serviceOrderId=${e}`).pipe((0,a.map)(e=>e))}getServiceOrderReview(e){return this.dapHttp.get(`restful/service/serviceOrder/ServiceOrder/ServiceOrderReview?service_order_id=${e}`)}getUserId(){return this.dapHttp.get("restful/service/employee/Employee/CurrentEmployee")}getBreakdownOpener(){return this.dapHttp.get("restful/service/breakdown/Breakdown/BreakdownOpener?name=")}getMaterialGroups(e){return this.dapHttp.get(`restful/service/serviceDoc/ServiceReport/${e}`)}getMaterialList(e){return this.dapHttp.get(`restful/service/serviceDoc/ServiceReport/${e}`)}getNewMaterialListByOrder(e){return this.dapHttp.get(`restful/service/serviceDoc/ServiceReport/PartsDeliveryDetails?serviceOrderId=${e}`)}getNewMaterialListBySite(e){return this.dapHttp.get(`restful/service/serviceDoc/ServiceReport/EngineerMaterials?serviceOrderId=${e}`)}getSummaryInfo(e){return this.dapHttp.get(`restful/service/serviceDoc/ServiceDoc/ServiceDocSummary?serviceDocId=${e}`)}getQuotationServiceItems(e){return this.dapHttp.get(`restful/service/serviceDoc/ServiceDoc/QuotationServiceItems?serviceOrderId=${e}`)}getQuotationMaterialGroups(e){return this.dapHttp.get(`restful/service/itemGroup/ItemGroup/${e}`)}getQuotationMaterialList(e){return this.dapHttp.get(`restful/service/${e}`)}getQuotationNewMaterialListByOrder(e){return this.dapHttp.get(`restful/service/material/Material/PartsDeliveryDetails?serviceOrderId=${e}`)}getQuickwearPartAllMaterialGroups(e){return this.dapHttp.get(`restful/service/productFile/QuickwearPart/${e}`)}uploadImg(e){return this.dapHttp.post("restful/service/serviceDoc/File/UploadImage",e)}getFileById(e){return this.dapHttp.get(`restful/service/employee/Employee/File?file_id=${e}`).pipe((0,a.map)(e=>e))}createReport(e){return this.dapHttp.post("restful/service/serviceDoc/ServiceReport/ServiceReport",{params:e})}getServiceReportInfo(e){return this.dapHttp.get(`restful/service/serviceDoc/serviceReport/ServiceDocInfo?serviceDocId=${e}`)}modifyReport(e){return this.dapHttp.post("restful/service/serviceDoc/ServiceReport/ServiceReportModify",{params:e})}exportPDF(e){return this.dapHttp.get("restful/service/serviceDoc/ServiceReport/ServiceReportPdf",{params:e=e||{},headers:this.getHeader(),observe:"events",responseType:"blob",reportProgress:!0})}getHeader(){return new o.HttpHeaders({token:this.userService.getUser("token")})}serviceDocPartChanges(e){return this.dapHttp.post("restful/service/serviceDoc/ServiceReport/ServiceDocPartChanges",{params:e})}getAutoSettings(){return this.dapHttp.get("restful/service/autoSettings/AutoSettings/AutoSettings")}getServiceTypes(){return this.dapHttp.get("restful/service/serviceType/serviceType/ServiceType?code=&name=").pipe((0,a.map)(e=>e))}checkNotCompletePartsApply(e){return this.dapHttp.get("restful/service/serviceDoc/ServiceDoc/NotCompletePartsApplyCount?serviceDocId="+e).pipe((0,a.map)(e=>e))}serviceOrderRecordShowAlert(e){return this.dapHttp.get("restful/service/serviceDoc/ServiceReport/ServiceOrderRecordShowAlert?productFileId="+e).pipe((0,a.map)(e=>e))}saveAmountInfo(e){return this.dapHttp.put("restful/service/serviceDoc/ServiceReport/ModifyServiceDocCalcDetail",e)}getServiceOrderCustomerSettled(e){return this.dapHttp.get("restful/service/serviceDoc/ServiceReport/ServiceOrderCustomerSettled?serviceOrderId="+e)}getReturnvisitItemList(){return this.dapHttp.get("restful/service/returnvisitItem/ReturnVisitItem/ReturnVisitItemList?isIncludeSystemData=true").pipe((0,a.map)(e=>e))}returnvisit(e){return this.dapHttp.put("restful/service/serviceOrder/ServiceOrder/ReturnVisitEvaluation",{params:e})}saveAttachments(e){return this.dapHttp.post("restful/service/productFile/ProductFile/Attachments",e,{})}download(e){return this.dapHttp.get("restful/service/productFile/ProductFile/downloadFile",{params:e=e||{},headers:this.getHeader(),observe:"events",responseType:"blob",reportProgress:!0})}getCurrentEmployee(){return this.dapHttp.get("restful/service/employee/Employee/CurrentEmployee")}getWorkrecord(e){return this.dapHttp.get(`restful/service/serviceDoc/ServiceDoc/ServiceDocLog?serviceDocId=${e}`).pipe((0,a.map)(e=>e))}}return e.\u0275fac=function(t){return new(t||e)(l.\u0275\u0275inject(i.DwDapHttpClient),l.\u0275\u0275inject(r.DwUserService))},e.\u0275prov=l.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},97981:function(e,t,n){n.d(t,{R:function(){return c}});var i=n(51156),r=n(66800),a=n(71049),o=n(47372),l=n(55245),d=n(99487),s=n(42746);let c=(()=>{class e{constructor(e,t,n){this.dapHttp=e,this.userService=t,this.datePipe=n}emptyServiceOrder(){return{doc_no:"",doc_date:"",receive_time:0,service_type_id:0,customer_id:0,remark:"",contact:"",contact_phone:"",address:"",product_file_id:"",sn:"",is_under_warranty:!1,quantity:"",breakdown_id:"",description:"",service_urgency_id:"",task_time:"",channel:"",receive_employee_id:"",service_site_id:"",service_employee_id:"",assistant_id:"",begin_time:"",end_time:"",state:"",customer_evaluation:"",customer_feedback:"",review_employee_id:"",review_date:"",review_opinions:""}}getServiceUrgencyList(e){return this.dapHttp.get(`restful/service/serviceUrgency/ServiceUrgency/ServiceUrgency?name=${e}`).pipe((0,o.map)(e=>e))}getFileById(e){return this.dapHttp.get(`restful/service/serviceOrder/ServiceOrder/File?file_id=${e}`).pipe((0,o.map)(e=>e))}getServiceOrderList(e){""!==e.date_range&&(e.date_range[0]=this.datePipe.transform(e.date_range[0],"yyyy-MM-dd"),e.date_range[1]=this.datePipe.transform(e.date_range[1],"yyyy-MM-dd"));const t=encodeURIComponent(JSON.stringify(e));return this.dapHttp.get(`restful/service/serviceOrder/ServiceOrder/ServiceOrder?params=${t}`)}getServiceOrderById(e){return this.dapHttp.get(`restful/service/serviceOrder/ServiceOrder/ServiceOrderById?id=${e}`).pipe((0,o.map)(e=>e))}getCustomerById(e){let t="CustomerById",n={};const i={params:{id:e.toString()}};let r={params:{id:e.toString(),salesmanId:""}};if(JSON.parse(sessionStorage.getItem("employeeInfo")).is_salesman){t="SalesmanCustomById";const n=sessionStorage.getItem("salesman_id")||JSON.parse(sessionStorage.getItem("employeeInfo")).employee_id;r={params:{id:e.toString(),salesmanId:n}}}return n=JSON.parse(sessionStorage.getItem("employeeInfo")).is_salesman?r:i,this.dapHttp.get("restful/service/customer/Customer/"+t,n)}getProductFileBySn(e,t){return this.dapHttp.get("restful/service/productFile/productFile/ProductFileBySn",t?{params:{sn:e,serviceOrderId:t}}:{params:{sn:e}})}getInfoBySN(e,t){return this.getProductFileBySn(e,t).pipe((0,o.mergeMap)(e=>e.data.product_file.customer_id?this.getCustomerById(e.data.product_file.customer_id).pipe((0,o.map)(t=>(t.success&&t.data.customer[0]&&(e.data.product_file.customer=JSON.parse(JSON.stringify(t.data.customer[0]))),e))):(0,a.of)(e)))}createServiceOrder(e){return console.log(e),e.doc_date=this.datePipe.transform(e.doc_date,"yyyy-MM-dd"),e.appointment_date=this.datePipe.transform(e.appointment_date,"yyyy-MM-dd"),e.cust_field&&(e.cust_field=JSON.stringify(e.cust_field)),this.dapHttp.post("restful/service/serviceOrder/ServiceOrder/Create",{params:e})}modifyServiceOrder(e,t){e.appointment_date=this.datePipe.transform(e.appointment_date,"yyyy-MM-dd"),e.cust_field&&(e.cust_field=JSON.stringify(e.cust_field));const n=this.createDwDataSet(e,t,"U");return this.dapHttp.put("restful/service/serviceOrder/ServiceOrder/Modify",n)}deleteServiceOrder(e){return this.dapHttp.delete("restful/service/serviceOrder/ServiceOrder/BathRemove",{body:{ids:e.join(",")}})}CancelServiceOrder(e){return this.dapHttp.put("restful/service/serviceOrder/ServiceOrder/Cancel",{params:e})}DistributionServiceOrder(e){return this.dapHttp.put("restful/service/serviceOrder/ServiceOrder/Distribution",{params:e})}DispatchServiceOrder(e){return this.dapHttp.put("restful/service/serviceOrder/ServiceOrder/Dispatch",{params:e})}evaluationServiceOrder(e){return this.dapHttp.put("restful/service/serviceOrder/ServiceOrder/Evaluation",{params:e})}reviewServiceOrder(e){return this.dapHttp.put("restful/service/serviceOrder/ServiceOrder/Review",e)}getCurrentServiceSiteInfo(){return this.dapHttp.get("restful/service/serviceSite/ServiceSite/UserSite")}getCurrentEmployee(){return this.dapHttp.get("restful/service/employee/Employee/CurrentEmployee")}getOrderServiceSites(e){return this.dapHttp.get(`restful/service/serviceOrder/ServiceOrder/OrderServiceSites?service_order_ids=${e}`)}exportReport(e,t,n){return e.length&&(e[0]=this.datePipe.transform(e[0],"yyyy-MM-dd"),e[1]=this.datePipe.transform(e[1],"yyyy-MM-dd")),this.dapHttp.get("restful/service/serviceDoc/ServiceReport/ServiceReportExcel",{params:{beginDate:e[0],endDate:e[1],isIncludleUnfinish:t,receiveEmployeeId:n},headers:this.getHeader(),observe:"events",responseType:"blob",reportProgress:!0})}getHeader(){return new d.HttpHeaders({token:this.userService.getUser("token")})}createDwDataSet(e,t,n){const i={};return Object.assign(i,e),i.$state=n,i.service_order_id=t,{dataSet:{service_order:i}}}uploadFile(e,t=!0,n,i,r={shrink:"1",width:"150"},a=1){const o=new FormData;return o.append("file",e),this.dapHttp.post("restful/service/serviceOrder/ServiceOrder/Upload",o,{})}deleteFile(e){return this.dapHttp.post("restful/service/serviceOrder/ServiceOrder/DeleteFile",{fileId:e})}changeTechnologyFile(e){return console.log(e),this.dapHttp.put("restful/service/serviceOrder/ServiceOrder/ServiceOrderForTechnologyProgram",e)}}return e.\u0275fac=function(t){return new(t||e)(s.\u0275\u0275inject(i.DwDapHttpClient),s.\u0275\u0275inject(r.DwUserService),s.\u0275\u0275inject(l.DatePipe))},e.\u0275prov=s.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},90697:function(e,t,n){n.d(t,{a:function(){return h}});var i=n(64762),r=n(45890),a=n(83237),o=n(42746),l=n(67733),d=n(85277),s=n(31441),c=n(55245);const m=function(){return{width:"100%"}};function p(e,t){if(1&e&&o.\u0275\u0275element(0,"img",6),2&e){const e=o.\u0275\u0275nextContext();o.\u0275\u0275property("src",e.previewImage,o.\u0275\u0275sanitizeUrl)("ngStyle",o.\u0275\u0275pureFunction0(2,m))}}const u=function(){return{showPreviewIcon:!0,showRemoveIcon:!1,showDownloadIcon:!1}};let h=(()=>{class e{constructor(e,t){this.http=e,this.message=t,this.fileList=[],this.previewImage="",this.previewVisible=!1,this.handlePreview=e=>(0,i.mG)(this,void 0,void 0,function*(){this.item.file_id?this.http.get(`restful/service/material/Material/MaterialOriginUrl?fileId=${this.item.file_id}`).subscribe(t=>{this.previewImage=t||e.url,this.previewVisible=!0},e=>{e.hasOwnProperty("error")&&e.error.hasOwnProperty("errorMessage")&&e.error.errorMessage&&this.message.error(e.error.errorMessage)}):(this.previewImage=e.url,this.previewVisible=!0)})}ngOnInit(){this.fileList=this.item.url?[{uid:this.item.file_id||this.item.url,name:this.item.file_id||this.item.url,status:"done",url:this.item.url}]:[]}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(r.$),o.\u0275\u0275directiveInject(a.DwMessageService))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["app-big-img"]],inputs:{item:"item"},decls:8,vars:8,consts:[[1,"small_img"],["dwListType","picture-card",3,"dwShowUploadList","dwFileList","dwShowButton","dwPreview","dwFileListChange"],["dw-icon","","dwType","plus"],[1,"ant-upload-text"],[3,"dwVisible","dwContent","dwFooter","dwOnCancel"],["modalContent",""],["alt","img",3,"src","ngStyle"]],template:function(e,t){if(1&e&&(o.\u0275\u0275elementStart(0,"div",0),o.\u0275\u0275elementStart(1,"dw-upload",1),o.\u0275\u0275listener("dwFileListChange",function(e){return t.fileList=e}),o.\u0275\u0275element(2,"em",2),o.\u0275\u0275elementStart(3,"div",3),o.\u0275\u0275text(4,"Upload"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(5,"dw-modal",4),o.\u0275\u0275listener("dwOnCancel",function(){return t.previewVisible=!1}),o.\u0275\u0275template(6,p,1,3,"ng-template",null,5,o.\u0275\u0275templateRefExtractor),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()),2&e){const e=o.\u0275\u0275reference(7);o.\u0275\u0275advance(1),o.\u0275\u0275property("dwShowUploadList",o.\u0275\u0275pureFunction0(7,u))("dwFileList",t.fileList)("dwShowButton",!1)("dwPreview",t.handlePreview),o.\u0275\u0275advance(4),o.\u0275\u0275property("dwVisible",t.previewVisible)("dwContent",e)("dwFooter",null)}},directives:[l.DwUploadComponent,d.DwIconDirective,s.DwModalComponent,c.NgStyle],styles:[""]}),e})()},88531:function(e,t,n){n.d(t,{Y:function(){return S}});var i=n(42746),r=n(45890),a=n(31441),o=n(85277),l=n(67280),d=n(1020),s=n(55245),c=n(29872),m=n(74591),p=n(82542);function u(e,t){if(1&e){const e=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"div",11),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(e),i.\u0275\u0275nextContext(2).clearInput()}),i.\u0275\u0275element(1,"em",12),i.\u0275\u0275elementEnd()}}function h(e,t){if(1&e){const e=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"div",13),i.\u0275\u0275listener("click",function(){const t=i.\u0275\u0275restoreView(e).index;return i.\u0275\u0275nextContext(2).swichNav(t)}),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()}if(2&e){const e=t.$implicit,n=t.index,r=i.\u0275\u0275nextContext(2);i.\u0275\u0275classMap(n==r.currBreakTab?"break-tab-on group":"group"),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",e.name," ")}}function g(e,t){if(1&e){const e=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"div",18),i.\u0275\u0275elementStart(1,"div",19),i.\u0275\u0275elementStart(2,"label",20),i.\u0275\u0275listener("ngModelChange",function(t){return i.\u0275\u0275restoreView(e).$implicit.check=t}),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(3,"div",21),i.\u0275\u0275text(4),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()}if(2&e){const e=t.$implicit;i.\u0275\u0275advance(2),i.\u0275\u0275propertyInterpolate("dwValue",e.id+","+e.name),i.\u0275\u0275property("ngModel",e.check),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate1(" ",e.name," ")}}function f(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"div"),i.\u0275\u0275template(1,g,5,3,"div",17),i.\u0275\u0275elementEnd()),2&e){const e=t.index,n=i.\u0275\u0275nextContext(3);i.\u0275\u0275classMap(e==n.currBreakTab?"r-wrap":"r-wrap hide"),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",n.breakList[e].child)}}function w(e,t){if(1&e){const e=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"div",14),i.\u0275\u0275elementStart(1,"dw-checkbox-wrapper",15),i.\u0275\u0275listener("dwOnChange",function(t){return i.\u0275\u0275restoreView(e),i.\u0275\u0275nextContext(2).breakdownChecked(t)}),i.\u0275\u0275template(2,f,2,3,"div",16),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()}if(2&e){const e=i.\u0275\u0275nextContext(2);i.\u0275\u0275property("dwSpan",18),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngForOf",e.breakList)}}function v(e,t){if(1&e){const e=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"div",18),i.\u0275\u0275elementStart(1,"div",19),i.\u0275\u0275elementStart(2,"label",23),i.\u0275\u0275listener("ngModelChange",function(t){return i.\u0275\u0275restoreView(e).$implicit.check=t}),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(3,"div",21),i.\u0275\u0275text(4),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()}if(2&e){const e=t.$implicit;i.\u0275\u0275advance(2),i.\u0275\u0275propertyInterpolate("dwValue",e.id+","+e.name),i.\u0275\u0275property("ngModel",e.check),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate1(" ",e.name," ")}}function x(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"div"),i.\u0275\u0275template(1,v,5,3,"div",17),i.\u0275\u0275elementEnd()),2&e){const e=t.index,n=i.\u0275\u0275nextContext(3);i.\u0275\u0275classMap(e==n.currBreakTab?"r-wrap":"r-wrap hide"),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",n.breakList[e].child)}}function C(e,t){if(1&e){const e=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"div",14),i.\u0275\u0275elementStart(1,"dw-radio-group",22),i.\u0275\u0275listener("ngModelChange",function(t){return i.\u0275\u0275restoreView(e),i.\u0275\u0275nextContext(2).selectItem=t}),i.\u0275\u0275template(2,x,2,3,"div",16),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()}if(2&e){const e=i.\u0275\u0275nextContext(2);i.\u0275\u0275property("dwSpan",18),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngModel",e.selectItem),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",e.breakList)}}function _(e,t){if(1&e){const e=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"div",2),i.\u0275\u0275elementStart(1,"div",3),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(e),i.\u0275\u0275nextContext().searchBreakdowns()}),i.\u0275\u0275element(2,"em",4),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(3,"input",5),i.\u0275\u0275listener("ngModelChange",function(t){return i.\u0275\u0275restoreView(e),i.\u0275\u0275nextContext().searchValue=t})("keydown",function(t){return i.\u0275\u0275restoreView(e),i.\u0275\u0275nextContext().onKeydown(t)}),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(4,u,2,0,"div",6),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(5,"div",7),i.\u0275\u0275elementStart(6,"div",8),i.\u0275\u0275template(7,h,2,3,"div",9),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(8,w,3,2,"div",10),i.\u0275\u0275template(9,C,3,3,"div",10),i.\u0275\u0275elementEnd()}if(2&e){const e=i.\u0275\u0275nextContext();i.\u0275\u0275advance(3),i.\u0275\u0275property("ngModel",e.searchValue),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",e.searchValue),i.\u0275\u0275advance(2),i.\u0275\u0275property("dwSpan",6),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",e.breakList),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",e.isMultyChoose),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",!e.isMultyChoose)}}const y=function(){return{height:"450px",overflow:"auto","padding-bottom":"24px"}};let S=(()=>{class e{constructor(e){this.commonHttpService=e,this.breakVisibleChanged=new i.EventEmitter,this.searchValue="",this.currBreakTab=0,this.breakList=[],this.checkBreakValues=[],this.breakdowns=[],this.selectItem=""}initData(){this.searchValue="",this.currBreakTab=0,this.selectItem="",this.getBreakdownList()}getBreakdownList(){this.commonHttpService.get("restful/service/breakdown/Breakdown/BreakdownOpener",{name:this.searchValue}).subscribe(e=>{this.breakList=e.data.brokendown_item})}searchBreakdowns(){this.currBreakTab=0,this.selectItem="",this.getBreakdownList()}clearInput(){this.searchValue="",this.searchBreakdowns()}swichNav(e){this.currBreakTab=e}breakdownChecked(e){console.log(e),this.checkBreakValues=e}close(){this.breakVisibleChanged.emit(null)}chooseOk(){this.isMultyChoose?this.chooseMultyOk():this.chooseSingleOk()}chooseMultyOk(){if(this.checkBreakValues.length){const e=[];for(let n=0;n<this.breakList.length;n++)e.push({id:this.breakList[n].id,code:this.breakList[n].code,name:this.breakList[n].name,child:[]}),this.breakList[n].child&&this.breakList[n].child.forEach(t=>{t.check&&e[n].child.push({id:t.id,code:t.code,name:t.name})});let t=[];t=e.filter(e=>e.child.length>0),this.breakdowns=t,console.log(this.breakdowns)}this.breakVisibleChanged.emit(this.breakdowns.length?this.breakdowns:null)}chooseSingleOk(){let e=null;if(this.selectItem){const t=this.selectItem.indexOf(",");t>0&&(e={id:this.selectItem.substr(0,t),name:this.selectItem.substr(t+1)})}this.breakVisibleChanged.emit(e)}ngOnInit(){}onKeydown(e){13===e.keyCode&&this.searchBreakdowns()}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(r.$))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["app-breakdown-opener"]],inputs:{visible:"visible",isMultyChoose:"isMultyChoose"},outputs:{breakVisibleChanged:"breakVisibleChanged"},decls:2,vars:5,consts:[["dwTitle","\u6dfb\u52a0\u6545\u969c\u9879\u76ee",3,"dwBodyStyle","dwMaskClosable","dwWidth","dwVisible","dwVisibleChange","dwOnCancel","dwOnOk"],["dwModalContent",""],[1,"search-box-opener"],[1,"search",3,"click"],["dw-icon","","dwType","search","dwTheme","outline"],["dw-input","","type","text","placeholder","\u641c\u7d22",3,"ngModel","ngModelChange","keydown"],["class","close",3,"click",4,"ngIf"],["dw-row","",1,"wrapper"],["dw-col","",1,"left",3,"dwSpan"],[3,"class","click",4,"ngFor","ngForOf"],["class","right","dw-col","",3,"dwSpan",4,"ngIf"],[1,"close",3,"click"],["dw-icon","","dwTheme","fill","dwType","close-circle",1,"ant-input-clear-icon"],[3,"click"],["dw-col","",1,"right",3,"dwSpan"],[1,"dw-f-checkbox-list",3,"dwOnChange"],[3,"class",4,"ngFor","ngForOf"],["class","dw-f-checkbox-list-li",4,"ngFor","ngForOf"],[1,"dw-f-checkbox-list-li"],[1,"check"],["dw-checkbox","",3,"dwValue","ngModel","ngModelChange"],[1,"text"],[1,"dw-f-checkbox-list",3,"ngModel","ngModelChange"],["dw-radio","",3,"dwValue","ngModel","ngModelChange"]],template:function(e,t){1&e&&(i.\u0275\u0275elementStart(0,"dw-modal",0),i.\u0275\u0275listener("dwVisibleChange",function(e){return t.visible=e})("dwOnCancel",function(){return t.close()})("dwOnOk",function(){return t.chooseOk()}),i.\u0275\u0275template(1,_,10,6,"ng-template",1),i.\u0275\u0275elementEnd()),2&e&&i.\u0275\u0275property("dwBodyStyle",i.\u0275\u0275pureFunction0(4,y))("dwMaskClosable",!0)("dwWidth",710)("dwVisible",t.visible)},directives:[a.DwModalComponent,a.DwModalContentDirective,o.DwIconDirective,l.DwInputDirective,d.DefaultValueAccessor,d.NgControlStatus,d.NgModel,s.NgIf,c.DwRowDirective,c.DwColDirective,s.NgForOf,m.DwCheckboxWrapperComponent,m.DwCheckboxComponent,p.DwRadioGroupComponent,p.DwRadioComponent],styles:['.wrapper[_ngcontent-%COMP%]{width:100%;height:calc(100% - 32px - 16px);border:1px solid #d9d9d9}.wrapper[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]{height:100%;overflow-y:auto;background:#fbfbfb;border-right:1px solid #d9d9d9}.wrapper[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]{min-height:48px;padding:4px 8px 4px 24px;color:#00000073;font-size:14px;display:flex;align-items:center;word-break:break-all;cursor:pointer;position:relative}.wrapper[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .group.break-tab-on[_ngcontent-%COMP%]{color:#009bf2;font-weight:bold;background:#fff;border-bottom:1px solid #d9d9d9}.wrapper[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .group.break-tab-on[_ngcontent-%COMP%]:before{content:"";width:6px;height:100%;background:#009bf2;position:absolute;top:0;left:0}.wrapper[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{height:100%}.wrapper[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .dw-f-checkbox-list[_ngcontent-%COMP%]{width:100%;height:100%;overflow-y:auto;padding:0 12px 0 16px;position:relative}.wrapper[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .dw-f-checkbox-list[_ngcontent-%COMP%]   .r-wrap.hide[_ngcontent-%COMP%]{position:absolute;left:-9999px}.wrapper[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .dw-f-checkbox-list[_ngcontent-%COMP%]   .r-wrap[_ngcontent-%COMP%]   .dw-f-checkbox-list-li[_ngcontent-%COMP%]{height:34px;line-height:34px;display:flex}.wrapper[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .dw-f-checkbox-list[_ngcontent-%COMP%]   .r-wrap[_ngcontent-%COMP%]   .dw-f-checkbox-list-li[_ngcontent-%COMP%]   .check[_ngcontent-%COMP%]{width:20px;margin-right:8px}.wrapper[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .dw-f-checkbox-list[_ngcontent-%COMP%]   .r-wrap[_ngcontent-%COMP%]   .dw-f-checkbox-list-li[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{flex:1}.search-box-opener[_ngcontent-%COMP%]{margin-bottom:16px;position:relative}.search-box-opener[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]{width:30px;height:100%;display:flex;align-items:center;justify-content:center;position:absolute;top:0;left:0;z-index:2}.search-box-opener[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]   em[_ngcontent-%COMP%]{font-size:16px;color:#999}.search-box-opener[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{position:absolute;top:0;right:8px;font-size:20px}.search-box-opener[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]   .ant-input-clear-icon[_ngcontent-%COMP%]:last-child{font-size:16px}.search-box-opener[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;height:32px;background:#fff;border-radius:4px;padding:0 30px}']}),e})()},39288:function(e,t,n){n.d(t,{R:function(){return m}});var i=n(42746),r=n(45890),a=n(83237),o=n(51156),l=n(9682),d=n(47372);class s extends l.DwClientPagingDataSource{constructor(e,t){super(),this.dwHttp=e,this.url=t}getDataList(e,t){return this.dwHttp.get(this.url).pipe((0,d.map)(n=>{const i=n.data||n;return this._result={currentPage:e,datas:Object.assign([],i),pageCount:Math.ceil(i.length/t),pageSize:t,rowCount:i.length},this._result}))}}let c=(()=>{class e{constructor(e,t){this.dwHttp=e,this.selectModalService=t}setConfig(e){this.config={modalTitle:e.modalTitle,modalWidth:e.modalWidth,tableMultiSelect:e.multiSelect,tableIdField:e.tableIdField,tableNameField:e.tableNameField,returnFields:e.returnFields,tablePageSize:e.tablePageSize,tableColDefs:e.tableColDefs,tableCustomTag:e.tableCustomTag,dataSource:new s(e.dwHttp,e.dataSourceUrl)}}open(e){return this.selectModalService.open(this.config,e)}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(o.DwDapHttpClient),i.\u0275\u0275inject(l.DwSelectModalService))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),m=(()=>{class e{constructor(e,t,n){this.commonHttpService=e,this.message=t,this.openerService=n,this.selectedChanged=new i.EventEmitter}initData(e){this.openerService.setConfig(e),this.openerService.open([]).subscribe(e=>{null==e||0===e.length||this.selectedChanged.emit(e)})}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(r.$),i.\u0275\u0275directiveInject(a.DwMessageService),i.\u0275\u0275directiveInject(c))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["app-opener-frontend"]],outputs:{selectedChanged:"selectedChanged"},decls:0,vars:0,template:function(e,t){},styles:[""]}),e})()},59748:function(e,t,n){n.d(t,{l:function(){return l}});var i=n(16972),r=n(42746),a=n(55245);function o(e,t){1&e&&(r.\u0275\u0275elementStart(0,"span",1),r.\u0275\u0275text(1,"\u683c\u5f0f\u9519\u8bef"),r.\u0275\u0275elementEnd())}let l=(()=>{class e{constructor(){this.passValid=!0,this.warnType=""}validInput(){let e="";"email"===this.type&&(e=i.K.E_MAIL),"mobile"===this.type&&(e=i.K.MOBILE),"tele"===this.type&&(e=i.K.TEL),"mobileOrTele"===this.type&&(e=i.K.MOBILE_TEL),"fax"===this.type&&(e=i.K.FAX),""!==this.value?(this.passValid=!!e.exec(this.value),this.warnType=e.exec(this.value)?"":"error"):(this.passValid=!0,this.warnType="")}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r.\u0275\u0275defineComponent({type:e,selectors:[["app-valid-input"]],inputs:{type:"type",value:"value"},decls:1,vars:1,consts:[["class","valid-warn",4,"ngIf"],[1,"valid-warn"]],template:function(e,t){1&e&&r.\u0275\u0275template(0,o,2,0,"span",0),2&e&&r.\u0275\u0275property("ngIf",!t.passValid)},directives:[a.NgIf],styles:[""]}),e})()},16972:function(e,t,n){n.d(t,{K:function(){return i}});let i=(()=>{class e{}return e.E_MAIL=/^[a-zA-Z0-9_\-]{1,}@[a-zA-Z0-9_\-]{1,}\.[a-zA-Z0-9_\-.]{1,}$/,e.MOBILE=/^1[3456789]\d{9}$/,e.TEL=/^0\d{2,3}-?\d{7,8}$/,e.MOBILE_TEL=/^1[3456789]\d{9}$|^0\d{2,3}-?\d{7,8}$/,e.FAX=/^(\d{3,4}-)?\d{7,8}$/,e})()},45890:function(e,t,n){n.d(t,{$:function(){return o}});var i=n(51156),r=n(99487),a=n(42746);let o=(()=>{class e{constructor(e){this.dwDapHttpClient=e}get(e,t){const n=new r.HttpParams({fromObject:t});return this.dwDapHttpClient.get(e,{params:n})}post(e,t){return this.dwDapHttpClient.post(e,t)}put(e,t){return this.dwDapHttpClient.put(e,t)}delete(e,t){return this.dwDapHttpClient.request("DELETE",e,{body:t})}}return e.\u0275fac=function(t){return new(t||e)(a.\u0275\u0275inject(i.DwDapHttpClient))},e.\u0275prov=a.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},51033:function(e,t,n){n.d(t,{L:function(){return c}}),n(87974);var i=n(32276),r=n(51156),a=n(66800),o=n(83237),l=n(31441),d=n(71049),s=n(42746);let c=(()=>{class e{constructor(e,t,n,i,r){this.http=e,this.authService=t,this.userService=n,this.message=i,this.modalService=r,this.uerId=""}canLoad(e){return!0}canActivateChild(e,t){return!0}canActivate(e,t){return new d.Observable(e=>{this.uerId=this.userService.getUser("userId"),this.uerId?this.http.get(`restful/service/employee/Employee/ValidateIamUser?userId=${this.uerId}`).subscribe(t=>{t.success?(sessionStorage.setItem("employeeInfo",JSON.stringify(t.data?t.data.data:{})),e.next(!0)):(this.modalService.warning({dwTitle:"\u63d0\u793a",dwContent:t.data,dwWidth:"400px",dwOnOk:()=>{this.authService.logout(),window.location.reload()}}),e.next(!1))},t=>{console.log(t),t.hasOwnProperty("error")&&t.error.hasOwnProperty("errorMessage")&&t.error.errorMessage&&this.message.error(t.error.errorMessage),e.next(!1)}):e.next(!0)})}}return e.\u0275fac=function(t){return new(t||e)(s.\u0275\u0275inject(r.DwDapHttpClient),s.\u0275\u0275inject(i.DwAuthService),s.\u0275\u0275inject(a.DwUserService),s.\u0275\u0275inject(o.DwMessageService),s.\u0275\u0275inject(l.DwModalService))},e.\u0275prov=s.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},61937:function(e,t,n){n.d(t,{l:function(){return i}});class i{static order(e,...t){return e?[...e].sort((e,n)=>{let i=0,r=0;const a=t.length;for(let o=0;o<a;o++){const l=t[o][0],d=t[o][1]||1,s=Math.pow(2,a-o)*d;let c,m;l instanceof Function?(c=String(l(e)||""),m=String(l(n)||"")):(c=String(e[l]||""),m=String(n[l]||"")),1===c.localeCompare(m)?i+=s:-1===c.localeCompare(m)&&(r+=s)}return i-r}):[]}static crossPageCache(e,t,n,i){const r=e[i];if(r){const e=r[n];r.checked?t.includes(e)||t.push(e):t.includes(e)&&t.splice(t.indexOf(e),1)}}static crossPageCheck(e,t,n){for(const i of e)t.includes(i[n])?i.checked||(i.checked=!0):i.checked&&(i.checked=!1)}static parseJson(e){try{return JSON.parse(e)}catch(t){return null}}}},64762:function(e,t,n){n.d(t,{ZT:function(){return r},pi:function(){return a},_T:function(){return o},gn:function(){return l},fM:function(){return d},w6:function(){return s},mG:function(){return c},ev:function(){return m}});var i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var a=function(){return(a=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};function o(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}function l(e,t,n,i){var r,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(r=e[l])&&(o=(a<3?r(o):a>3?r(t,n,o):r(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o}function d(e,t){return function(n,i){t(n,i,e)}}function s(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function c(e,t,n,i){return new(n||(n=Promise))(function(r,a){function o(e){try{d(i.next(e))}catch(t){a(t)}}function l(e){try{d(i.throw(e))}catch(t){a(t)}}function d(e){e.done?r(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(o,l)}d((i=i.apply(e,t||[])).next())})}function m(e,t,n){if(n||2===arguments.length)for(var i,r=0,a=t.length;r<a;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))}}}]);