"use strict";(self.webpackChunkassc_crs=self.webpackChunkassc_crs||[]).push([[8069,1166],{98069:function(e,t,n){n.r(t),n.d(t,{DwUpdatePasswordModalComponent:function(){return Y},DwUpdatePasswordModalModule:function(){return K},DwUpdatePasswordModalService:function(){return J}});var r=n(42746),o=n(71049),i=n(31441),a=n(83522),s=n(1020),d=n(47372),l=n(30469),c=n(12146),p=n(66800),u=n(47483),w=n(32276),m=n(55245),h=n(85773),f=n(35626),g=n(93761),v=n(85277),C=n(67280),y=n(29872),E=n(96670),P=n(8852);function b(e,t){1&e&&(r.\u0275\u0275elementStart(0,"span",25),r.\u0275\u0275text(1,"dw-update-password-notice-mobilephone"),r.\u0275\u0275elementEnd())}function S(e,t){if(1&e&&(r.\u0275\u0275elementContainerStart(0),r.\u0275\u0275template(1,b,2,0,"span",24),r.\u0275\u0275elementContainerEnd()),2&e){const e=r.\u0275\u0275nextContext(2);r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",e.isOnlyMobilephone)}}function x(e,t){1&e&&(r.\u0275\u0275elementContainerStart(0),r.\u0275\u0275elementStart(1,"span",25),r.\u0275\u0275text(2,"dw-update-password-error-mailNotExist"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementContainerEnd())}function T(e,t){1&e&&(r.\u0275\u0275elementContainerStart(0),r.\u0275\u0275elementStart(1,"span",25),r.\u0275\u0275text(2,"dw-update-password-error-mobilephoneNotExist"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementContainerEnd())}function I(e,t){if(1&e&&r.\u0275\u0275element(0,"dw-option",26),2&e){const e=t.$implicit;r.\u0275\u0275property("dwLabel",e.label)("dwValue",e.value)}}function D(e,t){if(1&e){const e=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"dw-form-item",20),r.\u0275\u0275elementStart(1,"dw-form-control",6),r.\u0275\u0275template(2,S,2,1,"ng-container",21),r.\u0275\u0275template(3,x,3,0,"ng-container",21),r.\u0275\u0275template(4,T,3,0,"ng-container",21),r.\u0275\u0275elementStart(5,"dw-select",22),r.\u0275\u0275listener("ngModelChange",function(){return r.\u0275\u0275restoreView(e),r.\u0275\u0275nextContext().switVerification()}),r.\u0275\u0275template(6,I,1,2,"dw-option",23),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd()}if(2&e){const e=r.\u0275\u0275nextContext();r.\u0275\u0275advance(1),r.\u0275\u0275property("dwSpan",24),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",e.isOnlyMobilephone),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",e.updatePwdForm.get("selectVerification").hasError("mailNotExist")),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",e.updatePwdForm.get("selectVerification").hasError("mobilephoneNotExist")),r.\u0275\u0275advance(2),r.\u0275\u0275property("ngForOf",e.optionList)}}function O(e,t){1&e&&(r.\u0275\u0275elementStart(0,"span",7),r.\u0275\u0275text(1,"dw-update-password-getCode"),r.\u0275\u0275elementEnd())}const F=function(e){return{current:e}};function M(e,t){if(1&e&&(r.\u0275\u0275elementStart(0,"span",33),r.\u0275\u0275text(1,"dw-update-password-countDown"),r.\u0275\u0275elementEnd()),2&e){const e=r.\u0275\u0275nextContext(2);r.\u0275\u0275property("translateParams",r.\u0275\u0275pureFunction1(1,F,e.countDown))}}function N(e,t){1&e&&(r.\u0275\u0275elementContainerStart(0),r.\u0275\u0275elementStart(1,"span",7),r.\u0275\u0275text(2,"required"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementContainerEnd())}function k(e,t){if(1&e&&r.\u0275\u0275template(0,N,3,0,"ng-container",21),2&e){const e=r.\u0275\u0275nextContext(2);r.\u0275\u0275property("ngIf",e.updatePwdForm.get("verificationCode").dirty&&e.updatePwdForm.get("verificationCode").errors&&e.updatePwdForm.get("verificationCode").hasError("required"))}}function A(e,t){if(1&e){const e=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"dw-form-item",27),r.\u0275\u0275elementStart(1,"dw-form-control",6),r.\u0275\u0275elementStart(2,"button",28),r.\u0275\u0275listener("click",function(){return r.\u0275\u0275restoreView(e),r.\u0275\u0275nextContext().getCode()}),r.\u0275\u0275template(3,O,2,0,"span",29),r.\u0275\u0275template(4,M,2,3,"span",30),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(5,"dw-form-control",8),r.\u0275\u0275element(6,"input",31),r.\u0275\u0275pipe(7,"translate"),r.\u0275\u0275template(8,k,1,1,"ng-template",null,32,r.\u0275\u0275templateRefExtractor),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd()}if(2&e){const e=r.\u0275\u0275reference(9),t=r.\u0275\u0275nextContext();r.\u0275\u0275advance(1),r.\u0275\u0275property("dwSpan",12),r.\u0275\u0275advance(1),r.\u0275\u0275property("dwType","primary")("disabled",t.checkGetCodeDisabled()),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",!t.iscountDown),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",t.iscountDown),r.\u0275\u0275advance(1),r.\u0275\u0275property("dwSpan",12)("dwErrorTip",e),r.\u0275\u0275advance(1),r.\u0275\u0275property("placeholder",r.\u0275\u0275pipeBind1(7,8,"dw-update-password-enterCode"))}}function V(e,t){1&e&&(r.\u0275\u0275elementStart(0,"span",7),r.\u0275\u0275text(1,"required"),r.\u0275\u0275elementEnd())}function R(e,t){if(1&e&&(r.\u0275\u0275elementContainerStart(0),r.\u0275\u0275template(1,V,2,0,"span",29),r.\u0275\u0275elementContainerEnd()),2&e){const e=r.\u0275\u0275nextContext(3);r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",e.updatePwdForm.get("oldPassword").hasError("required"))}}function U(e,t){if(1&e&&r.\u0275\u0275template(0,R,2,1,"ng-container",21),2&e){const e=r.\u0275\u0275nextContext(2);r.\u0275\u0275property("ngIf",e.updatePwdForm.get("oldPassword").dirty&&e.updatePwdForm.get("oldPassword").errors)}}function j(e,t){if(1&e){const e=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"dw-form-item",5),r.\u0275\u0275elementStart(1,"dw-form-label",6),r.\u0275\u0275elementStart(2,"span",7),r.\u0275\u0275text(3,"dw-update-password-oldPassword"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(4,"dw-form-control",8),r.\u0275\u0275element(5,"input",34),r.\u0275\u0275pipe(6,"translate"),r.\u0275\u0275elementStart(7,"i",35),r.\u0275\u0275listener("click",function(){r.\u0275\u0275restoreView(e);const t=r.\u0275\u0275nextContext();return t.showPassword=!t.showPassword}),r.\u0275\u0275elementEnd(),r.\u0275\u0275template(8,U,1,1,"ng-template",null,36,r.\u0275\u0275templateRefExtractor),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd()}if(2&e){const e=r.\u0275\u0275reference(9),t=r.\u0275\u0275nextContext();r.\u0275\u0275advance(1),r.\u0275\u0275property("dwSpan",7),r.\u0275\u0275advance(3),r.\u0275\u0275property("dwSpan",17)("dwErrorTip",e),r.\u0275\u0275advance(1),r.\u0275\u0275property("type",t.showPassword?"text":"password")("placeholder",r.\u0275\u0275pipeBind1(6,6,"dw-update-password-enterOldPassword")),r.\u0275\u0275advance(2),r.\u0275\u0275property("dwType",t.showPassword?"eye-invisible":"eye")}}function L(e,t){if(1&e){const e=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"i",35),r.\u0275\u0275listener("click",function(){r.\u0275\u0275restoreView(e);const t=r.\u0275\u0275nextContext();return t.showPassword=!t.showPassword}),r.\u0275\u0275elementEnd()}if(2&e){const e=r.\u0275\u0275nextContext();r.\u0275\u0275property("dwType",e.showPassword?"eye-invisible":"eye")}}function _(e,t){1&e&&(r.\u0275\u0275elementStart(0,"span",7),r.\u0275\u0275text(1,"required"),r.\u0275\u0275elementEnd())}function q(e,t){1&e&&(r.\u0275\u0275elementStart(0,"span",7),r.\u0275\u0275text(1,"dw-update-password-passwordFormat"),r.\u0275\u0275elementEnd())}function B(e,t){if(1&e&&(r.\u0275\u0275elementContainerStart(0),r.\u0275\u0275template(1,_,2,0,"span",29),r.\u0275\u0275template(2,q,2,0,"span",29),r.\u0275\u0275elementContainerEnd()),2&e){const e=r.\u0275\u0275nextContext(2);r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",e.updatePwdForm.get("password").hasError("required")),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",e.updatePwdForm.get("password").hasError("userPasswordFormat"))}}function W(e,t){if(1&e&&r.\u0275\u0275template(0,B,3,2,"ng-container",21),2&e){const e=r.\u0275\u0275nextContext();r.\u0275\u0275property("ngIf",e.updatePwdForm.get("password").dirty&&e.updatePwdForm.get("password").errors)}}function G(e,t){1&e&&(r.\u0275\u0275elementContainerStart(0),r.\u0275\u0275elementStart(1,"span",7),r.\u0275\u0275text(2,"required"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementContainerEnd())}function z(e,t){1&e&&(r.\u0275\u0275elementContainerStart(0),r.\u0275\u0275elementStart(1,"span",7),r.\u0275\u0275text(2,"dw-update-password-passwordMismatch"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementContainerEnd())}function H(e,t){1&e&&(r.\u0275\u0275elementContainerStart(0),r.\u0275\u0275elementStart(1,"span",7),r.\u0275\u0275text(2,"dw-update-password-passwordFormat"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementContainerEnd())}function Z(e,t){if(1&e&&(r.\u0275\u0275elementContainerStart(0),r.\u0275\u0275template(1,G,3,0,"ng-container",21),r.\u0275\u0275template(2,z,3,0,"ng-container",21),r.\u0275\u0275template(3,H,3,0,"ng-container",21),r.\u0275\u0275elementContainerEnd()),2&e){const e=r.\u0275\u0275nextContext(2);r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",e.updatePwdForm.get("repassword").hasError("required")),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",e.updatePwdForm.get("repassword").hasError("userPasswordEqual")),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",e.updatePwdForm.get("repassword").hasError("userPasswordFormat"))}}function $(e,t){if(1&e&&r.\u0275\u0275template(0,Z,4,3,"ng-container",21),2&e){const e=r.\u0275\u0275nextContext();r.\u0275\u0275property("ngIf",e.updatePwdForm.get("repassword").dirty&&e.updatePwdForm.get("repassword").errors)}}let Y=(()=>{class e{constructor(e,t,n,r,i,a,s,d){this.userService=e,this.fb=t,this.dwUpdatePasswordService=n,this.dwModalService=r,this.translateService=i,this.modalRef=a,this.configService=s,this.authService=d,this.subscription=new o.Subscription,this.showPassword=!1,this.countDownDuration=60,this.iscountDown=!1,this.isButtLoading=!1,this.optionList=[],this.isOnlyMobilephone=!1,this.userInfo=null,this.userTypeEnum=c.DwUserTypeEnum,this.configService.get("multiTenant").subscribe(e=>this.dwMultiTenant=e),this.userType=this.userService.getUser("userType")}ngOnInit(){this.getOptionList(),this.formData={selectVerification:this.optionList[0].value,verificationCode:"",oldPassword:"",password:"",repassword:""},this.updatePwdForm=this.fb.group({}),this.updatePwdForm.addControl("selectVerification",new s.FormControl(this.formData.selectVerification,[s.Validators.required,this.validSelectVerification()])),this.updatePwdForm.addControl("verificationCode",new s.FormControl(this.formData.verificationCode,[s.Validators.required])),this.updatePwdForm.addControl("oldPassword",new s.FormControl(this.formData.oldPassword,[s.Validators.required])),this.updatePwdForm.addControl("password",new s.FormControl(this.formData.password,[s.Validators.required,this.validPasswordFormat(),this.validPasswordEqual()])),this.updatePwdForm.addControl("repassword",new s.FormControl(this.formData.repassword,[s.Validators.required,this.validPasswordFormat(),this.validRePasswordEqual()])),this.subscription.add(this.dwUpdatePasswordService.getUserBasicInfo().subscribe(e=>{this.userInfo=e,this.dwMultiTenant&&this.userType!==c.DwUserTypeEnum.INTERNAL&&(this.updatePwdForm.get("selectVerification").markAsTouched({onlySelf:!0}),this.updatePwdForm.get("selectVerification").markAsDirty({onlySelf:!0}),this.updatePwdForm.get("selectVerification").updateValueAndValidity())},e=>{e.hasOwnProperty("error")&&e.error.hasOwnProperty("errorMessage")&&e.error.errorMessage&&this.dwModalService.error({dwContent:e.error.errorMessage})})),this.subscription.add(this.authService.isLoggedIn$.subscribe(e=>{!e&&this.modalRef&&this.modalRef.triggerCancel()}))}ngOnDestroy(){this.subscription.unsubscribe()}ngAfterViewInit(){(!this.dwMultiTenant||this.userType===c.DwUserTypeEnum.INTERNAL)&&(this.updatePwdForm.removeControl("selectVerification"),this.updatePwdForm.removeControl("verificationCode")),(this.dwMultiTenant&&this.userType===c.DwUserTypeEnum.GENERAL||!this.dwMultiTenant)&&this.updatePwdForm.removeControl("oldPassword")}getOptionList(){const e=[{label:this.translateService.instant("dw-update-password-mailCode"),value:"email"},{label:this.translateService.instant("dw-update-password-mobileCode"),value:"mobilephone"}];"full"!==this.formConfig.verifyType?(e.forEach(e=>{this.formConfig.verifyType===e.value&&this.optionList.push(e)}),!(this.optionList.length>0)&&(this.optionList=e)):this.optionList=e}checkGetCodeDisabled(){return!(!this.iscountDown&&!this.updatePwdForm.get("selectVerification").errors&&this.checkUserInfo())}checkUserInfo(){return!(!this.userInfo||this.dwMultiTenant&&this.userType!==c.DwUserTypeEnum.INTERNAL&&(!this.userInfo.hasOwnProperty("email")&&!this.userInfo.hasOwnProperty("telephone")||!this.userInfo.email&&!this.userInfo.telephone))}getCodeByType(){return"email"===this.updatePwdForm.get("selectVerification").value?this.dwUpdatePasswordService.getVerificationCode("email",this.userInfo.email):this.dwUpdatePasswordService.getVerificationCode("mobilephone",this.userInfo.telephone)}getCode(){this.iscountDown=!0;const e=1e3,t=e,n=this.countDownDuration*e;this.countDown=this.countDownDuration,this.getCodeByType().subscribe(r=>{let i=this.translateService.instant("dw-update-password-confirmCodeSMS");"email"===this.updatePwdForm.get("selectVerification").value&&(i=this.translateService.instant("dw-update-password-confirmCodeMailbox")),this.dwModalService.success({dwTitle:this.translateService.instant("dw-update-password-sentSuccessfully"),dwContent:i}),(0,o.timer)(0,t).pipe((0,d.takeUntil)((0,o.timer)(n+t)),(0,d.map)(e=>n-e*t),(0,d.finalize)(()=>{this.countDown=this.countDownDuration,this.iscountDown=!1})).subscribe(t=>{this.countDown=t/e})},e=>{if(console.log("error>>>>",e),this.countDown=this.countDownDuration,this.iscountDown=!1,!(e.hasOwnProperty("error")&&e.error.hasOwnProperty("message")&&e.error.message))throw e;this.dwModalService.error({dwTitle:this.translateService.instant("dw-http-error"),dwContent:e.error.message})})}switVerification(){this.isOnlyMobilephone=!1,"mobilephone"===this.updatePwdForm.get("selectVerification").value&&(this.isOnlyMobilephone=!0)}emitFormData(){this.isButtLoading=!0,this.passwordUpdate().subscribe(e=>{this.dwModalService.success({dwTitle:this.translateService.instant("dw-update-password-sentSuccessfully"),dwContent:this.translateService.instant("dw-update-password-updatedSuccessfully"),dwOnOk:()=>{this.modalRef.triggerOk()}})},e=>{console.log("error>>>>",e),this.isButtLoading=!1,e.hasOwnProperty("error")&&e.error.hasOwnProperty("errorMessage")&&e.error.errorMessage&&this.dwModalService.error({dwContent:e.error.errorMessage})})}passwordUpdate(){return this.dwMultiTenant?this.userType===c.DwUserTypeEnum.INTERNAL?this.userUpdatePasswordWithOldPassword():this.userPasswordUpdate():this.userPasswordUpdateForce()}userPasswordUpdate(){const e="email"===this.updatePwdForm.get("selectVerification").value?this.userInfo.email:this.userInfo.telephone;return this.dwUpdatePasswordService.userPasswordUpdate({account:e,password:this.updatePwdForm.get("password").value,verificationCode:this.updatePwdForm.get("verificationCode").value})}userUpdatePasswordWithOldPassword(){return this.dwUpdatePasswordService.userUpdatePasswordWithOldPassword({id:this.userService.getUser("userId"),newPassword:this.updatePwdForm.get("password").value,oldPassword:this.updatePwdForm.get("oldPassword").value})}userPasswordUpdateForce(){const e=u.SHA256(this.updatePwdForm.get("password").value),t=u.SHA256(e),n=u.enc.Base64.stringify(t);return this.dwUpdatePasswordService.userPasswordUpdateForce({id:this.userService.getUser("userId"),newPasswordHash:n})}cancel(){this.modalRef.triggerCancel()}validSelectVerification(){return e=>{if(!e.value||!this.userInfo)return null;switch(e.value){case"email":if(!this.userInfo.hasOwnProperty("email")||!this.userInfo.email)return{mailNotExist:!0};break;case"mobilephone":if(!this.userInfo.hasOwnProperty("telephone")||!this.userInfo.telephone)return{mobilephoneNotExist:!0}}return null}}validPasswordEqual(){return e=>(e.value&&this.updatePwdForm.get("repassword").updateValueAndValidity(),null)}validRePasswordEqual(){return e=>e.value&&e.value!==this.updatePwdForm.get("password").value?{userPasswordEqual:!0}:null}validPasswordFormat(){return e=>e.value?new RegExp("^[0-9]*$").test(e.value)||new RegExp("^[a-zA-Z]*$").test(e.value)?{userPasswordFormat:!0}:new RegExp("^[0-9a-zA-Z]*$").test(e.value)?null:{userPasswordFormat:!0}:null}}return e.\u0275fac=function(t){return new(t||e)(r.\u0275\u0275directiveInject(p.DwUserService),r.\u0275\u0275directiveInject(s.FormBuilder),r.\u0275\u0275directiveInject(c.DwUpdatePasswordService),r.\u0275\u0275directiveInject(i.DwModalService),r.\u0275\u0275directiveInject(a.TranslateService),r.\u0275\u0275directiveInject(i.DwModalRef),r.\u0275\u0275directiveInject(l.DwSystemConfigService),r.\u0275\u0275directiveInject(w.DwAuthService))},e.\u0275cmp=r.\u0275\u0275defineComponent({type:e,selectors:[["app-update-password-modal"]],inputs:{formConfig:"formConfig"},decls:36,vars:25,consts:[["dw-form","",1,"update-password-form",3,"formGroup"],[1,"inputBlock"],["dw-row","",4,"ngIf"],["dw-row","","class","verification-block","dwGutter","8",4,"ngIf"],["dw-row","","class","dw-f-newpassword",4,"ngIf"],["dw-row","",1,"dw-f-newpassword"],["dw-col","",3,"dwSpan"],["translate",""],["dw-col","",3,"dwSpan","dwErrorTip"],["dw-input","","formControlName","password",3,"type","placeholder"],["dw-icon","","dwTheme","outline",3,"dwType","click",4,"ngIf"],["passwordErrorTpl",""],["dw-row","",1,"dw-f-confnewpassword"],["dw-input","","formControlName","repassword",3,"type","placeholder"],["repasswordErrorTpl",""],["dw-row","",1,"dw-f-loginagain"],["translate","",1,"textBlock"],["dw-row","",1,"customize-footer"],["dw-button","",3,"dwType","disabled","dwLoading","click"],["dw-button","","type","button",3,"dwType","click"],["dw-row",""],[4,"ngIf"],["formControlName","selectVerification",3,"ngModelChange"],[3,"dwLabel","dwValue",4,"ngFor","ngForOf"],["class","dw-f-tip-red","translate","",4,"ngIf"],["translate","",1,"dw-f-tip-red"],[3,"dwLabel","dwValue"],["dw-row","","dwGutter","8",1,"verification-block"],["dw-button","",2,"width","100%",3,"dwType","disabled","click"],["translate","",4,"ngIf"],["translate","",3,"translateParams",4,"ngIf"],["dw-input","","formControlName","verificationCode",3,"placeholder"],["verificationCodeErrorTpl",""],["translate","",3,"translateParams"],["dw-input","","formControlName","oldPassword",3,"type","placeholder"],["dw-icon","","dwTheme","outline",3,"dwType","click"],["oldPasswordErrorTpl",""]],template:function(e,t){if(1&e&&(r.\u0275\u0275elementStart(0,"form",0),r.\u0275\u0275elementStart(1,"div",1),r.\u0275\u0275template(2,D,7,5,"dw-form-item",2),r.\u0275\u0275template(3,A,10,10,"dw-form-item",3),r.\u0275\u0275template(4,j,10,8,"dw-form-item",4),r.\u0275\u0275elementStart(5,"dw-form-item",5),r.\u0275\u0275elementStart(6,"dw-form-label",6),r.\u0275\u0275elementStart(7,"span",7),r.\u0275\u0275text(8,"dw-update-password-newPassword"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(9,"dw-form-control",8),r.\u0275\u0275element(10,"input",9),r.\u0275\u0275pipe(11,"translate"),r.\u0275\u0275template(12,L,1,1,"i",10),r.\u0275\u0275template(13,W,1,1,"ng-template",null,11,r.\u0275\u0275templateRefExtractor),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(15,"dw-form-item",12),r.\u0275\u0275elementStart(16,"dw-form-label",6),r.\u0275\u0275elementStart(17,"span",7),r.\u0275\u0275text(18,"dw-update-password-confirmNewPassword"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(19,"dw-form-control",8),r.\u0275\u0275element(20,"input",13),r.\u0275\u0275pipe(21,"translate"),r.\u0275\u0275template(22,$,1,1,"ng-template",null,14,r.\u0275\u0275templateRefExtractor),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(24,"dw-form-item",15),r.\u0275\u0275elementStart(25,"dw-form-label",6),r.\u0275\u0275elementStart(26,"p",16),r.\u0275\u0275text(27,"dw-update-password-logInAgain"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(28,"dw-form-item",17),r.\u0275\u0275elementStart(29,"dw-form-control",6),r.\u0275\u0275elementStart(30,"button",18),r.\u0275\u0275listener("click",function(){return t.emitFormData()}),r.\u0275\u0275elementStart(31,"span",7),r.\u0275\u0275text(32,"dw-determine"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(33,"button",19),r.\u0275\u0275listener("click",function(){return t.cancel()}),r.\u0275\u0275elementStart(34,"span",7),r.\u0275\u0275text(35,"dw-cancel"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd()),2&e){const e=r.\u0275\u0275reference(14),n=r.\u0275\u0275reference(23);r.\u0275\u0275property("formGroup",t.updatePwdForm),r.\u0275\u0275advance(2),r.\u0275\u0275property("ngIf",t.dwMultiTenant&&t.userType!==t.userTypeEnum.INTERNAL),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",t.dwMultiTenant&&t.userType!==t.userTypeEnum.INTERNAL),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",t.dwMultiTenant&&t.userType===t.userTypeEnum.INTERNAL),r.\u0275\u0275advance(2),r.\u0275\u0275property("dwSpan",7),r.\u0275\u0275advance(3),r.\u0275\u0275property("dwSpan",17)("dwErrorTip",e),r.\u0275\u0275advance(1),r.\u0275\u0275property("type",t.showPassword?"text":"password")("placeholder",r.\u0275\u0275pipeBind1(11,21,"dw-update-password-enterNewPassword")),r.\u0275\u0275advance(2),r.\u0275\u0275property("ngIf",t.userType!==t.userTypeEnum.INTERNAL),r.\u0275\u0275advance(4),r.\u0275\u0275property("dwSpan",7),r.\u0275\u0275advance(3),r.\u0275\u0275property("dwSpan",17)("dwErrorTip",n),r.\u0275\u0275advance(1),r.\u0275\u0275property("type",t.showPassword?"text":"password")("placeholder",r.\u0275\u0275pipeBind1(21,23,"dw-update-password-enterNewPasswordAgain")),r.\u0275\u0275advance(5),r.\u0275\u0275property("dwSpan",24),r.\u0275\u0275advance(4),r.\u0275\u0275property("dwSpan",24),r.\u0275\u0275advance(1),r.\u0275\u0275property("dwType","primary")("disabled",!t.updatePwdForm.valid||!t.checkUserInfo())("dwLoading",t.isButtLoading),r.\u0275\u0275advance(3),r.\u0275\u0275property("dwType","default")}},directives:[s.\u0275NgNoValidate,s.NgControlStatusGroup,h.DwFormDirective,s.FormGroupDirective,m.NgIf,y.DwRowDirective,h.DwFormItemComponent,y.DwColDirective,h.DwFormLabelComponent,a.TranslateDirective,h.DwFormControlComponent,C.DwInputDirective,s.DefaultValueAccessor,s.NgControlStatus,s.FormControlName,g.DwButtonComponent,E.uG,P.u,f.DwSelectComponent,m.NgForOf,f.DwOptionComponent,v.DwIconDirective],pipes:[a.TranslatePipe],styles:["[_nghost-%COMP%]     .customize-footer{border-top:1px solid #e9e9e9;padding:10px 18px 0 10px;text-align:center;border-radius:0;margin-bottom:5px}dw-form-control[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{position:relative}dw-form-control[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:18px;padding:0 0 0 6px;line-height:32px;position:absolute;right:10px;top:4px;z-index:9;cursor:pointer}.tip-red[_ngcontent-%COMP%]   .ant-form-explain[_ngcontent-%COMP%]{color:#f5222d;transform:scale(.95)}.dw-f-tip-red[_ngcontent-%COMP%]{color:#f5222d}.textBlock[_ngcontent-%COMP%]{text-align:center;margin:1rem 0}.verification-block[_ngcontent-%COMP%]{padding-bottom:2rem;margin-bottom:2rem;border-bottom:1px dotted #d7d7d7}.verification-block[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{margin-top:1rem}.btn-verificationCode[_ngcontent-%COMP%]{font-size:.75rem;width:96%}i.anticon[_ngcontent-%COMP%]{font-size:18px;padding:0 0 0 6px;line-height:20px;position:absolute;right:10px;top:1px;z-index:9;cursor:pointer}i.anticon.error[_ngcontent-%COMP%]{color:#f5222d}i.anticon.success[_ngcontent-%COMP%]{color:#7cfc00}i.anticon.worning[_ngcontent-%COMP%]{color:#ff0}input.error[_ngcontent-%COMP%]{border-color:red}"]}),e})(),J=(()=>{class e{constructor(e,t){this.dwModalService=e,this.translateService=t}getDefaultConfig(){return{modalTitle:"dw-update-password-title",modalWidth:"40%",modalOkText:"dw-determine",modalCancelText:"dw-cancel",modalOnOk:()=>{},modalOnCancel:()=>{},modalAfterClose:()=>{},modalAfterOpen:()=>{},formVerifyType:"full"}}setEvents(){this.modalConfig.dwOnOk=e=>{this.modalSubject.next(!0),this.modalSubject.complete(),this.modalConfig.customOnOk()},this.modalConfig.dwOnCancel=e=>{this.modalSubject.complete(),this.modalConfig.customOnCancel()}}translateConfig(){this.modalConfig.dwTitle=this.translateService.instant(this.modalConfig.dwTitle),this.modalConfig.dwOkText=this.translateService.instant(this.modalConfig.dwOkText),this.modalConfig.dwCancelText=this.translateService.instant(this.modalConfig.dwCancelText)}createModal(){const e=Object.assign({dwTitle:this.modalConfig.dwTitle,dwContent:Y,dwFooter:null,dwComponentParams:{formConfig:this.formConfig}},this.modalConfig);return this.dwModalService.create(e)}setModalConfig(e){this.modalConfig=Object.assign({},{dwTitle:e.modalTitle,dwWidth:e.modalWidth,dwOkText:e.modalOkText,dwCancelText:e.modalCancelText,customOnOk:e.modalOnOk,customOnCancel:e.modalOnCancel,customAfterClose:e.modalAfterClose,customAfterOpen:e.modalAfterOpen})}setFormConfig(e){this.formConfig=Object.assign({},{verifyType:e.formVerifyType})}setConfig(e){const t=this.getDefaultConfig(),n=Object.assign(Object.assign({},t),e);this.setModalConfig(n),this.setFormConfig(n)}open(e={}){this.modalSubject=new o.Subject,this.setConfig(e),this.translateConfig(),this.setEvents();const t=this.createModal();return t.afterClose.subscribe(()=>{this.modalConfig.customAfterClose()}),t.afterOpen.subscribe(()=>{this.modalConfig.customAfterOpen()}),this.modalSubject.asObservable()}}return e.\u0275fac=function(t){return new(t||e)(r.\u0275\u0275inject(i.DwModalService),r.\u0275\u0275inject(a.TranslateService))},e.\u0275prov=r.\u0275\u0275defineInjectable({factory:function(){return new e(r.\u0275\u0275inject(i.DwModalService),r.\u0275\u0275inject(a.TranslateService))},token:e,providedIn:"root"}),e})(),K=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=r.\u0275\u0275defineInjector({imports:[[m.CommonModule,s.ReactiveFormsModule,h.DwFormModule,f.DwSelectModule,g.DwButtonModule,v.DwIconModule,C.DwInputModule,a.TranslateModule]]}),e})()},8852:function(e,t,n){n.d(t,{u:function(){return i},f:function(){return a}});var r=n(36535),o=n(42746);let i=(()=>{class e{constructor(e,t){this.elementRef=e,this.renderer=t,this.hidden=null,this.renderer.setAttribute(this.elementRef.nativeElement,"hidden","")}setHiddenAttribute(){this.hidden?this.renderer.setAttribute(this.elementRef.nativeElement,"hidden","string"==typeof this.hidden?this.hidden:""):this.renderer.removeAttribute(this.elementRef.nativeElement,"hidden")}ngOnChanges(){this.setHiddenAttribute()}ngAfterViewInit(){this.setHiddenAttribute()}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(o.ElementRef),o.\u0275\u0275directiveInject(o.Renderer2))},e.\u0275dir=o.\u0275\u0275defineDirective({type:e,selectors:[["","dw-button",""],["dw-button-group"],["","dw-icon",""],["","dw-menu-item",""],["","dw-submenu",""],["dw-select-top-control"],["dw-select-placeholder"],["dw-input-group"]],inputs:{hidden:"hidden"},features:[o.\u0275\u0275NgOnChangesFeature]}),e})(),a=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=o.\u0275\u0275defineInjector({imports:[[r.PlatformModule]]}),e})()},96670:function(e,t,n){n.d(t,{uG:function(){return l},ln:function(){return c}});var r=n(36535),o=n(42746),i=n(88065);class a{constructor(e,t,n,o){this.triggerElement=e,this.ngZone=t,this.insertExtraNode=n,this.platformId=o,this.waveTransitionDuration=400,this.styleForPseudo=null,this.extraNode=null,this.lastTime=0,this.onClick=e=>{!this.triggerElement||!this.triggerElement.getAttribute||this.triggerElement.getAttribute("disabled")||"INPUT"===e.target.tagName||this.triggerElement.className.indexOf("disabled")>=0||this.fadeOutWave()},this.platform=new r.Platform(this.platformId),this.clickHandler=this.onClick.bind(this),this.bindTriggerEvent()}get waveAttributeName(){return this.insertExtraNode?"ant-click-animating":"ant-click-animating-without-extra-node"}bindTriggerEvent(){this.platform.isBrowser&&this.ngZone.runOutsideAngular(()=>{this.removeTriggerEvent(),this.triggerElement&&this.triggerElement.addEventListener("click",this.clickHandler,!0)})}removeTriggerEvent(){this.triggerElement&&this.triggerElement.removeEventListener("click",this.clickHandler,!0)}removeStyleAndExtraNode(){this.styleForPseudo&&document.body.contains(this.styleForPseudo)&&(document.body.removeChild(this.styleForPseudo),this.styleForPseudo=null),this.insertExtraNode&&this.triggerElement.contains(this.extraNode)&&this.triggerElement.removeChild(this.extraNode)}destroy(){this.removeTriggerEvent(),this.removeStyleAndExtraNode()}fadeOutWave(){const e=this.triggerElement,t=this.getWaveColor(e);e.setAttribute(this.waveAttributeName,"true"),!(Date.now()<this.lastTime+this.waveTransitionDuration)&&(this.isValidColor(t)&&(this.styleForPseudo||(this.styleForPseudo=document.createElement("style")),this.styleForPseudo.innerHTML=`\n      [ant-click-animating-without-extra-node='true']::after, .ant-click-animating-node {\n        --antd-wave-shadow-color: ${t};\n      }`,document.body.appendChild(this.styleForPseudo)),this.insertExtraNode&&(this.extraNode||(this.extraNode=document.createElement("div")),this.extraNode.className="ant-click-animating-node",e.appendChild(this.extraNode)),this.lastTime=Date.now(),this.runTimeoutOutsideZone(()=>{e.removeAttribute(this.waveAttributeName),this.removeStyleAndExtraNode()},this.waveTransitionDuration))}isValidColor(e){return!!e&&"#ffffff"!==e&&"rgb(255, 255, 255)"!==e&&this.isNotGrey(e)&&!/rgba\(\d*, \d*, \d*, 0\)/.test(e)&&"transparent"!==e}isNotGrey(e){const t=e.match(/rgba?\((\d*), (\d*), (\d*)(, [\.\d]*)?\)/);return!(t&&t[1]&&t[2]&&t[3]&&t[1]===t[2]&&t[2]===t[3])}getWaveColor(e){const t=getComputedStyle(e);return t.getPropertyValue("border-top-color")||t.getPropertyValue("border-color")||t.getPropertyValue("background-color")}runTimeoutOutsideZone(e,t){this.ngZone.runOutsideAngular(()=>setTimeout(e,t))}}const s={disabled:!1},d=new o.InjectionToken("dw-wave-global-options",{providedIn:"root",factory:function(){return s}});let l=(()=>{class e{constructor(e,t,n,r,o){this.ngZone=e,this.elementRef=t,this.config=n,this.animationType=r,this.platformId=o,this.dwWaveExtraNode=!1,this.waveDisabled=!1,this.waveDisabled=this.isConfigDisabled()}get disabled(){return this.waveDisabled}get rendererRef(){return this.waveRenderer}isConfigDisabled(){let e=!1;return this.config&&"boolean"==typeof this.config.disabled&&(e=this.config.disabled),"NoopAnimations"===this.animationType&&(e=!0),e}ngOnDestroy(){this.waveRenderer&&this.waveRenderer.destroy()}ngOnInit(){this.renderWaveIfEnabled()}renderWaveIfEnabled(){!this.waveDisabled&&this.elementRef.nativeElement&&(this.waveRenderer=new a(this.elementRef.nativeElement,this.ngZone,this.dwWaveExtraNode,this.platformId))}disable(){this.waveDisabled=!0,this.waveRenderer&&(this.waveRenderer.removeTriggerEvent(),this.waveRenderer.removeStyleAndExtraNode())}enable(){this.waveDisabled=this.isConfigDisabled()||!1,this.waveRenderer&&this.waveRenderer.bindTriggerEvent()}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(o.NgZone),o.\u0275\u0275directiveInject(o.ElementRef),o.\u0275\u0275directiveInject(d,8),o.\u0275\u0275directiveInject(i.ANIMATION_MODULE_TYPE,8),o.\u0275\u0275directiveInject(o.PLATFORM_ID))},e.\u0275dir=o.\u0275\u0275defineDirective({type:e,selectors:[["","dw-wave",""],["button","dw-button","",3,"dwType","link",3,"dwType","text"]],inputs:{dwWaveExtraNode:"dwWaveExtraNode"},exportAs:["dwWave"]}),e})(),c=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=o.\u0275\u0275defineInjector({imports:[[r.PlatformModule]]}),e})()}}]);