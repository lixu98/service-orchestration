!function(){"use strict";function e(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(d){l=!0,o=d}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}(e,t)||n(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e){return function(e){if(Array.isArray(e))return r(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||n(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(self.webpackChunkassc_crs=self.webpackChunkassc_crs||[]).push([[6996,5953],{66996:function(n,r,a){a.r(r),a.d(r,{DwAccountInfoComponent:function(){return Q},DwAccountInfoModule:function(){return X}});var l=a(42746),d=a(55245),s=a(1020),c=a(83522),u=a(67733),p=a(85773),m=a(80677),f=a(67280),h=a(35626),w=a(82542),g=a(93761),v=a(29872),y=a(74591),b=a(71049),S=a(47372),I=a(31441),C=a(12146),x=a(44720),E=a(30469),O=a(21656),k=a(96670),P=a(8852);function D(e,t){1&e&&l.\u0275\u0275element(0,"img",17)}var M=function(){return{showPreviewIcon:!1,showRemoveIcon:!0}};function F(e,t){if(1&e){var n=l.\u0275\u0275getCurrentView();l.\u0275\u0275elementStart(0,"dw-upload",18),l.\u0275\u0275listener("dwFileListChange",function(e){return l.\u0275\u0275restoreView(n),l.\u0275\u0275nextContext(2).headImage=e}),l.\u0275\u0275elementStart(1,"p",19),l.\u0275\u0275element(2,"i",20),l.\u0275\u0275elementEnd(),l.\u0275\u0275elementStart(3,"p",21),l.\u0275\u0275text(4),l.\u0275\u0275pipe(5,"translate"),l.\u0275\u0275elementEnd(),l.\u0275\u0275elementEnd()}if(2&e){var r=l.\u0275\u0275nextContext(2);l.\u0275\u0275property("dwBeforeUpload",r.beforeLogoUpload)("dwRemove",r.remove)("dwShowUploadList",l.\u0275\u0275pureFunction0(9,M))("dwFileList",r.headImage)("dwShowButton",r.headImage.length<1)("dwMultiple",!1),l.\u0275\u0275advance(4),l.\u0275\u0275textInterpolate(l.\u0275\u0275pipeBind1(5,7,"dw-account-info-upload"))}}function _(e,t){if(1&e){var n=l.\u0275\u0275getCurrentView();l.\u0275\u0275elementStart(0,"div",22),l.\u0275\u0275elementStart(1,"button",23),l.\u0275\u0275listener("click",function(){return l.\u0275\u0275restoreView(n),l.\u0275\u0275nextContext(2).updatePassword()}),l.\u0275\u0275elementStart(2,"span",16),l.\u0275\u0275text(3),l.\u0275\u0275pipe(4,"translate"),l.\u0275\u0275elementEnd(),l.\u0275\u0275elementEnd(),l.\u0275\u0275elementEnd()}2&e&&(l.\u0275\u0275advance(1),l.\u0275\u0275property("dwType","primary"),l.\u0275\u0275advance(2),l.\u0275\u0275textInterpolate(l.\u0275\u0275pipeBind1(4,2,"dw-account-info-updatePassword")))}function N(e,t){if(1&e&&(l.\u0275\u0275elementContainerStart(0),l.\u0275\u0275elementStart(1,"dw-form-item"),l.\u0275\u0275elementStart(2,"dw-form-control",27),l.\u0275\u0275elementStart(3,"label",28),l.\u0275\u0275text(4),l.\u0275\u0275pipe(5,"translate"),l.\u0275\u0275elementEnd(),l.\u0275\u0275elementEnd(),l.\u0275\u0275elementEnd(),l.\u0275\u0275elementContainerEnd()),2&e){var n=l.\u0275\u0275nextContext().$implicit;l.\u0275\u0275advance(2),l.\u0275\u0275property("dwSpan",n.grid.inputSpan)("dwOffset",n.grid.labelSpan),l.\u0275\u0275advance(1),l.\u0275\u0275property("formControlName",n.name),l.\u0275\u0275advance(1),l.\u0275\u0275textInterpolate(l.\u0275\u0275pipeBind1(5,4,n.label))}}function V(e,t){if(1&e&&(l.\u0275\u0275elementContainerStart(0),l.\u0275\u0275elementStart(1,"dw-form-item"),l.\u0275\u0275elementStart(2,"dw-form-label",29),l.\u0275\u0275text(3),l.\u0275\u0275pipe(4,"translate"),l.\u0275\u0275elementEnd(),l.\u0275\u0275elementStart(5,"dw-form-control",29),l.\u0275\u0275text(6),l.\u0275\u0275elementEnd(),l.\u0275\u0275elementEnd(),l.\u0275\u0275elementContainerEnd()),2&e){var n=l.\u0275\u0275nextContext().$implicit,r=l.\u0275\u0275nextContext(2);l.\u0275\u0275advance(2),l.\u0275\u0275property("dwSpan",n.grid.labelSpan),l.\u0275\u0275advance(1),l.\u0275\u0275textInterpolate1(" ",l.\u0275\u0275pipeBind1(4,4,n.label)," "),l.\u0275\u0275advance(2),l.\u0275\u0275property("dwSpan",n.grid.inputSpan),l.\u0275\u0275advance(1),l.\u0275\u0275textInterpolate1(" ",r.accountInfoForm.get(n.name).value," ")}}function T(e,t){if(1&e&&(l.\u0275\u0275elementContainerStart(0),l.\u0275\u0275elementStart(1,"label",31),l.\u0275\u0275text(2),l.\u0275\u0275pipe(3,"translate"),l.\u0275\u0275elementEnd(),l.\u0275\u0275elementContainerEnd()),2&e){var n=t.$implicit;l.\u0275\u0275advance(1),l.\u0275\u0275property("dwValue",n.value),l.\u0275\u0275advance(1),l.\u0275\u0275textInterpolate(l.\u0275\u0275pipeBind1(3,2,n.label))}}function U(e,t){if(1&e&&(l.\u0275\u0275elementContainerStart(0),l.\u0275\u0275elementStart(1,"dw-form-item"),l.\u0275\u0275elementStart(2,"dw-form-label",29),l.\u0275\u0275text(3),l.\u0275\u0275pipe(4,"translate"),l.\u0275\u0275elementEnd(),l.\u0275\u0275elementStart(5,"dw-form-control",29),l.\u0275\u0275elementStart(6,"dw-radio-group",30),l.\u0275\u0275template(7,T,4,4,"ng-container",11),l.\u0275\u0275elementEnd(),l.\u0275\u0275elementEnd(),l.\u0275\u0275elementEnd(),l.\u0275\u0275elementContainerEnd()),2&e){var n=l.\u0275\u0275nextContext().$implicit;l.\u0275\u0275advance(2),l.\u0275\u0275property("dwSpan",n.grid.labelSpan),l.\u0275\u0275advance(1),l.\u0275\u0275textInterpolate1(" ",l.\u0275\u0275pipeBind1(4,5,n.label)," "),l.\u0275\u0275advance(2),l.\u0275\u0275property("dwSpan",n.grid.inputSpan),l.\u0275\u0275advance(1),l.\u0275\u0275property("formControlName",n.name),l.\u0275\u0275advance(1),l.\u0275\u0275property("ngForOf",n.option)}}function A(e,t){if(1&e&&(l.\u0275\u0275elementContainerStart(0),l.\u0275\u0275element(1,"dw-form-select",32),l.\u0275\u0275pipe(2,"translate"),l.\u0275\u0275pipe(3,"translate"),l.\u0275\u0275elementContainerEnd()),2&e){var n=l.\u0275\u0275nextContext().$implicit;l.\u0275\u0275advance(1),l.\u0275\u0275property("dwOptionList",n.option)("dwMode",n.selectMode)("formControlName",n.name)("dwLabel",l.\u0275\u0275pipeBind1(2,8,n.label))("dwShowSearch",n.selectShowSearch)("dwPlaceHolder",l.\u0275\u0275pipeBind1(3,10,n.placeHolder))("dwLabelSpan",n.grid.labelSpan)("dwInputSpan",n.grid.inputSpan)}}function L(e,t){if(1&e&&(l.\u0275\u0275elementContainerStart(0),l.\u0275\u0275element(1,"dw-form-date-picker",33),l.\u0275\u0275pipe(2,"translate"),l.\u0275\u0275pipe(3,"translate"),l.\u0275\u0275elementContainerEnd()),2&e){var n=l.\u0275\u0275nextContext().$implicit;l.\u0275\u0275advance(1),l.\u0275\u0275property("formControlName",n.name)("dwLabel",l.\u0275\u0275pipeBind1(2,6,n.label))("dwPlaceHolder",l.\u0275\u0275pipeBind1(3,8,n.placeHolder))("dwLabelSpan",n.grid.labelSpan)("dwInputSpan",n.grid.inputSpan)("dwDisabled",n.disabled)}}function R(e,t){if(1&e&&(l.\u0275\u0275elementContainerStart(0),l.\u0275\u0275element(1,"dw-option",42),l.\u0275\u0275elementContainerEnd()),2&e){var n=t.$implicit;l.\u0275\u0275advance(1),l.\u0275\u0275property("dwLabel",n.label)("dwValue",n.value)}}function B(e,t){if(1&e&&(l.\u0275\u0275elementStart(0,"dw-select",41),l.\u0275\u0275template(1,R,2,2,"ng-container",11),l.\u0275\u0275elementEnd()),2&e){var n=l.\u0275\u0275nextContext(3).$implicit;l.\u0275\u0275property("formControlName",n.prefix.name)("dwDisabled",n.disabled),l.\u0275\u0275advance(1),l.\u0275\u0275property("ngForOf",n.prefix.option)}}function j(e,t){if(1&e){var n=l.\u0275\u0275getCurrentView();l.\u0275\u0275elementContainerStart(0),l.\u0275\u0275elementStart(1,"dw-input-group",38),l.\u0275\u0275template(2,B,2,3,"ng-template",null,39,l.\u0275\u0275templateRefExtractor),l.\u0275\u0275elementStart(4,"input",40),l.\u0275\u0275listener("ngModelChange",function(){return l.\u0275\u0275restoreView(n),l.\u0275\u0275nextContext(4).onPhoneChanged()}),l.\u0275\u0275pipe(5,"translate"),l.\u0275\u0275elementEnd(),l.\u0275\u0275elementEnd(),l.\u0275\u0275elementContainerEnd()}if(2&e){var r=l.\u0275\u0275reference(3),o=l.\u0275\u0275nextContext(2).$implicit;l.\u0275\u0275advance(1),l.\u0275\u0275property("dwAddOnBefore",r),l.\u0275\u0275advance(3),l.\u0275\u0275property("formControlName",o.name)("placeholder",l.\u0275\u0275pipeBind1(5,3,o.placeHolder))}}function H(e,t){if(1&e&&(l.\u0275\u0275elementStart(0,"span"),l.\u0275\u0275text(1),l.\u0275\u0275pipe(2,"translate"),l.\u0275\u0275elementEnd()),2&e){var n=t.$implicit;l.\u0275\u0275advance(1),l.\u0275\u0275textInterpolate1(" ",l.\u0275\u0275pipeBind2(2,1,n.key,n.value)," ")}}function $(e,t){if(1&e&&(l.\u0275\u0275elementContainerStart(0),l.\u0275\u0275template(1,H,3,4,"span",11),l.\u0275\u0275pipe(2,"keyvalue"),l.\u0275\u0275elementContainerEnd()),2&e){var n=l.\u0275\u0275nextContext(3).$implicit,r=l.\u0275\u0275nextContext(2);l.\u0275\u0275advance(1),l.\u0275\u0275property("ngForOf",l.\u0275\u0275pipeBind1(2,1,r.accountInfoForm.get(n.prefix.name).errors))}}function q(e,t){if(1&e&&(l.\u0275\u0275elementStart(0,"span"),l.\u0275\u0275text(1),l.\u0275\u0275pipe(2,"translate"),l.\u0275\u0275elementEnd()),2&e){var n=t.$implicit;l.\u0275\u0275advance(1),l.\u0275\u0275textInterpolate1(" ",l.\u0275\u0275pipeBind2(2,1,n.key,n.value)," ")}}function G(e,t){if(1&e&&(l.\u0275\u0275elementContainerStart(0),l.\u0275\u0275template(1,q,3,4,"span",11),l.\u0275\u0275pipe(2,"keyvalue"),l.\u0275\u0275elementContainerEnd()),2&e){var n=l.\u0275\u0275nextContext(3).$implicit,r=l.\u0275\u0275nextContext(2);l.\u0275\u0275advance(1),l.\u0275\u0275property("ngForOf",l.\u0275\u0275pipeBind1(2,1,r.accountInfoForm.get(n.name).errors))}}function W(e,t){if(1&e&&(l.\u0275\u0275template(0,$,3,3,"ng-container",36),l.\u0275\u0275template(1,G,3,3,"ng-container",36)),2&e){var n=l.\u0275\u0275nextContext(2).$implicit,r=l.\u0275\u0275nextContext(2);l.\u0275\u0275property("ngIf",r.accountInfoForm.get(n.name).dirty&&r.accountInfoForm.get(n.prefix.name).errors),l.\u0275\u0275advance(1),l.\u0275\u0275property("ngIf",r.accountInfoForm.get(n.name).dirty&&r.accountInfoForm.get(n.name).errors)}}function Z(e,t){if(1&e&&(l.\u0275\u0275elementContainerStart(0),l.\u0275\u0275elementStart(1,"dw-form-item",10),l.\u0275\u0275elementStart(2,"dw-form-label",34),l.\u0275\u0275text(3),l.\u0275\u0275pipe(4,"translate"),l.\u0275\u0275elementEnd(),l.\u0275\u0275elementStart(5,"dw-form-control",35),l.\u0275\u0275template(6,j,6,5,"ng-container",36),l.\u0275\u0275template(7,W,2,2,"ng-template",null,37,l.\u0275\u0275templateRefExtractor),l.\u0275\u0275elementEnd(),l.\u0275\u0275elementEnd(),l.\u0275\u0275elementContainerEnd()),2&e){var n=l.\u0275\u0275reference(8),r=l.\u0275\u0275nextContext().$implicit,o=l.\u0275\u0275nextContext(2);l.\u0275\u0275advance(2),l.\u0275\u0275property("dwSpan",r.grid.labelSpan)("dwRequired",r.required),l.\u0275\u0275advance(1),l.\u0275\u0275textInterpolate1(" ",l.\u0275\u0275pipeBind1(4,7,r.label)," "),l.\u0275\u0275advance(2),l.\u0275\u0275property("dwSpan",r.grid.inputSpan)("dwValidateStatus",o.checkPhoneError(r.required))("dwErrorTip",n),l.\u0275\u0275advance(1),l.\u0275\u0275property("ngIf","prefixSelect"===r.prefix.type)}}function z(e,t){if(1&e&&(l.\u0275\u0275elementContainerStart(0),l.\u0275\u0275element(1,"dw-form-input",43),l.\u0275\u0275pipe(2,"translate"),l.\u0275\u0275pipe(3,"translate"),l.\u0275\u0275elementContainerEnd()),2&e){var n=l.\u0275\u0275nextContext().$implicit;l.\u0275\u0275advance(1),l.\u0275\u0275property("formControlName",n.name)("dwLabel",l.\u0275\u0275pipeBind1(2,6,n.label))("dwPlaceHolder",l.\u0275\u0275pipeBind1(3,8,n.placeHolder))("dwLabelSpan",n.grid.labelSpan)("dwInputSpan",n.grid.inputSpan)("dwRequired",n.required)}}function J(e,t){if(1&e&&(l.\u0275\u0275elementContainerStart(0),l.\u0275\u0275elementStart(1,"div",12),l.\u0275\u0275elementContainerStart(2,24),l.\u0275\u0275template(3,N,6,6,"ng-container",25),l.\u0275\u0275template(4,V,7,6,"ng-container",25),l.\u0275\u0275template(5,U,8,7,"ng-container",25),l.\u0275\u0275template(6,A,4,12,"ng-container",25),l.\u0275\u0275template(7,L,4,10,"ng-container",25),l.\u0275\u0275template(8,Z,9,9,"ng-container",25),l.\u0275\u0275template(9,z,4,10,"ng-container",26),l.\u0275\u0275elementContainerEnd(),l.\u0275\u0275elementEnd(),l.\u0275\u0275elementContainerEnd()),2&e){var n=t.$implicit;l.\u0275\u0275advance(1),l.\u0275\u0275property("dwSpan",n.grid.colSpan),l.\u0275\u0275advance(1),l.\u0275\u0275property("ngSwitch",n.type),l.\u0275\u0275advance(1),l.\u0275\u0275property("ngSwitchCase","checkbox"),l.\u0275\u0275advance(1),l.\u0275\u0275property("ngSwitchCase","label"),l.\u0275\u0275advance(1),l.\u0275\u0275property("ngSwitchCase","radio"),l.\u0275\u0275advance(1),l.\u0275\u0275property("ngSwitchCase","select"),l.\u0275\u0275advance(1),l.\u0275\u0275property("ngSwitchCase","date"),l.\u0275\u0275advance(1),l.\u0275\u0275property("ngSwitchCase","phone")}}function K(e,t){if(1&e){var n=l.\u0275\u0275getCurrentView();l.\u0275\u0275elementStart(0,"dw-content",1),l.\u0275\u0275elementStart(1,"form",2),l.\u0275\u0275elementStart(2,"div",3),l.\u0275\u0275elementStart(3,"div",4),l.\u0275\u0275elementStart(4,"div",5),l.\u0275\u0275template(5,D,1,0,"img",6),l.\u0275\u0275template(6,F,6,10,"dw-upload",7),l.\u0275\u0275elementEnd(),l.\u0275\u0275template(7,_,5,4,"div",8),l.\u0275\u0275elementEnd(),l.\u0275\u0275elementStart(8,"div",9),l.\u0275\u0275elementStart(9,"div",10),l.\u0275\u0275template(10,J,10,8,"ng-container",11),l.\u0275\u0275elementEnd(),l.\u0275\u0275elementStart(11,"div",10),l.\u0275\u0275elementStart(12,"div",12),l.\u0275\u0275elementStart(13,"dw-form-item",13),l.\u0275\u0275elementStart(14,"dw-form-control",14),l.\u0275\u0275elementStart(15,"button",15),l.\u0275\u0275listener("click",function(){return l.\u0275\u0275restoreView(n),l.\u0275\u0275nextContext().saveFormData()}),l.\u0275\u0275elementStart(16,"span",16),l.\u0275\u0275text(17,"dw-account-info-save"),l.\u0275\u0275elementEnd(),l.\u0275\u0275elementEnd(),l.\u0275\u0275elementEnd(),l.\u0275\u0275elementEnd(),l.\u0275\u0275elementEnd(),l.\u0275\u0275elementEnd(),l.\u0275\u0275elementEnd(),l.\u0275\u0275elementEnd(),l.\u0275\u0275elementEnd(),l.\u0275\u0275elementEnd()}if(2&e){var r=l.\u0275\u0275nextContext();l.\u0275\u0275advance(1),l.\u0275\u0275property("formGroup",r.accountInfoForm),l.\u0275\u0275advance(4),l.\u0275\u0275property("ngIf",!r.isUseHeadImage),l.\u0275\u0275advance(1),l.\u0275\u0275property("ngIf",r.isUseHeadImage),l.\u0275\u0275advance(1),l.\u0275\u0275property("ngIf",r.isUseUpdatePassword),l.\u0275\u0275advance(3),l.\u0275\u0275property("ngForOf",r.formOption),l.\u0275\u0275advance(2),l.\u0275\u0275property("dwSpan",24),l.\u0275\u0275advance(3),l.\u0275\u0275property("dwType","primary")("disabled",!r.accountInfoForm.valid)("dwLoading",r.isButtLoading)}}var Y,Q=((Y=function(){function n(e,t,r,a,i,d,s,c,u){var p=this;o(this,n),this.fb=e,this.accountInfoService=t,this.accountInfoDataSourceService=r,this.accountInfoUploadService=a,this.dwModalService=i,this.dwUpdatePasswordModalService=d,this.translateService=s,this.configService=c,this.dwDateFormat=u,this.isShowForm=!1,this.headImage=[],this.isButtLoading=!1,this.cellphonePrefixRequired=!1,this._formOption=[],this._userInfo=null,this._isUseHeadImage=!0,this._isUseUpdatePassword=!0,this.userInfoValue=new l.EventEmitter,this.beforeLogoUpload=function(e){var t=new b.Subject,n=new FileReader,r=p.fileToObject(e);return n.addEventListener("load",function(){r.thumbUrl=n.result,p.headImage=[r],t.next(!1)}),n.readAsDataURL(e),r.status="done",t.asObservable()},this.remove=function(e){return new b.Observable(function(e){p.headImage=[],p._userInfo.headImageUrl="",e.next(!0),e.complete()})},this.configService.get("multiTenant").subscribe(function(e){p.dwMultiTenant=e})}return i(n,[{key:"isUseHeadImage",get:function(){return this._isUseHeadImage},set:function(e){this._isUseHeadImage="string"==typeof e?JSON.parse(e):e}},{key:"isUseUpdatePassword",get:function(){return this._isUseUpdatePassword},set:function(e){this._isUseUpdatePassword="string"==typeof e?JSON.parse(e):e}},{key:"formOption",get:function(){return this._formOption},set:function(e){this._formOption=this.accountInfoService.getFullConfig(e)}},{key:"ngOnInit",value:function(){var e=this,t=[this.getRxjsFormOption(),this.accountInfoDataSourceService.getUserBasicInfo()];(0,b.forkJoin)(t).subscribe(function(t){e.formOption=t[0],e._userInfo=t[1],e.userInfoValue.emit(e._userInfo),e.accountInfoForm=e.fb.group({}),e.formOption.forEach(function(t){e.setFormControl(t),t.hasOwnProperty("prefix")&&e.setFormControl(t.prefix)}),e.formOption.hasOwnProperty("telephone")&&e.formOption.telephone.hasOwnProperty("cellphonePrefix")&&(e.cellphonePrefixRequired=e.formOption.telephone.cellphonePrefix.required),e._userInfo.hasOwnProperty("headImageUrl")&&e._userInfo.headImageUrl&&(e.headImage=[{url:e._userInfo.headImageUrl}]),e.isShowForm=!0},function(t){t.hasOwnProperty("error")&&t.error.hasOwnProperty("errorMessage")&&t.error.errorMessage&&e.dwModalService.error({dwContent:t.error.errorMessage})})}},{key:"getRxjsFormOption",value:function(){return null===this.formOption$?(0,b.of)(this.accountInfoService.getDefaultConfig()):this.formOption$}},{key:"setFormControl",value:function(e){var n="";this._userInfo.hasOwnProperty(e.name)&&(n=this._userInfo[e.name]),"select"===e.type&&(n=this._userInfo[e.name]?this._userInfo[e.name]:[]),"checkbox"===e.type&&(n="boolean"==typeof n&&n),this.accountInfoForm.addControl(e.name,new s.FormControl(n)),e.disabled&&this.accountInfoForm.get(e.name).disable(),this.getDefaultValidators(e),!0===e.required?("checkbox"===e.type?this.accountInfoForm.get(e.name).setValidators([].concat(t(e.validators),[s.Validators.requiredTrue])):this.accountInfoForm.get(e.name).setValidators([].concat(t(e.validators),[s.Validators.required])),e.asyncValidators.length>0&&this.accountInfoForm.get(e.name).setAsyncValidators(t(e.asyncValidators))):(e.validators.length&&this.accountInfoForm.get(e.name).setValidators(t(e.validators)),e.asyncValidators.length>0&&this.accountInfoForm.get(e.name).setAsyncValidators(t(e.asyncValidators)))}},{key:"getDefaultValidators",value:function(e){if(!this.formOption$)switch(e.name){case"email":Object.assign(e,{validators:[s.Validators.email]}),this.dwMultiTenant&&(e.hasOwnProperty("asyncValidators")?e.asyncValidators.push(this.accountInfoService.verifyEmailExist(this._userInfo)):e.asyncValidators=[this.accountInfoService.verifyEmailExist(this._userInfo)]);break;case"telephone":Object.assign(e,{validators:[s.Validators.minLength(10),s.Validators.maxLength(11),this.accountInfoService.userMobilephoneNumeric()]}),this.dwMultiTenant&&(e.hasOwnProperty("asyncValidators")?e.asyncValidators.push(this.accountInfoService.verifyMobilephone(this._userInfo)):e.asyncValidators=[this.accountInfoService.verifyMobilephone(this._userInfo)])}}},{key:"onPhoneChanged",value:function(){if(this.dwMultiTenant){var e=this.accountInfoForm.get("telephone"),t=this.accountInfoForm.get("cellphonePrefix");e.dirty&&!e.errors&&e.value?t.setValidators([s.Validators.required]):this.cellphonePrefixRequired||t.setValidators([]),t.updateValueAndValidity()}}},{key:"checkPhoneError",value:function(e){var t=this.accountInfoForm.get("telephone"),n=this.accountInfoForm.get("cellphonePrefix");if((t.dirty||n.dirty)&&(t.errors||n.errors))return"error"}},{key:"fileToObject",value:function(e){return{lastModified:e.lastModified,lastModifiedDate:e.lastModifiedDate,name:e.filename||e.name,size:e.size,type:e.type,uid:e.uid,response:e.response,error:e.error,percent:0,originFileObj:e}}},{key:"getFormValue",value:function(){for(var t=this.accountInfoForm.getRawValue(),n=0,r=Object.entries(t);n<r.length;n++){var o=e(r[n],2),a=o[0],i=o[1];i instanceof Date&&(i=new d.DatePipe("zh_tw").transform(i,this.dwDateFormat)),Array.isArray(i)&&(i=i.toString()),this._userInfo[a]=i}}},{key:"getPostValue",value:function(){for(var e={},t=0,n=Object.keys(this.accountInfoForm.controls);t<n.length;t++){var r=n[t];e[r]=this._userInfo[r]}return e.headImageUrl=this._userInfo.headImageUrl,e}},{key:"saveFormData",value:function(){var e=this;this.isButtLoading=!0,this.getFormValue(),this.updateHeadImage().pipe((0,S.switchMap)(function(t){return e._userInfo.headImageUrl=t,e.accountInfoDataSourceService.updateUserBasicInfo(e.getPostValue())}),(0,S.switchMap)(function(t){return e.accountInfoDataSourceService.refreshUserInfo(e._userInfo)})).subscribe(function(t){e.isButtLoading=!1,e.userInfoValue.emit(e._userInfo),e.dwModalService.success({dwTitle:e.translateService.instant("dw-account-info-form-update-success-title"),dwContent:e.translateService.instant("dw-account-info-form-update-success-content")})},function(t){e.isButtLoading=!1,t.hasOwnProperty("error")&&t.error.hasOwnProperty("errorMessage")&&t.error.errorMessage&&e.dwModalService.error({dwContent:t.error.errorMessage})})}},{key:"updateHeadImage",value:function(){var e=this;return 0===this.headImage.length?new b.Observable(function(e){e.next(""),e.complete()}):this.headImage[0].hasOwnProperty("url")&&this.headImage[0].url?new b.Observable(function(t){t.next(e.headImage[0].url),t.complete()}):this.accountInfoUploadService.uploadAndShare(this.headImage[0].originFileObj).pipe((0,S.filter)(function(e){return e.hasOwnProperty("shareUrl")&&e.shareUrl}),(0,S.map)(function(e){return e.shareUrl}))}},{key:"updatePassword",value:function(){this.dwUpdatePasswordModalService.open().subscribe()}}]),n}()).\u0275fac=function(e){return new(e||Y)(l.\u0275\u0275directiveInject(s.FormBuilder),l.\u0275\u0275directiveInject(C.DwAccountInfoService),l.\u0275\u0275directiveInject(C.DwAccountInfoDataSourceService),l.\u0275\u0275directiveInject(C.DwAccountInfoUploadService),l.\u0275\u0275directiveInject(I.DwModalService),l.\u0275\u0275directiveInject(x.DwUpdatePasswordModalService),l.\u0275\u0275directiveInject(c.TranslateService),l.\u0275\u0275directiveInject(E.DwSystemConfigService),l.\u0275\u0275directiveInject(E.APP_DATE_FORMAT))},Y.\u0275cmp=l.\u0275\u0275defineComponent({type:Y,selectors:[["dw-account-info"]],inputs:{isUseHeadImage:"isUseHeadImage",isUseUpdatePassword:"isUseUpdatePassword",formOption$:"formOption$"},outputs:{userInfoValue:"userInfoValue"},decls:1,vars:1,consts:[["class","dw-f-content-list",4,"ngIf"],[1,"dw-f-content-list"],["dw-form","",1,"account-info-form",3,"formGroup"],[1,"inputBlock"],[1,"user-pic-block"],[1,"photo-box"],["src","./assets/img/user-pic.png",4,"ngIf"],["dwListType","picture-card","dwFileType","image/png,image/jpeg,image/gif,image/bmp","class","headImage-upload",3,"dwBeforeUpload","dwRemove","dwShowUploadList","dwFileList","dwShowButton","dwMultiple","dwFileListChange",4,"ngIf"],["class","btn-block",4,"ngIf"],[1,"user-data-block"],["dw-row",""],[4,"ngFor","ngForOf"],["dw-col","",3,"dwSpan"],[1,"customize-footer"],["dwSpan","24"],["dw-button","",3,"dwType","disabled","dwLoading","click"],["translate",""],["src","./assets/img/user-pic.png"],["dwListType","picture-card","dwFileType","image/png,image/jpeg,image/gif,image/bmp",1,"headImage-upload",3,"dwBeforeUpload","dwRemove","dwShowUploadList","dwFileList","dwShowButton","dwMultiple","dwFileListChange"],[1,"ant-upload-drag-icon"],["dw-icon","","dwType","plus","dwTheme","outline"],[1,"ant-upload-text"],[1,"btn-block"],["dw-button","",3,"dwType","click"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[3,"dwSpan","dwOffset"],["dw-checkbox","",3,"formControlName"],[3,"dwSpan"],[3,"formControlName"],["dw-radio","",3,"dwValue"],[3,"dwOptionList","dwMode","formControlName","dwLabel","dwShowSearch","dwPlaceHolder","dwLabelSpan","dwInputSpan"],[3,"formControlName","dwLabel","dwPlaceHolder","dwLabelSpan","dwInputSpan","dwDisabled"],[3,"dwSpan","dwRequired"],[3,"dwSpan","dwValidateStatus","dwErrorTip"],[4,"ngIf"],["accountInfoErrorTpl",""],[3,"dwAddOnBefore"],["phoneTemplate",""],["dw-input","",3,"formControlName","placeholder","ngModelChange"],[2,"width","80px",3,"formControlName","dwDisabled"],[3,"dwLabel","dwValue"],[3,"formControlName","dwLabel","dwPlaceHolder","dwLabelSpan","dwInputSpan","dwRequired"]],template:function(e,t){1&e&&l.\u0275\u0275template(0,K,18,9,"dw-content",0),2&e&&l.\u0275\u0275property("ngIf",t.isShowForm)},directives:[d.NgIf,m.DwContentComponent,s.\u0275NgNoValidate,s.NgControlStatusGroup,p.DwFormDirective,s.FormGroupDirective,v.DwRowDirective,d.NgForOf,v.DwColDirective,p.DwFormItemComponent,p.DwFormControlComponent,g.DwButtonComponent,k.uG,P.u,c.TranslateDirective,u.DwUploadComponent,d.NgSwitch,d.NgSwitchCase,d.NgSwitchDefault,y.DwCheckboxComponent,s.NgControlStatus,s.FormControlName,p.DwFormLabelComponent,w.DwRadioGroupComponent,w.DwRadioComponent,O.DwFormSelectComponent,O.DwFormDatePickerComponent,f.DwInputGroupComponent,f.DwInputDirective,s.DefaultValueAccessor,h.DwSelectComponent,h.DwOptionComponent,O.DwFormInputComponent],pipes:[c.TranslatePipe,d.KeyValuePipe],styles:[".headImage-upload[_ngcontent-%COMP%]   .ant-upload.ant-upload-select-picture-card[_ngcontent-%COMP%]{margin-top:.31rem;border-radius:.38rem;width:100%}.headImage-upload[_ngcontent-%COMP%]   .ant-upload.ant-upload-select-picture-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:1.13rem}.headImage-upload[_ngcontent-%COMP%]   .ant-upload.ant-upload-select-picture-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.5rem;color:#ddd}[_nghost-%COMP%]     .user-data-block .has-error .ant-form-item-children{line-height:40px;display:block}[_nghost-%COMP%]     .user-data-block .has-error .ant-form-explain{font-size:.75rem;transform:scale(.95);position:absolute;z-index:2;text-shadow:1px 1px 5px #fff,-1px -1px 5px #fff;background-color:#fff6;bottom:-14px}[_nghost-%COMP%]     .user-data-block .ant-calendar-picker{width:100%}[_nghost-%COMP%]     .user-pic-block span.ant-form-item-children img{margin-bottom:1rem}[_nghost-%COMP%]     .user-pic-block .ant-upload-list-picture-card .ant-upload-list-item, [_nghost-%COMP%]     .user-pic-block .ant-upload.ant-upload-select-picture-card{margin-right:0;margin-bottom:1rem}.inputBlock[_ngcontent-%COMP%]{display:inline-flex}.inputBlock[_ngcontent-%COMP%]   .user-pic-block[_ngcontent-%COMP%]{width:8.75rem}.inputBlock[_ngcontent-%COMP%]   .user-pic-block[_ngcontent-%COMP%]   .photo-box[_ngcontent-%COMP%]{display:table;margin:0 auto}.inputBlock[_ngcontent-%COMP%]   .user-pic-block[_ngcontent-%COMP%]   .btn-block[_ngcontent-%COMP%]{text-align:center;width:100%}.inputBlock[_ngcontent-%COMP%]   .user-data-block[_ngcontent-%COMP%]{width:calc(100% - 9rem)}"]}),Y),X=function(){var e=i(function e(){o(this,e)});return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=l.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=l.\u0275\u0275defineInjector({imports:[[d.CommonModule,s.ReactiveFormsModule,u.DwUploadModule,p.DwFormModule,m.DwLayoutModule,f.DwInputModule,h.DwSelectModule,w.DwRadioModule,g.DwButtonModule,v.DwGridModule,y.DwCheckboxModule,O.DwFormItemsModule,c.TranslateModule]]}),e}()},8852:function(e,t,n){n.d(t,{u:function(){return l},f:function(){return d}});var r=n(36535),a=n(42746),l=function(){var e=function(){function e(t,n){o(this,e),this.elementRef=t,this.renderer=n,this.hidden=null,this.renderer.setAttribute(this.elementRef.nativeElement,"hidden","")}return i(e,[{key:"setHiddenAttribute",value:function(){this.hidden?this.renderer.setAttribute(this.elementRef.nativeElement,"hidden","string"==typeof this.hidden?this.hidden:""):this.renderer.removeAttribute(this.elementRef.nativeElement,"hidden")}},{key:"ngOnChanges",value:function(){this.setHiddenAttribute()}},{key:"ngAfterViewInit",value:function(){this.setHiddenAttribute()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(a.\u0275\u0275directiveInject(a.ElementRef),a.\u0275\u0275directiveInject(a.Renderer2))},e.\u0275dir=a.\u0275\u0275defineDirective({type:e,selectors:[["","dw-button",""],["dw-button-group"],["","dw-icon",""],["","dw-menu-item",""],["","dw-submenu",""],["dw-select-top-control"],["dw-select-placeholder"],["dw-input-group"]],inputs:{hidden:"hidden"},features:[a.\u0275\u0275NgOnChangesFeature]}),e}(),d=function(){var e=i(function e(){o(this,e)});return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=a.\u0275\u0275defineInjector({imports:[[r.PlatformModule]]}),e}()},96670:function(e,t,n){n.d(t,{uG:function(){return p},ln:function(){return m}});var r,a=n(36535),l=n(42746),d=n(88065),s=function(){function e(t,n,r,i){var l=this;o(this,e),this.triggerElement=t,this.ngZone=n,this.insertExtraNode=r,this.platformId=i,this.waveTransitionDuration=400,this.styleForPseudo=null,this.extraNode=null,this.lastTime=0,this.onClick=function(e){!l.triggerElement||!l.triggerElement.getAttribute||l.triggerElement.getAttribute("disabled")||"INPUT"===e.target.tagName||l.triggerElement.className.indexOf("disabled")>=0||l.fadeOutWave()},this.platform=new a.Platform(this.platformId),this.clickHandler=this.onClick.bind(this),this.bindTriggerEvent()}return i(e,[{key:"waveAttributeName",get:function(){return this.insertExtraNode?"ant-click-animating":"ant-click-animating-without-extra-node"}},{key:"bindTriggerEvent",value:function(){var e=this;this.platform.isBrowser&&this.ngZone.runOutsideAngular(function(){e.removeTriggerEvent(),e.triggerElement&&e.triggerElement.addEventListener("click",e.clickHandler,!0)})}},{key:"removeTriggerEvent",value:function(){this.triggerElement&&this.triggerElement.removeEventListener("click",this.clickHandler,!0)}},{key:"removeStyleAndExtraNode",value:function(){this.styleForPseudo&&document.body.contains(this.styleForPseudo)&&(document.body.removeChild(this.styleForPseudo),this.styleForPseudo=null),this.insertExtraNode&&this.triggerElement.contains(this.extraNode)&&this.triggerElement.removeChild(this.extraNode)}},{key:"destroy",value:function(){this.removeTriggerEvent(),this.removeStyleAndExtraNode()}},{key:"fadeOutWave",value:function(){var e=this,t=this.triggerElement,n=this.getWaveColor(t);t.setAttribute(this.waveAttributeName,"true"),!(Date.now()<this.lastTime+this.waveTransitionDuration)&&(this.isValidColor(n)&&(this.styleForPseudo||(this.styleForPseudo=document.createElement("style")),this.styleForPseudo.innerHTML="\n      [ant-click-animating-without-extra-node='true']::after, .ant-click-animating-node {\n        --antd-wave-shadow-color: ".concat(n,";\n      }"),document.body.appendChild(this.styleForPseudo)),this.insertExtraNode&&(this.extraNode||(this.extraNode=document.createElement("div")),this.extraNode.className="ant-click-animating-node",t.appendChild(this.extraNode)),this.lastTime=Date.now(),this.runTimeoutOutsideZone(function(){t.removeAttribute(e.waveAttributeName),e.removeStyleAndExtraNode()},this.waveTransitionDuration))}},{key:"isValidColor",value:function(e){return!!e&&"#ffffff"!==e&&"rgb(255, 255, 255)"!==e&&this.isNotGrey(e)&&!/rgba\(\d*, \d*, \d*, 0\)/.test(e)&&"transparent"!==e}},{key:"isNotGrey",value:function(e){var t=e.match(/rgba?\((\d*), (\d*), (\d*)(, [\.\d]*)?\)/);return!(t&&t[1]&&t[2]&&t[3]&&t[1]===t[2]&&t[2]===t[3])}},{key:"getWaveColor",value:function(e){var t=getComputedStyle(e);return t.getPropertyValue("border-top-color")||t.getPropertyValue("border-color")||t.getPropertyValue("background-color")}},{key:"runTimeoutOutsideZone",value:function(e,t){this.ngZone.runOutsideAngular(function(){return setTimeout(e,t)})}}]),e}(),c={disabled:!1},u=new l.InjectionToken("dw-wave-global-options",{providedIn:"root",factory:function(){return c}}),p=((r=function(){function e(t,n,r,a,i){o(this,e),this.ngZone=t,this.elementRef=n,this.config=r,this.animationType=a,this.platformId=i,this.dwWaveExtraNode=!1,this.waveDisabled=!1,this.waveDisabled=this.isConfigDisabled()}return i(e,[{key:"disabled",get:function(){return this.waveDisabled}},{key:"rendererRef",get:function(){return this.waveRenderer}},{key:"isConfigDisabled",value:function(){var e=!1;return this.config&&"boolean"==typeof this.config.disabled&&(e=this.config.disabled),"NoopAnimations"===this.animationType&&(e=!0),e}},{key:"ngOnDestroy",value:function(){this.waveRenderer&&this.waveRenderer.destroy()}},{key:"ngOnInit",value:function(){this.renderWaveIfEnabled()}},{key:"renderWaveIfEnabled",value:function(){!this.waveDisabled&&this.elementRef.nativeElement&&(this.waveRenderer=new s(this.elementRef.nativeElement,this.ngZone,this.dwWaveExtraNode,this.platformId))}},{key:"disable",value:function(){this.waveDisabled=!0,this.waveRenderer&&(this.waveRenderer.removeTriggerEvent(),this.waveRenderer.removeStyleAndExtraNode())}},{key:"enable",value:function(){this.waveDisabled=this.isConfigDisabled()||!1,this.waveRenderer&&this.waveRenderer.bindTriggerEvent()}}]),e}()).\u0275fac=function(e){return new(e||r)(l.\u0275\u0275directiveInject(l.NgZone),l.\u0275\u0275directiveInject(l.ElementRef),l.\u0275\u0275directiveInject(u,8),l.\u0275\u0275directiveInject(d.ANIMATION_MODULE_TYPE,8),l.\u0275\u0275directiveInject(l.PLATFORM_ID))},r.\u0275dir=l.\u0275\u0275defineDirective({type:r,selectors:[["","dw-wave",""],["button","dw-button","",3,"dwType","link",3,"dwType","text"]],inputs:{dwWaveExtraNode:"dwWaveExtraNode"},exportAs:["dwWave"]}),r),m=function(){var e=i(function e(){o(this,e)});return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=l.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=l.\u0275\u0275defineInjector({imports:[[a.PlatformModule]]}),e}()}}])}();