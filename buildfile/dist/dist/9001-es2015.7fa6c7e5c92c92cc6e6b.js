"use strict";(self.webpackChunkassc_crs=self.webpackChunkassc_crs||[]).push([[9001],{69001:function(e,t,n){n.r(t),n.d(t,{DW_EXTRA_FIELDS_VALIDATORS:function(){return z},DYNAMIC_FORM_CONTROL_TYPE_INPUTALPHANUMERIC:function(){return x},DYNAMIC_FORM_CONTROL_TYPE_INPUTNUMBER:function(){return R},DYNAMIC_FORM_CONTROL_TYPE_TEXT:function(){return A},DwExtraFieldComponentTypeResolverService:function(){return H},DwExtraFieldConfigConverService:function(){return q},DwExtraFieldsComponent:function(){return K},DwExtraFieldsDatePickerControlComponent:function(){return Q},DwExtraFieldsFormControlComponent:function(){return $},DwExtraFieldsFormGroupComponent:function(){return J},DwExtraFieldsInputAlphanumericControlComponent:function(){return Y},DwExtraFieldsInputControlComponent:function(){return G},DwExtraFieldsInputNumberControlComponent:function(){return k},DwExtraFieldsModule:function(){return Z},DwExtraFieldsSelectControlComponent:function(){return U},DwExtraFieldsTextControlComponent:function(){return B},DwExtraFieldsTextareaControlComponent:function(){return V},DwExtraFieldsWithTemplateComponent:function(){return L},DynamicInputAlphanumericModel:function(){return P},DynamicInputNumberModel:function(){return M},DynamicTextModel:function(){return j},"\u0275a":function(){return X},"\u0275b":function(){return W}});var r=n(42746),o=n(55245),i=n(1020),a=n(83522),c=n(19548),s=n(29872),l=n(85773),u=n(119),p=n(67280),d=n(41937),m=n(87442),f=n(35626),h=n(64762),v=n(30469),y=n(71049),g=n(47372);n(53524);const C=["input"];function w(e,t){if(1&e&&(r.\u0275\u0275element(0,"dw-option",4),r.\u0275\u0275pipe(1,"translate")),2&e){const e=t.$implicit;r.\u0275\u0275property("dwValue",e.value)("dwLabel",r.\u0275\u0275pipeBind1(1,2,e.label))}}function S(e,t){if(1&e&&(r.\u0275\u0275elementStart(0,"div",3),r.\u0275\u0275element(1,"dw-extra-fields-form-control",4,5),r.\u0275\u0275elementEnd()),2&e){const e=t.$implicit,n=r.\u0275\u0275nextContext();r.\u0275\u0275property("dwSpan","GROUP"===e.type?24:24/n.getCols),r.\u0275\u0275advance(1),r.\u0275\u0275property("labelSpan",n.labelSpan)("inputSpan",n.inputSpan)("model",e)("group",n.control)("templates",n.templates)}}const D=["componentViewContainer"];function F(e,t){if(1&e&&(r.\u0275\u0275elementStart(0,"dw-form-label",7),r.\u0275\u0275text(1),r.\u0275\u0275pipe(2,"translate"),r.\u0275\u0275elementEnd()),2&e){const e=r.\u0275\u0275nextContext();r.\u0275\u0275property("dwSpan",e.labelSpan)("dwRequired",e.isRequired),r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate1(" ",r.\u0275\u0275pipeBind1(2,3,e.model.label)," ")}}function E(e,t){1&e&&r.\u0275\u0275elementContainer(0)}function O(e,t){if(1&e&&(r.\u0275\u0275elementContainerStart(0),r.\u0275\u0275elementStart(1,"div"),r.\u0275\u0275text(2),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementContainerEnd()),2&e){const e=t.$implicit;r.\u0275\u0275advance(2),r.\u0275\u0275textInterpolate(e)}}function b(e,t){if(1&e&&r.\u0275\u0275template(0,O,3,1,"ng-container",8),2&e){const e=r.\u0275\u0275nextContext();r.\u0275\u0275property("ngForOf",e.errorMessages)}}function _(e,t){1&e&&r.\u0275\u0275elementContainer(0)}const T=function(e){return{$implicit:e}},N=["*"];function I(e,t){if(1&e&&(r.\u0275\u0275elementStart(0,"div",3),r.\u0275\u0275element(1,"dw-extra-fields-form-control",4),r.\u0275\u0275elementEnd()),2&e){const e=t.$implicit,n=r.\u0275\u0275nextContext();r.\u0275\u0275property("dwSpan","GROUP"===e.type?24:24/n.getCols),r.\u0275\u0275advance(1),r.\u0275\u0275property("labelSpan",n.labelSpan)("inputSpan",n.inputSpan)("model",e)("group",n.group)("templates",n.templates)}}const R="INPUTNUMBER";let M=(()=>{class e extends c.DynamicInputControlModel{constructor(e,t){super(e,t),this.type=R,this.max=void 0!==e.max?e.max:1/0,this.min=void 0!==e.min?e.min:-1/0,this.step=void 0!==e.step?e.step:1}}return(0,h.gn)([(0,c.serializable)(),(0,h.w6)("design:type",Number)],e.prototype,"max",void 0),(0,h.gn)([(0,c.serializable)(),(0,h.w6)("design:type",Number)],e.prototype,"min",void 0),(0,h.gn)([(0,c.serializable)(),(0,h.w6)("design:type",Object)],e.prototype,"step",void 0),(0,h.gn)([(0,c.serializable)(),(0,h.w6)("design:type",String)],e.prototype,"type",void 0),e})();const x="INPUTALPHANUMERIC";let P=(()=>{class e extends c.DynamicInputControlModel{constructor(e,t){super(e,t),this.type=x}}return(0,h.gn)([(0,c.serializable)(),(0,h.w6)("design:type",String)],e.prototype,"type",void 0),e})();const A="TEXT";let j=(()=>{class e extends c.DynamicInputControlModel{constructor(e,t){super(e,t),this.type=A}}return(0,h.gn)([(0,c.serializable)(),(0,h.w6)("design:type",String)],e.prototype,"type",void 0),e})(),L=(()=>{class e extends c.DynamicFormControlWithTemplateComponent{constructor(e,t){super(e,t),this.layoutService=e,this.validationService=t}mapTemplate(e){return e}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)(r.\u0275\u0275directiveInject(c.DynamicFormLayoutService),r.\u0275\u0275directiveInject(c.DynamicFormValidationService))},e.\u0275dir=r.\u0275\u0275defineDirective({type:e,features:[r.\u0275\u0275InheritDefinitionFeature]}),e})(),G=(()=>{class e extends L{constructor(e,t){super(e,t),this.layoutService=e,this.validationService=t,this.blur=new r.EventEmitter,this.change=new r.EventEmitter,this.focus=new r.EventEmitter}get viewChild(){return this.inputComponent}}return e.\u0275fac=function(t){return new(t||e)(r.\u0275\u0275directiveInject(c.DynamicFormLayoutService),r.\u0275\u0275directiveInject(c.DynamicFormValidationService))},e.\u0275cmp=r.\u0275\u0275defineComponent({type:e,selectors:[["dw-extra-fields-input"]],viewQuery:function(e,t){if(1&e&&r.\u0275\u0275viewQuery(C,7),2&e){let e;r.\u0275\u0275queryRefresh(e=r.\u0275\u0275loadQuery())&&(t.inputComponent=e.first)}},inputs:{group:"group",model:"model"},outputs:{blur:"blur",change:"change",focus:"focus"},features:[r.\u0275\u0275InheritDefinitionFeature],decls:3,vars:4,consts:[[3,"formGroup"],["dw-input","",3,"formControlName","placeholder","readonly","blur","change","focus"],["input",""]],template:function(e,t){1&e&&(r.\u0275\u0275elementContainerStart(0,0),r.\u0275\u0275elementStart(1,"input",1,2),r.\u0275\u0275listener("blur",function(e){return t.onBlur(e)})("change",function(e){return t.onChange(e)})("focus",function(e){return t.onFocus(e)}),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementContainerEnd()),2&e&&(r.\u0275\u0275property("formGroup",t.group),r.\u0275\u0275advance(1),r.\u0275\u0275property("formControlName",t.model.id)("placeholder",t.model.placeholder)("readonly",t.model.readOnly))},directives:[i.NgControlStatusGroup,i.FormGroupDirective,p.DwInputDirective,i.DefaultValueAccessor,i.NgControlStatus,i.FormControlName],encapsulation:2}),e})(),k=(()=>{class e extends L{constructor(e,t){super(e,t),this.layoutService=e,this.validationService=t,this.blur=new r.EventEmitter,this.change=new r.EventEmitter,this.focus=new r.EventEmitter}get viewChild(){return this.inputComponent}}return e.\u0275fac=function(t){return new(t||e)(r.\u0275\u0275directiveInject(c.DynamicFormLayoutService),r.\u0275\u0275directiveInject(c.DynamicFormValidationService))},e.\u0275cmp=r.\u0275\u0275defineComponent({type:e,selectors:[["dw-extra-fields-input-number"]],viewQuery:function(e,t){if(1&e&&r.\u0275\u0275viewQuery(C,7),2&e){let e;r.\u0275\u0275queryRefresh(e=r.\u0275\u0275loadQuery())&&(t.inputComponent=e.first)}},inputs:{group:"group",model:"model"},outputs:{blur:"blur",change:"change",focus:"focus"},features:[r.\u0275\u0275InheritDefinitionFeature],decls:3,vars:6,consts:[[3,"formGroup"],[3,"formControlName","dwPlaceHolder","dwMax","dwMin","dwStep","blur","change","focus"],["input",""]],template:function(e,t){1&e&&(r.\u0275\u0275elementContainerStart(0,0),r.\u0275\u0275elementStart(1,"dw-input-number",1,2),r.\u0275\u0275listener("blur",function(e){return t.onBlur(e)})("change",function(e){return t.onChange(e)})("focus",function(e){return t.onFocus(e)}),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementContainerEnd()),2&e&&(r.\u0275\u0275property("formGroup",t.group),r.\u0275\u0275advance(1),r.\u0275\u0275property("formControlName",t.model.id)("dwPlaceHolder",t.model.placeholder)("dwMax",t.model.max)("dwMin",t.model.min)("dwStep",t.model.step))},directives:[i.NgControlStatusGroup,i.FormGroupDirective,u.DwInputNumberComponent,i.NgControlStatus,i.FormControlName],encapsulation:2}),e})(),Y=(()=>{class e extends L{constructor(e,t){super(e,t),this.layoutService=e,this.validationService=t,this.blur=new r.EventEmitter,this.change=new r.EventEmitter,this.focus=new r.EventEmitter}get viewChild(){return this.inputComponent}onKeypress(e){return new RegExp("^[a-zA-Z0-9]+$").test(e.key)}}return e.\u0275fac=function(t){return new(t||e)(r.\u0275\u0275directiveInject(c.DynamicFormLayoutService),r.\u0275\u0275directiveInject(c.DynamicFormValidationService))},e.\u0275cmp=r.\u0275\u0275defineComponent({type:e,selectors:[["dw-extra-fields-input-alphanumeric"]],viewQuery:function(e,t){if(1&e&&r.\u0275\u0275viewQuery(C,7),2&e){let e;r.\u0275\u0275queryRefresh(e=r.\u0275\u0275loadQuery())&&(t.inputComponent=e.first)}},inputs:{group:"group",model:"model"},outputs:{blur:"blur",change:"change",focus:"focus"},features:[r.\u0275\u0275InheritDefinitionFeature],decls:3,vars:4,consts:[[3,"formGroup"],["dw-input","",3,"formControlName","placeholder","readonly","keypress","blur","change","focus"],["input",""]],template:function(e,t){1&e&&(r.\u0275\u0275elementContainerStart(0,0),r.\u0275\u0275elementStart(1,"input",1,2),r.\u0275\u0275listener("keypress",function(e){return t.onKeypress(e)})("blur",function(e){return t.onBlur(e)})("change",function(e){return t.onChange(e)})("focus",function(e){return t.onFocus(e)}),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementContainerEnd()),2&e&&(r.\u0275\u0275property("formGroup",t.group),r.\u0275\u0275advance(1),r.\u0275\u0275property("formControlName",t.model.id)("placeholder",t.model.placeholder)("readonly",t.model.readOnly))},directives:[i.NgControlStatusGroup,i.FormGroupDirective,p.DwInputDirective,i.DefaultValueAccessor,i.NgControlStatus,i.FormControlName],encapsulation:2}),e})(),V=(()=>{class e extends L{constructor(e,t){super(e,t),this.layoutService=e,this.validationService=t,this.blur=new r.EventEmitter,this.change=new r.EventEmitter,this.focus=new r.EventEmitter}get viewChild(){return this.inputComponent}}return e.\u0275fac=function(t){return new(t||e)(r.\u0275\u0275directiveInject(c.DynamicFormLayoutService),r.\u0275\u0275directiveInject(c.DynamicFormValidationService))},e.\u0275cmp=r.\u0275\u0275defineComponent({type:e,selectors:[["dw-extra-fields-textarea"]],viewQuery:function(e,t){if(1&e&&r.\u0275\u0275viewQuery(C,7),2&e){let e;r.\u0275\u0275queryRefresh(e=r.\u0275\u0275loadQuery())&&(t.inputComponent=e.first)}},inputs:{group:"group",model:"model"},outputs:{blur:"blur",change:"change",focus:"focus"},features:[r.\u0275\u0275InheritDefinitionFeature],decls:3,vars:6,consts:[[3,"formGroup"],["dw-input","",3,"formControlName","rows","cols","placeholder","readonly","blur","change","focus"],["input",""]],template:function(e,t){1&e&&(r.\u0275\u0275elementContainerStart(0,0),r.\u0275\u0275elementStart(1,"textarea",1,2),r.\u0275\u0275listener("blur",function(e){return t.onBlur(e)})("change",function(e){return t.onChange(e)})("focus",function(e){return t.onFocus(e)}),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementContainerEnd()),2&e&&(r.\u0275\u0275property("formGroup",t.group),r.\u0275\u0275advance(1),r.\u0275\u0275property("formControlName",t.model.id)("rows",t.model.rows)("cols",t.model.cols)("placeholder",t.model.placeholder)("readonly",t.model.readOnly))},directives:[i.NgControlStatusGroup,i.FormGroupDirective,p.DwInputDirective,i.DefaultValueAccessor,i.NgControlStatus,i.FormControlName],encapsulation:2}),e})(),Q=(()=>{class e extends L{constructor(e,t){super(e,t),this.layoutService=e,this.validationService=t,this.blur=new r.EventEmitter,this.change=new r.EventEmitter,this.focus=new r.EventEmitter}get viewChild(){return this.inputComponent}}return e.\u0275fac=function(t){return new(t||e)(r.\u0275\u0275directiveInject(c.DynamicFormLayoutService),r.\u0275\u0275directiveInject(c.DynamicFormValidationService))},e.\u0275cmp=r.\u0275\u0275defineComponent({type:e,selectors:[["dw-extra-fields-datepicker"]],viewQuery:function(e,t){if(1&e&&r.\u0275\u0275viewQuery(C,7),2&e){let e;r.\u0275\u0275queryRefresh(e=r.\u0275\u0275loadQuery())&&(t.inputComponent=e.first)}},inputs:{group:"group",model:"model"},outputs:{blur:"blur",change:"change",focus:"focus"},features:[r.\u0275\u0275InheritDefinitionFeature],decls:3,vars:4,consts:[[3,"formGroup"],[3,"formControlName","dwFormat","dwPlaceHolder","blur","change","focus"],["input",""]],template:function(e,t){1&e&&(r.\u0275\u0275elementContainerStart(0,0),r.\u0275\u0275elementStart(1,"dw-date-picker",1,2),r.\u0275\u0275listener("blur",function(e){return t.onBlur(e)})("change",function(e){return t.onChange(e)})("focus",function(e){return t.onFocus(e)}),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementContainerEnd()),2&e&&(r.\u0275\u0275property("formGroup",t.group),r.\u0275\u0275advance(1),r.\u0275\u0275property("formControlName",t.model.id)("dwFormat",t.model.format)("dwPlaceHolder",t.model.placeholder))},directives:[i.NgControlStatusGroup,i.FormGroupDirective,d.DwDatePickerComponent,i.NgControlStatus,i.FormControlName],encapsulation:2}),e})(),U=(()=>{class e extends L{constructor(e,t){super(e,t),this.layoutService=e,this.validationService=t,this.blur=new r.EventEmitter,this.change=new r.EventEmitter,this.focus=new r.EventEmitter}get viewChild(){return this.inputComponent}}return e.\u0275fac=function(t){return new(t||e)(r.\u0275\u0275directiveInject(c.DynamicFormLayoutService),r.\u0275\u0275directiveInject(c.DynamicFormValidationService))},e.\u0275cmp=r.\u0275\u0275defineComponent({type:e,selectors:[["dw-extra-fields-select"]],viewQuery:function(e,t){if(1&e&&r.\u0275\u0275viewQuery(C,7),2&e){let e;r.\u0275\u0275queryRefresh(e=r.\u0275\u0275loadQuery())&&(t.inputComponent=e.first)}},inputs:{group:"group",model:"model"},outputs:{blur:"blur",change:"change",focus:"focus"},features:[r.\u0275\u0275InheritDefinitionFeature],decls:4,vars:5,consts:[[3,"formGroup"],[3,"formControlName","dwMode","dwPlaceHolder"],["input",""],[3,"dwValue","dwLabel",4,"ngFor","ngForOf"],[3,"dwValue","dwLabel"]],template:function(e,t){1&e&&(r.\u0275\u0275elementContainerStart(0,0),r.\u0275\u0275elementStart(1,"dw-select",1,2),r.\u0275\u0275template(3,w,2,4,"dw-option",3),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementContainerEnd()),2&e&&(r.\u0275\u0275property("formGroup",t.group),r.\u0275\u0275advance(1),r.\u0275\u0275property("formControlName",t.model.id)("dwMode",!0===t.model.multiple?"multiple":"default")("dwPlaceHolder",t.model.placeholder),r.\u0275\u0275advance(2),r.\u0275\u0275property("ngForOf",t.model.options))},directives:[i.NgControlStatusGroup,i.FormGroupDirective,f.DwSelectComponent,i.NgControlStatus,i.FormControlName,o.NgForOf,f.DwOptionComponent],pipes:[a.TranslatePipe],encapsulation:2}),e})(),q=(()=>{class e{constructor(e,t,n){this.translateService=e,this.dwDateFormat=t,this.dwTimeFormat=n,this.gridLayoutMap=new Map,this.extraFieldsConfig=null}setGridLayout(e,t){this.gridLayoutMap.set(e,t)}getGridLayout(e){return this.gridLayoutMap.get(e)}setExtraFieldsConfig(e){this.extraFieldsConfig=e}getExtraFieldsConfig(){return this.extraFieldsConfig}converConfig(e,t,n,r){if(this.extraFieldsValidators=t,!e)return;const o=(0,c.isString)(e)?JSON.parse(e,c.parseReviver):e;return o.forEach(e=>{if(e.field_id&&(e.id=e.field_id),e.field_type&&(e.type=e.field_type.toUpperCase()),e.type===c.DYNAMIC_FORM_CONTROL_TYPE_DATEPICKER&&(e.format=this.dwDateFormat),e.field_label&&(e.label=this.translateService.instant(e.field_label)),e.field_config){const t=JSON.parse(e.field_config);Object.assign(e,t)}e.placeholder&&(e.placeholder=this.translateService.instant(e.placeholder)),!0!==n&&(e.type=A,r=!1),!0===r&&this.setValidator(e)}),o}setValidator(e){const t=this.extraFieldsValidators,n={},r={},o={};!t||!t.hasOwnProperty("validators")||!t.hasOwnProperty("asyncValidators")||!e.hasOwnProperty("validator")||0===Object.keys("validator").length||(Object.keys(e.validator).forEach(a=>{if(i.Validators.hasOwnProperty(a)&&(n[a]=e.validator[a]),t.hasOwnProperty("validators")&&t.validators[a]&&(n[a]={name:a,args:e.validator[a]}),t.hasOwnProperty("asyncValidators")&&t.asyncValidators[a]&&(r[a]={name:a,args:e.validator[a]}),t.hasOwnProperty("errorMessages")&&t.errorMessages[a])o[a]=t.errorMessages[a];else{let e=this.translateService.instant(a.toLowerCase());e=e.replace(/requiredLength/,"validator.requiredLength"),e=e.replace(/actualLength/,"validator.actualLength"),o[a]=e}}),Object.keys(n).length>0&&(e.validators=n),Object.keys(r).length>0&&(e.asyncValidators=r),Object.keys(o).length>0&&(e.errorMessages=o))}fromJSON(e){if(!e)return;const t=(0,c.isString)(e)?JSON.parse(e,c.parseReviver):e,n=[];return t.forEach(e=>{var t;const r=null!==(t=e.layout)&&void 0!==t?t:null;switch(e.type){case c.DYNAMIC_FORM_CONTROL_TYPE_ARRAY:const t=e;Array.isArray(t.groups)&&t.groups.forEach(e=>{e.group=this.fromJSON(e.group)}),t.groupFactory=()=>this.fromJSON(t.groupPrototype),n.push(new c.DynamicFormArrayModel(e,r));break;case c.DYNAMIC_FORM_CONTROL_TYPE_CHECKBOX:n.push(new c.DynamicCheckboxModel(e,r));break;case c.DYNAMIC_FORM_CONTROL_TYPE_CHECKBOX_GROUP:e.group=this.fromJSON(e.group),n.push(new c.DynamicCheckboxGroupModel(e,r));break;case c.DYNAMIC_FORM_CONTROL_TYPE_COLORPICKER:n.push(new c.DynamicColorPickerModel(e,r));break;case c.DYNAMIC_FORM_CONTROL_TYPE_DATEPICKER:n.push(new c.DynamicDatePickerModel(e,r));break;case c.DYNAMIC_FORM_CONTROL_TYPE_EDITOR:n.push(new c.DynamicEditorModel(e,r));break;case c.DYNAMIC_FORM_CONTROL_TYPE_FILE_UPLOAD:e.value=null,n.push(new c.DynamicFileUploadModel(e,r));break;case c.DYNAMIC_FORM_CONTROL_TYPE_GROUP:e.group=this.fromJSON(e.group),n.push(new c.DynamicFormGroupModel(e,r));break;case c.DYNAMIC_FORM_CONTROL_TYPE_INPUT:const o={};null!==o.mask&&(o.mask instanceof Function||(o.mask=(0,c.maskFromString)(o.mask))),n.push(new c.DynamicInputModel(e,r));break;case c.DYNAMIC_FORM_CONTROL_TYPE_RADIO_GROUP:n.push(new c.DynamicRadioGroupModel(e,r));break;case c.DYNAMIC_FORM_CONTROL_TYPE_RATING:n.push(new c.DynamicRatingModel(e,r));break;case c.DYNAMIC_FORM_CONTROL_TYPE_SELECT:n.push(new c.DynamicSelectModel(e,r));break;case c.DYNAMIC_FORM_CONTROL_TYPE_SLIDER:n.push(new c.DynamicSliderModel(e,r));break;case c.DYNAMIC_FORM_CONTROL_TYPE_SWITCH:n.push(new c.DynamicSwitchModel(e,r));break;case c.DYNAMIC_FORM_CONTROL_TYPE_TEXTAREA:n.push(new c.DynamicTextAreaModel(e,r));break;case c.DYNAMIC_FORM_CONTROL_TYPE_TIMEPICKER:n.push(new c.DynamicTimePickerModel(e,r));break;case R:n.push(new M(e,r));break;case x:n.push(new P(e,r));break;case A:n.push(new j(e,r));break;default:throw new Error(`unknown form control model type defined on JSON object with id "${e.id}"`)}}),n}}return e.\u0275fac=function(t){return new(t||e)(r.\u0275\u0275inject(a.TranslateService),r.\u0275\u0275inject(v.APP_DATE_FORMAT),r.\u0275\u0275inject(v.APP_TIME_FORMAT))},e.\u0275prov=r.\u0275\u0275defineInjectable({factory:function(){return new e(r.\u0275\u0275inject(a.TranslateService),r.\u0275\u0275inject(v.APP_DATE_FORMAT),r.\u0275\u0275inject(v.APP_TIME_FORMAT))},token:e,providedIn:"root"}),e})(),J=(()=>{class e extends L{constructor(e,t,n){super(e,t),this.layoutService=e,this.validationService=t,this.configConverService=n,this.cols="1",this.labelSpan="6",this.inputSpan="14",this.blur=new r.EventEmitter,this.change=new r.EventEmitter,this.focus=new r.EventEmitter}get viewChild(){return this.inputComponent}get getCols(){return parseInt(this.cols,10)}ngOnInit(){this.cols=this.configConverService.getGridLayout("cols"),this.labelSpan=this.configConverService.getGridLayout("labelSpan"),this.inputSpan=this.configConverService.getGridLayout("inputSpan")}}return e.\u0275fac=function(t){return new(t||e)(r.\u0275\u0275directiveInject(c.DynamicFormLayoutService),r.\u0275\u0275directiveInject(c.DynamicFormValidationService),r.\u0275\u0275directiveInject(q))},e.\u0275cmp=r.\u0275\u0275defineComponent({type:e,selectors:[["dw-extra-fields-form-group"]],viewQuery:function(e,t){if(1&e&&r.\u0275\u0275viewQuery(C,7),2&e){let e;r.\u0275\u0275queryRefresh(e=r.\u0275\u0275loadQuery())&&(t.inputComponent=e.first)}},inputs:{group:"group",model:"model"},outputs:{blur:"blur",change:"change",focus:"focus"},features:[r.\u0275\u0275InheritDefinitionFeature],decls:3,vars:1,consts:[[1,"extra-fields-form-group-block"],["dw-row",""],["dw-col","",3,"dwSpan",4,"ngFor","ngForOf"],["dw-col","",3,"dwSpan"],[3,"labelSpan","inputSpan","model","group","templates"],["input",""]],template:function(e,t){1&e&&(r.\u0275\u0275elementStart(0,"div",0),r.\u0275\u0275elementStart(1,"div",1),r.\u0275\u0275template(2,S,3,6,"div",2),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd()),2&e&&(r.\u0275\u0275advance(2),r.\u0275\u0275property("ngForOf",t.model.group))},directives:function(){return[s.DwRowDirective,o.NgForOf,s.DwColDirective,$]},encapsulation:2}),e})(),B=(()=>{class e extends L{constructor(e,t,n,o,i){super(e,t),this.layoutService=e,this.validationService=t,this.configConverService=n,this.dwDateFormat=o,this.dwTimeFormat=i,this.blur=new r.EventEmitter,this.change=new r.EventEmitter,this.focus=new r.EventEmitter,this.extraFieldsConfig=null}get viewChild(){return this.inputComponent}ngOnInit(){this.extraFieldsConfig=this.configConverService.getExtraFieldsConfig()}showText(){const e=this.extraFieldsConfig.find(e=>e.id===this.model.id);if(this.model.value instanceof Date){if(e.format)return new o.DatePipe("zh_tw").transform(this.model.value,e.format);const t=this.dwDateFormat.concat(" ",this.dwTimeFormat);return new o.DatePipe("zh_tw").transform(this.model.value,t)}if(e.field_type!==c.DYNAMIC_FORM_CONTROL_TYPE_SELECT)return this.model.value;if(!this.model.value||0===this.model.value.length)return this.model.value;const t=[];return this.model.value.forEach(n=>{const r=e.options.findIndex(e=>e.value===n);r>=0&&t.push(e.options[r].label)}),t.toString()}}return e.\u0275fac=function(t){return new(t||e)(r.\u0275\u0275directiveInject(c.DynamicFormLayoutService),r.\u0275\u0275directiveInject(c.DynamicFormValidationService),r.\u0275\u0275directiveInject(q),r.\u0275\u0275directiveInject(v.APP_DATE_FORMAT),r.\u0275\u0275directiveInject(v.APP_TIME_FORMAT))},e.\u0275cmp=r.\u0275\u0275defineComponent({type:e,selectors:[["dw-extra-fields-text"]],viewQuery:function(e,t){if(1&e&&r.\u0275\u0275viewQuery(C,7),2&e){let e;r.\u0275\u0275queryRefresh(e=r.\u0275\u0275loadQuery())&&(t.inputComponent=e.first)}},inputs:{group:"group",model:"model"},outputs:{blur:"blur",change:"change",focus:"focus"},features:[r.\u0275\u0275InheritDefinitionFeature],decls:3,vars:2,consts:[[3,"formGroup"],["input",""]],template:function(e,t){1&e&&(r.\u0275\u0275elementContainerStart(0,0,1),r.\u0275\u0275text(2),r.\u0275\u0275elementContainerEnd()),2&e&&(r.\u0275\u0275property("formGroup",t.group),r.\u0275\u0275advance(2),r.\u0275\u0275textInterpolate1(" ",t.showText(),"\n"))},directives:[i.NgControlStatusGroup,i.FormGroupDirective],encapsulation:2}),e})(),H=(()=>{class e{constructor(e){this.translateService=e}getComponentByType(e){if(!e)throw new Error(this.translateService.instant("dw-extra-fields-noType"));switch(e){case c.DYNAMIC_FORM_CONTROL_TYPE_INPUT:return G;case R:return k;case x:return Y;case c.DYNAMIC_FORM_CONTROL_TYPE_TEXTAREA:return V;case c.DYNAMIC_FORM_CONTROL_TYPE_DATEPICKER:return Q;case c.DYNAMIC_FORM_CONTROL_TYPE_SELECT:return U;case c.DYNAMIC_FORM_CONTROL_TYPE_GROUP:return J;case A:return B}throw new Error(this.translateService.instant("dw-extra-fields-typenotFound",{type:e}))}}return e.\u0275fac=function(t){return new(t||e)(r.\u0275\u0275inject(a.TranslateService))},e.\u0275prov=r.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e})(),$=(()=>{class e extends c.DynamicFormControlContainerComponent{constructor(e,t,n,o,i,a,c){super(e,t,n,o,i,a),this.changeDetectorRef=e,this.componentFactoryResolver=t,this.layoutService=n,this.validationService=o,this.componentService=i,this.relationService=a,this.componentResolver=c,this.labelSpan="6",this.inputSpan="14",this.blur=new r.EventEmitter,this.change=new r.EventEmitter,this.focus=new r.EventEmitter}get componentType(){var e;return this.componentResolver.getComponentByType(null===(e=this.model)||void 0===e?void 0:e.type)}get isRequired(){return!(null===this.model.validators||!this.model.validators.hasOwnProperty("required"))}}return e.\u0275fac=function(t){return new(t||e)(r.\u0275\u0275directiveInject(r.ChangeDetectorRef),r.\u0275\u0275directiveInject(r.ComponentFactoryResolver),r.\u0275\u0275directiveInject(c.DynamicFormLayoutService),r.\u0275\u0275directiveInject(c.DynamicFormValidationService),r.\u0275\u0275directiveInject(c.DynamicFormComponentService),r.\u0275\u0275directiveInject(c.DynamicFormRelationService),r.\u0275\u0275directiveInject(H))},e.\u0275cmp=r.\u0275\u0275defineComponent({type:e,selectors:[["dw-extra-fields-form-control"]],viewQuery:function(e,t){if(1&e&&r.\u0275\u0275viewQuery(D,7,r.ViewContainerRef),2&e){let e;r.\u0275\u0275queryRefresh(e=r.\u0275\u0275loadQuery())&&(t.componentViewContainerRef=e.first)}},inputs:{labelSpan:"labelSpan",inputSpan:"inputSpan",inputTemplateList:["templates","inputTemplateList"],model:"model",group:"group"},outputs:{blur:"blur",change:"change",focus:"focus"},features:[r.\u0275\u0275InheritDefinitionFeature],ngContentSelectors:N,decls:12,vars:13,consts:[[1,"extra-fields-form-control-block"],[3,"formGroup"],[3,"dwSpan","dwRequired",4,"ngIf"],[3,"dwSpan","dwValidateStatus","dwErrorTip"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["componentViewContainer",""],["errorTpl",""],[3,"dwSpan","dwRequired"],[4,"ngFor","ngForOf"]],template:function(e,t){if(1&e&&(r.\u0275\u0275projectionDef(),r.\u0275\u0275elementStart(0,"div",0),r.\u0275\u0275elementContainerStart(1,1),r.\u0275\u0275elementStart(2,"dw-form-item"),r.\u0275\u0275template(3,F,3,5,"dw-form-label",2),r.\u0275\u0275elementStart(4,"dw-form-control",3),r.\u0275\u0275template(5,E,1,0,"ng-container",4),r.\u0275\u0275elementContainer(6,null,5),r.\u0275\u0275template(8,b,1,1,"ng-template",null,6,r.\u0275\u0275templateRefExtractor),r.\u0275\u0275template(10,_,1,0,"ng-container",4),r.\u0275\u0275projection(11),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementContainerEnd(),r.\u0275\u0275elementEnd()),2&e){const e=r.\u0275\u0275reference(9);r.\u0275\u0275advance(1),r.\u0275\u0275property("formGroup",t.group),r.\u0275\u0275advance(2),r.\u0275\u0275property("ngIf","GROUP"!==t.model.type),r.\u0275\u0275advance(1),r.\u0275\u0275property("dwSpan","GROUP"!==t.model.type?t.inputSpan:24)("dwValidateStatus",t.group.get(t.model.id).dirty&&t.errorMessages.length>0?"error":null)("dwErrorTip",e),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngTemplateOutlet",null==t.startTemplate?null:t.startTemplate.templateRef)("ngTemplateOutletContext",r.\u0275\u0275pureFunction1(9,T,t.model)),r.\u0275\u0275advance(5),r.\u0275\u0275property("ngTemplateOutlet",null==t.endTemplate?null:t.endTemplate.templateRef)("ngTemplateOutletContext",r.\u0275\u0275pureFunction1(11,T,t.model))}},directives:[i.NgControlStatusGroup,i.FormGroupDirective,s.DwRowDirective,l.DwFormItemComponent,o.NgIf,s.DwColDirective,l.DwFormControlComponent,o.NgTemplateOutlet,l.DwFormLabelComponent,o.NgForOf],pipes:[a.TranslatePipe],styles:[""],changeDetection:0}),e})();const z=new r.InjectionToken("DW_EXTRA_FIELDS_VALIDATORS");let K=(()=>{class e extends c.DynamicFormComponent{constructor(e,t,n,o,i,a,c){super(e,t),this.changeDetectorRef=e,this.componentService=t,this.formService=n,this.configConverService=o,this.dwExtraFieldsValidators=i,this.dwDateFormat=a,this.dwTimeFormat=c,this.model=[],this.config=null,this.editable=!0,this.dwDocument=null,this.tableName=null,this.isValidate=!0,this.cols="1",this.labelSpan="6",this.inputSpan="14",this.blur=new r.EventEmitter,this.change=new r.EventEmitter,this.focus=new r.EventEmitter,this.destroy$=new y.Subject,this.configModel=[],this.crudCustFieldName="cust_field",this.extraFieldConfig=null}get getCols(){return parseInt(this.cols,10)}ngOnChanges(e){if("config"in e&&this.init(e.config.currentValue),"tableName"in e&&(this.tableName=e.tableName.currentValue),"isValidate"in e){const t=e.isValidate.currentValue;"string"==typeof t&&(this.isValidate=JSON.parse(t))}if("editable"in e){const t=e.editable.currentValue;"string"==typeof t&&(this.editable=JSON.parse(t))}}ngOnInit(){this.configConverService.setGridLayout("cols",this.cols),this.configConverService.setGridLayout("labelSpan",this.labelSpan),this.configConverService.setGridLayout("inputSpan",this.inputSpan),null!==this.dwDocument&&this.dwDocument.getExtraFieldsConfig(this.tableName).pipe((0,g.delay)(100),(0,g.takeUntil)(this.destroy$)).subscribe(e=>{this.tableName&&e&&this.init(e)})}init(e){!e||0===e.length||(this.extraFieldConfig=JSON.parse(JSON.stringify(e)),this.configConverService.converConfig(this.extraFieldConfig,this.dwExtraFieldsValidators,this.editable,this.isValidate),this.configConverService.setExtraFieldsConfig(this.extraFieldConfig),this.configModel=this.configConverService.fromJSON(this.extraFieldConfig),this.syncFormControls(),super.ngOnInit(),this.formService.detectChanges(),this.changeDetectorRef.markForCheck())}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.remove()}syncFormControls(){let e=null;this.group.contains(this.crudCustFieldName)&&(e=this.group.get(this.crudCustFieldName).value,this.group.removeControl(this.crudCustFieldName));const t=new c.DynamicFormGroupModel({id:this.crudCustFieldName,group:this.configModel}),n=this.formService.findById(this.crudCustFieldName,this.model);n&&this.formService.removeFormGroupControl(this.model.indexOf(n),this.group,this.model),this.formService.addFormGroupControl(this.group,this.model,t),e&&("string"==typeof e&&(e=JSON.parse(e)),this.group.get(this.crudCustFieldName).patchValue(e))}remove(){this.model.length>0&&this.formService.removeFormGroupControl(0,this.group,this.model),this.componentService.unregisterForm(this)}isDatePicker(e){let t=!1;return this.extraFieldConfig.length&&this.extraFieldConfig.forEach(n=>{n.field_id===e&&"DATEPICKER"===n.field_type&&(t=!0)}),t}transStringToDate(e){for(const[t,n]of Object.entries(e)){if("string"!=typeof n||!n||!this.isDatePicker(t))continue;const r=this.dwDateFormat.concat(" ",this.dwTimeFormat);if(!isNaN(Date.parse(n))){const i=new Date(n);n!==new o.DatePipe("zh_tw").transform(i,r)&&(e[t]=i)}}}}return e.\u0275fac=function(t){return new(t||e)(r.\u0275\u0275directiveInject(r.ChangeDetectorRef),r.\u0275\u0275directiveInject(c.DynamicFormComponentService),r.\u0275\u0275directiveInject(c.DynamicFormService),r.\u0275\u0275directiveInject(q),r.\u0275\u0275directiveInject(z),r.\u0275\u0275directiveInject(v.APP_DATE_FORMAT),r.\u0275\u0275directiveInject(v.APP_TIME_FORMAT))},e.\u0275cmp=r.\u0275\u0275defineComponent({type:e,selectors:[["dw-extra-fields"]],contentQueries:function(e,t,n){if(1&e&&r.\u0275\u0275contentQuery(n,c.DynamicTemplateDirective,4),2&e){let e;r.\u0275\u0275queryRefresh(e=r.\u0275\u0275loadQuery())&&(t.templates=e)}},viewQuery:function(e,t){if(1&e&&r.\u0275\u0275viewQuery($,5),2&e){let e;r.\u0275\u0275queryRefresh(e=r.\u0275\u0275loadQuery())&&(t.components=e)}},inputs:{config:"config",editable:"editable",dwDocument:"dwDocument",tableName:"tableName",isValidate:"isValidate",cols:"cols",labelSpan:"labelSpan",inputSpan:"inputSpan",group:"group"},outputs:{blur:"blur",change:"change",focus:"focus"},features:[r.\u0275\u0275ProvidersFeature([c.DynamicFormComponentService]),r.\u0275\u0275InheritDefinitionFeature,r.\u0275\u0275NgOnChangesFeature],decls:3,vars:1,consts:[[1,"extra-fields-block"],["dw-row",""],["dw-col","",3,"dwSpan",4,"ngFor","ngForOf"],["dw-col","",3,"dwSpan"],[3,"labelSpan","inputSpan","model","group","templates"]],template:function(e,t){1&e&&(r.\u0275\u0275elementStart(0,"div",0),r.\u0275\u0275elementStart(1,"div",1),r.\u0275\u0275template(2,I,2,6,"div",2),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd()),2&e&&(r.\u0275\u0275advance(2),r.\u0275\u0275property("ngForOf",t.model))},directives:[s.DwRowDirective,o.NgForOf,s.DwColDirective,$],encapsulation:2,changeDetection:0}),e})();function X(e){const t=Object.assign(Object.assign({},e.validators),e.asyncValidators);return new Map(Object.entries(t))}const W=[$,K,G,k,Y,V,Q,U,J,B];let Z=(()=>{class e{static forConfig(t={validators:{},asyncValidators:{},errorMessages:{}}){return{ngModule:e,providers:[{provide:z,useValue:t},{provide:c.DYNAMIC_VALIDATORS,useFactory:X,deps:[z]},c.DynamicFormService,c.DynamicFormLayoutService,c.DynamicFormValidationService,c.DynamicFormComponentService,c.DynamicFormValidationService]}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=r.\u0275\u0275defineInjector({providers:[H,q],imports:[[o.CommonModule,i.FormsModule,i.ReactiveFormsModule,a.TranslateModule,l.DwFormModule,s.DwGridModule,u.DwInputNumberModule,p.DwInputModule,d.DwDatePickerModule,m.DwDropDownModule,f.DwSelectModule],c.DynamicFormsCoreModule]}),e})()},64762:function(e,t,n){n.d(t,{ZT:function(){return o},pi:function(){return i},_T:function(){return a},gn:function(){return c},fM:function(){return s},w6:function(){return l},mG:function(){return u},ev:function(){return p}});var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var i=function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function a(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}function c(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a}function s(e,t){return function(n,r){t(n,r,e)}}function l(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function u(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{s(r.next(e))}catch(t){i(t)}}function c(e){try{s(r.throw(e))}catch(t){i(t)}}function s(e){e.done?o(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(a,c)}s((r=r.apply(e,t||[])).next())})}function p(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)(r||!(o in t))&&(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))}}}]);