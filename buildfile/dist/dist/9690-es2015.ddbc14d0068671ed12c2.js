"use strict";(self.webpackChunkassc_crs=self.webpackChunkassc_crs||[]).push([[9690,4477],{69690:function(t,e,i){i.r(e),i.d(e,{DwActionAuthorizedDirective:function(){return l},DwActionModule:function(){return u}});var s=i(42746),d=i(55245),c=i(71049),n=i(47372),r=i(87974),o=i(32276);let l=(()=>{class t{constructor(t,e,i,d){this.el=t,this.renderer=e,this.actionAuthorizedService=i,this.activatedRoute=d,this.dwClick=new s.EventEmitter,this.clicks=new c.Subject}ngAfterViewInit(){this.clickAllow=!0,this.clicksSubscription=this.clicks.pipe((0,n.debounceTime)(500)).subscribe(t=>this.dwClick.emit(t)),this.dwDefaultAuthorized&&this.seAttribute(this.dwDefaultAuthorized),this.dwAuthorizedId?this.actionAuthorizedInit(this.dwAuthorizedId,this.dwActionId):this.activatedRoute.data.subscribe(t=>{t.dwRouteData&&t.dwRouteData.hasOwnProperty("dwAuthId")&&(this.dwAuthorizedId=t.dwRouteData.dwAuthId),this.actionAuthorizedInit(this.dwAuthorizedId,this.dwActionId)},t=>{console.log(t)})}ngOnDestroy(){this.clicksSubscription&&this.clicksSubscription.unsubscribe()}clickEvent(t,e){t.preventDefault(),t.stopPropagation(),this.clickAllow&&!e.disabled&&this.clicks.next(t)}actionAuthorizedInit(t,e){t&&e&&this.actionAuthorizedService.getActionAuth(t,e).pipe((0,n.switchMap)(t=>this.dwActionAuthorizedCallback?this.dwActionAuthorizedCallback(t,this.dwAuthorizedId,this.dwActionId):c.Observable.create(e=>{e.next(t),e.complete()}))).subscribe(t=>{this.seAttribute(t)},t=>{console.log(e+":"+t)})}seAttribute(t){switch(t){case"allow":this.seAttributeAllow(),this.clickAllow=!0;break;case"hidden":this.seAttributeHidden(!0),this.clickAllow=!1;break;case"disabled":this.seAttributeDisabled(!0),this.seAttributeHidden(!1),this.clickAllow=!1}}seAttributeAllow(){this.seAttributeHidden(!1),this.seAttributeDisabled(!1)}seAttributeHidden(t){let e="";t&&(e="none"),this.renderer.setStyle(this.el.nativeElement,"display",e)}seAttributeDisabled(t){this.el.nativeElement.disabled=t,"BUTTON"!==this.el.nativeElement.tagName&&(t?this.renderer.addClass(this.el.nativeElement,"dw-f-action-disable"):this.renderer.removeClass(this.el.nativeElement,"dw-f-action-disable"))}}return t.\u0275fac=function(e){return new(e||t)(s.\u0275\u0275directiveInject(s.ElementRef),s.\u0275\u0275directiveInject(s.Renderer2),s.\u0275\u0275directiveInject(o.DwActionAuthorizedService),s.\u0275\u0275directiveInject(r.ActivatedRoute))},t.\u0275dir=s.\u0275\u0275defineDirective({type:t,selectors:[["","dwActionAuthorized",""]],hostBindings:function(t,e){1&t&&s.\u0275\u0275listener("click",function(t){return e.clickEvent(t,t.target)})},inputs:{dwAuthorizedId:"dwAuthorizedId",dwActionId:"dwActionId",dwDefaultAuthorized:"dwDefaultAuthorized",dwActionAuthorizedCallback:"dwActionAuthorizedCallback"},outputs:{dwClick:"dwClick"}}),t})(),u=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=s.\u0275\u0275defineInjector({imports:[[d.CommonModule]]}),t})()}}]);