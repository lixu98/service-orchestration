"use strict";(self.webpackChunkassc_crs=self.webpackChunkassc_crs||[]).push([[4535,8298],{94535:function(e,t,r){r.r(t),r.d(t,{DwOmHttpClient:function(){return l},DwOmHttpErrorHandler:function(){return h},DwOmModule:function(){return f}});var i=r(42746),n=r(87974),s=r(52575),c=r(83522),o=r(30469),a=r(32276),u=r(55245),d=r(20033);let f=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[u.CommonModule],s.DwHttpModule]}),e})(),h=(()=>{class e{constructor(e,t,r,i,n){this.route=e,this.translate=t,this.configService=r,this.injector=i,this.dwMessageService=n,this.configService.getConfig().subscribe(e=>{this.defaultLogin=e.defaultLogin})}handlerError(e){const t=e.error,r=this.injector.get(a.DwAuthService);if(t&&t.errorCode)switch(t.errorCode){case"10001":case"10002":case"10003":case"10901":case"10902":case"109000":case"10004":t.errorMessage&&this.dwMessageService.error(t.errorMessage).subscribe(),r.logout();break;case"10801":case"10802":case"10803":case"10804":const e=this.translate.instant("dw-http-error-cac-title"),i=this.translate.instant("dw-http-error-cac-authorization-failure");this.dwMessageService.warning({dwTitle:e,dwContent:i}).subscribe()}}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(n.Router),i.\u0275\u0275inject(c.TranslateService),i.\u0275\u0275inject(o.DwSystemConfigService),i.\u0275\u0275inject(i.Injector),i.\u0275\u0275inject(s.DwHttpMessageService))},e.\u0275prov=i.\u0275\u0275defineInjectable({factory:function(){return new e(i.\u0275\u0275inject(n.Router),i.\u0275\u0275inject(c.TranslateService),i.\u0275\u0275inject(o.DwSystemConfigService),i.\u0275\u0275inject(i.INJECTOR),i.\u0275\u0275inject(s.DwHttpMessageService))},token:e,providedIn:f}),e})(),l=(()=>{class e extends s.DwHttpClient{constructor(e,t,r,i,n,s,c,o,a){super(e,a),this.dwHttpRequestUrlService=e,this.configService=t,this.dwAppAuthToken=r,this.authToken=i,this.omHttpError=n,this.activatedRoute=s,this.dwRouterInfoService=c,this.programInfoListJsonService=o,this.dwHttpLoadMaskService=a,this.getApiUrl().subscribe(e=>{this.api=e})}getApiUrl(){return this.configService.get("omUrl")}get defaultHeaders(){const e=this.authToken.token?this.authToken.token:"";let t=this.dwRouterInfoService.routerProgramId(this.activatedRoute),r="";if(null===t)t="default",r="default";else{const e=this.programInfoListJsonService.programListJsonMap[t];e?r=e.module:(t="default",r="default")}return{"digi-middleware-auth-app":this.dwAppAuthToken,token:e,"Module-Name":r,"Program-Code":t}}responseIntercept(e){return e&&e.response?e.response:e}errorHandler(e){e.error&&e.error.status&&this.omHttpError.handlerError(e)}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(s.DwHttpRequestUrlService),i.\u0275\u0275inject(o.DwSystemConfigService),i.\u0275\u0275inject(o.DW_APP_AUTH_TOKEN),i.\u0275\u0275inject(a.DW_AUTH_TOKEN),i.\u0275\u0275inject(h),i.\u0275\u0275inject(n.ActivatedRoute),i.\u0275\u0275inject(d.DwRouterInfoService),i.\u0275\u0275inject(d.DwProgramInfoListJsonService),i.\u0275\u0275inject(s.DwHttpLoadMaskService))},e.\u0275prov=i.\u0275\u0275defineInjectable({factory:function(){return new e(i.\u0275\u0275inject(s.DwHttpRequestUrlService),i.\u0275\u0275inject(o.DwSystemConfigService),i.\u0275\u0275inject(o.DW_APP_AUTH_TOKEN),i.\u0275\u0275inject(a.DW_AUTH_TOKEN),i.\u0275\u0275inject(h),i.\u0275\u0275inject(n.ActivatedRoute),i.\u0275\u0275inject(d.DwRouterInfoService),i.\u0275\u0275inject(d.DwProgramInfoListJsonService),i.\u0275\u0275inject(s.DwHttpLoadMaskService))},token:e,providedIn:f}),e})()}}]);