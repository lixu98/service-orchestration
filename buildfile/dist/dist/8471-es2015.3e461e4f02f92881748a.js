"use strict";(self.webpackChunkassc_crs=self.webpackChunkassc_crs||[]).push([[8471,3312],{98471:function(t,e,i){i.r(e),i.d(e,{DwDivMaskComponent:function(){return u},DwDivMaskModule:function(){return p},DwLoadMaskOptionsService:function(){return d},DwLoadMaskService:function(){return g}});var s=i(42746),n=i(87974),o=i(47372),r=i(55245),a=i(30469),c=i(24540),l=i(52575);const h=["maskDiv"];let u=(()=>{class t{constructor(t,e,i,s){this.router=t,this.elem=e,this._usingTab=i,this.doc=s,this._maskTriggers=[]}set targetDiv(t){this._targetDiv=t}get targetDiv(){return this._targetDiv}set maskTriggers(t){this._maskTriggers=t}get maskTriggers(){return this._maskTriggers}set showMask(t){this._showMask=t,this.menuFlod=this.doc.querySelector(".anticon-menu-fold"),this.menuUnFlod=this.doc.querySelector(".anticon-menu-unfold"),this.tabWrap=this.doc.querySelector(".ant-tabs-nav-wrap"),t?setTimeout(()=>{const t=this.maskDiv.nativeElement,e=this.targetDiv;t.style.width=e.offsetWidth+"px",t.style.height=e.offsetHeight+"px",t.style.top=e.getBoundingClientRect().top+e.scrollTop+"px",t.style.left=e.getBoundingClientRect().left+e.scrollLeft+"px",window.addEventListener("scroll",this.onScrollFn,!0),this.tabWrap&&this.tabWrap.addEventListener("click",this.onDocClickFn,!0),this._maskTriggers.forEach(t=>{t.addEventListener("click",this.onDocClickFn,!0)})},0):(window.removeEventListener("scroll",this.onScrollFn,!0),this.tabWrap&&this.tabWrap.removeEventListener("click",this.onDocClickFn,!0),this._maskTriggers.forEach(t=>{t.removeEventListener("click",this.onDocClickFn,!0)}))}get showMask(){return this._showMask}onResize(t){this._resizing||this.adjustMask(600)}onScroll(){if(this.showMask){const t=this.maskDiv.nativeElement,e=this.targetDiv;t.style.top=e.getBoundingClientRect().top+e.scrollTop+"px",t.style.left=e.getBoundingClientRect().left+e.scrollLeft+"px"}}onDocClick(){this.showMask&&(this.maskDiv.nativeElement.style.height="0px",this.adjustMask(500))}adjustMask(t){this._resizing=!0,setTimeout(()=>{const t=this.maskDiv.nativeElement,e=this.targetDiv;e&&this.showMask&&(t.style.top=e.getBoundingClientRect().top+e.scrollTop+"px",t.style.left=e.getBoundingClientRect().left+e.scrollLeft+"px",t.style.width=e.offsetWidth+"px",t.style.height=e.offsetHeight+"px",this._resizing=!1)},t)}ngAfterViewInit(){}ngOnDestroy(){console.log("destory"),this.routeSub.unsubscribe()}ngOnInit(){this.onScrollFn=this.onScroll.bind(this),this.onDocClickFn=this.onDocClick.bind(this),this.routeSub=this.router.events.subscribe(t=>{t instanceof n.NavigationStart&&(console.log("NavigationStart"),window.removeEventListener("scroll",this.onScrollFn,!0),this.tabWrap&&this.tabWrap.removeEventListener("click",this.onDocClickFn,!0),this._maskTriggers.forEach(t=>{t.removeEventListener("click",this.onDocClickFn,!0)}),this.routeSub&&this.routeSub.unsubscribe())}),this._usingTab&&(this.routeSub2=this.router.events.pipe((0,o.filter)(t=>t instanceof n.NavigationEnd),(0,o.distinct)(t=>t)).subscribe(t=>{this.showMask=this.showMask,this.routeSub2&&this.routeSub2.unsubscribe()}))}}return t.\u0275fac=function(e){return new(e||t)(s.\u0275\u0275directiveInject(n.Router),s.\u0275\u0275directiveInject(s.ElementRef),s.\u0275\u0275directiveInject(a.DW_USING_TAB),s.\u0275\u0275directiveInject(r.DOCUMENT))},t.\u0275cmp=s.\u0275\u0275defineComponent({type:t,selectors:[["dw-div-mask"]],viewQuery:function(t,e){if(1&t&&s.\u0275\u0275viewQuery(h,7),2&t){let t;s.\u0275\u0275queryRefresh(t=s.\u0275\u0275loadQuery())&&(e.maskDiv=t.first)}},hostBindings:function(t,e){1&t&&s.\u0275\u0275listener("resize",function(t){return e.onResize(t)},!1,s.\u0275\u0275resolveWindow)},inputs:{targetDiv:"targetDiv",maskTriggers:"maskTriggers",showMask:"showMask",customStyle:"customStyle"},decls:2,vars:3,consts:[[1,"dwDivMask",3,"ngStyle"],["maskDiv",""]],template:function(t,e){1&t&&s.\u0275\u0275element(0,"div",0,1),2&t&&(s.\u0275\u0275styleProp("display",e.showMask?"block":"none"),s.\u0275\u0275property("ngStyle",e.customStyle))},directives:[r.NgStyle],styles:[""]}),t})(),d=(()=>{class t{constructor(t){this.dwLoadingMaskService=t}setLoadMaskCfg(t,e,i,s){const n=Object.assign({},t),o=this.getUiOptions(n),r=this.dwLoadingMaskService.nullConfig();return o?o.hasOwnProperty("loadMaskCfg")||(n.uiOptions.loadMaskCfg=r):n.uiOptions={loadMaskCfg:r},null!=e&&(n.uiOptions.loadMaskCfg.spinning=e),null!=i&&(n.uiOptions.loadMaskCfg.delay=i),null!=s&&(n.uiOptions.loadMaskCfg.tip=s),n}getUiOptions(t){let e=null;return t&&t.hasOwnProperty("uiOptions")&&(e=t.uiOptions),e}getLoadingMaskCfg(t){const e=this.dwLoadingMaskService.nullConfig();if(t&&t.hasOwnProperty("loadMaskCfg")){const i=t.loadMaskCfg;i.hasOwnProperty("spinning")&&(e.spinning=i.spinning),i.hasOwnProperty("delay")&&(e.delay=i.delay),i.hasOwnProperty("tip")&&(e.tip=i.tip)}return e}}return t.\u0275fac=function(e){return new(e||t)(s.\u0275\u0275inject(c.DwLoadingMaskService))},t.\u0275prov=s.\u0275\u0275defineInjectable({factory:function(){return new t(s.\u0275\u0275inject(c.DwLoadingMaskService))},token:t,providedIn:"root"}),t})(),g=(()=>{class t{constructor(t,e){this.dwHttpClientOptionsService=t,this.dwLoadingMaskService=e}showMask(t){const e=this.dwHttpClientOptionsService.getUiOptions(t),i=this.dwHttpClientOptionsService.getLoadingMaskCfg(e);return this.dwLoadingMaskService.auto(i.spinning,i.delay,i.tip)}hideMask(t){!t||this.dwLoadingMaskService.hide(t)}clear(){this.dwLoadingMaskService.clear()}}return t.\u0275fac=function(e){return new(e||t)(s.\u0275\u0275inject(d),s.\u0275\u0275inject(c.DwLoadingMaskService))},t.\u0275prov=s.\u0275\u0275defineInjectable({factory:function(){return new t(s.\u0275\u0275inject(d),s.\u0275\u0275inject(c.DwLoadingMaskService))},token:t,providedIn:"root"}),t})(),p=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=s.\u0275\u0275defineInjector({providers:[g,{provide:l.DwHttpLoadMaskService,useExisting:g},d,{provide:l.DwHttpClientOptionsService,useExisting:d}],imports:[[r.CommonModule]]}),t})()}}]);