"use strict";(self.webpackChunkassc_crs=self.webpackChunkassc_crs||[]).push([[6459,6678],{71087:function(e,r,n){n.r(r),n.d(r,{DwAccountInfoDataSourceService:function(){return h},DwAccountInfoService:function(){return p},DwAccountInfoUploadService:function(){return m},DwAccountModule:function(){return d},DwChangePasswordInfoService:function(){return g},DwDeclarationService:function(){return y},DwForgetService:function(){return b},DwLoginTypeEnum:function(){return f},DwUpdatePasswordService:function(){return v},DwUserTypeEnum:function(){return u},IDwForgetverificationType:function(){return w}});var t=n(42746),o=n(71049),a=n(47372),i=n(83522),s=n(30469),c=n(55245),l=n(66800),u=(()=>{return(e=u||(u={}))[e.GENERAL=0]="GENERAL",e[e.INTERNAL=1]="INTERNAL",u;var e})(),f=(()=>{return(e=f||(f={}))[e.GENERAL=0]="GENERAL",e[e.INTERNAL=1]="INTERNAL",f;var e})();let d=(()=>{class e{}return e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=t.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=t.\u0275\u0275defineInjector({imports:[[c.CommonModule]]}),e})(),p=(()=>{class e{constructor(e,r,n){this.configService=e,this.translateService=r,this.userService=n,this.configService.get("multiTenant").subscribe(e=>{this.dwMultiTenant=e})}getDefaultConfig(){this.userType=this.userService.getUser("userType");const e=[{type:"label",name:"id",columns:2,label:"dw-account-info-form-id"},{type:"input",name:"name",columns:2,label:"dw-account-info-form-name",required:!0},{type:"input",name:"nickname",columns:2,label:"dw-account-info-form-nickname"},{type:"radio",name:"sex",columns:2,label:"dw-account-info-form-sex",option:[{label:"dw-account-info-form-sex-male",value:"male"},{label:"dw-account-info-form-sex-female",value:"female"},{label:"dw-account-info-form-sex-unknow",value:"unknow"}]},{type:"date",name:"birthday",columns:2,label:"dw-account-info-form-birthday"},{type:"phone",name:"telephone",columns:2,label:"dw-account-info-form-telephone",required:!0,validators:[],prefix:{type:"prefixSelect",name:"cellphonePrefix",label:"",required:!0,option:[{label:"+86",value:"+86"},{label:"+886",value:"+886"}]}},{type:"input",name:"email",validators:[],columns:1,label:"dw-account-info-form-email"},{type:"input",name:"address",columns:1,label:"dw-account-info-form-address"},{type:"checkbox",name:"readCheck",columns:1,required:!0,label:"dw-account-info-form-readCheck"}];if(this.dwMultiTenant){const r=e.findIndex(e=>"email"===e.name);r>=0&&Object.assign(e[r],{required:this.userType!==u.INTERNAL});const n=e.findIndex(e=>"telephone"===e.name);n>=0&&(Object.assign(e[n],{required:this.userType!==u.INTERNAL}),Object.assign(e[n].prefix,{required:this.userType!==u.INTERNAL}),this.userType===u.INTERNAL&&e[n].prefix.option.push({label:"",value:""}))}return e}getGridConfig(e){const r={colSpan:12,labelSpan:8,inputSpan:16};return 1===e&&Object.assign(r,{colSpan:24,labelSpan:4,inputSpan:20}),r}getFullConfig(e){return e.forEach(e=>{this.setItemConfig(e),e.hasOwnProperty("prefix")&&this.setItemConfig(e.prefix)}),e}setItemConfig(e){if(e.hasOwnProperty("validators")||Object.assign(e,{validators:[]}),e.hasOwnProperty("asyncValidators")||Object.assign(e,{asyncValidators:[]}),e.hasOwnProperty("required")||Object.assign(e,{required:!1}),e.hasOwnProperty("disabled")||Object.assign(e,{disabled:!1}),e.hasOwnProperty("selectShowSearch")||Object.assign(e,{selectShowSearch:!1}),e.hasOwnProperty("selectMode")||Object.assign(e,{selectMode:"default"}),!e.hasOwnProperty("placeHolder")&&e.label){const r=this.translateService.instant(e.label);Object.assign(e,{placeHolder:this.translateService.instant("dw-account-info-form-placeHolder-prefix",{label:r})})}e.hasOwnProperty("columns")||Object.assign(e,{columns:2}),e.hasOwnProperty("grid")||Object.assign(e,{grid:this.getGridConfig(e.columns)})}verifyEmailExist(e){return r=>(0,o.timer)(500).pipe((0,a.switchMap)(()=>!e||e.hasOwnProperty("email")&&e.email===r.value?(0,o.of)(null):this.verifyExist("email",r.value).pipe((0,a.map)(e=>!0!==e.isRegister?null:{"dw-account-info-form-emailRepeat":!0}),(0,a.catchError)(e=>{if(console.log("error-email>>>",e),e.hasOwnProperty("error")&&e.error.hasOwnProperty("errorMessage")&&e.error.errorMessage)return(0,o.of)({[e.error.errorMessage]:!0})}))))}userMobilephoneNumeric(){const e=new RegExp("^(\\d|[0-9]+)$");return r=>r.value?e.test(r.value)?null:{"dw-account-info-form-needsDigits":!0}:null}verifyMobilephone(e){return r=>(0,o.timer)(500).pipe((0,a.switchMap)(()=>!e||e.hasOwnProperty("telephone")&&e.telephone===r.value?(0,o.of)(null):this.verifyExist("telephone",r.value).pipe((0,a.map)(e=>!0!==e.isRegister?null:{"dw-account-info-form-phoneRepeat":!0}),(0,a.catchError)(e=>{if(console.log("telephone-email>>>",e),e.hasOwnProperty("error")&&e.error.hasOwnProperty("errorMessage")&&e.error.errorMessage)return(0,o.of)({[e.error.errorMessage]:!0})}))))}verifyExist(e,r){const n={};switch(e){case"email":case"telephone":n.isRegister=!0}return(0,o.of)(n)}}return e.\u0275fac=function(r){return new(r||e)(t.\u0275\u0275inject(s.DwSystemConfigService),t.\u0275\u0275inject(i.TranslateService),t.\u0275\u0275inject(l.DwUserService))},e.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new e(t.\u0275\u0275inject(s.DwSystemConfigService),t.\u0275\u0275inject(i.TranslateService),t.\u0275\u0275inject(l.DwUserService))},token:e,providedIn:d}),e})(),h=(()=>{class e{constructor(){}getUserBasicInfo(e){return new o.Observable(e=>{e.next({sid:39882414600768,createBy:0,createProvider:0,createOrg:0,createDate:"2019-04-08 08:00:00",modifyBy:39882414600768,modifyById:"cloud01",modifyProvider:0xb6869e920422c80,modifyDate:"2019-08-06 08:00:00",hash:"1736a33b1c129c49ffe7175f1596986989b963d4",disabled:!1,deleted:!1,id:"cloud01",name:"cloud01",telephone:"11111111001",email:"cloud01@digiwin.com1",headImageUrl:"",nickname:"cloud01",sex:"\u5973",birthday:"1977/01/23",cellphonePrefix:"+86",address:"\u53f0\u4e2d",activated:!0,enterprise:!1,defaultTenantSid:0,confirm:!1,visible:!0,readonly:!1,chargeSid:0}),e.complete()})}updateUserBasicInfo(e){return new o.Observable(e=>{e.next(!0),e.complete()})}refreshUserInfo(e){return new o.Observable(e=>{e.next(!0),e.complete()})}}return e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new e},token:e,providedIn:d}),e})(),m=(()=>{class e{constructor(){}uploadAndShare(e,r,n){return new o.Observable(e=>{e.next({fileId:"1234567890"}),e.complete()})}updateUserHeadimageUrl(e,r){return new o.Observable(e=>{e.next(!0),e.complete()})}}return e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new e},token:e,providedIn:d}),e})();var w=(()=>{return(e=w||(w={})).EMAIL="email",e.MOBILEPHONE="mobilephone",w;var e})();let b=(()=>{class e{constructor(){}getVerificationCode(e,r){const n={};switch(e){case"mobilephone":n.result="success"}return(0,o.of)(n)}updatePassword(e){return(0,o.of)(null)}verifyExist(e,r){const n={};switch(e){case"email":case"telephone":n.isRegister=!0}return(0,o.of)(n)}}return e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new e},token:e,providedIn:d}),e})(),v=(()=>{class e{constructor(){}getUserBasicInfo(e){return new o.Observable(e=>{e.next({email:"miller@abc.com",telephone:"11111111111"}),e.complete()})}getVerificationCode(e,r){const n={};switch(e){case"email":case"mobilephone":n.result="success"}return(0,o.of)(n)}userPasswordUpdate(e){return(0,o.of)(null)}userPasswordUpdateForce(e){return(0,o.of)(null)}userUpdatePasswordWithOldPassword(e){return(0,o.of)(null)}}return e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new e},token:e,providedIn:d}),e})(),g=(()=>{class e{constructor(){this.changedStatusSubject=new o.BehaviorSubject(null),this.openModalSubject=new o.BehaviorSubject(null)}shouldChanedPassword(){return(0,o.of)(!0)}get changedStatus$(){return this.changedStatusSubject.asObservable().pipe((0,a.filter)(e=>null!==e))}get openChangePasswordModal$(){return this.openModalSubject.asObservable().pipe((0,a.filter)(e=>null!==e))}activeChangedStatus(){}notActiveChangedStatus(){}}return e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new e},token:e,providedIn:d}),e})(),y=(()=>{class e{constructor(){this.agreeStatusSubject=new o.BehaviorSubject(null),this.openModalSubject=new o.BehaviorSubject(null)}shouldAgree(e){return(0,o.of)(!0)}get openAgreeModal$(){return this.openModalSubject.asObservable().pipe((0,a.filter)(e=>null!==e))}get agreeStatus$(){return this.agreeStatusSubject.asObservable().pipe((0,a.filter)(e=>null!==e))}activeAgreeStatus(){}notActiveAgreeStatus(){}}return e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=t.\u0275\u0275defineInjectable({factory:function(){return new e},token:e,providedIn:d}),e})()}}]);