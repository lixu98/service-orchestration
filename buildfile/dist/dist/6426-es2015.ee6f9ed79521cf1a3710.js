"use strict";(self.webpackChunkassc_crs=self.webpackChunkassc_crs||[]).push([[6426],{70742:function(e,t,s){s.r(t),s.d(t,{DwPostMessageConnect:function(){return a},DwPostMessageFactoryService:function(){return _},DwPostMessageHub:function(){return u},DwPostMessageManager:function(){return h},PostMessageListener:function(){return l},"\u0275a":function(){return c},"\u0275b":function(){return o}});var n=s(42746),r=s(30469),i=s(71049);let c=(()=>{class e{constructor(e,t){this.dwAppId=e,this.dwAppAuthToken=t}auth(e){return!(!this.dwAppId||!this.dwAppAuthToken)&&this.dwAppId===e.appId&&this.dwAppAuthToken===e.appToken}}return e.\u0275fac=function(t){return new(t||e)(n.\u0275\u0275inject(r.DW_APP_ID),n.\u0275\u0275inject(r.DW_APP_AUTH_TOKEN))},e.\u0275prov=n.\u0275\u0275defineInjectable({factory:function(){return new e(n.\u0275\u0275inject(r.DW_APP_ID),n.\u0275\u0275inject(r.DW_APP_AUTH_TOKEN))},token:e,providedIn:"root"}),e})();class o{constructor(e){this._events={},this._subscribers=new Map,this._authFunc=e}addListener(e,t){let s=this._events[e],r=this._subscribers.get(e);s||(s=new n.EventEmitter(!1),this._events[e]=s);const i=s.subscribe(t);r||(r=new Map,this._subscribers.set(e,r)),r.set(t,i)}handleMessage(e){const t=this._events[e.data.channelName];t&&(!this._authFunc||this._authFunc.auth(e.data))&&t.emit(e.data.data)}removeAllListeners(){this._subscribers.forEach((e,t)=>{this.removeListener(t)})}removeListener(e,t){const s=this._subscribers.get(e);if(t){if(s){const n=s.get(t);n&&(n.unsubscribe(),s.delete(t),0===s.size&&this._subscribers.delete(e))}}else s&&(s.forEach(e=>{e.unsubscribe()}),s.clear(),this._subscribers.delete(e))}}class a extends o{constructor(e,t,s){super(s),this._source=e,this._target=t,e.addEventListener("message",e=>this.handleMessage(e))}disconnect(){}send(e,t){this._target.postMessage(Object.assign(Object.assign({},e),{sourceUrl:`${window.location.protocol}//${window.location.host}`}),t||"*")}}class u extends o{constructor(e){super(),this._targets=[],e.addEventListener("message",e=>this.handleMessage(e))}send(e){for(let t=0;t<this._targets.length;t++){const s=this._targets[t],n=new URL(s.origin);s.target.postMessage(Object.assign(Object.assign({},e),{sourceUrl:`${window.location.protocol}//${window.location.host}`}),`${n.protocol}//${n.host}`)}}addReceiver(e,t){this._targets.find(t=>t.target===e)||this._targets.push({origin:t,target:e})}removeReceiver(e){let t=-1;for(let s=0;s<this._targets.length;s++)if(this._targets[s].target===e){t=s;break}t>-1&&this._targets.splice(t,1)}}let _=(()=>{class e{constructor(t){return this.messageAuthService=t,e._hub||(e._hub=new u(window)),e._instance=e._instance||this}getHubInstance(){return e._hub}connect(e){return new a(window,e,this.messageAuthService)}}return e.\u0275fac=function(t){return new(t||e)(n.\u0275\u0275inject(c,8))},e._instance=null,e._hub=null,e.\u0275prov=n.\u0275\u0275defineInjectable({factory:function(){return new e(n.\u0275\u0275inject(c,8))},token:e,providedIn:"root"}),e})(),h=(()=>{class e{constructor(t){for(this.messageService=t,this.__destroy$__=new i.Subject;e.__listeners__.length>0;)e.__listeners__.pop().apply(this)}ngOnDestroy(){this.__destroy$__.unsubscribe(),this.__destroy$__.complete()}}return e.\u0275fac=function(t){return new(t||e)(n.\u0275\u0275inject(_))},e.\u0275prov=n.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e.__listeners__=[],e})();function l(e){return(e,t,s)=>{const n=Object.getPrototypeOf(e).constructor;return n&&n.__listeners__&&n.__listeners__.push(function(){}),s}}}}]);