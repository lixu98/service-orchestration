"use strict";(self.webpackChunkassc_crs=self.webpackChunkassc_crs||[]).push([[3074,8420],{33074:function(e,t,n){n.r(t),n.d(t,{DwUserPersonalizeComponent:function(){return S},DwUserUiModule:function(){return x}});var i=n(42746),r=n(66800),o=n(68521),s=n(32276),a=n(44720),d=n(55245),l=n(87858),c=n(83522),p=n(61315),w=n(46375),m=n(52683),u=n(80376),h=n(85277);function f(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"span",3),i.\u0275\u0275element(1,"i",4),i.\u0275\u0275elementStart(2,"span"),i.\u0275\u0275text(3),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()),2&e){const e=i.\u0275\u0275nextContext();i.\u0275\u0275advance(3),i.\u0275\u0275textInterpolate(e.userDetail.userName)}}function v(e,t){if(1&e){const e=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"span",5),i.\u0275\u0275listener("dwPopoverVisibleChange",function(t){return i.\u0275\u0275restoreView(e),i.\u0275\u0275nextContext().visibleFromTitle=t}),i.\u0275\u0275element(1,"i",4),i.\u0275\u0275elementStart(2,"span"),i.\u0275\u0275text(3),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()}if(2&e){const e=i.\u0275\u0275nextContext(),t=i.\u0275\u0275reference(3);i.\u0275\u0275property("dwPopoverVisible",e.visibleFromTitle)("dwPopoverContent",t),i.\u0275\u0275advance(3),i.\u0275\u0275textInterpolate(e.userDetail.userName)}}function g(e,t){if(1&e){const e=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"a",10),i.\u0275\u0275listener("click",function(){i.\u0275\u0275restoreView(e);const t=i.\u0275\u0275nextContext().$implicit;return i.\u0275\u0275nextContext(2).personalize(t.id)}),i.\u0275\u0275text(1),i.\u0275\u0275pipe(2,"translate"),i.\u0275\u0275elementEnd()}if(2&e){const e=i.\u0275\u0275nextContext().$implicit;i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate(i.\u0275\u0275pipeBind1(2,1,e.title))}}function P(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"dw-list-item"),i.\u0275\u0275elementStart(1,"dw-list-item-meta",8),i.\u0275\u0275template(2,g,3,3,"ng-template",null,9,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()),2&e){const e=i.\u0275\u0275reference(3);i.\u0275\u0275advance(1),i.\u0275\u0275property("dwTitle",e)}}function I(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"dw-list",6),i.\u0275\u0275template(1,P,4,1,"ng-template",null,7,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275elementEnd()),2&e){const e=i.\u0275\u0275reference(2),t=i.\u0275\u0275nextContext();i.\u0275\u0275property("dwDataSource",t.data)("dwRenderItem",e)("dwItemLayout","horizontal")}}let S=(()=>{class e{constructor(e,t,n,i,r){this.userService=e,this.programExecuteService=t,this.dwAuthPermissionInfoService=n,this.dwUpdatePasswordModalService=i,this.dwLanguagePreService=r,this.data=[],this.userDetail={},this.programPre=this.dwLanguagePreService.program,this.userDetail=this.userService.getUserInfo()}ngOnDestroy(){this.permissionSubscription&&this.permissionSubscription.unsubscribe()}ngOnInit(){const e=[{id:"update-password",title:"dw-update-password-title"},{id:"dw-home-setting",title:this.programPre+"dw-home-setting",dwAuthId:"dw-home-setting"},{id:"dw-theme-setting",title:this.programPre+"dw-theme-setting",dwAuthId:"dw-theme-setting"}];this.permissionSubscription=this.dwAuthPermissionInfoService.authorizedList$.subscribe(t=>{if(t){const n=t;e.forEach(e=>{e.dwAuthId?void 0!==n[e.dwAuthId]&&this.data.push(e):this.data.push(e)})}})}personalize(e){switch(this.visibleFromTitle=!1,e){case"update-password":this.updatePassword();break;default:this.programExecuteService.byId(e)}}updatePassword(){this.dwUpdatePasswordModalService.open().subscribe(e=>{console.log("ret>>>",e)})}}return e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(r.DwUserService),i.\u0275\u0275directiveInject(o.DwProgramExecuteService),i.\u0275\u0275directiveInject(s.DwAuthPermissionInfoService),i.\u0275\u0275directiveInject(a.DwUpdatePasswordModalService),i.\u0275\u0275directiveInject(o.DwLanguagePreService))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["dw-user-personalize"]],decls:4,vars:2,consts:[["class","dw-f-header-item",4,"ngIf"],["dw-popover","","dwPopoverTrigger","click","dwPopoverPlacement","bottomRight","class","dw-f-header-item dw-f-text-link",3,"dwPopoverVisible","dwPopoverContent","dwPopoverVisibleChange",4,"ngIf"],["userPersonalizeTemp",""],[1,"dw-f-header-item"],["dw-icon","","dwType","user",1,"dw-header-icon"],["dw-popover","","dwPopoverTrigger","click","dwPopoverPlacement","bottomRight",1,"dw-f-header-item","dw-f-text-link",3,"dwPopoverVisible","dwPopoverContent","dwPopoverVisibleChange"],["dwSize","small",3,"dwDataSource","dwRenderItem","dwItemLayout"],["item",""],[3,"dwTitle"],["dwTitle",""],[3,"click"]],template:function(e,t){1&e&&(i.\u0275\u0275template(0,f,4,1,"span",0),i.\u0275\u0275template(1,v,4,3,"span",1),i.\u0275\u0275template(2,I,3,3,"ng-template",null,2,i.\u0275\u0275templateRefExtractor)),2&e&&(i.\u0275\u0275property("ngIf",0===t.data.length),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",t.data.length>0))},directives:[d.NgIf,h.DwIconDirective,m.DwPopoverDirective,u.DwListComponent,u.DwListItemComponent,u.DwListItemMetaComponent],pipes:[c.TranslatePipe],styles:[""]}),e})(),x=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({imports:[[d.CommonModule,c.TranslateModule,m.DwPopoverModule,u.DwListModule,h.DwIconModule],p.DwForgetModule,w.DwAccountInfoModule,l.DwTenantModule]}),e})()}}]);