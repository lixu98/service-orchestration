"use strict";(self.webpackChunkassc_crs=self.webpackChunkassc_crs||[]).push([[6887],{75061:function(e,t,i){i.r(t),i.d(t,{DwImageViewerComponent:function(){return We},DwImageViewerFileIconComponent:function(){return Be},DwImageViewerFileService:function(){return _e},DwImageViewerListItemComponent:function(){return Ne},DwImageViewerListService:function(){return Ue},DwImageViewerModalComponent:function(){return je},DwImageViewerModule:function(){return Ze},DwImageViewerService:function(){return Le}});var n=i(42746),o=i(71049),r=i(31441),l=i(83522),a=i(45538),s=i.n(a),c=i(32126),d=i(83237),w=i(59083),m=i(55245),p=i(85277),h=i(52683),g=i(57252),f=i(41430),u=i(93029);function v(e,t){1&e&&n.\u0275\u0275element(0,"i",12)}function y(e,t){if(1&e&&(n.\u0275\u0275elementStart(0,"div",9),n.\u0275\u0275template(1,v,1,0,"ng-template",null,10,n.\u0275\u0275templateRefExtractor),n.\u0275\u0275elementStart(3,"dw-spin",11),n.\u0275\u0275text(4),n.\u0275\u0275pipe(5,"translate"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementEnd()),2&e){const e=n.\u0275\u0275reference(2);n.\u0275\u0275advance(3),n.\u0275\u0275property("dwIndicator",e),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate(n.\u0275\u0275pipeBind1(5,2,"dw-reading"))}}function S(e,t){1&e&&n.\u0275\u0275element(0,"i",12)}function x(e,t){if(1&e&&(n.\u0275\u0275elementStart(0,"div",9),n.\u0275\u0275template(1,S,1,0,"ng-template",null,10,n.\u0275\u0275templateRefExtractor),n.\u0275\u0275elementStart(3,"dw-spin",11),n.\u0275\u0275text(4),n.\u0275\u0275pipe(5,"translate"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementEnd()),2&e){const e=n.\u0275\u0275reference(2);n.\u0275\u0275advance(3),n.\u0275\u0275property("dwIndicator",e),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate(n.\u0275\u0275pipeBind1(5,2,"dw-downloading"))}}function C(e,t){if(1&e&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275element(1,"dw-image-viewer-file-icon",13),n.\u0275\u0275elementContainerEnd()),2&e){const e=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(1),n.\u0275\u0275property("mimeType",e.viewerFileType)("ngStyle",e.dwItemFileiconStyle)}}function b(e,t){if(1&e&&(n.\u0275\u0275elementContainerStart(0,6),n.\u0275\u0275template(1,y,6,4,"div",7),n.\u0275\u0275template(2,x,6,4,"div",7),n.\u0275\u0275template(3,C,2,2,"ng-container",8),n.\u0275\u0275elementContainerEnd()),2&e){const e=n.\u0275\u0275nextContext();n.\u0275\u0275property("ngSwitch",e.handleStatus),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngSwitchCase","reading"),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngSwitchCase","downloading")}}function I(e,t){if(1&e&&n.\u0275\u0275element(0,"img",16),2&e){const e=n.\u0275\u0275nextContext(2);n.\u0275\u0275property("src",e.sanitizedSrc,n.\u0275\u0275sanitizeUrl),n.\u0275\u0275attribute("alt",e.viewerFile.name)}}function F(e,t){if(1&e&&(n.\u0275\u0275elementStart(0,"div",14),n.\u0275\u0275template(1,I,1,2,"img",15),n.\u0275\u0275elementEnd()),2&e){const e=n.\u0275\u0275nextContext(),t=n.\u0275\u0275reference(2);n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.isViewImageType&&(e.viewerFile.thumbUrl||e.viewerFile.url)&&"none"===e.handleStatus)("ngIfElse",t)}}const T=function(e){return{"dw-f-image-viewer-list-item-actions-disabled":e}};function O(e,t){if(1&e){const e=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"i",24),n.\u0275\u0275listener("click",function(t){n.\u0275\u0275restoreView(e);const i=n.\u0275\u0275nextContext(3);return i.handlePreview(i.viewerFile,t)}),n.\u0275\u0275elementEnd()}if(2&e){const e=n.\u0275\u0275nextContext(3);n.\u0275\u0275propertyInterpolate("title",e.icons.dwPreview.title),n.\u0275\u0275property("ngClass",n.\u0275\u0275pureFunction1(2,T,e.icons.dwPreview.disabled))}}function A(e,t){if(1&e){const e=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"i",25),n.\u0275\u0275listener("click",function(t){n.\u0275\u0275restoreView(e);const i=n.\u0275\u0275nextContext(3);return i.handleRemove(i.viewerFile,t)}),n.\u0275\u0275elementEnd()}if(2&e){const e=n.\u0275\u0275nextContext(3);n.\u0275\u0275propertyInterpolate("title",e.icons.dwRemove.title),n.\u0275\u0275property("ngClass",n.\u0275\u0275pureFunction1(2,T,e.icons.dwRemove.disabled))}}function k(e,t){if(1&e){const e=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"i",26),n.\u0275\u0275listener("click",function(t){n.\u0275\u0275restoreView(e);const i=n.\u0275\u0275nextContext(3);return i.handleDownload(i.viewerFile,t)}),n.\u0275\u0275elementEnd()}if(2&e){const e=n.\u0275\u0275nextContext(3);n.\u0275\u0275propertyInterpolate("title",e.icons.dwDownload.title),n.\u0275\u0275property("ngClass",n.\u0275\u0275pureFunction1(2,T,e.icons.dwDownload.disabled))}}function D(e,t){if(1&e&&n.\u0275\u0275element(0,"i",27),2&e){n.\u0275\u0275nextContext();const e=n.\u0275\u0275reference(7),t=n.\u0275\u0275nextContext(2);n.\u0275\u0275property("ngClass",n.\u0275\u0275pureFunction1(2,T,t.otherActionCfg.disabled))("dwPopoverContent",e)}}function V(e,t){if(1&e){const e=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"a",31),n.\u0275\u0275listener("click",function(t){n.\u0275\u0275restoreView(e);const i=n.\u0275\u0275nextContext(4);return i.handleDownload(i.viewerFile,t)}),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd()}if(2&e){const e=n.\u0275\u0275nextContext(4);n.\u0275\u0275attribute("disabled",!!e.icons.dwDownload.disabled||null),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",e.icons.dwDownload.title," ")}}function P(e,t){if(1&e){const e=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"a",31),n.\u0275\u0275listener("click",function(t){n.\u0275\u0275restoreView(e);const i=n.\u0275\u0275nextContext().$implicit,o=n.\u0275\u0275nextContext(5);return o.handleOtherAction(o.viewerFile,i.key,t)}),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd()}if(2&e){const e=n.\u0275\u0275nextContext().$implicit,t=n.\u0275\u0275nextContext().$implicit;n.\u0275\u0275attribute("disabled",!!t[e.key].disabled||null),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",t[e.key].title?t[e.key].title:e.key," ")}}function E(e,t){if(1&e&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"div"),n.\u0275\u0275template(2,P,2,2,"a",29),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementContainerEnd()),2&e){const e=t.$implicit,i=n.\u0275\u0275nextContext().$implicit;n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf",i[e.key].show)}}function z(e,t){if(1&e&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,E,3,1,"ng-container",30),n.\u0275\u0275pipe(2,"keyvalue"),n.\u0275\u0275elementContainerEnd()),2&e){const e=t.$implicit;n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",n.\u0275\u0275pipeBind1(2,1,e))}}function R(e,t){if(1&e&&(n.\u0275\u0275elementStart(0,"div",28),n.\u0275\u0275elementStart(1,"div"),n.\u0275\u0275template(2,V,2,2,"a",29),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(3,z,3,3,"ng-container",30),n.\u0275\u0275elementEnd()),2&e){const e=n.\u0275\u0275nextContext(3);n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf",e.icons.dwDownload.show&&"done"===e.viewerFile.status&&e.dwDownloadToOtherCfg),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",e.icons.otherAction)}}function M(e,t){if(1&e&&(n.\u0275\u0275elementStart(0,"span",18),n.\u0275\u0275template(1,O,1,4,"i",19),n.\u0275\u0275template(2,A,1,4,"i",20),n.\u0275\u0275template(3,k,1,4,"i",21),n.\u0275\u0275elementStart(4,"i"),n.\u0275\u0275template(5,D,1,4,"i",22),n.\u0275\u0275template(6,R,4,2,"ng-template",null,23,n.\u0275\u0275templateRefExtractor),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementEnd()),2&e){const e=n.\u0275\u0275nextContext(2);n.\u0275\u0275property("ngStyle",e.dwItemActionsStyle),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.icons.dwPreview.show&&"done"===e.viewerFile.status),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.icons.dwRemove.show),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.icons.dwDownload.show&&"done"===e.viewerFile.status&&!e.dwDownloadToOtherCfg),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf",e.otherActionCfg.show&&"done"===e.viewerFile.status)}}function j(e,t){if(1&e&&n.\u0275\u0275template(0,M,8,5,"span",17),2&e){const e=n.\u0275\u0275nextContext();n.\u0275\u0275property("ngIf",e.isShowItemAction&&"none"===e.handleStatus)}}function _(e,t){if(1&e&&n.\u0275\u0275element(0,"dw-progress",39),2&e){const e=n.\u0275\u0275nextContext(3);n.\u0275\u0275property("dwPercent",e.viewerFile.percent)("dwShowInfo",!1)("dwStrokeWidth",2)}}function L(e,t){if(1&e&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"div",35),n.\u0275\u0275elementStart(2,"div",36),n.\u0275\u0275text(3),n.\u0275\u0275pipe(4,"translate"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(5,"div",37),n.\u0275\u0275template(6,_,1,3,"dw-progress",38),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementContainerEnd()),2&e){const e=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(3),n.\u0275\u0275textInterpolate2(" ",n.\u0275\u0275pipeBind1(4,3,"dw-uploading")," ",e.viewerFile.percent?e.viewerFile.percent+"%":""," "),n.\u0275\u0275advance(3),n.\u0275\u0275property("ngIf",e.viewerFile.percent&&100!==e.viewerFile.percent)}}function U(e,t){}function N(e,t){if(1&e&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,U,0,0,"ng-template",40),n.\u0275\u0275elementContainerEnd()),2&e){n.\u0275\u0275nextContext(2);const e=n.\u0275\u0275reference(6);n.\u0275\u0275advance(1),n.\u0275\u0275property("ngTemplateOutlet",e)}}const B=function(e){return{"actions-mask":e}};function W(e,t){if(1&e&&(n.\u0275\u0275elementStart(0,"div",32),n.\u0275\u0275elementStart(1,"div",33),n.\u0275\u0275template(2,L,7,5,"ng-container",34),n.\u0275\u0275template(3,N,2,1,"ng-container",5),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementEnd()),2&e){const e=n.\u0275\u0275nextContext(),t=n.\u0275\u0275reference(4);n.\u0275\u0275classMapInterpolate1("dw-f-image-viewer-list-item-image-info dw-f-image-viewer-list-item-image-info-",e.viewerFile.status,""),n.\u0275\u0275property("ngStyle",e.dwItemImageStyle)("dwTooltipTitle","error"===e.viewerFile.status?e.viewerFile.message:null),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngClass",n.\u0275\u0275pureFunction1(9,B,e.isShowItemAction&&!e.icons.dwCheck.show)),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf","uploading"===e.viewerFile.status)("ngIfElse",t),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",!e.icons.dwCheck.show)}}function Z(e,t){1&e&&n.\u0275\u0275elementContainer(0)}const H=function(e){return{$implicit:e}};function $(e,t){if(1&e&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,Z,1,0,"ng-container",43),n.\u0275\u0275elementContainerEnd()),2&e){const e=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(1),n.\u0275\u0275property("ngTemplateOutlet",e.dwTitleTpl)("ngTemplateOutletContext",n.\u0275\u0275pureFunction1(2,H,e.viewerFile))}}function G(e,t){if(1&e&&n.\u0275\u0275text(0),2&e){const e=n.\u0275\u0275nextContext(2);n.\u0275\u0275textInterpolate1(" ",e.viewerFile.title?e.viewerFile.title:e.viewerFile.name," ")}}function Q(e,t){if(1&e&&(n.\u0275\u0275elementStart(0,"div",41),n.\u0275\u0275template(1,$,2,4,"ng-container",34),n.\u0275\u0275template(2,G,1,1,"ng-template",null,42,n.\u0275\u0275templateRefExtractor),n.\u0275\u0275elementEnd()),2&e){const e=n.\u0275\u0275reference(3),t=n.\u0275\u0275nextContext();n.\u0275\u0275property("ngStyle",t.dwItemTitleStyle),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",t.dwTitleTpl)("ngIfElse",e)}}function J(e,t){}function q(e,t){1&e&&n.\u0275\u0275element(0,"img",48)}function K(e,t){1&e&&n.\u0275\u0275element(0,"img",49)}function Y(e,t){1&e&&n.\u0275\u0275element(0,"img",49)}function X(e,t){if(1&e){const e=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"div",44),n.\u0275\u0275listener("click",function(t){n.\u0275\u0275restoreView(e);const i=n.\u0275\u0275nextContext(2);return i.handleCheck(i.viewerFile,t)}),n.\u0275\u0275template(2,q,1,0,"img",45),n.\u0275\u0275template(3,K,1,0,"img",46),n.\u0275\u0275template(4,Y,1,0,"img",47),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementContainerEnd()}if(2&e){const e=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(1),n.\u0275\u0275property("ngSwitch",e.viewerFile.check),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngSwitchCase",!0),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngSwitchCase",!1)}}function ee(e,t){}function te(e,t){1&e&&n.\u0275\u0275elementContainer(0)}function ie(e,t){if(1&e&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,te,1,0,"ng-container",43),n.\u0275\u0275elementContainerEnd()),2&e){const e=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(1),n.\u0275\u0275property("ngTemplateOutlet",e.dwDesignTpl)("ngTemplateOutletContext",n.\u0275\u0275pureFunction1(2,H,e.viewerFile))}}function ne(e,t){if(1&e&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,J,0,0,"ng-template",40),n.\u0275\u0275template(2,X,5,3,"ng-container",5),n.\u0275\u0275template(3,ee,0,0,"ng-template",40),n.\u0275\u0275template(4,ie,2,4,"ng-container",5),n.\u0275\u0275elementContainerEnd()),2&e){const e=n.\u0275\u0275nextContext(),t=n.\u0275\u0275reference(8),i=n.\u0275\u0275reference(10);n.\u0275\u0275advance(1),n.\u0275\u0275property("ngTemplateOutlet",t),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.icons.dwCheck.show),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngTemplateOutlet",i),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.dwDesignTpl)}}const oe=function(e){return{color:e}};function re(e,t){if(1&e&&n.\u0275\u0275element(0,"i",4),2&e){const e=n.\u0275\u0275nextContext();n.\u0275\u0275property("dwType",e.fileIcon)("ngStyle",n.\u0275\u0275pureFunction1(2,oe,e.fileIconColor?e.fileIconColor:"#A1A3B4"))}}function le(e,t){if(1&e&&n.\u0275\u0275element(0,"i",4),2&e){const e=n.\u0275\u0275nextContext();n.\u0275\u0275property("dwType",e.fileIcon)("ngStyle",n.\u0275\u0275pureFunction1(2,oe,e.fileIconColor?e.fileIconColor:"#000000"))}}function ae(e,t){if(1&e&&n.\u0275\u0275element(0,"i",4),2&e){const e=n.\u0275\u0275nextContext();n.\u0275\u0275property("dwType",e.fileIcon)("ngStyle",n.\u0275\u0275pureFunction1(2,oe,e.fileIconColor?e.fileIconColor:"#3200AA"))}}function se(e,t){if(1&e&&n.\u0275\u0275element(0,"i",4),2&e){const e=n.\u0275\u0275nextContext();n.\u0275\u0275property("dwType",e.fileIcon)("ngStyle",n.\u0275\u0275pureFunction1(2,oe,e.fileIconColor?e.fileIconColor:"#D80000"))}}function ce(e,t){if(1&e&&n.\u0275\u0275element(0,"i",4),2&e){const e=n.\u0275\u0275nextContext();n.\u0275\u0275property("dwType",e.fileIcon)("ngStyle",n.\u0275\u0275pureFunction1(2,oe,e.fileIconColor?e.fileIconColor:"#1C69D5"))}}function de(e,t){if(1&e&&n.\u0275\u0275element(0,"i",4),2&e){const e=n.\u0275\u0275nextContext();n.\u0275\u0275property("dwType",e.fileIcon)("ngStyle",n.\u0275\u0275pureFunction1(2,oe,e.fileIconColor?e.fileIconColor:"#157B40"))}}function we(e,t){if(1&e&&n.\u0275\u0275element(0,"i",4),2&e){const e=n.\u0275\u0275nextContext();n.\u0275\u0275property("dwType",e.fileIcon)("ngStyle",n.\u0275\u0275pureFunction1(2,oe,e.fileIconColor?e.fileIconColor:"#DF3A11"))}}function me(e,t){if(1&e&&n.\u0275\u0275element(0,"i",4),2&e){const e=n.\u0275\u0275nextContext();n.\u0275\u0275property("dwType",e.fileIcon)("ngStyle",n.\u0275\u0275pureFunction1(2,oe,e.fileIconColor?e.fileIconColor:"#A1A3B4"))}}function pe(e,t){if(1&e&&n.\u0275\u0275element(0,"i",4),2&e){const e=n.\u0275\u0275nextContext();n.\u0275\u0275property("dwType",e.fileIcon)("ngStyle",n.\u0275\u0275pureFunction1(2,oe,e.fileIconColor?e.fileIconColor:"#00A8FF"))}}function he(e,t){if(1&e&&n.\u0275\u0275element(0,"i",5),2&e){const e=n.\u0275\u0275nextContext();n.\u0275\u0275property("ngStyle",n.\u0275\u0275pureFunction1(1,oe,e.fileIconColor?e.fileIconColor:"#A1A3B4"))}}const ge=["viewContainer"],fe=function(e){return{disabled:e}};function ue(e,t){if(1&e){const e=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"a",12),n.\u0275\u0275listener("click",function(){n.\u0275\u0275restoreView(e);const t=n.\u0275\u0275nextContext(2);return!t.viewerAction.dwPrevious.disabled&&t.previous()}),n.\u0275\u0275element(1,"i",13),n.\u0275\u0275elementEnd()}if(2&e){const e=n.\u0275\u0275nextContext(2);n.\u0275\u0275propertyInterpolate("title",e.viewerAction.dwPrevious.title),n.\u0275\u0275property("ngClass",n.\u0275\u0275pureFunction1(2,fe,e.viewerAction.dwPrevious.disabled))}}function ve(e,t){if(1&e){const e=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"a",12),n.\u0275\u0275listener("click",function(){n.\u0275\u0275restoreView(e);const t=n.\u0275\u0275nextContext(2);return!t.viewerAction.dwNext.disabled&&t.next()}),n.\u0275\u0275element(1,"i",14),n.\u0275\u0275elementEnd()}if(2&e){const e=n.\u0275\u0275nextContext(2);n.\u0275\u0275propertyInterpolate("title",e.viewerAction.dwNext.title),n.\u0275\u0275property("ngClass",n.\u0275\u0275pureFunction1(2,fe,e.viewerAction.dwNext.disabled))}}function ye(e,t){if(1&e){const e=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"a",12),n.\u0275\u0275listener("click",function(){n.\u0275\u0275restoreView(e);const t=n.\u0275\u0275nextContext(2);return!t.dwEyeConfig.disabled&&t.eye()}),n.\u0275\u0275element(1,"i",15),n.\u0275\u0275elementEnd()}if(2&e){const e=n.\u0275\u0275nextContext(2);n.\u0275\u0275propertyInterpolate("title",e.dwEyeConfig.title),n.\u0275\u0275property("ngClass",n.\u0275\u0275pureFunction1(2,fe,e.dwEyeConfig.disabled))}}function Se(e,t){if(1&e){const e=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"a",12),n.\u0275\u0275listener("click",function(){n.\u0275\u0275restoreView(e);const t=n.\u0275\u0275nextContext(2);return!t.viewerAction.dwZoomIn.disabled&&t.zoomIn()}),n.\u0275\u0275element(1,"i",16),n.\u0275\u0275elementEnd()}if(2&e){const e=n.\u0275\u0275nextContext(2);n.\u0275\u0275propertyInterpolate("title",e.viewerAction.dwZoomIn.title),n.\u0275\u0275property("ngClass",n.\u0275\u0275pureFunction1(2,fe,e.viewerAction.dwZoomIn.disabled))}}function xe(e,t){if(1&e){const e=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"a",12),n.\u0275\u0275listener("click",function(){n.\u0275\u0275restoreView(e);const t=n.\u0275\u0275nextContext(2);return!t.viewerAction.dwZoomOut.disabled&&t.zoomOut()}),n.\u0275\u0275element(1,"i",17),n.\u0275\u0275elementEnd()}if(2&e){const e=n.\u0275\u0275nextContext(2);n.\u0275\u0275propertyInterpolate("title",e.viewerAction.dwZoomOut.title),n.\u0275\u0275property("ngClass",n.\u0275\u0275pureFunction1(2,fe,e.viewerAction.dwZoomOut.disabled))}}function Ce(e,t){if(1&e){const e=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"a",12),n.\u0275\u0275listener("click",function(){n.\u0275\u0275restoreView(e);const t=n.\u0275\u0275nextContext(2);return!t.viewerAction.dwRotateRight.disabled&&t.rotateRight()}),n.\u0275\u0275element(1,"i",18),n.\u0275\u0275elementEnd()}if(2&e){const e=n.\u0275\u0275nextContext(2);n.\u0275\u0275propertyInterpolate("title",e.viewerAction.dwRotateRight.title),n.\u0275\u0275property("ngClass",n.\u0275\u0275pureFunction1(2,fe,e.viewerAction.dwRotateRight.disabled))}}function be(e,t){if(1&e){const e=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"a",12),n.\u0275\u0275listener("click",function(){n.\u0275\u0275restoreView(e);const t=n.\u0275\u0275nextContext(2);return!t.viewerAction.dwRotateLeft.disabled&&t.rotateLeft()}),n.\u0275\u0275element(1,"i",19),n.\u0275\u0275elementEnd()}if(2&e){const e=n.\u0275\u0275nextContext(2);n.\u0275\u0275propertyInterpolate("title",e.viewerAction.dwRotateLeft.title),n.\u0275\u0275property("ngClass",n.\u0275\u0275pureFunction1(2,fe,e.viewerAction.dwRotateLeft.disabled))}}function Ie(e,t){if(1&e){const e=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"a",12),n.\u0275\u0275listener("click",function(){n.\u0275\u0275restoreView(e);const t=n.\u0275\u0275nextContext(2);return!t.viewerAction.dwResetZoom.disabled&&t.resetZoom()}),n.\u0275\u0275element(1,"i",20),n.\u0275\u0275elementEnd()}if(2&e){const e=n.\u0275\u0275nextContext(2);n.\u0275\u0275propertyInterpolate("title",e.viewerAction.dwResetZoom.title),n.\u0275\u0275property("ngClass",n.\u0275\u0275pureFunction1(2,fe,e.viewerAction.dwResetZoom.disabled))}}function Fe(e,t){if(1&e){const e=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"a",21),n.\u0275\u0275listener("click",function(){n.\u0275\u0275restoreView(e);const t=n.\u0275\u0275nextContext(2);return!t.viewerAction.dwOriginalSize.disabled&&t.originalSize()}),n.\u0275\u0275element(1,"div",22),n.\u0275\u0275elementEnd()}if(2&e){const e=n.\u0275\u0275nextContext(2);n.\u0275\u0275propertyInterpolate("title",e.viewerAction.dwOriginalSize.title),n.\u0275\u0275property("ngClass",n.\u0275\u0275pureFunction1(2,fe,e.viewerAction.dwOriginalSize.disabled))}}function Te(e,t){if(1&e){const e=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"a",12),n.\u0275\u0275listener("click",function(){n.\u0275\u0275restoreView(e);const t=n.\u0275\u0275nextContext(2);return!t.viewerAction.dwFullScreen.disabled&&t.fullScreen()}),n.\u0275\u0275element(1,"i",23),n.\u0275\u0275elementEnd()}if(2&e){const e=n.\u0275\u0275nextContext(2);n.\u0275\u0275propertyInterpolate("title",e.viewerAction.dwFullScreen.title),n.\u0275\u0275property("ngClass",n.\u0275\u0275pureFunction1(2,fe,e.viewerAction.dwFullScreen.disabled))}}function Oe(e,t){1&e&&(n.\u0275\u0275elementStart(0,"a",24),n.\u0275\u0275pipe(1,"translate"),n.\u0275\u0275element(2,"i",25),n.\u0275\u0275elementEnd()),2&e&&n.\u0275\u0275propertyInterpolate("title",n.\u0275\u0275pipeBind1(1,1,"dw-sys-menu-edit"))}function Ae(e,t){1&e&&n.\u0275\u0275element(0,"i",28)}function ke(e,t){1&e&&n.\u0275\u0275element(0,"i",29)}function De(e,t){if(1&e){const e=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"a",12),n.\u0275\u0275listener("click",function(){n.\u0275\u0275restoreView(e);const t=n.\u0275\u0275nextContext(2);return!t.viewerAction.dwDownload.disabled&&!t.isDownLoad&&t.download()}),n.\u0275\u0275template(1,Ae,1,0,"i",26),n.\u0275\u0275template(2,ke,1,0,"i",27),n.\u0275\u0275elementEnd()}if(2&e){const e=n.\u0275\u0275nextContext(2);n.\u0275\u0275propertyInterpolate("title",e.viewerAction.dwDownload.title),n.\u0275\u0275property("ngClass",n.\u0275\u0275pureFunction1(4,fe,e.viewerAction.dwDownload.disabled||e.isDownLoad)),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",!e.isDownLoad),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.isDownLoad)}}function Ve(e,t){if(1&e&&(n.\u0275\u0275elementStart(0,"div",8),n.\u0275\u0275template(1,ue,2,4,"a",9),n.\u0275\u0275template(2,ve,2,4,"a",9),n.\u0275\u0275template(3,ye,2,4,"a",9),n.\u0275\u0275template(4,Se,2,4,"a",9),n.\u0275\u0275template(5,xe,2,4,"a",9),n.\u0275\u0275template(6,Ce,2,4,"a",9),n.\u0275\u0275template(7,be,2,4,"a",9),n.\u0275\u0275template(8,Ie,2,4,"a",9),n.\u0275\u0275template(9,Fe,2,4,"a",10),n.\u0275\u0275template(10,Te,2,4,"a",9),n.\u0275\u0275template(11,Oe,3,3,"a",11),n.\u0275\u0275template(12,De,3,6,"a",9),n.\u0275\u0275elementEnd()),2&e){const e=n.\u0275\u0275nextContext();n.\u0275\u0275property("ngStyle",e.toolbarStyle),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.viewerAction.dwPrevious.show),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.viewerAction.dwNext.show),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.dwEyeConfig.show),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.viewerAction.dwZoomIn.show),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.viewerAction.dwZoomOut.show),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.viewerAction.dwRotateRight.show),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.viewerAction.dwRotateLeft.show),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.viewerAction.dwResetZoom.show),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.viewerAction.dwOriginalSize.show),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.viewerAction.dwFullScreen.show),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",!1),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",e.viewerAction.dwDownload.show)}}function Pe(e,t){1&e&&n.\u0275\u0275element(0,"i",33)}function Ee(e,t){1&e&&n.\u0275\u0275element(0,"i",34)}function ze(e,t){if(1&e&&(n.\u0275\u0275elementStart(0,"div",30),n.\u0275\u0275template(1,Pe,1,0,"i",31),n.\u0275\u0275template(2,Ee,1,0,"i",32),n.\u0275\u0275elementEnd()),2&e){const e=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf","error"!==e.fileSrcLoadingStatus),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf","error"===e.fileSrcLoadingStatus)}}function Re(e,t){if(1&e&&(n.\u0275\u0275elementStart(0,"div",35),n.\u0275\u0275element(1,"dw-image-viewer-file-icon",36),n.\u0275\u0275elementEnd()),2&e){const e=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("mimeType",e.type)("fileIconColor",e.fileIconColor?e.fileIconColor:null)}}function Me(e,t){if(1&e&&(n.\u0275\u0275elementStart(0,"div",37),n.\u0275\u0275elementStart(1,"video",38),n.\u0275\u0275text(2," Your browser does not support HTML video. "),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementEnd()),2&e){const e=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("src",e.fileSrcDataUrl,n.\u0275\u0275sanitizeUrl)}}let je=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n.\u0275\u0275defineComponent({type:e,selectors:[["dw-image-viewer-modal"]],inputs:{uid:"uid",fileSrc:"fileSrc",name:"name",type:"type",title:"title",viewerAction:"viewerAction",containerStyle:"containerStyle",toolbarStyle:"toolbarStyle",titleStyle:"titleStyle",onPrevious:"onPrevious",onNext:"onNext",thumbnailList:"thumbnailList"},decls:2,vars:12,consts:[[1,"viewer-modal-container"],[3,"uid","fileSrc","thumbnailList","name","type","title","viewerAction","containerStyle","toolbarStyle","titleStyle","onPrevious","onNext"]],template:function(e,t){1&e&&(n.\u0275\u0275elementStart(0,"div",0),n.\u0275\u0275element(1,"dw-image-viewer",1),n.\u0275\u0275elementEnd()),2&e&&(n.\u0275\u0275advance(1),n.\u0275\u0275property("uid",t.uid)("fileSrc",t.fileSrc)("thumbnailList",t.thumbnailList)("name",t.name)("type",t.type)("title",t.title)("viewerAction",t.viewerAction)("containerStyle",t.containerStyle)("toolbarStyle",t.toolbarStyle)("titleStyle",t.titleStyle)("onPrevious",t.onPrevious)("onNext",t.onNext))},directives:function(){return[We]},styles:[".viewer-modal-container{width:100%;padding-top:15px;min-height:200px}\n"],encapsulation:2}),e})(),_e=(()=>{class e{constructor(){this.saveData=(()=>{const e=document.createElement("a");return document.body.appendChild(e),e.style="display: none",(t,i)=>{const n=window.URL.createObjectURL(t);e.href=n,e.download=i,e.click(),window.URL.revokeObjectURL(n)}})()}urlToBlob(e){return o.Observable.create(t=>{fetch(e).then(e=>{if(e.ok)return e.blob();t.error(e.statusText)}).then(e=>{t.next(e),t.complete()}).catch(e=>{console.error(e),t.error(e)})})}getTypeByProperty(e,t,i,n){return o.Observable.create(o=>{const r={mimeType:null,blobFile:null};e instanceof File&&(t=e.type),t||(i&&(t=this.filenameToMimeType(i)),t||n&&(t=this.filenameToMimeType(n))),t?(r.mimeType=t,o.next(r)):this.urlToBlob(n).subscribe(e=>{r.mimeType=e.type,r.blobFile=e,o.next(r),o.complete()},e=>{o.next(r),o.complete()})})}downLoad(e,t){const i={success:!1,message:""},n="downLoad_"+(new Date).getTime().toString();let r=null;return t&&(r=t),o.Observable.create(t=>{e instanceof Blob?(e=e,r||(e.name?r=e.name:this.mimeToExtension(e.type)&&(r=n+"."+this.mimeToExtension(e.type))),this.saveData(e,r),i.success=!0,t.next(i),t.complete()):this.urlToBlob(e).subscribe(e=>{r||this.mimeToExtension(e.type)&&(r=n+"."+this.mimeToExtension(e.type)),this.saveData(e,r),i.success=!0,t.next(i),t.complete()},e=>{i.success=!1,i.message=e,t.next(i),t.complete()})})}isViewImageType(e){return!(!e||-1===e.indexOf("image/"))&&"image/tiff"!==e}filenameToMimeType(e){let t=null;if(-1!==e.indexOf(";base64,")){const i=e.split(";base64,");i.length>1&&(t=i[0].replace("data:",""))}else if(-1!==e.indexOf(".")){const i=e.split(".");i.length>1&&(t=this.extensionToMime(i[i.length-1]))}return t}editImageName(e,t){const i=e.split(".").pop().toLocaleLowerCase();return i!==(t=t.toLocaleLowerCase())&&("jpg"!==i&&"jpeg"!==i||"jpg"!==t&&"jpeg"!==t)?e+="."+t:e}openBlank(e){const t=document.createElement("a");document.body.appendChild(t),t.style="display: none",t.href=e,t.target="_blank",t.click(),window.URL.revokeObjectURL(e)}mimeToIcon(e){const t=this.getMimeTypeList();let i="file";return t[e]&&t[e].hasOwnProperty("icon")&&(i=t[e].icon),i}extensionToMime(e){e=e.toLocaleLowerCase();let t=null;const i=this.getMimeTypeList();return Object.keys(i).forEach(n=>{i[n].hasOwnProperty("extension")&&i[n].extension.forEach(i=>{i===e&&(t=n)})}),t}mimeToExtension(e){const t=this.getMimeTypeList();let i=null;return t[e]&&t[e].hasOwnProperty("extension")&&(i=t[e].extension[0]),i}getMimeTypeList(){return{"image/jpeg":{extension:["jpg","jpeg"],icon:"file-image"},"image/png":{extension:["png"],icon:"file-image"},"image/gif":{extension:["gif"],icon:"file-image"},"image/tiff":{extension:["tif","tiff"],icon:"file-image"},"image/x-icon":{extension:["ico","cur"],icon:"file-image"},"image/vnd.microsoft.icon":{extension:["ico"],icon:"file-image"},"image/bmp":{extension:["bmp"],icon:"file-image"},"image/svg+xml":{extension:["svg"],icon:"file-image"},"image/webp":{extension:["webp"],icon:"file-image"},"video/mp4":{extension:["mp4"],icon:"video-camera"},"video/mpeg":{extension:["mpeg"],icon:"video-camera"},"video/webm":{extension:["webm"],icon:"video-camera"},"video/ogg":{extension:["ogg","ogv"],icon:"video-camera"},"video/avi":{extension:["avi"],icon:"video-camera"},"video/mp2t":{extension:["ts"],icon:"video-camera"},"video/3gpp":{extension:["3gp"],icon:"video-camera"},"video/3gpp2":{extension:["3gp2"],icon:"video-camera"},"video/x-ms-wmv":{extension:["wmv"],icon:"video-camera"},"audio/mpeg":{extension:["mp3"],icon:"customer-service"},"audio/ogg":{extension:["oga"],icon:"customer-service"},"application/pdf":{extension:["pdf"],icon:"file-pdf"},"application/vnd.openxmlformats-officedocument.wordprocessingml.document":{extension:["docx"],icon:"file-word"},"application/msword":{extension:["doc"],icon:"file-word"},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":{extension:["xlsx"],icon:"file-excel"},"application/vnd.ms-excel":{extension:["xls","xlt"],icon:"file-excel"},"application/vnd.ms-excel.sheet.macroEnabled.12":{extension:["xlsm"],icon:"file-excel"},"application/vnd.openxmlformats-officedocument.spreadsheetml.template":{extension:["xltx"],icon:"file-excel"},"application/vnd.ms-excel.template.macroEnabled.12":{extension:["xltm"],icon:"file-excel"},"application/vnd.openxmlformats-officedocument.presentationml.presentation":{extension:["pptx"],icon:"file-ppt"},"application/vnd.ms-powerpoint":{extension:["ppt"],icon:"file-ppt"},"application/zip":{extension:["zip"],icon:"file-zip"},"application/x-zip-compressed":{extension:["zip"],icon:"file-zip"},"application/x-7z-compressed":{extension:["7z"],icon:"file-zip"},"application/gzip":{extension:["gz"],icon:"file-zip"},"application/x-tar":{extension:["tar"],icon:""},"application/json":{extension:["json"],icon:""},"application/ld+json":{extension:["jsonld"],icon:""},"application/java-archive":{extension:["jar"],icon:""},"text/css":{extension:["css"],icon:"file-text"},"text/csv":{extension:["csv"],icon:"file-text"},"text/html":{extension:["html","htm"],icon:"file-text"},"text/calendar":{extension:["ics"],icon:"file-text"},"text/javascript":{extension:["js"],icon:"file-text"},"text/plain":{extension:["txt"],icon:"file-text"},"text/xml":{extension:["xml"],icon:"file-text"}}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=n.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e})(),Le=(()=>{class e{constructor(e,t,i,n){this.zone=e,this.rendererFactory=t,this.translateService=i,this.dwImageViewerFileService=n,this.zoomPercent=100,this.ROTACAO_PADRAO_GRAUS=90,this.validImageExtension="jpg|jpeg|png|gif|bmp|webp|svg|ico",this.renderer=this.rendererFactory.createRenderer(null,null)}inicializarImageViewer(e,t={maxZoom:800}){return o.Observable.create(i=>{this.zone.runOutsideAngular(()=>{t.snapView=!1,this.viewer=new(s())(e.nativeElement,t),this.imageContainer=e,this.initIntervalId=setInterval(()=>{window.getComputedStyle(this.imageContainer.nativeElement).width&&(clearInterval(this.initIntervalId),i.next(!0))},100)})})}showImage(e){this.zone.runOutsideAngular(()=>{!this.isImage(e)||(this.initImageSetting(),this.viewer.load(e),this.imageDimIntervalId=setInterval(()=>{this.viewer._state.imageDim&&this.viewer._state.imageDim.w&&this.viewer._elements.image&&this.viewer._elements.image.naturalWidth&&(this.fitWidth=this.viewer._state.imageDim.w,this.fitHeight=this.viewer._state.imageDim.h,this.originWidth=this.viewer._elements.image.naturalWidth,this.originHeight=this.viewer._elements.image.naturalHeight,clearInterval(this.imageDimIntervalId))},50))})}isImage(e){return RegExp(`^(data:image/(?!tiff)|(https|http|www.))|.(${this.validImageExtension})$`,"gi").test(e)}initImageSetting(){this.nowScale=1,this.rotacaoImagemAtual=0,this.isImagemVertical=!1}zoomIn(){this.zone.runOutsideAngular(()=>{this.zoomPercent+=10,this.viewer.zoom(this.zoomPercent)})}zoomOut(){this.zone.runOutsideAngular(()=>{100!==this.zoomPercent&&(this.zoomPercent-=10,this.zoomPercent<0&&(this.zoomPercent=0),this.viewer.zoom(this.zoomPercent))})}fullScreen(e,t={snapView:!1}){!this.isImage(e)||this.zone.runOutsideAngular(()=>{const i=this.resetZoom();setTimeout(()=>{this.viewerFullscreen=new(s().FullScreenViewer)(t),this.initImageSetting(),this.viewerFullscreen.show(e),this.atualizarRotacao(!1)},i)})}originalSize(){this.zone.runOutsideAngular(()=>{let e=this.originWidth/this.fitWidth;1!==this.nowScale&&(e/=this.nowScale),this.viewer.zoom(100*e)})}resetZoom(){let e=800;return this.zone.runOutsideAngular(()=>{this.zoomPercent=100,this.viewer.zoom(this.zoomPercent),this.viewer._state.zoomValue===this.zoomPercent&&(e=0)}),e}rotateRight(){this.zone.runOutsideAngular(()=>{const e=this.resetZoom();setTimeout(()=>{this.rotacaoImagemAtual+=this.ROTACAO_PADRAO_GRAUS,this.isImagemVertical=!this.isImagemVertical,this.setRotateStyle()},e)})}rotateLeft(){this.zone.runOutsideAngular(()=>{const e=this.resetZoom();setTimeout(()=>{this.rotacaoImagemAtual-=this.ROTACAO_PADRAO_GRAUS,this.isImagemVertical=!this.isImagemVertical,this.setRotateStyle()},e)})}setRotateStyle(){this.zone.runOutsideAngular(()=>{let e=1;const t=this.imageContainer.nativeElement;let i=0;const n=this.fitWidth>=this.fitHeight;Math.abs(this.rotacaoImagemAtual)/90%2==1&&(n?(i=this.fitWidth-t.clientHeight,i>0?e=(this.fitWidth-i)/this.fitWidth:i<0&&(e=(this.fitWidth+Math.abs(i))/this.fitWidth)):(i=this.fitHeight-t.clientWidth,i>0?e=(this.fitHeight-i)/this.fitHeight:i<0&&(e=(this.fitHeight+Math.abs(i))/this.fitHeight),this.fitWidth*e>t.clientHeight&&(i=this.fitWidth-t.clientHeight,e=(this.fitWidth-i)/this.fitWidth))),this.nowScale=e,this.carregarImagem(`rotate(${this.rotacaoImagemAtual}deg)`,`scale(${e})`,!0)})}atualizarRotacao(e=!0){this.zone.runOutsideAngular(()=>{let t="";this.isImagemVertical&&this.isImagemSobrepondoNaVertical()&&(t=`scale(${this.getScale()})`),this.carregarImagem(`rotate(${this.rotacaoImagemAtual}deg)`,t,e)})}getScale(){const e=this.imageContainer.nativeElement,t=e.getElementsByClassName("iv-small-image").item(0),i=t.clientWidth-e.clientHeight;return i>=250&&i<300?(t.clientWidth-e.clientHeight)/e.clientHeight-.1:i>=300&&i<400?(t.clientWidth-e.clientHeight)/e.clientHeight-.15:i>=400?(t.clientWidth-e.clientHeight)/e.clientHeight-.32:.6}isImagemSobrepondoNaVertical(){const e=this.imageContainer.nativeElement,t=e.getElementsByClassName("iv-small-image").item(0);return e.clientHeight<t.clientWidth+5}carregarImagem(e,t,i=!0){this.zone.runOutsideAngular(()=>{i&&(this.adicionarAnimacao("iv-snap-image"),this.adicionarAnimacao("iv-small-image")),this.adicionarRotacao("iv-snap-image",e,t),this.adicionarRotacao("iv-small-image",e,t),setTimeout(()=>{i&&(this.retirarAnimacao("iv-snap-image"),this.retirarAnimacao("iv-small-image"))},501)})}adicionarRotacao(e,t,i){this.zone.runOutsideAngular(()=>{this.setStyleClass(e,"transform",`${t} ${i}`)})}retirarAnimacao(e){this.zone.runOutsideAngular(()=>{this.setStyleClass(e,"transition","auto")})}adicionarAnimacao(e){this.zone.runOutsideAngular(()=>{this.setStyleClass(e,"transition","0.5s linear")})}setStyleClass(e,t,i){this.zone.runOutsideAngular(()=>{const n=this.imageContainer.nativeElement.getElementsByClassName(e);for(let e=0;e<n.length;e++)this.renderer.setStyle(n.item(e),t,i)})}destroy(){this.viewer.destroy()}hideViewer(){this.zone.runOutsideAngular(()=>{this.setStyleClass("iv-wrap","display","none")})}showViewer(){this.zone.runOutsideAngular(()=>{this.setStyleClass("iv-wrap","display","block")})}viewerActionDefault(){return{dwPrevious:{show:!0,title:this.translateService.instant("dw-image-viewer-previous"),disabled:!1},dwNext:{show:!0,title:this.translateService.instant("dw-image-viewer-next"),disabled:!1},dwFullScreen:{show:!0,title:this.translateService.instant("dw-image-viewer-full-screen"),disabled:!1},dwZoomIn:{show:!0,title:this.translateService.instant("dw-image-viewer-zoom-in"),disabled:!1},dwZoomOut:{show:!0,title:this.translateService.instant("dw-image-viewer-zoom-out"),disabled:!1},dwResetZoom:{show:!0,title:this.translateService.instant("dw-image-viewer-reset-zoom"),disabled:!1},dwOriginalSize:{show:!0,title:this.translateService.instant("dw-image-viewer-originSize"),disabled:!1},dwRotateRight:{show:!0,title:this.translateService.instant("dw-image-viewer-rotate-right"),disabled:!1},dwRotateLeft:{show:!0,title:this.translateService.instant("dw-image-viewer-rotate-left"),disabled:!1},dwDownload:{show:!0,title:this.translateService.instant("dw-image-viewer-download"),disabled:!1}}}}return e.\u0275fac=function(t){return new(t||e)(n.\u0275\u0275inject(n.NgZone),n.\u0275\u0275inject(n.RendererFactory2),n.\u0275\u0275inject(l.TranslateService),n.\u0275\u0275inject(_e))},e.\u0275prov=n.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e})(),Ue=(()=>{class e{constructor(e,t,i,n){this.dwImageViewerService=e,this.dwModalService=t,this.translateService=i,this.dwUploadFileMangementService=n}actionDefault(){return{dwPreview:{show:!0,title:this.translateService.instant("dw-image-viewer-preview"),disabled:!1},dwRemove:{show:!0,title:this.translateService.instant("dw-delete"),disabled:!1},dwDownload:{show:!0,title:this.translateService.instant("dw-image-viewer-download"),disabled:!1},dwCheck:{show:!1,title:this.translateService.instant("dw-image-viewer-check"),disabled:!1},otherAction:[]}}resetViewerAction(e,t,i){let n=null;if(e){n=JSON.parse(JSON.stringify(e));const o=t.length;for(let e=0;e<o;e++)if(t[e].uid===i){0===e&&(n.dwPrevious.disabled=!0),e===o-1&&(n.dwNext.disabled=!0);break}}else n=this.dwImageViewerService.viewerActionDefault();return n}previous(e,t,i){return new o.Observable(n=>{const o={uid:null,fileSrc:null,name:null,type:null,title:null,viewerAction:null,thumbnailList:e},r=e.length;for(let l=0;l<r;l++)if(e[l].uid===t){let t=l;l>0&&(t=l-1),o.uid=e[t].uid,e[t].url?o.fileSrc=e[t].url:e[t].originFileObj&&e[t].originFileObj instanceof File?o.fileSrc=e[t].originFileObj:e[t].dmcFileId&&(o.fileSrc=this.dwUploadFileMangementService.getDataUrlAndBlobByFileId(e[t].dmcFileId,e[t].bucketName?e[t].bucketName:null)),o.name=e[t].name,o.type=e[t].type,o.title=e[t].title,o.viewerAction=this.resetViewerAction(i,e,o.uid);break}n.next(o),n.complete()})}next(e,t,i){return new o.Observable(n=>{const o={uid:null,fileSrc:null,name:null,type:null,title:null,viewerAction:null,thumbnailList:e},r=e.length;for(let l=0;l<r;l++)if(e[l].uid===t){let t=l;l+1<=r-1&&(t=l+1),o.uid=e[t].uid,e[t].url?o.fileSrc=e[t].url:e[t].originFileObj&&e[t].originFileObj instanceof File?o.fileSrc=e[t].originFileObj:e[t].dmcFileId&&(o.fileSrc=this.dwUploadFileMangementService.getDataUrlAndBlobByFileId(e[t].dmcFileId,e[t].bucketName?e[t].bucketName:null)),o.name=e[t].name,o.type=e[t].type,o.title=e[t].title,o.viewerAction=this.resetViewerAction(i,e,o.uid);break}n.next(o),n.complete()})}previewModal(e,t,i,n,r){const l=this.resetViewerAction(i,t,e.uid);return n||(l.dwPrevious.show=!1),r||(l.dwNext.show=!1),e.type&&"application/pdf"===e.type.toLowerCase()&&(/^([Hh])([Tt]){2}([Pp])([Ss]){0,1}:/.test(e.url)||/\.[Pp][Dd][Ff]$/.test(e.url))?new o.Observable(t=>{window.open(e.url,"_blank"),t.next("ok"),t.complete()}):new o.Observable(i=>{let o=null;e.url?o=e.url:e.originFileObj&&e.originFileObj instanceof File?o=e.originFileObj:e.dmcFileId&&(o=this.dwUploadFileMangementService.getDataUrlAndBlobByFileId(e.dmcFileId,e.bucketName?e.bucketName:null)),this.dwModalService.create({dwContent:je,dwWidth:"650px",dwStyle:{top:"20px"},dwFooter:null,dwClosable:!0,dwMaskClosable:!1,dwOnOk:()=>{i.next("ok"),i.complete()},dwOnCancel(){i.next("cancel"),i.complete()},dwComponentParams:{uid:e.uid,fileSrc:o,name:e.name,type:e.type,title:e.title,viewerAction:l,thumbnailList:t,onPrevious:n,onNext:r}})})}listRemove(e,t){const i={isRemove:!1,removeItem:null},n=e.length;for(let o=0;o<n;o++)if(e[o].hasOwnProperty("uid")&&e[o].uid===t){i.isRemove=!0,i.removeItem=Object.assign({},e[o]),e.splice(o,1);break}return i}}return e.\u0275fac=function(t){return new(t||e)(n.\u0275\u0275inject(Le),n.\u0275\u0275inject(r.DwModalService),n.\u0275\u0275inject(l.TranslateService),n.\u0275\u0275inject(c.DwUploadFileMangementService))},e.\u0275prov=n.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e})(),Ne=(()=>{class e{constructor(e,t,i,n,o,r){this.dwImageViewerListService=e,this.dwImageViewerFileService=t,this.translateService=i,this.dwMessageService=n,this.dwUploadFileMangementService=o,this.sanitizer=r,this.dwDownloadToOtherCfg=!1,this.dwViewerListType="picture-card",this.viewerFileType="",this.icons=this.dwImageViewerListService.actionDefault(),this.dwItemImageStyle={},this.dwItemTitleStyle={},this.dwItemActionsStyle={},this.dwItemFileiconStyle={},this.handleStatus="none",this.otherActionCfg=this.otherActionCfgInit(),this.isShowItemAction=!1,this.isViewImageType=!1}set dwListType(e){this.dwViewerListType=e}set dwFile(e){let t=!1;if(this.viewerFile?(e.type!==this.viewerFile.type||e.name!==this.viewerFile.name||e.url!==this.viewerFile.url)&&(t=!0):t=!0,this.viewerFile=e,t){let e=this.viewerFile.url;e||(e=this.viewerFile.thumbUrl),this.sanitizedSrc=this.viewerFile.thumbUrl?this.viewerFile.thumbUrl:this.viewerFile.url,this.getThumbUrlOrUrl$().subscribe(t=>{this.getSanitizedSrc(),this.dwImageViewerFileService.getTypeByProperty(this.viewerFile.originFileObj,this.viewerFile.type,this.viewerFile.name,e).subscribe(e=>{this.viewerFileType=e.mimeType,this.isViewImageType=this.dwImageViewerFileService.isViewImageType(this.viewerFileType)})})}}getThumbUrlOrUrl$(){return!this.viewerFile.thumbUrl&&this.viewerFile.dmcShrinkId?this.getThumbDataUrl():this.viewerFile.url||!this.viewerFile.dmcFileId||this.viewerFile.thumbUrl||this.viewerFile.dmcShrinkId||(!this.viewerFile.type||-1===this.viewerFile.type.search("image"))&&this.viewerFile.type?new o.Observable(e=>{e.next(!0)}):this.getOriginDataUrl()}getSanitizedSrc(){this.sanitizedSrc=this.sanitizer.bypassSecurityTrustResourceUrl(this.viewerFile.thumbUrl?this.viewerFile.thumbUrl:this.viewerFile.url)}getThumbDataUrl(){return new o.Observable(e=>{this.handleStatus="reading",this.dwUploadFileMangementService.getDataUrlAndBlobByFileId(this.viewerFile.dmcShrinkId,this.viewerFile.bucketName?this.viewerFile.bucketName:null).subscribe(t=>{this.viewerFile.thumbUrl=t.dataUrl,this.viewerFile.type||(this.viewerFile.type=t.blob.type,this.viewerFileType=this.viewerFile.type),this.handleStatus="none",e.next(!0)},e=>{this.handleStatus="none",this.viewerFile.status="error"})})}getOriginDataUrl(){return new o.Observable(e=>{this.handleStatus="reading",this.dwUploadFileMangementService.getDataUrlAndBlobByFileId(this.viewerFile.dmcFileId,this.viewerFile.bucketName?this.viewerFile.bucketName:null).subscribe(t=>{this.viewerFile.url=t.dataUrl,this.viewerFile.type||(this.viewerFile.type=t.blob.type,this.viewerFileType=this.viewerFile.type),this.handleStatus="none",e.next(!0)},e=>{this.handleStatus="none",this.viewerFile.status="error"})})}set dwItemAction(e){e&&Object.keys(e).forEach(t=>{this.icons[t]=Array.isArray(this.icons[t])?Object.assign([],e[t]):Object.assign({},e[t])}),this.actionsChange()}set dwItemImageWidth(e){let t=0,i=!1;if(e.hasOwnProperty("width")&&(t=e.width),t>0){e.hasOwnProperty("autoReSize")&&(i=e.autoReSize),this.dwItemImageStyle.width=t+"px",i&&(this.dwItemImageStyle.height=t+"px",this.dwItemTitleStyle.width=t+"px");const n=(t-32)/3-8;n>=14&&(this.dwItemActionsStyle["font-size"]=Math.floor(n)+"px");const o=t-54;o>0&&(this.dwItemFileiconStyle["font-size"]=o+"px")}}ngOnInit(){this.onPreview||(this.icons.dwPreview.show=!1),this.onRemove||(this.icons.dwRemove.show=!1),this.onCheck||(this.icons.dwCheck.show=!1),this.actionsChange()}handlePreview(e,t){t.preventDefault(),this.onPreview&&this.onPreview(e).subscribe()}handleRemove(e,t){t.preventDefault(),this.onRemove&&this.onRemove(e).subscribe()}handleDownload(e,t){t.preventDefault(),this.onDownload?this.onDownload(e).subscribe():(this.handleStatus="downloading",this._getFileSrc(e).subscribe(t=>{t&&this.dwImageViewerFileService.downLoad(t,e.name).subscribe(e=>{if(this.handleStatus="none",!e.success){const e=this.translateService.instant("dw-downLoad-err");this.dwMessageService.create("loading",e)}})}))}_getFileSrc(e){return new o.Observable(t=>{if(e.hasOwnProperty("originFileObj"))e.originFileObj instanceof File&&t.next(e.originFileObj);else if(e.hasOwnProperty("url")&&e.url)t.next(e.url);else if(!e.url&&e.dmcFileId){let i=null;e.bucketName&&(i=e.bucketName),this.dwUploadFileMangementService.getDataUrlAndBlobByFileId(e.dmcFileId,i).subscribe(e=>{this.viewerFile.url=e.dataUrl,this.viewerFile.type=e.blob.type,t.next(e.blob)})}else t.next("")})}handleCheck(e,t){t.preventDefault(),this.onCheck&&this.onCheck(e).subscribe()}handleOtherAction(e,t,i){i.preventDefault(),this.onOtherAction&&this.onOtherAction(e,t).subscribe()}checkShowItemAction(e){let t=null,i=!1;return e.hasOwnProperty("show")&&(t=e.show),t&&(i=!0),i}otherActionCfgInit(){return{show:!1,title:"",disabled:!1,open:!1}}actionsChange(){let e=!1;const t=this.otherActionCfgInit(),i={};let n=0;this.icons&&Object.keys(this.icons).forEach(o=>{"otherAction"===o?this.icons[o].forEach(i=>{Object.keys(i).forEach(n=>{this.checkShowItemAction(i[n])&&(e=!0,t.show=!0)})}):this.checkShowItemAction(this.icons[o])&&(e=!0,"dwCheck"!==o&&o.startsWith("dw")&&(n+=1,i[o]=Object.assign({},this.icons[o])))}),this.isShowItemAction=e,this.otherActionCfg.show=t.show,this.dwDownloadToOtherCfg=!!this.otherActionCfg.show&&n>=3}}return e.\u0275fac=function(t){return new(t||e)(n.\u0275\u0275directiveInject(Ue),n.\u0275\u0275directiveInject(_e),n.\u0275\u0275directiveInject(l.TranslateService),n.\u0275\u0275directiveInject(d.DwMessageService),n.\u0275\u0275directiveInject(c.DwUploadFileMangementService),n.\u0275\u0275directiveInject(w.DomSanitizer))},e.\u0275cmp=n.\u0275\u0275defineComponent({type:e,selectors:[["dw-image-viewer-list-item"]],inputs:{dwListType:"dwListType",dwFile:"dwFile",dwItemAction:"dwItemAction",dwItemImageWidth:"dwItemImageWidth",dwTitleTpl:"dwTitleTpl",dwDesignTpl:"dwDesignTpl",onPreview:"onPreview",onRemove:"onRemove",onDownload:"onDownload",onCheck:"onCheck",onOtherAction:"onOtherAction"},decls:12,vars:5,consts:[["noThumbTpl",""],["thumbTpl",""],["itemActions",""],["imageInfo",""],["itemTitle",""],[4,"ngIf"],[3,"ngSwitch"],["class","dw-f-image-viewer-list-item-loading",4,"ngSwitchCase"],[4,"ngSwitchDefault"],[1,"dw-f-image-viewer-list-item-loading"],["indicatorTemplate",""],[3,"dwIndicator"],["dw-icon","","dwType","loading"],[1,"dw-f-image-viewer-list-item-fileicon",3,"mimeType","ngStyle"],[1,"dw-f-image-viewer-list-item-thumbnail"],[3,"src",4,"ngIf","ngIfElse"],[3,"src"],["class","dw-f-image-viewer-list-item-actions",3,"ngStyle",4,"ngIf"],[1,"dw-f-image-viewer-list-item-actions",3,"ngStyle"],["dw-icon","","dwType","eye-o","class","action-icon",3,"title","ngClass","click",4,"ngIf"],["dw-icon","","dwType","delete","class","action-icon",3,"title","ngClass","click",4,"ngIf"],["dw-icon","","dwType","download","class","action-icon",3,"title","ngClass","click",4,"ngIf"],["dw-icon","","dwType","setting","class","action-icon","dw-popover","","dwPopoverPlacement","bottomRight",3,"ngClass","dwPopoverContent",4,"ngIf"],["otherActionTpl",""],["dw-icon","","dwType","eye-o",1,"action-icon",3,"title","ngClass","click"],["dw-icon","","dwType","delete",1,"action-icon",3,"title","ngClass","click"],["dw-icon","","dwType","download",1,"action-icon",3,"title","ngClass","click"],["dw-icon","","dwType","setting","dw-popover","","dwPopoverPlacement","bottomRight",1,"action-icon",3,"ngClass","dwPopoverContent"],[1,"dw-f-image-viewer-list-item-other-dialog"],[3,"click",4,"ngIf"],[4,"ngFor","ngForOf"],[3,"click"],["dw-tooltip","",3,"ngStyle","dwTooltipTitle"],[1,"dw-f-image-viewer-list-item-image-info-contain",3,"ngClass"],[4,"ngIf","ngIfElse"],[1,"dw-f-image-viewer-list-item-progress"],[1,"dw-f-image-viewer-list-item-uploading-text"],[1,"dw-f-image-viewer-list-item-progress-bar"],[3,"dwPercent","dwShowInfo","dwStrokeWidth",4,"ngIf"],[3,"dwPercent","dwShowInfo","dwStrokeWidth"],[3,"ngTemplateOutlet"],[1,"dw-f-image-viewer-list-item-title",3,"ngStyle"],["titleDefaultTpl",""],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"dw-f-image-viewer-list-item-checkBox",3,"ngSwitch","click"],["src","./assets/dw-framework/img/icon/checked.svg",4,"ngSwitchCase"],["src","./assets/dw-framework/img/icon/unchecked.svg",4,"ngSwitchCase"],["src","./assets/dw-framework/img/icon/unchecked.svg",4,"ngSwitchDefault"],["src","./assets/dw-framework/img/icon/checked.svg"],["src","./assets/dw-framework/img/icon/unchecked.svg"]],template:function(e,t){1&e&&(n.\u0275\u0275elementStart(0,"div"),n.\u0275\u0275template(1,b,4,3,"ng-template",null,0,n.\u0275\u0275templateRefExtractor),n.\u0275\u0275template(3,F,2,2,"ng-template",null,1,n.\u0275\u0275templateRefExtractor),n.\u0275\u0275template(5,j,1,1,"ng-template",null,2,n.\u0275\u0275templateRefExtractor),n.\u0275\u0275template(7,W,4,11,"ng-template",null,3,n.\u0275\u0275templateRefExtractor),n.\u0275\u0275template(9,Q,4,3,"ng-template",null,4,n.\u0275\u0275templateRefExtractor),n.\u0275\u0275template(11,ne,5,4,"ng-container",5),n.\u0275\u0275elementEnd()),2&e&&(n.\u0275\u0275classMapInterpolate2("dw-f-image-viewer-list-item dw-f-image-viewer-list-item-type-",t.dwViewerListType," dw-f-image-viewer-list-item-",t.viewerFile.status,""),n.\u0275\u0275advance(11),n.\u0275\u0275property("ngIf","picture-card"===t.dwViewerListType))},directives:function(){return[m.NgIf,m.NgSwitch,m.NgSwitchCase,m.NgSwitchDefault,u.DwSpinComponent,p.DwIconDirective,Be,m.NgStyle,m.NgClass,h.DwPopoverDirective,m.NgForOf,f.DwTooltipDirective,g.DwProgressComponent,m.NgTemplateOutlet]},pipes:function(){return[l.TranslatePipe,m.KeyValuePipe]},styles:['.dw-f-image-viewer-list-item{position:relative;float:left;margin:8px}.dw-f-image-viewer-list-item-image-info{position:relative;float:none;float:initial;width:104px;height:104px;padding:8px;border:1px solid #d9d9d9;border-radius:2px;font-size:14px}.dw-f-image-viewer-list-item-image-info-contain{position:relative;height:100%;overflow:hidden}.dw-f-image-viewer-list-item-image-info-error{border-color:#ff4d4f}.dw-f-image-viewer-list-item-title{width:104px;height:45px;position:relative;float:left;overflow:hidden}.dw-f-image-viewer-list-item-progress{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:100%}.dw-f-image-viewer-list-item-loading{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:100%}.dw-f-image-viewer-list-item-uploading-text{color:#00000073;text-align:center}.dw-f-image-viewer-list-item-thumbnail{top:8px;left:8px;text-align:center;opacity:.8;position:static;display:block;width:100%;height:100%;-o-object-fit:cover;object-fit:cover}.dw-f-image-viewer-list-item-thumbnail>img{position:static;display:block;width:100%;height:100%;-o-object-fit:cover;object-fit:cover}.dw-f-image-viewer-list-item .actions-mask:before{position:absolute;display:block;z-index:1;width:100%;height:100%;background-color:#00000080;opacity:0;transition:all .3s;content:" "}.dw-f-image-viewer-list-item .actions-mask:hover:before{opacity:1}.dw-f-image-viewer-list-item .actions-mask:hover .dw-f-image-viewer-list-item-actions{opacity:1}.dw-f-image-viewer-list-item-fileicon{display:flex;align-items:center;justify-content:center;height:100%;font-size:50px}.dw-f-image-viewer-list-item-fileicon .file-icon-container i{line-height:normal;line-height:initial}.dw-f-image-viewer-list-item-actions{font-size:16px;position:absolute;top:50%;left:50%;z-index:10;white-space:nowrap;transform:translate(-50%,-50%);opacity:0;transition:all .3s}.dw-f-image-viewer-list-item-actions-disabled{opacity:.5;pointer-events:none}.dw-f-image-viewer-list-item-actions .action-icon{z-index:10;margin:0 4px;color:#ffffffd9;cursor:pointer;transition:all .3s}.dw-f-image-viewer-list-item-checkBox{position:absolute;float:right;top:0px;right:0px;z-index:1;cursor:pointer}.dw-f-image-viewer-list-item-check:hover{opacity:1}.dw-f-image-viewer-list-item-other-dialog{max-width:200px;max-height:150px;overflow:auto}\n'],encapsulation:2}),e})(),Be=(()=>{class e{constructor(e){this.dwImageViewerFileService=e,this.fileIcon=null}set mimeType(e){this.fileIcon=e?0===e.indexOf("image/")?"file-image":0===e.indexOf("video/")?"video-camera":0===e.indexOf("audio/")?"customer-service":0===e.indexOf("text/")?"file-text":this.dwImageViewerFileService.mimeToIcon(e):this.dwImageViewerFileService.mimeToIcon(e)}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)(n.\u0275\u0275directiveInject(_e))},e.\u0275cmp=n.\u0275\u0275defineComponent({type:e,selectors:[["dw-image-viewer-file-icon"]],inputs:{mimeType:"mimeType",fileIconColor:"fileIconColor"},decls:12,vars:10,consts:[[1,"file-icon-container"],[3,"ngSwitch"],["dw-icon","","dwTheme","fill",3,"dwType","ngStyle",4,"ngSwitchCase"],["dw-icon","","dwType","file","dwTheme","fill",3,"ngStyle",4,"ngSwitchDefault"],["dw-icon","","dwTheme","fill",3,"dwType","ngStyle"],["dw-icon","","dwType","file","dwTheme","fill",3,"ngStyle"]],template:function(e,t){1&e&&(n.\u0275\u0275elementStart(0,"div",0),n.\u0275\u0275elementContainerStart(1,1),n.\u0275\u0275template(2,re,1,4,"i",2),n.\u0275\u0275template(3,le,1,4,"i",2),n.\u0275\u0275template(4,ae,1,4,"i",2),n.\u0275\u0275template(5,se,1,4,"i",2),n.\u0275\u0275template(6,ce,1,4,"i",2),n.\u0275\u0275template(7,de,1,4,"i",2),n.\u0275\u0275template(8,we,1,4,"i",2),n.\u0275\u0275template(9,me,1,4,"i",2),n.\u0275\u0275template(10,pe,1,4,"i",2),n.\u0275\u0275template(11,he,1,3,"i",3),n.\u0275\u0275elementContainerEnd(),n.\u0275\u0275elementEnd()),2&e&&(n.\u0275\u0275advance(1),n.\u0275\u0275property("ngSwitch",t.fileIcon),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngSwitchCase","file-image"),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngSwitchCase","video-camera"),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngSwitchCase","customer-service"),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngSwitchCase","file-pdf"),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngSwitchCase","file-word"),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngSwitchCase","file-excel"),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngSwitchCase","file-ppt"),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngSwitchCase","file-zip"),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngSwitchCase","file-text"))},directives:[m.NgSwitch,m.NgSwitchCase,m.NgSwitchDefault,p.DwIconDirective,m.NgStyle],styles:[""],encapsulation:2}),e})(),We=(()=>{class e{constructor(e,t,i,n,o){this.imageViewerService=e,this.imageViewerFileService=t,this.translateService=i,this.dwMessageService=n,this.cd=o,this.fileSrc="",this.isImage=!0,this.isVideo=!1,this.fileSrcLoadingStatus="",this._originViewerAction=this.imageViewerService.viewerActionDefault(),this._viewerAction=this.imageViewerService.viewerActionDefault(),this.dwContainerStyle={"background-color":"#222222",height:"450px"},this.dwEyeConfig={show:!1,disabled:!0,title:this.translateService.instant("dw-image-viewer-preview")},this.fileIconColor="#ffffff",this.isDownLoad=!1,this.fileSrcDataUrl="",this.imageRegx=new RegExp(this.imageViewerService.validImageExtension,"i")}set type(e){this._type=e}get type(){return this._type}set viewerAction(e){Object.keys(e).forEach(t=>{this._viewerAction[t]=Object.assign(this._viewerAction[t],e[t])})}get viewerAction(){return this._viewerAction}set containerStyle(e){e&&Object.keys(e).forEach(t=>{this.dwContainerStyle[t]=e[t]})}ngOnInit(){}ngAfterViewInit(){!this.fileSrc||(Object.keys(this.viewerAction).forEach(e=>{this._originViewerAction[e]=Object.assign({},this.viewerAction[e])}),this.imageViewerService.inicializarImageViewer(this.viewContainer).subscribe(e=>{this.showImage()}))}showImage(){if(this.imageViewerService.hideViewer(),!this.fileSrc)return;let e=null,t=null;this._getFileSrc().subscribe(i=>{this.fileSrc=i,this.fileSrc instanceof File?e=this.fileSrc:t=this.fileSrc,this.imageViewerFileService.getTypeByProperty(e,this.type,this.name,t).subscribe(e=>{this.type=e.mimeType,this.isVideo="video/mp4"===this.type||"video/webm"===this.type||"video/ogg"===this.type,this.isImage=this.imageViewerFileService.isViewImageType(this.type),this.fileSrc instanceof File?this.blobtoDataURL(this.fileSrc,e=>{this.fileSrcDataUrl=e,this.cd.detectChanges(),this.isImage?(this.imageViewerService.showViewer(),this.imageViewerService.showImage(this.fileSrcDataUrl)):this._handleNotImageFile()}):(this.fileSrcDataUrl=this.fileSrc,this.cd.detectChanges(),this.isImage?(this.imageViewerService.showViewer(),this.imageViewerService.showImage(this.fileSrcDataUrl)):this._handleNotImageFile())})})}_getFileSrc(){return new o.Observable(e=>{this.fileSrc instanceof o.Observable?this.fileSrc.subscribe(t=>{this.type=t.blob.type,e.next(t.dataUrl);for(let e=0;e<this.thumbnailList.length;e++)if(this.thumbnailList[e].uid===this.uid){this.thumbnailList[e].url=t.dataUrl,this.thumbnailList[e].type||(this.thumbnailList[e].type=t.blob.type);break}},e=>{this.fileSrcLoadingStatus="error",this.cd.detectChanges()}):e.next(this.fileSrc)})}_handleNotImageFile(){if(this.imageViewerService.hideViewer(),this.viewerAction.dwFullScreen.disabled=!0,this.viewerAction.dwZoomIn.disabled=!0,this.viewerAction.dwZoomOut.disabled=!0,this.viewerAction.dwResetZoom.disabled=!0,this.viewerAction.dwOriginalSize.disabled=!0,this.viewerAction.dwRotateRight.disabled=!0,this.viewerAction.dwRotateLeft.disabled=!0,this.type&&"application/pdf"===this.type.toLowerCase()&&(/^([Hh])([Tt]){2}([Pp])([Ss]){0,1}:/.test(this.fileSrc)||/\.[Pp][Dd][Ff]$/.test(this.fileSrc)))return this.dwEyeConfig.disabled=!1,void(this.dwEyeConfig.show=!0);this.isVideo="video/mp4"===this.type||"video/webm"===this.type||"video/ogg"===this.type}blobtoDataURL(e,t){const i=new FileReader;i.onload=e=>{t(e.target.result)},i.readAsDataURL(e)}download(){this.isDownLoad=!0;let e=null;e=this.fileSrc instanceof File?this.fileSrc:this.fileSrcDataUrl,this.imageViewerFileService.downLoad(e,this.name).subscribe(e=>{if(this.isDownLoad=!1,!e.success){const e=this.translateService.instant("dw-downLoad-err");this.dwMessageService.create("loading",e)}})}fullScreen(){this.imageViewerService.fullScreen(this.fileSrcDataUrl)}originalSize(){this.imageViewerService.originalSize()}resetZoom(){this.imageViewerService.resetZoom()}zoomIn(){this.imageViewerService.zoomIn()}zoomOut(){this.imageViewerService.zoomOut()}rotateRight(){this.imageViewerService.rotateRight()}rotateLeft(){this.imageViewerService.rotateLeft()}reSetInfo(e){this.fileSrcDataUrl="",this.viewerAction=this._originViewerAction,this.isImage=!0,this.type=null,this.fileSrc=null,this.uid=null,this.name=null,this.isVideo=!1,this.title=null,Object.keys(e).forEach(t=>{this[t]=e[t]})}next(){this.onNext(this.uid).subscribe(e=>{e.fileSrc&&(this.reSetInfo(e),this.showImage())})}previous(){this.onPrevious(this.uid).subscribe(e=>{e.fileSrc&&(this.reSetInfo(e),this.showImage())})}eye(){window.open(this.fileSrc,"_blank")}}return e.\u0275fac=function(t){return new(t||e)(n.\u0275\u0275directiveInject(Le),n.\u0275\u0275directiveInject(_e),n.\u0275\u0275directiveInject(l.TranslateService),n.\u0275\u0275directiveInject(d.DwMessageService),n.\u0275\u0275directiveInject(n.ChangeDetectorRef))},e.\u0275cmp=n.\u0275\u0275defineComponent({type:e,selectors:[["dw-image-viewer"]],viewQuery:function(e,t){if(1&e&&n.\u0275\u0275viewQuery(ge,7),2&e){let e;n.\u0275\u0275queryRefresh(e=n.\u0275\u0275loadQuery())&&(t.viewContainer=e.first)}},inputs:{fileSrc:"fileSrc",fileIconColor:"fileIconColor",type:"type",viewerAction:"viewerAction",containerStyle:"containerStyle",uid:"uid",name:"name",title:"title",thumbnailList:"thumbnailList",toolbarStyle:"toolbarStyle",titleStyle:"titleStyle",onPrevious:"onPrevious",onNext:"onNext"},features:[n.\u0275\u0275ProvidersFeature([Le])],decls:10,vars:7,consts:[[1,"view-package"],["class","view-tooltip",3,"ngStyle",4,"ngIf"],[1,"description",3,"ngStyle"],[1,"view-container",3,"ngStyle"],["viewContainer",""],["class","loading",4,"ngIf"],["class","other-file",4,"ngIf"],["class","video-type",4,"ngIf"],[1,"view-tooltip",3,"ngStyle"],[3,"ngClass","title","click",4,"ngIf"],["style","padding-top:-5px",3,"ngClass","title","click",4,"ngIf"],[3,"title",4,"ngIf"],[3,"ngClass","title","click"],["dw-icon","","dwType","left","dwTheme","outline"],["dw-icon","","dwType","right","dwTheme","outline"],["dw-icon","","dwType","eye-o","dwTheme","outline"],["dw-icon","","dwType","zoom-in","dwTheme","outline"],["dw-icon","","dwType","zoom-out","dwTheme","outline"],["dw-icon","","dwType","redo","dwTheme","outline"],["dw-icon","","dwType","undo","dwTheme","outline"],["dw-icon","","dwType","column-width","dwTheme","outline"],[2,"padding-top","-5px",3,"ngClass","title","click"],[1,"icon-div"],["dw-icon","","dwType","fullscreen","dwTheme","outline"],[3,"title"],["dw-icon","","dwType","edit","dwTheme","fill"],["dw-icon","","dwType","download","dwTheme","outline",4,"ngIf"],["dw-icon","","dwType","loading","dwTheme","outline",4,"ngIf"],["dw-icon","","dwType","download","dwTheme","outline"],["dw-icon","","dwType","loading","dwTheme","outline"],[1,"loading"],["dw-icon","","dwType","loading",4,"ngIf"],["dw-icon","","dwType","warning","dwTheme","outline",4,"ngIf"],["dw-icon","","dwType","loading"],["dw-icon","","dwType","warning","dwTheme","outline"],[1,"other-file"],[3,"mimeType","fileIconColor"],[1,"video-type"],["controls","",3,"src"]],template:function(e,t){1&e&&(n.\u0275\u0275elementStart(0,"div",0),n.\u0275\u0275template(1,Ve,13,13,"div",1),n.\u0275\u0275elementStart(2,"div",2),n.\u0275\u0275elementStart(3,"div"),n.\u0275\u0275text(4),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(5,"div",3,4),n.\u0275\u0275template(7,ze,3,2,"div",5),n.\u0275\u0275template(8,Re,2,2,"div",6),n.\u0275\u0275template(9,Me,3,1,"div",7),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementEnd()),2&e&&(n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",t.fileSrcDataUrl),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngStyle",t.titleStyle),n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate(t.title?t.title:t.name?t.name:t.fileSrcDataUrl),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngStyle",t.dwContainerStyle),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf",!t.fileSrcDataUrl),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",!t.isImage&&!t.isVideo),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",t.isVideo&&t.type))},directives:[m.NgIf,m.NgStyle,m.NgClass,p.DwIconDirective,Be],pipes:[l.TranslatePipe],styles:[".view-package[_ngcontent-%COMP%]{height:100%;width:100%;display:flex;flex-flow:column}.view-package[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{order:1}.view-package[_ngcontent-%COMP%]   .view-tooltip[_ngcontent-%COMP%]{order:3}.view-package[_ngcontent-%COMP%]   .view-container[_ngcontent-%COMP%]{order:2}.view-container[_ngcontent-%COMP%]{position:relative;top:0;left:0;right:0;bottom:50px;width:100%;height:100%;min-height:200px;background-color:#000}.view-container[_ngcontent-%COMP%]   .other-file[_ngcontent-%COMP%]{text-align:center;top:33%;position:relative}.view-container[_ngcontent-%COMP%]   .video-type[_ngcontent-%COMP%]{text-align:center;width:100%;height:100%}.view-container[_ngcontent-%COMP%]   .video-type[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{width:100%;height:100%}.view-container[_ngcontent-%COMP%]   .loading[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:100%;text-align:center}.view-container[_ngcontent-%COMP%]   .loading[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:30px;color:#ccc}[_nghost-%COMP%]     .file-icon-container i{font-size:100px}.view-tooltip[_ngcontent-%COMP%]{text-align:center;background-color:#000;padding:5px}.view-tooltip[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{padding-left:20px;color:#fff}.view-tooltip[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:24px}.view-tooltip[_ngcontent-%COMP%]   a.disabled[_ngcontent-%COMP%]{color:#444;cursor:auto}.view-tooltip[_ngcontent-%COMP%]   .icon-div[_ngcontent-%COMP%]{width:25px;height:25px;background-size:cover;display:inline-block;bottom:-5px;position:relative}.description[_ngcontent-%COMP%]{text-align:center;background-color:#000;padding:10px}.description[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{font-size:14px;font-weight:300;color:#fff;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.arrow[_ngcontent-%COMP%]{font-size:50px;width:100%;position:absolute;top:50%;z-index:1000}.arrow[_ngcontent-%COMP%]   .prev[_ngcontent-%COMP%]{cursor:pointer;left:20px;position:absolute;height:32px;margin-top:-66px}.arrow[_ngcontent-%COMP%]   .next[_ngcontent-%COMP%]{cursor:pointer;right:20px;position:absolute;height:32px;margin-top:-66px}"]}),e})(),Ze=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=n.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=n.\u0275\u0275defineInjector({providers:[Le,_e,Ue],imports:[[m.CommonModule,l.TranslateModule,p.DwIconModule,h.DwPopoverModule,g.DwProgressModule,f.DwToolTipModule,u.DwSpinModule]]}),e})()}}]);