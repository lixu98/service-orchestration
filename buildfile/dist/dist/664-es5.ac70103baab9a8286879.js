!function(){"use strict";function t(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&e(t,r)}function e(t,r){return(e=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,r)}function r(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,a=i(t);if(e){var o=i(this).constructor;r=Reflect.construct(a,arguments,o)}else r=a.apply(this,arguments);return n(this,r)}}function n(t,e){if(e&&("object"==typeof e||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function i(t){return(i=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function a(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */a=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},i=n.iterator||"@@iterator",o=n.asyncIterator||"@@asyncIterator",s=n.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(C){u=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var i=e&&e.prototype instanceof f?e:f,a=Object.create(i.prototype),o=new A(n||[]);return a._invoke=function(t,e,r){var n="suspendedStart";return function(i,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===i)throw a;return R()}for(r.method=i,r.arg=a;;){var o=r.delegate;if(o){var s=x(o,r);if(s){if(s===l)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=h(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,o),a}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(C){return{type:"throw",arg:C}}}t.wrap=c;var l={};function f(){}function d(){}function v(){}var y={};u(y,i,function(){return this});var p=Object.getPrototypeOf,S=p&&p(p(w([])));S&&S!==e&&r.call(S,i)&&(y=S);var b=v.prototype=f.prototype=Object.create(y);function g(t){["next","throw","return"].forEach(function(e){u(t,e,function(t){return this._invoke(e,t)})})}function I(t,e){function n(i,a,o,s){var u=h(t[i],t,a);if("throw"!==u.type){var c=u.arg,l=c.value;return l&&"object"==typeof l&&r.call(l,"__await")?e.resolve(l.__await).then(function(t){n("next",t,o,s)},function(t){n("throw",t,o,s)}):e.resolve(l).then(function(t){c.value=t,o(c)},function(t){return n("throw",t,o,s)})}s(u.arg)}var i;this._invoke=function(t,r){function a(){return new e(function(e,i){n(t,r,e,i)})}return i=i?i.then(a,a):a()}}function x(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,x(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=h(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var i=n.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function m(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function T(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function A(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(m,this),this.reset(!0)}function w(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,a=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return a.next=a}}return{next:R}}function R(){return{value:void 0,done:!0}}return d.prototype=v,u(b,"constructor",v),u(v,"constructor",d),d.displayName=u(v,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,u(t,s,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},g(I.prototype),u(I.prototype,o,function(){return this}),t.AsyncIterator=I,t.async=function(e,r,n,i,a){void 0===a&&(a=Promise);var o=new I(c(e,r,n,i),a);return t.isGeneratorFunction(r)?o:o.next().then(function(t){return t.done?t.value:o.next()})},g(b),u(b,s,"Generator"),u(b,i,function(){return this}),u(b,"toString",function(){return"[object Generator]"}),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=w,A.prototype={constructor:A,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(T),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return o.type="throw",o.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var s=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=t,o.arg=e,a?(this.method="next",this.next=a.finallyLoc,l):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),T(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var i=n.arg;T(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:w(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function u(t,e,r){return e&&s(t.prototype,e),r&&s(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(self.webpackChunkassc_crs=self.webpackChunkassc_crs||[]).push([[664],{68722:function(e,n,i){i.r(n),i.d(n,{DwTabClose:function(){return O},DwTabEvent:function(){return A},DwTabFocusin:function(){return R},DwTabFocusout:function(){return C},DwTabInfoService2:function(){return m},DwTabInfoStorageService:function(){return j},DwTabOpen:function(){return w},DwTabRouteConfigService:function(){return x},DwTabRoutingService:function(){return T}});var s,c=i(64762),h=i(42746),l=i(32276),f=i(71049),d=i(87974),v=i(30469),y=i(20033),p=i(47372),S=i(68521),b=i(27038),g=i(50437),I=i(62481),x=((s=function(){function t(e,r,n,i,a,s){o(this,t),this.authPermissionInfoService=e,this.operationInfoListService=r,this.operationInfoService=n,this.defaultAppRouterService=i,this.dwLanguagePreService=a,this.tabRouteConfigJson=s}return u(t,[{key:"newConfig",value:function(t,e){var r={id:"",title:"",menuId:"",routerLink:"",type:""};return t&&((r=Object.assign(r,e)).routerLink=t.routerLink,r.type=t.type),r}},{key:"routeConfigInfos$",get:function(){var t=this;return f.Observable.create(function(e){var r=null;r=t.operationInfoListService.operationListMap$.subscribe(function(n){if(null!==n){var i=Object.assign({},n),a=null;a=t.authPermissionInfoService.authorizedList$.subscribe(function(n){var o=Object.assign({},n),s=[],u=null;u=t.defaultAppRouterService.defaultAppInfo$.subscribe(function(n){var c=JSON.parse(JSON.stringify(t.tabRouteConfigJson));Array.isArray(c)||(c=[]);var h=!1;if(n.programId){for(var l=c.length,f=0;f<l;f++)"home"===c[0].id&&(h=!0,c[0].id=n.programId,c[0].title=t.dwLanguagePreService.program+"dw-home",c[0].type=n.execType,c[0].queryParams=JSON.parse(JSON.stringify(n.queryParams)));if(!h){h=!0;var d={id:"home",title:"",canClose:!1,defaultOpen:!0,canMultiOpen:!1,iconClass:"dwType:home",routerLink:""};n.programId&&(d.id=n.programId,c[0].title=t.dwLanguagePreService.program+"dw-home",d.type=n.execType,d.queryParams=JSON.parse(JSON.stringify(n.queryParams))),c.splice(0,0,d)}}c.forEach(function(e){var r=e.id,n=!1;if((o[r]||"externalUrl"===e.type)&&(n=!0),n){var a=i[r];if(void 0===a){var u=t.operationInfoService.operationBaseByType(e.type,r);u.type&&(a=Object.assign({},u))}var c=t.newConfig(a,e);""!==c.id&&s.push(c)}}),e.next({tabRouteConfig:s,operationListMap:i}),e.complete(),u&&u.unsubscribe(),a&&a.unsubscribe(),r&&r.unsubscribe()})},function(t){return console.log(t)})}})})}}]),t}()).\u0275fac=function(t){return new(t||s)(h.\u0275\u0275inject(l.DwAuthPermissionInfoService),h.\u0275\u0275inject(y.DwOperationInfoListService),h.\u0275\u0275inject(y.DwOperationInfoService),h.\u0275\u0275inject(S.DwDefaultAppRouterService),h.\u0275\u0275inject(S.DwLanguagePreService),h.\u0275\u0275inject(v.DW_TAB_ROUTE_CONFIG_JSON))},s.\u0275prov=h.\u0275\u0275defineInjectable({factory:function(){return new s(h.\u0275\u0275inject(l.DwAuthPermissionInfoService),h.\u0275\u0275inject(y.DwOperationInfoListService),h.\u0275\u0275inject(y.DwOperationInfoService),h.\u0275\u0275inject(S.DwDefaultAppRouterService),h.\u0275\u0275inject(S.DwLanguagePreService),h.\u0275\u0275inject(v.DW_TAB_ROUTE_CONFIG_JSON))},token:s,providedIn:"root"}),s),m=function(){var t=function(){function t(e,r,n,i,a,s,u,c,h,l,v){var y=this;o(this,t),this.router=e,this.authService=r,this.routerInfo=n,this.routerConfigService=i,this.dwLanguagePreService=a,this.operationInfoService=s,this.iframeGeneralInfoService=u,this.iframeFineReportInfoService=c,this.TAB_MULTI_OPEN=h,this.DEFAULT_APP=l,this.OPEN_DEFAULT_WHEN_CLOSE_TABS=v,this.create$=new f.Subject,this.tabSetStateArray=[],this.currentTabInfo=null,this.previousTabInfo=null,this.currentIndex=-1,this.previousIndex=-1,this.isTabChanged=!1,this.selectedIndexChange=new f.Subject,this.tabSetIndexChanged=new f.Subject,this.isStarted=!1,this.shouldStop=!1,this.shouldDestroyTab=null,this.currentRouteSnapshot=null,this.isNavigationPopState=!1,this.readyToDestroy=!1,this.tabRouteConfig=[],this.defaultTabCreating=!1,this._tabRouterChanged=new f.BehaviorSubject(null),this.router.events.subscribe(function(t){if(t instanceof d.NavigationStart&&(y.isNavigationPopState="popstate"===t.navigationTrigger),t instanceof d.NavigationEnd&&y.isStarted&&y.canMultiOpen(y.tabSetStateArray[y.currentIndex])){y.tabSetStateArray[y.currentIndex].hasOwnProperty("histories")||(y.tabSetStateArray[y.currentIndex].histories=[]);var e=y.tabSetStateArray[y.currentIndex].histories,r=e.findIndex(function(e){return e===t.urlAfterRedirects});-1!==r&&e.splice(r,1),e.push(t.urlAfterRedirects),e.length>20&&e.shift()}})}return u(t,[{key:"tabRouterChanged",get:function(){return this._tabRouterChanged.isStopped&&(this._tabRouterChanged=new f.BehaviorSubject(null)),this._tabRouterChanged}},{key:"close",value:function(t){var e=this,r=this.tabSetStateArray.length;if(!1!==this.tabSetStateArray[t].canClose)if(this.shouldDestroyTab=this.tabSetStateArray[t],t!==this.currentIndex)this.destroyTabRouteState(this.shouldDestroyTab),this.shouldDestroyTab=null,this.tabSetStateArray.splice(t,1),t<this.currentIndex&&(this.currentIndex=this.currentIndex-1,this.currentTabInfo=this.tabSetStateArray[this.currentIndex],this.tabSetIndexChanged.next(this.currentIndex)),t<=this.previousIndex&&(t===this.previousIndex?(this.previousIndex=this.currentIndex,this.previousTabInfo=this.tabSetStateArray[this.previousIndex]):(this.previousIndex=this.previousIndex-1,this.previousTabInfo=this.tabSetStateArray[this.previousIndex]));else{this.tabSetStateArray[t].canDestroy=!0,this.readyToDestroy=!0;var n,i=this.tabSetStateArray.length-1;if(this.shouldDestroyTab.opener&&((n=this.tabSetStateArray.find(function(t){return t.tabId===e.shouldDestroyTab.opener}))&&(i=this.tabSetStateArray.indexOf(n))),n||(i=this.previousIndex!==t?this.previousIndex:t===this.tabSetStateArray.length-1?t-1:t+1),1===r)return this.OPEN_DEFAULT_WHEN_CLOSE_TABS?void this.closeAll():(this.currentIndex=-1,this.previousIndex=-1,void this.destroyReadyToDestroyRouteInfo());this.setCurrentIndex(i)}}},{key:"createFromRouteInfo",value:function(t,e){var r=!1;this.isTabChanged=!0,void 0===t.queryParams&&(t.queryParams={});var n=t;if(void 0===n.navigateHistory&&(n.navigateHistory=new Map),n.tabId||(n.tabId=e||this.createTabId()),e){var i=this.tabSetStateArray.find(function(t){return t.id===e||t.tabId===e});i&&(e=i.tabId)}if(n.title||(n.title=n.id?this.dwLanguagePreService.program+n.id:""),this.create$.next(n),!this.canMultiOpen(n)||this.isNavigationPopState)for(var a=0;a<this.tabSetStateArray.length;a++)if(this.isTabEqual(n,this.tabSetStateArray[a],!0)){this.tabSetStateArray[a].title=n.title,this.previousIndex=this.currentIndex,this.currentIndex=a,r=!0,this.isTabChanged=this.currentIndex!==this.previousIndex,this.tabSetIndexChanged.next(this.currentIndex);var o=this.router.onSameUrlNavigation;return this.router.onSameUrlNavigation="reload",this.isNavigationPopState||this.router.navigateByUrl(this.tabSetStateArray[a].currentUrl||t.routerLink),this.router.onSameUrlNavigation=o,this.tabSetStateArray[a].tabId}if(e){for(var s=-1,u=0;u<this.tabSetStateArray.length;u++)if(this.tabSetStateArray[u].tabId===e){s=u,r=!0;break}s>-1&&(s===this.currentIndex?this.isTabChanged=!1:(this.tabSetStateArray[s].opener||(this.tabSetStateArray[s].opener=this.tabSetStateArray[this.currentIndex].tabId),this.tabSetStateArray[s].title=n.title,this.previousIndex=this.currentIndex,this.currentIndex=s))}r||(-1===this.currentIndex&&(this.currentIndex=0),this.tabSetStateArray.push(n),n.opener=this.tabSetStateArray[this.currentIndex].tabId,this.previousIndex=this.currentIndex,this.currentIndex=this.tabSetStateArray.length-1);var c=this.router.onSameUrlNavigation;return this.router.onSameUrlNavigation="reload",this.isNavigationPopState||this.router.navigateByUrl(n.routerLink),this.router.onSameUrlNavigation=c,this.tabSetIndexChanged.next(this.currentIndex),n.tabId}},{key:"shouldAttach",value:function(t){var e,r=this;this.currentRouteSnapshot=t;var n;if(!this.isStarted||t&&t.data&&!1===t.data.tabCache)return!1;if(this.isNavigationPopState){var i=this.createTabRouteState(t),a=this.existInTabsIndex(i);-1!==a?this.setCurrentIndex(a):this.createFromRouteInfo(i),"externalUrl"===this.tabSetStateArray[this.currentIndex].type&&(this.tabSetStateArray[this.currentIndex].title=this.dwLanguagePreService.menu+this.tabSetStateArray[this.currentIndex].id),this.isNavigationPopState=!1,this.tabSetIndexChanged.next(this.currentIndex)}if(!(n=this.checkExistsByRoute(t))&&!t.routeConfig.children&&!(null===(e=this.tabSetStateArray[this.currentIndex])||void 0===e?void 0:e.id)){var o=this.tabSetStateArray[this.currentIndex];this.operationInfoService.routerOperationInfo(t).pipe((0,p.first)()).subscribe(function(t){o.id=t.id})}this.tabSetStateArray[this.currentIndex].currentUrl=this.getFullUrl(t);var s=this.tabSetStateArray[this.currentIndex];return("fineReport"===s.type||"externalUrl"===s.type)&&void 0===s.item&&this.operationInfoService.routerOperationInfo(t).pipe((0,p.first)()).subscribe(function(t){Object.assign(s,t),s.type&&r.setIframeInfo(s)}),this.currentTabInfo=this.tabSetStateArray[this.currentIndex],n}},{key:"shouldDetach",value:function(e){var r=this.isStarted;return!(!this.isStarted||(this.isTabChanged?this.tabSetStateArray[this.previousIndex].currentUrl=this.getFullUrl(e):this.tabSetStateArray[this.currentIndex].currentUrl=this.getFullUrl(e),e&&e.data&&!1===e.data.tabCache))&&(t.isUnderHosting(e)||this.destroyTabHistory(this.tabSetStateArray[this.previousIndex]),this.currentTabInfo=this.tabSetStateArray[this.currentIndex],r)}},{key:"retrieve",value:function(e){var r=this;if("**"===e.routeConfig.path)return null;var n=t.isUnderHosting(e);if(this.currentRouteSnapshot=e,this.shouldStop=!n&&!this.isStarted,this.isStarted){var i,a=this.getRouteKey(e);-1===this.currentIndex&&(this.currentIndex=this.previousIndex=this.tabSetStateArray.length),void 0===this.tabSetStateArray[this.currentIndex]&&(i=this.createTabRouteState(e),this.tabSetStateArray[this.currentIndex]=Object.assign({},i),this.tabSetStateArray[this.currentIndex].navigateHistory.set(i.key,i)),void 0===this.tabSetStateArray[this.currentIndex].key&&(this.tabSetStateArray[this.currentIndex].key=a),this.previousTabInfo=this.currentIndex!==this.previousIndex?this.tabSetStateArray[this.previousIndex]:this.tabSetStateArray[this.currentIndex],!0===this.defaultTabCreating&&this.createDefaultTabs(this.tabRouteConfig,this.currentTabInfo),this.currentTabInfo=this.tabSetStateArray[this.currentIndex];var o=this.tabSetStateArray[this.currentIndex].navigateHistory.get(a);if(void 0===o&&(o=this.createTabRouteState(e),this.tabSetStateArray[this.currentIndex].navigateHistory.set(o.key,o)),this.isStarted){var s=this.tabSetStateArray[this.currentIndex];(void 0===s.type||("fineReport"===s.type||"externalUrl"===s.type)&&void 0===s.item)&&this.operationInfoService.routerOperationInfo(e).pipe((0,p.first)()).subscribe(function(t){if(Object.assign(s,t),(void 0===s.canMultiOpen||void 0===s.reload)&&r.tabRouteConfig.length>0){var e=r.tabRouteConfig.find(function(t){return r.isTabEqual(s,t)});e&&Object.assign(s,{reload:e.reload||!1,canMultiOpen:e.canMultiOpen||r.TAB_MULTI_OPEN})}})}var u=this.getCurrentHandler(e);u&&u.id&&(this.tabSetStateArray[this.currentIndex].id=u.id),u&&!this.currentTabInfo.lastPath&&(this.currentTabInfo.lastPath=this.getLastNonemptyPath(e)),this.selectedIndexChange.next(this.currentIndex),this.tabSetIndexChanged.next(this.currentIndex);var c=this.findFirstChildComponentType(e);return u&&u.currentHandler?u.currentHandler.get(c):void 0}}},{key:"setCurrentIndex",value:function(t){if(this.currentIndex!==t){var e=this.tabSetStateArray[t];if(null!==e){e.currentUrl||(e.currentUrl=e.routerLink),this.previousIndex=this.currentIndex,this.currentIndex=t,this.isTabChanged=!0;var r=this.router.onSameUrlNavigation;this.router.onSameUrlNavigation="reload",this.isNavigationPopState||this.router.navigateByUrl(e.currentUrl),this.router.onSameUrlNavigation=r,this.selectedIndexChange.next(this.currentIndex),this.tabSetIndexChanged.next(this.currentIndex)}else console.error("\u627e\u4e0d\u5230\u6b63\u78ba\u7684\u8def\u7531")}}},{key:"store",value:function(e,r){var n,i=this.getRouteKey(e),a=(n=this.isTabChanged?this.tabSetStateArray[this.previousIndex]:this.tabSetStateArray[this.currentIndex]).navigateHistory.get(i);if(void 0===a&&(a=this.createTabRouteState(e)),this.tabChangeState={previousTabId:a.tabId,currentTabId:this.tabSetStateArray[this.currentIndex].tabId,tabChanged:this.isTabChanged},this.isTabChanged=!1,this.canReload(a,e)||!t.isUnderHosting(e))r.componentRef.destroy();else{n.navigateHistory.set(i,a),a&&!a.currentHandler&&(a.currentHandler=new Map);var o=this.findFirstChildComponentType(e);a.currentHandler.set(o,r)}this.shouldStop?this.destroy():(this.readyToDestroy&&this.destroyReadyToDestroyRouteInfo(),this.shouldDestroyTab&&(this.destroyTabRouteState(this.shouldDestroyTab),this.shouldDestroyTab=null))}},{key:"findFirstChildComponentType",value:function(t){if(t.component)return t.component;for(var e=t.firstChild;e;){if(e.component)return e.component;e=e.firstChild}}},{key:"closeAll",value:function(){var t=this;if(0!==this.tabSetStateArray.length){var e=[],r=null;this.tabSetStateArray.forEach(function(n){!1===t.isStarted?(n.canDestroy=!0,t.readyToDestroy=!0):(n.canDestroy="home"!==n.id&&n.routerLink!==t.DEFAULT_APP&&(void 0===n.canClose||n.canClose),t.OPEN_DEFAULT_WHEN_CLOSE_TABS||(n.canDestroy=!0),!0!==n.canDestroy?(e.push(n.tabId),r=n):t.readyToDestroy=!0)});var n=this.DEFAULT_APP||"/";if(!1===this.tabSetStateArray[this.currentIndex].canClose)n=null,r=null,this.destroyReadyToDestroyRouteInfo();else{var i=this.tabSetStateArray[this.previousIndex];if(i&&!1===i.canClose){r=null,n=i.currentUrl;var a=this.currentIndex;this.currentIndex=this.previousIndex,this.previousIndex=a,this.isTabChanged=!0}if(null!==r){var o=this.tabSetStateArray.indexOf(r);!1===r.canDestroy&&(o===this.currentIndex?this.destroyReadyToDestroyRouteInfo():(this.currentIndex=o,this.isTabChanged=!0),n=r.currentUrl)}else 0===e.length&&(this.currentIndex=-1)}if(!0===this.isStarted&&n&&this.OPEN_DEFAULT_WHEN_CLOSE_TABS){var s=this.router.onSameUrlNavigation;this.router.onSameUrlNavigation="reload",this.router.navigateByUrl(n),this.router.onSameUrlNavigation=s}else this.destroyReadyToDestroyRouteInfo();this.isNavigationPopState=!1,this.shouldDestroyTab=null}}},{key:"restart",value:function(){console.log("DwTabInfoService2.restart() not implemented")}},{key:"navigateToOpenerFromCurrentTab",value:function(t,e,r){for(var n=r,i=this.tabSetStateArray[this.currentIndex].opener,a=-1,o=0;o<this.tabSetStateArray.length;o++)if(this.tabSetStateArray[o].tabId===i){a=o,this.previousIndex=this.currentIndex,this.currentIndex=a;break}if(this.isTabChanged=!0,t&&-1===a){var s;n=!1,s=e?this.router.createUrlTree(t,e):this.router.createUrlTree(t),this.tabSetStateArray[this.currentIndex].opener=null,this.tabSetStateArray[this.currentIndex].title="",this.previousIndex=this.currentIndex;var u=new d.DefaultUrlSerializer,c=this.router.onSameUrlNavigation;this.router.onSameUrlNavigation="reload",this.router.navigateByUrl(u.serialize(s)),this.router.onSameUrlNavigation=c}else{this.isTabChanged=this.currentIndex!==this.previousIndex;var h=this.router.onSameUrlNavigation;this.router.onSameUrlNavigation="reload",this.router.navigateByUrl(this.tabSetStateArray[a].currentUrl||this.tabSetStateArray[a].routerLink),this.router.onSameUrlNavigation=h}this.isTabChanged&&(this.readyToDestroy=this.tabSetStateArray[this.previousIndex].canDestroy=!0===n),this.tabSetIndexChanged.next(this.currentIndex)}},{key:"closeCurrentTab",value:function(){this.close(this.currentIndex)}},{key:"createFirstRouteFromCurrentRoute",value:function(t){if(this.isStarted=!0,this.readyToDestroy=!1,this.currentRouteSnapshot){var e=this.createTabRouteState(this.currentRouteSnapshot);this.currentTabInfo=this.previousTabInfo=e,-1===this.currentIndex&&(this.currentIndex=this.previousIndex=this.tabSetStateArray.length),void 0===this.tabSetStateArray[this.currentIndex]&&(this.tabSetStateArray[this.currentIndex]=e),this.tabSetStateArray[this.currentIndex].navigateHistory.set(e.key,Object.assign({},e)),this.createFromTabConfig(t)}}},{key:"createFromTabConfig",value:function(t){var e=this;this.routerConfigService.routeConfigInfos$.pipe((0,p.first)()).subscribe(function(r){if(e.defaultTabCreating=!0,e.tabRouteConfig=r.tabRouteConfig,t){for(var n=0,i=t.tabs[n];i;)i.defaultOpen=!0,r.operationListMap[i.id]||"fineReport"===i.type||"externalUrl"===i.type?n+=1:t.tabs.splice(n,1),i=t.tabs[n];t.currentIndex>=t.tabs.length&&(t.currentIndex=0)}e.createDefaultTabs(e.tabRouteConfig,e.currentTabInfo,t)})}},{key:"getCurrentHandler",value:function(t){var e;return e="string"!=typeof t?this.getRouteKey(t):t,this.tabSetStateArray[this.currentIndex].navigateHistory.get(e)||void 0}},{key:"destroy",value:function(){this.isStarted=!1,this.shouldStop=!1,this.currentRouteSnapshot=null,this.tabRouteConfig=[],this.tabRouterChanged.complete(),this.closeAll()}},{key:"existInTabsIndex",value:function(t){if(this.tabSetStateArray[this.currentIndex].hasOwnProperty("histories")&&-1!==this.tabSetStateArray[this.currentIndex].histories.findIndex(function(e){return e===t.currentUrl}))return this.currentIndex;if(this.tabSetStateArray[this.previousIndex].currentUrl===t.currentUrl)return this.previousIndex;var e=-1;return this.tabSetStateArray.length&&(e=this.tabSetStateArray.findIndex(function(e){return e.currentUrl===t.currentUrl})),e}},{key:"checkExistsByRoute",value:function(t){if(!1===this.isStarted)return!1;var e=this.getRouteKey(t),r=this.tabSetStateArray[this.currentIndex];if(!r||!r.navigateHistory)return!1;var n=r.navigateHistory.get(e),i=this.findFirstChildComponentType(t);return!!n&&!!n.currentHandler&&n.currentHandler.has(i)}},{key:"createTabRouteState",value:function(t){var e={key:this.getRouteKey(t),tabId:this.createTabId(),id:this.routerInfo.routeSnapshotProgramId(t),title:"",queryParams:t.queryParams,params:t.params,routerLink:this.getFullUrl(t),navigateHistory:new Map,currentUrl:this.getFullUrl(t),currentHandler:new Map};return this.operationInfoService.routerOperationInfo(t).pipe((0,p.first)()).subscribe(function(t){Object.assign(e,t)}),e}},{key:"getTabState",value:function(t){return this.tabSetStateArray[t]}},{key:"getRoutePathFromRoot",value:function(e){var r=this,n=e.pathFromRoot.map(function(e){return t.routeToUrl(e)}).join("");return n+=e.children.map(function(t){return r.getChildRouteKeys(t)})}},{key:"getRoutePath",value:function(e){return e.pathFromRoot.map(function(e){return t.routeToUrl(e)}).join("/")+"*"}},{key:"getRouteKey",value:function(t){return this.getStoreKey(t)}},{key:"getConfiguredUrl",value:function(t){return"/"+t.pathFromRoot.filter(function(t){return t.routeConfig}).map(function(t){return t.routeConfig?t.routeConfig.path:null}).join("/")}},{key:"getFullUrl",value:function(t){var e=this.getUrl(t);return t._routerState&&t._routerState.url&&(e=t._routerState.url),e}},{key:"getUrl",value:function(t){for(var e=this.getTruthRoute(t),r=[];e;)r.push(e.url.join("/")),e=e.parent;return"/"+r.filter(function(t){return t}).reverse().join("/")}},{key:"getTruthRoute",value:function(t){for(var e=t;e.firstChild;)e=e.firstChild;return e}},{key:"destroyTabRouteState",value:function(t){var e=t.navigateHistory;e&&e.forEach(function(t){t.currentHandler&&t.currentHandler.forEach(function(t,e){t&&t.componentRef&&t.componentRef.destroy()})}),t.currentHandler&&t.currentHandler.size>0&&t.currentHandler.forEach(function(t){t&&t.componentRef&&t.componentRef.destroy()})}},{key:"getLastNonemptyPath",value:function(t){for(var e=t,r="";e;)e.routeConfig&&(r=e.routeConfig.path),e=e.firstChild;if(""===r)for(var n=t.pathFromRoot,i=n.length-1;i>-1;i--)if(n[i].routeConfig&&""!==n[i].routeConfig.path){r=n[i].routeConfig.path;break}return r}},{key:"setIframeInfo",value:function(t){return(0,c.mG)(this,void 0,void 0,a().mark(function e(){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t.type,e.next="fineReport"===e.t0?3:"externalUrl"===e.t0?6:9;break;case 3:return e.next=5,this.iframeFineReportInfoService.finereportInfo(t.id,t.queryParams).pipe((0,p.first)()).toPromise();case 5:return e.abrupt("return",t.item=e.sent);case 6:return e.next=8,this.iframeGeneralInfoService.generalInfo(t.id,t.queryParams).pipe((0,p.first)()).toPromise();case 8:return e.abrupt("return",t.item=e.sent);case 9:case"end":return e.stop()}},e,this)}))}},{key:"destroyReadyToDestroyRouteInfo",value:function(){for(var t,e=this,r=[],n=0,i=this.tabSetStateArray[n];i;)!0===i.canDestroy?(r.push(i),this.tabSetStateArray.splice(n,1)):n++,i=this.tabSetStateArray[n];if(r.forEach(function(t){e.destroyTabHistory(t)}),1===r.length&&r[0].opener&&(t=this.tabSetStateArray.find(function(n,i){return r[0].opener===n.tabId&&(e.currentIndex=e.previousIndex=i,t=n,!0)})),!t)for(var a=0;a<this.tabSetStateArray.length;a++)if(this.tabSetStateArray[a].tabId===this.currentTabInfo.tabId){this.currentIndex=this.previousIndex=a;break}this.currentIndex>=this.tabSetStateArray.length&&(this.currentIndex=this.tabSetStateArray.length-1,this.currentTabInfo=this.tabSetStateArray[this.currentIndex]),this.previousIndex>=this.tabSetStateArray.length&&(this.previousIndex=this.currentIndex,this.previousTabInfo=this.tabSetStateArray[this.previousIndex]),this.tabSetIndexChanged.next(this.currentIndex),this.readyToDestroy=!1}},{key:"destroyTabHistory",value:function(t){var e=this;"fineReport"===t.type||"externalUrl"===t.type||(t.navigateHistory.forEach(function(t){t.currentHandler&&(e.destroyTabRouteState(t),t.currentHandler=null)}),t.navigateHistory.clear())}},{key:"createTabId",value:function(){return""+(new Date).getTime()+this.tabSetStateArray.length+Math.floor(100*Math.random())}},{key:"getChildRouteKeys",value:function(e){var r=this,n=t.routeToUrl(e);return e.children.reduce(function(t,e){return t+r.getChildRouteKeys(e)},n)}},{key:"getStoreKey",value:function(e){for(var r=this.getTruthRoute(e),n=t.getResolvedUrl(r),i=[],a=r;a.firstChild;)a=a.firstChild,i.push(a.url.join(""));return n+"////"+i.join("/")}},{key:"createDefaultTabs",value:function(t,e,r){var n,i=this;if(e&&t){var a=-1,o=[],s=t.filter(function(t){return!0===t.defaultOpen});if(r&&r.tabs.length>0)for(var u=0;u<r.tabs.length;u++){var c=r.tabs[u],h=this.createRouteInfoFromTabConfig(c);-1===a&&this.equalCurrentUrlOrRouterLink(this.currentTabInfo,c)&&((h=Object.assign(this.currentTabInfo,h)).lastPath=this.getLastNonemptyPath(this.currentRouteSnapshot),a=u),o.push(h)}else for(var l=0;l<s.length;l++){var f=s[l],d=this.createRouteInfoFromTabConfig(f);!0===f.defaultOpen&&(this.isTabEqual(this.currentTabInfo,d)&&((d=Object.assign(this.currentTabInfo,d)).currentUrl=this.getFullUrl(this.currentRouteSnapshot),d.lastPath=this.getLastNonemptyPath(this.currentRouteSnapshot),a=l),o.push(d))}if(-1===a&&o.push(this.tabSetStateArray[this.currentIndex]),(n=this.tabSetStateArray).splice.apply(n,[0,this.tabSetStateArray.length].concat(o)),r&&r.tabs.length===this.tabSetStateArray.length&&r.tabs.length===o.length){var v=r.tabs[r.currentIndex];v&&this.equalCurrentUrlOrRouterLink(v,this.currentTabInfo)&&(a=r.currentIndex),this.currentIndex=this.previousIndex=a}else this.currentIndex=this.previousIndex=this.tabSetStateArray.length>0&&a>=0?a:this.tabSetStateArray.length-1;this.currentTabInfo=this.previousTabInfo=this.tabSetStateArray[this.currentIndex],this.currentTabInfo&&this.currentTabInfo.type&&this.setIframeInfo(this.currentTabInfo),this.tabRouteConfig.length>0&&this.tabSetStateArray.forEach(function(t){if(t.id){var e=i.tabRouteConfig.find(function(e){return i.isTabEqual(t,e)});e&&Object.assign(t,{reload:e.reload,canMultiOpen:e.canMultiOpen})}}),this.tabSetIndexChanged.next(this.currentIndex),this.defaultTabCreating=!1}}},{key:"equalCurrentUrlOrRouterLink",value:function(t,e){return(t.currentUrl||t.routerLink)===(e.currentUrl||t.routerLink)}},{key:"createRouteInfoFromTabConfig",value:function(t){var e,r={};t.queryParams&&(r.queryParams=t.queryParams),e=t.params?[t.routerLink,t.params]:[t.routerLink];var n=this.router.createUrlTree(e,r),i=(new d.DefaultUrlSerializer).serialize(n);return Object.assign({tabId:t.tabId||this.createTabId(),navigateHistory:new Map,currentUrl:i},t)}},{key:"canMultiOpen",value:function(t){var e=this;if(this.tabRouteConfig.length>0){var r=this.tabRouteConfig.find(function(r){return e.isTabEqual(t,r)});if(r&&void 0!==r.canMultiOpen)return!!r.canMultiOpen}return!!this.TAB_MULTI_OPEN}},{key:"canReload",value:function(t,e){var r=this;if(this.tabRouteConfig.length>0){var n=this.tabRouteConfig.find(function(e){return r.isTabEqual(t,e)});if(n&&n.reload)return!0===n.reload}return void 0!==e.data.reload&&!!e.data.reload}},{key:"isTabEqual",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=!1;if(t.id&&e.id&&t.id===e.id)return n="fineReport"!==t.type&&"externalUrl"!==t.type||this.operationInfoService.isParamEqual(t.queryParams,e.queryParams);var i=e.currentUrl||e.routerLink;return r&&(n=this.simpleParseUrl(t.routerLink).url===this.simpleParseUrl(i).url),n}},{key:"simpleParseUrl",value:function(t){var e={url:null,params:null};if(!t)return e;var r=t.indexOf("?");return e.url=-1!==r?t.substr(0,r):t,e.params=-1!==r?t.substr(r+1):"",e}},{key:"initIndex",value:function(t){var e;-1===this.currentIndex&&(this.currentIndex=this.previousIndex=this.tabSetStateArray.length-1),void 0===this.tabSetStateArray[this.currentIndex]&&(e=this.createTabRouteState(t),this.tabSetStateArray[this.currentIndex]=Object.assign({},e),this.tabSetStateArray[this.currentIndex].navigateHistory.set(e.key,e))}}],[{key:"isUnderHosting",value:function(t){if(!t)return!1;for(var e,r=!1,n=0;n<t.pathFromRoot.length-1;n++)if((e=t.pathFromRoot[n]).routeConfig&&e.routeConfig.data&&e.routeConfig.data.tabSetHosting){r=!0;break}return r}},{key:"routeToUrl",value:function(t){return t.url?t.url.length?t.url.join("/"):"function"==typeof t.component?"[".concat(t.component.name,"]"):"string"==typeof t.component?"[".concat(t.component,"]"):"[null]":"(null)"}},{key:"getResolvedUrl",value:function(t){return t.pathFromRoot.map(function(t){return t.url.map(function(t){return t.toString()}).join("/")}).join("/")}}]),t}();return t.\u0275fac=function(e){return new(e||t)(h.\u0275\u0275inject(d.Router),h.\u0275\u0275inject(l.DwAuthService),h.\u0275\u0275inject(y.DwRouterInfoService),h.\u0275\u0275inject(x),h.\u0275\u0275inject(S.DwLanguagePreService),h.\u0275\u0275inject(y.DwOperationInfoService),h.\u0275\u0275inject(b.DwIframeGeneralInfoService),h.\u0275\u0275inject(g.DwIframeFinereportInfoService),h.\u0275\u0275inject(v.DW_TAB_MULTI_OPEN),h.\u0275\u0275inject(v.APP_DEFAULT),h.\u0275\u0275inject(v.DW_OPEN_DEFAULT_WHEN_CLOSE_TABS))},t.\u0275prov=h.\u0275\u0275defineInjectable({factory:function(){return new t(h.\u0275\u0275inject(d.Router),h.\u0275\u0275inject(l.DwAuthService),h.\u0275\u0275inject(y.DwRouterInfoService),h.\u0275\u0275inject(x),h.\u0275\u0275inject(S.DwLanguagePreService),h.\u0275\u0275inject(y.DwOperationInfoService),h.\u0275\u0275inject(b.DwIframeGeneralInfoService),h.\u0275\u0275inject(g.DwIframeFinereportInfoService),h.\u0275\u0275inject(v.DW_TAB_MULTI_OPEN),h.\u0275\u0275inject(v.APP_DEFAULT),h.\u0275\u0275inject(v.DW_OPEN_DEFAULT_WHEN_CLOSE_TABS))},token:t,providedIn:"root"}),t}(),T=function(){var t=function(){function t(e,r,n,i){var a=this;o(this,t),this.routeInfoService=e,this.programExecuteService=r,this.usingTab=n,this.router=i,this.urlSerializer=new d.DefaultUrlSerializer,this.eventSubject=new f.Subject,this.events=this.eventSubject.asObservable(),this.programExecuteService.executeTabProgram$.subscribe(function(t){a.create(t)})}return u(t,[{key:"tabRouterChanged",get:function(){return this.routeInfoService.tabRouterChanged.asObservable()}},{key:"create",value:function(t){var e;if(this.routeInfoService.isStarted){t&&(e=this.router.createUrlTree([t.routerLink],{queryParams:t.queryParams}));var r=this.urlSerializer.serialize(e);t.routerLink=r,this.routeInfoService.createFromRouteInfo(t),delete this.routeInfoService.getTabState(this.routeInfoService.currentIndex).opener}else t&&(e=this.router.createUrlTree([t.routerLink],{queryParams:t.queryParams}),this.router.navigateByUrl(e))}},{key:"navigateOrCreate",value:function(t,e,r,n){return!0===this.usingTab&&this.routeInfoService.isStarted?this.createOrNavigate(t,e,r,n):(this.router.navigate(t,e),null)}},{key:"navigateToOpenerOrCreate",value:function(t,e,r){!0===this.usingTab&&this.routeInfoService.isStarted?this.routeInfoService.navigateToOpenerFromCurrentTab(t,e,r):this.router.navigate(t,e)}},{key:"createOrNavigate",value:function(t,e,r,n){var i;console.log("createOrNavigate"),i=e?this.router.createUrlTree(t,e):this.router.createUrlTree(t);var a=this.urlSerializer.serialize(i);return this.routeInfoService.createFromRouteInfo({id:null,title:n,routerLink:a},r)}},{key:"close",value:function(){this.routeInfoService.closeCurrentTab()}},{key:"setTitle",value:function(t){this.routeInfoService.currentTabInfo&&(this.routeInfoService.currentTabInfo.title=t)}}]),t}();return t.\u0275fac=function(e){return new(e||t)(h.\u0275\u0275inject(m),h.\u0275\u0275inject(S.DwProgramExecuteService),h.\u0275\u0275inject(v.DW_USING_TAB),h.\u0275\u0275inject(d.Router))},t.\u0275prov=h.\u0275\u0275defineInjectable({factory:function(){return new t(h.\u0275\u0275inject(m),h.\u0275\u0275inject(S.DwProgramExecuteService),h.\u0275\u0275inject(v.DW_USING_TAB),h.\u0275\u0275inject(d.Router))},token:t,providedIn:"root"}),t}(),A=u(function t(e,r,n,i,a){o(this,t),this.tabId=e,this.url=r,this.id=n,this.module=i,this.type=a}),w=function(e){t(i,e);var n=r(i);function i(){return o(this,i),n.apply(this,arguments)}return u(i)}(A),R=function(e){t(i,e);var n=r(i);function i(){return o(this,i),n.apply(this,arguments)}return u(i)}(A),C=function(e){t(i,e);var n=r(i);function i(){return o(this,i),n.apply(this,arguments)}return u(i)}(A),O=function(e){t(i,e);var n=r(i);function i(){return o(this,i),n.apply(this,arguments)}return u(i)}(A),j=function(){var t=function(){function t(e,r,n){switch(o(this,t),this.strategy=e,e){case"local":this.storage=r;break;case"session":this.storage=n;break;default:this.storage=new I.BaseStorage}}return u(t,[{key:"clear",value:function(){this.storage.clear()}},{key:"get",value:function(t){return this.storage.get(t)}},{key:"getAll",value:function(){return this.storage.getAll()}},{key:"remove",value:function(t){this.storage.remove(t)}},{key:"set",value:function(t,e){this.storage.set(t,e)}}]),t}();return t.\u0275fac=function(e){return new(e||t)(h.\u0275\u0275inject(v.DW_TAB_STORE_STRATEGY),h.\u0275\u0275inject(I.LocalStorage),h.\u0275\u0275inject(I.SessionStorage))},t.\u0275prov=h.\u0275\u0275defineInjectable({factory:function(){return new t(h.\u0275\u0275inject(v.DW_TAB_STORE_STRATEGY),h.\u0275\u0275inject(I.LocalStorage),h.\u0275\u0275inject(I.SessionStorage))},token:t,providedIn:"root"}),t}()},64762:function(t,e,r){r.d(e,{ZT:function(){return i},pi:function(){return a},_T:function(){return o},gn:function(){return s},fM:function(){return u},w6:function(){return c},mG:function(){return h},ev:function(){return l}});var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)};function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var a=function(){return(a=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function o(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]])}return r}function s(t,e,r,n){var i,a=arguments.length,o=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(o=(a<3?i(o):a>3?i(e,r,o):i(e,r))||o);return a>3&&o&&Object.defineProperty(e,r,o),o}function u(t,e){return function(r,n){e(r,n,t)}}function c(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function h(t,e,r,n){return new(r||(r=Promise))(function(i,a){function o(t){try{u(n.next(t))}catch(e){a(e)}}function s(t){try{u(n.throw(t))}catch(e){a(e)}}function u(t){t.done?i(t.value):function(t){return t instanceof r?t:new r(function(e){e(t)})}(t.value).then(o,s)}u((n=n.apply(t,e||[])).next())})}function l(t,e,r){if(r||2===arguments.length)for(var n,i=0,a=e.length;i<a;i++)(n||!(i in e))&&(n||(n=Array.prototype.slice.call(e,0,i)),n[i]=e[i]);return t.concat(n||Array.prototype.slice.call(e))}}}])}();